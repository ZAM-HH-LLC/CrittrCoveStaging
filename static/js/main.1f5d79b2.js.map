{"version":3,"file":"static/js/main.1f5d79b2.js","mappings":"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","sources":["src/components/TutorialModal.js","src/components/ConfirmationModal.js","src/context/TutorialContext.js","src/components/Toast.js","src/components/ToastProvider.js","src/components/RoadmapSection.js","src/data/mockData.js","src/screens/HomeScreen.js","src/components/FloatingSaveButton.js","src/components/common/StepProgressIndicator.js","src/validation/validation.js","src/components/serviceCreation/CategorySelectionStep.js","src/components/serviceCreation/ServiceDetailsStep.js","src/components/serviceCreation/RatesAndReviewStep.js","src/components/ServiceCreationModal.js","src/components/ProfessionalServiceCard.js","src/utils/deviceUtils.js","src/components/ServiceManager.js","src/components/RecordedPets.js","src/components/EditableSection.js","src/components/ProfessionalTab.js","src/components/DatePicker.js","src/components/BackHeader.js","src/components/CrossPlatformView.js","src/utils/geocoding.js","src/components/AddressAutocomplete.js","src/components/profile/ProfilePhotoCropper.js","src/utils/imageCropUtils.js","src/components/SupportButton.js","src/components/profile/ProfileInfoTab.js","src/components/profile/ServicesAvailabilityTab.js","src/data/calculations.js","src/components/profile/PetsPreferencesTab.js","src/data/Timezones.js","src/components/profile/SettingsPaymentsTab.js","src/components/TabBar.js","src/screens/MyProfile.js","src/components/CustomButton.js","src/screens/SignIn.js","src/screens/SignUp.js","src/screens/ResetPassword.js","src/screens/ResetPasswordConfirm.js","src/components/BookingCard.js","src/components/common/ProfessionalAlert.js","src/components/modals/TermsOfServiceModal.js","src/components/bookingComponents/ReviewAndRatesCard.js","src/utils/formatStrings.js","src/components/modals/TosRequiredModal.js","src/components/BookingApprovalModal.js","src/screens/Dashboard.js","src/screens/BecomeProfessional.js","src/screens/MoreScreen.js","src/components/UnavailableTimeSlot.js","src/components/AvailabilityBookingCard.js","src/components/TimePicker.js","src/components/AddAvailabilityModal.js","src/components/ui/datetime-picker.js","src/components/DefaultSettingsModal.js","src/components/AvailabilityBottomSheet.js","src/components/UnavailableTimesModal.js","src/screens/AvailabilitySettings.js","src/screens/OwnerHistory.js","src/components/DateTimePicker.js","src/components/AddOccurrenceModal.js","src/components/RequestBookingModal.js","src/components/bookingComponents/ServiceAndPetsCard.js","src/components/bookingComponents/DateSelectionCard.js","src/components/bookingComponents/TimePickerDropdown.js","src/components/bookingComponents/NewTimeRangeSelector.js","src/components/bookingComponents/DayTimeSelector.js","src/components/bookingComponents/TimeSelectionCard.js","src/components/BookingStepModal.js","src/components/BookingMessageCard.js","src/components/DraftConfirmationModal.js","src/hooks/useWebSocket.js","src/utils/imageDownloadUtils.js","src/components/Messages/ImageViewer.js","src/components/Messages/ClickableImage.js","src/components/Messages/MessageDateSeparator.js","src/components/Messages/messageTimeUtils.js","src/data/contactSanitization.js","src/components/Messages/MessageList.js","src/components/Messages/ProfilePhoto.js","src/components/Messages/ConversationList.js","src/components/Messages/MessageInput.js","src/components/Messages/MessageHeader.js","src/components/ReviewsModal.js","src/components/ClientPetsModal.js","src/components/Messages/MessageTimestamp.js","src/components/ReviewModal.js","src/components/ReviewRequestCard.js","src/screens/MessageHistory.js","src/components/Messages/styles.js","src/components/Messages/useImageViewer.js","src/utils/messages/websocketUtils.ts","src/utils/messages/mobileTimeUtils.ts","src/components/Messages/mobile/MobileConversationItem.js","src/components/Messages/mobile/MobileConversationList.js","src/components/Messages/mobile/MobileMessageHeader.js","src/components/Messages/mobile/MobileMessageInput.js","src/components/Messages/mobile/MobileMessageBubble.js","src/components/Messages/mobile/MobileMessageList.js","src/components/Messages/mobile/MobileMessageHistory.js","src/components/Messages/MessageHistoryWrapper.js","src/screens/Settings.js","src/screens/PrivacyPolicy.js","src/screens/ProfessionalSettings.js","src/screens/TermsOfService.js","src/screens/HelpFAQ.js","src/screens/ContactUs.js","src/components/SearchBar.js","src/screens/Owners.js","src/components/CostCalculationModal.js","src/components/ServiceCard.js","src/screens/ProfessionalProfile.js","src/components/ContractList.js","src/components/OwnerPicker.js","src/components/ContractTemplate.js","src/components/ChronicleSummary.js","src/components/QuestionInput.js","src/components/ChronicleForm.js","src/screens/MyContracts.js","src/screens/ChangePassword.js","src/components/ServiceTypeSelect.js","src/components/SearchRefiner.js","src/components/ProfessionalList.js","src/components/MapView.js","src/components/ProfessionalServicesModal.js","src/screens/SearchProfessionalsListing.js","src/screens/MyBookings.js","src/components/LogoHeader.js","src/screens/ServiceManagerScreen.js","src/screens/BlogScreen.js","src/screens/BlogPost.js","src/screens/Waitlist.js","src/screens/TestToast.js","src/components/ConnectionCard.js","src/screens/Connections.js","App.js","src/api/API.js","src/components/Navigation.js","src/config/config.js","src/context/AuthContext.js","src/context/MessageNotificationContext.js","src/styles/fonts.js","src/styles/theme.js","src/utils/logging.js","src/utils/platformNavigation.js","src/utils/time_utils.js","src/utils/websocket.js","webpack://web/./src/styles/viewport-fix.css?2df9","node_modules/moment/locale|sync|/^/.//.*$","webpack/bootstrap","webpack/runtime/chunk loaded","webpack/runtime/compat get default export","webpack/runtime/define property getters","webpack/runtime/global","webpack/runtime/hasOwnProperty shorthand","webpack/runtime/make namespace object","webpack/runtime/node module decorator","webpack/runtime/publicPath","webpack/runtime/jsonp chunk loading","webpack/startup"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet, Platform, Alert, Animated, Dimensions } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { debugLog } from '../context/AuthContext';\nimport { useNavigation } from '@react-navigation/native';\n\nconst TutorialModal = ({\n  step,\n  totalSteps,\n  title,\n  description,\n  onNext,\n  onPrevious,\n  onSkip,\n  onClose,\n  onFinish,\n  position = 'bottomRight', // bottomRight, bottomLeft, topRight, topLeft\n  userRole,\n  is_DEBUG = false\n}) => {\n  const isFirstStep = step === 1;\n  const isLastStep = step === totalSteps;\n  const [isVisible, setIsVisible] = useState(true);\n  const [currentScreen, setCurrentScreen] = useState(null);\n  const navigation = useNavigation();\n  \n  // Animation values\n  const fadeAnim = useRef(new Animated.Value(0)).current;\n  const slideAnim = useRef(new Animated.Value(0)).current;\n  const overlayAnim = useRef(new Animated.Value(1)).current;\n  const { width, height } = Dimensions.get('window');\n\n  useEffect(() => {\n    if (is_DEBUG) {\n      debugLog('MBA54321 TutorialModal mounted/updated', {\n        isVisible,\n        currentStep: step,\n        userRole,\n        screen: currentScreen\n      });\n    }\n  }, [isVisible, step, userRole, currentScreen]);\n\n  useEffect(() => {\n    // Ensure the tutorial stays visible during screen changes\n    if (isVisible) {\n      debugLog('MBA54321 Tutorial is visible, ensuring it stays visible on screen change');\n      const timer = setTimeout(() => {\n        setIsVisible(true);\n      }, 100);\n      return () => clearTimeout(timer);\n    }\n  }, [isVisible]);\n\n  // Add a focus listener to ensure the tutorial stays visible when the screen changes\n  useEffect(() => {\n    const unsubscribe = navigation.addListener('focus', () => {\n      if (isVisible) {\n        debugLog('MBA54321 Screen focused, ensuring tutorial stays visible');\n        setIsVisible(true);\n      }\n    });\n\n    return unsubscribe;\n  }, [navigation, isVisible]);\n\n  // Animation effect\n  useEffect(() => {\n    // Fade in animation for modal\n    Animated.timing(fadeAnim, {\n      toValue: 1,\n      duration: 500,\n      useNativeDriver: true,\n    }).start();\n\n    // Animate from center to final position\n    Animated.timing(slideAnim, {\n      toValue: 1,\n      duration: 800,\n      useNativeDriver: true,\n    }).start();\n\n    // Fade out the overlay as the modal slides\n    Animated.timing(overlayAnim, {\n      toValue: 0,\n      duration: 800,\n      useNativeDriver: true,\n    }).start();\n  }, []);\n\n  const handleNext = () => {\n    if (is_DEBUG) {\n      debugLog('MBA54321 TutorialModal handleNext called', { step, totalSteps });\n    }\n    onNext();\n  };\n\n  const handlePrevious = () => {\n    if (is_DEBUG) {\n      debugLog('MBA54321 TutorialModal handlePrevious called', { step, totalSteps });\n    }\n    onPrevious();\n  };\n\n  const handleSkip = () => {\n    if (is_DEBUG) {\n      debugLog('MBA54321 TutorialModal handleSkip called');\n    }\n    onSkip();\n  };\n\n  const handleClose = () => {\n    if (is_DEBUG) {\n      debugLog('MBA54321 TutorialModal handleClose called');\n    }\n    onClose();\n  };\n\n  const handleFinish = () => {\n    if (is_DEBUG) {\n      debugLog('MBA54321 TutorialModal handleFinish called');\n    }\n    onFinish();\n  };\n\n  const getPositionStyles = () => {\n    switch (position) {\n      case 'bottomRight':\n        return {\n          bottom: 20,\n          right: 20,\n        };\n      case 'bottomLeft':\n        return {\n          bottom: 20,\n          left: 20,\n        };\n      case 'topRight':\n        return {\n          top: 20,\n          right: 20,\n        };\n      case 'topLeft':\n        return {\n          top: 20,\n          left: 20,\n        };\n      default:\n        return {\n          bottom: 20,\n          right: 20,\n        };\n    }\n  };\n\n  // Calculate the initial position (center of screen)\n  const initialPosition = {\n    top: (height + 60) / 2 - 150,\n    left: (width - 15) / 2 - 160,\n  };\n\n  // Get the final position\n  const finalPosition = getPositionStyles();\n\n  // Calculate the slide animation values\n  const slideStyle = {\n    transform: [\n      {\n        translateX: slideAnim.interpolate({\n          inputRange: [0, 1],\n          outputRange: [0, finalPosition.right ? width/2 - 160 : -width/2 + 160],\n        }),\n      },\n      {\n        translateY: slideAnim.interpolate({\n          inputRange: [0, 1],\n          outputRange: [0, finalPosition.bottom ? height/2 - 150 : -height/2 + 150],\n        }),\n      },\n    ],\n  };\n\n  return (\n    <>\n      <Animated.View \n        style={[\n          styles.overlay,\n          { opacity: overlayAnim }\n        ]}\n        pointerEvents=\"none\"\n      />\n      <Animated.View \n        style={[\n          styles.container, \n          initialPosition,\n          { opacity: fadeAnim },\n          slideStyle\n        ]}\n      >\n        <View style={styles.pulseBorder} />\n        <TouchableOpacity style={styles.closeButton} onPress={handleClose}>\n          <MaterialCommunityIcons name=\"close\" size={20} color={theme.colors.text} />\n        </TouchableOpacity>\n\n        <View style={styles.content}>\n          <Text style={styles.title}>{title}</Text>\n          <Text style={styles.description}>{description}</Text>\n\n          <View style={styles.footer}>\n            <View style={styles.leftButtons}>\n              {isFirstStep ? (\n                <TouchableOpacity style={styles.skipButton} onPress={handleSkip}>\n                  <Text style={styles.skipText}>Skip Tutorial</Text>\n                </TouchableOpacity>\n              ) : (\n                <TouchableOpacity style={styles.navigationButton} onPress={handlePrevious}>\n                  <MaterialCommunityIcons name=\"chevron-left\" size={20} color={theme.colors.primary} />\n                  <Text style={styles.navigationText}>Previous</Text>\n                </TouchableOpacity>\n              )}\n            </View>\n\n            <View style={styles.stepIndicator}>\n              <Text style={styles.stepText}>{step}/{totalSteps}</Text>\n            </View>\n\n            {isLastStep ? (\n              <TouchableOpacity style={styles.finishButton} onPress={handleFinish}>\n                <Text style={styles.finishText}>Finish Tutorial</Text>\n              </TouchableOpacity>\n            ) : (\n              <TouchableOpacity style={styles.navigationButton} onPress={handleNext}>\n                <Text style={styles.navigationText}>Next</Text>\n                <MaterialCommunityIcons name=\"chevron-right\" size={20} color={theme.colors.primary} />\n              </TouchableOpacity>\n            )}\n          </View>\n        </View>\n      </Animated.View>\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  overlay: {\n    position: Platform.OS === 'web' ? 'fixed' : 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    zIndex: 999,\n  },\n  container: {\n    position: Platform.OS === 'web' ? 'fixed' : 'absolute',\n    backgroundColor: theme.colors.surface,\n    borderRadius: 12,\n    padding: 20,\n    width: 320,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 4,\n    },\n    shadowOpacity: 0.3,\n    shadowRadius: 5,\n    elevation: 8,\n    zIndex: 1000,\n    borderWidth: 2,\n    borderColor: theme.colors.primary,\n  },\n  pulseBorder: {\n    position: 'absolute',\n    top: -4,\n    left: -4,\n    right: -4,\n    bottom: -4,\n    borderRadius: 14,\n    opacity: 0.7,\n  },\n  closeButton: {\n    position: 'absolute',\n    top: 12,\n    right: 12,\n    padding: 8,\n    zIndex: 1,\n  },\n  content: {\n    marginTop: 12,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: '700',\n    color: theme.colors.primary,\n    marginBottom: 8,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  description: {\n    fontSize: 16,\n    color: theme.colors.text,\n    marginBottom: 20,\n    lineHeight: 22,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  footer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginTop: 16,\n  },\n  leftButtons: {\n    flex: 1,\n  },\n  skipButton: {\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n  },\n  skipText: {\n    color: theme.colors.secondary,\n    fontSize: 14,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  navigationButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n  },\n  navigationText: {\n    color: theme.colors.primary,\n    fontSize: 14,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  finishButton: {\n    backgroundColor: theme.colors.primary,\n    paddingVertical: 8,\n    paddingHorizontal: 16,\n    borderRadius: 4,\n  },\n  finishText: {\n    color: theme.colors.surface,\n    fontSize: 14,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  stepIndicator: {\n    paddingHorizontal: 12,\n  },\n  stepText: {\n    color: theme.colors.secondary,\n    fontSize: 14,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default TutorialModal; ","import React from 'react';\nimport { Modal, View, Text, TouchableOpacity, StyleSheet, ActivityIndicator } from 'react-native';\nimport { theme } from '../styles/theme';\n\nconst ConfirmationModal = ({ \n  visible, \n  onClose, \n  onConfirm, \n  actionText,\n  isLoading = false\n}) => {\n  return (\n    <Modal\n      visible={visible}\n      transparent\n      animationType=\"fade\"\n      onRequestClose={onClose}\n    >\n      <View style={styles.modalOverlay}>\n        <View style={styles.modalContent}>\n          <Text style={styles.modalText}>\n            Are you sure you want to {actionText}?\n          </Text>\n          \n          <View style={styles.buttonContainer}>\n            <TouchableOpacity\n              style={[styles.button, styles.cancelButton]}\n              onPress={onClose}\n              disabled={isLoading}\n            >\n              <Text style={[\n                styles.cancelButtonText,\n                isLoading && styles.disabledText\n              ]}>\n                Cancel\n              </Text>\n            </TouchableOpacity>\n            \n            <TouchableOpacity\n              style={[\n                styles.button, \n                styles.confirmButton,\n                isLoading && styles.disabledButton\n              ]}\n              onPress={onConfirm}\n              disabled={isLoading}\n            >\n              {isLoading ? (\n                <ActivityIndicator size=\"small\" color={theme.colors.surface} />\n              ) : (\n                <Text style={styles.confirmButtonText}>Confirm</Text>\n              )}\n            </TouchableOpacity>\n          </View>\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    padding: 20,\n    width: '90%',\n    maxWidth: 400,\n  },\n  modalText: {\n    fontSize: theme.fontSizes.medium,\n    marginBottom: 20,\n    textAlign: 'center',\n    color: theme.colors.text,\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    gap: 10,\n  },\n  button: {\n    flex: 1,\n    paddingVertical: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  cancelButton: {\n    backgroundColor: theme.colors.surface,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  confirmButton: {\n    backgroundColor: theme.colors.primary,\n  },\n  cancelButtonText: {\n    color: theme.colors.text,\n    fontWeight: '500',\n  },\n  confirmButtonText: {\n    color: theme.colors.surface,\n    fontWeight: '500',\n  },\n  disabledButton: {\n    opacity: 0.7,\n  },\n  disabledText: {\n    opacity: 0.5,\n  },\n});\n\nexport default ConfirmationModal;","import React, { createContext, useState, useContext, useEffect } from 'react';\nimport axios from 'axios';\nimport { API_BASE_URL } from '../config/config';\nimport { AuthContext } from './AuthContext';\nimport { debugLog } from './AuthContext';\nimport { navigateToFrom } from '../components/Navigation';\nimport TutorialModal from '../components/TutorialModal';\nimport ConfirmationModal from '../components/ConfirmationModal';\nimport { useNavigation } from '@react-navigation/native';\n\nexport const TutorialContext = createContext();\n\nconst defaultTutorialStatus = {\n  done_client_tutorial: false,\n  done_pro_tutorial: false,\n};\n\nconst tutorialSteps = {\n  client: [\n    {\n      screen: 'MyProfile',\n      tab: 'profile_info',\n      title: 'Welcome to Your Profile',\n      description: 'This is where you can manage your personal information. Start by completing your profile to help professionals understand your needs better.',\n      position: 'bottomRight',\n    },\n    {\n      screen: 'MyProfile',\n      tab: 'pets_preferences',\n      title: 'Add Pets & Home Info',\n      description: 'Add information about your pets and their care preferences along with your home information. This helps professionals provide the best care possible.',\n      position: 'bottomRight',\n    },\n    {\n      screen: 'MyProfile',\n      tab: 'settings_payments',\n      title: 'Payment & Settings',\n      description: 'Set up your settings, payment methods, and subscription preferences to easily book services.',\n      position: 'bottomRight',\n    },\n    {\n      screen: 'Dashboard',\n      title: 'Your Dashboard',\n      description: 'Here you can view your upcoming bookings, track ongoing services, and manage your account.',\n      position: 'bottomRight',\n      onStepEnter: (navigation) => {\n        if (navigation) {\n          navigation.navigate('Dashboard');\n        }\n      }\n    },\n    {\n      screen: 'SearchProfessionalsListing',\n      title: 'Find Professionals',\n      description: 'Search for qualified professionals in your area. Filter by service type, availability, and more.',\n      position: 'bottomRight',\n    },\n    {\n      screen: 'BecomeProfessional',\n      title: 'Become a Professional',\n      description: 'Want to offer your services? You can apply to become a professional anytime.',\n      position: 'bottomRight',\n    },\n  ],\n  professional: [\n    {\n      screen: 'MyProfile',\n      tab: 'profile_info',\n      title: 'Welcome to Your Professional Profile',\n      description: 'This is where you can manage your professional information. Start by completing your profile to help clients find you.',\n      position: 'bottomRight',\n    },\n    {\n      screen: 'MyProfile',\n      tab: 'services',\n      title: 'Your Services',\n      description: 'Add and manage the services you offer. Set your rates, availability, and service areas.',\n      position: 'bottomRight',\n    },\n    {\n      screen: 'MyProfile',\n      tab: 'settings_payments',\n      title: 'Payment Settings',\n      description: 'Set up your payment methods and subscription preferences to receive payments from clients.',\n      position: 'bottomRight',\n    },\n    {\n      screen: 'Dashboard',\n      title: 'Your Dashboard',\n      description: 'Here you can view your upcoming bookings, track ongoing services, and manage your account.',\n      position: 'bottomRight',\n      onStepEnter: (navigation) => {\n        if (navigation) {\n          navigation.navigate('Dashboard');\n        }\n      }\n    },\n    {\n      screen: 'SearchClients',\n      title: 'Find Clients',\n      description: 'Search for potential clients in your area. Filter by service type, pet type, and more.',\n      position: 'bottomRight',\n    },\n  ],\n  // Default steps for when userRole is not set\n  default: [\n    {\n      screen: 'Home',\n      title: 'Welcome',\n      description: 'Welcome to CrittrCove! Let\\'s get started with a quick tour.',\n      position: 'bottomRight',\n    }\n  ]\n};\n\nexport const TutorialProvider = ({ children }) => {\n  const { isSignedIn, userRole, is_DEBUG } = useContext(AuthContext);\n  const navigation = useNavigation();\n  const [tutorialStatus, setTutorialStatus] = useState(defaultTutorialStatus);\n  const [currentStep, setCurrentStep] = useState(1);\n  const [isVisible, setIsVisible] = useState(false);\n  const [hasError, setHasError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n  const [skipConfirmationVisible, setSkipConfirmationVisible] = useState(false);\n  const [closeConfirmationVisible, setCloseConfirmationVisible] = useState(false);\n\n  useEffect(() => {\n    if (isSignedIn && userRole) {\n      debugLog(\"MBA54321 Both isSignedIn and userRole are available, fetching tutorial status\", { isSignedIn, userRole });\n      fetchTutorialStatus();\n    } else {\n      debugLog(\"MBA54321 Waiting for auth data\", { isSignedIn, userRole });\n      setIsLoading(false);\n    }\n  }, [isSignedIn, userRole]);\n\n  const fetchTutorialStatus = async () => {\n    try {\n      setIsLoading(true);\n      const response = await axios.get(`${API_BASE_URL}/api/users/v1/tutorial-status/current/`);\n      if (is_DEBUG) {\n        debugLog('MBA54321 Tutorial status:', response.data);\n      }\n      setTutorialStatus(response.data);\n      setHasError(false);\n      setErrorMessage('');\n      \n      // Show tutorial if it's not completed\n      if ((userRole === 'professional' && !response.data.done_pro_tutorial) ||\n          (userRole === 'petOwner' && !response.data.done_client_tutorial)) {\n        setIsVisible(true);\n        \n        // Redirect new users to MyProfile screen\n        if (is_DEBUG) {\n          debugLog('MBA54321 Redirecting new user to MyProfile screen');\n        }\n        // Use navigateToFrom instead of navigation.navigate to ensure proper tab highlighting\n        navigateToFrom(navigation, 'MyProfile', 'Dashboard', { screen: 'profile_info' });\n        \n        if (is_DEBUG) {\n          debugLog('MBA54321 Tutorial should be visible:', {\n            userRole,\n            done_client_tutorial: response.data.done_client_tutorial,\n            done_pro_tutorial: response.data.done_pro_tutorial\n          });\n        }\n      } else {\n        if (is_DEBUG) {\n          debugLog('MBA54321 Tutorial should NOT be visible');\n        }\n        setIsVisible(false);\n      }\n    } catch (error) {\n      console.error('Error fetching tutorial status:', error);\n      setHasError(true);\n      setErrorMessage('We had trouble loading your tutorial settings, but you can still proceed with the tutorial.');\n      // Show tutorial with default settings if there's an error\n      setTutorialStatus(defaultTutorialStatus);\n      setIsVisible(true);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const updateTutorialStatus = async (updates) => {\n    try {\n      const response = await axios.patch(\n        `${API_BASE_URL}/api/users/v1/tutorial-status/update_status/`,\n        updates\n      );\n      if (is_DEBUG) {\n        debugLog('MBA54321 Tutorial status updated:', response.data);\n      }\n      setTutorialStatus(response.data);\n      setHasError(false);\n      setErrorMessage('');\n    } catch (error) {\n      console.error('Error updating tutorial status:', error);\n      setHasError(true);\n      setErrorMessage('We had trouble saving your tutorial progress, but you can continue using the app.');\n      // Continue with local state even if server update fails\n      setTutorialStatus(prev => ({ ...prev, ...updates }));\n    }\n  };\n\n  const getCurrentStepData = () => {\n    // Determine which steps to use based on userRole\n    let roleKey = 'default';\n    if (userRole === 'professional') {\n      roleKey = 'professional';\n    } else if (userRole === 'petOwner' || userRole === 'client') {\n      roleKey = 'client';\n    }\n    \n    const steps = tutorialSteps[roleKey] || tutorialSteps.default;\n    \n    // Make sure currentStep is within bounds\n    const safeCurrentStep = Math.min(Math.max(1, currentStep), steps.length);\n    \n    // Get the step data\n    const stepData = steps[safeCurrentStep - 1];\n    \n    // If there's an error, add it to the first step's description\n    if (hasError && safeCurrentStep === 1) {\n      return {\n        ...stepData,\n        description: `${errorMessage}\\n\\n${stepData.description}`\n      };\n    }\n    \n    return stepData;\n  };\n\n  const handleNext = async () => {\n    debugLog(\"MBA54321 handleNext called\", { currentStep, userRole });\n    \n    // Check if we're at the last step\n    const roleKey = userRole === 'professional' ? 'professional' : 'client';\n    const steps = tutorialSteps[roleKey];\n    \n    if (currentStep >= steps.length) {\n      debugLog(\"MBA54321 At last step, completing tutorial\", { currentStep, totalSteps: steps.length });\n      // Don't complete the tutorial here, just move to the next step\n      // The tutorial will be completed when the user clicks the \"Finish Tutorial\" button\n      return;\n    }\n    \n    // Get the next step data before incrementing the step counter\n    const nextStep = steps[currentStep];\n    const currentStepData = steps[currentStep - 1];\n    \n    debugLog(\"MBA54321 Current step data\", currentStepData);\n    debugLog(\"MBA54321 Next step data\", nextStep);\n    \n    // Increment the step counter first\n    setCurrentStep(prevStep => prevStep + 1);\n    \n    // If we're navigating to a different screen or tab\n    if (nextStep.screen !== currentStepData.screen || (nextStep.tab && nextStep.tab !== currentStepData.tab)) {\n      debugLog(\"MBA54321 Navigating to different screen/tab\", { \n        from: currentStepData.screen, \n        to: nextStep.screen,\n        fromTab: currentStepData.tab,\n        toTab: nextStep.tab\n      });\n      \n      // Use navigateToFrom for consistent navigation behavior\n      if (nextStep.tab) {\n        // If we have a tab parameter, pass it in the params\n        navigateToFrom(navigation, nextStep.screen, currentStepData.screen, { screen: nextStep.tab });\n      } else {\n        // For screens without tabs\n        navigateToFrom(navigation, nextStep.screen, currentStepData.screen);\n      }\n      \n      // Keep the tutorial visible after navigation\n      setTimeout(() => {\n        setIsVisible(true);\n      }, 700);\n    }\n  };\n\n  const handlePrevious = () => {\n    debugLog(\"MBA54321 handlePrevious called\", { currentStep, userRole });\n    \n    if (currentStep > 1) {\n      // Get the previous step data before decrementing the step counter\n      const roleKey = userRole === 'professional' ? 'professional' : 'client';\n      const steps = tutorialSteps[roleKey];\n      const previousStep = steps[currentStep - 2]; // -2 because currentStep is 1-indexed\n      const currentStepData = steps[currentStep - 1];\n      \n      debugLog(\"MBA54321 Previous step data\", previousStep);\n      debugLog(\"MBA54321 Current step data\", currentStepData);\n      \n      // Decrement the step counter\n      setCurrentStep(prevStep => prevStep - 1);\n      \n      // If we're navigating to a different screen or tab\n      if (previousStep.screen !== currentStepData.screen || (previousStep.tab && previousStep.tab !== currentStepData.tab)) {\n        debugLog(\"MBA54321 Navigating back to different screen/tab\", { \n          from: currentStepData.screen, \n          to: previousStep.screen,\n          fromTab: currentStepData.tab,\n          toTab: previousStep.tab\n        });\n        \n        // Use navigateToFrom for consistent navigation behavior\n        if (previousStep.tab) {\n          // If we have a tab parameter, pass it in the params\n          navigateToFrom(navigation, previousStep.screen, currentStepData.screen, { screen: previousStep.tab });\n        } else {\n          // For screens without tabs\n          navigateToFrom(navigation, previousStep.screen, currentStepData.screen);\n        }\n        \n        // Keep the tutorial visible after navigation\n        setTimeout(() => {\n          setIsVisible(true);\n        }, 700);\n      }\n    }\n  };\n\n  const handleSkip = () => {\n    debugLog('MBA54321 handleSkip called through the later');\n    // Show confirmation modal before skipping\n    setSkipConfirmationVisible(true);\n  };\n\n  const handleSkipConfirm = () => {\n    debugLog('MBA54321 handleSkipConfirm called');\n    setSkipConfirmationVisible(false);\n    completeTutorial();\n  };\n\n  const handleSkipCancel = () => {\n    debugLog('MBA54321 handleSkipCancel called');\n    setSkipConfirmationVisible(false);\n  };\n\n  const handleClose = () => {\n    debugLog('MBA54321 handleClose called');\n    setCloseConfirmationVisible(true);\n  };\n\n  const handleCloseConfirm = () => {\n    debugLog('MBA54321 handleCloseConfirm called');\n    setCloseConfirmationVisible(false);\n    completeTutorial();\n  };\n\n  const handleCloseCancel = () => {\n    debugLog('MBA54321 handleCloseCancel called');\n    setCloseConfirmationVisible(false);\n  };\n\n  const completeTutorial = async () => {\n    debugLog(\"MBA54321 Completing tutorial\", { userRole });\n    \n    try {\n      // Update the tutorial status in the backend based on user role\n      const updates = {};\n      \n      // Set the appropriate tutorial completion flag based on user role\n      if (userRole === 'professional') {\n        updates.done_pro_tutorial = true;\n      } else if (userRole === 'petOwner' || userRole === 'client') {\n        updates.done_client_tutorial = true;\n      }\n      \n      // Update the tutorial status in the backend\n      await axios.patch(`${API_BASE_URL}/api/users/v1/tutorial-status/update_status/`, updates);\n      \n      debugLog(\"MBA54321 Tutorial status updated in backend\");\n      \n      // Hide the tutorial modal\n      setIsVisible(false);\n      \n      // Navigate to the Dashboard\n      debugLog(\"MBA54321 Navigating to Dashboard\");\n      navigateToFrom(navigation, 'Dashboard', getCurrentStepData().screen);\n      \n    } catch (error) {\n      debugLog(\"MBA54321 Error completing tutorial\", { error: error.message });\n      console.error('Error completing tutorial:', error);\n      \n      // Even if there's an error, try to navigate to Dashboard\n      navigateToFrom(navigation, 'Dashboard', getCurrentStepData().screen);\n    }\n  };\n\n  // If still loading, return a loading state\n  if (isLoading) {\n    return (\n      <TutorialContext.Provider\n        value={{\n          isVisible: false,\n          currentStep: 1,\n          totalSteps: 1,\n          stepData: tutorialSteps.default[0],\n          tutorialStatus: defaultTutorialStatus,\n          hasError: false,\n          errorMessage: '',\n          handleNext: () => {},\n          handlePrevious: () => {},\n          handleSkip: () => {},\n          completeTutorial: () => {},\n          setIsVisible: () => {},\n          isLoading: true\n        }}\n      >\n        {children}\n      </TutorialContext.Provider>\n    );\n  }\n\n  return (\n    <TutorialContext.Provider\n      value={{\n        isVisible,\n        setIsVisible,\n        currentStep,\n        setCurrentStep,\n        handleNext,\n        handlePrevious,\n        handleSkip,\n        completeTutorial,\n        isLoading,\n      }}\n    >\n      {children}\n      {isVisible && getCurrentStepData() && (\n        <TutorialModal\n          step={currentStep}\n          totalSteps={tutorialSteps[userRole === 'professional' ? 'professional' : \n                     (userRole === 'petOwner' || userRole === 'client') ? 'client' : 'default'].length}\n          title={getCurrentStepData().title}\n          description={getCurrentStepData().description}\n          onNext={handleNext}\n          onPrevious={handlePrevious}\n          onSkip={handleSkip}\n          onClose={handleClose}\n          onFinish={completeTutorial}\n          position={getCurrentStepData().position}\n          userRole={userRole}\n          is_DEBUG={is_DEBUG}\n        />\n      )}\n      <ConfirmationModal\n        visible={skipConfirmationVisible}\n        onClose={handleSkipCancel}\n        onConfirm={handleSkipConfirm}\n        actionText=\"skip the tutorial\"\n        isLoading={false}\n      />\n      <ConfirmationModal\n        visible={closeConfirmationVisible}\n        onClose={handleCloseCancel}\n        onConfirm={handleCloseConfirm}\n        actionText=\"close the tutorial\"\n        isLoading={false}\n      />\n    </TutorialContext.Provider>\n  );\n}; ","import React, { useEffect, useRef } from 'react';\nimport { View, Text, StyleSheet, Animated, TouchableOpacity, Dimensions, Platform } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\n\n/**\n * Toast notification component that slides in from the right corner\n * \n * @param {Object} props Component props\n * @param {boolean} props.visible Whether the toast is visible\n * @param {string} props.message The message to display in the toast\n * @param {string} props.type The type of toast: 'success', 'error', 'info', 'warning'\n * @param {Function} props.onDismiss Callback when toast is dismissed\n * @param {number} props.duration Duration in ms to show toast before auto-dismissing (default: 3000ms)\n */\nconst Toast = ({ \n  visible, \n  message, \n  type = 'success', \n  onDismiss,\n  duration = 3000\n}) => {\n  const animation = useRef(new Animated.Value(Dimensions.get('window').width)).current;\n  const opacity = useRef(new Animated.Value(0)).current;\n  const timeoutRef = useRef(null);\n\n  const getBackgroundColor = () => {\n    switch (type) {\n      case 'error':\n        return theme.colors.error;\n      case 'warning':\n        return theme.colors.warning || '#FFA726';\n      case 'info':\n        return theme.colors.info || '#29B6F6';\n      case 'success':\n      default:\n        return theme.colors.primary;\n    }\n  };\n\n  const getIcon = () => {\n    switch (type) {\n      case 'error':\n        return 'alert-circle';\n      case 'warning':\n        return 'alert';\n      case 'info':\n        return 'information';\n      case 'success':\n      default:\n        return 'check-circle';\n    }\n  };\n\n  const animateIn = () => {\n    Animated.parallel([\n      Animated.timing(animation, {\n        toValue: 0,\n        duration: 300,\n        useNativeDriver: true,\n      }),\n      Animated.timing(opacity, {\n        toValue: 1,\n        duration: 300,\n        useNativeDriver: true,\n      })\n    ]).start();\n  };\n\n  const animateOut = (callback) => {\n    Animated.parallel([\n      Animated.timing(animation, {\n        toValue: Dimensions.get('window').width,\n        duration: 300,\n        useNativeDriver: true,\n      }),\n      Animated.timing(opacity, {\n        toValue: 0,\n        duration: 300,\n        useNativeDriver: true,\n      })\n    ]).start(callback);\n  };\n\n  useEffect(() => {\n    if (visible) {\n      // Clear any existing timer\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n      \n      // Animate in\n      animateIn();\n      \n      // Set timer to automatically dismiss\n      timeoutRef.current = setTimeout(() => {\n        handleDismiss();\n      }, duration);\n    }\n\n    // Cleanup\n    return () => {\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n    };\n  }, [visible, duration]);\n\n  const handleDismiss = () => {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n    \n    animateOut(() => {\n      if (onDismiss) {\n        onDismiss();\n      }\n    });\n  };\n\n  if (!visible) return null;\n\n  return (\n    <View style={styles.container} pointerEvents=\"box-none\">\n      <Animated.View\n        style={[\n          styles.toast,\n          {\n            backgroundColor: getBackgroundColor(),\n            transform: [{ translateX: animation }],\n            opacity: opacity\n          }\n        ]}\n      >\n        <View style={styles.content}>\n          <MaterialCommunityIcons name={getIcon()} size={24} color=\"white\" style={styles.icon} />\n          <Text style={styles.message} numberOfLines={3} ellipsizeMode=\"tail\">{message}</Text>\n        </View>\n        <TouchableOpacity onPress={handleDismiss} style={styles.closeButton} hitSlop={{ top: 10, bottom: 10, left: 10, right: 10 }}>\n          <MaterialCommunityIcons name=\"close\" size={18} color=\"white\" />\n        </TouchableOpacity>\n      </Animated.View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    position: Platform.OS === 'web' ? 'fixed' : 'absolute',\n    bottom: 20,\n    right: 0,\n    zIndex: 9999,\n    paddingHorizontal: 16,\n    width: '100%',\n    alignItems: 'flex-end',\n  },\n  toast: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingVertical: 12,\n    paddingHorizontal: 12, \n    borderRadius: 8,\n    minWidth: 200,\n    maxWidth: 300,\n    elevation: 6,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n  },\n  content: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  icon: {\n    marginRight: 8,\n  },\n  message: {\n    color: '#fff',\n    fontSize: 14,\n    fontFamily: Platform.OS === 'web' ? undefined : theme.fonts?.regular?.fontFamily,\n    flex: 1,\n  },\n  closeButton: {\n    padding: 4,\n  }\n});\n\nexport default Toast; ","import React, { createContext, useState, useContext, useCallback } from 'react';\nimport { View, StyleSheet } from 'react-native';\nimport Toast from './Toast';\n\n// Create context\nconst ToastContext = createContext();\n\n/**\n * Hook to use the toast functionality\n * @returns {Function} showToast - Function to show a toast\n */\nexport const useToast = () => {\n  const context = useContext(ToastContext);\n  if (!context) {\n    throw new Error('useToast must be used within a ToastProvider');\n  }\n  return context;\n};\n\n/**\n * Provider component that wraps your app and provides toast functionality\n */\nexport const ToastProvider = ({ children }) => {\n  const [toast, setToast] = useState({\n    visible: false,\n    message: '',\n    type: 'success',\n    duration: 3000,\n  });\n\n  // Function to show a toast notification\n  const showToast = useCallback(({ message, type = 'success', duration = 3000 }) => {\n    setToast({\n      visible: true,\n      message,\n      type,\n      duration,\n    });\n  }, []);\n\n  // Function to hide the toast\n  const hideToast = useCallback(() => {\n    setToast(prev => ({\n      ...prev,\n      visible: false,\n    }));\n  }, []);\n\n  return (\n    <ToastContext.Provider value={showToast}>\n      <View style={styles.container}>\n        {children}\n        <Toast\n          visible={toast.visible}\n          message={toast.message}\n          type={toast.type}\n          duration={toast.duration}\n          onDismiss={hideToast}\n        />\n      </View>\n    </ToastContext.Provider>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    position: 'relative',\n  }\n});\n\nexport default ToastProvider; ","import React, { useState, useEffect, useContext } from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet, Modal, Platform } from 'react-native';\nimport { FontAwesome5 } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { AuthContext } from '../context/AuthContext';\n\nconst RoadmapSection = () => {\n  const [selectedMilestone, setSelectedMilestone] = useState(null);\n  const [modalVisible, setModalVisible] = useState(false);\n  const { screenWidth } = useContext(AuthContext);\n  const isMobile = screenWidth < 768;\n\n  const roadmapData = [\n    {\n      id: 1,\n    //   number: '01',\n      title: 'Prototype Launch',\n      description: 'Initial release of CrittrCove webpage and landing page with no signup or app functionality.',\n      icon: 'dog',\n      color: theme.colors.mainColors.senary // Royal Blue\n    },\n    {\n      id: 2,\n    //   number: '02',\n      title: 'Launch of MVP',\n      description: 'This is when users will be able to sign up and use the app fully for the first time on the website! For a full feature list, please check our blog or discord.',\n      icon: 'dragon',\n      color: theme.colors.mainColors.quinary // Medium Purple\n    },\n    {\n      id: 3,\n    //   number: '03',\n      title: 'Launch of App',\n      description: 'Mobile app release with real-time messaging, notifications, and payment integration. For a full feature list, please check our blog or discord.',\n      icon: 'cat',\n      color: theme.colors.mainColors.quaternary // Royal Blue\n    },\n    {\n      id: 4,\n    //   number: '04',\n      title: 'Community Features',\n      description: 'Adding social features, pet communities, and expert advice forums.',\n      icon: 'fish',\n      color: theme.colors.mainColors.main // Medium Purple\n    }\n  ];\n\n  const handleMilestonePress = (milestone) => {\n    setSelectedMilestone(milestone);\n    setModalVisible(true);\n  };\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Roadmap</Text>\n      \n      {isMobile ? (\n        // Mobile Layout\n        <View style={styles.mobileContainer}>\n          {roadmapData.map((milestone, index) => (\n            <View key={milestone.id} style={[\n              styles.mobileItemContainer,\n              index === roadmapData.length - 1 ? { marginBottom: 0 } : null\n            ]}>\n              <TouchableOpacity\n                style={styles.mobileMarker}\n                onPress={() => handleMilestonePress(milestone)}\n              >\n                <View style={[styles.markerContainer, { backgroundColor: milestone.color }]}>\n                  <FontAwesome5 name={milestone.icon} size={24} color=\"white\" />\n                </View>\n              </TouchableOpacity>\n              <Text style={styles.mobileMilestoneTitle}>{milestone.title}</Text>\n              {index < roadmapData.length - 1 && (\n                <View style={styles.mobileDashedLine} />\n              )}\n            </View>\n          ))}\n        </View>\n      ) : (\n        // Web Layout\n        <View style={styles.webContainer}>\n          <View style={[styles.dashedLine, {\n            width: '80%',\n            left: '10%'\n          }]} />\n          {roadmapData.map((milestone, index) => (\n            <TouchableOpacity\n              key={milestone.id}\n              style={[\n                styles.webMarker,\n                { \n                  left: `${10 + (index * (80 / (roadmapData.length - 1)))}%`,\n                }\n              ]}\n              onPress={() => handleMilestonePress(milestone)}\n            >\n              <View style={[styles.markerContainer, { backgroundColor: milestone.color }]}>\n                <FontAwesome5 name={milestone.icon} size={24} color=\"white\" />\n              </View>\n              <Text style={styles.webMilestoneTitle}>{milestone.title}</Text>\n            </TouchableOpacity>\n          ))}\n        </View>\n      )}\n\n      {/* Modal for milestone details */}\n      <Modal\n        visible={modalVisible}\n        transparent={true}\n        animationType=\"fade\"\n        onRequestClose={() => setModalVisible(false)}\n      >\n        <View style={styles.modalOverlay}>\n          <View style={styles.modalContent}>\n            {selectedMilestone && (\n              <>\n                <View style={[styles.modalIconContainer, { backgroundColor: selectedMilestone.color }]}>\n                  <Text style={styles.modalNumber}>{selectedMilestone.number}</Text>\n                  <FontAwesome5 \n                    name={selectedMilestone.icon} \n                    size={40} \n                    color=\"white\"\n                  />\n                </View>\n                <Text style={styles.modalTitle}>{selectedMilestone.title}</Text>\n                <Text style={styles.modalDescription}>\n                  {selectedMilestone.description}\n                </Text>\n                <TouchableOpacity\n                  style={[styles.closeButton, { backgroundColor: selectedMilestone.color }]}\n                  onPress={() => setModalVisible(false)}\n                >\n                  <Text style={styles.closeButtonText}>Close</Text>\n                </TouchableOpacity>\n              </>\n            )}\n          </View>\n        </View>\n      </Modal>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    padding: 20,\n    width: '100%',\n    maxWidth: 1200,\n    marginLeft: 'auto',\n    marginRight: 'auto',\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    textAlign: 'center',\n    marginBottom: 40,\n    color: 'black',\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  mobileContainer: {\n    width: '100%',\n    alignItems: 'center',\n    paddingVertical: 20,\n  },\n  mobileItemContainer: {\n    width: '100%',\n    alignItems: 'center',\n    marginBottom: 80,\n    position: 'relative',\n  },\n  mobileMarker: {\n    alignItems: 'center',\n    marginBottom: 20,\n  },\n  mobileMilestoneTitle: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: 'black',\n    marginTop: 15,\n    textAlign: 'center',\n    marginBottom: 30,\n  },\n  mobileDashedLine: {\n    position: 'absolute',\n    width: 2,\n    height: 60,\n    bottom: -50,\n    borderStyle: 'dashed',\n    borderWidth: 1,\n    borderColor: '#333',\n  },\n  webContainer: {\n    // height: 200,\n    position: 'relative',\n    marginTop: 20,\n    marginBottom: 120,\n    width: '100%',\n  },\n  dashedLine: {\n    position: 'absolute',\n    height: 2,\n    top: 30,\n    borderStyle: 'dashed',\n    borderWidth: 1,\n    borderColor: '#333',\n  },\n  webMarker: {\n    position: 'absolute',\n    alignItems: 'center',\n    width: 120,\n    transform: [{ translateX: -60 }], // Center the marker\n  },\n  webMilestoneTitle: {\n    marginTop: 10,\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: 'black',\n    textAlign: 'center',\n  },\n  markerContainer: {\n    width: 60,\n    height: 60,\n    borderRadius: 30,\n    justifyContent: 'center',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 4,\n    elevation: 5,\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  modalContent: {\n    backgroundColor: 'white',\n    padding: 20,\n    borderRadius: 15,\n    width: '90%',\n    maxWidth: 400,\n    alignItems: 'center',\n  },\n  modalIconContainer: {\n    width: 80,\n    height: 80,\n    borderRadius: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: 20,\n  },\n  modalNumber: {\n    color: 'white',\n    fontSize: 20,\n    fontWeight: 'bold',\n    position: 'absolute',\n    top: 10,\n  },\n  modalTitle: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 15,\n    color: 'black',\n    textAlign: 'center',\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  modalDescription: {\n    fontSize: 18,\n    textAlign: 'center',\n    marginBottom: 20,\n    color: 'black',\n    lineHeight: 24,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  closeButton: {\n    padding: 12,\n    borderRadius: 8,\n    width: '100%',\n    alignItems: 'center',\n  },\n  closeButtonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n});\n\nexport default RoadmapSection; ","// First, declare the BOOKING_STATES constant\nexport const BOOKING_STATES = {\n  // # Initial States\n  DRAFT: 'Draft',\n  PENDING_INITIAL_PROFESSIONAL_CHANGES: 'Pending Initial Professional Changes',\n    \n  // # Review States\n  PENDING_PROFESSIONAL_CHANGES: 'Pending Professional Changes',\n  PENDING_CLIENT_APPROVAL: 'Pending Owner Approval',\n    \n  // # Active States\n  CONFIRMED: 'Confirmed',\n  CONFIRMED_PENDING_PROFESSIONAL_CHANGES: 'Confirmed Pending Professional Changes',\n  CONFIRMED_PENDING_CLIENT_APPROVAL: 'Confirmed Pending Owner Approval',\n    \n  // # Terminal States\n  COMPLETED: 'Completed',\n  DENIED: 'Denied',\n  CANCELLED: 'Cancelled',\n\n  // # States where professionals can edit\n  PROFESSIONAL_EDITABLE_STATES: [\n    'Draft',\n    'Pending Initial Professional Changes',\n    'Pending Professional Changes',\n    'Confirmed Pending Professional Changes',\n    'Confirmed'\n  ]\n};\n\nexport const ALL_SERVICES = \"All Services\";\nexport const SERVICE_TYPES = [\n  ALL_SERVICES,\n  \"Overnight Cat Sitting (Owner's Home)\",\n  \"Cat Boarding\",\n  \"Drop-In Visits (30 min)\",\n  \"Drop-In Visits (60 min)\",\n  \"Dog Walking\",\n  \"Doggy Day Care\",\n  \"Pet Boarding\",\n  \"Exotic Pet Care\",\n  \"Daytime Pet Sitting\",\n  \"Ferrier\",\n];\n\nexport const TIME_OPTIONS = [\n  '15 Min',\n  '30 Min',\n  '45 Min',\n  '1 Hour',\n  '2 Hour',\n  '3 Hour',\n  '4 Hour',\n  '5 Hour',\n  '6 Hour',\n  '7 Hour',\n  '8 Hour',\n  '24 Hour',\n  'Per Day',\n  'Per Visit',\n  'Week'\n];\n\n// Mapping of user-friendly time unit labels to backend constants\nexport const TIME_UNIT_MAPPING = {\n  // User-friendly labels mapped to backend constants\n  'Per Visit': 'Per Visit',\n  'Per Day (24 Hours)': 'Per Day',\n  'Per Night': 'Per Night',\n  'Every 15 Minutes': '15 Min',\n  'Every 30 Minutes': '30 Min',\n  'Every 45 Minutes': '45 Min',\n  'Per Hour': '1 Hour',\n  'Every 2 Hours': '2 Hour',\n  'Every 3 Hours': '3 Hour',\n  'Every 4 Hours': '4 Hour',\n  'Every 5 Hours': '5 Hour',\n  'Every 6 Hours': '6 Hour',\n  'Every 7 Hours': '7 Hour',\n  'Every 8 Hours': '8 Hour',\n  'Per Week': 'Week'\n};\n\n// Reverse mapping for display purposes\nexport const BACKEND_TO_FRONTEND_TIME_UNIT = Object.entries(TIME_UNIT_MAPPING).reduce((acc, [key, value]) => {\n  acc[value] = key;\n  return acc;\n}, {});\n\nexport const mockAdditionalRates = {\n  'Fish Tank Cleaning': [\n    { title: 'Extended Stay (7+ days)', amount: 15 },\n    { title: 'Pickup/Dropoff Service', amount: 25 },\n    { title: 'Special Diet Handling', amount: 10 },\n    { title: 'Medication Administration', amount: 15 },\n  ],\n  'Ferrier': [\n    { title: 'Extended Hours', amount: 20 },\n    { title: 'Training Session', amount: 30 },\n    { title: 'Grooming', amount: 25 },\n  ],\n  'Dog Walking': [\n    { title: 'Extra 15 Minutes', amount: 10 },\n    { title: 'Plant Watering', amount: 5 },\n    { title: 'Photo Updates', amount: 5 },\n  ],\n  'Reptile Boarding & Habitat Maintenance': [\n    { title: 'Plant Watering', amount: 10 },\n    { title: 'Mail Collection', amount: 5 },\n    { title: 'Extended Visit (4+ hrs)', amount: 30 },\n  ],\n  'Bird Feeding': [\n    { title: 'Extra 15 Minutes', amount: 10 },\n    { title: 'Multiple Route Options', amount: 5 },\n    { title: 'Training During Walk', amount: 20 },\n  ],\n};\n\nexport const mockServicesForCards = [\n  {\n    id: 1,\n    name: 'Fish Tank Cleaning',\n    startingPrice: 25,\n    animalTypes: ['Fish'],\n    icon: 'fish',\n    additionalRates: mockAdditionalRates['Fish Tank Cleaning']\n  },\n  {\n    id: 2,\n    name: 'Ferrier',\n    startingPrice: 30,\n    animalTypes: ['Dogs'],\n    icon: 'horse',\n    additionalRates: mockAdditionalRates['Ferrier']\n  },\n  {\n    id: 3,\n    name: 'Dog Walking',\n    startingPrice: 40,\n    animalTypes: ['Dogs'],\n    icon: 'dog',\n    additionalRates: mockAdditionalRates['Dog Walking']\n  },\n  {\n    id: 4,\n    name: 'Reptile Boarding & Habitat Maintenance',\n    startingPrice: 35,\n    animalTypes: ['Reptiles'],\n    icon: 'snake',\n    additionalRates: mockAdditionalRates['Reptile Boarding & Habitat Maintenance']\n  },\n  {\n    id: 5,\n    name: 'Bird Feeding',\n    startingPrice: 45,\n    animalTypes: ['Birds'],\n    icon: 'bird',\n    additionalRates: mockAdditionalRates['Bird Feeding']\n  }\n];\n\nexport const GENERAL_CATEGORIES = [\n  'Farm Animals', \n  'Domestic',\n  'Exotic',\n  'Aquatic',\n  'Invertibrates',\n];\n\nexport const mockPets = [\n  {\n    id: '1',\n    name: 'Max',\n    animal_type: 'Dog',\n    breed: 'border collie',\n    age: {\n      months: 0,\n      years: 5,\n    },\n    weight: 32,\n    sex: 'Male',\n    friendlyWithChildren: true,\n    friendlyWithCats: false,\n    friendlyWithDogs: true,\n    spayedNeutered: true,\n    houseTrained: true,\n    microchipped: true,\n    adoptionDate: '2020-01-15',\n    description: 'Loves to play fetch and go for walks.',\n    energyLevel: 'High',\n    feedingSchedule: 'Morning',\n    leftAlone: '1-4 hours',\n    medication: null,\n    additionalInstructions: 'Needs daily exercise.',\n    vetName: 'Dr. Smith',\n    vetAddress: '123 Vet St.',\n    vetPhone: '555-1234',\n    insuranceProvider: 'Pet Insurance Co.',\n    vetDocuments: [],\n    galleryImages: [],\n  },\n  {\n    id: '2',\n    name: 'Whiskers',\n    animal_type: 'Cat',\n    breed: 'tammy ammy',\n    age: {\n      months: 3,\n      years: 4,\n    },\n    weight: 16,\n    sex: 'Female',\n    friendlyWithChildren: true,\n    friendlyWithCats: true,\n    friendlyWithDogs: false,\n    spayedNeutered: true,\n    houseTrained: true,\n    microchipped: false,\n    adoptionDate: '2019-05-20',\n    description: 'Enjoys lounging in the sun.',\n    energyLevel: 'Low',\n    feedingSchedule: 'Twice a day',\n    leftAlone: '4-8 hours',\n    medication: null,\n    additionalInstructions: 'Prefers quiet environments.',\n    vetName: 'Dr. Jones',\n    vetAddress: '456 Vet Ave.',\n    vetPhone: '555-5678',\n    insuranceProvider: 'Pet Health Insurance',\n    vetDocuments: [],\n    galleryImages: [],\n  },\n  {\n    id: '3',\n    name: 'Buddy',\n    animal_type: 'snake',\n    breed: 'leopard gecko',\n    age: {\n      months: 0,\n      years: 2,\n    },\n    weight: 1,\n    sex: 'Male',\n    friendlyWithChildren: false,\n    friendlyWithCats: false,\n    friendlyWithDogs: false,\n    spayedNeutered: false,\n    houseTrained: false,\n    microchipped: false,\n    adoptionDate: '2021-08-10',\n    description: 'A calm and quiet pet.',\n    energyLevel: 'Low',\n    feedingSchedule: ['Custom', '3 times a day with liquid food.'],\n    leftAlone: 'Can be left alone indefinitely',\n    medication: null,\n    additionalInstructions: 'Keep in a warm environment.',\n    vetName: 'Dr. Green',\n    vetAddress: '789 Vet Blvd.',\n    vetPhone: '555-9012',\n    insuranceProvider: 'Reptile Insurance Co.',\n    vetDocuments: [],\n    galleryImages: [],\n  },\n];\n\nexport const mockProfessionals = [\n  {\n    id: 1,\n    name: \"Mike V.\",\n    profilePicture: require('../../assets/user1.png'),\n    location: \"Briargate, Colorado Springs, CO, 80920\",\n    rating: 5.0,\n    reviewCount: 72,\n    price: 35,\n    distance: \"5.7 mi. away\",\n    coordinates: {\n      latitude: 38.8339,\n      longitude: -104.8214,\n    },\n    services: [\"Dog Walking\", \"Pet Sitting\", \"Grooming\"],\n    experience: \"5 years\",\n    description: \"Professional pet sitter with extensive experience in dog walking and pet sitting. Certified in pet first aid and CPR.\",\n    repeat_owners: 18,\n    verified: true,\n    bestReview: \"Benny's stay with Mike was outstanding! I would not hesitate to have Benny stay with them again. I would highly recommend Mike to anyone needing pet care services.\"\n  },\n  {\n    id: 2,\n    name: \"Sarah Johnson\",\n    profilePicture: require('../../assets/user2.png'),\n    location: \"Colorado Springs, CO\",\n    rating: 4.8,\n    reviewCount: 127,\n    price: 45,\n    coordinates: {\n      latitude: 38.8340,\n      longitude: -104.8215,\n    },\n    services: [\"Dog Walking\", \"Pet Sitting\", \"Training\"],\n    experience: \"8 years\",\n    description: \"Experienced dog trainer and pet sitter. Specializes in working with large breeds and puppies.\",\n    verified: true,\n    bestReview: \"Sarah is amazing with pets! She took great care of my dog and sent regular updates.\"\n  },\n  {\n    id: 3,\n    name: \"Emily Rodriguez\",\n    profilePicture: require('../../assets/user3.png'),\n    location: \"Colorado Springs, CO\",\n    rating: 4.7,\n    reviewCount: 156,\n    price: 40,\n    coordinates: {\n      latitude: 38.8341,\n      longitude: -104.8216,\n    },\n    services: [\"Dog Walking\", \"Pet Sitting\", \"Grooming\", \"Training\"],\n    experience: \"6 years\",\n    description: \"Professional pet sitter and groomer. Available for both short-term and long-term pet care needs.\",\n    verified: true\n  },\n  {\n    id: 4,\n    name: \"David Kim\",\n    profilePicture: require('../../assets/user4.png'),\n    location: \"Colorado Springs, CO\",\n    rating: 4.9,\n    reviewCount: 98,\n    price: 55,\n    coordinates: {\n      latitude: 38.8342,\n      longitude: -104.8217,\n    },\n    services: [\"Dog Walking\", \"Pet Sitting\", \"Training\", \"Grooming\"],\n    experience: \"10 years\",\n    description: \"Certified dog trainer and experienced pet sitter. Specializes in working with rescue dogs and behavioral training.\",\n    verified: true\n  },\n  {\n    id: 5,\n    name: \"Lisa Thompson\",\n    profilePicture: require('../../assets/user5.png'),\n    location: \"Colorado Springs, CO\",\n    rating: 4.8,\n    reviewCount: 143,\n    price: 45,\n    coordinates: {\n      latitude: 38.8343,\n      longitude: -104.8218,\n    },\n    services: [\"Dog Walking\", \"Pet Sitting\", \"Grooming\"],\n    experience: \"7 years\",\n    description: \"Professional pet sitter with a passion for animal care. Available for both regular and occasional pet sitting needs.\",\n    verified: true\n  },\n  {\n    id: 6,\n    name: \"John Martinez\",\n    profilePicture: require('../../assets/user6.png'),\n    location: \"Colorado Springs, CO\",\n    rating: 4.6,\n    reviewCount: 89,\n    price: 42,\n    coordinates: {\n      latitude: 38.8344,\n      longitude: -104.8219,\n    },\n    services: [\"Dog Walking\", \"Pet Sitting\"],\n    experience: \"4 years\",\n    description: \"Dedicated pet care professional specializing in dog walking and pet sitting services.\",\n    verified: true\n  },\n  {\n    id: 7,\n    name: \"Rachel White\",\n    profilePicture: require('../../assets/user7.png'),\n    location: \"Colorado Springs, CO\",\n    rating: 4.9,\n    reviewCount: 167,\n    price: 48,\n    coordinates: {\n      latitude: 38.8345,\n      longitude: -104.8220,\n    },\n    services: [\"Dog Walking\", \"Pet Sitting\", \"Training\"],\n    experience: \"9 years\",\n    description: \"Experienced pet trainer and caregiver with a focus on positive reinforcement techniques.\",\n    verified: true\n  },\n  {\n    id: 8,\n    name: \"Michael Chen\",\n    profilePicture: require('../../assets/user8.png'),\n    location: \"Colorado Springs, CO\",\n    rating: 4.7,\n    reviewCount: 112,\n    price: 38,\n    coordinates: {\n      latitude: 38.8346,\n      longitude: -104.8221,\n    },\n    services: [\"Dog Walking\", \"Pet Sitting\", \"Grooming\"],\n    experience: \"5 years\",\n    description: \"Professional pet groomer and sitter with expertise in handling various breeds.\",\n    verified: true\n  },\n  {\n    id: 9,\n    name: \"Amanda Foster\",\n    profilePicture: require('../../assets/user9.png'),\n    location: \"Colorado Springs, CO\",\n    rating: 4.8,\n    reviewCount: 134,\n    price: 44,\n    coordinates: {\n      latitude: 38.8347,\n      longitude: -104.8222,\n    },\n    services: [\"Dog Walking\", \"Pet Sitting\", \"Training\"],\n    experience: \"7 years\",\n    description: \"Certified pet trainer with extensive experience in behavioral modification.\",\n    verified: true\n  },\n  {\n    id: 10,\n    name: \"Robert Taylor\",\n    profilePicture: require('../../assets/user10.png'),\n    location: \"Colorado Springs, CO\",\n    rating: 4.9,\n    reviewCount: 178,\n    price: 50,\n    coordinates: {\n      latitude: 38.8348,\n      longitude: -104.8223,\n    },\n    services: [\"Dog Walking\", \"Pet Sitting\", \"Training\", \"Grooming\"],\n    experience: \"11 years\",\n    description: \"Comprehensive pet care professional offering a full range of services.\",\n    verified: true\n  }\n];\n\nexport const mockOwners = [\n  {\n    id: '1',\n    name: 'Alice Johnson',\n    pet_types: ['Dog', 'Cat'],\n    last_booking: '2024-01-15',\n    pets: ['1', '2'], // References to pet IDs\n    email: 'alice@example.com',\n    phone: '555-0101',\n    address: '123 Pine St, Colorado Springs, CO',\n  },\n  {\n    id: '2',\n    name: 'Bob Wilson',\n    pet_types: ['Dog'],\n    last_booking: '2024-02-01',\n    pets: ['3'],\n    email: 'bob@example.com',\n    phone: '555-0102',\n    address: '456 Oak Ave, Colorado Springs, CO',\n  },\n  {\n    id: '3',\n    name: 'Carol Martinez',\n    pet_types: ['Cat', 'Exotic'],\n    last_booking: '2024-01-28',\n    pets: ['4', '5'],\n    email: 'carol@example.com',\n    phone: '555-0103',\n    address: '789 Maple Dr, Colorado Springs, CO',\n  },\n  {\n    id: '4',\n    name: 'David Brown',\n    pet_types: ['Dog'],\n    last_booking: '2024-02-05',\n    pets: ['6'],\n    email: 'david@example.com',\n    phone: '555-0104',\n    address: '321 Elm St, Colorado Springs, CO',\n  },\n  {\n    id: '5',\n    name: 'Eva Garcia',\n    pet_types: ['Exotic'],\n    last_booking: '2024-01-20',\n    pets: ['7'],\n    email: 'eva@example.com',\n    phone: '555-0105',\n    address: '654 Birch Ln, Colorado Springs, CO',\n  }\n];\n\n// Availability Tab\nexport const fetchAvailabilityData = () => {\n  return new Promise((resolve) => {\n    // to get the bookings, we need to fetch the booking table on backend\n    // to get available/unavailable dates we need to fetch the availability table on backend\n    setTimeout(() => {\n      resolve({\n        availableDates: {\n          '2025-02-01': { startTime: '09:00', endTime: '17:00' },\n          '2025-02-02': { startTime: '10:00', endTime: '18:00' },\n          '2025-02-03': { startTime: '09:00', endTime: '17:00' },\n        },\n        unavailableDates: {\n          '2025-02-04': { startTime: '00:00', endTime: '24:00' },\n          '2025-02-05': { startTime: '10:00', endTime: '18:00' },\n        },\n        bookings: {\n          '2025-02-06': [\n            { id: 'bk1', startTime: '14:00', endTime: '16:00', owner_name: 'Charlie', service_type: 'Dog Walking' },\n            { id: 'bk2', startTime: '16:00', endTime: '18:00', owner_name: 'Bob', service_type: 'Dog Walking' },\n            { id: 'bk3', startTime: '18:00', endTime: '20:00', owner_name: 'Nick', service_type: 'Pet Boarding' },\n            { id: 'bk4', startTime: '20:00', endTime: '22:00', owner_name: 'Alfred', service_type: 'Drop-In Visits (30 min)' }\n          ],\n          '2025-02-07': [\n            { id: 'bk5', startTime: '10:00', endTime: '12:00', owner_name: 'Uhtred', service_type: 'Dog Walking' }\n          ],\n        },\n      });\n    }, 1000);\n  });\n};\n\n// Add mock update functions\nexport const updateAvailability = (updates) => {\n  console.log(\"updateAvailability\", updates);\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve({ success: true, data: updates });\n    }, 500);\n  });\n};\n\nexport const updateBooking = (bookingData) => {\n  console.log(\"updateBooking\", bookingData);\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve({ success: true, data: bookingData });\n    }, 500);\n  });\n};\n\nconst sharedBookingDetails = {\n  booking_id: 'bk1',\n  status: 'Confirmed',\n  owner_name: 'matt aertker',\n  professional_name: 'matt2 aertker2',\n  service_details: {\n    service_type: 'Ferrier'\n  },\n  pets: [\n    {\n      pet_id: 3,\n      name: 'Jack',\n      species: 'DOG',\n      breed: 'Golden'\n    }\n  ],\n  occurrences: [\n    {\n      occurrence_id: 10,\n      start_date: '2025-02-01',\n      end_date: '2025-02-02',\n      start_time: '15:06',\n      end_time: '16:06',\n      calculated_cost: '61.04',\n      base_total: '$26.04',\n      rates: {\n        base_rate: '25.00',\n        additional_animal_rate: '5.00',\n        additional_animal_rate_applies: false,\n        applies_after: 2,\n        unit_of_time: 'PER_DAY',\n        holiday_rate: '35.00',\n        holiday_days: 0,\n        additional_rates: [\n          {\n            title: 'Extra Travel Time Rate',\n            description: 'Far Drive rate for service',\n            amount: '$25.00'\n          },\n          {\n            title: 'Dog Poops Inside Rate',\n            description: 'Dog Poops Inside rate for service',\n            amount: '$5.00'\n          },\n          {\n            title: 'Dog Separation rate',\n            description: 'When we need to separate the dog from other animals in the house',\n            amount: '$5.00'\n          }\n        ]\n      }\n    },\n    {\n      occurrence_id: 9,\n      start_date: '2025-03-13',\n      end_date: '2025-03-14',\n      start_time: '09:00',\n      end_time: '14:00',\n      calculated_cost: '120.08',\n      base_total: '$35.04',\n      rates: {\n        base_rate: '29.00',\n        additional_animal_rate: '8.00',\n        additional_animal_rate_applies: false,\n        applies_after: 1,\n        unit_of_time: 'PER_DAY',\n        holiday_rate: '40.00',\n        holiday_days: 0,\n        additional_rates: [\n          {\n            title: 'Extra Travel Time Rate',\n            description: 'Far Drive rate for service',\n            amount: '$25.00'\n          },\n          {\n            title: 'Dog Poops Inside Rate',\n            description: 'Dog Poops Inside rate for service',\n            amount: '$25.00'\n          },\n          {\n            title: 'Dog Separation rate',\n            description: 'When we need to separate the dog from other animals in the house',\n            amount: '$35.04'\n          }\n        ]\n      }\n    }\n  ],\n  cost_summary: {\n    subtotal: 181.12,\n    platform_fee: 18.11,\n    taxes: 15.94,\n    total_owner_cost: 215.17,\n    total_sitter_payout: 163.01,\n    is_prorated: true\n  }\n};\n\n// Initialize mockBookingDetails with existing mock data\nconst mockBookingDetails = {\n  '1234': {\n    ...sharedBookingDetails,\n    id: '1234',\n    ownerName: 'John Doe',\n    status: BOOKING_STATES.CONFIRMED,\n    startDate: '2024-02-20',\n    startTime: '14:00',\n  },\n  '5678': {\n    ...sharedBookingDetails,\n    id: '5678',\n    ownerName: 'Margarett Laporte',\n    status: BOOKING_STATES.CANCELLED,\n    startDate: '2024-02-21',\n    startTime: '15:30',\n  },\n  '56782': {\n    ...sharedBookingDetails,\n    id: '56782',\n    ownerName: 'Zoe Aerial',\n    status: BOOKING_STATES.DENIED,\n    startDate: '2024-02-21',\n    startTime: '15:30',\n  },\n  '5673': {\n    ...sharedBookingDetails,\n    id: '5673',\n    ownerName: 'Matt Clark',\n    status: BOOKING_STATES.PENDING_INITIAL_PROFESSIONAL_CHANGES,\n    startDate: '2024-02-21',\n    startTime: '15:30',\n  },\n  '5674': {\n    ...sharedBookingDetails,\n    id: '5674',\n    ownerName: 'Mark Smith',\n    status: BOOKING_STATES.PENDING_CLIENT_APPROVAL,\n    startDate: '2024-02-21',\n    startTime: '15:30',\n  },\n  '5675': {\n    ...sharedBookingDetails,\n    id: '5675',\n    ownerName: 'Lauren Smith',\n    status: BOOKING_STATES.PENDING_PROFESSIONAL_CHANGES,\n    startDate: '2024-02-21',\n    startTime: '15:30',\n  },\n  '5675': {\n    ...sharedBookingDetails,\n    id: '56712',\n    ownerName: 'Matt Smith',\n    status: BOOKING_STATES.CONFIRMED_PENDING_PROFESSIONAL_CHANGES,\n    startDate: '2024-02-21',\n    startTime: '15:30',\n  },\n  '56713': {\n    ...sharedBookingDetails,\n    id: '567123',\n    ownerName: 'Albert Einstein',\n    status: BOOKING_STATES.PENDING_INITIAL_PROFESSIONAL_CHANGES,\n    startDate: '2025-02-21',\n    startTime: '15:30',\n  },\n  '3749': {...sharedBookingDetails,\n    id: '567132',\n    ownerName: 'Dr. Mike Johnson',\n    status: BOOKING_STATES.PENDING_INITIAL_PROFESSIONAL_CHANGES,\n    startDate: '2025-02-21',\n    startTime: '15:30',\n  },\n  '91011': {\n    ...sharedBookingDetails,\n    id: '91011',\n    ownerName: 'Dr. Bla Johnson',\n    status: BOOKING_STATES.PENDING_INITIAL_PROFESSIONAL_CHANGES,\n    startDate: '2025-02-21',\n    startTime: '15:30',\n  },\n  '91012': {\n    ...sharedBookingDetails,\n    id: '91012',\n    ownerName: 'Dr. Blabla Johnson',\n    status: BOOKING_STATES.PENDING_INITIAL_PROFESSIONAL_CHANGES,\n    startDate: '2025-02-21',\n    startTime: '15:30',\n  }\n};\n\n// Map mockProfessionalBookings from mockBookingDetails\nexport const mockProfessionalBookings = Object.values(mockBookingDetails)\n  .map(booking => ({\n    id: booking.id,\n    ownerName: booking.ownerName,\n    status: booking.status,\n    date: booking.startDate,\n    time: booking.startTime,\n    serviceType: booking.serviceType,\n    numberOfPets: booking.numberOfPets || 1,\n    totalCost: booking.costs?.totalOwnerCost || 0,\n    professionalPayout: booking.costs?.professionalPayout || 0\n  }));\n\n// Add the createBooking function\nexport const createBooking = async (ownerId, freelancerId, initialData = {}) => {\n  const newBookingId = `booking_${Date.now()}`;\n  \n  const newBooking = {\n    id: newBookingId,\n    ownerId: ownerId,\n    freelancerId: freelancerId,\n    status: BOOKING_STATES.PENDING_INITIAL_PROFESSIONAL_CHANGES,\n    ownerName: initialData.ownerName || 'TBD',\n    professionalName: initialData.professionalName || 'TBD',\n    serviceType: initialData.serviceType || 'TBD',\n    animalType: initialData.animalType || 'TBD',\n    numberOfPets: initialData.numberOfPets || 0,\n    duration: initialData.duration || 0,\n    occurrences: initialData.occurrences || [],\n    rates: {\n      baseRate: 0,\n      additionalPetRate: 0,\n      extraServices: []\n    },\n    costs: {\n      baseTotal: 0,\n      additionalPetTotal: 0,\n      extraServicesTotal: 0,\n      subtotal: 0,\n      ownerFee: 0,\n      taxes: 0,\n      totalOwnerCost: 0,\n      professionalPayout: 0\n    },\n    created_at: new Date().toISOString(),\n    updated_at: new Date().toISOString(),\n    ...initialData\n  };\n\n  // Add to mock database\n  mockBookingDetails[newBookingId] = newBooking;\n  \n  console.log('Created new booking:', {\n    bookingId: newBookingId,\n    booking: newBooking,\n    allBookings: Object.keys(mockBookingDetails)\n  });\n\n  // Simulate API delay\n  await new Promise(resolve => setTimeout(resolve, 500));\n  return newBookingId;\n};\n\n// Export mockBookingDetails for debugging\nexport const _mockBookingDetails = mockBookingDetails;\n\n// Add new mock function for updating booking status\nexport const updateBookingStatus = async (bookingId, newStatus, reason = '', metadata = {}) => {\n  console.log('updateBookingStatus called with:', {\n    bookingId,\n    newStatus,\n    reason,\n    metadata,\n    availableBookings: Object.keys(mockBookingDetails)\n  });\n  \n  // Simulate API delay\n  await new Promise(resolve => setTimeout(resolve, 1000));\n  \n  // Find the booking by ID regardless of the key\n  const bookingKey = Object.keys(mockBookingDetails).find(key => \n    mockBookingDetails[key].id === bookingId\n  );\n  \n  if (!bookingKey) {\n    console.error('Booking not found in mockBookingDetails. Available bookings:', \n      Object.keys(mockBookingDetails),\n      '\\nFull mockBookingDetails:', mockBookingDetails\n    );\n    throw new Error('Booking not found');\n  }\n  \n  // Create updated booking object\n  mockBookingDetails[bookingKey] = {\n    ...mockBookingDetails[bookingKey],\n    status: newStatus,\n    statusReason: reason,\n    updated_at: new Date().toISOString(),\n    ...metadata\n  };\n\n  console.log('Updated booking:', mockBookingDetails[bookingKey]);\n  return mockBookingDetails[bookingKey];\n};\n\n// Make sure to update MyBookings.js to use the same BOOKING_STATES constant\nexport const mockOwnerBookings = [\n  {\n    id: '91011',\n    professionalName: 'Sarah Wilson',\n    status: BOOKING_STATES.CONFIRMED,\n    date: '2024-02-22',\n    time: '10:00',\n    serviceType: 'Dog Walking',\n    numberOfPets: 2,\n    totalCost: 75.00,\n  },\n  {\n    id: '91012',\n    professionalName: 'Mike Johnson',\n    status: BOOKING_STATES.PENDING_CLIENT_APPROVAL,\n    date: '2024-02-23',\n    time: '11:00',\n    serviceType: 'Pet Sitting',\n    numberOfPets: 1,\n    totalCost: 50.00,\n  },\n];\n\n// Assuming current user ID is 101 for testing\nexport const CURRENT_USER_ID = 101;\n\nexport const mockConversations = [\n  {\n    id: 'conv_1',\n    participant1_id: CURRENT_USER_ID,\n    participant2_id: 202,\n    name: \"Dr. Sarah Smith\",\n    role_map: {\n      participant1_role: \"owner\",\n      participant2_role: \"professional\"\n    },\n    lastMessage: \"I'd be happy to help! What kind of pet do you have?\",\n    timestamp: \"2024-02-21T07:05:00Z\",\n    unread: false\n  },\n  {\n    id: 'conv_2',\n    participant1_id: 303,\n    participant2_id: CURRENT_USER_ID,\n    name: \"Dr. Mike Johnson\",\n    role_map: {\n      participant1_role: \"owner\",\n      participant2_role: \"professional\"\n    },\n    lastMessage: \"I'm available! Let's set up a booking\",\n    timestamp: \"2024-02-21T15:35:00Z\",\n    unread: false\n  },\n  {\n    id: 'conv_3',\n    participant1_id: CURRENT_USER_ID,\n    participant2_id: 204,\n    name: \"Dr. Emily Wilson\",\n    role_map: {\n      participant1_role: \"owner\",\n      participant2_role: \"professional\"\n    },\n    lastMessage: \"Your cat's checkup is scheduled\",\n    timestamp: \"2024-02-20T10:15:00Z\",\n    unread: true\n  },\n  {\n    id: 'conv_4',\n    participant1_id: CURRENT_USER_ID,\n    participant2_id: 205,\n    name: \"Dr. James Anderson\",\n    role_map: {\n      participant1_role: \"owner\",\n      participant2_role: \"professional\"\n    },\n    lastMessage: \"See you tomorrow at 2 PM\",\n    timestamp: \"2024-02-19T16:45:00Z\",\n    unread: false\n  },\n  {\n    id: 'conv_5',\n    participant1_id: CURRENT_USER_ID,\n    participant2_id: 206,\n    name: \"Dr. Lisa Brown\",\n    role_map: {\n      participant1_role: \"owner\",\n      participant2_role: \"professional\"\n    },\n    lastMessage: \"How is Max doing today?\",\n    timestamp: \"2024-02-18T09:30:00Z\",\n    unread: false\n  },\n  {\n    id: 'conv_6',\n    participant1_id: CURRENT_USER_ID,\n    participant2_id: 207,\n    name: \"Dr. Robert Taylor\",\n    role_map: {\n      participant1_role: \"owner\",\n      participant2_role: \"professional\"\n    },\n    lastMessage: \"The medication has been prescribed\",\n    timestamp: \"2024-02-17T14:20:00Z\",\n    unread: false\n  },\n  {\n    id: 'conv_7',\n    participant1_id: CURRENT_USER_ID,\n    participant2_id: 208,\n    name: \"Dr. Maria Garcia\",\n    role_map: {\n      participant1_role: \"owner\",\n      participant2_role: \"professional\"\n    },\n    lastMessage: \"Your appointment is confirmed\",\n    timestamp: \"2024-02-16T11:25:00Z\",\n    unread: true\n  },\n  {\n    id: 'conv_8',\n    participant1_id: CURRENT_USER_ID,\n    participant2_id: 209,\n    name: \"Dr. David Lee\",\n    role_map: {\n      participant1_role: \"owner\",\n      participant2_role: \"professional\"\n    },\n    lastMessage: \"Let's schedule a follow-up\",\n    timestamp: \"2024-02-15T13:40:00Z\",\n    unread: false\n  },\n  {\n    id: 'conv_9',\n    participant1_id: CURRENT_USER_ID,\n    participant2_id: 210,\n    name: \"Dr. Sarah Martinez\",\n    role_map: {\n      participant1_role: \"owner\",\n      participant2_role: \"professional\"\n    },\n    lastMessage: \"The test results are ready\",\n    timestamp: \"2024-02-14T15:55:00Z\",\n    unread: false\n  },\n  {\n    id: 'conv_10',\n    participant1_id: CURRENT_USER_ID,\n    participant2_id: 211,\n    name: \"Dr. John White\",\n    role_map: {\n      participant1_role: \"owner\",\n      participant2_role: \"professional\"\n    },\n    lastMessage: \"How's the new diet working?\",\n    timestamp: \"2024-02-13T08:15:00Z\",\n    unread: false\n  },\n  {\n    id: 'conv_11',\n    participant1_id: CURRENT_USER_ID,\n    participant2_id: 212,\n    name: \"Dr. Anna Clark\",\n    role_map: {\n      participant1_role: \"owner\",\n      participant2_role: \"professional\"\n    },\n    lastMessage: \"Vaccination reminder\",\n    timestamp: \"2024-02-12T10:30:00Z\",\n    unread: true\n  },\n  {\n    id: 'conv_12',\n    participant1_id: CURRENT_USER_ID,\n    participant2_id: 213,\n    name: \"Dr. Thomas Wright\",\n    role_map: {\n      participant1_role: \"owner\",\n      participant2_role: \"professional\"\n    },\n    lastMessage: \"Surgery scheduled for next week\",\n    timestamp: \"2024-02-11T12:45:00Z\",\n    unread: false\n  },\n  {\n    id: 'conv_13',\n    participant1_id: CURRENT_USER_ID,\n    participant2_id: 214,\n    name: \"Dr. Patricia Moore\",\n    role_map: {\n      participant1_role: \"owner\",\n      participant2_role: \"professional\"\n    },\n    lastMessage: \"Emergency consultation available\",\n    timestamp: \"2024-02-10T17:20:00Z\",\n    unread: false\n  },\n  {\n    id: 'conv_14',\n    participant1_id: CURRENT_USER_ID,\n    participant2_id: 215,\n    name: \"Dr. Kevin Hall\",\n    role_map: {\n      participant1_role: \"owner\",\n      participant2_role: \"professional\"\n    },\n    lastMessage: \"Treatment plan updated\",\n    timestamp: \"2024-02-09T14:10:00Z\",\n    unread: false\n  },\n  {\n    id: 'conv_15',\n    participant1_id: CURRENT_USER_ID,\n    participant2_id: 216,\n    name: \"Dr. Rachel Green\",\n    role_map: {\n      participant1_role: \"owner\",\n      participant2_role: \"professional\"\n    },\n    lastMessage: \"Prescription ready for pickup\",\n    timestamp: \"2024-02-08T16:35:00Z\",\n    unread: true\n  }\n];\n\nexport const mockMessages = {\n  'conv_1': [\n    {\n      message_id: 1,\n      participant1_id: CURRENT_USER_ID,\n      participant2_id: 202,\n      sender: CURRENT_USER_ID,\n      role_map: {\n        participant1_role: \"owner\",\n        participant2_role: \"professional\"\n      },\n      content: \"Hi, I'm interested in your pet sitting services\",\n      timestamp: \"2024-02-21T14:00:00Z\",\n      booking_id: null,\n      status: \"read\",\n      is_booking_request: false,\n      metadata: {}\n    },\n    {\n      message_id: 2,\n      participant1_id: CURRENT_USER_ID,\n      participant2_id: 202,\n      sender: 202,\n      role_map: {\n        participant1_role: \"owner\",\n        participant2_role: \"professional\"\n      },\n      content: \"I'd be happy to help! What kind of pet do you have?\",\n      timestamp: \"2024-02-21T14:05:00Z\",\n      booking_id: null,\n      status: \"sent\",\n      is_booking_request: false,\n      metadata: {}\n    }\n  ],\n  'conv_2': [\n    {\n      message_id: 3,\n      participant1_id: 303,\n      participant2_id: CURRENT_USER_ID,\n      sender: 303,\n      role_map: {\n        participant1_role: \"owner\",\n        participant2_role: \"professional\"\n      },\n      content: \"Looking for a dog walker next week\",\n      timestamp: \"2024-02-21T15:30:00Z\",\n      booking_id: null,\n      status: \"read\",\n      is_booking_request: false,\n      metadata: {}\n    },\n    {\n      message_id: 4,\n      participant1_id: 303,\n      participant2_id: CURRENT_USER_ID,\n      sender: 303,\n      role_map: {\n        participant1_role: \"owner\",\n        participant2_role: \"professional\"\n      },\n      type: 'booking_request',\n      data: {\n        serviceType: \"Dog Walking\",\n        pets: [\n          { id: '1', name: 'Max', type: 'Dog', breed: 'Golden Retriever' }\n        ],\n        occurrences: [\n          {\n            startDate: '2024-02-28',\n            endDate: '2024-02-28',\n            startTime: '14:00',\n            endTime: '15:00'\n          }\n        ]\n      },\n      timestamp: \"2024-02-21T15:35:00Z\",\n      status: \"sent\",\n      is_booking_request: true,\n      metadata: {}\n    },\n    {\n      message_id: 5,\n      participant1_id: 303,\n      participant2_id: CURRENT_USER_ID,\n      sender: CURRENT_USER_ID,\n      role_map: {\n        participant1_role: \"owner\",\n        participant2_role: \"professional\"\n      },\n      content: \"I'll take a look!\",\n      timestamp: \"2024-02-21T15:30:00Z\",\n      booking_id: null,\n      status: \"read\",\n      is_booking_request: false,\n      metadata: {}\n    },\n  ]\n};\n\n// Helper function to create a new conversation\nexport const createNewConversation = (professionalId, professionalName, ownerId, ownerName) => {\n  const conversationId = `conv_${Date.now()}`;\n  const isCurrentUserOwner = ownerId === CURRENT_USER_ID;\n  \n  return {\n    id: conversationId,\n    participant1_id: isCurrentUserOwner ? ownerId : professionalId,\n    participant2_id: isCurrentUserOwner ? professionalId : ownerId,\n    role_map: {\n      participant1_role: isCurrentUserOwner ? \"owner\" : \"professional\",\n      participant2_role: isCurrentUserOwner ? \"professional\" : \"owner\"\n    },\n    lastMessage: \"\",\n    timestamp: new Date().toISOString(),\n    unread: false,\n    bookingStatus: null\n  };\n};\n\nexport const DEFAULT_SERVICES = [\n  {\n    serviceName: 'Dog Walking',\n    animalTypes: 'Dogs',\n    rates: { base_rate: '20' },\n    additionalAnimalRate: '10',\n  },\n  {\n    serviceName: 'Cat Sitting',\n    animalTypes: 'Cats',\n    rates: { base_rate: '20' },\n    additionalAnimalRate: '5',\n  },\n  {\n    serviceName: 'Exotic Pet Care',\n    animalTypes: 'Lizards, Birds',\n    rates: { base_rate: '25' },\n    additionalAnimalRate: '15',\n  },\n];\n\nexport const SERVICE_TYPE_SUGGESTIONS = [\n  \"Overnight Cat Sitting (Owner's Home)\",\n  \"Cat Boarding\",\n  \"Drop-In Visits (30 min)\",\n  \"Drop-In Visits (60 min)\",\n  \"Dog Walking\",\n  \"Doggy Day Care\",\n  \"Pet Boarding\",\n  \"Exotic Pet Care\",\n  \"Daytime Pet Sitting\",\n  \"Ferrier\", \n];\n\nexport const ANIMAL_TYPE_SUGGESTIONS = [\n  'Dog',\n  'Cat',\n  'Cow',\n  'Calf',\n  'Lizard',\n  'Bird',\n  'Rabbit',\n  'Fish',\n];\n\nexport const BLOG_POSTS = [\n  {\n    id: 'blog_1',\n    title: 'What Your Dog is Really Saying',\n    author: {\n      id: 'author_1',\n      name: 'Zoe Neale',\n      profilePicture: require('../../assets/ZEGN_USER.jpeg'),\n      bio: 'Professional dog trainer and animal behavior specialist with over 10 years of experience.'\n    },\n    publishDate: '2024-02-22',\n    readTime: '8 min',\n    tags: ['Dogs', 'Behavior', 'Training', 'Pet Care'],\n    content: `You know that moment when your dog tilts their head at you like you just asked them to solve a calculus problem? Turns out, they're not the only ones trying to understand you—they've been communicating with you this whole time, and you probably didn't even realize it.\n\nDogs may not speak English (yet—give them time), but they have an entire language built on tail wags, ear positions, and those big, soulful eyes they use to manipulate you into giving them extra treats. Learning to read their body language isn't just a party trick—it can help prevent stress, deepen your bond, and maybe even stop your dog from embarrassing you at the dog park. So, let's finally crack the code on what your dog has been trying to tell you.\n\nTail Wagging: Not Always a Sign of Happiness\nOne of the biggest myths out there is that a wagging tail means a happy dog. Nope. Not always. A dog's tail is basically their mood ring, and the way they wag tells a whole different story.\nLoose, full-body wag (with bonus butt wiggles): This is the classic \"OMG YOU'RE HOME!!\" happy dance. A+ vibes.\nSlow wag, tail held high: The \"I'm analyzing this situation\" wag. Suspicious, calculating, possibly deciding if you're worth their energy.\nStiff, fast wag with a raised tail: Yikes. This is \"I'm on edge, don't mess with me\" energy. Proceed with caution.\nLow, fast wag: \"I'm nervous, and I don't know what's happening, so I'm just gonna keep wiggling and hope for the best.\"\nTucked tail: Fear. If the tail is all the way tucked under, your dog is basically saying, \"I regret everything, please don't yell at me.\"\nEven the direction of the wag matters—researchers found that dogs wag more to the right when they're happy and to the left when they're unsure or stressed (Quaranta et al., 2007). Yes, your dog's tail literally has anxiety tells.\n\nEars and Eyes: The Silent Storytellers\nDogs don't just talk with their tails—they also use their ears and eyes like tiny, furry actors in a silent film.\nSoft eyes, relaxed ears: Your dog is living their best life. No stress, just vibes.\nWide eyes, whites showing (a.k.a. \"whale eye\"): \"I am uncomfortable with the energy we have created in this room.\" This is a warning sign—your dog feels uneasy or trapped.\nPerked-up ears: \"I heard something, and I will investigate.\" Could be excitement, curiosity, or them preparing to bark at absolutely nothing.\nEars pinned back: \"I'm nervous\" or \"I did something bad, and I hope you don't notice.\" Classic guilty dog move.\nEver notice how some dogs do a little squint when they're happy? It's their version of a smile. On the flip side, prolonged direct eye contact—especially with an unfamiliar dog—can be a challenge. So, if you're having a staring contest with a dog you just met…maybe don't.\n\nThe Freeze: When Your Dog Hits Pause (And You Should Pay Attention)\nIf a dog suddenly stops moving and stiffens, pay attention. Freezing is often their last warning before things escalate to growling, snapping, or biting. A lot of people miss this and then wonder why their dog \"suddenly\" lashed out.\nYou might see this when:\nA child is hugging a dog (which, fun fact, most dogs hate).\nSomeone is petting a dog too aggressively.\nThe dog feels cornered and has no escape route.\nResearch by Rooney Clark and Casey (2016) helped show that when a dog freezes, in some way or another they are stressed, its best to give them space in that moment and take a mental note of your newest training goal! Sometimes, they just need a minute to de-escalate, like when you have to breathe through a customer service call that's not going well.\n\nMouth Matters: Smiles vs. Stress\nDogs can technically smile, but it's not always what you think.\nLoose, open mouth, tongue hanging out: Happy, relaxed, living their best life.\nClosed mouth, tight lips: Alert or unsure. They're analyzing the situation.\nLips pulled back, slight teeth showing: Some dogs do a \"submissive grin,\" which isn't aggression—it's their way of saying, \"Hey, I'm friendly!\"\nWrinkled nose, full teeth bared: This is aggression. Back off.\nExcessive yawning in a new situation: Dogs don't just yawn when they're tired—they also yawn when they're stressed. To put it simply, they are overstimulated. (Glenk, 2020) Don't be fooled by the parrot dog, sometimes they yawn because they saw you yawn first! (D'Aniello, 2019)\n\nConclusion: Your Dog Has Been Sending You Texts—Now You Can Finally Read Them\nDogs may not be able to talk (yet), but they've been communicating loud and clear this whole time. That tail wag? Could be excitement, could be stress. That little squint? Doggy love. The full-body freeze? That's a big ol' \"DO NOT DISTURB\" sign.\nThe more you pay attention, the better you'll understand your dog—and the fewer awkward misunderstandings you'll have (like mistaking a stress yawn for a nap cue). As we said in the beginning, your dog already knows exactly how to read you. They know your routine, when you're about to leave the house, and how to guilt-trip you into sharing your snacks. The least you can do is return the favor.\nSo next time your dog gives you the side-eye, perks their ears, or flops over dramatically after a single walk, you'll finally know what they're saying. And let's be honest—it's probably, \"I love you… now give me a treat.\"`,\n    references: [\n      {\n        title: '7 tips for canine body language',\n        authors: 'American Society for the Prevention of Cruelty to Animals (ASPCA)',\n        publication: 'ASPCApro',\n        url: 'https://www.aspcapro.org/resource/7-tips-canine-body-language'\n      },\n      {\n        title: \"Therapy dogs' salivary cortisol levels vary during animal-assisted interventions\",\n        authors: 'Glenk, L. M., Kothgassner, O. D., Stetina, B. U., Palme, R., & Kepplinger, B.',\n        publication: 'Frontiers in Veterinary Science',\n        year: 2020,\n        doi: '10.3389/fvets.2020.564201'\n      },\n      {\n        title: 'The importance of associative learning in cross-species social bonding: Dogs and humans',\n        authors: \"D'Aniello, B., Scandurra, A., Alterisio, A., Aria, M., & Siniscalchi, M.\",\n        publication: 'Frontiers in Psychology',\n        year: 2019,\n        doi: '10.3389/fpsyg.2019.01678'\n      },\n      {\n        title: 'Oxytocin-gaze positive loop and the coevolution of human-dog bonds',\n        authors: 'Nagasawa, M., Mitsui, S., En, S., Ohtani, N., Ohta, M., Sakuma, Y., Onaka, T., Mogi, K., & Kikusui, T.',\n        publication: 'Science',\n        year: 2015,\n        doi: '10.1126/science.1261022'\n      },\n      {\n        title: 'Asymmetric tail-wagging responses by dogs to different emotive stimuli',\n        authors: 'Quaranta, A., Siniscalchi, M., & Vallortigara, G.',\n        publication: 'Current Biology',\n        year: 2007,\n        doi: '10.1016/j.cub.2007.02.008'\n      },\n      {\n        title: 'Minimizing fear and anxiety in working dogs: A review',\n        authors: 'Rooney, N. J., Clark, C. C. A., & Casey, R. A.',\n        publication: 'Journal of Veterinary Behavior',\n        year: 2016,\n        doi: '10.1016/j.jveb.2016.11.001'\n      }\n    ],\n    likes: 245,\n    comments: 56,\n    shares: 89\n  },\n  {\n    id: 'blog_2',\n    title: 'What Your Cat is Really Saying',\n    author: {\n      id: 'author_2',\n      name: 'Zoe Neale',\n      profilePicture: require('../../assets/ZEGN_USER.jpeg'),\n      bio: 'Feline behavior specialist and veterinarian with a focus on cat-human relationships.'\n    },\n    publishDate: '2024-02-23',\n    readTime: '7 min',\n    tags: ['Cats', 'Behavior', 'Pet Care', 'Communication'],\n    content: `Ever wonder why your cat stares at you before slowly blinking or why they randomly sprint across the house at 2 AM? While cats may seem mysterious, they actually have a complex system of communication—if you know what to look for. Unlike dogs, who wear their emotions on their tails (literally), cats are more subtle. But once you learn their signals, you'll start to see what your cat has been trying to tell you all along.\n\nThe Myth of the Aloof Cat: Do They Actually Care About You?\nMany people think cats are independent and don't bond with their owners the way dogs do. But research suggests otherwise. A study by Vitale et al. (2019) found that cats form secure attachments to their owners, much like infants do with their caregivers. In an experiment where cats were briefly separated from their owners, many showed signs of distress when left alone and relief upon their owner's return. So yes, your cat does care about you—they just have their own way of showing it.\n\nThe Slow Blink: A Feline \"I Love You\"\nOne of the best-kept secrets of cat communication is the slow blink. If your cat locks eyes with you and then slowly closes and opens their eyes, congratulations! You've just received a cat's version of a smile. Research completed in 2020 (Humphrey) found that when humans slowly blink at their cats, the cats are more likely to return the gesture and approach them in a friendly manner. So, next time you want to say \"I love you\" to your cat, skip the baby talk and try a slow blink instead.\n\nTail Talk: Not Just for Dogs\nA cat's tail is like a built-in mood ring. Learning to read tail signals can help you avoid scratches and strengthen your bond.\nTail up, tip curved: A friendly, confident cat greeting. If your cat walks toward you with their tail high, they're happy to see you.\nPuffed-up tail: This is a defensive reaction. Your cat is startled or feels threatened.\nLow, slow-wagging tail: Unlike dogs, a slow-wagging cat tail isn't a good sign—it often signals irritation or mild aggression.\nTail wrapped around you or another cat: This is a sign of affection, almost like holding hands.\n\nPurring: More Than Just Happiness\nEveryone loves the soothing sound of a purring cat, but did you know cats don't just purr when they're happy? While contentment is a common reason, studies suggest cats also purr when they're stressed, in pain, or even trying to heal themselves. The frequency of cat purrs (between 25 and 150 Hz) has been linked to tissue regeneration and bone healing in studies on vibrational therapy (Muggenthaler, 2001). So, if your cat is purring at the vet's office, they may not be enjoying themselves—they might just be self-soothing.\n\nHeadbutting and Kneading: Strange but Sweet Gestures\nHeadbutting (bunting): When your cat gently bumps their head against you, they're not just being cute—they're marking you with their scent glands, claiming you as their own (Rodan, 2015).\nKneading: The rhythmic pressing of paws against a soft surface (or your lap) is a behavior kittens use to stimulate milk flow. In adult cats, it's a sign of comfort and contentment (Brown & Bradshaw, 2016).\n\nDo Cats Really Ignore Their Names?\nIf you've ever called your cat and been met with a flick of the ear but no movement, you might think they don't recognize their name. But research says otherwise. A study by Saito & Shinozuka (2013) found that cats can distinguish their names from other words, even in a household with multiple cats. They just don't always feel the need to respond. Unlike dogs, who evolved to seek human approval, cats evolved as solitary hunters. They hear you—they're just deciding whether you're worth getting up for.\n\nThe Zoomies: Science Behind the 2 AM Sprints\nThose sudden, chaotic bursts of energy—also known as \"zoomies\"—are actually a by normal part of feline behavior. Cats are natural hunters, and their instincts tell them to be most active at dawn and dusk. If your cat has zoomies at odd hours, they might just be burning off excess energy. Providing interactive play during the day can help prevent nighttime sprints (Turner, 2021).\n\nConclusion: The More You Watch, the More You Understand\nCats may seem mysterious, but once you learn their language, they're basically tiny, furry drama queens with very specific ways of expressing love (and judgment). That slow blink? A kiss. That tail flick? A warning. The 2 AM zoomies? Either pent-up energy or an exorcism—we may never know.\n\nThe more you pay attention to their signals, the better you'll understand them. And honestly your cat already understands you. They know exactly how to guilt-trip you into giving extra treats, how to wake you up precisely one minute before your alarm, and how to act like they don't care—right before curling up in your lap.\n\nAt the end of the day, cats aren't ignoring us. They're just selectively participating. And now that you can read their signals, you're officially part of their very exclusive club.`,\n    references: [\n      {\n        title: 'Communication in the domestic cat: within- and between-species',\n        authors: 'Brown, S. L., & Bradshaw, J. W. S.',\n        publication: 'Animal Behaviour',\n        year: 2016,\n        doi: '10.1016/j.anbehav.2016.05.015'\n      },\n      {\n        title: 'Feline Behavioral Health and Welfare',\n        authors: 'Rodan, I., & Heath, S.',\n        publication: 'Elsevier Health Sciences',\n        year: 2015\n      },\n      {\n        title: 'The felid purr: A healing mechanism?',\n        authors: 'Muggenthaler, E. von.',\n        publication: 'Proceedings of the 12th International Conference on Low Frequency Noise and Vibration',\n        year: 2001,\n        url: 'https://www.researchgate.net/publication/272259095_The_felid_purr_A_healing_mechanism'\n      },\n      {\n        title: 'Vocal recognition of owners by domestic cats (Felis catus)',\n        authors: 'Saito, A., & Shinozuka, K.',\n        publication: 'Animal Cognition',\n        year: 2013,\n        doi: '10.1007/s10071-013-0620-4'\n      },\n      {\n        title: 'The mechanics of social interactions between cats and their owners',\n        authors: 'Turner, D. C.',\n        publication: 'Frontiers in Veterinary Science',\n        year: 2021,\n        doi: '10.3389/fvets.2021.650143'\n      },\n      {\n        title: 'Attachment bonds between domestic cats and humans',\n        authors: 'Vitale, K. R., Behnke, A. C., & Udell, M. A. R.',\n        publication: 'Current Biology',\n        year: 2019,\n        doi: '10.1016/j.cub.2019.08.036'\n      },\n      {\n        title: 'The role of cat eye narrowing movements in cat–human communication',\n        authors: 'Humphrey, T., Proops, L., & McComb, K.',\n        publication: 'Scientific Reports',\n        year: 2020,\n        doi: '10.1038/s41598-020-73426-0'\n      }\n    ],\n    likes: 312,\n    comments: 78,\n    shares: 102\n  },\n  {\n    id: 'blog_3',\n    title: 'What Your Bird is Really Saying',\n    author: {\n      id: 'author_3',\n      name: 'Zoe Neale',\n      profilePicture: require('../../assets/ZEGN_USER.jpeg'),\n      bio: 'Avian specialist and researcher focusing on bird behavior and communication.'\n    },\n    publishDate: '2024-02-24',\n    readTime: '6 min',\n    tags: ['Birds', 'Behavior', 'Pet Care', 'Avian Communication'],\n    content: `Ever look at your bird and think, What's going on in that tiny dinosaur brain of yours? Well, good news—birds may not text, but they do have an entire language made up of wing flutters, tail flicks, and the occasional judgmental stare. And if you learn to read these signals, you'll finally understand what your feathered friend has been trying to tell you all along.\n\nLet's break down the mysterious world of bird body language so you can stop guessing and start actually communicating with your avian BFF.\n\nThe Head Tilt: Curious or Plotting Something?\nThat adorable head tilt your bird does isn't just to make you go aww—it's actually their way of getting a better look at something. Birds process images differently than we do, so when they tilt their head, they're adjusting their angle to see more clearly (Massen et al., 2014).\n\nSlow, curious head tilt: They're interested in what's happening and trying to analyze the situation. Basically, they're bird detectives.\nFrequent or extreme tilting: Could indicate a vision issue or neurological problem—if it looks excessive, a vet visit is a good idea (Massen et al., 2014).\nOne-eye stare, body stiffened: A sign they're feeling cautious or potentially threatened. If they were a human, this would be the equivalent of side-eye.\n\nFeather Fluffing: Cozy or Cranky?\nFeather movements say a lot about how a bird is feeling. Think of them as mood indicators, kind of like how we use facial expressions—except, you know, with more feathers.\n\nFluffed-up feathers for a few seconds: Just getting comfortable. If your bird puffs up and then smooths back down, they're basically stretching.\nConstantly fluffed-up feathers: Not good. This can be a sign of illness, stress, or even feeling cold (Massen et al., 2014).\nFeathers sleeked back tight to the body: Your bird is nervous or possibly feeling aggressive. Approach with caution (Pika & Bugnyar, 2011).\n\nThe Wing Flutter: Excitement or Back Off?\nBirds use their wings for way more than just flying—they also use them to communicate. Unfortunately, no sign language because birds dont have thumbs\n\nExcited, quick flutters: Happiness! Your bird is basically doing a little happy dance (Osaka University, 2023).\nSlow, controlled wing movements: This can be a \"stay away\" signal, kind of like putting up a hand to say \"not now.\"\nOne wing slightly drooped: Could be a sign of injury—time to check in with your vet.\n\nBunting: Love, Not a Headbutt Attack\nIf your bird presses or rubs their beak against you, congratulations—they're bunting, which is a sign of affection (Pika & Bugnyar, 2011).\n\nGentle beak rubbing: They're marking you as part of their flock. You're officially theirs now.\nAggressive, sudden beak nudging: Might mean \"Hey, stop that\" or \"Give me attention NOW.\"\n\nThe Stare-Down: Challenge or Trust?\nUnlike with dogs, where prolonged eye contact can be a dominance move, birds love staring at their favorite humans. It's actually a good thing—eye contact helps strengthen bonds (Osaka University, 2023).\n\nSoft, relaxed eyes: A sign of trust and comfort. They're chilling.\nWide eyes with pinning pupils: Intense excitement—or potential aggression. If they suddenly go from relaxed to laser-focused, read the room.\n\nTail Wagging: A Whole Different Story Than Dogs\nIf you thought tail wagging only meant happiness (like with dogs), think again—birds have their own unique tail signals.\n\nFast, side-to-side tail wagging: Happy and excited! Your bird is feeling good.\nSlow, deliberate tail flick: Annoyed or getting ready to give you a warning. Think of this as their way of saying \"I'm this close to losing it.\"\nTail fanned out: Displaying dominance or excitement—this is common in birds like parrots when they're trying to show off.\n\nThe Playful Side: Hanging Upside Down & Wing Spreading\nSome birds (especially parrots) love hanging upside down like little acrobats. This is usually a sign of happiness and playfulness. If your bird does this often, they're feeling safe and confident.\n\nUpside-down hanging: Your bird is comfortable with you and their surroundings. They trust you.\nOne wing slightly lifted while playing: This can be an invitation to interact—kind of like a bird's version of waving at you.\n\nConclusion: Your Bird Has Been Speaking—Now You're Fluent\nBirds may not use words the way we do (unless you have a talkative parrot), but their body language speaks volumes. From fluffed feathers to head tilts and beak bunts, every little movement is a clue to how they're feeling.\n\nThe more you watch and learn, the better you'll understand their unique way of communicating. And let's be real—your bird already knows exactly how to get your attention. Whether it's staring at you until you feel guilty enough to offer a treat or flapping their wings dramatically for no reason, they've got you trained.\n\nNow that you can finally read their signals, you're one step closer to becoming the ultimate bird whisperer. Just don't be surprised if they start giving you even more attitude now that you know what's up.`,\n    references: [\n      {\n        title: 'Facial display and blushing: Means of visual communication in blue-and-yellow macaws',\n        authors: 'Massen, J. J. M., Vermunt, D. A., & Sterck, E. H. M.',\n        publication: 'PLoS ONE',\n        year: 2014,\n        doi: '10.1371/journal.pone.0108794'\n      },\n      {\n        title: 'The use of referential gestures in ravens (Corvus corax) in the wild',\n        authors: 'Pika, S., & Bugnyar, T.',\n        publication: 'Nature Communications',\n        year: 2011,\n        doi: '10.1038/ncomms1567'\n      },\n      {\n        title: 'Wild birds gesture \"after you\" to insist their mate go first',\n        authors: 'Osaka University',\n        publication: 'Scientific American',\n        year: 2023,\n        url: 'https://www.scientificamerican.com/article/wild-birds-gesture-after-you-to-insist-their-mate-go-first/'\n      }\n    ],\n    likes: 198,\n    comments: 45,\n    shares: 67\n  }\n];","import React, { useState, useEffect, useContext } from 'react';\nimport { View, ScrollView, Image, StyleSheet, Linking, Dimensions, Platform, TouchableOpacity, TextInput } from 'react-native';\nimport { Button, Text, Card, Title, Paragraph, useTheme } from 'react-native-paper';\nimport { ImageBackground } from 'react-native';\nimport { theme } from '../styles/theme';\nimport { SCREEN_WIDTH } from '../context/AuthContext';\nimport { useNavigation } from '@react-navigation/native';\nimport { navigateToFrom } from '../components/Navigation';\nimport { FontAwesome } from '@expo/vector-icons';\nimport { FontAwesome5 } from '@expo/vector-icons';\nimport RoadmapSection from '../components/RoadmapSection';\n// Conditionally import formspree only on web\nlet useForm, ValidationError;\nif (Platform.OS === 'web') {\n  try {\n    const formspree = require('@formspree/react');\n    useForm = formspree.useForm;\n    ValidationError = formspree.ValidationError;\n  } catch (error) {\n    console.log('Formspree not available:', error);\n  }\n}\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { FontAwesome6 } from '@expo/vector-icons';\nimport { MaterialIcons } from '@expo/vector-icons';\nimport { BLOG_POSTS } from '../data/mockData';\nimport { AuthContext } from '../context/AuthContext';\n\nconst { width: windowWidth, height: windowHeight } = Dimensions.get('window');\n\n// Define a sample reviews array\nconst reviews = [\n  {\n    image: require('../../assets/user1.png'),\n    text: \"\\\"CrittrCove has been amazing for finding reliable pet professionals!\",\n    author: \"John Smith\"\n  },\n  {\n    image: require('../../assets/user2.png'),\n    text: \"\\\"Great experience with pet sitting services!\",\n    author: \"Jane Doe\"\n  },\n  {\n    image: require('../../assets/user3.png'),\n    text: \"\\\"Found the perfect sitter for my exotic pets!\",\n    author: \"Sudhakar Vuluvala\"\n  },\n  {\n    image: require('../../assets/user4.png'),\n    text: \"\\\"I've had a fantastic experience with CrittrCove's pet grooming services!\",\n    author: \"Alice Brown\"\n  }\n];\n\n// Define the ReviewImage component\nconst ReviewImage = ({ source, style }) => {\n  if (Platform.OS === 'web') {\n    return <img src={source} style={style} alt=\"\" />;\n  }\n  return <Image source={source} style={style} />;\n};\n\nexport default function HomeScreen({ navigation }) {\n  const { colors } = useTheme();\n  const { screenWidth } = useContext(AuthContext);\n  const isMobileView = screenWidth < 660;\n  const openAppStore = (url) => {\n    Linking.openURL(url);\n  };\n\n  // Add state for social media popup visibility\n  const [isUserScrolling, setIsUserScrolling] = useState(false);\n\n  const AutoScrollSection = ({ data, renderItem, title, cardWidth = 320 }) => {\n    const scrollViewRef = React.useRef(null);\n    const [currentIndex, setCurrentIndex] = useState(0);\n    const [userScrolling, setUserScrolling] = useState(false);\n    const autoScrollTimerRef = React.useRef(null);\n\n    // Auto-scroll effect\n    useEffect(() => {\n      if (!userScrolling) {\n        autoScrollTimerRef.current = setInterval(() => {\n          if (scrollViewRef.current) {\n            const nextIndex = (currentIndex + 1) % data.length;\n            scrollToIndex(nextIndex);\n          }\n        }, 3000);\n      }\n\n      return () => {\n        if (autoScrollTimerRef.current) {\n          clearInterval(autoScrollTimerRef.current);\n        }\n      };\n    }, [currentIndex, userScrolling, data.length]);\n\n    const scrollToIndex = (index) => {\n      if (scrollViewRef.current) {\n        scrollViewRef.current.scrollTo({\n          x: index * cardWidth,\n          animated: true\n        });\n        setCurrentIndex(index);\n      }\n    };\n\n    const handleScroll = (event) => {\n      const contentOffset = event.nativeEvent.contentOffset.x;\n      const index = Math.round(contentOffset / cardWidth);\n      setCurrentIndex(index);\n    };\n\n    const handleScrollBegin = () => {\n      setUserScrolling(true);\n      if (autoScrollTimerRef.current) {\n        clearInterval(autoScrollTimerRef.current);\n      }\n    };\n\n    const handleScrollEnd = () => {\n      // Reset after a short delay to prevent immediate auto-scroll\n      setTimeout(() => {\n        setUserScrolling(false);\n      }, 1000);\n    };\n\n    const handleDotPress = (index) => {\n      setUserScrolling(true);\n      scrollToIndex(index);\n      // Reset auto-scroll after a delay\n      setTimeout(() => {\n        setUserScrolling(false);\n      }, 1000);\n    };\n\n    return (\n      <View style={styles.section}>\n        <Text style={styles.sectionTitle}>{title}</Text>\n        <View style={styles.scrollContainer}>\n          <ScrollView\n            ref={scrollViewRef}\n            horizontal\n            showsHorizontalScrollIndicator={true}\n            style={[styles.scrollContainer, { WebkitOverflowScrolling: 'touch' }]}\n            contentContainerStyle={styles.scrollContent}\n            onScroll={handleScroll}\n            scrollEventThrottle={16}\n            pagingEnabled={Platform.OS !== 'web'}\n            onScrollBeginDrag={handleScrollBegin}\n            onScrollEndDrag={handleScrollEnd}\n            onMomentumScrollEnd={handleScrollEnd}\n          >\n            {data.map((item, index) => renderItem(item, index))}\n          </ScrollView>\n          {/* Clickable scroll indicators */}\n          <View style={styles.scrollIndicators}>\n            {data.map((_, index) => (\n              <TouchableOpacity\n                key={index}\n                onPress={() => handleDotPress(index)}\n                style={styles.scrollIndicatorButton}\n              >\n                <View\n                  style={[\n                    styles.scrollIndicator,\n                    currentIndex === index && styles.scrollIndicatorActive\n                  ]}\n                />\n              </TouchableOpacity>\n            ))}\n          </View>\n          {/* Scroll hint for mobile */}\n          {Platform.OS !== 'web' && (\n            <View style={styles.scrollHint}>\n              <Text style={styles.scrollHintText}>Swipe for more</Text>\n              <MaterialCommunityIcons name=\"gesture-swipe-horizontal\" size={24} color={theme.colors.primary} />\n            </View>\n          )}\n        </View>\n      </View>\n    );\n  };\n\n  const ReviewsSection = () => {\n    const renderReview = (review, index) => (\n      <View key={index} style={styles.reviewCard}>\n        <Text style={styles.reviewText}>{review.text}</Text>\n        <View style={styles.reviewAuthorContainer}>\n          <ReviewImage\n            source={review.image}\n            style={styles.reviewerImage}\n          />\n          <View>\n            <Text style={styles.reviewAuthorName}>{review.author}</Text>\n            <Text style={styles.reviewAuthorTitle}>Owner Review</Text>\n            <View style={styles.starsContainer}>\n              {[1, 2, 3, 4, 5].map((_, index) => (\n                <MaterialCommunityIcons \n                  key={index}\n                  name=\"star\"\n                  size={16}\n                  color={theme.colors.primary}\n                  style={styles.starIcon}\n                />\n              ))}\n            </View>\n          </View>\n        </View>\n      </View>\n    );\n\n    return (\n      <AutoScrollSection\n        data={reviews}\n        renderItem={renderReview}\n        title=\"Kind Words From Users\"\n      />\n    );\n  };\n\n  const BlogSection = () => {\n    const renderBlogPost = (post, index) => (\n      <TouchableOpacity \n        key={post.id} \n        style={[\n          styles.blogCard,\n          { marginRight: index === BLOG_POSTS.length - 1 ? 0 : 10 }\n        ]} \n        onPress={() => navigateToFrom(navigation, 'BlogPost', 'Home', { post })}\n      >\n        <View style={styles.authorContainer}>\n          {/* Add safety check for image source */}\n          {post.author.profilePicture && (\n            <Image\n              source={\n                typeof post.author.profilePicture === 'string' \n                  ? { uri: post.author.profilePicture }\n                  : post.author.profilePicture\n              }\n              style={styles.authorImage}\n              onError={(error) => {\n                console.log('Image load error:', error);\n              }}\n            />\n          )}\n          <View style={styles.blogContent}>\n            <Text style={[styles.title, { color: theme.colors.primary }]} numberOfLines={2}>\n              {post.title}\n            </Text>\n            <View style={styles.authorInfo}>\n              <Text style={[styles.authorName, { color: theme.colors.secondary }]}>\n                {post.author.name}\n              </Text>\n              <Text style={styles.dot}> • </Text>\n              <Text style={styles.readTime}>{post.readTime}</Text>\n            </View>\n            <Text style={styles.preview} numberOfLines={3}>\n              {post.content.slice(0, 100)}...\n            </Text>\n            <View style={styles.tags}>\n              {post.tags.slice(0, 2).map((tag, tagIndex) => (\n                <View \n                  key={tagIndex} \n                  style={[styles.tag, { backgroundColor: theme.colors.primary + '20' }]}\n                >\n                  <Text style={[styles.tagText, { color: theme.colors.primary }]}>{tag}</Text>\n                </View>\n              ))}\n            </View>\n            <View style={styles.stats}>\n              <View style={styles.stat}>\n                <MaterialCommunityIcons name=\"heart-outline\" size={16} color={theme.colors.secondary} />\n                <Text style={styles.statText}>{post.likes}</Text>\n              </View>\n              <View style={styles.stat}>\n                <MaterialCommunityIcons name=\"comment-outline\" size={16} color={theme.colors.secondary} />\n                <Text style={styles.statText}>{post.comments}</Text>\n              </View>\n              <View style={styles.stat}>\n                <MaterialCommunityIcons name=\"share-outline\" size={16} color={theme.colors.secondary} />\n                <Text style={styles.statText}>{post.shares}</Text>\n              </View>\n            </View>\n          </View>\n        </View>\n      </TouchableOpacity>\n    );\n\n    return (\n      <AutoScrollSection\n        data={BLOG_POSTS}\n        renderItem={renderBlogPost}\n        title=\"Blog\"\n        cardWidth={320}\n      />\n    );\n  };\n\n  const Features = () => {\n    const [activeTab, setActiveTab] = useState('owners'); // Default to owners tab\n\n    // Add roadmap colors array\n    const roadmapColors = ['#515d6c', '#516a6c', '#516C61', '#6A6C51'];\n\n    // Update the feature item structure and styles\n    const featureItemStyle = {\n      flexDirection: 'row',\n      marginBottom: 20,\n      alignItems: 'flex-start',\n      width: '100%',\n    };\n\n    const featureContentStyle = {\n      flex: 1,\n      marginLeft: 5,\n    };\n\n    return (\n      <View style={styles.featuresSection}>\n        <Text style={styles.sectionTitle}>How It Works</Text>\n        <View style={styles.toggleContainer}>\n          <TouchableOpacity \n            style={[styles.toggleButton, activeTab === 'owners' && styles.toggleButtonActive]}\n            onPress={() => setActiveTab('owners')}\n          >\n            <Text style={[styles.toggleButtonText, activeTab === 'owners' && styles.toggleButtonTextActive]}>For Pet Owners</Text>\n          </TouchableOpacity>\n          <TouchableOpacity \n            style={[styles.toggleButton, activeTab === 'sitters' && styles.toggleButtonActive]}\n            onPress={() => setActiveTab('sitters')}\n          >\n            <Text style={[styles.toggleButtonText, activeTab === 'sitters' && styles.toggleButtonTextActive]}>For Pet Professionals</Text>\n          </TouchableOpacity>\n        </View>\n\n        <View style={styles.featuresContainer}>\n          {activeTab === 'owners' && (\n            <View style={styles.featureColumn}>\n              <Text style={styles.columnTitle}>For Pet Owners</Text>\n              <View style={styles.featuresList}>\n                <View style={featureItemStyle}>\n                  <View style={[styles.featureIconCircle, { backgroundColor: roadmapColors[0] }]}>\n                    <FontAwesome6 name=\"person-running\" size={24} color=\"white\" />\n                  </View>\n                  <View style={featureContentStyle}>\n                    <Text style={styles.featureTitle}>Complete Your Profile</Text>\n                    <Text style={styles.featureText}>Submit details about you and your requirements.</Text>\n                  </View>\n                </View>\n                <View style={featureItemStyle}>\n                  <View style={[styles.featureIconCircle, { backgroundColor: roadmapColors[1] }]}>\n                    <MaterialCommunityIcons name=\"horse-human\" size={24} color=\"white\" />\n                  </View>\n                  <View style={featureContentStyle}>\n                    <Text style={styles.featureTitle}>Complete Pet Profile</Text>\n                    <Text style={styles.featureText}>Submit details about your pet and sitting requirements.</Text>\n                  </View>\n                </View>\n                <View style={featureItemStyle}>\n                  <View style={[styles.featureIconCircle, { backgroundColor: roadmapColors[2] }]}>\n                    <MaterialCommunityIcons name=\"professional-hexagon\" size={24} color=\"white\" />\n                  </View>\n                  <View style={featureContentStyle}>\n                    <Text style={styles.featureTitle}>Search for Pro's</Text>\n                    <Text style={styles.featureText}>You can use our marketplace to find the best pro for your desired service.</Text>\n                  </View>\n                </View>\n                <View style={featureItemStyle}>\n                  <View style={[styles.featureIconCircle, { backgroundColor: roadmapColors[3] }]}>\n                    <FontAwesome5 name=\"calendar-check\" size={24} color=\"white\" />\n                  </View>\n                  <View style={featureContentStyle}>\n                    <Text style={styles.featureTitle}>Confirm Your Booking</Text>\n                    <Text style={styles.featureText}>Coordinate directly with your professional to finalize details.</Text>\n                  </View>\n                </View>\n              </View>\n              <View style={styles.buttonContainer}>\n                <TouchableOpacity style={styles.actionButton} onPress={() => navigateToFrom(navigation, 'SignUp', 'Home')}>\n                  <Text style={styles.buttonText}>Sign up Today!</Text>\n                </TouchableOpacity>\n              </View>\n            </View>\n          )}\n          {activeTab === 'sitters' && (\n            <View style={styles.featureColumn}>\n              <Text style={styles.columnTitle}>For Pet Professionals</Text>\n              <View style={styles.featuresList}>\n                <View style={featureItemStyle}>\n                  <View style={[styles.featureIconCircle, { backgroundColor: roadmapColors[0] }]}>\n                    <FontAwesome name=\"sign-in\" size={24} color=\"white\" />\n                  </View>\n                  <View style={featureContentStyle}>\n                    <Text style={styles.featureTitle}>Apply to Join Pro Community</Text>\n                    <Text style={styles.featureText}>Submit your specialties, documents, bio, and availability to begin.</Text>\n                  </View>\n                </View>\n                <View style={featureItemStyle}>\n                  <View style={[styles.featureIconCircle, { backgroundColor: roadmapColors[1] }]}>\n                    <MaterialCommunityIcons name=\"plus-circle\" size={24} color=\"white\" />\n                  </View>\n                  <View style={featureContentStyle}>\n                    <Text style={styles.featureTitle}>Create Services</Text>\n                    <Text style={styles.featureText}>Create services to offer to pet owners.</Text>\n                  </View>\n                </View>\n                <View style={featureItemStyle}>\n                  <View style={[styles.featureIconCircle, { backgroundColor: roadmapColors[2] }]}>\n                    <FontAwesome6 name=\"handshake-simple\" size={24} color=\"white\" />\n                  </View>\n                  <View style={featureContentStyle}>\n                    <Text style={styles.featureTitle}>Get Matched with Owners</Text>\n                    <Text style={styles.featureText}>Pet owners in your area will reach out to you for yourservices.</Text>\n                  </View>\n                </View>\n                <View style={featureItemStyle}>\n                  <View style={[styles.featureIconCircle, { backgroundColor: roadmapColors[3] }]}>\n                    <MaterialIcons name=\"auto-graph\" size={24} color=\"white\" />\n                  </View>\n                  <View style={featureContentStyle}>\n                    <Text style={styles.featureTitle}>Grow Your Business</Text>\n                    <Text style={styles.featureText}>Manage bookings and get support as you build your pet service business.</Text>\n                  </View>\n                </View>\n              </View>\n              <View style={styles.buttonContainer}>\n                <TouchableOpacity style={styles.actionButton} onPress={() => navigateToFrom(navigation, 'SignUp', 'Home')}>\n                  <Text style={styles.buttonText}>Become a Professional</Text>\n                </TouchableOpacity>\n              </View>\n            </View>\n          )}\n        </View>\n      </View>\n    );\n  };\n\n  const ContactSection = () => {\n    const [name, setName] = useState('');\n    const [email, setEmail] = useState('');\n    const [message, setMessage] = useState('');\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const [isSubmitted, setIsSubmitted] = useState(false);\n\n    // Use formspree only on web\n    const webFormData = Platform.OS === 'web' && useForm ? useForm(\"mkgobpro\") : [null, null];\n    const [state, handleSubmit] = webFormData;\n\n    const handleFormSubmit = async (e) => {\n      if (Platform.OS === 'web') {\n        e.preventDefault();\n      }\n      \n      setIsSubmitting(true);\n\n      if (Platform.OS === 'web' && handleSubmit) {\n        // Use formspree on web\n        const formData = {\n          name: name,\n          email: email,\n          message: message\n        };\n        \n        await handleSubmit(formData);\n        \n        if (state && state.succeeded) {\n          setName('');\n          setEmail('');\n          setMessage('');\n          setIsSubmitted(true);\n        }\n      } else {\n        // On mobile, use mailto or show success message\n        const subject = `Contact from ${name}`;\n        const body = `Name: ${name}\\nEmail: ${email}\\n\\nMessage:\\n${message}`;\n        const mailtoUrl = `mailto:support@crittrcove.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;\n        \n        try {\n          await Linking.openURL(mailtoUrl);\n          setName('');\n          setEmail('');\n          setMessage('');\n          setIsSubmitted(true);\n        } catch (error) {\n          console.log('Error opening mail app:', error);\n          // Still show success for better UX\n          setIsSubmitted(true);\n        }\n      }\n      \n      setIsSubmitting(false);\n    };\n\n    const isWebSubmitted = Platform.OS === 'web' && state && state.succeeded;\n    const showSuccessMessage = isSubmitted || isWebSubmitted;\n\n    if (showSuccessMessage) {\n      return (\n        <View style={styles.contactSection}>\n          <View style={styles.contactContainer}>\n            <Text style={[styles.sectionTitle, { color: theme.colors.primary }]}>\n              Thanks for reaching out!\n            </Text>\n            <Text style={styles.successMessage}>\n              {Platform.OS === 'web' \n                ? \"We'll get back to you soon.\" \n                : \"Your email app should open with a pre-filled message.\"}\n            </Text>\n          </View>\n        </View>\n      );\n    }\n\n    const webErrors = Platform.OS === 'web' && state ? state.errors : null;\n    const currentlySubmitting = isSubmitting || (Platform.OS === 'web' && state && state.submitting);\n\n    return (\n      <View style={styles.contactSection}>\n        <View style={styles.contactContainer}>\n          <Text style={styles.sectionTitle}>Contact Us</Text>\n          <TextInput\n            placeholder=\"Your Name\"\n            style={styles.input}\n            value={name}\n            onChangeText={setName}\n            name=\"name\"\n          />\n          {Platform.OS === 'web' && ValidationError && (\n            <ValidationError prefix=\"Name\" field=\"name\" errors={webErrors} />\n          )}\n          \n          <TextInput\n            placeholder=\"Your Email\"\n            style={styles.input}\n            value={email}\n            onChangeText={setEmail}\n            keyboardType=\"email-address\"\n            name=\"email\"\n            autoCapitalize=\"none\"\n          />\n          {Platform.OS === 'web' && ValidationError && (\n            <ValidationError prefix=\"Email\" field=\"email\" errors={webErrors} />\n          )}\n          \n          <TextInput\n            placeholder=\"Your Message\"\n            style={[styles.input, styles.messageInput]}\n            value={message}\n            onChangeText={setMessage}\n            multiline\n            name=\"message\"\n          />\n          {Platform.OS === 'web' && ValidationError && (\n            <ValidationError prefix=\"Message\" field=\"message\" errors={webErrors} />\n          )}\n          \n          <View style={styles.buttonContainer}>\n            <TouchableOpacity\n              style={[\n                styles.actionButton,\n                currentlySubmitting && styles.disabledButton\n              ]}\n              onPress={handleFormSubmit}\n              disabled={currentlySubmitting}\n            >\n              <Text style={styles.buttonText}>\n                {currentlySubmitting ? 'Sending...' : (Platform.OS === 'web' ? 'Send' : 'Open Email')}\n              </Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </View>\n    );\n  };\n\n  const ServiceCard = ({ icon, title, description, color }) => {\n    const cardStyles = {\n      container: {\n        width: isMobileView ? '90%' : '45%',\n        minWidth: isMobileView ? 'auto' : 300,\n        maxWidth: 500,\n        padding: 20,\n        backgroundColor: '#fff',\n        borderRadius: 10,\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.1,\n        shadowRadius: 4,\n        elevation: 3,\n        marginBottom: 20,\n        alignSelf: 'center',\n      },\n      header: {\n        flexDirection: 'column',\n        alignItems: 'center',\n        marginBottom: 15,\n      },\n      iconContainer: {\n        width: 60,\n        height: 60,\n        borderRadius: 30,\n        backgroundColor: `${theme.colors.primary}15`,\n        justifyContent: 'center',\n        alignItems: 'center',\n        marginBottom: 15,\n      },\n      title: {\n        fontSize: 20,\n        fontWeight: 'bold',\n        color: theme.colors.text,\n        fontFamily: theme.fonts.header.fontFamily,\n        textAlign: 'center',\n        marginBottom: 10,\n      },\n      description: {\n        fontSize: 16,\n        lineHeight: 24,\n        color: theme.colors.text,\n        fontFamily: theme.fonts.regular.fontFamily,\n        textAlign: 'center',\n      },\n    };\n\n    return (\n      <View style={cardStyles.container}>\n        <View style={cardStyles.header}>\n          <View style={cardStyles.iconContainer}>\n            <MaterialCommunityIcons name={icon} size={32} color={color} />\n          </View>\n          <Text style={cardStyles.title}>{title}</Text>\n        </View>\n        <Text style={cardStyles.description}>{description}</Text>\n      </View>\n    );\n  };\n\n  return (\n    <ScrollView \n      style={styles.container}\n      contentContainerStyle={styles.contentContainer}\n      showsVerticalScrollIndicator={true}\n      bounces={false}\n      overScrollMode=\"never\"\n    >\n      <View style={styles.heroSection}>\n        <Image\n          source={require('../../assets/hero-image.jpg')}\n          style={styles.heroImage}\n          resizeMode=\"cover\"\n        />\n        <View style={styles.heroContent}>\n          <Text style={styles.heroText}>Welcome to CrittrCove</Text>\n          <TouchableOpacity \n            style={styles.heroSignupButton} \n            onPress={() => navigateToFrom(navigation, 'SignUp', 'Home')}\n          >\n            <Text style={styles.heroSignupButtonText}>Sign Up Today</Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n\n      {/* Service Highlights Section */}\n      <View style={styles.serviceHighlightsSection}>\n        <Text style={styles.mainServiceTitle}>Marketplace for Pet Owners and Care Professionals</Text>\n        \n        <View style={[styles.servicesGrid, { \n          flexDirection: isMobileView ? 'column' : 'row',\n          alignItems: isMobileView ? 'center' : 'flex-start',\n        }]}>\n          <ServiceCard\n            icon=\"paw\"\n            title=\"All Animals Welcome\"\n            description=\"From everyday pets to exotic companions, CrittrCove is a marketplace where you can find independent professionals offerring care for a wide variety of animals.\"\n            color={theme.colors.mainColors.senary}\n          />\n          <ServiceCard\n            icon=\"calendar-clock\"\n            title=\"Flexible Booking Options\"\n            description=\"Book single visits, multiple days, or set up recurring services. Create subscription plans or schedule services months in advance.\"\n            color={theme.colors.mainColors.quinary}\n          />\n          <ServiceCard\n            icon=\"shield-check\"\n            title=\"Verified Badges\"\n            description=\"All professionals are allowed on the platform, and clients can see their verified badges to ensure they are who they say they are.\"\n            color={theme.colors.mainColors.main}\n          />\n          <ServiceCard\n            icon=\"tune-variant\"\n            title=\"Customizable Services\"\n            description=\"Professionals can create custom service packages and pricing plans tailored to your specific needs and preferences.\"\n            color={theme.colors.mainColors.quaternary}\n          />\n        </View>\n      </View>\n\n      <Features />\n      <ReviewsSection />\n      <BlogSection />\n\n      {/* Roadmap Section */}\n      <RoadmapSection />\n\n      {/* FAQ Section */}\n      {/* <View style={styles.section}>\n        <Text style={styles.sectionTitle}>FAQs</Text>\n         {faqs.map((faq, index) => (\n          <View key={index} style={styles.faqItem}>\n            <TouchableOpacity \n              style={styles.faqButton}\n              onPress={() => setSelectedFaq(selectedFaq === index ? null : index)}\n            >\n              <Text style={styles.faqQuestion}>{faq.question}</Text>\n              <Text style={styles.faqToggle}>{selectedFaq === index ? '-' : '+'}</Text>\n            </TouchableOpacity>\n            {selectedFaq === index && (\n              <Text style={styles.faqAnswer}>{faq.answer}</Text>\n            )}\n          </View>\n        ))} \n      </View> */}\n\n      {/* Contact Us Section */}\n      <ContactSection />\n\n      {/* Footer */}\n      <View style={styles.footer}>\n        <View style={styles.socialIconsRow}>\n          <TouchableOpacity \n            style={styles.socialIcon} \n            onPress={() => Linking.openURL('https://www.instagram.com/thezensitter')}\n          >\n            <FontAwesome name=\"instagram\" size={24} color=\"white\" />\n          </TouchableOpacity>\n          <TouchableOpacity \n            style={styles.socialIcon} \n            onPress={() => Linking.openURL('https://discord.com/your-profile')}\n          >\n            <FontAwesome5 name=\"discord\" size={24} color=\"white\" />\n          </TouchableOpacity>\n        </View>\n        <View style={styles.footerLinksRow}>\n          <Text style={styles.footerLink} onPress={() => navigateToFrom(navigation, 'PrivacyPolicy', 'Home')}>Privacy Policy</Text>\n          <Text style={styles.footerLink} onPress={() => navigateToFrom(navigation, 'TermsOfService', 'Home')}>Terms of Service</Text>\n        </View>\n      </View>\n    </ScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  contentContainer: {\n    flexGrow: 1,\n  },\n  heroSection: {\n    height: Platform.OS === 'web' ? '70vh' : windowHeight * 0.5,\n    justifyContent: 'center',\n    alignItems: 'center',\n    overflow: 'hidden',\n    position: 'relative',\n  },\n  heroImage: {\n    width: '100%',\n    height: '100%',\n    position: 'absolute',\n  },\n  heroContent: {\n    position: 'absolute',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%',\n    height: '100%',\n    paddingHorizontal: 20,\n  },\n  heroText: {\n    fontSize: 32,\n    fontWeight: 'bold',\n    fontFamily: theme.fonts.header.fontFamily,\n    textAlign: 'center',\n    color: 'white',\n    textShadowColor: 'rgba(0, 0, 0, 0.75)',\n    textShadowOffset: {width: -1, height: 1},\n    textShadowRadius: 10,\n    marginBottom: 20,\n  },\n  heroSignupButton: {\n    backgroundColor: 'white',\n    paddingHorizontal: 30,\n    paddingVertical: 15,\n    borderRadius: 25,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 4,\n    elevation: 5,\n  },\n  heroSignupButtonText: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: theme.colors.primary,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  section: {\n    padding: 20,\n    width: '100%',\n    maxWidth: 1200,\n    marginLeft: 'auto',\n    marginRight: 'auto',\n    alignItems: 'center',\n  },\n  sectionTitle: {\n    fontSize: theme.fontSizes.largeLarge,\n    fontWeight: 'bold',\n    fontFamily: theme.fonts.header.fontFamily,\n    marginBottom: 10,\n    textAlign: 'center',\n    color: 'black',\n  },\n  card: {\n    marginBottom: 10,\n  },\n  appButtons: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginTop: 10,\n  },\n  appButton: {\n    width: '45%',\n  },\n  reviewsSection: {\n    // height: 350,\n    marginBottom: 20,\n  },\n  reviewsBackground: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  reviewsOverlay: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  reviewsSubtitle: {\n    fontSize: theme.fontSizes.mediumLarge,\n    fontWeight: 'bold',\n    color: 'black',\n    marginBottom: 10,\n    textAlign: 'center',\n    width: '100%',\n  },\n  reviewsTitle: {\n    fontSize: theme.fontSizes.largeLarge,\n    fontFamily: theme.fonts.header.fontFamily,\n    fontWeight: 'bold',\n    color: 'black',\n    marginBottom: 20,\n    textAlign: 'center',\n    width: '100%',\n  },\n  reviewsContainer: {\n    width: '100%',\n    maxWidth: 1200,\n    marginLeft: 'auto',\n    marginRight: 'auto',\n    overflowX: 'auto',\n    WebkitOverflowScrolling: 'touch',\n    msOverflowStyle: 'auto',\n    scrollbarWidth: 'auto',\n    scrollbarColor: `${theme.colors.primary} transparent`,\n  },\n  reviewsContent: {\n    flexDirection: 'row',\n    minWidth: 'min-content',\n    gap: 10,\n    padding: 20,\n    paddingBottom: 40, // Add space for indicators\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  reviewCard: {\n    width: 300,\n    height: 200,\n    padding: 20,\n    backgroundColor: 'white',\n    borderRadius: 10,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n    marginRight: 10,\n  },\n  reviewCardMobile: {\n    width: '100%',\n    height: '100%',\n  },\n  reviewQuote: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: 'black',\n    marginBottom: 10,\n  },\n  reviewText: {\n    fontSize: 18,\n    color: 'black',\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginBottom: 15,\n    flex: 1,\n  },\n  reviewAuthorContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  reviewerImage: {\n    width: 45,\n    height: 60,\n    borderRadius: 8,\n    marginRight: 10,\n    objectFit: 'cover',\n  },\n  reviewAuthorName: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: 'black',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  reviewAuthorTitle: {\n    fontSize: 14,\n    color: '#666',\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginTop: 2,\n  },\n  paginationDots: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    marginTop: 10,\n  },\n  paginationDot: {\n    width: 10,\n    height: 10,\n    borderRadius: 5,\n    backgroundColor: 'white',\n    margin: 5,\n  },\n  paginationDotActive: {\n    backgroundColor: 'black',\n  },\n  featuresSection: {\n    marginBottom: 80,\n    marginTop: 20,\n  },\n  toggleContainer: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    marginBottom: 10,\n  },\n  toggleButton: {\n    padding: 10,\n    backgroundColor: 'white',\n    borderWidth: 2,\n    borderColor: theme.colors.primary,\n  },\n  toggleButtonActive: {\n    backgroundColor: theme.colors.primary,\n  },\n  toggleButtonText: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  toggleButtonTextActive: {\n    color: theme.colors.whiteText,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  featuresContainer: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  featureColumn: {\n    width: SCREEN_WIDTH < 768 ? '90%' : '100%',\n    maxWidth: 600,\n    padding: 20,\n    backgroundColor: 'white',\n    borderRadius: 10,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  columnTitle: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 20,\n    color: 'black',\n    textAlign: 'center',\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  featuresList: {\n    width: '100%',\n    fontFamily: theme.fonts.header.fontFamily,\n    marginBottom: 20,\n  },\n  featureItem: {\n    flexDirection: 'row',\n    marginBottom: 20,\n    alignItems: 'flex-start',\n    width: '100%',\n  },\n  featureIconCircle: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginTop: 5,\n  },\n  featureIcon: {\n    fontSize: 40,\n  },\n  featureTitle: {\n    fontSize: theme.fontSizes.mediumLarge,\n    fontWeight: 'bold',\n    marginBottom: 5,\n    color: 'black',\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  featureText: {\n    fontSize: theme.fontSizes.mediumLarge + 2,\n    color: 'black',\n    lineHeight: 22,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  actionButton: {\n    backgroundColor: '#6A6C51',\n    width: '50%',\n    padding: 5,\n    borderRadius: 5,\n    alignItems: 'center',\n  },\n  buttonContainer: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  buttonText: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: 'white',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  blogSection: {\n    marginBottom: 20,\n    alignItems: 'center',\n  },\n  blogCard: {\n    width: 300,\n    backgroundColor: 'white',\n    borderRadius: 10,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n    padding: 15,\n    marginRight: 10,\n  },\n  authorContainer: {\n    flexDirection: 'column',\n  },\n  authorImage: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    marginBottom: 10,\n  },\n  blogContent: {\n    flex: 1,\n  },\n  title: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginBottom: 8,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  authorInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  authorName: {\n    fontSize: 16,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  dot: {\n    marginHorizontal: 4,\n    color: '#666',\n  },\n  readTime: {\n    fontSize: 16,\n    color: '#666',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  preview: {\n    fontSize: 16,\n    lineHeight: 20,\n    marginBottom: 12,\n    color: '#444',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  tags: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    marginBottom: 12,\n  },\n  tag: {\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 16,\n    marginRight: 8,\n    marginBottom: 8,\n  },\n  tagText: {\n    fontSize: 14,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  stats: {\n    flexDirection: 'row',\n    justifyContent: 'flex-start',\n    marginTop: 8,\n  },\n  stat: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginRight: 16,\n  },\n  statText: {\n    marginLeft: 4,\n    fontSize: 14,\n    color: '#666',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  roadmapSection: {\n    marginBottom: 20,\n  },\n  roadmapImage: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  roadmapOverlayText: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    color: 'black',\n  },\n  faqSection: {\n    marginBottom: 20,\n  },\n  faqItem: {\n    marginBottom: 10,\n  },\n  faqButton: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  faqQuestion: {\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  faqToggle: {\n    fontSize: 14,\n    color: 'gray',\n  },\n  faqAnswer: {\n    fontSize: 16,\n  },\n  contactSection: {\n    // maxWidth: 800,\n    width: '100%',\n    // display: 'flex',\n    // flexDirection: 'column',\n    // alignItems: 'center',\n    // justifyContent: 'center',\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    padding: 20,\n  },\n  contactContainer: {\n    width: '100%',\n    maxWidth: 600,\n  },\n  input: {\n    padding: 10,\n    marginBottom: 10,\n    borderWidth: 1,\n    borderColor: 'gray',\n    borderRadius: 5,\n  },\n  footer: {\n    padding: 20,\n    backgroundColor: theme.colors.primary,\n    alignItems: 'center',\n  },\n  socialIconsRow: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    marginBottom: 15,\n  },\n  socialIcon: {\n    marginHorizontal: 15,\n    padding: 5,\n  },\n  footerLinksRow: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    flexWrap: 'wrap',\n  },\n  footerLink: {\n    color: 'white',\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginHorizontal: 15,\n    textDecorationLine: 'underline',\n  },\n  successMessage: {\n    fontSize: 18,\n    textAlign: 'center',\n    marginTop: 10,\n    color: 'black',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  messageInput: {\n    height: 100,\n    textAlignVertical: 'top',\n    paddingTop: 10,\n  },\n  disabledButton: {\n    opacity: 0.7,\n  },\n  validationError: {\n    color: 'red',\n    fontSize: 16,\n    marginTop: -5,\n    marginBottom: 10,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  starsContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginTop: 4,\n  },\n  starIcon: {\n    marginRight: 2,\n  },\n  waitlistSection: {\n    // backgroundColor: '#f5f5f5',\n    marginVertical: 20,\n    borderRadius: 10,\n  },\n  waitlistDescription: {\n    fontSize: 18,\n    textAlign: 'center',\n    marginBottom: 20,\n    color: 'black',\n    fontFamily: theme.fonts.regular.fontFamily,\n    paddingHorizontal: 20,\n    lineHeight: 24,\n  },\n  waitlistButton: {\n    marginTop: 10,\n    width: '80%',\n    maxWidth: 300,\n    padding: 15,\n  },\n  scrollIndicators: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginTop: 10,\n    marginBottom: 20,\n  },\n  scrollIndicatorButton: {\n    padding: 10, // Increase touch target\n    marginHorizontal: -6, // Compensate for padding while maintaining visual spacing\n  },\n  scrollIndicator: {\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    backgroundColor: theme.colors.border,\n    marginHorizontal: 4,\n  },\n  scrollIndicatorActive: {\n    backgroundColor: theme.colors.primary,\n    width: 24,\n  },\n  scrollHint: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 10,\n  },\n  scrollHintText: {\n    color: theme.colors.primary,\n    marginRight: 5,\n    fontSize: theme.fontSizes.medium,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  scrollContainer: {\n    width: '100%',\n    maxWidth: 1200,\n    marginLeft: 'auto',\n    marginRight: 'auto',\n    overflowX: 'auto',\n    WebkitOverflowScrolling: 'touch',\n    msOverflowStyle: 'auto',\n    scrollbarWidth: 'auto',\n    scrollbarColor: `${theme.colors.primary} transparent`,\n  },\n  scrollContent: {\n    flexDirection: 'row',\n    minWidth: 'min-content',\n    gap: 10,\n    padding: 20,\n    paddingBottom: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  serviceHighlightsSection: {\n    padding: 20,\n    width: '100%',\n    maxWidth: 1200,\n    marginLeft: 'auto',\n    marginRight: 'auto',\n    alignItems: 'center',\n  },\n  mainServiceTitle: {\n    fontSize: 32,\n    fontWeight: 'bold',\n    textAlign: 'center',\n    marginBottom: 40,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  servicesGrid: {\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n    gap: 20,\n    width: '100%',\n  },\n});\n","import React from 'react';\nimport { View, StyleSheet, Platform } from 'react-native';\nimport { Button } from 'react-native-paper';\nimport { theme } from '../styles/theme';\nimport { AuthContext, debugLog } from '../context/AuthContext';\n\nconst FloatingSaveButton = ({ visible, onSave, btnText = \"Save Changes\" }) => {\n  const { screenWidth, isCollapsed } = React.useContext(AuthContext);\n  \n  // Don't render anything if not visible\n  if (!visible) {\n    return null;\n  }\n  \n  // Simple logging only when visible\n  React.useEffect(() => {\n    if (visible) {\n      debugLog('MBA230uvj0834h9', 'FloatingSaveButton is visible');\n    }\n  }, [visible]);\n\n  // Calculate marginLeft to match sidebar on desktop\n  const marginLeft = screenWidth > 900 ? (isCollapsed ? 70 : 250) : 0;\n\n  return (\n    <View \n      style={[\n        styles.floatingButtonContainer,\n        Platform.OS === 'web' ? styles.webButton : styles.mobileButton,\n        { marginLeft }\n      ]}\n    >\n      <Button \n        mode=\"contained\" \n        onPress={onSave}\n        style={styles.floatingButton}\n        labelStyle={styles.buttonLabel}\n      >\n        {btnText}\n      </Button>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  floatingButtonContainer: {\n    position: 'fixed',\n    bottom: 20,\n    left: 0,\n    right: 0,\n    alignItems: 'center',\n    justifyContent: 'center',\n    zIndex: 9999,\n    backgroundColor: 'transparent',\n  },\n  webButton: {\n    position: 'fixed',\n    bottom: 20,\n    backgroundColor: 'transparent',\n  },\n  mobileButton: {\n    position: 'fixed',\n    bottom: 20,\n    backgroundColor: 'transparent',\n    width: '100%',\n  },\n  floatingButton: {\n    backgroundColor: theme.colors.primary,\n    borderRadius: 25,\n    paddingHorizontal: 24,\n    paddingVertical: 8,\n    elevation: 5,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    maxWidth: 600,\n    minWidth: 200,\n  },\n  buttonLabel: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: '#fff',\n  },\n});\n\nexport default FloatingSaveButton;","import React, { useContext } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  ScrollView,\n} from 'react-native';\nimport { theme } from '../../styles/theme';\nimport { AuthContext } from '../../context/AuthContext';\n\n/**\n * @typedef {Object} StepProgressIndicatorProps\n * @property {string[]} steps - Array of step names\n * @property {number} currentStep - Current active step (0-based index)\n * @property {function} [onStepPress] - Optional callback when a step is pressed\n * @property {Object} [style] - Optional style overrides\n */\n\nconst StepProgressIndicator = props => {\n  const {\n    steps,\n    currentStep,\n    onStepPress,\n    style,\n  } = props;\n  \n  const { screenWidth, is_DEBUG } = useContext(AuthContext);\n  const isDesktop = screenWidth > 768;\n\n  if (is_DEBUG) {\n    console.log(\"MBA1234 - Screen width:\", screenWidth);\n    console.log(\"MBA1234 - Is desktop:\", isDesktop);\n    console.log(\"MBA1234 - Steps:\", steps);\n    console.log(\"MBA1234 - Current step:\", currentStep);\n  }\n\n  // Helper function to determine what type of line to render between steps\n  const renderLine = (stepIndex) => {\n    if (stepIndex < currentStep) {\n      // Line between completed steps\n      return (\n        <View style={[styles.line, styles.completedLine]} />\n      );\n    } else if (stepIndex === currentStep) {\n      // Line after the active step - show progress indicator\n      return (\n        <View style={styles.progressLine}>\n          <View style={styles.progressFilled} />\n          <View style={styles.progressEmpty} />\n        </View>\n      );\n    } else {\n      // Line between future steps\n      return (\n        <View style={styles.line} />\n      );\n    }\n  };\n\n  // Render a single step\n  const renderStep = (stepName, index) => {\n    const isActive = index === currentStep;\n    const isCompleted = index < currentStep;\n\n    return (\n      <View key={`step-${index}`} style={styles.step}>\n        <View style={[\n          styles.stepCircle,\n          isActive && styles.activeStepCircle,\n          isCompleted && styles.completedStepCircle\n        ]}>\n          <Text style={[\n            styles.stepNumber,\n            isActive && styles.activeStepNumber,\n            isCompleted && styles.completedStepNumber,\n          ]}>{index + 1}</Text>\n        </View>\n        \n        {(isActive || isDesktop) && (\n          <Text style={[\n            styles.stepName,\n            isActive && styles.activeStepName,\n          ]}>{stepName}</Text>\n        )}\n      </View>\n    );\n  };\n\n  return (\n    <View style={[styles.wrapper, style]}>\n      <View style={styles.container}>\n        {steps.map((step, index) => (\n          <React.Fragment key={`step-fragment-${index}`}>\n            {renderStep(step, index)}\n            {index < steps.length - 1 && renderLine(index)}\n          </React.Fragment>\n        ))}\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  wrapper: {\n    backgroundColor: theme.colors.background,\n    paddingVertical: 12,\n    width: '100%',\n    zIndex: 1,\n  },\n  container: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    width: '100%',\n    paddingHorizontal: 16,\n    justifyContent: 'space-between',\n  },\n  step: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    zIndex: 2,\n  },\n  stepCircle: {\n    width: 32,\n    height: 32,\n    borderRadius: 16,\n    backgroundColor: theme.colors.surface,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.modernBorder,\n    zIndex: 3,\n  },\n  activeStepCircle: {\n    backgroundColor: theme.colors.mainColors.main,\n    borderColor: theme.colors.mainColors.main,\n  },\n  completedStepCircle: {\n    backgroundColor: theme.colors.mainColors.main,\n    borderColor: theme.colors.mainColors.main,\n    opacity: 0.8,\n  },\n  stepNumber: {\n    fontSize: 14,\n    color: theme.colors.text,\n    opacity: 0.5,\n  },\n  activeStepNumber: {\n    color: theme.colors.surface,\n    opacity: 1,\n  },\n  completedStepNumber: {\n    color: theme.colors.surface,\n  },\n  stepName: {\n    fontSize: 14,\n    color: theme.colors.text,\n    opacity: 0.7,\n    marginLeft: 8,\n  },\n  activeStepName: {\n    color: theme.colors.mainColors.main,\n    opacity: 1,\n  },\n  line: {\n    height: 2,\n    backgroundColor: theme.colors.border,\n    opacity: 0.2,\n    flex: 1,\n    marginHorizontal: 4,\n    zIndex: 1,\n  },\n  completedLine: {\n    backgroundColor: theme.colors.mainColors.main,\n    opacity: 1,\n  },\n  progressLine: {\n    flex: 1,\n    flexDirection: 'row',\n    height: 2,\n    marginHorizontal: 4,\n    zIndex: 1,\n  },\n  progressFilled: {\n    flex: 1,\n    backgroundColor: theme.colors.mainColors.main,\n    height: 2,\n  },\n  progressEmpty: {\n    flex: 1,\n    backgroundColor: theme.colors.border,\n    opacity: 0.2,\n    height: 2,\n  },\n});\n\nexport default StepProgressIndicator; ","/**\n * Validation utility functions for form inputs\n * These functions are used across the app to ensure data integrity and security\n */\n\n// Import is_PRODUCTION from AuthContext\nimport { IsProduction } from '../context/AuthContext';\n\n/**\n * Universal input sanitizer that handles different input types\n * This function sanitizes input based on the specified type while preventing XSS and injection attacks\n * @param {string} input - The input string to sanitize\n * @param {string} type - The type of input ('message', 'email', 'name', 'password', 'phone', 'general', 'amount', 'description')\n * @param {Object} options - Additional options for sanitization\n * @returns {string} - The sanitized input\n */\nexport const sanitizeInput = (input, type = 'general', options = {}) => {\n  console.log(`[SANITIZE DEBUG] Input: \"${input}\", Type: ${type}`);\n  \n  if (!input || typeof input !== 'string') {\n    console.log(`[SANITIZE DEBUG] Empty input, returning empty string`);\n    return '';\n  }\n  \n  // Common security patterns to remove\n  const removeScriptTags = (str) => str.replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, '');\n  const removeHtmlTags = (str) => str.replace(/<[^>]*>/g, '');\n  const removeJavaScriptProtocol = (str) => str.replace(/javascript:/gi, '');\n  const removeEventHandlers = (str) => str.replace(/on\\w+\\s*=/gi, '');\n  const removeDataAttributes = (str) => str.replace(/data-\\w+\\s*=/gi, '');\n  \n  // SQL injection prevention patterns\n  const removeSqlKeywords = (str) => str.replace(/(\\b(SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|EXEC|UNION|SCRIPT)\\b)/gi, '');\n  \n  let sanitized = input;\n  console.log(`[SANITIZE DEBUG] Initial sanitized: \"${sanitized}\"`);\n  \n  // Apply common security sanitization to all types\n  sanitized = removeScriptTags(sanitized);\n  console.log(`[SANITIZE DEBUG] After removeScriptTags: \"${sanitized}\"`);\n  sanitized = removeJavaScriptProtocol(sanitized);\n  console.log(`[SANITIZE DEBUG] After removeJavaScriptProtocol: \"${sanitized}\"`);\n  sanitized = removeEventHandlers(sanitized);\n  console.log(`[SANITIZE DEBUG] After removeEventHandlers: \"${sanitized}\"`);\n  sanitized = removeDataAttributes(sanitized);\n  console.log(`[SANITIZE DEBUG] After removeDataAttributes: \"${sanitized}\"`);\n  \n  // Type-specific sanitization\n  switch (type.toLowerCase()) {\n    case 'message':\n      // For messages, we want to preserve most characters for natural communication\n      // but still prevent XSS and malicious code injection\n      \n      // Remove HTML tags but preserve common symbols and emojis\n      sanitized = removeHtmlTags(sanitized);\n      \n      // Remove SQL injection patterns\n      sanitized = removeSqlKeywords(sanitized);\n      \n      // Remove dangerous character sequences but preserve normal punctuation\n      sanitized = sanitized.replace(/[<>]/g, ''); // Remove angle brackets\n      sanitized = sanitized.replace(/\\{[^}]*\\}/g, ''); // Remove code blocks\n      \n      // Preserve line breaks and common punctuation\n      // Allow: letters, numbers, spaces, common punctuation, emojis\n      // This regex allows most unicode characters while blocking dangerous patterns\n      sanitized = sanitized.replace(/[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F]/g, ''); // Remove control characters\n      \n      // Limit length to prevent DoS attacks\n      const maxMessageLength = options.maxLength || 5000;\n      if (sanitized.length > maxMessageLength) {\n        sanitized = sanitized.substring(0, maxMessageLength);\n      }\n      break;\n      \n    case 'email':\n      // For emails, be more restrictive\n      sanitized = sanitized.replace(/[<>\"']/g, ''); // Remove quotes and brackets\n      sanitized = sanitized.replace(/\\s/g, ''); // Remove spaces\n      sanitized = sanitized.toLowerCase(); // Convert to lowercase\n      break;\n      \n    case 'name':\n      console.log(`[SANITIZE DEBUG] Processing 'name' type, before: \"${sanitized}\"`);\n      // For names, allow letters, spaces, hyphens, apostrophes, and periods\n      sanitized = sanitized.replace(/[^a-zA-Z\\s\\-'\\.]/g, '');\n      console.log(`[SANITIZE DEBUG] After character filter: \"${sanitized}\"`);\n      sanitized = sanitized.replace(/[<>\"]/g, '');\n      console.log(`[SANITIZE DEBUG] After quote removal: \"${sanitized}\"`);\n      break;\n      \n    case 'password':\n      // For passwords, remove HTML tags, SQL keywords, and dangerous characters but preserve most special chars\n      sanitized = removeHtmlTags(sanitized);\n      sanitized = removeSqlKeywords(sanitized);\n      sanitized = sanitized.replace(/[<>\"']/g, '');\n      break;\n      \n    case 'phone':\n      // For phone numbers, allow only digits, spaces, hyphens, parentheses, and plus\n      sanitized = sanitized.replace(/[^0-9\\s\\-\\(\\)\\+\\.]/g, '');\n      break;\n      \n    case 'amount':\n      // For monetary amounts, allow only digits and decimal point\n      sanitized = sanitized.replace(/[^\\d\\.]/g, '');\n      // Ensure only one decimal point\n      const parts = sanitized.split('.');\n      if (parts.length > 2) {\n        sanitized = parts[0] + '.' + parts.slice(1).join('');\n      }\n      // Limit to 2 decimal places\n      if (parts.length === 2 && parts[1].length > 2) {\n        sanitized = parts[0] + '.' + parts[1].substring(0, 2);\n      }\n      break;\n      \n    case 'description':\n      // For descriptions, allow spaces, dashes, punctuation, and normal text characters\n      sanitized = removeHtmlTags(sanitized);\n      sanitized = removeSqlKeywords(sanitized);\n      \n      // Remove dangerous angle brackets but preserve normal punctuation and spaces\n      sanitized = sanitized.replace(/[<>]/g, '');\n      \n      // Remove control characters but preserve spaces, dashes, punctuation, and normal text\n      sanitized = sanitized.replace(/[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F]/g, '');\n      \n      // Limit length\n      const maxDescLength = options.maxLength || 1000;\n      if (sanitized.length > maxDescLength) {\n        sanitized = sanitized.substring(0, maxDescLength);\n      }\n      break;\n      \n    case 'general':\n    default:\n      // For general input, allow spaces, dashes, and normal text but remove dangerous content\n      sanitized = removeHtmlTags(sanitized);\n      sanitized = removeSqlKeywords(sanitized);\n      \n      // Remove dangerous characters but preserve spaces, dashes, and normal punctuation\n      sanitized = sanitized.replace(/[<>\"']/g, '');\n      \n      // Remove control characters but preserve normal text characters\n      sanitized = sanitized.replace(/[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F]/g, '');\n      break;\n  }\n  \n  // Final security check - remove any remaining dangerous patterns\n  sanitized = sanitized.replace(/\\0/g, ''); // Remove null bytes\n  console.log(`[SANITIZE DEBUG] After null byte removal: \"${sanitized}\"`);\n  // Note: Control characters are already removed in type-specific sanitization above\n  \n  console.log(`[SANITIZE DEBUG] Final result (no trim): \"${sanitized}\"`);\n  return sanitized;\n};\n\n/**\n * Validates message content for chat/messaging functionality\n * @param {string} message - The message content to validate\n * @param {Object} options - Validation options\n * @returns {Object} - Object containing isValid (boolean), message (string), and sanitizedInput (string)\n */\nexport const validateMessage = (message, options = {}) => {\n  const maxLength = options.maxLength || 5000;\n  const minLength = options.minLength || 0;\n  const allowEmpty = options.allowEmpty || false;\n  \n  // Check if message is empty\n  if (!message || message.trim() === '') {\n    if (allowEmpty) {\n      return {\n        isValid: true,\n        message: '',\n        sanitizedInput: ''\n      };\n    } else {\n      return {\n        isValid: false,\n        message: 'Message cannot be empty',\n        sanitizedInput: ''\n      };\n    }\n  }\n  \n  // Sanitize the message\n  const sanitizedMessage = sanitizeInput(message, 'message', { maxLength });\n  \n  // Check length after sanitization\n  if (sanitizedMessage.length < minLength) {\n    return {\n      isValid: false,\n      message: `Message must be at least ${minLength} characters long`,\n      sanitizedInput: sanitizedMessage\n    };\n  }\n  \n  if (sanitizedMessage.length > maxLength) {\n    return {\n      isValid: false,\n      message: `Message must be no more than ${maxLength} characters long`,\n      sanitizedInput: sanitizedMessage\n    };\n  }\n  \n  // Check if sanitization removed too much content (potential attack)\n  const originalLength = message.length;\n  const sanitizedLength = sanitizedMessage.length;\n  const removalPercentage = ((originalLength - sanitizedLength) / originalLength) * 100;\n  \n  if (removalPercentage > 50 && originalLength > 10) {\n    return {\n      isValid: false,\n      message: 'Message contains too many invalid characters',\n      sanitizedInput: sanitizedMessage\n    };\n  }\n  \n  // Check for spam patterns (repeated characters)\n  const repeatedCharPattern = /(.)\\1{10,}/; // More than 10 repeated characters\n  if (repeatedCharPattern.test(sanitizedMessage)) {\n    return {\n      isValid: false,\n      message: 'Message contains too many repeated characters',\n      sanitizedInput: sanitizedMessage\n    };\n  }\n  \n  return {\n    isValid: true,\n    message: '',\n    sanitizedInput: sanitizedMessage\n  };\n};\n\n/**\n * Validates an email address\n * @param {string} email - The email address to validate\n * @returns {Object} - Object containing isValid (boolean) and message (string)\n */\nexport const validateEmail = (email) => {\n  // Check if email is empty\n  if (!email || email.trim() === '') {\n    return {\n      isValid: false,\n      message: 'Email is required'\n    };\n  }\n\n  // Sanitize the email first\n  const sanitizedEmail = sanitizeInput(email, 'email');\n\n  // Basic email format validation\n  const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n  \n  if (!emailRegex.test(sanitizedEmail)) {\n    return {\n      isValid: false,\n      message: 'Please enter a valid email address'\n    };\n  }\n\n  return {\n    isValid: true,\n    message: '',\n    sanitizedInput: sanitizedEmail\n  };\n};\n\n/**\n * Validates a first or last name\n * @param {string} name - The name to validate\n * @returns {Object} - Object containing isValid (boolean) and message (string)\n */\nexport const validateName = (name) => {\n  // Check if name is empty\n  if (!name || name.trim() === '') {\n    return {\n      isValid: false,\n      message: 'Name is required'\n    };\n  }\n\n  // Don't sanitize again - assume input is already sanitized\n  // This prevents double sanitization when called from components\n  \n  // Only allow letters, spaces, hyphens, and apostrophes\n  const nameRegex = /^[a-zA-Z\\s\\-'\\.]+$/;\n  \n  if (!nameRegex.test(name)) {\n    return {\n      isValid: false,\n      message: 'Name can only contain letters, spaces, hyphens, and apostrophes'\n    };\n  }\n\n  return {\n    isValid: true,\n    message: '',\n    sanitizedInput: name\n  };\n};\n\n/**\n * Validates a password\n * @param {string} password - The password to validate\n * @returns {Object} - Object containing isValid (boolean) and message (string)\n */\nexport const validatePassword = (password) => {\n  // Check if password is empty\n  if (!password || password.trim() === '') {\n    return {\n      isValid: false,\n      message: 'Password is required'\n    };\n  }\n\n  // Sanitize the password\n  const sanitizedPassword = sanitizeInput(password, 'password');\n\n  // Password strength requirements\n  const minLength = 8;\n  const hasUpperCase = /[A-Z]/.test(sanitizedPassword);\n  const hasLowerCase = /[a-z]/.test(sanitizedPassword);\n  const hasNumbers = /\\d/.test(sanitizedPassword);\n  const hasSpecialChar = /[!@#$%^&*(),.?\":{}|<>]/.test(sanitizedPassword);\n\n  // Validate password strength\n  if (IsProduction()) {\n    if (sanitizedPassword.length < minLength) {\n        return {\n        isValid: false,\n        message: `Password must be at least ${minLength} characters long`,\n        sanitizedInput: sanitizedPassword\n        };\n    }\n  }\n\n  // Only enforce strict password requirements in production\n  if (IsProduction()) {\n    if (!hasUpperCase || !hasLowerCase || !hasNumbers || !hasSpecialChar) {\n      return {\n        isValid: false,\n        message: 'Password must contain uppercase, lowercase, numbers, and special characters',\n        sanitizedInput: sanitizedPassword\n      };\n    }\n  }\n\n  return {\n    isValid: true,\n    message: '',\n    sanitizedInput: sanitizedPassword\n  };\n};\n\n/**\n * Validates that two passwords match\n * @param {string} password - The first password\n * @param {string} confirmPassword - The confirmation password\n * @returns {Object} - Object containing isValid (boolean) and message (string)\n */\nexport const validatePasswordMatch = (password, confirmPassword) => {\n  if (password !== confirmPassword) {\n    return {\n      isValid: false,\n      message: 'Passwords do not match'\n    };\n  }\n\n  return {\n    isValid: true,\n    message: ''\n  };\n};\n\n/**\n * Validates a phone number\n * @param {string} phoneNumber - The phone number to validate\n * @returns {Object} - Object containing isValid (boolean) and message (string)\n */\nexport const validatePhoneNumber = (phoneNumber) => {\n  // If phone number is optional, allow empty values\n  if (!phoneNumber || phoneNumber.trim() === '') {\n    return {\n      isValid: true,\n      message: ''\n    };\n  }\n\n  // Sanitize the phone number\n  const sanitizedPhone = sanitizeInput(phoneNumber, 'phone');\n\n  // Basic phone number format validation (allows various formats)\n  const phoneRegex = /^[\\+]?[(]?[0-9]{3}[)]?[-\\s\\.]?[0-9]{3}[-\\s\\.]?[0-9]{4,6}$/;\n  \n  if (!phoneRegex.test(sanitizedPhone)) {\n    return {\n      isValid: false,\n      message: 'Please enter a valid phone number'\n    };\n  }\n\n  return {\n    isValid: true,\n    message: '',\n    sanitizedInput: sanitizedPhone\n  };\n};\n\n// Legacy function - kept for backward compatibility but now uses the universal sanitizer\nexport const sanitizeInputLegacy = (input) => {\n  return sanitizeInput(input, 'general');\n};\n","import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  ScrollView,\n  Modal,\n  TextInput,\n  Platform,\n  Dimensions\n} from 'react-native';\nimport { Picker } from '@react-native-picker/picker';\nimport { theme } from '../../styles/theme';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { debugLog } from '../../context/AuthContext';\nimport { sanitizeInput, validateName } from '../../validation/validation';\n\nconst GENERAL_CATEGORIES = [\n  {\n    id: 'all',\n    name: 'All',\n    icon: 'paw-outline',\n    animalTypes: [] // Will be populated with all animal types\n  },\n  {\n    id: 'farm_animals',\n    name: 'Farm Animals',\n    icon: 'horse',\n    animalTypes: ['Horse', 'Cow', 'Sheep', 'Goat', 'Pig', 'Other']\n  },\n  {\n    id: 'domestic',\n    name: 'Domestic',\n    icon: 'paw',\n    animalTypes: ['Dogs', 'Cats', 'Birds', 'Rabbits', 'Hamsters', 'Other']\n  },\n  {\n    id: 'reptiles',\n    name: 'Reptiles',\n    icon: 'snake',\n    animalTypes: ['Snake', 'Lizard', 'Turtle', 'Gecko', 'Chameleon', 'Other']\n  },\n  {\n    id: 'aquatic',\n    name: 'Aquatic',\n    icon: 'fish',\n    animalTypes: ['Fish', 'Frog', 'Newt', 'Axolotl', 'Other']\n  },\n  {\n    id: 'invertebrates',\n    name: 'Invertebrates',\n    icon: 'spider',\n    animalTypes: ['Spider', 'Scorpion', 'Crab', 'Snail', 'Millipede', 'Other']\n  }\n];\n\n// Animal icons lookup\nconst ANIMAL_ICONS = {\n  // Farm animals\n  'Horse': 'horse',\n  'Cow': 'cow',\n  'Sheep': 'sheep',\n  'Goat': 'cow',\n  'Pig': 'pig',\n  \n  // Domestic\n  'Dogs': 'dog',\n  'Cats': 'cat',\n  'Birds': 'bird',\n  'Rabbits': 'rabbit',\n  'Hamsters': 'rodent',\n  \n  // Reptiles\n  'Snake': 'snake',\n  'Lizard': 'snake',\n  'Turtle': 'turtle',\n  'Gecko': 'snake',\n  'Chameleon': 'snake',\n  \n  // Aquatic\n  'Fish': 'fish',\n  'Frog': 'snake',\n  'Newt': 'fish',\n  'Axolotl': 'fish',\n  \n  // Invertebrates\n  'Spider': 'spider',\n  'Scorpion': 'spider',\n  'Crab': 'fish',\n  'Snail': 'snail',\n  'Millipede': 'bug',\n  \n  // Default\n  'Other': 'help-circle-outline'\n};\n\n// Animal categories lookup - hardcoded mapping of each animal to its proper category\nconst ANIMAL_CATEGORIES = {\n  // Farm animals\n  'Horse': 'Farm Animals',\n  'Cow': 'Farm Animals',\n  'Sheep': 'Farm Animals',\n  'Goat': 'Farm Animals',\n  'Pig': 'Farm Animals',\n  \n  // Domestic\n  'Dogs': 'Domestic',\n  'Cats': 'Domestic',\n  'Birds': 'Domestic',\n  'Rabbits': 'Domestic',\n  'Hamsters': 'Domestic',\n  \n  // Reptiles\n  'Snake': 'Reptiles',\n  'Lizard': 'Reptiles',\n  'Turtle': 'Reptiles',\n  'Gecko': 'Reptiles',\n  'Chameleon': 'Reptiles',\n  \n  // Aquatic\n  'Fish': 'Aquatic',\n  'Frog': 'Aquatic',\n  'Newt': 'Aquatic',\n  'Axolotl': 'Aquatic',\n  \n  // Invertebrates\n  'Spider': 'Invertebrates',\n  'Scorpion': 'Invertebrates',\n  'Crab': 'Invertebrates',\n  'Snail': 'Invertebrates',\n  'Millipede': 'Invertebrates'\n};\n\n// Get all animal types from all categories\nconst getAllAnimalTypes = () => {\n  const allTypes = [];\n  GENERAL_CATEGORIES.forEach(category => {\n    if (category.id !== 'all') {\n      category.animalTypes.forEach(type => {\n        if (type !== 'Other' && !allTypes.includes(type)) {\n          allTypes.push(type);\n        }\n      });\n    }\n  });\n  return allTypes;\n};\n\n// Populate the 'all' category with all animal types\nGENERAL_CATEGORIES[0].animalTypes = getAllAnimalTypes();\n\nconst DEFAULT_ANIMAL_TYPES = [\n  'Dogs',\n  'Cats',\n  'Fish',\n  'Birds',\n  'Rabbits',\n  'Snake'\n];\n\n// Most common pets to display first when \"All\" is selected\nconst COMMON_PETS = [\n  'Dogs',\n  'Cats',\n  'Fish',\n  'Birds',\n  'Hamsters',\n  'Rabbits',\n  'Snake',\n  'Turtle'\n];\n\n// Get the appropriate icon for an animal type\nconst getAnimalIcon = (animalName, categoryId = null) => {\n  // If the animal has a predefined icon, use it\n  if (ANIMAL_ICONS[animalName]) {\n    return ANIMAL_ICONS[animalName];\n  }\n  \n  // For custom animals, use the category icon if available\n  if (categoryId) {\n    const category = GENERAL_CATEGORIES.find(cat => cat.id === categoryId);\n    if (category) {\n      return category.icon;\n    }\n  }\n  \n  // Default to paw icon\n  return 'paw';\n};\n\nconst getCategoryIcon = (categoryName) => {\n  const category = GENERAL_CATEGORIES.find(cat => cat.name === categoryName);\n  return category ? category.icon : 'paw-outline';\n};\n\nconst CategorySelectionStep = ({ serviceData, setServiceData }) => {\n  const [customAnimalInput, setCustomAnimalInput] = useState('');\n  const [customAnimalCategory, setCustomAnimalCategory] = useState('');\n  const [screenWidth, setScreenWidth] = useState(Dimensions.get('window').width);\n  const [customAnimalError, setCustomAnimalError] = useState('');\n  const isMobile = Platform.OS !== 'web';\n\n  useEffect(() => {\n    const updateLayout = () => {\n      setScreenWidth(Dimensions.get('window').width);\n    };\n\n    Dimensions.addEventListener('change', updateLayout);\n    return () => {\n      // Remove listener on cleanup\n      if (Dimensions.removeEventListener) {\n        Dimensions.removeEventListener('change', updateLayout);\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    // Initialize with first category selected\n    if (!customAnimalCategory && GENERAL_CATEGORIES.length > 1) {\n      setCustomAnimalCategory(GENERAL_CATEGORIES[1].id);\n    }\n    \n    // Debug log to check what animal types we're receiving\n    debugLog('MBA456789', 'CategorySelectionStep received serviceData:', serviceData);\n    if (serviceData.animalTypes && serviceData.animalTypes.length > 0) {\n      debugLog('MBA456789', 'Initial animal types in CategorySelectionStep:', serviceData.animalTypes);\n    }\n  }, []);\n\n  const isAnimalTypeSelected = (animalName) => {\n    if (!serviceData.animalTypes || !serviceData.animalTypes.length) {\n      return false;\n    }\n    \n    // Check all possible formats of animal types\n    return serviceData.animalTypes.some(animal => {\n      if (typeof animal === 'string') {\n        return animal === animalName;\n      } else if (typeof animal === 'object' && animal !== null) {\n        return animal.name === animalName;\n      }\n      return false;\n    });\n  };\n\n  const getCategoryForAnimal = (animalName) => {\n    const animal = serviceData.animalTypes.find(a => a.name === animalName);\n    if (animal && animal.categoryId) {\n      const category = GENERAL_CATEGORIES.find(cat => cat.id === animal.categoryId);\n      return category ? category.name : 'Other';\n    }\n    return 'Other';\n  };\n\n  const handleAnimalTypeSelect = (animalName, categoryId = null) => {\n    debugLog('MBA456789', `Selecting animal: ${animalName}, categoryId: ${categoryId}`);\n    \n    if (animalName === 'Other') {\n      // No longer need to show custom input since it's always visible\n      setCustomAnimalCategory(categoryId || (GENERAL_CATEGORIES[1] && GENERAL_CATEGORIES[1].id));\n      return;\n    }\n\n    setServiceData(prev => {\n      const prevAnimalTypes = prev.animalTypes || [];\n      debugLog('MBA456789', 'Current animal types before update:', prevAnimalTypes);\n      \n      // Check if this animal is already selected\n      const existingAnimalIndex = prevAnimalTypes.findIndex(animal => {\n        if (typeof animal === 'string') {\n          return animal === animalName;\n        } else if (typeof animal === 'object' && animal !== null) {\n          return animal.name === animalName;\n        }\n        return false;\n      });\n      \n      debugLog('MBA456789', `Animal ${animalName} is ${existingAnimalIndex !== -1 ? 'already selected' : 'not selected'}`);\n      \n      if (existingAnimalIndex !== -1) {\n        // If already selected, remove it\n        const updatedTypes = [...prevAnimalTypes];\n        updatedTypes.splice(existingAnimalIndex, 1);\n        debugLog('MBA456789', 'Animal types after removal:', updatedTypes);\n        \n        return {\n          ...prev,\n          animalTypes: updatedTypes\n        };\n      } else {\n        // If not selected, add it with the hardcoded category\n        // Get the proper category from our mapping\n        const hardcodedCategory = ANIMAL_CATEGORIES[animalName] || 'Other';\n        \n        // Find the category ID from the name if needed\n        let categoryToUse = categoryId;\n        if (!categoryToUse) {\n          const foundCategory = GENERAL_CATEGORIES.find(cat => cat.name === hardcodedCategory);\n          categoryToUse = foundCategory ? foundCategory.id : 'other';\n        }\n        \n        const newAnimal = {\n          name: animalName,\n          categoryId: categoryToUse,\n          categoryName: hardcodedCategory, // Always use the hardcoded category name\n          isCustom: false\n        };\n        \n        debugLog('MBA456789', 'Adding new animal:', newAnimal);\n        debugLog('MBA456789', 'Animal types after addition:', [...prevAnimalTypes, newAnimal]);\n        \n        return {\n          ...prev,\n          animalTypes: [...prevAnimalTypes, newAnimal]\n        };\n      }\n    });\n  };\n\n  const handleCustomAnimalInputChange = (text) => {\n    debugLog('MBA1234', 'Custom animal input change:', text);\n    \n    // Sanitize the input using the universal sanitizer\n    const sanitized = sanitizeInput(text, 'name', { maxLength: 30 });\n    \n    // Validate the sanitized input\n    const validation = validateName(sanitized);\n    if (!validation.isValid && sanitized.length > 0) {\n      setCustomAnimalError(validation.message);\n    } else {\n      setCustomAnimalError('');\n    }\n    \n    setCustomAnimalInput(sanitized);\n  };\n\n  const handleAddCustomAnimal = () => {\n    if (!customAnimalInput.trim()) {\n      setCustomAnimalError('Animal name is required');\n      return;\n    }\n\n    // Final validation before adding\n    const validation = validateName(customAnimalInput);\n    if (!validation.isValid) {\n      setCustomAnimalError(validation.message);\n      return;\n    }\n\n    // Additional business logic validation\n    if (customAnimalInput.trim().length < 2) {\n      setCustomAnimalError('Animal name must be at least 2 characters long');\n      return;\n    }\n\n    // Check if animal already exists\n    const animalExists = serviceData.animalTypes.some(animal => \n      animal.name.toLowerCase() === customAnimalInput.trim().toLowerCase()\n    );\n    \n    if (animalExists) {\n      setCustomAnimalError('This animal type is already added');\n      return;\n    }\n\n    debugLog('MBA1234', 'Adding custom animal with validated input:', customAnimalInput.trim());\n\n    // Find the category name for the custom animal\n    let categoryName = 'Other';\n    if (customAnimalCategory) {\n      const categoryInfo = GENERAL_CATEGORIES.find(cat => cat.id === customAnimalCategory);\n      if (categoryInfo) {\n        categoryName = categoryInfo.name;\n      }\n    }\n\n    setServiceData(prev => ({\n      ...prev,\n      animalTypes: [...prev.animalTypes, { \n        name: customAnimalInput.trim(),\n        categoryId: customAnimalCategory || 'other',\n        categoryName: categoryName, // Add the category name\n        isCustom: true\n      }]\n    }));\n    \n    // Also add the category to generalCategories if it's not already there\n    if (customAnimalCategory) {\n      const categoryExists = serviceData.generalCategories.some(cat => cat.id === customAnimalCategory);\n      if (!categoryExists) {\n        const categoryToAdd = GENERAL_CATEGORIES.find(cat => cat.id === customAnimalCategory);\n        if (categoryToAdd) {\n          setServiceData(prev => ({\n            ...prev,\n            generalCategories: [...prev.generalCategories, {\n              id: categoryToAdd.id,\n              name: categoryToAdd.name,\n              icon: categoryToAdd.icon\n            }]\n          }));\n        }\n      }\n    }\n    \n    setCustomAnimalInput('');\n    setCustomAnimalError('');\n    // Don't hide the form anymore since it's always visible\n  };\n\n  const getFilteredAnimalTypes = () => {\n    debugLog('MBA456789', 'Current serviceData.animalTypes:', serviceData.animalTypes);\n    \n    // Only show Dogs and Cats for MVP\n    let animalTypesToShow = [\n      {\n        name: 'Dogs',\n        categoryId: 'domestic',\n        categoryName: 'Domestic',\n        icon: getAnimalIcon('Dogs', 'domestic')\n      },\n      {\n        name: 'Cats',\n        categoryId: 'domestic',\n        categoryName: 'Domestic',\n        icon: getAnimalIcon('Cats', 'domestic')\n      }\n    ];\n    \n    // Add custom animals\n    if (serviceData.animalTypes && serviceData.animalTypes.length > 0) {\n      serviceData.animalTypes.forEach(animal => {\n        // Skip if not an object or has no name\n        if (typeof animal !== 'object' || !animal || !animal.name) {\n          return;\n        }\n        \n        // Check if it's a custom animal or if its name doesn't match Dogs/Cats\n        const isCustomOrUnknown = animal.isCustom || \n          (animal.name !== 'Dogs' && animal.name !== 'Cats');\n        \n        if (isCustomOrUnknown) {\n          let categoryId = animal.categoryId;\n          let categoryName = animal.categoryName || 'Other';\n          \n          // If we have a categoryName but no categoryId, try to find the corresponding categoryId\n          if (!categoryId && categoryName) {\n            const category = GENERAL_CATEGORIES.find(cat => cat.name === categoryName);\n            if (category) {\n              categoryId = category.id;\n            }\n          }\n          \n          // If we still don't have a categoryName, try to derive from categoryId\n          if (!categoryName && categoryId) {\n            const category = GENERAL_CATEGORIES.find(cat => cat.id === categoryId);\n            if (category) {\n              categoryName = category.name;\n            }\n          }\n          \n          // Check if this animal is already in the list\n          const existing = animalTypesToShow.find(a => a.name === animal.name);\n          if (!existing) {\n            debugLog('MBA456789', `Adding custom animal to filtered list: ${animal.name}, category: ${categoryName}`);\n            \n            animalTypesToShow.push({\n              name: animal.name,\n              categoryId: categoryId,\n              categoryName: categoryName,\n              icon: getAnimalIcon(animal.name, categoryId),\n              isCustom: true\n            });\n          }\n        }\n      });\n    }\n    \n    debugLog('MBA456789', 'Filtered animal types to show:', animalTypesToShow);\n    \n    return { animalTypes: animalTypesToShow, categories: [] };\n  };\n\n  const { animalTypes: filteredAnimalTypes } = getFilteredAnimalTypes();\n  \n  const styles = StyleSheet.create({\n    container: {\n      flex: 1,\n      padding: 16,\n    },\n    title: {\n      fontSize: 24,\n      fontWeight: '600',\n      color: theme.colors.text,\n      marginBottom: 16,\n      fontFamily: theme.fonts.header.fontFamily,\n    },\n    subtitle: {\n      fontSize: 20,\n      fontWeight: '600',\n      color: theme.colors.text,\n      marginTop: 24,\n      marginBottom: 16,\n      fontFamily: theme.fonts.header.fontFamily,\n    },\n    instructions: {\n      fontSize: 16,\n      color: theme.colors.textSecondary,\n      marginBottom: 16,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    animalTypesGrid: {\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      gap: 16,\n    },\n    animalTypeItem: {\n      flex: 1,\n      minWidth: Platform.OS === 'web' ? (screenWidth <= 420 ? '45%' : '30%') : '45%',\n      marginBottom: 12,\n    },\n    animalTypeCard: {\n      borderRadius: 12,\n      borderWidth: 1,\n      borderColor: theme.colors.border,\n      backgroundColor: theme.colors.surface,\n      padding: 16,\n      height: 70,\n      justifyContent: 'center',\n    },\n    selectedAnimalCard: {\n      borderColor: theme.colors.mainColors.main,\n      backgroundColor: theme.colors.mainColors.mainLight,\n    },\n    animalTypeRow: {\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n    },\n    animalIconAndName: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      gap: 12,\n    },\n    animalTypeName: {\n      fontSize: 16,\n      fontWeight: '500',\n      color: theme.colors.text,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    customInputContainer: {\n      marginTop: 6,\n      padding: 16,\n      borderRadius: 12,\n      borderWidth: 1,\n      borderColor: theme.colors.border,\n      backgroundColor: theme.colors.backgroundContrast,\n    },\n    customInputTitle: {\n      fontSize: 16,\n      fontWeight: '600',\n      color: theme.colors.text,\n      marginBottom: 12,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    inputRow: {\n      flexDirection: 'row',\n      gap: 8,\n      marginBottom: 12,\n    },\n    textInputContainer: {\n      flex: 1,\n      marginRight: 12,\n    },\n    textInput: {\n      flex: 1,\n      height: 48,\n      borderWidth: 1,\n      borderColor: theme.colors.border,\n      borderRadius: 8,\n      paddingHorizontal: 12,\n      backgroundColor: theme.colors.surface,\n      fontSize: 16,\n      color: theme.colors.text,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    textInputError: {\n      borderColor: theme.colors.error,\n    },\n    pickerContainer: {\n      flex: 1,\n      height: 48,\n      borderWidth: 1,\n      borderColor: theme.colors.border,\n      borderRadius: 8,\n      backgroundColor: theme.colors.surface,\n      justifyContent: 'center',\n    },\n    picker: {\n      height: 48,\n      color: theme.colors.text,\n    },\n    addButton: {\n      backgroundColor: theme.colors.mainColors.main,\n      borderRadius: 8,\n      paddingVertical: 12,\n      paddingHorizontal: 16,\n      alignItems: 'center',\n    },\n    addButtonText: {\n      color: theme.colors.surface,\n      fontSize: 16,\n      fontWeight: '600',\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    addButtonDisabled: {\n      backgroundColor: theme.colors.border,\n      opacity: 0.6,\n    },\n    addButtonTextDisabled: {\n      color: theme.colors.textSecondary,\n    },\n    selectedAnimalsSection: {\n      marginTop: 24,\n      marginBottom: 16,\n      padding: 16,\n      backgroundColor: theme.colors.backgroundContrast,\n      borderRadius: 12,\n      borderWidth: 1,\n      borderColor: theme.colors.border,\n    },\n    selectedAnimalsTitle: {\n      fontSize: 16,\n      fontWeight: '600',\n      color: theme.colors.text,\n      marginBottom: 12,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    selectedAnimalsList: {\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      gap: 8,\n    },\n    animalBubble: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      backgroundColor: theme.colors.surface,\n      borderRadius: 20,\n      paddingVertical: 6,\n      paddingHorizontal: 12,\n      borderWidth: 1,\n      borderColor: theme.colors.border,\n      marginBottom: 8,\n      marginRight: 8,\n      gap: 8,\n    },\n    animalBubbleText: {\n      fontSize: 14,\n      color: theme.colors.text,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    removeAnimalButton: {\n      padding: 2,\n    },\n    errorText: {\n      color: theme.colors.error,\n      fontSize: 12,\n      marginTop: 4,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n  });\n\n  return (\n    <ScrollView style={styles.container}>\n      <Text style={styles.title}>Select Animal Types for Your Service</Text>\n      <Text style={styles.instructions}>\n        Choose the animal types your service will cover. You can select Dogs, Cats, or add custom animals.\n      </Text>\n      \n      {/* Selected Animals Summary - Moved above Dogs/Cats cards */}\n      {serviceData.animalTypes.length > 0 && (\n        <View style={styles.selectedAnimalsSection}>\n          <Text style={styles.selectedAnimalsTitle}>\n            Selected Animals ({serviceData.animalTypes.length})\n          </Text>\n          <View style={styles.selectedAnimalsList}>\n            {serviceData.animalTypes.map((animal, index) => {\n              const animalName = animal.name;\n              const icon = getAnimalIcon(animalName, animal.categoryId);\n              \n              return (\n                <View key={index} style={styles.animalBubble}>\n                  <MaterialCommunityIcons\n                    name={icon}\n                    size={18}\n                    color={theme.colors.text}\n                  />\n                  <Text style={styles.animalBubbleText}>{animalName}</Text>\n                  <TouchableOpacity \n                    onPress={() => handleAnimalTypeSelect(animalName)}\n                    style={styles.removeAnimalButton}\n                  >\n                    <MaterialCommunityIcons \n                      name=\"close-circle\" \n                      size={16} \n                      color={theme.colors.text} \n                    />\n                  </TouchableOpacity>\n                </View>\n              );\n            })}\n          </View>\n        </View>\n      )}\n      \n      {/* Animal Types Grid - Only Dogs and Cats */}\n      {filteredAnimalTypes.length > 0 ? (\n        <View style={styles.animalTypesGrid}>\n          {filteredAnimalTypes.filter(animal => animal.name === 'Dogs' || animal.name === 'Cats').map((animalType) => (\n            <View key={`${animalType.categoryId}-${animalType.name}`} style={styles.animalTypeItem}>\n              <TouchableOpacity\n                style={[\n                  styles.animalTypeCard,\n                  isAnimalTypeSelected(animalType.name) && styles.selectedAnimalCard\n                ]}\n                onPress={() => handleAnimalTypeSelect(animalType.name, animalType.categoryId)}\n              >\n                <View style={styles.animalTypeRow}>\n                  <View style={styles.animalIconAndName}>\n                    <MaterialCommunityIcons\n                      name={animalType.icon}\n                      size={24}\n                      color={theme.colors.text}\n                    />\n                    <Text style={styles.animalTypeName}>{animalType.name}</Text>\n                  </View>\n                  {isAnimalTypeSelected(animalType.name) && (\n                    <MaterialCommunityIcons\n                      name=\"check-circle\"\n                      size={24}\n                      color={theme.colors.mainColors.main}\n                    />\n                  )}\n                </View>\n              </TouchableOpacity>\n            </View>\n          ))}\n        </View>\n      ) : null}\n      \n      {/* Custom Animal Input - Always visible */}\n      <View style={styles.customInputContainer}>\n        <Text style={styles.customInputTitle}>Add a Custom Animal Type</Text>\n        <View style={styles.inputRow}>\n          <View style={styles.textInputContainer}>\n            <TextInput\n              style={[styles.textInput, customAnimalError ? styles.textInputError : null]}\n              placeholder=\"Animal Type (e.g. Hamster)\"\n              value={customAnimalInput}\n              onChangeText={handleCustomAnimalInputChange}\n              placeholderTextColor={theme.colors.placeHolderText}\n              maxLength={30}\n            />\n            {customAnimalError ? (\n              <Text style={styles.errorText}>{customAnimalError}</Text>\n            ) : null}\n          </View>\n          <View style={styles.pickerContainer}>\n            {Platform.OS === 'ios' || Platform.OS === 'android' ? (\n              <Picker\n                selectedValue={customAnimalCategory}\n                style={styles.picker}\n                onValueChange={(itemValue) => setCustomAnimalCategory(itemValue)}\n              >\n                {GENERAL_CATEGORIES.filter(cat => cat.id !== 'all').map(category => (\n                  <Picker.Item \n                    key={category.id} \n                    label={category.name} \n                    value={category.id} \n                  />\n                ))}\n              </Picker>\n            ) : (\n              React.createElement('select', {\n                value: customAnimalCategory,\n                onChange: (e) => setCustomAnimalCategory(e.target.value),\n                style: styles.picker\n              }, \n                GENERAL_CATEGORIES.filter(cat => cat.id !== 'all').map(category => \n                  React.createElement('option', {\n                    key: category.id,\n                    value: category.id\n                  }, category.name)\n                )\n              )\n            )}\n          </View>\n        </View>\n        <TouchableOpacity \n          style={[\n            styles.addButton,\n            (!customAnimalInput.trim() || customAnimalError) ? styles.addButtonDisabled : null\n          ]}\n          onPress={handleAddCustomAnimal}\n          disabled={!customAnimalInput.trim() || customAnimalError}\n        >\n          <Text style={[\n            styles.addButtonText,\n            (!customAnimalInput.trim() || customAnimalError) ? styles.addButtonTextDisabled : null\n          ]}>Add Animal</Text>\n        </TouchableOpacity>\n      </View>\n    </ScrollView>\n  );\n};\n\nexport default CategorySelectionStep; ","import React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TextInput,\n  TouchableOpacity,\n  Switch\n} from 'react-native';\nimport { theme } from '../../styles/theme';\nimport { debugLog } from '../../context/AuthContext';\nimport { sanitizeInput } from '../../validation/validation';\n\nconst MAX_SERVICE_NAME_LENGTH = 30;\nconst MAX_DESCRIPTION_LENGTH = 300;\n\nconst ServiceDetailsStep = ({ serviceData, setServiceData }) => {\n  const [nameError, setNameError] = useState('');\n  const [descriptionError, setDescriptionError] = useState('');\n\n  const handleServiceNameChange = (text) => {\n    debugLog('MBA1234', 'Service name input change:', text);\n    \n    // Sanitize the input using the universal sanitizer\n    const sanitized = sanitizeInput(text, 'name', { maxLength: MAX_SERVICE_NAME_LENGTH });\n    \n    // Business logic validation\n    if (sanitized.length > 0 && sanitized.length < 3) {\n      setNameError('Service name must be at least 3 characters long');\n    } else if (sanitized.length > MAX_SERVICE_NAME_LENGTH) {\n      setNameError(`Service name must be no more than ${MAX_SERVICE_NAME_LENGTH} characters long`);\n    } else {\n      setNameError('');\n    }\n    \n    setServiceData(prev => ({\n      ...prev,\n      serviceName: sanitized\n    }));\n  };\n\n  const handleDescriptionChange = (text) => {\n    debugLog('MBA1234', 'Service description input change:', text);\n    \n    // Sanitize the input using the universal sanitizer\n    const sanitized = sanitizeInput(text, 'description', { maxLength: MAX_DESCRIPTION_LENGTH });\n    \n    // Business logic validation\n    if (sanitized.length > 0 && sanitized.length < 10) {\n      setDescriptionError('Service description must be at least 10 characters long');\n    } else if (sanitized.length > MAX_DESCRIPTION_LENGTH) {\n      setDescriptionError(`Service description must be no more than ${MAX_DESCRIPTION_LENGTH} characters long`);\n    } else {\n      setDescriptionError('');\n    }\n    \n    setServiceData(prev => ({\n      ...prev,\n      serviceDescription: sanitized\n    }));\n  };\n\n  const handleOvernightToggle = (value) => {\n    setServiceData(prev => ({\n      ...prev,\n      isOvernight: value\n    }));\n  };\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Service Details</Text>\n      \n      <View style={styles.inputGroup}>\n        <Text style={styles.label}>Service Name</Text>\n        <TextInput\n          style={[styles.input, nameError ? styles.inputError : null]}\n          value={serviceData.serviceName}\n          onChangeText={handleServiceNameChange}\n          placeholder=\"e.g. Premium Pet Grooming\"\n          placeholderTextColor={theme.colors.placeHolderText}\n          maxLength={MAX_SERVICE_NAME_LENGTH}\n        />\n        <Text style={styles.characterCount}>\n          {serviceData.serviceName.length}/{MAX_SERVICE_NAME_LENGTH}\n        </Text>\n        {nameError ? <Text style={styles.errorText}>{nameError}</Text> : null}\n      </View>\n      \n      <View style={styles.inputGroup}>\n        <Text style={styles.label}>Service Description</Text>\n        <TextInput\n          style={[styles.input, styles.textArea, descriptionError ? styles.inputError : null]}\n          value={serviceData.serviceDescription}\n          onChangeText={handleDescriptionChange}\n          placeholder=\"Describe your service in detail...\"\n          placeholderTextColor={theme.colors.placeHolderText}\n          multiline={true}\n          numberOfLines={6}\n          textAlignVertical=\"top\"\n          maxLength={MAX_DESCRIPTION_LENGTH}\n        />\n        <Text style={styles.characterCount}>\n          {serviceData.serviceDescription.length}/{MAX_DESCRIPTION_LENGTH}\n        </Text>\n        {descriptionError ? <Text style={styles.errorText}>{descriptionError}</Text> : null}\n      </View>\n      \n      <View style={styles.switchContainer}>\n        <View style={styles.switchGroup}>\n          <Text style={styles.switchLabel}>Overnight Service</Text>\n          <Text style={styles.switchSubLabel}>Does this service require overnight stay?</Text>\n        </View>\n        <Switch\n          value={serviceData.isOvernight}\n          onValueChange={handleOvernightToggle}\n          trackColor={{ false: theme.colors.border, true: theme.colors.mainColors.main }}\n          thumbColor={theme.colors.surface}\n          ios_backgroundColor={theme.colors.border}\n        />\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 16,\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 24,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  inputGroup: {\n    marginBottom: 24,\n  },\n  label: {\n    fontSize: 16,\n    color: theme.colors.text,\n    marginBottom: 8,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 12,\n    padding: 16,\n    fontSize: 16,\n    color: theme.colors.text,\n    backgroundColor: theme.colors.surface,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  inputError: {\n    borderColor: theme.colors.error,\n  },\n  textArea: {\n    height: 120,\n    textAlignVertical: 'top',\n  },\n  switchContainer: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 12,\n    padding: 16,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  switchGroup: {\n    flex: 1,\n    marginRight: 16,\n  },\n  switchLabel: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginBottom: 4,\n  },\n  switchSubLabel: {\n    fontSize: 14,\n    color: theme.colors.placeHolderText,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  errorText: {\n    color: theme.colors.error,\n    fontSize: 14,\n    marginTop: 4,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  characterCount: {\n    color: theme.colors.textSecondary,\n    fontSize: 12,\n    marginTop: 4,\n    textAlign: 'right',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default ServiceDetailsStep; ","import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TextInput,\n  TouchableOpacity,\n  Switch,\n  ScrollView,\n  TouchableWithoutFeedback,\n  Modal\n} from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../../styles/theme';\nimport { TIME_UNIT_MAPPING, BACKEND_TO_FRONTEND_TIME_UNIT } from '../../data/mockData';\nimport { debugLog } from '../../context/AuthContext';\nimport { sanitizeInput } from '../../validation/validation';\n\nconst TIME_UNITS = Object.keys(TIME_UNIT_MAPPING);\nconst ANIMAL_THRESHOLDS = ['1', '2', '3', '4', '5'];\n\nconst RatesAndReviewStep = ({ serviceData, setServiceData, isUpdatingService, setIsUpdatingService, onProceedWithUpdate }) => {\n  // Debug log for tracking isOvernight status\n  debugLog('MBA5931', 'RatesAndReviewStep render - isOvernight status:', serviceData.isOvernight);\n  \n  const [showTimeUnitDropdown, setShowTimeUnitDropdown] = useState(false);\n  const [showThresholdDropdown, setShowThresholdDropdown] = useState(false);\n  const [customChargeVisible, setCustomChargeVisible] = useState(false);\n  const [isHolidayRatePercent, setIsHolidayRatePercent] = useState(true);\n  const [isEditingExistingRate, setIsEditingExistingRate] = useState(false);\n  const [showUnsavedRateWarning, setShowUnsavedRateWarning] = useState(false);\n  const [newCustomRate, setNewCustomRate] = useState({\n    title: '',\n    rate: '',\n    description: ''\n  });\n  \n  // Error states for validation\n  const [baseRateError, setBaseRateError] = useState('');\n  const [additionalRateError, setAdditionalRateError] = useState('');\n  const [holidayRateError, setHolidayRateError] = useState('');\n  const [customRateTitleError, setCustomRateTitleError] = useState('');\n  const [customRateAmountError, setCustomRateAmountError] = useState('');\n  const [customRateDescriptionError, setCustomRateDescriptionError] = useState('');\n\n  // Filter available time units based on isOvernight flag\n  const availableTimeUnits = serviceData.isOvernight ? \n    ['Per Night'] : \n    TIME_UNITS;\n\n  // Check if we need to convert existing data on component mount\n  useEffect(() => {\n    // Initialize isPercent property based on the state\n    setServiceData(prev => ({\n      ...prev,\n      rates: {\n        ...prev.rates,\n        isPercent: isHolidayRatePercent\n      }\n    }));\n    \n    // If service is overnight, ensure the base_rate_unit is 'Per Night'\n    if (serviceData.isOvernight) {\n      debugLog('MBA5931', 'Service is overnight, setting rate unit to Per Night');\n      setServiceData(prev => ({\n        ...prev,\n        rates: {\n          ...prev.rates,\n          base_rate_unit: 'Per Night'\n        }\n      }));\n    }\n    // If we have a base_rate_unit from backend but it's not in our mapping, initialize with default\n    else if (serviceData.rates?.base_rate_unit && !BACKEND_TO_FRONTEND_TIME_UNIT[serviceData.rates.base_rate_unit]) {\n      debugLog('MBA5931', 'Converting initial base_rate_unit to mapped value');\n      const frontendKey = Object.keys(TIME_UNIT_MAPPING).find(\n        key => TIME_UNIT_MAPPING[key] === serviceData.rates.base_rate_unit\n      );\n      \n      if (!frontendKey && serviceData.rates.base_rate_unit) {\n        // If we don't have a mapping for this value, keep the backend value\n        debugLog('MBA5931', 'No mapping found for:', serviceData.rates.base_rate_unit);\n      }\n    }\n\n    // Check if existing holiday rate has a % sign\n    if (serviceData.rates?.holidayRate) {\n      const holidayRateString = serviceData.rates.holidayRate.toString();\n      if (holidayRateString.includes('%')) {\n        setIsHolidayRatePercent(true);\n        // Strip the % sign for the input field\n        setServiceData(prev => ({\n          ...prev,\n          rates: {\n            ...prev.rates,\n            holidayRate: holidayRateString.replace('%', ''),\n            isPercent: true\n          }\n        }));\n      } else if (holidayRateString.includes('$')) {\n        setIsHolidayRatePercent(false);\n        // Strip the $ sign for the input field\n        setServiceData(prev => ({\n          ...prev,\n          rates: {\n            ...prev.rates,\n            holidayRate: holidayRateString.replace('$', ''),\n            isPercent: false\n          }\n        }));\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    debugLog('MBA5931', 'Available TIME_UNITS:', TIME_UNITS);\n    debugLog('MBA5931', 'TIME_UNIT_MAPPING:', TIME_UNIT_MAPPING);\n    debugLog('MBA5931', 'Current base_rate_unit:', serviceData.rates?.base_rate_unit);\n    debugLog('MBA5931', 'Displayed unit text:', serviceData.rates?.base_rate_unit ? \n      (BACKEND_TO_FRONTEND_TIME_UNIT[serviceData.rates.base_rate_unit] || serviceData.rates.base_rate_unit) : \n      TIME_UNITS[0]);\n  }, [serviceData.rates?.base_rate_unit]);\n\n  // Watch for changes to isOvernight and update rate unit accordingly\n  useEffect(() => {\n    if (serviceData.isOvernight) {\n      debugLog('MBA5931', 'Overnight service detected, forcing Per Night rate unit');\n      setServiceData(prev => ({\n        ...prev,\n        rates: {\n          ...prev.rates,\n          base_rate_unit: 'Per Night'\n        }\n      }));\n    }\n  }, [serviceData.isOvernight]);\n\n  // Helper function to check if there's an unsaved custom rate\n  const hasUnsavedCustomRate = () => {\n    // If the custom rate form is open, we consider it as unsaved\n    // regardless of whether fields have content\n    const result = customChargeVisible;\n    \n    debugLog('MBAno34othg0v', 'hasUnsavedCustomRate check:', { \n      customChargeVisible, \n      title: newCustomRate.title,\n      rate: newCustomRate.rate,\n      description: newCustomRate.description,\n      result \n    });\n    \n    return result;\n  };\n\n  // Add effect to check if trying to update service while custom rate is being added\n  useEffect(() => {\n    debugLog('MBAno34othg0v', 'isUpdatingService changed:', {\n      isUpdatingService,\n      hasUnsaved: hasUnsavedCustomRate()\n    });\n    \n    if (!isUpdatingService) {\n      // Skip processing when isUpdatingService becomes false\n      return;\n    }\n    \n    // Check if there's an unsaved rate\n    const hasUnsaved = hasUnsavedCustomRate();\n    \n    // Only show warning if isUpdatingService becomes true while there's an unsaved rate\n    if (hasUnsaved) {\n      debugLog('MBAno34othg0v', 'Showing unsaved rate warning modal');\n      // Show the modal\n      setShowUnsavedRateWarning(true);\n      // Reset the isUpdatingService flag after showing the modal\n      if (setIsUpdatingService) {\n        debugLog('MBAno34othg0v', 'Setting isUpdatingService to FALSE to prevent API call');\n        setIsUpdatingService(false);\n      }\n    } else {\n      debugLog('MBAno34othg0v', 'No unsaved custom rate, allowing update to proceed');\n      // Here we would directly call the API, but we need to add that functionality to props\n      if (setIsUpdatingService) {\n        // Signal to parent that it's OK to proceed\n        debugLog('MBAno34othg0v', 'Setting isUpdatingService to TRUE to allow parent to call API');\n        setIsUpdatingService(true);\n        \n        // This will trigger the parent component to call its callServiceApi function\n        if (typeof onProceedWithUpdate === 'function') {\n          debugLog('MBAno34othg0v', 'Calling onProceedWithUpdate directly');\n          onProceedWithUpdate();\n        }\n      }\n    }\n  }, [isUpdatingService]);\n\n  // Close dropdowns when clicking outside\n  const handlePressOutside = () => {\n    if (showTimeUnitDropdown) setShowTimeUnitDropdown(false);\n    if (showThresholdDropdown) setShowThresholdDropdown(false);\n  };\n\n  // Enhanced numeric input formatter with validation\n  const formatNumericInput = (text, fieldType = 'amount') => {\n    debugLog('MBA1234', `Formatting numeric input for ${fieldType}:`, text);\n    \n    // Don't apply real-time sanitization during typing - this interferes with user experience\n    // Only block extremely dangerous content in real-time\n    const hasScriptTags = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi.test(text);\n    const hasSqlInjection = /\\b(SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|EXEC|UNION|SCRIPT|JAVASCRIPT|VBSCRIPT)\\b/gi.test(text);\n    \n    if (hasScriptTags || hasSqlInjection) {\n      debugLog('MBA1234', `Dangerous content detected in ${fieldType}:`, text);\n      return null; // Return null to indicate invalid input\n    }\n    \n    return text;\n  };\n\n  const handleBaseRateChange = (text) => {\n    const processed = formatNumericInput(text, 'base rate');\n    \n    if (processed === null) {\n      setBaseRateError('Invalid characters detected in base rate');\n      return;\n    }\n    \n    // Clear error when user starts typing normally\n    if (baseRateError) {\n      setBaseRateError('');\n    }\n    \n    setServiceData(prev => ({\n      ...prev,\n      rates: {\n        ...prev.rates,\n        base_rate: processed\n      }\n    }));\n  };\n\n  const handleTimeUnitSelect = (unit) => {\n    // If this is an overnight service, always use 'Per Night'\n    // Otherwise, map the user-friendly display value to the backend value\n    const selectedUnit = serviceData.isOvernight ? \n      'Per Night' : \n      TIME_UNIT_MAPPING[unit];\n    \n    setServiceData(prev => ({\n      ...prev,\n      rates: {\n        ...prev.rates,\n        base_rate_unit: selectedUnit\n      }\n    }));\n    setShowTimeUnitDropdown(false);\n  };\n\n  const handleAdditionalAnimalRateChange = (text) => {\n    const processed = formatNumericInput(text, 'additional animal rate');\n    \n    if (processed === null) {\n      setAdditionalRateError('Invalid characters detected in additional animal rate');\n      return;\n    }\n    \n    // Clear error when user starts typing normally\n    if (additionalRateError) {\n      setAdditionalRateError('');\n    }\n    \n    setServiceData(prev => ({\n      ...prev,\n      rates: {\n        ...prev.rates,\n        additionalAnimalRate: processed\n      }\n    }));\n  };\n\n  const handleThresholdSelect = (threshold) => {\n    setServiceData(prev => ({\n      ...prev,\n      rates: {\n        ...prev.rates,\n        additionalAnimalThreshold: threshold\n      }\n    }));\n    setShowThresholdDropdown(false);\n  };\n\n  const handleHolidayRateChange = (text) => {\n    const processed = formatNumericInput(text, 'holiday rate');\n    \n    if (processed === null) {\n      setHolidayRateError('Invalid characters detected in holiday rate');\n      return;\n    }\n    \n    // Clear error when user starts typing normally\n    if (holidayRateError) {\n      setHolidayRateError('');\n    }\n    \n    setServiceData(prev => ({\n      ...prev,\n      rates: {\n        ...prev.rates,\n        holidayRate: processed\n      }\n    }));\n  };\n\n  const toggleHolidayRateType = (isPercent) => {\n    setIsHolidayRatePercent(isPercent);\n    // Update the serviceData with the new holiday rate type\n    setServiceData(prevData => ({\n      ...prevData,\n      rates: {\n        ...prevData.rates,\n        isPercent: isPercent\n      }\n    }));\n    // Clear any existing error when switching types\n    setHolidayRateError('');\n  };\n\n  // Calculate the dollar amount for percentage holiday rate\n  const calculateHolidayRateDollarValue = () => {\n    const baseRate = parseFloat(serviceData.rates?.base_rate) || 0;\n    const holidayRatePercent = parseFloat(serviceData.rates?.holidayRate) || 0;\n    \n    if (baseRate > 0 && holidayRatePercent > 0) {\n      const dollarValue = (baseRate * holidayRatePercent / 100).toFixed(2);\n      return `$${dollarValue}`;\n    }\n    return null;\n  };\n\n  // Format holiday rate based on type (% or $)\n  const getFormattedHolidayRate = () => {\n    const value = serviceData.rates?.holidayRate || '';\n    if (!value) return '';\n    \n    return isHolidayRatePercent ? `${value}%` : `$${value}`;\n  };\n\n  const handleCustomRateChange = (field, value) => {\n    debugLog('MBA1234', `Custom rate ${field} change:`, value);\n    \n    if (field === 'rate') {\n      const processed = formatNumericInput(value, 'custom rate amount');\n      \n      if (processed === null) {\n        setCustomRateAmountError('Invalid characters detected in rate amount');\n        return;\n      }\n      \n      // Clear error when user starts typing normally\n      if (customRateAmountError) {\n        setCustomRateAmountError('');\n      }\n      \n      setNewCustomRate(prev => ({\n        ...prev,\n        [field]: processed\n      }));\n    } else if (field === 'title') {\n      // Don't apply real-time sanitization during typing\n      // Only block extremely dangerous content in real-time\n      const hasScriptTags = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi.test(value);\n      const hasSqlInjection = /\\b(SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|EXEC|UNION|SCRIPT|JAVASCRIPT|VBSCRIPT)\\b/gi.test(value);\n      \n      if (hasScriptTags || hasSqlInjection) {\n        debugLog('MBA1234', 'Dangerous content detected in custom rate title:', value);\n        setCustomRateTitleError('Invalid characters detected in title');\n        return;\n      }\n      \n      // Clear error when user starts typing normally\n      if (customRateTitleError) {\n        setCustomRateTitleError('');\n      }\n      \n      setNewCustomRate(prev => ({\n        ...prev,\n        [field]: value\n      }));\n    } else if (field === 'description') {\n      // Don't apply real-time sanitization during typing\n      // Only block extremely dangerous content in real-time\n      const hasScriptTags = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi.test(value);\n      const hasSqlInjection = /\\b(SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|EXEC|UNION|SCRIPT|JAVASCRIPT|VBSCRIPT)\\b/gi.test(value);\n      \n      if (hasScriptTags || hasSqlInjection) {\n        debugLog('MBA1234', 'Dangerous content detected in custom rate description:', value);\n        setCustomRateDescriptionError('Invalid characters detected in description');\n        return;\n      }\n      \n      // Clear error when user starts typing normally\n      if (customRateDescriptionError) {\n        setCustomRateDescriptionError('');\n      }\n      \n      setNewCustomRate(prev => ({\n        ...prev,\n        [field]: value\n      }));\n    }\n  };\n\n  const handleAddCustomRate = () => {\n    if (!customChargeVisible) {\n      debugLog('MBAno34othg0v', 'Opening custom rate form');\n      setCustomChargeVisible(true);\n      setIsEditingExistingRate(false);\n      // Clear any existing errors\n      setCustomRateTitleError('');\n      setCustomRateAmountError('');\n      setCustomRateDescriptionError('');\n      return;\n    }\n\n    // Check for validation errors\n    if (customRateTitleError || customRateAmountError || customRateDescriptionError) {\n      debugLog('MBA1234', 'Cannot save custom rate due to validation errors');\n      return;\n    }\n\n    // Check for title\n    if (!newCustomRate.title.trim()) {\n      setCustomRateTitleError('Title is required');\n      debugLog('MBAno34othg0v', 'Missing custom rate title');\n      return;\n    }\n    \n    // Check for rate value\n    if (!newCustomRate.rate) {\n      setCustomRateAmountError('Rate amount is required');\n      debugLog('MBAno34othg0v', 'Missing custom rate value');\n      return;\n    }\n\n    // Validate rate value\n    const rateValue = parseFloat(newCustomRate.rate);\n    if (isNaN(rateValue) || rateValue <= 0) {\n      setCustomRateAmountError('Rate amount must be a valid number greater than $0');\n      debugLog('MBAno34othg0v', 'Invalid rate value:', newCustomRate.rate);\n      return;\n    }\n\n    debugLog('MBAno34othg0v', 'Saving custom rate successfully:', newCustomRate);\n    \n    // Sanitize the data before saving\n    const sanitizedRate = {\n      title: sanitizeInput(newCustomRate.title, 'name', { maxLength: 50 }).trim(),\n      rate: newCustomRate.rate, // Rate is already numeric, no need to sanitize\n      description: sanitizeInput(newCustomRate.description, 'description', { maxLength: 200 }).trim()\n    };\n    \n    // Save the sanitized custom rate to the service data\n    setServiceData(prev => ({\n      ...prev,\n      additionalRates: [...(prev.additionalRates || []), sanitizedRate]\n    }));\n    \n    // Reset the form state\n    setNewCustomRate({\n      title: '',\n      rate: '',\n      description: ''\n    });\n    \n    // Clear errors\n    setCustomRateTitleError('');\n    setCustomRateAmountError('');\n    setCustomRateDescriptionError('');\n    \n    // Close the form\n    setCustomChargeVisible(false);\n    setIsEditingExistingRate(false);\n  };\n\n  const handleEditCustomRate = (index) => {\n    // Get the rate to edit\n    const rateToEdit = serviceData.additionalRates[index];\n    \n    // Set the form with existing values\n    setNewCustomRate({\n      title: rateToEdit.title,\n      rate: rateToEdit.rate,\n      description: rateToEdit.description || ''\n    });\n    \n    // Show the custom charge form and indicate we're editing\n    setCustomChargeVisible(true);\n    setIsEditingExistingRate(true);\n    \n    // Remove the old item\n    setServiceData(prev => ({\n      ...prev,\n      additionalRates: prev.additionalRates.filter((_, i) => i !== index)\n    }));\n  };\n\n  const handleDeleteCustomRate = (index) => {\n    setServiceData(prev => ({\n      ...prev,\n      additionalRates: prev.additionalRates.filter((_, i) => i !== index)\n    }));\n  };\n\n  const renderDropdown = (options, selectedValue, onSelect, visible, containerStyle) => {\n    if (!visible) return null;\n\n    return (\n      <View style={[styles.dropdownContainer, containerStyle]}>\n        <ScrollView style={styles.dropdownScroll} contentContainerStyle={styles.dropdownScrollContent}>\n          {options.map((option) => (\n            <TouchableOpacity\n              key={option}\n              style={[\n                styles.dropdownItem,\n                selectedValue === option && styles.selectedDropdownItem\n              ]}\n              onPress={() => onSelect(option)}\n            >\n              <Text style={[\n                styles.dropdownText,\n                selectedValue === option && styles.selectedDropdownText\n              ]}>\n                {option}\n              </Text>\n            </TouchableOpacity>\n          ))}\n        </ScrollView>\n      </View>\n    );\n  };\n\n  return (\n    <TouchableWithoutFeedback onPress={handlePressOutside}>\n      <ScrollView style={styles.container}>\n        <Text style={styles.title}>Set Your Rates</Text>\n\n        {/* Error Modal */}\n        <Modal\n          visible={showUnsavedRateWarning}\n          transparent={true}\n          animationType=\"fade\"\n          onRequestClose={() => setShowUnsavedRateWarning(false)}\n        >\n          <View style={styles.modalOverlay}>\n            <View style={styles.modalContent}>\n              <MaterialCommunityIcons\n                name=\"alert-circle\"\n                size={48}\n                color={theme.colors.error}\n                style={styles.modalIcon}\n              />\n              <Text style={styles.modalTitle}>Unsaved Custom Rate</Text>\n              <Text style={styles.modalText}>\n                Please save or cancel your custom rate before updating the service.\n              </Text>\n              <TouchableOpacity\n                style={styles.modalButton}\n                onPress={() => {\n                  debugLog('MBAno34othg0v', 'Modal OK button clicked');\n                  // Just close the modal, keep the form open for editing\n                  setShowUnsavedRateWarning(false);\n                }}\n              >\n                <Text style={styles.modalButtonText}>OK</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </Modal>\n\n        <View style={[styles.rateContainer, { zIndex: 3 }]}>\n          <Text style={styles.label}>Base Rate <Text style={{ color: theme.colors.placeHolderText }}>(Required)</Text></Text>\n          <View style={styles.rateInputGroup}>\n            <View style={[styles.currencyInputContainer, { flex: 1 }, baseRateError ? styles.inputError : null]}>\n              <Text style={styles.currencySymbol}>$</Text>\n              <TextInput\n                style={styles.currencyInput}\n                placeholder=\"0.00\"\n                keyboardType=\"decimal-pad\"\n                value={serviceData.rates?.base_rate || ''}\n                onChangeText={handleBaseRateChange}\n                placeholderTextColor={theme.colors.placeHolderText}\n              />\n            </View>\n            <View style={{ flex: 1, zIndex: 1 }}>\n              <TouchableOpacity\n                style={[\n                  styles.unitSelector,\n                  serviceData.isOvernight && styles.disabledUnitSelector\n                ]}\n                onPress={() => {\n                  if (!serviceData.isOvernight) {\n                    setShowThresholdDropdown(false);\n                    setShowTimeUnitDropdown(!showTimeUnitDropdown);\n                  }\n                }}\n                disabled={serviceData.isOvernight}\n              >\n                <Text style={styles.unitText}>\n                  {serviceData.isOvernight ? \n                    'Per Night' : \n                    (serviceData.rates?.base_rate_unit ? \n                      (BACKEND_TO_FRONTEND_TIME_UNIT[serviceData.rates.base_rate_unit] || serviceData.rates.base_rate_unit) : \n                      TIME_UNITS[0])}\n                </Text>\n                {!serviceData.isOvernight && (\n                  <MaterialCommunityIcons\n                    name={showTimeUnitDropdown ? 'chevron-up' : 'chevron-down'}\n                    size={24}\n                    color={theme.colors.text}\n                  />\n                )}\n              </TouchableOpacity>\n              {renderDropdown(\n                availableTimeUnits,\n                serviceData.rates?.base_rate_unit,\n                handleTimeUnitSelect,\n                showTimeUnitDropdown && !serviceData.isOvernight,\n                { width: '100%' }\n              )}\n            </View>\n          </View>\n          {baseRateError ? <Text style={styles.errorText}>{baseRateError}</Text> : null}\n        </View>\n\n        <View style={[styles.rateContainer, { zIndex: 2 }]}>\n          <Text style={styles.label}>Additional Animal Rate <Text style={{ color: theme.colors.placeHolderText }}>(Optional)</Text></Text>\n          <View style={styles.rateInputGroup}>\n            <View style={[styles.currencyInputContainer, { flex: 1 }, additionalRateError ? styles.inputError : null]}>\n              <Text style={styles.currencySymbol}>$</Text>\n              <TextInput\n                style={styles.currencyInput}\n                placeholder=\"0.00\"\n                keyboardType=\"decimal-pad\"\n                value={serviceData.rates?.additionalAnimalRate || ''}\n                onChangeText={handleAdditionalAnimalRateChange}\n                placeholderTextColor={theme.colors.placeHolderText}\n              />\n            </View>\n            <View style={{ flex: 1, zIndex: 1 }}>\n              <TouchableOpacity\n                style={styles.unitSelector}\n                onPress={() => {\n                  setShowTimeUnitDropdown(false);\n                  setShowThresholdDropdown(!showThresholdDropdown);\n                }}\n              >\n                <Text style={styles.unitText}>\n                  After {serviceData.rates?.additionalAnimalThreshold || '1'} animals\n                </Text>\n                <MaterialCommunityIcons\n                  name={showThresholdDropdown ? 'chevron-up' : 'chevron-down'}\n                  size={24}\n                  color={theme.colors.text}\n                />\n              </TouchableOpacity>\n              {renderDropdown(\n                ANIMAL_THRESHOLDS,\n                serviceData.rates?.additionalAnimalThreshold,\n                handleThresholdSelect,\n                showThresholdDropdown,\n                { width: '100%' }\n              )}\n            </View>\n          </View>\n          {additionalRateError ? <Text style={styles.errorText}>{additionalRateError}</Text> : null}\n        </View>\n\n        {/* Holiday Rate Section - Commented out for MVP\n        <View style={styles.holidayRateContainer}>\n          <View style={styles.holidayRateHeader}>\n            <Text style={styles.label}>Holiday Rate <Text style={{ color: theme.colors.placeHolderText }}>(Optional)</Text></Text>\n            <View style={styles.rateTypeToggleContainer}>\n              <TouchableOpacity\n                style={[\n                  styles.toggleButton,\n                  isHolidayRatePercent ? styles.activeToggleButton : styles.inactiveToggleButton,\n                  {\n                    borderTopLeftRadius: 8,\n                    borderBottomLeftRadius: 8,\n                    borderTopRightRadius: 0,\n                    borderBottomRightRadius: 0\n                  }\n                ]}\n                onPress={() => toggleHolidayRateType(true)}\n              >\n                <Text style={[\n                  styles.toggleButtonText,\n                  isHolidayRatePercent ? styles.activeToggleText : styles.inactiveToggleText\n                ]}>%</Text>\n              </TouchableOpacity>\n              <TouchableOpacity\n                style={[\n                  styles.toggleButton,\n                  !isHolidayRatePercent ? styles.activeToggleButton : styles.inactiveToggleButton,\n                  {\n                    borderTopLeftRadius: 0,\n                    borderBottomLeftRadius: 0,\n                    borderTopRightRadius: 8,\n                    borderBottomRightRadius: 8\n                  }\n                ]}\n                onPress={() => toggleHolidayRateType(false)}\n              >\n                <Text style={[\n                  styles.toggleButtonText,\n                  !isHolidayRatePercent ? styles.activeToggleText : styles.inactiveToggleText\n                ]}>$</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n          <View style={[\n            styles.holidayRateInputWrapper, \n            { marginBottom: isHolidayRatePercent && serviceData.rates?.base_rate && serviceData.rates?.holidayRate ? 28 : 0 }\n          ]}>\n            <View style={isHolidayRatePercent ? styles.percentageInputContainer : styles.currencyInputContainer}>\n              {!isHolidayRatePercent && <Text style={styles.currencySymbol}>$</Text>}\n              <TextInput\n                style={styles.currencyInput}\n                placeholder=\"0\"\n                keyboardType=\"decimal-pad\"\n                value={serviceData.rates?.holidayRate === '0' ? '' : serviceData.rates?.holidayRate}\n                onChangeText={handleHolidayRateChange}\n                placeholderTextColor={theme.colors.placeHolderText}\n              />\n              {isHolidayRatePercent && <Text style={styles.percentageSymbol}>%</Text>}\n            </View>\n            {isHolidayRatePercent && serviceData.rates?.base_rate && serviceData.rates?.holidayRate && (\n              <Text style={styles.calculatedHolidayRate}>\n                {calculateHolidayRateDollarValue()}\n              </Text>\n            )}\n          </View>\n        </View>\n        */}\n\n        <View style={styles.customRatesContainer}>\n          <Text style={styles.label}>Custom Charges <Text style={{ color: theme.colors.placeHolderText }}>(Optional)</Text></Text>\n          {serviceData.additionalRates?.length > 0 ? (\n            serviceData.additionalRates.map((rate, index) => (\n              <View key={index} style={styles.customRateItem}>\n                <View style={styles.customRateContent}>\n                  <View style={styles.customRateTitleContainer}>\n                    <Text style={styles.customRateTitle}>{rate.title}</Text>\n                    {rate.description ? (\n                      <Text style={styles.customRateDescription} numberOfLines={1}>\n                        {rate.description}\n                      </Text>\n                    ) : null}\n                  </View>\n                  <Text style={styles.customRateAmount}>${rate.rate}</Text>\n                </View>\n                <View style={styles.customRateActions}>\n                  <TouchableOpacity\n                    onPress={() => handleEditCustomRate(index)}\n                    style={styles.customRateAction}\n                    activeOpacity={0.7}\n                  >\n                    <MaterialCommunityIcons\n                      name=\"pencil\"\n                      size={20}\n                      color={theme.colors.mainColors.main}\n                    />\n                  </TouchableOpacity>\n                  <TouchableOpacity\n                    onPress={() => handleDeleteCustomRate(index)}\n                    style={styles.customRateAction}\n                    activeOpacity={0.7}\n                  >\n                    <MaterialCommunityIcons\n                      name=\"delete\"\n                      size={20}\n                      color=\"#F26969\"\n                    />\n                  </TouchableOpacity>\n                </View>\n              </View>\n            ))\n          ) : customChargeVisible ? null : (\n            <Text style={styles.noCustomRatesText}>\n              No custom charges added yet. Use the button below to add one.\n            </Text>\n          )}\n          \n          {/* Custom charge form or Add button */}\n          {customChargeVisible ? (\n            <View style={styles.newCustomRateContainer}>\n              <Text style={styles.customRateFormHeading}>\n                {isEditingExistingRate ? 'Edit Custom Rate' : 'New Custom Rate'}\n              </Text>\n              <TextInput\n                style={[styles.customRateInput, customRateTitleError ? styles.inputError : null]}\n                placeholder=\"Charge Title\"\n                value={newCustomRate.title}\n                onChangeText={(text) => handleCustomRateChange('title', text)}\n                placeholderTextColor={theme.colors.placeHolderText}\n                maxLength={50}\n              />\n              {customRateTitleError ? <Text style={styles.errorText}>{customRateTitleError}</Text> : null}\n              <View style={[styles.currencyInputContainer, customRateAmountError ? styles.inputError : null]}>\n                <Text style={styles.currencySymbol}>$</Text>\n                <TextInput\n                  style={styles.currencyInput}\n                  placeholder=\"0.00\"\n                  keyboardType=\"decimal-pad\"\n                  value={newCustomRate.rate}\n                  onChangeText={(text) => handleCustomRateChange('rate', text)}\n                  placeholderTextColor={theme.colors.placeHolderText}\n                />\n              </View>\n              {customRateAmountError ? <Text style={styles.errorText}>{customRateAmountError}</Text> : null}\n              <TextInput\n                style={[styles.customRateInput, styles.textArea, customRateDescriptionError ? styles.inputError : null]}\n                placeholder=\"Description\"\n                value={newCustomRate.description}\n                onChangeText={(text) => handleCustomRateChange('description', text)}\n                placeholderTextColor={theme.colors.placeHolderText}\n                multiline={true}\n                numberOfLines={3}\n                maxLength={200}\n              />\n              {customRateDescriptionError ? <Text style={styles.errorText}>{customRateDescriptionError}</Text> : null}\n              <View style={styles.customRateButtonContainer}>\n                <TouchableOpacity\n                  style={styles.cancelRateButton}\n                  onPress={() => {\n                    debugLog('MBAno34othg0v', 'Cancel button pressed for custom rate form');\n                    // Reset all form-related state\n                    setCustomChargeVisible(false);\n                    setNewCustomRate({\n                      title: '',\n                      rate: '',\n                      description: ''\n                    });\n                    setIsEditingExistingRate(false);\n                    // Ensure any warning modal is also closed\n                    setShowUnsavedRateWarning(false);\n                  }}\n                >\n                  <MaterialCommunityIcons\n                    name=\"close\"\n                    size={20}\n                    color={theme.colors.text}\n                  />\n                  <Text style={styles.cancelRateText}>Cancel</Text>\n                </TouchableOpacity>\n                <TouchableOpacity\n                  style={[\n                    styles.addRateButton, \n                    styles.saveRateButton,\n                    (!newCustomRate.title.trim() || !newCustomRate.rate || \n                      isNaN(parseFloat(newCustomRate.rate)) || parseFloat(newCustomRate.rate) <= 0) \n                      ? styles.disabledSaveButton : {}\n                  ]}\n                  onPress={handleAddCustomRate}\n                  disabled={!newCustomRate.title.trim() || !newCustomRate.rate || \n                    isNaN(parseFloat(newCustomRate.rate)) || parseFloat(newCustomRate.rate) <= 0}\n                >\n                  <MaterialCommunityIcons\n                    name=\"content-save\"\n                    size={20}\n                    color={theme.colors.surface}\n                  />\n                  <Text style={styles.saveRateText}>\n                    {isEditingExistingRate ? 'Update Custom Rate' : 'Save Custom Rate'}\n                  </Text>\n                </TouchableOpacity>\n              </View>\n            </View>\n          ) : (\n            <TouchableOpacity\n              style={styles.addRateButton}\n              onPress={handleAddCustomRate}\n            >\n              <MaterialCommunityIcons\n                name=\"plus\"\n                size={20}\n                color={theme.colors.mainColors.main}\n              />\n              <Text style={styles.addRateText}>Add Rate</Text>\n            </TouchableOpacity>\n          )}\n        </View>\n      </ScrollView>\n    </TouchableWithoutFeedback>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 16,\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 24,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  rateContainer: {\n    marginBottom: 24,\n  },\n  label: {\n    fontSize: 16,\n    color: theme.colors.text,\n    marginBottom: 8,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  rateInputGroup: {\n    flexDirection: 'row',\n    gap: 12,\n  },\n  currencyInputContainer: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 8,\n    paddingHorizontal: 12,\n    backgroundColor: theme.colors.surface,\n  },\n  currencySymbol: {\n    fontSize: 16,\n    color: theme.colors.text,\n    marginRight: 4,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  currencyInput: {\n    flex: 1,\n    fontSize: 16,\n    color: theme.colors.text,\n    padding: 12,\n    fontFamily: theme.fonts.regular.fontFamily,\n    outlineStyle: 'none',\n  },\n  unitSelector: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 8,\n    paddingHorizontal: 12,\n    paddingVertical: 12,\n    backgroundColor: theme.colors.surface,\n  },\n  unitText: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  dropdownContainer: {\n    position: 'absolute',\n    top: '100%',\n    backgroundColor: theme.colors.surface,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 8,\n    marginTop: 4,\n    zIndex: 1000,\n    elevation: 5,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    maxHeight: 200,\n  },\n  dropdownScroll: {\n    width: '100%',\n  },\n  dropdownScrollContent: {\n    flexGrow: 1,\n  },\n  dropdownItem: {\n    padding: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  selectedDropdownItem: {\n    backgroundColor: theme.colors.mainColors.mainLight,\n  },\n  dropdownText: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  selectedDropdownText: {\n    color: theme.colors.mainColors.main,\n    fontWeight: '600',\n  },\n  holidayRateContainer: {\n    marginBottom: 24,\n  },\n  holidayRateHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  rateTypeToggleContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    overflow: 'hidden',\n    borderRadius: 8,\n  },\n  toggleButton: {\n    paddingVertical: 8,\n    paddingHorizontal: 14,\n    alignItems: 'center',\n    justifyContent: 'center',\n    minWidth: 40,\n    width: 44,\n    height: 36,\n  },\n  activeToggleButton: {\n    backgroundColor: theme.colors.mainColors.main,\n    borderWidth: 1,\n    borderColor: theme.colors.mainColors.main,\n  },\n  inactiveToggleButton: {\n    backgroundColor: theme.colors.surface,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  toggleButtonText: {\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '500',\n  },\n  activeToggleText: {\n    color: theme.colors.surface,\n    fontWeight: '600',\n  },\n  inactiveToggleText: {\n    color: theme.colors.text,\n  },\n  holidayRateInputWrapper: {\n    position: 'relative',\n  },\n  percentageInputContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 8,\n    paddingHorizontal: 12,\n    backgroundColor: theme.colors.surface,\n  },\n  percentageInput: {\n    flex: 1,\n    fontSize: 16,\n    color: theme.colors.text,\n    padding: 12,\n    fontFamily: theme.fonts.regular.fontFamily,\n    outlineStyle: 'none',\n  },\n  percentageSymbol: {\n    fontSize: 16,\n    color: theme.colors.text,\n    marginRight: 8,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  calculatedHolidayRate: {\n    position: 'absolute',\n    bottom: -24,\n    right: 4,\n    fontSize: 14,\n    color: theme.colors.placeHolderText,\n    fontFamily: theme.fonts.regular.fontFamily,\n    paddingTop: 4,\n  },\n  customRatesContainer: {\n    // marginTop: 24,\n  },\n  customRateItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    padding: 12,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    marginBottom: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  customRateContent: {\n    flex: 1,\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginRight: 12,\n  },\n  customRateActions: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n  customRateTitleContainer: {\n    flex: 1,\n    marginRight: 16,\n  },\n  customRateTitle: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  customRateDescription: {\n    fontSize: 14,\n    color: theme.colors.placeHolderText,\n    marginTop: 2,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  customRateAmount: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  newCustomRateContainer: {\n    gap: 12,\n    marginBottom: 16,\n  },\n  customRateInput: {\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 8,\n    padding: 12,\n    fontSize: 16,\n    color: theme.colors.text,\n    backgroundColor: theme.colors.surface,\n    fontFamily: theme.fonts.regular.fontFamily,\n    outlineStyle: 'none',\n  },\n  textArea: {\n    height: 80,\n    textAlignVertical: 'top',\n  },\n  addRateButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    padding: 12,\n    borderWidth: 1,\n    borderColor: theme.colors.mainColors.main,\n    borderRadius: 8,\n    justifyContent: 'center',\n  },\n  addRateText: {\n    color: theme.colors.mainColors.main,\n    fontSize: 16,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  customRateButtonContainer: {\n    flexDirection: 'row',\n    gap: 12,\n    marginTop: 12,\n  },\n  cancelRateButton: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    padding: 12,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 8,\n    justifyContent: 'center',\n    backgroundColor: theme.colors.surface,\n  },\n  cancelRateText: {\n    color: theme.colors.text,\n    fontSize: 16,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  saveRateButton: {\n    flex: 2,\n    backgroundColor: theme.colors.mainColors.main,\n    borderColor: theme.colors.mainColors.main,\n  },\n  disabledSaveButton: {\n    backgroundColor: theme.colors.placeHolderText,\n    borderColor: theme.colors.placeHolderText,\n  },\n  saveRateText: {\n    color: theme.colors.surface,\n    fontSize: 16,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  customRateFormHeading: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 12,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  noCustomRatesText: {\n    fontSize: 14,\n    color: theme.colors.placeHolderText,\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginBottom: 16,\n    fontStyle: 'italic',\n  },\n  customRateAction: {\n    padding: 8,\n    borderRadius: 4,\n  },\n  modalOverlay: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n  },\n  modalContent: {\n    backgroundColor: theme.colors.surface,\n    padding: 24,\n    borderRadius: 12,\n    maxWidth: '85%',\n    minWidth: 280,\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5,\n  },\n  modalIcon: {\n    marginBottom: 16,\n  },\n  modalTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 12,\n    textAlign: 'center',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  modalText: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginBottom: 24,\n    textAlign: 'center',\n    lineHeight: 22,\n  },\n  modalButton: {\n    backgroundColor: theme.colors.mainColors.main,\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n  },\n  modalButtonText: {\n    color: theme.colors.surface,\n    fontSize: 16,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n    textAlign: 'center',\n  },\n  disabledUnitSelector: {\n    backgroundColor: theme.colors.surface,\n    opacity: 0.8,\n    borderColor: theme.colors.modernBorder,\n  },\n  inputError: {\n    borderColor: theme.colors.error,\n  },\n  errorText: {\n    color: theme.colors.error,\n    fontSize: 12,\n    marginTop: 4,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default RatesAndReviewStep; ","import React, { useState, useContext, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Modal,\n  SafeAreaView,\n  Platform,\n  ScrollView,\n  ActivityIndicator\n} from 'react-native';\nimport { theme } from '../styles/theme';\nimport { AuthContext } from '../context/AuthContext';\nimport StepProgressIndicator from './common/StepProgressIndicator';\nimport { debugLog } from '../context/AuthContext';\nimport CategorySelectionStep from './serviceCreation/CategorySelectionStep';\nimport ServiceDetailsStep from './serviceCreation/ServiceDetailsStep';\nimport RatesAndReviewStep from './serviceCreation/RatesAndReviewStep';\nimport { createService, updateService } from '../api/API';\nimport { useToast } from './ToastProvider';\n\nconst STEPS = {\n  CATEGORY_SELECTION: {\n    id: 0,\n    name: 'Categories & Types'\n  },\n  SERVICE_DETAILS: {\n    id: 1,\n    name: 'Service Details'\n  },\n  RATES_AND_REVIEW: {\n    id: 2,\n    name: 'Rates & Review'\n  }\n};\n\n// Import the hardcoded animal categories directly\nconst ANIMAL_CATEGORIES = {\n  // Farm animals\n  'Horse': 'Farm Animals',\n  'Cow': 'Farm Animals',\n  'Sheep': 'Farm Animals',\n  'Goat': 'Farm Animals',\n  'Pig': 'Farm Animals',\n  \n  // Domestic\n  'Dogs': 'Domestic',\n  'Cats': 'Domestic',\n  'Birds': 'Domestic',\n  'Rabbits': 'Domestic',\n  'Hamsters': 'Domestic',\n  \n  // Reptiles\n  'Snake': 'Reptiles',\n  'Lizard': 'Reptiles',\n  'Turtle': 'Reptiles',\n  'Gecko': 'Reptiles',\n  'Chameleon': 'Reptiles',\n  \n  // Aquatic\n  'Fish': 'Aquatic',\n  'Frog': 'Aquatic',\n  'Newt': 'Aquatic',\n  'Axolotl': 'Aquatic',\n  \n  // Invertebrates\n  'Spider': 'Invertebrates',\n  'Scorpion': 'Invertebrates',\n  'Crab': 'Invertebrates',\n  'Snail': 'Invertebrates',\n  'Millipede': 'Invertebrates'\n};\n\n// Also define GENERAL_CATEGORIES so we can look up category IDs from names\nconst GENERAL_CATEGORIES = [\n  {\n    id: 'all',\n    name: 'All',\n    icon: 'paw-outline',\n  },\n  {\n    id: 'farm_animals',\n    name: 'Farm Animals',\n    icon: 'horse',\n  },\n  {\n    id: 'domestic',\n    name: 'Domestic',\n    icon: 'paw',\n  },\n  {\n    id: 'reptiles',\n    name: 'Reptiles',\n    icon: 'snake',\n  },\n  {\n    id: 'aquatic',\n    name: 'Aquatic',\n    icon: 'fish',\n  },\n  {\n    id: 'invertebrates',\n    name: 'Invertebrates',\n    icon: 'spider',\n  }\n];\n\nconst ServiceCreationModal = ({ \n  visible, \n  onClose,\n  onSave,\n  initialService = null,\n  setHasUnsavedChanges \n}) => {\n  const { is_DEBUG } = useContext(AuthContext);\n  const [currentStep, setCurrentStep] = useState(STEPS.CATEGORY_SELECTION.id);\n  const [serviceData, setServiceData] = useState({\n    generalCategories: [],\n    animalTypes: [],\n    serviceName: '',\n    serviceDescription: '',\n    isOvernight: false,\n    rates: {\n      base_rate: '',\n      base_rate_unit: 'Per Visit',\n      additionalAnimalRate: '',\n      additionalAnimalThreshold: '1',\n      hasHolidayRate: false,\n      holidayRate: '0',\n      isPercent: true\n    },\n    additionalRates: []\n  });\n  const [error, setError] = useState(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isEditMode, setIsEditMode] = useState(false);\n  const [isAddingCustomRate, setIsAddingCustomRate] = useState(false);\n  const showToast = useToast();\n\n  // Reset state when modal is opened\n  useEffect(() => {\n    if (visible) {\n      setCurrentStep(STEPS.CATEGORY_SELECTION.id);\n      setError(null);\n      \n      if (initialService) {\n        debugLog('MBA123456', 'Initializing with service data:', initialService);\n        setIsEditMode(true);\n        \n        // Extract animal types from the object\n        let animalTypesArray = [];\n        \n        // Log the animal types we're working with\n        if (initialService.animalTypes && initialService.animalTypes.length > 0) {\n          // If animalTypes is already provided in the expected format, use it directly\n          debugLog('MBA123456', 'Using pre-formatted animalTypes array:', initialService.animalTypes);\n          animalTypesArray = initialService.animalTypes;\n        } else if (initialService.animal_types) {\n          debugLog('MBA123456', 'Using animal_types from backend:', initialService.animal_types);\n          \n          // Handle if animal_types is a dictionary mapping animal types to categories\n          if (typeof initialService.animal_types === 'object' && !Array.isArray(initialService.animal_types)) {\n            debugLog('MBA123456', 'Processing animal_types as dictionary');\n            Object.entries(initialService.animal_types).forEach(([animalName, categoryName]) => {\n              // Find the category ID for this category name\n              const category = GENERAL_CATEGORIES.find(cat => cat.name === categoryName);\n              debugLog('MBA123456', `Adding animal: ${animalName}, category: ${categoryName}, categoryId: ${category?.id || 'not found'}`);\n              \n              animalTypesArray.push({\n                name: animalName,\n                categoryName: categoryName,\n                categoryId: category ? category.id : null, \n                isCustom: false\n              });\n            });\n          }\n        } else {\n          debugLog('MBA123456', 'No animal types found in data');\n        }\n        \n        debugLog('MBA123456', 'Final converted animal types:', animalTypesArray);\n        \n        // Parse holiday rate\n        let holidayRate = '0';\n        let isPercent = true;\n        \n        if (initialService.holiday_rate) {\n          if (typeof initialService.holiday_rate === 'string') {\n            if (initialService.holiday_rate.includes('%')) {\n              holidayRate = initialService.holiday_rate.replace('%', '');\n              isPercent = true;\n            } else if (initialService.holiday_rate.includes('$')) {\n              holidayRate = initialService.holiday_rate.replace('$', '');\n              isPercent = false;\n            } else {\n              holidayRate = initialService.holiday_rate;\n              isPercent = initialService.holiday_rate_is_percent !== undefined \n                ? initialService.holiday_rate_is_percent \n                : true;\n            }\n          } else {\n            holidayRate = initialService.holiday_rate.toString();\n            isPercent = initialService.holiday_rate_is_percent !== undefined \n              ? initialService.holiday_rate_is_percent \n              : true;\n          }\n        }\n        \n        // Format additional rates\n        let additionalRates = [];\n        if (initialService.additional_rates && Array.isArray(initialService.additional_rates)) {\n          additionalRates = initialService.additional_rates.map(rate => ({\n            title: rate.title,\n            rate: rate.rate,\n            description: rate.description || ''\n          }));\n        }\n        \n        // Set the service data with the provided initial values\n        setServiceData({\n          service_id: initialService.service_id,\n          generalCategories: [], // We don't need to populate this as it's derived from animalTypes\n          animalTypes: animalTypesArray,\n          serviceName: initialService.service_name || '',\n          serviceDescription: initialService.description || '',\n          isOvernight: initialService.is_overnight || false,\n          rates: {\n            base_rate: initialService.base_rate || '',\n            base_rate_unit: initialService.unit_of_time || 'Per Visit',\n            additionalAnimalRate: initialService.additional_animal_rate || '',\n            additionalAnimalThreshold: initialService.applies_after?.toString() || '1',\n            hasHolidayRate: holidayRate !== '0',\n            holidayRate: holidayRate,\n            isPercent: isPercent\n          },\n          additionalRates: additionalRates\n        });\n      } else {\n        // Reset to default state if not in edit mode\n        setIsEditMode(false);\n        setServiceData({\n          generalCategories: [],\n          animalTypes: [],\n          serviceName: '',\n          serviceDescription: '',\n          isOvernight: false,\n          rates: {\n            base_rate: '',\n            base_rate_unit: 'Per Visit',\n            additionalAnimalRate: '',\n            additionalAnimalThreshold: '1',\n            hasHolidayRate: false,\n            holidayRate: '0',\n            isPercent: true\n          },\n          additionalRates: []\n        });\n      }\n    }\n  }, [visible, initialService]);\n\n  const canProceedToNextStep = () => {\n    switch (currentStep) {\n      case STEPS.CATEGORY_SELECTION.id:\n        return serviceData.animalTypes?.length > 0;\n      \n      case STEPS.SERVICE_DETAILS.id:\n        return (\n          serviceData.serviceName?.trim() &&\n          serviceData.serviceDescription?.trim()\n        );\n      \n      case STEPS.RATES_AND_REVIEW.id:\n        const hasValidBaseRate = serviceData.rates?.base_rate && \n          parseFloat(serviceData.rates.base_rate) > 0;\n        const hasValidAdditionalRate = !serviceData.rates?.additionalAnimalRate || \n          parseFloat(serviceData.rates.additionalAnimalRate) >= 0;\n        \n        return hasValidBaseRate && hasValidAdditionalRate;\n      \n      default:\n        return false;\n    }\n  };\n\n  // Direct API call function that doesn't depend on state\n  const callServiceApi = async () => {\n    debugLog('MBAno34othg0v', 'Directly calling API without state dependencies');\n    \n    debugLog('MBA54321', 'Original serviceData:', serviceData);\n    setIsSubmitting(true);\n    \n    try {\n      // Format animal types as a dictionary mapping animal types to their categories\n      const animalTypesDict = {};\n      \n      serviceData.animalTypes.forEach(animalType => {\n        const animalName = typeof animalType === 'string' ? animalType : animalType.name;\n        \n        // Use the hardcoded ANIMAL_CATEGORIES mapping\n        if (ANIMAL_CATEGORIES[animalName]) {\n          animalTypesDict[animalName] = ANIMAL_CATEGORIES[animalName];\n        } else {\n          // For custom animals, use the category name if it exists\n          if (typeof animalType === 'object' && animalType.categoryName) {\n            animalTypesDict[animalName] = animalType.categoryName;\n          } else {\n            animalTypesDict[animalName] = 'Other';\n          }\n        }\n      });\n      \n      // Log animal types dictionary for debugging\n      debugLog('MBA54321', 'Animal types dictionary created:', animalTypesDict);\n      \n      // Check what type of data we have for generalCategories (for backward compatibility)\n      const categories = serviceData.generalCategories.map(cat => \n        typeof cat === 'string' ? cat : (cat.name || 'Uncategorized')\n      );\n      \n      // Format holiday rate with appropriate symbol based on type\n      const holidayRateValue = serviceData.rates.holidayRate || '0';\n      const holidayRateString = holidayRateValue && holidayRateValue !== '0' ? \n        (serviceData.rates.isPercent ? `${holidayRateValue}%` : `$${holidayRateValue}`) : \n        '0';\n      \n      // Format the data according to the backend's expected format\n      const formattedData = {\n        service_name: serviceData.serviceName,\n        description: serviceData.serviceDescription,\n        animal_types: animalTypesDict,\n        base_rate: serviceData.rates.base_rate,\n        additional_animal_rate: serviceData.rates.additionalAnimalRate || '0',\n        holiday_rate: holidayRateString,\n        applies_after: parseInt(serviceData.rates.additionalAnimalThreshold) || 1,\n        unit_of_time: serviceData.rates.base_rate_unit,\n        is_overnight: serviceData.isOvernight || false,\n        additional_rates: serviceData.additionalRates.map(rate => ({\n          title: rate.title,\n          description: rate.description || '',\n          rate: rate.rate\n        }))\n      };\n      \n      // If in edit mode, include the service_id in the formatted data\n      if (isEditMode && serviceData.service_id) {\n        formattedData.service_id = serviceData.service_id;\n      }\n      \n      debugLog('MBA54321', 'Formatted data for backend:', formattedData);\n      \n      let response;\n      \n      // Call the appropriate API based on edit mode\n      if (isEditMode && serviceData.service_id) {\n        response = await updateService(formattedData);\n        debugLog('MBA54321', 'Service updated successfully, response:', response);\n      } else {\n        response = await createService(formattedData);\n        debugLog('MBA54321', 'Service created successfully, response:', response);\n      }\n      \n      // Show success toast\n      showToast({\n        message: isEditMode ? 'Service updated successfully!' : 'Service created successfully!',\n        type: 'success',\n        duration: 3000\n      });\n      \n      // Format the data according to what ServiceManager expects\n      const serviceManagerData = {\n        // Use the service_id from the response\n        service_id: response.service_id,\n        // Use the formatted service_name from the response if available\n        serviceName: response.service_name || serviceData.serviceName,\n        serviceDescription: serviceData.serviceDescription,\n        // Use the formatted unit_of_time from the response if available\n        lengthOfService: response.unit_of_time || serviceData.rates.base_rate_unit,\n        isOvernight: serviceData.isOvernight || false,\n        is_active: response.is_active !== undefined ? response.is_active : true,\n        rates: {\n          base_rate: serviceData.rates.base_rate,\n          additionalAnimalRate: serviceData.rates.additionalAnimalRate || '0',\n          holidayRate: holidayRateString\n        },\n        generalCategories: serviceData.generalCategories.map(cat => {\n          if (typeof cat === 'string') {\n            return {\n              id: cat.toLowerCase().replace(/\\s+/g, '_'),\n              name: cat,\n              isCustom: false\n            };\n          }\n          return {\n            id: cat.id || cat.name.toLowerCase().replace(/\\s+/g, '_'),\n            name: cat.name,\n            isCustom: cat.isCustom || false\n          };\n        }),\n        animalTypes: serviceData.animalTypes.map(type => {\n          if (typeof type === 'string') {\n            return {\n              name: type,\n              categoryId: null,\n              isCustom: false\n            };\n          }\n          \n          // Use the categoryName if it exists, otherwise we need to include it\n          return {\n            name: type.name,\n            categoryId: type.categoryId,\n            categoryName: type.categoryName || 'Other', // Ensure categoryName is included\n            isCustom: type.isCustom || false\n          };\n        }),\n        additionalRates: serviceData.additionalRates.map(rate => ({\n          label: rate.title,\n          value: rate.rate,\n          description: rate.description || ''\n        }))\n      };\n      \n      // If the response has additional_rates, use those instead\n      if (response.additional_rates && Array.isArray(response.additional_rates)) {\n        serviceManagerData.additionalRates = response.additional_rates.map(rate => ({\n          label: rate.title,\n          value: rate.rate,\n          description: rate.description || ''\n        }));\n      }\n      \n      debugLog('MBA54321', 'Formatted data for ServiceManager:', serviceManagerData);\n      \n      // Call the onSave prop with properly formatted data\n      if (onSave) {\n        onSave(serviceManagerData);\n      }\n      \n      // Reset form and close modal\n      setServiceData({\n        generalCategories: [],\n        animalTypes: [],\n        serviceName: '',\n        serviceDescription: '',\n        isOvernight: false,\n        rates: {\n          base_rate: '',\n          base_rate_unit: 'Per Visit',\n          additionalAnimalRate: '',\n          additionalAnimalThreshold: '1',\n          hasHolidayRate: false,\n          holidayRate: '0',\n          isPercent: true\n        },\n        additionalRates: []\n      });\n      \n      setCurrentStep(STEPS.CATEGORY_SELECTION.id);\n      setHasUnsavedChanges(true);\n      onClose();\n    } catch (error) {\n      debugLog('MBA54321', 'Error saving service:', error);\n      debugLog('MBA54321', 'Error response:', error.response?.data);\n      \n      // Show error toast\n      showToast({\n        message: `Failed to ${isEditMode ? 'update' : 'create'} service: ${error.response?.data?.error || error.message}`,\n        type: 'error',\n        duration: 4000\n      });\n      \n      setError(`Failed to ${isEditMode ? 'update' : 'create'} service. Please try again.`);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleNext = () => {\n    debugLog('MBAno34othg0v', 'handleNext called, currentStep:', currentStep);\n    \n    if (!canProceedToNextStep()) {\n      setError('Please complete all required fields before proceeding');\n      return;\n    }\n\n    setError(null);\n    if (currentStep < STEPS.RATES_AND_REVIEW.id) {\n      setCurrentStep(prev => prev + 1);\n    } else {\n      // We're on the final step (Rates & Review)\n      debugLog('MBAno34othg0v', 'Final step, checking for unsaved custom rates');\n      \n      // Signal to RatesAndReviewStep that we're attempting to update\n      setIsAddingCustomRate(true);\n      \n      // Don't even call handleSaveService\n      // We'll call the API directly from the RatesAndReviewStep when appropriate\n    }\n  };\n\n  const handleSaveService = async () => {\n    debugLog('MBAno34othg0v', 'DEPRECATED: handleSaveService called, this should not happen');\n  };\n\n  const handleBack = () => {\n    if (currentStep > STEPS.CATEGORY_SELECTION.id) {\n      setCurrentStep(prev => prev - 1);\n    } else {\n      onClose();\n    }\n  };\n\n  const renderCurrentStep = () => {\n    debugLog('MBA54321 Rendering step:', currentStep, 'with serviceData:', serviceData);\n    \n    switch (currentStep) {\n      case STEPS.CATEGORY_SELECTION.id:\n        return (\n          <CategorySelectionStep\n            serviceData={serviceData}\n            setServiceData={setServiceData}\n          />\n        );\n      case STEPS.SERVICE_DETAILS.id:\n        return (\n          <ServiceDetailsStep\n            serviceData={serviceData}\n            setServiceData={setServiceData}\n          />\n        );\n      case STEPS.RATES_AND_REVIEW.id:\n        return (\n          <RatesAndReviewStep\n            serviceData={serviceData}\n            setServiceData={setServiceData}\n            isUpdatingService={isAddingCustomRate}\n            setIsUpdatingService={setIsAddingCustomRate}\n            onProceedWithUpdate={callServiceApi}\n          />\n        );\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <Modal\n      visible={visible}\n      animationType=\"fade\"\n      onRequestClose={handleBack}\n      transparent={true}\n    >\n      <View style={styles.modalOverlay}>\n        <SafeAreaView style={styles.modalContent}>\n          <View style={styles.stepIndicatorContainer}>\n            <StepProgressIndicator\n              steps={Object.values(STEPS).map(step => step.name)}\n              currentStep={currentStep}\n            />\n          </View>\n          <ScrollView style={styles.scrollContent} contentContainerStyle={styles.scrollContentContainer}>\n            <View style={styles.content}>\n              {renderCurrentStep()}\n            </View>\n            {error && (\n              <Text style={styles.errorText}>{error}</Text>\n            )}\n          </ScrollView>\n          <View style={styles.footer}>\n            <TouchableOpacity\n              style={styles.cancelButton}\n              onPress={handleBack}\n              disabled={isSubmitting}\n            >\n              <Text style={styles.cancelButtonText}>\n                {currentStep > STEPS.CATEGORY_SELECTION.id ? 'Back' : 'Cancel'}\n              </Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n              style={[\n                styles.nextButton,\n                (!canProceedToNextStep() || isSubmitting) && styles.disabledButton\n              ]}\n              onPress={handleNext}\n              disabled={!canProceedToNextStep() || isSubmitting}\n            >\n              {isSubmitting && currentStep === STEPS.RATES_AND_REVIEW.id ? (\n                <ActivityIndicator color={theme.colors.surface} size=\"small\" />\n              ) : (\n                <Text style={[\n                  styles.nextButtonText,\n                  !canProceedToNextStep() && styles.disabledButtonText\n                ]}>\n                  {currentStep === STEPS.RATES_AND_REVIEW.id ? \n                    (isEditMode ? 'Update Service' : 'Create Service') : \n                    'Next'}\n                </Text>\n              )}\n            </TouchableOpacity>\n          </View>\n        </SafeAreaView>\n      </View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%',\n  },\n  modalContent: {\n    width: '95%',\n    maxWidth: Platform.OS === 'web' ? 550 : '100%',\n    maxHeight: '90%',\n    backgroundColor: theme.colors.background,\n    borderRadius: 12,\n    overflow: 'hidden',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  stepIndicatorContainer: {\n    width: '100%',\n    paddingVertical: 12,\n    backgroundColor: theme.colors.background,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.modernBorder,\n  },\n  scrollContent: {\n    flex: 1,\n  },\n  scrollContentContainer: {\n    flexGrow: 1,\n  },\n  content: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n  },\n  footer: {\n    flexDirection: 'row',\n    padding: 16,\n    justifyContent: 'space-between',\n    gap: 12,\n    backgroundColor: theme.colors.background,\n    borderTopWidth: 1,\n    borderTopColor: theme.colors.modernBorder,\n  },\n  cancelButton: {\n    flex: 1,\n    backgroundColor: theme.colors.surface,\n    paddingVertical: 16,\n    borderRadius: 8,\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  cancelButtonText: {\n    color: theme.colors.text,\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  nextButton: {\n    flex: 1,\n    backgroundColor: theme.colors.mainColors.main,\n    paddingVertical: 16,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  disabledButton: {\n    backgroundColor: theme.colors.placeHolderText,\n  },\n  nextButtonText: {\n    color: theme.colors.surface,\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n  },\n  disabledButtonText: {\n    color: theme.colors.surface,\n  },\n  errorText: {\n    color: theme.colors.error,\n    textAlign: 'center',\n    marginBottom: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default ServiceCreationModal; ","import React, { useContext, useState, useEffect } from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet, Switch } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { AuthContext } from '../context/AuthContext';\nimport { debugLog } from '../context/AuthContext';\n\nconst ProfessionalServiceCard = ({ \n  item, \n  index, \n  onEdit, \n  onDelete \n}) => {\n  const { screenWidth } = useContext(AuthContext);\n  const [isActive, setIsActive] = useState(item.is_active !== false); // Default to true if not specified\n  \n  // Log the item data when it changes\n  useEffect(() => {\n    debugLog('MBA3377', 'ProfessionalServiceCard Item Data:', item);\n  }, [item]);\n\n  const handleToggleActive = () => {\n    setIsActive(!isActive);\n    // Here you would normally update this to the backend\n  };\n\n  // Determine background color for pricing section based on service type\n  const getPricingBackgroundColor = () => {\n    // This will cycle through different colors based on the index\n    const colors = [\n      // theme.colors.proDashboard.main, // Light green\n      // theme.colors.proDashboard.secondary, // Light blue\n      // theme.colors.proDashboard.tertiary, // Light orange\n    ];\n    return colors[index % colors.length];\n  };\n\n  // Format the display of unit of time in a user-friendly way\n  const formatUnitOfTime = (unitOfTime) => {\n    if (!unitOfTime) return 'visit';\n    \n    // If we receive a nicely formatted unit of time from the backend, use it\n    return unitOfTime;\n  };\n\n  return (\n    <View style={styles.serviceCard}>\n      <View style={styles.cardHeader}>\n        <Text style={styles.serviceName} numberOfLines={2} ellipsizeMode=\"tail\">{item.serviceName}</Text>\n        {/* TODO: Add back in after MVP and make it the primary toggle instead of active. \n        <View style={styles.activeToggleContainer}>\n          <Text style={isActive ? styles.activeText : styles.inactiveText}>\n            {isActive ? 'Active' : 'Inactive'}\n          </Text>\n          <Switch\n            value={isActive}\n            onValueChange={handleToggleActive}\n            trackColor={{\n              false: theme.colors.quaternary, \n              true: theme.colors.primary\n            }}\n            thumbColor={theme.colors.surfaceContrast}\n            style={styles.switch}\n          />\n        </View> */}\n      </View>\n\n      <View style={[styles.ratesContainer, { backgroundColor: getPricingBackgroundColor() }]}>\n        <View style={styles.rateRow}>\n          <Text style={styles.rateLabel}>Base Rate</Text>\n          <Text style={styles.rateValue}>${item.rates.base_rate || 'N/A'}/{formatUnitOfTime(item.lengthOfService)}</Text>\n        </View>\n        \n        {item.rates.additionalAnimalRate && (\n          <View style={styles.rateRow}>\n            <Text style={styles.rateLabel}>Additional Animal</Text>\n            <Text style={styles.rateValue}>${item.rates.additionalAnimalRate}</Text>\n          </View>\n        )}\n        {item.rates.holidayRate && (\n          <View style={styles.rateRow}>\n            <Text style={styles.rateLabel}>Holiday Rate</Text>\n            <Text style={styles.rateValue}>{item.rates.holidayRate}</Text>\n          </View>\n        )}\n        {item.additionalRates && item.additionalRates.map((rate, idx) => (\n          <View key={idx} style={styles.rateRow}>\n            <Text style={styles.rateLabel}>{rate.label}</Text>\n            <Text style={styles.rateValue}>${rate.value}</Text>\n          </View>\n        ))}\n      </View>\n      \n      <View style={styles.buttonContainer}>\n        <TouchableOpacity onPress={() => onDelete(index)} style={styles.deleteButton}>\n          <MaterialCommunityIcons name=\"trash-can\" size={20} color={'#F26969'} />\n          <Text style={styles.deleteButtonText}>Delete</Text>\n        </TouchableOpacity>\n        <TouchableOpacity onPress={() => onEdit(index)} style={styles.editButton}>\n          <MaterialCommunityIcons name=\"pencil\" size={20} color={theme.colors.surfaceContrast} />\n          <Text style={styles.buttonText}>Edit</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  serviceCard: {\n    backgroundColor: theme.colors.surfaceContrast,\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 16,\n    shadowColor: \"#000\",\n    display: 'flex',\n    justifyContent: 'center',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n    elevation: 3,\n  },\n  cardHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: 16,\n  },\n  serviceName: {\n    fontSize: theme.fontSizes.large,\n    fontWeight: '600',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n    flex: 1,\n    flexWrap: 'wrap',\n    marginRight: 8,\n  },\n  activeToggleContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n  },\n  activeText: {\n    fontSize: theme.fontSizes.smallMedium,\n    color: theme.colors.primary,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n  },\n  inactiveText: {\n    fontSize: theme.fontSizes.smallMedium,\n    color: theme.colors.textSecondary,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  switch: {\n    transform: [{ scaleX: 0.8 }, { scaleY: 0.8 }],\n  },\n  ratesContainer: {\n    gap: 12,\n    padding: 16,\n    borderRadius: 8,\n    marginBottom: 16,\n  },\n  rateRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingVertical: 4,\n  },\n  rateLabel: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '500',\n  },\n  rateValue: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    gap: 8,\n  },\n  editButton: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: theme.colors.primary,\n    paddingVertical: 10,\n    borderRadius: 8,\n    gap: 8,\n  },\n  deleteButton: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderColor: '#F26969',\n    borderWidth: 1,\n    paddingVertical: 10,\n    borderRadius: 8,\n    gap: 8,\n  },\n  buttonText: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.surfaceContrast,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  deleteButtonText: {\n    fontSize: theme.fontSizes.medium,\n    fontWeight: '600',\n    color: '#F26969',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default ProfessionalServiceCard;","import { Platform } from 'react-native';\n\n/**\n * Detects if the device supports hover interactions properly\n * Returns false for touch devices (mobile, tablets) even when on web browsers\n */\nexport const supportsHover = () => {\n  // Return false for React Native app\n  if (Platform.OS !== 'web') {\n    return false;\n  }\n\n  // For web, check if device supports hover\n  if (typeof window !== 'undefined') {\n    // Check for touch capability\n    const hasTouchScreen = 'ontouchstart' in window || \n                          navigator.maxTouchPoints > 0 || \n                          navigator.msMaxTouchPoints > 0;\n    \n    // Use CSS media query to check hover capability\n    const supportsHoverQuery = window.matchMedia('(hover: hover)').matches;\n    \n    // Return true only if device supports hover AND is not primarily a touch device\n    return supportsHoverQuery && !hasTouchScreen;\n  }\n\n  return false;\n};\n\n/**\n * Hook to get hover support status\n */\nexport const useHoverSupport = () => {\n  return supportsHover();\n}; ","import React, { useState, useRef, useContext, useEffect } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, FlatList, Platform } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport ServiceCreationModal from './ServiceCreationModal';\nimport ProfessionalServiceCard from './ProfessionalServiceCard';\nimport ConfirmationModal from './ConfirmationModal';\nimport { Portal } from 'react-native-paper';\nimport { AuthContext, debugLog } from '../context/AuthContext';\nimport { deleteService } from '../api/API';\nimport { useToast } from './ToastProvider';\nimport { supportsHover } from '../utils/deviceUtils';\n\n// Define GENERAL_CATEGORIES for mapping category names to IDs\nconst GENERAL_CATEGORIES = [\n  {\n    id: 'all',\n    name: 'All',\n    icon: 'paw-outline',\n  },\n  {\n    id: 'farm_animals',\n    name: 'Farm Animals',\n    icon: 'horse',\n  },\n  {\n    id: 'domestic',\n    name: 'Domestic',\n    icon: 'paw',\n  },\n  {\n    id: 'reptiles',\n    name: 'Reptiles',\n    icon: 'snake',\n  },\n  {\n    id: 'aquatic',\n    name: 'Aquatic',\n    icon: 'fish',\n  },\n  {\n    id: 'invertebrates',\n    name: 'Invertebrates',\n    icon: 'spider',\n  }\n];\n\nconst ServiceManager = ({ services, setServices, setHasUnsavedChanges, isProfessionalTab = false, isMobile = false }) => {\n  const [showModal, setShowModal] = useState(false);\n  const [editingService, setEditingService] = useState(null);\n  const [collapsedServices, setCollapsedServices] = useState([]);\n  const [allCollapsed, setAllCollapsed] = useState(false);\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [serviceToDelete, setServiceToDelete] = useState(null);\n  const [hoveredButton, setHoveredButton] = useState(null);\n  const [tooltipPosition, setTooltipPosition] = useState(null);\n  const { screenWidth, is_DEBUG } = useContext(AuthContext);\n  const [collapseTooltipPosition, setCollapseTooltipPosition] = useState(null);\n  const buttonRef = useRef(null);\n  const collapseButtonRef = useRef(null);\n  const showToast = useToast();\n\n  // Check if device supports hover\n  const deviceSupportsHover = supportsHover();\n\n  // Reset local state when services change (e.g., when user changes)\n  useEffect(() => {\n    setCollapsedServices([]);\n    setAllCollapsed(false);\n    setEditingService(null);\n    setShowModal(false);\n    setShowDeleteModal(false);\n    setServiceToDelete(null);\n  }, [services]);\n\n  const toggleCollapseAll = () => {\n    if (allCollapsed) {\n      setCollapsedServices([]);\n    } else {\n      setCollapsedServices(services.map((_, index) => index));\n    }\n    setAllCollapsed(!allCollapsed);\n  };\n\n  const handleEditService = (index) => {\n    const serviceToEdit = services[index];\n    debugLog('MBA87654', 'Original service for editing:', serviceToEdit);\n    \n    // Convert animal_types from object format to array format if needed\n    let formattedAnimalTypes = [];\n    \n    if (serviceToEdit.animal_types && typeof serviceToEdit.animal_types === 'object' && !Array.isArray(serviceToEdit.animal_types)) {\n      // Convert from backend format {animalName: categoryName} to array of objects\n      formattedAnimalTypes = Object.entries(serviceToEdit.animal_types).map(([animalName, categoryName]) => {\n        // Find category ID from category name\n        const category = GENERAL_CATEGORIES.find(cat => cat.name === categoryName);\n        const categoryId = category ? category.id : null;\n        \n        return {\n          name: animalName,\n          categoryName: categoryName,\n          categoryId: categoryId,\n          isCustom: false\n        };\n      });\n      \n      debugLog('MBA87654', 'Converted animal_types to array format:', formattedAnimalTypes);\n    } else if (serviceToEdit.animalTypes) {\n      // If we already have animalTypes in the expected format, use it\n      formattedAnimalTypes = serviceToEdit.animalTypes;\n      debugLog('MBA87654', 'Using existing animalTypes array:', formattedAnimalTypes);\n    }\n    \n    // Transform to the format expected by ServiceCreationModal\n    const formattedService = {\n      service_id: serviceToEdit.service_id,\n      service_name: serviceToEdit.service_name || serviceToEdit.serviceName,\n      description: serviceToEdit.description || serviceToEdit.serviceDescription,\n      animal_types: serviceToEdit.animal_types,  // Keep the original format for API calls\n      animalTypes: formattedAnimalTypes,        // Add the formatted version for the UI\n      base_rate: serviceToEdit.base_rate || (serviceToEdit.rates ? serviceToEdit.rates.base_rate : ''),\n      additional_animal_rate: serviceToEdit.additional_animal_rate || (serviceToEdit.rates ? serviceToEdit.rates.additionalAnimalRate : '0'),\n      holiday_rate: serviceToEdit.holiday_rate || (serviceToEdit.rates ? serviceToEdit.rates.holidayRate : '0'),\n      applies_after: serviceToEdit.applies_after || 1,\n      unit_of_time: serviceToEdit.unit_of_time || serviceToEdit.lengthOfService || 'Per Visit',\n      is_overnight: serviceToEdit.is_overnight || serviceToEdit.isOvernight || false,\n      is_active: serviceToEdit.is_active !== undefined ? serviceToEdit.is_active : true,\n      holiday_rate_is_percent: serviceToEdit.holiday_rate_is_percent,\n      additional_rates: serviceToEdit.additional_rates || \n        (serviceToEdit.additionalRates ? serviceToEdit.additionalRates.map(rate => ({\n          title: rate.label || rate.title,\n          rate: rate.value || rate.rate,\n          description: rate.description || ''\n        })) : [])\n    };\n    \n    debugLog('MBA87654', 'Formatted service for editing modal:', formattedService);\n    setEditingService(formattedService);\n    setShowModal(true);\n  };\n\n  const handleDeleteService = (index) => {\n    setServiceToDelete(index);\n    setShowDeleteModal(true);\n  };\n\n  const handleSaveService = (updatedService) => {\n    // Add debugging log for service data received\n    debugLog('MBA8765', 'Service data received from modal:', updatedService);\n    \n    // Check if we're updating an existing service\n    const isEditingExisting = editingService && updatedService.service_id;\n    \n    if (isEditingExisting) {\n      debugLog('MBA8765', 'Updating existing service with ID:', updatedService.service_id);\n      \n      // Find the index of this service in our list by service_id\n      const serviceIndex = services.findIndex(s => s.service_id === updatedService.service_id);\n      \n      if (serviceIndex !== -1) {\n        // Update the service in the array\n        setServices(prev => {\n          const newServices = [...prev];\n          newServices[serviceIndex] = updatedService;\n          return newServices;\n        });\n        \n        debugLog('MBA8765', 'Service updated at index:', serviceIndex);\n      } else {\n        // If not found by ID, just add it\n        debugLog('MBA8765', 'Service ID not found in existing list, adding as new');\n        setServices(prev => [...prev, updatedService]);\n      }\n      \n      setHasUnsavedChanges(true);\n      setEditingService(null);\n      return;\n    }\n    \n    // For new services\n    if (updatedService.service_id) {\n      debugLog('MBA8765', 'New service created on backend with ID:', updatedService.service_id);\n      \n      // Add the new service to the list\n      setServices(prev => [...prev, updatedService]);\n      setHasUnsavedChanges(true);\n      setEditingService(null);\n      return;\n    }\n    \n    // Legacy support for old-format services (should not reach here with new code)\n    debugLog('MBA8765', 'Warning: Falling back to legacy service format handling');\n    \n    // Create animal_types dictionary from animalTypes array\n    const animalTypesDict = {};\n    if (updatedService.animalTypes && Array.isArray(updatedService.animalTypes)) {\n      updatedService.animalTypes.forEach(animal => {\n        if (animal && animal.name) {\n          // Use the categoryName directly from the animal object if available\n          if (animal.categoryName) {\n            animalTypesDict[animal.name] = animal.categoryName;\n          } \n          // Fallback if no categoryName is available\n          else {\n            animalTypesDict[animal.name] = animal.category || 'Other';\n          }\n        }\n      });\n    }\n\n    // Transform the service data to match the backend structure\n    const transformedService = {\n      service_name: updatedService.serviceName,\n      description: updatedService.serviceDescription,\n      unit_of_time: updatedService.lengthOfService,\n      is_overnight: updatedService.isOvernight || false,\n      base_rate: updatedService.rates.base_rate,\n      additional_animal_rate: updatedService.rates.additionalAnimalRate,\n      holiday_rate: updatedService.rates.holidayRate,\n      animal_types: animalTypesDict,\n      additional_rates: updatedService.additionalRates.map(rate => ({\n        title: rate.label,\n        rate: rate.value,\n        description: rate.description\n      }))\n    };\n\n    // Legacy code for handling legacy editing\n    if (editingService) {\n      const existingIndex = services.findIndex(s => \n        s.service_id === editingService.service_id\n      );\n      \n      if (existingIndex !== -1) {\n        setServices(prev => {\n          const newServices = [...prev];\n          newServices[existingIndex] = transformedService;\n          return newServices;\n        });\n      } else {\n        setServices(prev => [...prev, transformedService]);\n      }\n    } else {\n      setServices(prev => [...prev, transformedService]);\n    }\n    \n    setHasUnsavedChanges(true);\n    setEditingService(null);\n  };\n\n  const toggleCollapse = (index) => {\n    setCollapsedServices((prev) =>\n      prev.includes(index)\n        ? prev.filter((i) => i !== index)\n        : [...prev, index]\n    );\n  };\n\n  const confirmDelete = async () => {\n    try {\n      // Get the service ID from the selected service\n      const serviceToRemove = services[serviceToDelete];\n      if (!serviceToRemove || !serviceToRemove.service_id) {\n        showToast({\n          message: 'Unable to identify service for deletion',\n          type: 'error',\n          duration: 3000\n        });\n        setShowDeleteModal(false);\n        return;\n      }\n\n      // Call the API to delete the service\n      await deleteService(serviceToRemove.service_id);\n\n      // Remove from UI if successful\n      setServices(prevServices => \n        prevServices.filter((_, i) => i !== serviceToDelete)\n      );\n      \n      setHasUnsavedChanges(true);\n      setShowDeleteModal(false);\n      \n      showToast({\n        message: 'Service deleted successfully',\n        type: 'success',\n        duration: 3000\n      });\n    } catch (error) {\n      // Handle the error case\n      const errorMessage = error.response?.data?.error || 'Failed to delete service';\n      \n      showToast({\n        message: errorMessage,\n        type: 'error',\n        duration: 3000\n      });\n      \n      setShowDeleteModal(false);\n    }\n  };\n\n  const showTooltip = (ref, tooltipText, setPosition) => {\n    if (ref && ref.current) {\n      try {\n        setTimeout(() => {\n          // Get the button's DOM element\n          const element = ref.current;\n          // Get the button's bounding rectangle relative to the viewport\n          if (element.getBoundingOwnerRect) {\n            const rect = element.getBoundingOwnerRect();\n            \n            setPosition({\n              x: rect.left + (rect.width / 2),\n              y: rect.top, // Position tooltip at the top of the button\n              text: tooltipText\n            });\n            \n            setHoveredButton(tooltipText);\n          } else {\n            console.error('Error: getBoundingOwnerRect method not found on element');\n          }\n        }, 0);\n      } catch (error) {\n        console.error('Error showing tooltip:', error);\n      }\n    }\n  };\n\n  const renderService = ({ item, index }) => {\n    if (!item || typeof item !== 'object') {\n      console.warn('Invalid item detected:', item);\n      return null;\n    }\n\n    debugLog('MBA8765', 'Rendering service item:', item);\n\n    // Check if this is a service that already has a service_id (created on backend)\n    if (item.service_id) {\n      debugLog('MBA8765', 'This is a backend-created service with ID:', item.service_id);\n      \n      // If the item structure already matches what ProfessionalServiceCard expects, use it directly\n      if (item.serviceName && item.rates) {\n        return (\n          <ProfessionalServiceCard\n            key={`service-${index}`}\n            item={item}\n            index={index}\n            onEdit={() => handleEditService(index)}\n            onDelete={() => handleDeleteService(index)}\n            isCollapsed={collapsedServices.includes(index)}\n            onToggleCollapse={() => toggleCollapse(index)}\n            isProfessionalTab={isProfessionalTab}\n          />\n        );\n      }\n    }\n\n    // Convert animal_types from dictionary to array format\n    let animalTypesArray = [];\n    if (item.animal_types && typeof item.animal_types === 'object' && !Array.isArray(item.animal_types)) {\n      // Convert dictionary format to array format\n      animalTypesArray = Object.entries(item.animal_types).map(([name, category]) => ({\n        name: name,\n        categoryId: undefined, // We don't have exact category IDs, just names\n        category: category,    // Store the category name\n        isCustom: false        // Default to false as we don't know\n      }));\n    } else if (Array.isArray(item.animal_types)) {\n      // If it's already an array, use it directly\n      animalTypesArray = item.animal_types;\n    }\n    \n    // Transform the service data to match the frontend structure\n    const serviceData = {\n      service_id: item.service_id,\n      serviceName: item.service_name,\n      description: item.description,\n      lengthOfService: item.unit_of_time,\n      is_active: item.is_active,\n      generalCategories: item.categories?.map(cat => ({\n        id: cat.id,\n        name: cat.name,\n        isCustom: cat.is_custom\n      })) || [],\n      animalTypes: animalTypesArray,\n      rates: {\n        base_rate: item.base_rate,\n        additionalAnimalRate: item.additional_animal_rate,\n        holidayRate: item.holiday_rate\n      },\n      additionalRates: item.additional_rates?.map(rate => ({\n        label: rate.title,\n        value: rate.rate,\n        description: rate.description\n      })) || []\n    };\n\n    return (\n      <ProfessionalServiceCard\n        key={`service-${index}`}\n        item={serviceData}\n        index={index}\n        onEdit={() => handleEditService(index)}\n        onDelete={() => handleDeleteService(index)}\n        isCollapsed={collapsedServices.includes(index)}\n        onToggleCollapse={() => toggleCollapse(index)}\n        isProfessionalTab={isProfessionalTab}\n      />\n    );\n  };\n\n  // {console.log('Services:', services)}\n\n  return (\n    <View style={styles.container}>\n      <View style={[\n        styles.serviceListContainer,\n        {\n          maxWidth: 1200,\n          marginHorizontal: 'auto',\n          width: '100%',\n          paddingHorizontal: isMobile ? 20 : 24,\n          paddingTop: isMobile ? 0 : 44,\n        }\n      ]}>\n        <View style={styles.headerContainer}>\n          <Text style={styles.sectionTitle}>Service Manager</Text>\n          <View style={styles.headerActions}>\n            {/* <TouchableOpacity\n              ref={collapseButtonRef}\n              onPress={toggleCollapseAll} \n              style={styles.collapseButton}\n              onMouseEnter={() => {\n                try {\n                  if (deviceSupportsHover) {\n                    showTooltip(\n                      collapseButtonRef, \n                      allCollapsed ? 'Expand All' : 'Collapse All', \n                      setCollapseTooltipPosition\n                    );\n                  }\n                } catch (error) {\n                  console.error('Error showing collapse tooltip:', error);\n                }\n              }}\n              onMouseLeave={() => {\n                if (deviceSupportsHover) {\n                  setHoveredButton(null);\n                  setCollapseTooltipPosition(null);\n                }\n              }}\n            >\n              <MaterialCommunityIcons \n                name={allCollapsed ? \"chevron-down\" : \"chevron-up\"} \n                size={24} \n                color={theme.colors.text} \n              />\n            </TouchableOpacity> */}\n            \n            <TouchableOpacity\n              ref={buttonRef}\n              style={styles.addServiceButton}\n              onMouseEnter={() => {\n                try {\n                  if (deviceSupportsHover) {\n                    showTooltip(buttonRef, 'Add Service', setTooltipPosition);\n                  }\n                } catch (error) {\n                  console.error('Error showing add tooltip:', error);\n                }\n              }}\n              onMouseLeave={() => {\n                if (deviceSupportsHover) {\n                  setHoveredButton(null);\n                  setTooltipPosition(null);\n                }\n              }}\n              onPress={() => {\n                setEditingService(null);\n                setShowModal(true);\n              }}\n            >\n              <MaterialCommunityIcons \n                name=\"plus\" \n                size={20} \n                color={theme.colors.surface} \n              />\n              <Text style={styles.addServiceText}>Add New Service</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n\n        {(Array.isArray(services) && services.length > 0) ? (\n          <View style={[styles.servicesGrid, { justifyContent: screenWidth > 600 ? '' : 'center' }]}>\n            {services.map((item, index) => (\n              <View key={`service-wrapper-${index}`} style={styles.serviceCardWrapper}>\n                {renderService({ item, index })}\n              </View>\n            ))}\n          </View>\n        ) : (\n          <View style={styles.emptyContainer}>\n            <Text style={styles.emptyText}>No services yet</Text>\n            <TouchableOpacity \n              style={styles.addButton}\n              onPress={() => setShowModal(true)}\n            >\n              <Text style={styles.addButtonText}>Add Services</Text>\n            </TouchableOpacity>\n          </View>\n        )}\n      </View>\n      \n\n      <ServiceCreationModal\n        visible={showModal}\n        onClose={() => {\n          setShowModal(false);\n          setEditingService(null);\n        }}\n        onSave={handleSaveService}\n        initialService={editingService}\n        setHasUnsavedChanges={setHasUnsavedChanges}\n      />\n\n      <ConfirmationModal\n        visible={showDeleteModal}\n        onClose={() => setShowDeleteModal(false)}\n        onConfirm={confirmDelete}\n        actionText=\"delete this service\"\n      />\n\n      {tooltipPosition && (\n        <Portal>\n          <View \n            style={[\n              styles.portalTooltip,\n              {\n                position: 'fixed',\n                top: tooltipPosition.y - 40,\n                left: tooltipPosition.x - 35,\n              }\n            ]}\n          >\n            <Text style={styles.tooltipText}>{tooltipPosition.text}</Text>\n          </View>\n        </Portal>\n      )}\n\n      {collapseTooltipPosition && (\n        <Portal>\n          <View \n            style={[\n              styles.portalTooltip,\n              {\n                position: 'fixed',\n                top: collapseTooltipPosition.y - 40,\n                left: collapseTooltipPosition.x - 35,\n              }\n            ]}\n          >\n            <Text style={styles.tooltipText}>{collapseTooltipPosition.text}</Text>\n          </View>\n        </Portal>\n      )}\n      \n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    position: 'relative',\n    zIndex: 9998,\n    elevation: 9998,\n    backgroundColor: theme.colors.surface,\n    minHeight: '100%',\n  },\n  serviceListContainer: {\n    paddingVertical: 0,\n  },\n  servicesGrid: {\n    display: 'flex',\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 16,\n    paddingBottom: 24,\n  },\n  serviceCardWrapper: {\n    flex: 1,\n    minWidth: 300,\n    maxWidth: 375,\n  },\n  headerContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 24,\n    position: 'relative',\n    zIndex: 9999,\n    elevation: 9999,\n  },\n  headerActions: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n  },\n  collapseButton: {\n    padding: 8,\n    borderRadius: 8,\n    backgroundColor: theme.colors.surface,\n  },\n  sectionTitle: {\n    fontSize: theme.fontSizes.large,\n    fontWeight: 'bold',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  addServiceButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    backgroundColor: theme.colors.primary,\n    paddingHorizontal: 16,\n    paddingVertical: 10,\n    borderRadius: 50,\n  },\n  addServiceText: {\n    color: theme.colors.surface,\n    fontSize: theme.fontSizes.medium,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  emptyContainer: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 40,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    marginBottom: 24,\n    minHeight: 200,\n  },\n  emptyText: {\n    fontSize: theme.fontSizes.mediumLarge,\n    color: theme.colors.text,\n    marginBottom: 20,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  addButton: {\n    backgroundColor: theme.colors.primary,\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n    borderRadius: 50,\n  },\n  addButtonText: {\n    color: theme.colors.surface,\n    fontSize: theme.fontSizes.medium,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  portalTooltip: {\n    backgroundColor: theme.colors.surface,\n    padding: 8,\n    borderRadius: 4,\n    width: 70,\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5,\n  },\n  tooltipText: {\n    fontSize: theme.fontSizes.small,\n    color: theme.colors.text,\n    textAlign: 'center',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default ServiceManager;\n","import React from 'react';\nimport { View, Text, Image, TouchableOpacity, StyleSheet } from 'react-native';\nimport { theme } from '../styles/theme';\n\nconst RecordedPets = ({ pets }) => {\n  return (\n    <View style={styles.section}>\n      <Text style={styles.sectionTitle}>My Pets</Text>\n      {pets.map((pet) => (\n        <TouchableOpacity key={pet.id} style={styles.petItem}>\n          <View style={styles.petItemContent}>\n            <Image source={{ uri: pet.photo }} style={styles.petPhoto} />\n            <View style={styles.petInfo}>\n              <Text style={styles.petName}>{pet.name}</Text>\n              <Text style={styles.petDetails}>{pet.type} • {pet.breed} • {pet.age} years old</Text>\n            </View>\n          </View>\n        </TouchableOpacity>\n      ))}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  section: {\n    width: '100%',\n    maxWidth: 600,\n    marginBottom: 20,\n    paddingVertical: 20,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  sectionTitle: {\n    fontSize: theme.fontSizes.large,\n    fontWeight: 'bold',\n    color: theme.colors.primary,\n    marginBottom: 10,\n  },\n  petItem: {\n    marginBottom: 10,\n    padding: 10,\n    backgroundColor: theme.colors.surface,\n    borderColor: theme.colors.border,\n    borderWidth: 1,\n    borderRadius: 5,\n    width: '100%',\n    maxWidth: 600,\n  },\n  petItemContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  petPhoto: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    marginRight: 10,\n  },\n  petName: {\n    fontSize: theme.fontSizes.medium,\n    fontWeight: 'bold',\n  },\n  petInfo: {\n    flex: 1,\n  },\n  petDetails: {\n    fontSize: theme.fontSizes.smallMedium,\n    color: theme.colors.placeholder,\n    flexWrap: 'wrap',\n  },\n});\n\nexport default RecordedPets;","import React from 'react';\nimport { View, Text, TextInput, TouchableOpacity, StyleSheet } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\n\nconst EditableSection = ({ \n  title, \n  value, \n  onChangeText, \n  editMode, \n  toggleEditMode, \n  setHasUnsavedChanges,\n  getContentWidth,\n  multiline = true \n}) => {\n  const renderEditableField = () => {\n    return editMode ? (\n      <TextInput\n        value={value}\n        onChangeText={(text) => {\n          onChangeText(text);\n          setHasUnsavedChanges(true);\n        }}\n        style={[\n          styles.input,\n          { width: getContentWidth() },\n          multiline && { height: 100, textAlignVertical: 'top' }\n        ]}\n        multiline={multiline}\n        numberOfLines={multiline ? 4 : 1}\n      />\n    ) : (\n      <Text style={[styles.fieldText, { width: getContentWidth() }]}>\n        {value || `No ${title.toLowerCase()} provided`}\n      </Text>\n    );\n  };\n\n  return (\n    <View style={styles.section}>\n      <View style={styles.sectionHeader}>\n        <Text style={styles.sectionTitle}>{title}</Text>\n        <TouchableOpacity onPress={toggleEditMode}>\n          <MaterialCommunityIcons name=\"pencil\" size={20} color={theme.colors.primary} />\n        </TouchableOpacity>\n      </View>\n      {renderEditableField()}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  section: {\n    width: '100%',\n    maxWidth: 600,\n    // marginBottom: 20,\n    paddingVertical: 20,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  sectionHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    width: '100%',\n    marginBottom: 10,\n  },\n  sectionTitle: {\n    fontSize: theme.fontSizes.large,\n    marginBottom: 10,\n    fontWeight: 'bold',\n    color: theme.colors.primary,\n  },\n  input: {\n    width: '100%',\n    maxWidth: 600,\n    marginBottom: 10,\n    backgroundColor: theme.colors.surface,\n    padding: 10,\n    borderRadius: 5,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  fieldText: {\n    width: '100%',\n    maxWidth: 600,\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    marginBottom: 10,\n  },\n});\n\nexport default EditableSection;","import React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  Image,\n  TouchableOpacity,\n  ScrollView,\n  StyleSheet,\n  Modal,\n} from 'react-native';\nimport { MaterialCommunityIcons, Ionicons } from '@expo/vector-icons';\nimport ServiceManager from './ServiceManager';\nimport { theme } from '../styles/theme';\nimport RecordedPets from './RecordedPets';\nimport EditableSection from './EditableSection';\nimport * as ImagePicker from 'expo-image-picker';\n\nconst ProfessionalTab = ({ \n  services, \n  setServices, \n  setHasUnsavedChanges,\n  getContentWidth,\n  pets,\n  editMode,\n  toggleEditMode\n}) => {\n  const [professionalPhoto, setProfessionalPhoto] = useState(null);\n  const [professionalBio, setProfessionalBio] = useState('');\n  const [portfolioPhotos, setPortfolioPhotos] = useState([]);\n  const [facilities, setFacilities] = useState('');\n  const [skills, setSkills] = useState({\n    certifications: [],\n    experience: '',\n    specialties: [],\n  });\n  const [selectedFacilities, setSelectedFacilities] = useState([]);\n  const [facilitiesModalVisible, setFacilitiesModalVisible] = useState(false);\n  const [tempSelectedFacilities, setTempSelectedFacilities] = useState([]);\n\n  const FACILITY_OPTIONS = [\n    // Living Situation\n    { id: 'apartment', label: 'Lives in an apartment' },\n    { id: 'house', label: 'Lives in a house' },\n    { id: 'fenced_yard', label: 'Has a fenced yard' },\n    \n    // Household Environment\n    { id: 'non_smoking', label: 'Non-smoking household' },\n    { id: 'no_children', label: 'No children present' },\n    { id: 'has_children', label: 'Children present' },\n    { id: 'security_system', label: 'Has security system' },\n    \n    // Pet Policies\n    { id: 'dogs_bed', label: 'Dogs allowed on bed' },\n    { id: 'dogs_furniture', label: 'Dogs allowed on furniture' },\n    { id: 'crate_available', label: 'Crate available' },\n    { id: 'separate_areas', label: 'Can separate pets' },\n    \n    // Care Details\n    { id: 'potty_0_2', label: 'Potty breaks every 0-2 hours' },\n    { id: 'potty_2_4', label: 'Potty breaks every 2-4 hours' },\n    { id: 'potty_4_6', label: 'Potty breaks every 4-6 hours' },\n    \n    // Resident Pets\n    { id: 'no_pets', label: 'No resident pets' },\n    { id: 'has_dogs', label: 'Has resident dogs' },\n    { id: 'has_cats', label: 'Has resident cats' },\n    \n    // Additional Features\n    { id: 'air_conditioned', label: 'Air-conditioned' },\n    { id: 'outdoor_area', label: 'Has outdoor play area' },\n    { id: 'emergency_transport', label: 'Emergency transport available' },\n  ];\n\n  const pickProfessionalPhoto = async () => {\n    let result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.Images,\n      allowsEditing: true,\n      aspect: [1, 1],\n      quality: 1,\n    });\n\n    if (!result.canceled) {\n      setProfessionalPhoto(result.assets[0].uri);\n      setHasUnsavedChanges(true);\n    }\n  };\n\n  const addPortfolioPhoto = async () => {\n    let result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.Images,\n      allowsEditing: false,\n      quality: 1,\n      aspect: [4, 3],\n      allowsMultipleSelection: true,\n      selectionLimit: 10,\n    });\n\n    if (!result.canceled) {\n      const newPhotos = result.assets.map(asset => ({\n        id: Date.now().toString() + Math.random().toString(36).substr(2, 9),\n        uri: asset.uri,\n        caption: 'New portfolio photo'\n      }));\n      \n      setPortfolioPhotos(prev => [...prev, ...newPhotos]);\n      setHasUnsavedChanges(true);\n    }\n  };\n\n  const renderEditableField = (label, value, onChangeText, section, multiline = false) => {\n    return editMode[section] ? (\n      <TextInput\n        value={value}\n        onChangeText={(text) => {\n          onChangeText(text);\n          setHasUnsavedChanges(true);\n        }}\n        style={[\n          styles.input,\n          { width: getContentWidth() },\n          multiline && { height: 100, textAlignVertical: 'top' }\n        ]}\n        multiline={multiline}\n        numberOfLines={multiline ? 4 : 1}\n      />\n    ) : (\n      <Text style={[styles.fieldText, { width: getContentWidth() }]}>\n        {value || `No ${label.toLowerCase()} provided`}\n      </Text>\n    );\n  };\n\n  const toggleFacility = (facilityId) => {\n    setSelectedFacilities(prev => {\n      if (prev.includes(facilityId)) {\n        return prev.filter(id => id !== facilityId);\n      } else {\n        return [...prev, facilityId];\n      }\n    });\n    setHasUnsavedChanges(true);\n  };\n\n  const openFacilitiesModal = () => {\n    setTempSelectedFacilities([...selectedFacilities]);\n    setFacilitiesModalVisible(true);\n  };\n\n  const saveFacilities = () => {\n    setSelectedFacilities(tempSelectedFacilities);\n    setFacilitiesModalVisible(false);\n    setHasUnsavedChanges(true);\n  };\n\n  const toggleTempFacility = (facilityId) => {\n    setTempSelectedFacilities(prev => {\n      if (prev.includes(facilityId)) {\n        return prev.filter(id => id !== facilityId);\n      } else {\n        return [...prev, facilityId];\n      }\n    });\n  };\n\n  return (\n    <View style={styles.centeredContent}>\n      {/* Professional Photo Section */}\n      <View style={styles.section}>\n        <View style={styles.sectionHeader}>\n          <Text style={styles.sectionTitle}>Profile Photo (Professional)</Text>\n        </View>\n        <View style={styles.profileHeader}>\n          <TouchableOpacity onPress={pickProfessionalPhoto}>\n            {professionalPhoto ? (\n              <Image source={{ uri: professionalPhoto }} style={styles.profilePhoto} />\n            ) : (\n              <View style={[styles.profilePhoto, styles.profilePhotoPlaceholder]}>\n                <Ionicons name=\"person\" size={60} color={theme.colors.placeholder} />\n              </View>\n            )}\n          </TouchableOpacity>\n        </View>\n      </View>\n\n      {/* Professional Bio Section */}\n      <EditableSection\n        title=\"Professional Bio\"\n        value={professionalBio}\n        onChangeText={setProfessionalBio}\n        editMode={editMode.professionalBio}\n        toggleEditMode={() => toggleEditMode('professionalBio')}\n        setHasUnsavedChanges={setHasUnsavedChanges}\n        getContentWidth={getContentWidth}\n      />\n\n      {/* Services Section */}\n      <View style={styles.section}>\n        <ServiceManager\n          services={services || []}\n          setServices={setServices}\n          setHasUnsavedChanges={setHasUnsavedChanges}\n          isProfessionalTab={true}\n        />\n      </View>\n\n      {/* Portfolio Photos Section */}\n      <View style={styles.section}>\n        <View style={styles.sectionHeader}>\n          <Text style={styles.sectionTitle}>Portfolio Photos</Text>\n          <TouchableOpacity onPress={addPortfolioPhoto}>\n            <MaterialCommunityIcons \n              name=\"plus\" \n              size={24} \n              color={theme.colors.primary} \n            />\n          </TouchableOpacity>\n        </View>\n        <View style={styles.portfolioGrid}>\n          {portfolioPhotos.map((photo) => (\n            <TouchableOpacity \n              key={photo.id} \n              style={styles.portfolioCard}\n              onPress={() => {\n                // Handle photo edit/view\n                // Could add modal to edit caption or view full size\n              }}\n            >\n              <View style={styles.portfolioImageContainer}>\n                <Image \n                  source={{ uri: photo.uri }} \n                  style={styles.portfolioPhoto} \n                />\n              </View>\n              <Text style={styles.portfolioCaption}>{photo.caption}</Text>\n            </TouchableOpacity>\n          ))}\n        </View>\n        {portfolioPhotos.length === 0 && (\n          <Text style={styles.emptyText}>\n            No portfolio photos added yet\n          </Text>\n        )}\n      </View>\n        \n      { /* My Pets Section (Read-Only) */}\n      <RecordedPets pets={pets} />\n\n      {/* Home & Facilities Section */}\n      <View style={styles.section}>\n        <View style={styles.sectionHeader}>\n          <Text style={styles.sectionTitle}>Home & Facilities</Text>\n          <TouchableOpacity onPress={openFacilitiesModal}>\n            <MaterialCommunityIcons \n              name=\"pencil\" \n              size={24} \n              color={theme.colors.primary} \n            />\n          </TouchableOpacity>\n        </View>\n        <View style={styles.facilitiesContainer}>\n          {selectedFacilities.map((facilityId) => {\n            const facility = FACILITY_OPTIONS.find(f => f.id === facilityId);\n            return (\n              <View key={facilityId} style={styles.facilityTag}>\n                <Text style={styles.facilityTagText}>{facility.label}</Text>\n              </View>\n            );\n          })}\n          {selectedFacilities.length === 0 && (\n            <Text style={styles.emptyText}>No facilities selected</Text>\n          )}\n        </View>\n\n        {/* Facilities Selection Modal */}\n        <Modal\n          visible={facilitiesModalVisible}\n          transparent={true}\n          animationType=\"slide\"\n          onRequestClose={() => setFacilitiesModalVisible(false)}\n        >\n          <View style={styles.modalOverlay}>\n            <View style={styles.modalContent}>\n              <View style={styles.modalHeader}>\n                <Text style={styles.modalTitle}>Select Home & Facilities</Text>\n                <TouchableOpacity onPress={() => setFacilitiesModalVisible(false)}>\n                  <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.text} />\n                </TouchableOpacity>\n              </View>\n              \n              <ScrollView style={styles.modalScroll}>\n                {FACILITY_OPTIONS.map((facility) => (\n                  <TouchableOpacity\n                    key={facility.id}\n                    style={[\n                      styles.modalFacilityTag,\n                      tempSelectedFacilities.includes(facility.id) && styles.facilityTagSelected\n                    ]}\n                    onPress={() => toggleTempFacility(facility.id)}\n                  >\n                    <Text style={[\n                      styles.modalFacilityText,\n                      tempSelectedFacilities.includes(facility.id) && styles.facilityTagTextSelected\n                    ]}>\n                      {facility.label}\n                    </Text>\n                  </TouchableOpacity>\n                ))}\n              </ScrollView>\n\n              <View style={styles.modalFooter}>\n                <TouchableOpacity \n                  style={[styles.modalButton, styles.cancelButton]}\n                  onPress={() => setFacilitiesModalVisible(false)}\n                >\n                  <Text style={styles.modalButtonText}>Cancel</Text>\n                </TouchableOpacity>\n                <TouchableOpacity \n                  style={[styles.modalButton, styles.saveButton]}\n                  onPress={saveFacilities}\n                >\n                  <Text style={styles.modalButtonText2}>Save</Text>\n                </TouchableOpacity>\n              </View>\n            </View>\n          </View>\n        </Modal>\n      </View>\n\n      {/* Skills & Experience Section */}\n      {/* <View style={styles.section}>\n        <View style={styles.sectionHeader}>\n          <Text style={styles.sectionTitle}>Skills & Experience</Text>\n          <TouchableOpacity onPress={() => toggleEditMode('skills')}>\n            <MaterialCommunityIcons name=\"pencil\" size={20} color={theme.colors.primary} />\n          </TouchableOpacity>\n        </View>\n        {renderEditableField('Experience', skills.experience, \n          (text) => setSkills(prev => ({ ...prev, experience: text })), \n          'skills', \n          true\n        )}\n      </View> */}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  centeredContent: {\n    width: '100%',\n    maxWidth: 600,\n    alignItems: 'center',\n    alignSelf: 'center',\n  },\n  section: {\n    width: '100%',\n    maxWidth: 600,\n    marginBottom: 20,\n    paddingVertical: 20,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  sectionHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    width: '100%',\n    marginBottom: 10,\n  },\n  sectionTitle: {\n    fontSize: theme.fontSizes.large,\n    marginBottom: 10,\n    fontWeight: 'bold',\n    color: theme.colors.primary,\n  },\n  profileHeader: {\n    alignItems: 'center',\n    marginBottom: 20,\n    width: '100%',\n    maxWidth: 600,\n  },\n  profilePhoto: {\n    width: 120,\n    height: 120,\n    borderRadius: 60,\n  },\n  profilePhotoPlaceholder: {\n    backgroundColor: theme.colors.surface,\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  input: {\n    width: '100%',\n    maxWidth: 600,\n    marginBottom: 10,\n    backgroundColor: theme.colors.surface,\n    padding: 10,\n    borderRadius: 5,\n  },\n  fieldText: {\n    width: '100%',\n    maxWidth: 600,\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    marginBottom: 10,\n  },\n  portfolioGrid: {\n    width: '100%',\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'space-between',\n    gap: 16,\n  },\n  portfolioCard: {\n    width: '48%',\n    marginBottom: 16,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    overflow: 'hidden',\n    elevation: 2,\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.23,\n    shadowRadius: 2.62,\n  },\n  portfolioImageContainer: {\n    aspectRatio: 4/3,\n    width: '100%',\n  },\n  portfolioPhoto: {\n    width: '100%',\n    height: '100%',\n    borderTopLeftRadius: 8,\n    borderTopRightRadius: 8,\n  },\n  portfolioCaption: {\n    fontSize: theme.fontSizes.small,\n    color: theme.colors.text,\n    padding: 8,\n  },\n  emptyText: {\n    textAlign: 'center',\n    color: theme.colors.placeholder,\n    marginTop: 16,\n  },\n  facilitiesContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 8,\n    paddingHorizontal: 4,\n  },\n  facilityTag: {\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 20,\n    backgroundColor: theme.colors.surface,\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n    marginBottom: 8,\n  },\n  facilityTagSelected: {\n    backgroundColor: theme.colors.primary,\n  },\n  facilityTagText: {\n    color: theme.colors.primary,\n    fontSize: theme.fontSizes.small,\n  },\n  facilityTagTextSelected: {\n    color: theme.colors.surface,\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    width: '90%',\n    maxWidth: 500,\n    backgroundColor: theme.colors.background,\n    borderRadius: 10,\n    padding: 20,\n    maxHeight: '80%',\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 20,\n  },\n  modalTitle: {\n    fontSize: theme.fontSizes.large,\n    fontWeight: 'bold',\n  },\n  modalScroll: {\n    maxHeight: '70%',\n  },\n  modalFacilityTag: {\n    padding: 16,\n    borderRadius: 8,\n    backgroundColor: theme.colors.surface,\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n    marginBottom: 8,\n  },\n  modalFacilityText: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.primary,\n  },\n  modalFooter: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 20,\n  },\n  modalButton: {\n    padding: 12,\n    borderRadius: 8,\n    width: '48%',\n    alignItems: 'center',\n  },\n  saveButton: {\n    backgroundColor: theme.colors.primary,\n  },\n  cancelButton: {\n    backgroundColor: theme.colors.surface,\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n  },\n  modalButtonText: {\n    color: theme.colors.primary,\n    fontSize: theme.fontSizes.medium,\n    fontWeight: 'bold',\n  },\n  modalButtonText2: {\n    color: theme.colors.whiteText,\n    fontSize: theme.fontSizes.medium,\n    fontWeight: 'bold',\n  },\n});\n\nexport default ProfessionalTab;","import React, { useState } from 'react';\nimport { Platform, TouchableOpacity, Text, StyleSheet } from 'react-native';\nimport DateTimePicker from '@react-native-community/datetimepicker';\nimport { theme } from '../styles/theme';\n\n// Called in DefaultSettingsModal.js\n// Called in MyProfile.js\n\nconst DatePicker = ({ \n  value, \n  onChange, \n  placeholder = 'Select Date',\n  displayFormat = (date) => date, // Optional custom display format\n  disabled = false,\n  isInModal = false // New prop to handle modal context differently\n}) => {\n  const [showDatePicker, setShowDatePicker] = useState(false);\n  const dateValue = value ? new Date(value) : new Date();\n\n  const handleChange = (event, selectedDate) => {\n    const currentDate = selectedDate || dateValue;\n    \n    // Only close picker on Android after selection\n    if (Platform.OS === 'android') {\n      setShowDatePicker(false);\n    }\n    \n    if (selectedDate) {\n      onChange(currentDate.toISOString().split('T')[0]);\n    }\n  };\n\n  if (Platform.OS === 'web') {\n    const handleWrapperEvents = (e) => {\n      if (isInModal) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n    };\n\n    const handleInputChange = (e) => {\n      if (!disabled) {\n        onChange(e.target.value);\n      }\n    };\n\n    return (\n      <div \n        onClick={handleWrapperEvents}\n        onMouseDown={handleWrapperEvents}\n      >\n        <input\n          type=\"date\"\n          value={value || ''}\n          onChange={handleInputChange}\n          style={{\n            ...styles.webDatePicker,\n            ...(disabled ? styles.disabledInput : {}),\n            cursor: disabled ? 'default' : 'pointer'\n          }}\n          placeholder={placeholder}\n          disabled={disabled}\n        />\n      </div>\n    );\n  } else if (Platform.OS === 'ios') {\n    return (\n      <DateTimePicker\n        value={dateValue}\n        mode=\"date\"\n        display=\"default\"\n        onChange={handleChange}\n        disabled={disabled}\n      />\n    );\n  } else {\n    return (\n      <>\n        <TouchableOpacity \n          onPress={() => !disabled && setShowDatePicker(true)}\n          style={[\n            styles.androidButton,\n            disabled && styles.disabledInput\n          ]}\n          disabled={disabled}\n        >\n          <Text style={[\n            styles.dateText,\n            disabled && styles.disabledText\n          ]}>\n            {value ? displayFormat(value) : placeholder}\n          </Text>\n        </TouchableOpacity>\n        {Platform.OS === 'android' && showDatePicker && (\n          <DateTimePicker\n            value={dateValue}\n            mode=\"date\"\n            display=\"default\"\n            onChange={handleChange}\n            disabled={disabled}\n          />\n        )}\n      </>\n    );\n  }\n};\n\nconst styles = StyleSheet.create({\n  webDatePicker: {\n    padding: 8,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    fontSize: theme.fontSizes.medium,\n    width: '100%',\n    backgroundColor: theme.colors.background,\n  },\n  androidButton: {\n    padding: 8,\n    borderRadius: 4,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    backgroundColor: theme.colors.background,\n  },\n  dateText: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n  },\n  disabledInput: {\n    backgroundColor: theme.colors.disabled,\n    opacity: 0.7,\n  },\n  disabledText: {\n    color: theme.colors.placeholder,\n  }\n});\n\nexport default DatePicker;","import React from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { useNavigation } from '@react-navigation/native';\n\nconst BackHeader = ({ \n  title, \n  onBackPress, \n  rightIcon = null, // Optional right icon\n  onRightPress = null, // Optional right icon press handler\n  rightComponent = null, // Add this prop\n  customStyles = {} \n}) => {\n  const navigation = useNavigation();\n\n  return (\n    <View style={[styles.header, customStyles]}>\n      <TouchableOpacity onPress={onBackPress} style={styles.backButton}>\n        <MaterialCommunityIcons \n          name=\"arrow-left\" \n          size={24} \n          color={theme.colors.primary} \n        />\n      </TouchableOpacity>\n      \n      <Text style={styles.headerText}>{title}</Text>\n      \n      {rightComponent ? rightComponent : (\n        rightIcon && (\n          <TouchableOpacity \n            onPress={onRightPress} \n            style={styles.rightButton}\n          >\n            <MaterialCommunityIcons \n              name={rightIcon} \n              size={24} \n              color={theme.colors.primary} \n            />\n          </TouchableOpacity>\n        )\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n    backgroundColor: theme.colors.background,\n    zIndex: 100,\n    elevation: 100,\n  },\n  backButton: {\n    marginRight: 16,\n  },\n  headerText: {\n    fontSize: theme.fontSizes.large,\n    fontWeight: 'bold',\n    color: theme.colors.primary,\n    flex: 1, // This allows the title to take up remaining space\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  rightButton: {\n    marginLeft: 16,\n  },\n});\n\nexport default BackHeader;","import React, { useState, useEffect } from 'react';\nimport { View, SafeAreaView, Platform, StatusBar, StyleSheet, Dimensions } from 'react-native';\nimport { theme } from '../styles/theme';\n\nconst CrossPlatformView = ({ \n  children, \n  style,\n  useSafeArea = true,\n  backgroundColor = theme.colors.background,\n  fullWidthHeader = false,\n  contentWidth = '800px'\n}) => {\n  const [windowWidth, setWindowWidth] = useState(Dimensions.get('window').width);\n\n  useEffect(() => {\n    if (Platform.OS === 'web') {\n      const updateDimensions = () => {\n        setWindowWidth(Dimensions.get('window').width);\n      };\n\n      window.addEventListener('resize', updateDimensions);\n      return () => {\n        window.removeEventListener('resize', updateDimensions);\n      };\n    }\n  }, []);\n\n  // For web platform\n  if (Platform.OS === 'web') {\n    // Split children into header and content if fullWidthHeader is true\n    const childrenArray = React.Children.toArray(children);\n    const headerContent = fullWidthHeader && childrenArray.length > 0 ? childrenArray[0] : null;\n    const mainContent = fullWidthHeader && childrenArray.length > 1 ? childrenArray.slice(1) : children;\n\n    return (\n      <div style={{ \n        backgroundColor,\n        width: '100%',\n        maxWidth: '100%',\n        minHeight: '100vh',\n        display: 'flex',\n        flexDirection: 'column',\n        ...style,\n      }}>\n        {fullWidthHeader && headerContent && (\n          <div style={{ \n            width: '100%', \n            backgroundColor,\n          }}>\n            {headerContent}\n          </div>\n        )}\n        <div style={{\n          ...styles.webContainer,\n          maxWidth: contentWidth,\n          width: '100%',\n          flex: 1,\n          overflow: 'hidden',\n        }}>\n          {mainContent}\n        </div>\n      </div>\n    );\n  }\n\n  // For iOS\n  if (Platform.OS === 'ios' && useSafeArea) {\n    return (\n      <SafeAreaView style={[styles.container, { backgroundColor }, style]}>\n        {children}\n      </SafeAreaView>\n    );\n  }\n\n  // For Android or when SafeAreaView is disabled\n  return (\n    <View style={[\n      styles.container,\n      { \n        paddingTop: useSafeArea ? StatusBar.currentHeight : 0,\n        backgroundColor \n      },\n      style\n    ]}>\n      {children}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n    paddingTop: Platform.OS === 'android' ? StatusBar.currentHeight : 0,\n    width: '100%',\n    maxWidth: '100%',\n    overflow: 'hidden',\n  },\n  webContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    minHeight: '85vh',\n    width: '100%',\n    maxWidth: '100%',\n    overflow: 'hidden',\n  },\n});\n\nexport default CrossPlatformView;","import { debugLog } from '../context/AuthContext';\n\n// Colorado bounds for validation\nconst COLORADO_BOUNDS = {\n  north: 41.0,\n  south: 37.0,\n  east: -102.0,\n  west: -109.0\n};\n\nclass GeocodingQueue {\n  constructor() {\n    this.queue = [];\n    this.processing = false;\n    this.lastRequest = 0;\n    this.minInterval = 1100; // 1.1 seconds to be safe with Nominatim rate limit\n  }\n\n  async geocode(address) {\n    return new Promise((resolve, reject) => {\n      this.queue.push({ address, resolve, reject });\n      this.processQueue();\n    });\n  }\n\n  async processQueue() {\n    if (this.processing || this.queue.length === 0) {\n      return;\n    }\n\n    this.processing = true;\n\n    while (this.queue.length > 0) {\n      const { address, resolve, reject } = this.queue.shift();\n      \n      try {\n        // Ensure we don't exceed rate limit\n        const now = Date.now();\n        const timeSinceLastRequest = now - this.lastRequest;\n        \n        if (timeSinceLastRequest < this.minInterval) {\n          const waitTime = this.minInterval - timeSinceLastRequest;\n          debugLog('MBA7890', `Rate limiting: waiting ${waitTime}ms before next geocoding request`);\n          await new Promise(resolve => setTimeout(resolve, waitTime));\n        }\n\n        this.lastRequest = Date.now();\n        const result = await this.performGeocode(address);\n        resolve(result);\n      } catch (error) {\n        reject(error);\n      }\n    }\n\n    this.processing = false;\n  }\n\n  async performGeocode(address) {\n    const { street, apartment, city, state, zip } = address;\n    \n    // Build the address string\n    let addressString = street;\n    if (apartment) {\n      addressString += ` ${apartment}`;\n    }\n    addressString += `, ${city}, ${state}`;\n    if (zip) {\n      addressString += ` ${zip}`;\n    }\n    addressString += ', USA';\n\n    debugLog('MBA7890', 'Geocoding address:', addressString);\n\n    const url = 'https://nominatim.openstreetmap.org/search';\n    const params = new URLSearchParams({\n      q: addressString,\n      format: 'json',\n      limit: '1',\n      countrycodes: 'us',\n      addressdetails: '1'\n    });\n\n    const response = await fetch(`${url}?${params}`, {\n      headers: {\n        'User-Agent': 'CrittrCove/1.0 (contact@crittrcove.com)' // Required by Nominatim\n      }\n    });\n\n    if (response.status === 429) {\n      throw new Error('RATE_LIMITED');\n    }\n\n    if (!response.ok) {\n      throw new Error(`Geocoding failed: ${response.status}`);\n    }\n\n    const data = await response.json();\n    \n    if (!data || data.length === 0) {\n      throw new Error('No results found');\n    }\n\n    const result = data[0];\n    const lat = parseFloat(result.lat);\n    const lng = parseFloat(result.lon);\n\n    // Validate coordinates are within Colorado\n    if (!this.isInColorado(lat, lng)) {\n      debugLog('MBA7890', 'Address is outside Colorado bounds:', { lat, lng, address: addressString });\n      throw new Error('Address must be within Colorado');\n    }\n\n    debugLog('MBA7890', 'Geocoding successful:', { lat, lng, address: addressString });\n    \n    return {\n      latitude: lat,\n      longitude: lng,\n      formatted_address: result.display_name\n    };\n  }\n\n  isInColorado(lat, lng) {\n    return lat >= COLORADO_BOUNDS.south && \n           lat <= COLORADO_BOUNDS.north && \n           lng >= COLORADO_BOUNDS.west && \n           lng <= COLORADO_BOUNDS.east;\n  }\n}\n\n// Create a singleton instance\nconst geocodingQueue = new GeocodingQueue();\n\n/**\n * Geocode an address with retry logic and rate limiting\n * @param {Object} address - Address object with street, city, state, zip\n * @param {number} maxRetries - Maximum number of retry attempts\n * @returns {Promise<Object>} - Coordinates object with latitude/longitude\n */\nexport const geocodeAddress = async (address, maxRetries = 3) => {\n  for (let attempt = 1; attempt <= maxRetries; attempt++) {\n    try {\n      const result = await geocodingQueue.geocode(address);\n      return result;\n    } catch (error) {\n      debugLog('MBA7890', `Geocoding attempt ${attempt} failed:`, error.message);\n      \n      if (error.message === 'RATE_LIMITED' && attempt < maxRetries) {\n        // Exponential backoff for rate limiting\n        const waitTime = Math.pow(2, attempt) * 1000;\n        debugLog('MBA7890', `Rate limited, waiting ${waitTime}ms before retry`);\n        await new Promise(resolve => setTimeout(resolve, waitTime));\n        continue;\n      }\n      \n      if (attempt === maxRetries) {\n        throw error;\n      }\n    }\n  }\n};\n\n/**\n * Geocode an address with graceful fallback\n * Returns coordinates if successful, null if failed (but doesn't throw)\n * @param {Object} address - Address object\n * @returns {Promise<Object|null>} - Coordinates or null\n */\nexport const geocodeAddressGraceful = async (address) => {\n  try {\n    return await geocodeAddress(address);\n  } catch (error) {\n    debugLog('MBA7890', 'Geocoding failed gracefully:', error.message);\n    return null;\n  }\n};\n\n/**\n * Validate if coordinates are within Colorado bounds\n * @param {number} lat - Latitude\n * @param {number} lng - Longitude\n * @returns {boolean} - True if within Colorado\n */\nexport const isInColorado = (lat, lng) => {\n  return lat >= COLORADO_BOUNDS.south && \n         lat <= COLORADO_BOUNDS.north && \n         lng >= COLORADO_BOUNDS.west && \n         lng <= COLORADO_BOUNDS.east;\n}; ","import React, { useState, useEffect, useRef } from 'react';\nimport { View, TextInput, TouchableOpacity, Text, StyleSheet, FlatList, ActivityIndicator } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { debugLog } from '../context/AuthContext';\n\n// Colorado bounds for validation\nconst COLORADO_BOUNDS = {\n  north: 41.0,\n  south: 37.0,\n  east: -102.0,\n  west: -109.0\n};\n\nclass AddressSearchQueue {\n  constructor() {\n    this.queue = [];\n    this.processing = false;\n    this.lastRequest = 0;\n    this.minInterval = 1100; // 1.1 seconds for Nominatim rate limit\n  }\n\n  async search(query) {\n    return new Promise((resolve, reject) => {\n      this.queue.push({ query, resolve, reject });\n      this.processQueue();\n    });\n  }\n\n  async processQueue() {\n    if (this.processing || this.queue.length === 0) {\n      return;\n    }\n\n    this.processing = true;\n\n    while (this.queue.length > 0) {\n      const { query, resolve, reject } = this.queue.shift();\n      \n      try {\n        // Ensure we don't exceed rate limit\n        const now = Date.now();\n        const timeSinceLastRequest = now - this.lastRequest;\n        \n        if (timeSinceLastRequest < this.minInterval) {\n          const waitTime = this.minInterval - timeSinceLastRequest;\n          await new Promise(resolve => setTimeout(resolve, waitTime));\n        }\n\n        this.lastRequest = Date.now();\n        const result = await this.performSearch(query);\n        resolve(result);\n      } catch (error) {\n        reject(error);\n      }\n    }\n\n    this.processing = false;\n  }\n\n  async performSearch(query) {\n    debugLog('MBA8901', 'Searching addresses for:', query);\n\n    const url = 'https://nominatim.openstreetmap.org/search';\n    const params = new URLSearchParams({\n      q: `${query}, Colorado, USA`,\n      format: 'json',\n      limit: '5',\n      countrycodes: 'us',\n      addressdetails: '1',\n      bounded: '1',\n      viewbox: `${COLORADO_BOUNDS.west},${COLORADO_BOUNDS.south},${COLORADO_BOUNDS.east},${COLORADO_BOUNDS.north}`\n    });\n\n    const response = await fetch(`${url}?${params}`, {\n      headers: {\n        'User-Agent': 'CrittrCove/1.0 (contact@crittrcove.com)'\n      }\n    });\n\n    if (response.status === 429) {\n      throw new Error('RATE_LIMITED');\n    }\n\n    if (!response.ok) {\n      throw new Error(`Search failed: ${response.status}`);\n    }\n\n    const data = await response.json();\n    \n    if (!data || data.length === 0) {\n      return [];\n    }\n\n    // Filter and format results\n    return data\n      .filter(result => {\n        const lat = parseFloat(result.lat);\n        const lng = parseFloat(result.lon);\n        return this.isInColorado(lat, lng);\n      })\n      .map(result => ({\n        id: result.place_id,\n        formatted_address: result.display_name,\n        components: {\n          street: result.address?.house_number && result.address?.road \n            ? `${result.address.house_number} ${result.address.road}`\n            : result.address?.road || '',\n          apartment: '',\n          city: result.address?.city || result.address?.town || result.address?.village || '',\n          state: result.address?.state || 'Colorado',\n          zip: result.address?.postcode || ''\n        },\n        coordinates: {\n          latitude: parseFloat(result.lat),\n          longitude: parseFloat(result.lon),\n          formatted_address: result.display_name\n        }\n      }));\n  }\n\n  isInColorado(lat, lng) {\n    return lat >= COLORADO_BOUNDS.south && \n           lat <= COLORADO_BOUNDS.north && \n           lng >= COLORADO_BOUNDS.west && \n           lng <= COLORADO_BOUNDS.east;\n  }\n}\n\n// Create singleton instance\nconst searchQueue = new AddressSearchQueue();\n\nconst AddressAutocomplete = ({ \n  value = '', \n  onAddressSelect, \n  placeholder = \"Enter your address...\",\n  style = {},\n  disabled = false \n}) => {\n  const [inputValue, setInputValue] = useState(value);\n  const [suggestions, setSuggestions] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const [selectedAddress, setSelectedAddress] = useState(null);\n  const searchTimeoutRef = useRef(null);\n\n  // Update input value when prop changes\n  useEffect(() => {\n    setInputValue(value);\n  }, [value]);\n\n  // Debounced search function\n  const searchAddresses = async (query) => {\n    if (query.length < 3) {\n      setSuggestions([]);\n      setShowSuggestions(false);\n      return;\n    }\n\n    setIsLoading(true);\n    \n    try {\n      const results = await searchQueue.search(query);\n      setSuggestions(results);\n      setShowSuggestions(results.length > 0);\n      debugLog('MBA8901', `Found ${results.length} address suggestions`);\n    } catch (error) {\n      debugLog('MBA8901', 'Address search failed:', error.message);\n      setSuggestions([]);\n      setShowSuggestions(false);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Handle input change with debouncing\n  const handleInputChange = (text) => {\n    setInputValue(text);\n    setSelectedAddress(null);\n\n    // Clear previous timeout\n    if (searchTimeoutRef.current) {\n      clearTimeout(searchTimeoutRef.current);\n    }\n\n    // Set new timeout for search\n    searchTimeoutRef.current = setTimeout(() => {\n      searchAddresses(text);\n    }, 500); // 500ms debounce\n  };\n\n  // Handle address selection\n  const handleAddressSelect = (address) => {\n    setInputValue(address.formatted_address);\n    setSelectedAddress(address);\n    setShowSuggestions(false);\n    setSuggestions([]);\n\n    // Notify parent component\n    if (onAddressSelect) {\n      onAddressSelect(address);\n    }\n\n    debugLog('MBA8901', 'Address selected:', address);\n  };\n\n  // Clear suggestions when input loses focus\n  const handleBlur = () => {\n    // Delay hiding suggestions to allow for selection\n    setTimeout(() => {\n      setShowSuggestions(false);\n    }, 200);\n  };\n\n  // Render suggestion item\n  const renderSuggestion = ({ item, index }) => (\n    <TouchableOpacity\n      style={[\n        styles.suggestionItem,\n        index === suggestions.length - 1 && styles.lastSuggestionItem\n      ]}\n      onPress={() => handleAddressSelect(item)}\n      activeOpacity={0.7}\n    >\n      <MaterialCommunityIcons \n        name=\"map-marker\" \n        size={20} \n        color={theme.colors.primary} \n        style={styles.suggestionIcon}\n      />\n      <View style={styles.suggestionContent}>\n        <Text style={styles.suggestionText} numberOfLines={2}>\n          {item.formatted_address}\n        </Text>\n      </View>\n    </TouchableOpacity>\n  );\n\n  return (\n    <View style={[styles.container, style]}>\n      <View style={styles.inputContainer}>\n        <TextInput\n          style={[\n            styles.input,\n            selectedAddress && styles.inputValid,\n            disabled && styles.inputDisabled\n          ]}\n          value={inputValue}\n          onChangeText={handleInputChange}\n          onBlur={handleBlur}\n          placeholder={placeholder}\n          placeholderTextColor={theme.colors.placeholder}\n          editable={!disabled}\n        />\n        \n        {isLoading && (\n          <ActivityIndicator \n            size=\"small\" \n            color={theme.colors.primary} \n            style={styles.loadingIndicator}\n          />\n        )}\n        \n        {selectedAddress && (\n          <MaterialCommunityIcons \n            name=\"check-circle\" \n            size={20} \n            color={theme.colors.success} \n            style={styles.validIcon}\n          />\n        )}\n      </View>\n\n      {showSuggestions && suggestions.length > 0 && (\n        <View style={styles.suggestionsContainer}>\n          <FlatList\n            data={suggestions}\n            renderItem={renderSuggestion}\n            keyExtractor={(item) => item.id.toString()}\n            style={styles.suggestionsList}\n            keyboardShouldPersistTaps=\"handled\"\n            showsVerticalScrollIndicator={false}\n          />\n        </View>\n      )}\n\n      {inputValue.length >= 3 && !isLoading && suggestions.length === 0 && showSuggestions && (\n        <View style={styles.noResultsContainer}>\n          <Text style={styles.noResultsText}>\n            No addresses found. Please check your spelling or try a different address.\n          </Text>\n        </View>\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    position: 'relative',\n    zIndex: 1000, // High enough to appear above modal buttons (which are at -1)\n  },\n  inputContainer: {\n    position: 'relative',\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  input: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n    borderRadius: 8,\n    padding: 12,\n    fontSize: 16,\n    color: theme.colors.text,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    minHeight: 44,\n  },\n  inputValid: {\n    borderColor: theme.colors.success,\n    backgroundColor: theme.colors.success + '10',\n  },\n  inputDisabled: {\n    backgroundColor: theme.colors.surface,\n    color: theme.colors.placeholder,\n  },\n  loadingIndicator: {\n    position: 'absolute',\n    right: 12,\n  },\n  validIcon: {\n    position: 'absolute',\n    right: 12,\n  },\n  suggestionsContainer: {\n    position: 'absolute',\n    top: '100%',\n    left: 0,\n    right: 0,\n    backgroundColor: theme.colors.background,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderTopWidth: 0,\n    borderTopLeftRadius: 0,\n    borderTopRightRadius: 0,\n    maxHeight: 200,\n    zIndex: 1001, // Higher than container, much higher than modal buttons (-1)\n    elevation: 10, // Reasonable elevation for Android\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.3,\n    shadowRadius: 6,\n  },\n  suggestionsList: {\n    maxHeight: 200,\n  },\n  suggestionItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n    minHeight: 56,\n  },\n  lastSuggestionItem: {\n    borderBottomWidth: 0,\n  },\n  suggestionIcon: {\n    marginRight: 12,\n  },\n  suggestionContent: {\n    flex: 1,\n  },\n  suggestionText: {\n    fontSize: 14,\n    color: theme.colors.text,\n    lineHeight: 20,\n  },\n  noResultsContainer: {\n    position: 'absolute',\n    top: '100%',\n    left: 0,\n    right: 0,\n    backgroundColor: theme.colors.background,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderTopWidth: 0,\n    borderTopLeftRadius: 0,\n    borderTopRightRadius: 0,\n    padding: 16,\n    zIndex: 1001, // Same z-index as suggestions\n  },\n  noResultsText: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n    textAlign: 'center',\n    fontStyle: 'italic',\n  },\n});\n\nexport default AddressAutocomplete; ","import React, { useState, useRef, useEffect } from 'react';\nimport {\n  View,\n  Modal,\n  Image,\n  StyleSheet,\n  TouchableOpacity,\n  Text,\n  Animated,\n  PanResponder,\n  Dimensions,\n  Platform,\n  ActivityIndicator,\n  SafeAreaView,\n  TouchableWithoutFeedback\n} from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../../styles/theme';\nimport { debugLog } from '../../context/AuthContext';\nimport Slider from '@react-native-community/slider';\n\nconst { width: SCREEN_WIDTH } = Dimensions.get('window');\nconst CONTAINER_SIZE = Math.min(SCREEN_WIDTH * 0.9, 400);\nconst CIRCLE_SIZE = CONTAINER_SIZE * 0.8;\n\nconst ProfilePhotoCropper = ({ \n  visible, \n  imageUri, \n  onClose, \n  onSave,\n  isUploading = false\n}) => {\n  // State for image manipulation\n  const [scale, setScale] = useState(1);\n  const [imageSize, setImageSize] = useState({ width: 0, height: 0 });\n  const [imagePosition, setImagePosition] = useState({ x: 0, y: 0 });\n  const [imageLoaded, setImageLoaded] = useState(false);\n  \n  // Reference to track the initial scale\n  const initialScaleRef = useRef(1);\n  \n  // Animation values\n  const pan = useRef(new Animated.ValueXY()).current;\n\n  // Disable scrolling in parent when modal is open (for web)\n  useEffect(() => {\n    if (Platform.OS === 'web') {\n      const disableScroll = (e) => {\n        // Prevent scrolling when the modal is open\n        if (visible) {\n          e.preventDefault();\n        }\n      };\n      \n      // Add event listeners to prevent scrolling\n      document.addEventListener('touchmove', disableScroll, { passive: false });\n      document.addEventListener('wheel', disableScroll, { passive: false });\n      \n      // Also set overflow hidden on body\n      if (visible) {\n        document.body.style.overflow = 'hidden';\n      }\n      \n      return () => {\n        // Clean up\n        document.removeEventListener('touchmove', disableScroll);\n        document.removeEventListener('wheel', disableScroll);\n        document.body.style.overflow = '';\n      };\n    }\n  }, [visible]);\n  \n  // Reset values when the modal becomes visible or the image changes\n  useEffect(() => {\n    if (visible && imageUri) {\n      // Reset loading state\n      setImageLoaded(false);\n      \n      // Get image dimensions\n      Image.getSize(imageUri, (width, height) => {\n        debugLog('MBA23o9h8v45', 'Image dimensions:', { width, height });\n        setImageSize({ width, height });\n        \n        // Calculate the initial scale to fit the image within the crop circle\n        const initialScale = calculateInitialScale(width, height);\n        setScale(initialScale);\n        initialScaleRef.current = initialScale; // Store initial scale for reference\n        \n        // Center the image initially\n        pan.setValue({ x: 0, y: 0 });\n        setImagePosition({ x: 0, y: 0 });\n        \n        // Mark image as loaded\n        setImageLoaded(true);\n      }, error => {\n        debugLog('MBA23o9h8v45', 'Error getting image dimensions:', error);\n      });\n    }\n  }, [visible, imageUri]);\n  \n  // Calculate initial scale to fit image in crop circle\n  const calculateInitialScale = (width, height) => {\n    if (width === 0 || height === 0) return 1;\n    \n    const imageRatio = width / height;\n    const circleRatio = 1; // Circle is 1:1 aspect ratio\n    \n    // Calculate scale based on which dimension needs to fit\n    if (imageRatio > circleRatio) {\n      // Image is wider than tall, scale based on height\n      return CIRCLE_SIZE / height * 1.1; // Scale up slightly to fill circle\n    } else {\n      // Image is taller than wide, scale based on width\n      return CIRCLE_SIZE / width * 1.1; // Scale up slightly to fill circle\n    }\n  };\n  \n  // Create pan responder for dragging the image\n  const panResponder = useRef(\n    PanResponder.create({\n      onStartShouldSetPanResponder: () => true,\n      onMoveShouldSetPanResponder: (_, gestureState) => {\n        // Only respond to deliberate movements\n        return Math.abs(gestureState.dx) > 2 || Math.abs(gestureState.dy) > 2;\n      },\n      onPanResponderGrant: () => {\n        debugLog('MBA23o9h8v45', 'Pan responder activated');\n        pan.setOffset({\n          x: pan.x._value,\n          y: pan.y._value\n        });\n        pan.setValue({ x: 0, y: 0 });\n      },\n      onPanResponderMove: (_, gestureState) => {\n        pan.x.setValue(gestureState.dx);\n        pan.y.setValue(gestureState.dy);\n      },\n      onPanResponderRelease: () => {\n        debugLog('MBA23o9h8v45', 'Pan responder released');\n        pan.flattenOffset();\n        \n        // Update the image position state after pan ends\n        setImagePosition({\n          x: pan.x._value,\n          y: pan.y._value\n        });\n      },\n      // Don't let other components steal the gesture\n      onPanResponderTerminationRequest: () => false,\n    })\n  ).current;\n  \n  // Simple direct scale change function - keeps position stable\n  const handleScaleChange = (newScale) => {\n    // If returning to initial scale, reset position\n    if (Math.abs(newScale - initialScaleRef.current) < 0.01) {\n      // Reset position to center\n      pan.setValue({ x: 0, y: 0 });\n      setImagePosition({ x: 0, y: 0 });\n    }\n    \n    // Update scale\n    setScale(newScale);\n  };\n  \n  // Handle save button press\n  const handleSave = () => {\n    // Calculate crop parameters to pass to the parent component\n    const cropParams = {\n      scale,\n      x: -pan.x._value,\n      y: -pan.y._value,\n      imageWidth: imageSize.width,\n      imageHeight: imageSize.height,\n      cropWidth: CIRCLE_SIZE,\n      cropHeight: CIRCLE_SIZE\n    };\n    \n    debugLog('MBA23o9h8v45', 'Saving cropped image with params:', cropParams);\n    onSave(imageUri, cropParams);\n  };\n  \n  // Calculate transform styles for the image\n  const imageTransform = {\n    transform: [\n      { translateX: pan.x },\n      { translateY: pan.y },\n      { scale: scale }\n    ]\n  };\n  \n  // Calculate the min and max zoom values\n  const minZoom = initialScaleRef.current || 1;\n  const maxZoom = (initialScaleRef.current || 1) * 3;\n  \n  if (!visible) return null;\n  \n  return (\n    <Modal\n      visible={visible}\n      transparent={true}\n      animationType=\"fade\"\n      onRequestClose={onClose}\n      statusBarTranslucent={true}\n      presentationStyle=\"overFullScreen\"\n    >\n      <TouchableWithoutFeedback>\n        <View style={styles.modalContainer}>\n          <View style={styles.contentContainer}>\n            {/* Header */}\n            <View style={styles.header}>\n              <Text style={styles.title}>Adjust Profile Photo</Text>\n              <TouchableOpacity onPress={onClose} style={styles.closeButton}>\n                <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.text} />\n              </TouchableOpacity>\n            </View>\n            \n            {/* Main crop area container - this defines the visible area */}\n            <View style={styles.cropAreaOuterContainer}>\n              <View style={styles.cropAreaContainer}>\n                {/* This is where we clip/mask the image to only show within this container */}\n                <View style={styles.imageViewport}>\n                  {/* This is the actual photo that will be cropped */}\n                  <Animated.View\n                    style={[styles.imageContainer, imageTransform]}\n                    {...panResponder.panHandlers}\n                  >\n                    {imageUri && imageLoaded ? (\n                      <Image\n                        source={{ uri: imageUri }}\n                        style={[\n                          styles.image,\n                          {\n                            width: imageSize.width,\n                            height: imageSize.height,\n                          }\n                        ]}\n                        resizeMode=\"contain\"\n                        onLoad={() => {\n                          debugLog('MBA23o9h8v45', 'Image loaded in cropper component');\n                        }}\n                      />\n                    ) : (\n                      <ActivityIndicator size=\"large\" color={theme.colors.primary} />\n                    )}\n                  </Animated.View>\n                  \n                  {/* Semi-transparent overlay with hole for the crop circle */}\n                  <View style={styles.overlay} pointerEvents=\"none\">\n                    {/* This creates the transparent circle in the overlay */}\n                    <View style={styles.cropCircleHole} />\n                  </View>\n                  \n                  {/* Circle guide border */}\n                  <View style={styles.circleGuide} pointerEvents=\"none\" />\n                </View>\n              </View>\n            </View>\n            \n            {/* Zoom slider */}\n            <View style={styles.sliderContainer}>\n              <TouchableOpacity \n                onPress={() => {\n                  const newScale = Math.max(minZoom, scale - 0.1);\n                  handleScaleChange(newScale);\n                }}\n                style={styles.zoomButton}\n              >\n                <MaterialCommunityIcons name=\"magnify-minus\" size={24} color={theme.colors.text} />\n              </TouchableOpacity>\n              <Slider\n                style={styles.slider}\n                minimumValue={minZoom}\n                maximumValue={maxZoom}\n                value={scale}\n                onValueChange={handleScaleChange}\n                minimumTrackTintColor={theme.colors.primary}\n                maximumTrackTintColor={theme.colors.border}\n                thumbTintColor={theme.colors.primary}\n              />\n              <TouchableOpacity \n                onPress={() => {\n                  const newScale = Math.min(maxZoom, scale + 0.1);\n                  handleScaleChange(newScale);\n                }}\n                style={styles.zoomButton}\n              >\n                <MaterialCommunityIcons name=\"magnify-plus\" size={24} color={theme.colors.text} />\n              </TouchableOpacity>\n            </View>\n            \n            <View style={styles.instructionsContainer}>\n              <Text style={styles.instructionsText}>\n                Use slider to zoom • Drag to position • Return slider to left to reset zoom\n              </Text>\n            </View>\n            \n            <View style={styles.footer}>\n              <TouchableOpacity \n                style={[styles.button, styles.cancelButton]} \n                onPress={onClose}\n                disabled={isUploading}\n              >\n                <Text style={styles.cancelButtonText}>Cancel</Text>\n              </TouchableOpacity>\n              \n              <TouchableOpacity \n                style={[styles.button, styles.saveButton, isUploading && styles.disabledButton]} \n                onPress={handleSave}\n                disabled={isUploading || !imageLoaded}\n              >\n                {isUploading ? (\n                  <ActivityIndicator size=\"small\" color=\"#FFFFFF\" />\n                ) : (\n                  <Text style={styles.saveButtonText}>Save</Text>\n                )}\n              </TouchableOpacity>\n            </View>\n          </View>\n        </View>\n      </TouchableWithoutFeedback>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  modalContainer: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.7)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  contentContainer: {\n    width: CONTAINER_SIZE,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 16,\n    overflow: 'hidden',\n    elevation: 5,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  title: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.text,\n  },\n  closeButton: {\n    padding: 4,\n  },\n  cropAreaOuterContainer: {\n    alignItems: 'center',\n    paddingVertical: 16, // Reduced padding to ensure image is contained\n  },\n  cropAreaContainer: {\n    width: CIRCLE_SIZE,\n    height: CIRCLE_SIZE,\n    position: 'relative',\n    overflow: 'hidden', // This is crucial - confines the image to this container\n  },\n  imageViewport: {\n    width: CIRCLE_SIZE,\n    height: CIRCLE_SIZE,\n    overflow: 'hidden', // Important - this clips the image to this container\n    position: 'relative',\n  },\n  imageContainer: {\n    position: 'absolute',\n    width: CIRCLE_SIZE * 3, // Make it larger to ensure the image is always visible\n    height: CIRCLE_SIZE * 3,\n    left: -CIRCLE_SIZE,\n    top: -CIRCLE_SIZE,\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 1,\n  },\n  image: {\n    // Width and height will be set dynamically\n  },\n  overlay: {\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    zIndex: 2,\n  },\n  cropCircleHole: {\n    position: 'absolute',\n    width: CIRCLE_SIZE,\n    height: CIRCLE_SIZE,\n    borderRadius: CIRCLE_SIZE / 2,\n    top: 0,\n    left: 0,\n    // This creates a circular hole by masking out the center\n    ...Platform.select({\n      web: {\n        backgroundColor: 'transparent',\n        boxShadow: `0 0 0 ${CIRCLE_SIZE}px rgba(0, 0, 0, 0.5)`,\n      },\n      default: {\n        backgroundColor: 'transparent',\n        borderWidth: CIRCLE_SIZE / 2,\n        borderColor: 'rgba(0, 0, 0, 0.5)',\n        width: 0,\n        height: 0,\n        borderRadius: CIRCLE_SIZE,\n        top: CIRCLE_SIZE / 4,\n        left: CIRCLE_SIZE / 4,\n      },\n    }),\n  },\n  circleGuide: {\n    position: 'absolute',\n    width: CIRCLE_SIZE,\n    height: CIRCLE_SIZE,\n    borderRadius: CIRCLE_SIZE / 2,\n    borderWidth: 2,\n    borderColor: theme.colors.primary,\n    borderStyle: 'dashed',\n    zIndex: 3,\n  },\n  sliderContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    width: '90%',\n    marginTop: 8,\n    alignSelf: 'center',\n  },\n  slider: {\n    flex: 1,\n    height: 40,\n    marginHorizontal: 8,\n  },\n  zoomButton: {\n    padding: 8,\n  },\n  instructionsContainer: {\n    marginVertical: 8,\n    alignItems: 'center',\n  },\n  instructionsText: {\n    color: theme.colors.secondary,\n    fontSize: 14,\n    textAlign: 'center',\n  },\n  footer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    padding: 16,\n    borderTopWidth: 1,\n    borderTopColor: theme.colors.border,\n  },\n  button: {\n    paddingVertical: 12,\n    paddingHorizontal: 20,\n    borderRadius: 8,\n    alignItems: 'center',\n    justifyContent: 'center',\n    flex: 1,\n    marginHorizontal: 8,\n  },\n  cancelButton: {\n    backgroundColor: theme.colors.surface,\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n  },\n  saveButton: {\n    backgroundColor: theme.colors.primary,\n  },\n  disabledButton: {\n    backgroundColor: theme.colors.disabled,\n  },\n  cancelButtonText: {\n    color: theme.colors.primary,\n    fontWeight: '600',\n  },\n  saveButtonText: {\n    color: '#FFFFFF',\n    fontWeight: '600',\n  },\n});\n\nexport default ProfilePhotoCropper; ","import { Platform } from 'react-native';\nimport { debugLog } from '../context/AuthContext';\n\n/**\n * Processes an image URI with crop parameters to generate a cropped image.\n * On web, it returns a base64 data URL of the cropped image.\n * On native platforms, it's not possible to directly manipulate the image,\n * so we return the crop parameters for server-side processing.\n * \n * @param {string} imageUri - URI of the original image\n * @param {Object} cropParams - Parameters for cropping\n * @param {number} cropParams.scale - Scale factor of the image\n * @param {number} cropParams.x - X translation of the image\n * @param {number} cropParams.y - Y translation of the image\n * @param {number} cropParams.imageWidth - Original width of the image\n * @param {number} cropParams.imageHeight - Original height of the image\n * @param {number} cropParams.cropWidth - Width of the crop area\n * @param {number} cropParams.cropHeight - Height of the crop area\n * @returns {Promise<Object>} Object containing the processed image data\n */\nexport const processImageWithCrop = async (imageUri, cropParams) => {\n  try {\n    debugLog('MBA8080', 'Processing image with crop params:', cropParams);\n    \n    // For web platform, we can create a canvas and crop the image\n    if (Platform.OS === 'web') {\n      return await cropImageOnWeb(imageUri, cropParams);\n    } \n    \n    // For native platforms, we'll send the original image with crop parameters\n    // to be processed on the server\n    return {\n      uri: imageUri,\n      cropParams,\n      oldProfilePhotoUrl: cropParams.oldProfilePhotoUrl // Pass through for deletion\n    };\n  } catch (error) {\n    debugLog('MBA8080', 'Error processing image with crop:', error);\n    throw error;\n  }\n};\n\n/**\n * Crops an image on web using canvas\n * @param {string} imageUri - URI of the original image\n * @param {Object} cropParams - Parameters for cropping\n * @returns {Promise<Object>} Object containing the cropped image as base64\n */\nconst cropImageOnWeb = async (imageUri, cropParams) => {\n  return new Promise((resolve, reject) => {\n    // Ensure we're on web platform and have required APIs\n    if (Platform.OS !== 'web' || typeof document === 'undefined' || typeof Image === 'undefined') {\n      debugLog('MBA8080', 'Canvas cropping not available on this platform');\n      reject(new Error('Canvas cropping not available on this platform'));\n      return;\n    }\n    \n    try {\n      // Create an image element to load the original image\n      const img = new Image();\n      img.crossOrigin = 'anonymous';\n      \n      img.onload = () => {\n        try {\n          // Check if canvas is available\n          if (typeof document.createElement !== 'function') {\n            throw new Error('document.createElement not available');\n          }\n          \n          // Create a canvas to draw the cropped image\n          const canvas = document.createElement('canvas');\n          if (!canvas || typeof canvas.getContext !== 'function') {\n            throw new Error('Canvas not supported');\n          }\n          \n          const ctx = canvas.getContext('2d');\n          if (!ctx) {\n            throw new Error('Canvas 2D context not available');\n          }\n          \n          // Set canvas size to the crop dimensions (which is the circle diameter)\n          const cropSize = Math.min(cropParams.cropWidth, cropParams.cropHeight);\n          canvas.width = cropSize;\n          canvas.height = cropSize;\n          \n          // Calculate the center of the crop area\n          const centerX = cropSize / 2;\n          const centerY = cropSize / 2;\n          \n          // Create circular clipping path\n          ctx.beginPath();\n          ctx.arc(centerX, centerY, cropSize / 2, 0, Math.PI * 2, true);\n          ctx.closePath();\n          ctx.clip();\n          \n          // Calculate the source position and dimensions in the original image\n          const scaledWidth = cropParams.imageWidth * cropParams.scale;\n          const scaledHeight = cropParams.imageHeight * cropParams.scale;\n          \n          // Calculate the center of the image in the coordinate system\n          // of the crop window, accounting for the translation\n          const cropCenterX = cropSize / 2;\n          const cropCenterY = cropSize / 2;\n          \n          // Calculate the image center coordinates in the crop window\n          const imageCenterX = cropCenterX - cropParams.x;\n          const imageCenterY = cropCenterY - cropParams.y;\n          \n          // Calculate the top-left position to draw the image\n          const drawX = imageCenterX - (scaledWidth / 2);\n          const drawY = imageCenterY - (scaledHeight / 2);\n          \n          debugLog('MBA8080', 'Crop calculations:', {\n            cropSize,\n            scaledWidth,\n            scaledHeight,\n            drawX,\n            drawY,\n            imageCenterX,\n            imageCenterY\n          });\n          \n          // Draw the image with the appropriate transformations\n          ctx.drawImage(\n            img,\n            drawX,\n            drawY,\n            scaledWidth,\n            scaledHeight\n          );\n          \n          // Convert the canvas to a base64 data URL\n          const dataUrl = canvas.toDataURL('image/jpeg', 0.9);\n          \n          debugLog('MBA8080', 'Image cropped successfully on web');\n          \n          // Return the cropped image data\n          resolve({\n            base64Data: dataUrl,\n            type: 'image/jpeg',\n            oldProfilePhotoUrl: cropParams.oldProfilePhotoUrl // Pass through for deletion\n          });\n        } catch (error) {\n          debugLog('MBA8080', 'Error cropping image on web:', error);\n          reject(error);\n        }\n      };\n      \n      img.onerror = (error) => {\n        debugLog('MBA8080', 'Error loading image for cropping:', error);\n        reject(new Error('Failed to load image for cropping'));\n      };\n      \n      // Start loading the image\n      img.src = imageUri;\n    } catch (error) {\n      debugLog('MBA8080', 'Error cropping image on web:', error);\n      reject(error);\n    }\n  });\n};\n\n/**\n * Prepares image data for upload based on platform\n * @param {Object} processedImage - Processed image data from processImageWithCrop\n * @returns {Object} Data ready for upload (FormData or base64)\n */\nexport const prepareImageForUpload = (processedImage) => {\n  // If we have base64 data (from web), return it directly\n  if (processedImage.base64Data) {\n    return {\n      isBase64: true,\n      data: processedImage.base64Data,\n      oldProfilePhotoUrl: processedImage.oldProfilePhotoUrl\n    };\n  }\n  \n  // For native platforms, create a FormData object with the URI and crop parameters\n  if (processedImage.uri) {\n    const formData = new FormData();\n    \n    // Add the image file\n    const photoFile = {\n      uri: Platform.OS === 'android' ? processedImage.uri : processedImage.uri.replace('file://', ''),\n      type: 'image/jpeg',\n      name: 'profile_photo.jpg'\n    };\n    formData.append('profile_picture', photoFile);\n    \n    // Add crop parameters if provided\n    if (processedImage.cropParams) {\n      formData.append('crop_params', JSON.stringify(processedImage.cropParams));\n    }\n    \n    // Add the old profile photo URL if provided for deletion\n    if (processedImage.oldProfilePhotoUrl) {\n      formData.append('old_profile_photo_url', processedImage.oldProfilePhotoUrl);\n    }\n    \n    return {\n      isBase64: false,\n      data: formData,\n      oldProfilePhotoUrl: processedImage.oldProfilePhotoUrl\n    };\n  }\n  \n  throw new Error('Invalid processed image data');\n}; ","/**\n * SupportButton Component\n * \n * A reusable button component that opens a modal with donation options.\n * \n * Setup Instructions:\n * 1. For Venmo: Replace 'YOUR_VENMO_USERNAME' in handleVenmoDonation with your actual Venmo username\n * 2. For Credit Card: Uncomment the code in handleCreditCardDonation and replace 'YOUR_PAYMENT_LINK_HERE' \n *    with your Stripe payment link after setting up your Stripe account\n * \n * Props:\n * - style: Custom container styling\n * - buttonStyle: Custom button styling  \n * - showTitle: Show/hide section title (default: true)\n * - title: Custom title text (default: \"Support CrittrCove\")\n * - subtitle: Custom subtitle text (default: \"Help us keep costs low for everyone\")\n * - size: Button size variant - \"default\", \"compact\", or \"large\" (default: \"default\")\n */\n\nimport React, { useState } from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet, Linking, Modal } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { useToast } from './ToastProvider';\nimport { debugLog } from '../context/AuthContext';\n\nconst SupportButton = ({ \n  style, \n  buttonStyle, \n  showTitle = true, \n  title = \"Support CrittrCove\",\n  subtitle = \"Help us keep costs low for everyone\",\n  size = \"default\" // \"default\", \"compact\", \"large\"\n}) => {\n  const showToast = useToast();\n  const [showDonateModal, setShowDonateModal] = useState(false);\n\n  // Handle donate button press - now opens modal instead of direct link\n  const handleDonatePress = () => {\n    debugLog('MBA9902', 'Opening donate modal from SupportButton component');\n    setShowDonateModal(true);\n  };\n\n  // Handle credit card donation\n  const handleCreditCardDonation = () => {\n    debugLog('MBA9902', 'Credit card donation selected');\n    setShowDonateModal(false);\n    \n    // TODO: Uncomment and replace with your actual Stripe payment link once created\n    // To create: Go to Stripe Dashboard > Products > Add Product > Create Payment Link\n    // Set it as a donation with \"Customer chooses price\" option enabled\n    /*\n    const donateUrl = 'https://buy.stripe.com/YOUR_PAYMENT_LINK_HERE';\n    \n    Linking.openURL(donateUrl).catch((err) => {\n      debugLog('MBA9902', 'Error opening donate link:', err);\n      showToast({\n        message: 'Unable to open donation page. Please try again later.',\n        type: 'error',\n        duration: 3000\n      });\n    });\n    */\n    \n    // Temporary message while Stripe is being set up\n    showToast({\n      message: 'Credit card donations coming soon! Please use Venmo for now.',\n      type: 'info',\n      duration: 4000\n    });\n  };\n\n  // Handle Venmo donation\n  const handleVenmoDonation = () => {\n    debugLog('MBA9902', 'Venmo donation selected');\n    setShowDonateModal(false);\n    \n    // TODO: Replace with your actual Venmo username\n    const venmoUrl = 'https://venmo.com/u/matt-aertker';\n    \n    Linking.openURL(venmoUrl).catch((err) => {\n      debugLog('MBA9902', 'Error opening Venmo link:', err);\n      showToast({\n        message: 'Unable to open Venmo. Please try again later.',\n        type: 'error',\n        duration: 3000\n      });\n    });\n  };\n\n  const getSizeStyles = () => {\n    switch (size) {\n      case \"compact\":\n        return {\n          button: styles.donateButtonCompact,\n          icon: styles.donateButtonIconCompact,\n          title: styles.donateButtonTitleCompact,\n          subtitle: styles.donateButtonSubtitleCompact,\n          iconSize: 20,\n          arrowSize: 16\n        };\n      case \"large\":\n        return {\n          button: styles.donateButtonLarge,\n          icon: styles.donateButtonIconLarge,\n          title: styles.donateButtonTitleLarge,\n          subtitle: styles.donateButtonSubtitleLarge,\n          iconSize: 28,\n          arrowSize: 24\n        };\n      default:\n        return {\n          button: styles.donateButton,\n          icon: styles.donateButtonIcon,\n          title: styles.donateButtonTitle,\n          subtitle: styles.donateButtonSubtitle,\n          iconSize: 24,\n          arrowSize: 20\n        };\n    }\n  };\n\n  const sizeStyles = getSizeStyles();\n\n  return (\n    <>\n      <View style={[styles.donateSection, style]}>\n        {showTitle && (\n          <View style={styles.sectionHeader}>\n            <Text style={styles.sectionTitle}>{title}</Text>\n          </View>\n        )}\n        <TouchableOpacity \n          style={[sizeStyles.button, buttonStyle]}\n          onPress={handleDonatePress}\n        >\n          <View style={sizeStyles.icon}>\n            <MaterialCommunityIcons \n              name=\"heart\" \n              size={sizeStyles.iconSize} \n              color={theme.colors.background} \n            />\n          </View>\n          <View style={styles.donateButtonContent}>\n            <Text style={sizeStyles.title}>Support CrittrCove</Text>\n            <Text style={sizeStyles.subtitle}>{subtitle}</Text>\n          </View>\n          <MaterialCommunityIcons \n            name=\"chevron-right\" \n            size={sizeStyles.arrowSize} \n            color={theme.colors.background} \n          />\n        </TouchableOpacity>\n      </View>\n\n      {/* Donation Options Modal */}\n      <Modal\n        visible={showDonateModal}\n        transparent\n        animationType=\"fade\"\n        onRequestClose={() => setShowDonateModal(false)}\n      >\n        <View style={styles.modalOverlay}>\n          <View style={styles.modalContent}>\n            <View style={styles.modalHeader}>\n              <Text style={styles.modalTitle}>Support CrittrCove</Text>\n              <TouchableOpacity \n                style={styles.modalCloseButton}\n                onPress={() => setShowDonateModal(false)}\n              >\n                <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.text} />\n              </TouchableOpacity>\n            </View>\n            \n            <Text style={styles.modalDescription}>\n              Choose your preferred way to support us and help keep CrittrCove running!\n            </Text>\n\n            <View style={styles.donationOptionsContainer}>\n              {/* Credit Card Option - Commented out functionality */}\n              <TouchableOpacity \n                style={[styles.donationOption, styles.disabledOption]}\n                onPress={handleCreditCardDonation}\n              >\n                <View style={styles.donationOptionIcon}>\n                  <MaterialCommunityIcons \n                    name=\"credit-card\" \n                    size={28} \n                    color={theme.colors.placeHolderText} \n                  />\n                </View>\n                <View style={styles.donationOptionContent}>\n                  <Text style={[styles.donationOptionTitle, styles.disabledText]}>\n                    Credit Card\n                  </Text>\n                  <Text style={[styles.donationOptionSubtitle, styles.disabledText]}>\n                    Coming soon - secure payment via Stripe\n                  </Text>\n                </View>\n                <View style={styles.comingSoonBadge}>\n                  <Text style={styles.comingSoonText}>Soon</Text>\n                </View>\n              </TouchableOpacity>\n\n              {/* Venmo Option */}\n              <TouchableOpacity \n                style={styles.donationOption}\n                onPress={handleVenmoDonation}\n              >\n                <View style={styles.donationOptionIcon}>\n                  <MaterialCommunityIcons \n                    name=\"cash\" \n                    size={28} \n                    color={theme.colors.primary} \n                  />\n                </View>\n                <View style={styles.donationOptionContent}>\n                  <Text style={styles.donationOptionTitle}>Venmo</Text>\n                  <Text style={styles.donationOptionSubtitle}>\n                    Quick and easy mobile payments\n                  </Text>\n                </View>\n                <MaterialCommunityIcons \n                  name=\"chevron-right\" \n                  size={20} \n                  color={theme.colors.text} \n                />\n              </TouchableOpacity>\n            </View>\n\n            <View style={styles.modalFooter}>\n              <Text style={styles.modalFooterText}>\n                Your support helps us keep costs low for everyone in the CrittrCove community!\n              </Text>\n            </View>\n          </View>\n        </View>\n      </Modal>\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  donateSection: {\n    marginTop: 16,\n  },\n  sectionHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  sectionTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.text,\n    fontFamily: theme.fonts?.header?.fontFamily,\n  },\n\n  // Default size styles\n  donateButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.mainColors.tertiary,\n    padding: 16,\n    borderRadius: 12,\n    shadowColor: theme.colors.mainColors.tertiary,\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  donateButtonIcon: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: 'rgba(255, 255, 255, 0.2)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 12,\n  },\n  donateButtonContent: {\n    flex: 1,\n  },\n  donateButtonTitle: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: theme.colors.background,\n    marginBottom: 2,\n    fontFamily: theme.fonts?.header?.fontFamily,\n  },\n  donateButtonSubtitle: {\n    fontSize: 12,\n    color: theme.colors.background,\n    opacity: 0.9,\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n\n  // Compact size styles\n  donateButtonCompact: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.mainColors.tertiary,\n    padding: 12,\n    borderRadius: 8,\n    shadowColor: theme.colors.mainColors.tertiary,\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.1,\n    shadowRadius: 2,\n    elevation: 2,\n  },\n  donateButtonIconCompact: {\n    width: 32,\n    height: 32,\n    borderRadius: 16,\n    backgroundColor: 'rgba(255, 255, 255, 0.2)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 10,\n  },\n  donateButtonTitleCompact: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: theme.colors.background,\n    marginBottom: 1,\n    fontFamily: theme.fonts?.header?.fontFamily,\n  },\n  donateButtonSubtitleCompact: {\n    fontSize: 11,\n    color: theme.colors.background,\n    opacity: 0.9,\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n\n  // Large size styles\n  donateButtonLarge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.mainColors.tertiary,\n    padding: 20,\n    borderRadius: 16,\n    shadowColor: theme.colors.mainColors.tertiary,\n    shadowOffset: { width: 0, height: 3 },\n    shadowOpacity: 0.15,\n    shadowRadius: 6,\n    elevation: 4,\n  },\n  donateButtonIconLarge: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    backgroundColor: 'rgba(255, 255, 255, 0.2)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 16,\n  },\n  donateButtonTitleLarge: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.background,\n    marginBottom: 3,\n    fontFamily: theme.fonts?.header?.fontFamily,\n  },\n  donateButtonSubtitleLarge: {\n    fontSize: 14,\n    color: theme.colors.background,\n    opacity: 0.9,\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n\n  // Modal styles\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 16,\n  },\n  modalContent: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 12,\n    width: '100%',\n    maxWidth: 400,\n    maxHeight: '90%',\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    padding: 20,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  modalTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: theme.colors.text,\n    fontFamily: theme.fonts?.header?.fontFamily,\n  },\n  modalCloseButton: {\n    width: 32,\n    height: 32,\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 16,\n    backgroundColor: theme.colors.background,\n  },\n  modalDescription: {\n    fontSize: 16,\n    color: theme.colors.text,\n    lineHeight: 24,\n    padding: 20,\n    paddingBottom: 10,\n    textAlign: 'center',\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n\n  // Donation options styles\n  donationOptionsContainer: {\n    padding: 20,\n    paddingTop: 10,\n    gap: 12,\n  },\n  donationOption: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.background,\n    padding: 16,\n    borderRadius: 12,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  disabledOption: {\n    opacity: 0.6,\n    backgroundColor: theme.colors.surface,\n  },\n  donationOptionIcon: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    backgroundColor: theme.colors.primary + '10',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 16,\n  },\n  donationOptionContent: {\n    flex: 1,\n  },\n  donationOptionTitle: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 4,\n    fontFamily: theme.fonts?.header?.fontFamily,\n  },\n  donationOptionSubtitle: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n  disabledText: {\n    color: theme.colors.placeHolderText,\n  },\n  comingSoonBadge: {\n    backgroundColor: theme.colors.warning + '20',\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 12,\n    marginLeft: 8,\n  },\n  comingSoonText: {\n    fontSize: 12,\n    fontWeight: '500',\n    color: theme.colors.warning,\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n\n  // Modal footer styles\n  modalFooter: {\n    padding: 20,\n    paddingTop: 10,\n    borderTopWidth: 1,\n    borderTopColor: theme.colors.border,\n  },\n  modalFooterText: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n    textAlign: 'center',\n    lineHeight: 20,\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n});\n\nexport default SupportButton; ","import React, { useState, useEffect, useContext } from 'react';\nimport { View, Text, TextInput, TouchableOpacity, StyleSheet, Image, Modal, Alert, ScrollView, ActivityIndicator, Platform, Keyboard } from 'react-native';\nimport { MaterialCommunityIcons, FontAwesome } from '@expo/vector-icons';\nimport { theme } from '../../styles/theme';\nimport * as Location from 'expo-location';\nimport * as ImagePicker from 'expo-image-picker';\nimport { AuthContext, debugLog } from '../../context/AuthContext';\nimport { updateProfileInfo, uploadProfilePicture } from '../../api/API';\nimport { useToast } from '../../components/ToastProvider';\nimport { geocodeAddressGraceful } from '../../utils/geocoding';\nimport AddressAutocomplete from '../AddressAutocomplete';\nimport axios from 'axios';\nimport { API_BASE_URL, getMediaUrl } from '../../config/config';\nimport ProfilePhotoCropper from './ProfilePhotoCropper';\nimport { processImageWithCrop, prepareImageForUpload } from '../../utils/imageCropUtils';\nimport SupportButton from '../SupportButton';\nimport { sanitizeInput, validateEmail, validateName } from '../../validation/validation';\n\nconst FACILITY_PRESETS = [\n  { id: 'fenced_yard', icon: 'fence', title: 'Fenced Yard', description: 'Secure outdoor space for pets' },\n  { id: 'pet_door', icon: 'door', title: 'Pet Door', description: 'Easy access to outdoor areas' },\n  { id: 'air_conditioning', icon: 'air-conditioner', title: 'Climate Control', description: 'Temperature controlled environment' },\n  { id: 'security_cameras', icon: 'cctv', title: 'Security Cameras', description: '24/7 monitoring capability' },\n  { id: 'separate_room', icon: 'door-closed', title: 'Separate Pet Room', description: 'Dedicated space for pets' },\n  { id: 'pet_gates', icon: 'gate', title: 'Pet Gates', description: 'Indoor barriers for pet safety' },\n  { id: 'pool', icon: 'pool', title: 'Pool', description: 'Swimming area (with safety features)' },\n  { id: 'cleaning_station', icon: 'shower-head', title: 'Pet Cleaning Station', description: 'Dedicated pet washing area' },\n  { id: 'first_aid', icon: 'medical-bag', title: 'Pet First Aid Kit', description: 'Emergency medical supplies' },\n  { id: 'food_storage', icon: 'food-variant', title: 'Pet Food Storage', description: 'Dedicated food storage area' },\n];\n\nconst INSURANCE_OPTIONS = [\n  { id: 'none', label: 'No Insurance', description: 'I do not have insurance' },\n  { id: 'petplan', label: 'PetPlan Insurance', description: 'Comprehensive pet insurance coverage' },\n  { id: 'trupanion', label: 'Trupanion', description: 'Lifetime coverage for your pets' },\n  { id: 'custom', label: 'Custom Insurance', description: 'Upload my own insurance card' }\n];\n\n// Legacy AddressForm - keeping for reference but not used\nconst AddressForm = ({ address, setAddress }) => (\n  <View style={styles.addressForm}>\n    <TextInput\n      style={styles.addressInput}\n      value={address.street}\n      onChangeText={(text) => setAddress(prev => ({ ...prev, street: text }))}\n      placeholder=\"Street Address\"\n    />\n    <TextInput\n      style={styles.addressInput}\n      value={address.apartment}\n      onChangeText={(text) => setAddress(prev => ({ ...prev, apartment: text }))}\n      placeholder=\"Apartment/Suite (optional)\"\n    />\n    <View style={styles.addressRow}>\n      <TextInput\n        style={[styles.addressInput, { flex: 2 }]}\n        value={address.city}\n        onChangeText={(text) => setAddress(prev => ({ ...prev, city: text }))}\n        placeholder=\"City\"\n      />\n      <TextInput\n        style={[styles.addressInput, { flex: 1 }]}\n        value={address.state || 'Colorado'}\n        onChangeText={(text) => setAddress(prev => ({ ...prev, state: text }))}\n        placeholder=\"State\"\n      />\n    </View>\n    <TextInput\n      style={styles.addressInput}\n      value={address.zip}\n      onChangeText={(text) => setAddress(prev => ({ ...prev, zip: text }))}\n      placeholder=\"ZIP Code\"\n      keyboardType=\"numeric\"\n    />\n  </View>\n);\n\nconst EditOverlay = ({ visible, onClose, title, value, onSave, isLocation, isMultiline, isProfessional, isInsurance, selectedInsurance = { type: 'none', card: null }, onInsuranceChange }) => {\n  const [localValue, setLocalValue] = useState('');\n  const [localInsurance, setLocalInsurance] = useState(selectedInsurance);\n  const [isLoadingLocation, setIsLoadingLocation] = useState(false);\n  const [selectedAddress, setSelectedAddress] = useState(null);\n  const [currentAddressValue, setCurrentAddressValue] = useState('');\n  const [insuranceStep, setInsuranceStep] = useState(1); // 1: Choose type, 2: Upload/Select insurance\n  const [insuranceType, setInsuranceType] = useState(null); // 'own' or 'platform'\n  const [validationError, setValidationError] = useState('');\n\n  useEffect(() => {\n    if (visible) {\n      if (isInsurance) {\n        setLocalInsurance(selectedInsurance);\n        setInsuranceStep(1);\n        setInsuranceType(null);\n      } else if (isLocation) {\n        // Initialize address autocomplete with current value\n        setCurrentAddressValue(value || '');\n        setSelectedAddress(null);\n      } else {\n        setLocalValue(value || '');\n      }\n      // Clear any validation errors when modal opens\n      setValidationError('');\n    }\n  }, [visible]); // Only depend on visibility changing - nothing else\n\n  const handleTextInputChange = (text) => {\n    debugLog('MBA1234', 'Profile text input change:', { title, text });\n    \n    // Don't apply real-time sanitization during typing - this interferes with user experience\n    // Only block extremely dangerous content in real-time\n    const hasScriptTags = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi.test(text);\n    const hasSqlInjection = /\\b(SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|EXEC|UNION|SCRIPT|JAVASCRIPT|VBSCRIPT)\\b/gi.test(text);\n    \n    if (hasScriptTags || hasSqlInjection) {\n      debugLog('MBA1234', 'Dangerous content detected and blocked in real-time:', text);\n      setValidationError('Invalid content detected in input');\n      return;\n    }\n    \n    // Determine the input type based on the title for validation (not sanitization)\n    let inputType = 'general';\n    let maxLength = 1000;\n    \n    if (title.toLowerCase().includes('name')) {\n      inputType = 'name';\n      maxLength = 50;\n    } else if (title.toLowerCase().includes('email')) {\n      inputType = 'email';\n      maxLength = 254;\n    } else if (title.toLowerCase().includes('bio') || title.toLowerCase().includes('about')) {\n      inputType = 'description';\n      maxLength = isMultiline ? 1000 : 500;\n    }\n    \n    // Perform field-specific validation on the original text (not sanitized)\n    if (title.toLowerCase().includes('email') && text.length > 0) {\n      // For email, we can validate format without sanitizing during typing\n      const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n      if (!emailRegex.test(text)) {\n        setValidationError('Please enter a valid email address');\n      } else {\n        setValidationError('');\n      }\n    } else if (title.toLowerCase().includes('name') && text.length > 0) {\n      // For names, check basic requirements without removing content\n      if (text.length < 2) {\n        setValidationError('Name must be at least 2 characters long');\n      } else {\n        setValidationError('');\n      }\n    } else if ((title.toLowerCase().includes('bio') || title.toLowerCase().includes('about')) && text.length > 0) {\n      if (text.length < 10) {\n        setValidationError('Description must be at least 10 characters long');\n      } else if (text.length > maxLength) {\n        setValidationError(`Description must be no more than ${maxLength} characters long`);\n      } else {\n        setValidationError('');\n      }\n    } else {\n      setValidationError('');\n    }\n    \n    // Set the original text (not sanitized) - sanitization will happen at save time\n    setLocalValue(text);\n  };\n\n  const handleSave = () => {\n    // Check for validation errors before saving\n    if (validationError) {\n      debugLog('MBA1234', 'Cannot save due to validation error:', validationError);\n      Alert.alert('Validation Error', validationError);\n      return;\n    }\n    \n    // Additional validation for required fields\n    if (!isInsurance && !isLocation && localValue.trim() === '') {\n      Alert.alert('Required Field', 'This field cannot be empty.');\n      return;\n    }\n    \n    if (isInsurance) {\n      onSave(localInsurance);\n    } else if (isLocation) {\n      if (!selectedAddress) {\n        // Show error - address must be validated\n        Alert.alert('Invalid Address', 'Please select a valid address from the suggestions.');\n        return;\n      }\n      // Pass the selected address object with all components and coordinates\n      debugLog('MBA8901', 'Saving location with selected address:', selectedAddress);\n      onSave(selectedAddress);\n    } else {\n      // Sanitize the value before saving based on field type\n      let inputType = 'general';\n      let maxLength = 1000;\n      \n      if (title.toLowerCase().includes('name')) {\n        inputType = 'name';\n        maxLength = 50;\n      } else if (title.toLowerCase().includes('email')) {\n        inputType = 'email';\n        maxLength = 254;\n      } else if (title.toLowerCase().includes('bio') || title.toLowerCase().includes('about')) {\n        inputType = 'description';\n        maxLength = isMultiline ? 1000 : 500;\n      }\n      \n      const sanitizedValue = sanitizeInput(localValue, inputType, { maxLength });\n      \n      // Final validation before saving\n      debugLog('MBA1234', 'Saving profile field with sanitized value:', {\n        original: localValue,\n        sanitized: sanitizedValue,\n        type: inputType\n      });\n      onSave(sanitizedValue);\n    }\n    onClose();\n  };\n\n  const handleInsuranceTypeSelect = (type) => {\n    setInsuranceType(type);\n    setInsuranceStep(2);\n  };\n\n  const handleInsuranceChange = async (insuranceType) => {\n    if (insuranceType === 'custom') {\n      const result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: [16, 9],\n        quality: 1,\n      });\n\n      if (!result.canceled) {\n        const newInsurance = { type: 'custom', card: result.assets[0].uri };\n        setLocalInsurance(newInsurance);\n        onInsuranceChange(insuranceType);\n      }\n    } else {\n      const newInsurance = { type: insuranceType, card: null };\n      setLocalInsurance(newInsurance);\n      onInsuranceChange(insuranceType);\n    }\n  };\n\n  const handleGetCurrentLocation = async () => {\n    setIsLoadingLocation(true);\n    try {\n      let { status } = await Location.requestForegroundPermissionsAsync();\n      if (status !== 'granted') {\n        if (Platform.OS === 'web') {\n          Alert.alert('Permission denied: Please enable location services to use this feature.');\n        }\n        return;\n      }\n      \n      const location = await Location.getCurrentPositionAsync({});\n      const { latitude, longitude } = location.coords;\n      \n      // Get the address from coordinates\n      const [address] = await Location.reverseGeocodeAsync({ latitude, longitude });\n      \n      if (address) {\n        setAddressForm({\n          street: address.street || '',\n          apartment: '',\n          city: address.city || '',\n          state: address.region || '',\n          zip: address.postalCode || '',\n          country: address.country || ''\n        });\n      }\n    } catch (error) {\n      Alert.alert('Error', 'Failed to get current location. Please enter address manually.');\n    } finally {\n      setIsLoadingLocation(false);\n    }\n  };\n\n  const renderInsuranceContent = () => {\n    if (insuranceStep === 1) {\n      return (\n        <View style={styles.insuranceStepContent}>\n          <Text style={styles.insuranceStepTitle}>Choose Insurance Type</Text>\n          <TouchableOpacity \n            style={styles.insuranceTypeButton}\n            onPress={() => handleInsuranceTypeSelect('own')}\n          >\n            <MaterialCommunityIcons name=\"file-document\" size={24} color={theme.colors.primary} />\n            <View style={styles.insuranceTypeContent}>\n              <Text style={styles.insuranceTypeTitle}>Use My Own Insurance</Text>\n              <Text style={styles.insuranceTypeDescription}>Upload your existing insurance card</Text>\n            </View>\n          </TouchableOpacity>\n          {/* TODO: Implement after MVP\n           <TouchableOpacity \n            style={styles.insuranceTypeButton}\n            onPress={() => handleInsuranceTypeSelect('platform')}\n          >\n            <MaterialCommunityIcons name=\"shield-check\" size={24} color={theme.colors.primary} />\n            <View style={styles.insuranceTypeContent}>\n              <Text style={styles.insuranceTypeTitle}>Use Platform Insurance</Text>\n              <Text style={styles.insuranceTypeDescription}>Select from our insurance providers</Text>\n            </View>\n          </TouchableOpacity> */}\n        </View>\n      );\n    }\n\n    if (insuranceStep === 2) {\n      if (insuranceType === 'own') {\n        return (\n          <View style={styles.insuranceStepContent}>\n            <Text style={styles.insuranceStepTitle}>Upload Insurance Card</Text>\n            <TouchableOpacity \n              style={styles.uploadButton}\n              onPress={() => handleInsuranceChange('custom')}\n            >\n              <MaterialCommunityIcons name=\"file-upload\" size={24} color={theme.colors.primary} />\n              <Text style={styles.uploadText}>Upload Insurance Card</Text>\n            </TouchableOpacity>\n            {localInsurance.type === 'custom' && localInsurance.card && (\n              <View style={styles.customInsuranceCard}>\n                <Image \n                  source={{ uri: localInsurance.card }} \n                  style={styles.insuranceCardImage}\n                />\n                <Text style={styles.insuranceCardText}>Custom Insurance Card</Text>\n              </View>\n            )}\n          </View>\n        );\n      }\n\n      return (\n        <View style={styles.insuranceStepContent}>\n          <Text style={styles.insuranceStepTitle}>Select Insurance Provider</Text>\n          {INSURANCE_OPTIONS.filter(opt => opt.id !== 'custom').map((option) => (\n            <TouchableOpacity\n              key={option.id}\n              style={[\n                styles.insuranceOption,\n                localInsurance.type === option.id && styles.selectedInsuranceOption\n              ]}\n              onPress={() => {\n                const newInsurance = { type: option.id, card: null };\n                setLocalInsurance(newInsurance);\n                onInsuranceChange(option.id);\n              }}\n            >\n              <MaterialCommunityIcons \n                name={option.id === 'none' ? 'shield-off' : 'shield-check'} \n                size={24} \n                color={theme.colors.primary} \n              />\n              <View style={styles.insuranceOptionContent}>\n                <Text style={styles.insuranceOptionTitle}>{option.label}</Text>\n                <Text style={styles.insuranceOptionDescription}>{option.description}</Text>\n              </View>\n            </TouchableOpacity>\n          ))}\n        </View>\n      );\n    }\n\n    return null;\n  };\n\n  return (\n    <Modal\n      visible={visible}\n      transparent\n      animationType=\"fade\"\n      onRequestClose={onClose}\n    >\n      <View style={styles.modalOverlay}>\n        <View style={[\n          styles.modalContent,\n          isInsurance && styles.insuranceModalContent\n        ]}>\n          <View style={styles.modalHeader}>\n            {isInsurance && insuranceStep === 2 && (\n              <TouchableOpacity \n                style={styles.backButton}\n                onPress={() => setInsuranceStep(1)}\n              >\n                <MaterialCommunityIcons name=\"arrow-left\" size={24} color={theme.colors.primary} />\n                <Text style={styles.backButtonText}>Back</Text>\n              </TouchableOpacity>\n            )}\n            <Text style={[\n              styles.modalTitle,\n              isInsurance && insuranceStep === 2 && styles.modalTitleCentered\n            ]}>{title}</Text>\n          </View>\n          \n          {isInsurance ? renderInsuranceContent() : (\n            isLocation ? (\n              <View style={styles.locationContent}>\n                <Text style={styles.addressInstructions}>\n                Enter your complete street address (e.g., \"123 Main Street\"). Only valid street addresses will appear in suggestions.\n                </Text>\n                <AddressAutocomplete\n                  value={currentAddressValue}\n                  onAddressSelect={(address) => {\n                    setSelectedAddress(address);\n                    setCurrentAddressValue(address.formatted_address);\n                    debugLog('MBA8901', 'Address selected in modal:', address);\n                  }}\n                  placeholder=\"Enter address in Colorado Springs...\"\n                  style={styles.addressAutocomplete}\n                />\n                {selectedAddress && (\n                  <View style={styles.selectedAddressInfo}>\n                    <MaterialCommunityIcons \n                      name=\"check-circle\" \n                      size={16} \n                      color={theme.colors.mainColors.tertiary} \n                    />\n                    <Text style={styles.selectedAddressText}>\n                      Address validated and ready to save\n                    </Text>\n                  </View>\n                )}\n              </View>\n            ) : (\n              <View>\n                <TextInput\n                  style={[\n                    styles.modalInput, \n                    isMultiline && styles.multilineInput,\n                    validationError ? styles.modalInputError : null\n                  ]}\n                  value={localValue}\n                  onChangeText={handleTextInputChange}\n                  multiline={isMultiline}\n                  numberOfLines={isMultiline ? 4 : 1}\n                  autoFocus\n                  maxLength={\n                    title.toLowerCase().includes('name') ? 50 :\n                    title.toLowerCase().includes('email') ? 254 :\n                    (title.toLowerCase().includes('bio') || title.toLowerCase().includes('about')) ? 1000 :\n                    500\n                  }\n                />\n                {validationError ? (\n                  <Text style={styles.modalInputErrorText}>{validationError}</Text>\n                ) : null}\n                {(title.toLowerCase().includes('bio') || title.toLowerCase().includes('about')) && (\n                  <Text style={styles.modalInputCharacterCount}>\n                    {localValue.length}/{isMultiline ? 1000 : 500}\n                  </Text>\n                )}\n              </View>\n            )\n          )}\n          \n          <View style={[styles.modalButtons, { zIndex: -1 }]}>\n            <TouchableOpacity style={styles.modalCancelButton} onPress={onClose}>\n              <Text style={styles.modalCancelText}>Cancel</Text>\n            </TouchableOpacity>\n            <TouchableOpacity \n              style={[\n                styles.modalSaveButton,\n                (isLocation && !selectedAddress) || validationError ? styles.modalSaveButtonDisabled : null\n              ]} \n              onPress={handleSave}\n              disabled={(isLocation && !selectedAddress) || validationError}\n            >\n              <Text style={styles.modalSaveText}>Save</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\n// Add new modal components after EditOverlay\nconst VerificationModal = ({ visible, onClose, title, type, onProceed }) => {\n  const getModalContent = () => {\n    switch (type) {\n      case 'background_check':\n        return {\n          icon: 'shield-check',\n          description: 'Get background checked to increase trust with pet owners and unlock premium features.',\n          steps: [\n            'Contact our support team via the contact button below',\n            'We\\'ll send you a secure link to our background check partner',\n            'Complete the background check process (typically 2-3 business days)',\n            'Once verified, your profile will display a \"Background Verified\" badge'\n          ],\n          benefits: [\n            'Increased booking requests',\n            'Higher trust rating from pet owners',\n            'Access to premium client matches',\n            'Priority listing in search results'\n          ]\n        };\n      case 'insurance':\n        return {\n          icon: 'shield-account',\n          description: 'Get insured to provide additional protection for you and the pets you care for.',\n          steps: [\n            'Contact our support team via the contact button below',\n            'We\\'ll connect you with our insurance partner or have you provide proof of insurance',\n            'Complete the insurance application process or we will alert you when we have verified your private insurance',\n            'Once approved, your profile will display an \"Insured\" badge'\n          ],\n          benefits: [\n            'Protection against accidents and liability',\n            'Increased confidence from pet owners',\n            'Access to higher-value bookings',\n            'Professional credibility enhancement'\n          ]\n        };\n      case 'elite_pro':\n        return {\n          icon: 'star-circle',\n          description: 'Congratulations! You\\'ve earned Elite Pro status with 5+ bookings and a 5-star average rating.',\n          steps: [\n            'You\\'ve completed 5+ successful bookings',\n            'You\\'ve maintained a 5-star average rating',\n            'Your Elite Pro badge is now active on your profile'\n          ],\n          benefits: [\n            'Exclusive Elite Pro badge on your profile',\n            'Priority placement in search results',\n            'Access to premium booking opportunities',\n            'Special recognition in the community'\n          ]\n        };\n      default:\n        return { icon: 'help', description: '', steps: [], benefits: [] };\n    }\n  };\n\n  const content = getModalContent();\n\n  return (\n    <Modal\n      visible={visible}\n      transparent\n      animationType=\"fade\"\n      onRequestClose={onClose}\n    >\n      <View style={styles.verificationModalOverlay}>\n        <View style={styles.verificationModalContent}>\n          <View style={styles.verificationModalHeader}>\n            <View style={styles.verificationIconContainer}>\n              <MaterialCommunityIcons \n                name={content.icon} \n                size={40} \n                color={theme.colors.primary} \n              />\n            </View>\n            <Text style={styles.verificationModalTitle}>{title}</Text>\n            <TouchableOpacity \n              style={styles.verificationModalClose}\n              onPress={onClose}\n            >\n              <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.text} />\n            </TouchableOpacity>\n          </View>\n          \n          <ScrollView style={styles.verificationModalScroll}>\n            <Text style={styles.verificationDescription}>\n              {content.description}\n            </Text>\n            \n                         <View style={styles.verificationModalSection}>\n               <Text style={styles.verificationModalSectionTitle}>Process Steps:</Text>\n              {content.steps.map((step, index) => (\n                <View key={index} style={styles.verificationStep}>\n                  <View style={styles.verificationStepNumber}>\n                    <Text style={styles.verificationStepNumberText}>{index + 1}</Text>\n                  </View>\n                  <Text style={styles.verificationStepText}>{step}</Text>\n                </View>\n              ))}\n            </View>\n\n                         <View style={styles.verificationModalSection}>\n               <Text style={styles.verificationModalSectionTitle}>Benefits:</Text>\n              {content.benefits.map((benefit, index) => (\n                <View key={index} style={styles.verificationBenefit}>\n                  <MaterialCommunityIcons \n                    name=\"check-circle\" \n                    size={16} \n                    color={theme.colors.mainColors.tertiary} \n                  />\n                  <Text style={styles.verificationBenefitText}>{benefit}</Text>\n                </View>\n              ))}\n            </View>\n          </ScrollView>\n\n          <View style={styles.verificationModalButtons}>\n            <TouchableOpacity \n              style={styles.verificationModalCancelButton} \n              onPress={onClose}\n            >\n              <Text style={styles.verificationModalCancelText}>Cancel</Text>\n            </TouchableOpacity>\n            <TouchableOpacity \n              style={styles.verificationModalProceedButton} \n              onPress={onProceed}\n            >\n              <Text style={styles.verificationModalProceedText}>\n                {type === 'elite_pro' ? 'Got It!' : 'Contact Support'}\n              </Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\nconst ProfileInfoTab = ({\n  profilePhoto,\n  email,\n  phone,\n  age,\n  address,\n  city,\n  state,\n  zip,\n  country,\n  coordinates,\n  bio,\n  about_me,\n  emergencyContact,\n  authorizedHouseholdMembers,\n  editMode,\n  toggleEditMode,\n  onChangeText,\n  pickImage,\n  setHasUnsavedChanges,\n  onSaveComplete,\n  isMobile,\n  rating,\n  reviews,\n  role,\n  isProfessional,\n  insurance = { type: 'none', card: null },\n  onNavigateToTab,\n  name,\n  navigation,\n}) => {\n  const { name: authName } = useContext(AuthContext);\n  \n  // Track direct user edits\n  const [hasEdits, setHasEdits] = useState(false);\n  const [editingField, setEditingField] = useState(null);\n  const [editValue, setEditValue] = useState('');\n  const [portfolioPhotos, setPortfolioPhotos] = useState([]);\n  const [selectedInsurance, setSelectedInsurance] = useState(insurance);\n  const [isSaving, setIsSaving] = useState(false);\n  \n  // Add state for verification modals\n  const [showVerificationModal, setShowVerificationModal] = useState(false);\n  const [verificationModalType, setVerificationModalType] = useState(null);\n  \n  // Add state for photo cropper\n  const [selectedPhoto, setSelectedPhoto] = useState(null);\n  const [showCropper, setShowCropper] = useState(false);\n  \n  // Add state to track edited values that should display in the UI\n  const [displayValues, setDisplayValues] = useState({\n    name: name || authName || \"Your Name\",\n    email: email || \"\",\n    bio: isProfessional ? bio : about_me,\n    location: `${address || ''}${city ? `, ${city}` : ''}${state ? `, ${state}` : ''}`,\n  });\n  \n  // Add profileData state to store all profile-related data including profile photo\n  const [profileData, setProfileData] = useState({\n    name: name || authName || \"Your Name\",\n    email: email || \"\",\n    bio: isProfessional ? bio : about_me,\n    about_me: about_me || \"\",\n    profile_photo: profilePhoto || null,\n    address: address || \"\",\n    city: city || \"\",\n    state: state || \"\",\n    zip: zip || \"\",\n    coordinates: coordinates || null,\n  });\n  \n  const showToast = useToast();\n  \n  // Track original values to detect changes\n  const [originalValues, setOriginalValues] = useState({\n    name: '',\n    email: '',\n    bio: '',\n    location: '',\n    address: '',\n    apartment: '',\n    city: '',\n    state: '',\n    zip: '',\n    country: 'USA',\n    insurance: { type: 'none', card: null }\n  });\n\n  // Make sure parent component is notified about unsaved changes\n  useEffect(() => {\n    if (setHasUnsavedChanges) {\n      debugLog('MBA230uvj0834h9', 'Updating parent component with hasUnsavedChanges:', hasEdits);\n      setHasUnsavedChanges(hasEdits);\n    }\n  }, [hasEdits, setHasUnsavedChanges]);\n  \n  // Update profileData when profilePhoto prop changes\n  useEffect(() => {\n    if (profilePhoto) {\n      debugLog('MBA5080', 'Updating profile photo from props:', profilePhoto);\n      setProfileData(prevData => ({\n        ...prevData,\n        profile_photo: profilePhoto\n      }));\n    }\n  }, [profilePhoto]);\n  \n  // Update the initial useEffect to only run once\n  useEffect(() => {\n    debugLog('MBA230uvj0834h9', 'ProfileInfoTab mounted with props:', { \n      propName: name,\n      authName, \n      email, \n      address, \n      bio, \n      about_me, \n      profilePhoto,\n      isProfessional\n    });\n    \n    // Use formatted address if available, otherwise fall back to constructed address\n    const locationDisplay = coordinates?.formatted_address || \n                           `${address || ''}${city ? `, ${city}` : ''}${state ? `, ${state}` : ''}`;\n    \n    // Initialize display values on mount ONLY\n    setDisplayValues({\n      name: name || authName || \"Your Name\",\n      email: email || \"\",\n      bio: isProfessional ? bio : about_me,\n      location: locationDisplay\n    });\n    \n    // Initialize profileData with all props\n    setProfileData(prevData => ({\n      ...prevData,\n      profile_photo: profilePhoto || prevData.profile_photo,\n      name: name || prevData.name,\n      email: email || prevData.email,\n      bio: isProfessional ? (bio || prevData.bio) : (about_me || prevData.bio),\n      about_me: about_me || prevData.about_me,\n      address: address || prevData.address,\n      city: city || prevData.city,\n      state: state || prevData.state,\n      zip: zip || prevData.zip,\n      coordinates: coordinates || prevData.coordinates,\n    }));\n  }, []); // Empty dependency array - only run on mount\n\n  // Add effect to update bio when isProfessional changes\n  useEffect(() => {\n    // Update the bio/about_me when the role changes\n    setDisplayValues(prev => ({\n      ...prev,\n      bio: isProfessional ? bio : about_me\n    }));\n    \n    debugLog('MBA230uvj0834h9', 'Role changed - updating bio/about_me:', { \n      isProfessional, \n      bio, \n      about_me \n    });\n  }, [isProfessional, bio, about_me]);\n  \n  // Simplify hasFieldChanged to be more direct\n  const hasFieldChanged = (field, value) => {\n    // For insurance, we need to do a deep comparison\n    if (field === 'insurance') {\n      return JSON.stringify(value) !== JSON.stringify(originalValues.insurance);\n    }\n    \n    // For location, we can use a simpler comparison\n    if (field === 'location') {\n      // If it's an object, check all address fields\n      if (typeof value === 'object') {\n        // Handle AddressAutocomplete format (with components)\n        const newAddress = value.components?.street || value.street || value.address || '';\n        const newApartment = value.components?.apartment || value.apartment || '';\n        const newCity = value.components?.city || value.city || '';\n        const newState = value.components?.state || value.state || 'Colorado';\n        const newZip = value.components?.zip || value.zip || '';\n        \n        debugLog('MBA12345', 'Checking location changes:', {\n          originalAddress: originalValues.address,\n          newAddress: newAddress,\n          originalApartment: originalValues.apartment,\n          newApartment: newApartment,\n          originalCity: originalValues.city,\n          newCity: newCity,\n          originalState: originalValues.state,\n          newState: newState,\n          originalZip: originalValues.zip,\n          newZip: newZip\n        });\n        \n        // Check all fields that could have changed\n        const hasChanges = newAddress !== originalValues.address ||\n                          newApartment !== originalValues.apartment ||\n                          newCity !== originalValues.city ||\n                          newState !== originalValues.state ||\n                          newZip !== originalValues.zip;\n        \n        debugLog('MBA12345', `Location has changes: ${hasChanges}`);\n        return hasChanges;\n      }\n    }\n    \n    // For other fields, direct comparison\n    return value !== originalValues[field];\n  };\n\n  // Handle edit field\n  const handleEdit = (field, currentValue) => {\n    debugLog('MBA230uvj0834h9', `Edit ${field}:`, currentValue);\n    \n    // For location field, pass the current display value as a string for the modal\n    if (field === 'location') {\n      // Use the current display value (formatted address or constructed address)\n      setEditValue(currentValue || '');\n    } else {\n      setEditValue(currentValue);\n    }\n    \n    // This triggers the modal to open\n    setEditingField(field);\n    \n    // Mark that we're starting an edit\n    setHasEdits(true);\n    \n    // Notify parent component\n    if (setHasUnsavedChanges) {\n      setHasUnsavedChanges(true);\n    }\n  };\n\n  // Update extractAddressComponents to handle address objects correctly\n  const extractAddressComponents = async (locationData) => {\n    let addressComponents = {};\n    \n    // If we're getting a validated address object from AddressAutocomplete\n    if (locationData && typeof locationData === 'object' && 'components' in locationData) {\n      debugLog('MBA8901', 'Processing validated address from autocomplete:', locationData);\n      \n      addressComponents = {\n        address: locationData.components.street || '',\n        apartment: locationData.components.apartment || '',\n        city: locationData.components.city || '',\n        state: locationData.components.state || 'Colorado',\n        zip: locationData.components.zip || ''\n      };\n      \n      // Coordinates are already included from the autocomplete\n      if (locationData.coordinates) {\n        addressComponents.coordinates = locationData.coordinates;\n        debugLog('MBA8901', 'Using coordinates from validated address:', locationData.coordinates);\n      }\n    }\n    // Legacy: If we're getting an addressForm object from our old modal\n    else if (locationData && typeof locationData === 'object') {\n      // If it's an address form with street property\n      if ('street' in locationData) {\n        addressComponents = {\n          address: locationData.street || '',\n          apartment: locationData.apartment || '',\n          city: locationData.city || '',\n          state: locationData.state || 'Colorado',\n          zip: locationData.zip || ''\n        };\n      }\n      // If it's our own object with address property\n      else if ('address' in locationData) {\n        addressComponents = {\n          address: locationData.address || '',\n          apartment: locationData.apartment || '',\n          city: locationData.city || '',\n          state: locationData.state || 'Colorado',\n          zip: locationData.zip || ''\n        };\n      }\n      \n      // Only try to geocode if we don't already have coordinates\n      if (!addressComponents.coordinates && addressComponents.address && addressComponents.city && addressComponents.state) {\n        debugLog('MBA7890', 'Attempting to geocode legacy address:', addressComponents);\n        \n        const coordinates = await geocodeAddressGraceful({\n          street: addressComponents.address,\n          apartment: addressComponents.apartment,\n          city: addressComponents.city,\n          state: addressComponents.state,\n          zip: addressComponents.zip\n        });\n\n        if (coordinates) {\n          debugLog('MBA7890', 'Geocoding successful, adding coordinates:', coordinates);\n          addressComponents.coordinates = coordinates;\n        } else {\n          debugLog('MBA7890', 'Geocoding failed, saving address without coordinates');\n        }\n      }\n    }\n    // If we're getting a string (legacy format)\n    else if (typeof locationData === 'string') {\n      const components = locationData.split(',').map(part => part.trim());\n      addressComponents = {\n        address: components[0] || '',\n        apartment: '',\n        city: components[1] || '',\n        state: components[2] || 'Colorado',\n        zip: components[3] || ''\n      };\n      \n      // Try to geocode string addresses\n      if (addressComponents.address && addressComponents.city && addressComponents.state) {\n        const coordinates = await geocodeAddressGraceful({\n          street: addressComponents.address,\n          apartment: addressComponents.apartment,\n          city: addressComponents.city,\n          state: addressComponents.state,\n          zip: addressComponents.zip\n        });\n\n        if (coordinates) {\n          addressComponents.coordinates = coordinates;\n        }\n      }\n    }\n    // Default empty object if all else fails\n    else {\n      addressComponents = {\n        address: '',\n        apartment: '',\n        city: '',\n        state: 'Colorado',\n        zip: ''\n      };\n    }\n    \n    return addressComponents;\n  };\n\n  // Set original values when props change\n  useEffect(() => {\n    // Only set original values once on component mount\n    const locationDisplay = `${city || ''}${state ? `, ${state}` : ''}`;\n    \n    setOriginalValues({\n      name: name || authName || \"Your Name\",\n      email: email || \"\",\n      bio: isProfessional ? bio : about_me,\n      location: locationDisplay,\n      address: address || '',\n      apartment: '',\n      city: city || '',\n      state: state || 'Colorado',\n      zip: zip || '',\n      insurance: insurance\n    });\n  }, []); // Empty dependency array - only run once on mount\n  \n  // Simplify the handleSaveField function to avoid state update loops\n  const handleSaveField = async (field, value) => {\n    // Skip if no changes (keep this logic)\n    if (!hasFieldChanged(field, value)) {\n      debugLog('MBA230uvj0834h9', `No changes detected for ${field}, skipping save.`);\n      setEditingField(null);\n      \n      // Reset state since no changes were made\n      setHasEdits(false);\n      if (setHasUnsavedChanges) {\n        setHasUnsavedChanges(false);\n      }\n      return;\n    }\n\n    debugLog('MBA12345', `Changes detected for ${field}, proceeding with save.`, { value });\n    setIsSaving(true);\n    \n    try {\n      let profileData = {};\n      \n      switch (field) {\n        case 'name':\n          profileData = { name: value };\n          break;\n        case 'email':\n          profileData = { email: value };\n          break;\n        case 'bio':\n          // Make it clearer which field we're updating\n          if (isProfessional) {\n            profileData = { bio: value };\n            debugLog('MBA4928', 'Saving professional bio:', value);\n          } else {\n            profileData = { about_me: value };\n            debugLog('MBA4928', 'Saving client about_me:', value);\n          }\n          break;\n        case 'location':\n          debugLog('MBA12345', 'Extracting address components from:', value);\n          const locationComponents = await extractAddressComponents(value);\n          debugLog('MBA12345', 'Extracted components:', locationComponents);\n          \n          profileData = {\n            address: locationComponents.address,\n            apartment: locationComponents.apartment,\n            city: locationComponents.city,\n            state: locationComponents.state,\n            zip: locationComponents.zip\n          };\n\n          // Add coordinates if geocoding was successful\n          if (locationComponents.coordinates) {\n            profileData.coordinates = locationComponents.coordinates;\n            debugLog('MBA7890', 'Including coordinates in profile update:', locationComponents.coordinates);\n          }\n          break;\n        case 'insurance':\n          profileData = { insurance: value };\n          break;\n        default:\n          break;\n      }\n      \n      // Call API to update only the changed field\n      debugLog('MBA4928', `Saving ${field} to backend:`, profileData);\n      const updatedProfile = await updateProfileInfo(profileData);\n      debugLog('MBA4928', `Backend response for ${field}:`, updatedProfile);\n      \n      // Update display values first\n      if (field === 'name') {\n        setDisplayValues({\n          ...displayValues, \n          name: updatedProfile.name || displayValues.name\n        });\n        \n        // Update original values to match the new values from the server\n        setOriginalValues(prevValues => ({\n          ...prevValues,\n          name: updatedProfile.name || prevValues.name\n        }));\n      } else if (field === 'email') {\n        setDisplayValues({\n          ...displayValues, \n          email: updatedProfile.email || displayValues.email\n        });\n        \n        // Update original values\n        setOriginalValues(prevValues => ({\n          ...prevValues,\n          email: updatedProfile.email || prevValues.email\n        }));\n      } else if (field === 'bio') {\n        // Update display values with the correct field from the response\n        if (isProfessional) {\n          setDisplayValues({\n            ...displayValues, \n            bio: updatedProfile.bio || displayValues.bio\n          });\n          \n          // Update original values\n          setOriginalValues(prevValues => ({\n            ...prevValues,\n            bio: updatedProfile.bio || prevValues.bio\n          }));\n        } else {\n          setDisplayValues({\n            ...displayValues, \n            bio: updatedProfile.about_me || displayValues.bio\n          });\n          \n          // Update original values\n          setOriginalValues(prevValues => ({\n            ...prevValues,\n            bio: updatedProfile.about_me || prevValues.bio\n          }));\n        }\n      } else if (field === 'location') {\n        // Use formatted address if available, otherwise construct from components\n        const newLocation = updatedProfile.coordinates?.formatted_address || \n                           `${updatedProfile.address || ''}${updatedProfile.city ? `, ${updatedProfile.city}` : ''}${updatedProfile.state ? `, ${updatedProfile.state}` : ''}`;\n        setDisplayValues({\n          ...displayValues, \n          location: newLocation\n        });\n        \n        // Update original values for all address components\n        setOriginalValues(prevValues => ({\n          ...prevValues,\n          location: newLocation,\n          address: updatedProfile.address || prevValues.address,\n          apartment: updatedProfile.apartment || prevValues.apartment,\n          city: updatedProfile.city || prevValues.city,\n          state: updatedProfile.state || prevValues.state,\n          zip: updatedProfile.zip || prevValues.zip\n        }));\n      } else if (field === 'insurance') {\n        setSelectedInsurance(value);\n        \n        // Update original values\n        setOriginalValues(prevValues => ({\n          ...prevValues,\n          insurance: value\n        }));\n      }\n      \n      // Log the updated original values for debugging\n      debugLog('MBA4928', `Original values updated after save for ${field}`, { \n        originalValues: {\n          ...originalValues,\n          [field]: field === 'location' ? \n            `${updatedProfile.address || ''}${updatedProfile.city ? `, ${updatedProfile.city}` : ''}${updatedProfile.state ? `, ${updatedProfile.state}` : ''}` : \n            updatedProfile[field]\n        }\n      });\n      \n      // Success notification\n      showToast({\n        message: `${field.charAt(0).toUpperCase() + field.slice(1)} updated successfully`,\n        type: 'success',\n        duration: 3000\n      });\n      \n      // Reset state since changes were saved\n      setHasEdits(false);\n      if (setHasUnsavedChanges) {\n        setHasUnsavedChanges(false);\n      }\n      \n      // Notify parent component if needed\n      if (onSaveComplete) {\n        debugLog('MBA3oin4f084', 'Notifying parent component of profile photo update:', updatedProfile.profile_photo);\n        onSaveComplete(updatedProfile);\n      } else {\n        debugLog('MBA3oin4f084', 'No onSaveComplete function provided by parent component');\n      }\n    } catch (error) {\n      debugLog('MBA4928', `Error saving ${field}:`, error);\n      \n      // Show error toast\n      showToast({\n        message: `Failed to update ${field}. Please try again.`,\n        type: 'error',\n        duration: 4000\n      });\n      \n      // Keep edit state if there was an error\n      if (setHasUnsavedChanges) {\n        setHasUnsavedChanges(true);\n      }\n    } finally {\n      setIsSaving(false);\n      setEditingField(null);\n    }\n  };\n\n  // Update handle save to call the new function\n  const handleSave = (value) => {\n    debugLog('MBA4928', `Save ${editingField} to value:`, value);\n    \n    if (editingField === 'insurance') {\n      handleSaveField('insurance', value);\n    } else if (editingField === 'location') {\n      handleSaveField('location', value);\n    } else {\n      // For text fields, update the display value first\n      const newDisplayValues = { ...displayValues };\n      newDisplayValues[editingField] = value;\n      setDisplayValues(newDisplayValues);\n      \n      // Then save to backend\n      handleSaveField(editingField, value);\n    }\n  };\n\n  const location = `${city}${state ? `, ${state}` : ''}`;\n  \n  // Display name (use display values instead of context)\n  const displayName = displayValues.name || \"Your Name\";\n  \n  // Handle profile photo selection and upload\n  const handleProfilePhotoSelection = async () => {\n    try {\n      // Request permissions first if on native platforms\n      if (Platform.OS !== 'web') {\n        const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n        if (status !== 'granted') {\n          debugLog('MBA8080', 'Permission to access media library was denied');\n          showToast({\n            message: 'Permission to access media library was denied',\n            type: 'error',\n            duration: 3000\n          });\n          return;\n        }\n      }\n      \n      // Launch image picker with platform-specific options\n      const result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: false, // Disable built-in editing as we'll use our custom cropper\n        quality: 1,\n        // On web, we need base64 for direct upload\n        base64: Platform.OS === 'web',\n        allowsMultipleSelection: false,\n      });\n      \n      if (!result.canceled && result.assets && result.assets.length > 0) {\n        const selectedAsset = result.assets[0];\n        \n        debugLog('MBA8080', 'Selected profile photo:', {\n          uri: selectedAsset.uri.substring(0, 30) + '...',\n          type: selectedAsset.type || 'image/jpeg',\n          width: selectedAsset.width,\n          height: selectedAsset.height,\n          hasBase64: !!selectedAsset.base64\n        });\n        \n        // Store the selected photo and show the cropper\n        setSelectedPhoto(selectedAsset.uri);\n        setShowCropper(true);\n      }\n    } catch (error) {\n      debugLog('MBA8080', 'Error selecting profile photo:', error);\n      showToast({\n        message: 'Failed to select profile photo. Please try again.',\n        type: 'error',\n        duration: 3000\n      });\n    }\n  };\n  \n  // Handle saving the cropped image\n  const handleSaveCroppedImage = async (imageUri, cropParams) => {\n    try {\n        setIsSaving(true);\n        \n      // Add the current profile photo URL to cropParams for deletion\n      const currentProfilePhotoUrl = profileData.profile_photo || null;\n      const cropParamsWithOldPhoto = {\n        ...cropParams,\n        oldProfilePhotoUrl: currentProfilePhotoUrl\n      };\n      \n      debugLog('MBA8080', 'Processing cropped image with params:', cropParamsWithOldPhoto);\n      debugLog('MBA8080', 'Old profile photo URL for deletion:', currentProfilePhotoUrl);\n      \n      // Process the image with crop parameters\n      const processedImage = await processImageWithCrop(imageUri, cropParamsWithOldPhoto);\n      \n      // Prepare the image data for upload\n      const imageData = prepareImageForUpload(processedImage);\n      \n      let response;\n      \n      // Handle web platform (use JSON with base64)\n      if (imageData.isBase64) {\n        debugLog('MBA8080', 'Uploading as base64 (web platform)');\n        \n        // Send as JSON with oldProfilePhotoUrl\n        response = await axios.post(\n          `${API_BASE_URL}/api/users/v1/upload-profile-picture/`,\n          { \n            image_data: imageData.data,\n            old_profile_photo_url: imageData.oldProfilePhotoUrl\n          }\n        );\n      }\n      // Handle native platforms (use FormData)\n      else {\n        debugLog('MBA8080', 'Uploading as FormData (native platform)');\n        \n        // Send as FormData (already contains old_profile_photo_url)\n        response = await uploadProfilePicture(imageData.data);\n      }\n      \n      // Handle the response\n      debugLog('MBA8080', 'Profile photo upload successful:', response.data);\n        \n      // Update UI with the new photo URL\n      if (response.data && response.data.profile_photo) {\n        const photoUrl = response.data.profile_photo;\n        debugLog('MBA5080', 'Setting profile photo in local state:', photoUrl);\n        debugLog('MBA5080', 'Full photo URL will be:', getMediaUrl(photoUrl));\n        \n        // Update the profile photo in our local state\n        setProfileData(prev => ({\n          ...prev,\n          profile_photo: photoUrl\n        }));\n        \n        // Notify parent component of the change\n        if (onSaveComplete) {\n          debugLog('MBA8080', 'Notifying parent component of profile photo update:', response.data.profile_photo);\n          onSaveComplete({ profile_photo: photoUrl });\n        } else {\n          debugLog('MBA8080', 'No onSaveComplete function provided by parent component');\n        }\n        \n        showToast({\n          message: 'Profile photo updated successfully',\n          type: 'success',\n          duration: 3000\n        });\n      }\n    } catch (uploadError) {\n      debugLog('MBA8080', 'Error uploading profile photo:', uploadError);\n      if (uploadError.response) {\n        debugLog('MBA8080', 'Server error response:', uploadError.response.data);\n      }\n      showToast({\n        message: 'Failed to upload profile photo. Please try again.',\n        type: 'error',\n        duration: 3000\n      });\n    } finally {\n      setIsSaving(false);\n      setShowCropper(false);\n      setSelectedPhoto(null);\n    }\n  };\n  \n  // Simplify the portfolio photo handler\n  const handleAddPortfolioPhoto = async () => {\n    try {\n      const result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: [4, 3],\n        quality: 1,\n      });\n      \n      if (!result.canceled) {\n        setIsSaving(true);\n        \n        // Create form data for photo upload\n        const formData = new FormData();\n        const photoFile = {\n          uri: result.assets[0].uri,\n          type: 'image/jpeg',\n          name: 'portfolio_photo.jpg'\n        };\n        \n        formData.append('portfolio_photo', photoFile);\n        \n        // Upload the photo - don't update state based on response\n        debugLog('MBA4928', 'Uploading portfolio photo');\n        await updateProfileInfo(formData);\n        \n        // Just add to local portfolio photos\n        setPortfolioPhotos([...portfolioPhotos, result.assets[0].uri]);\n        \n        showToast({\n          message: 'Portfolio photo added successfully',\n          type: 'success',\n          duration: 3000\n        });\n      }\n    } catch (error) {\n      debugLog('MBA4928', 'Error adding portfolio photo:', error);\n      showToast({\n        message: 'Failed to add portfolio photo. Please try again.',\n        type: 'error',\n        duration: 4000\n      });\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  // Add verification button handlers\n  const handleVerificationButton = (type) => {\n    debugLog('MBA9901', `Opening verification modal for type: ${type}`);\n    setVerificationModalType(type);\n    setShowVerificationModal(true);\n  };\n\n  const handleVerificationProceed = () => {\n    if (verificationModalType === 'elite_pro') {\n      // Just close the modal for Elite Pro - it's informational\n      setShowVerificationModal(false);\n      setVerificationModalType(null);\n    } else {\n      // Close modal and navigate to ContactUs for background check and insurance\n      setShowVerificationModal(false);\n      setVerificationModalType(null);\n      \n      // Navigate to ContactUs screen\n      if (navigation) {\n        debugLog('MBA9901', 'Navigating to ContactUs screen for verification');\n        navigation.navigate('ContactUs');\n      } else {\n        // Fallback: show toast with instructions if navigation isn't available\n        debugLog('MBA9901', 'No navigation available, showing toast');\n        showToast({\n          message: 'Please contact us at support@crittrcove.com to begin the verification process',\n          type: 'info',\n          duration: 5000\n        });\n      }\n    }\n  };\n\n  // Check if user qualifies for Elite Pro status\n  const checkEliteProStatus = () => {\n    // Mock data for now - in real implementation, this would come from props\n    const totalBookings = reviews?.length || 0;\n    const averageRating = rating || 0;\n    \n    return totalBookings >= 10 && averageRating >= 5.0;\n  };\n\n\n\n  // Render verification and support section\n  const renderVerificationAndSupport = () => {\n    const isElitePro = checkEliteProStatus();\n\n    return (\n      <View style={[styles.section, isMobile && styles.mobileVerificationSection]}>\n        {/* Professional Verification Section */}\n        {isProfessional && (\n          <>\n            <View style={styles.sectionHeader}>\n              <Text style={styles.sectionTitle}>Professional Verification</Text>\n            </View>\n            <Text style={styles.verificationSectionSubtitle}>\n              Enhance your profile with professional credentials\n            </Text>\n            \n            <View style={styles.verificationButtonsContainer}>\n              {/* Background Check Button */}\n              <TouchableOpacity \n                style={styles.verificationButton}\n                onPress={() => handleVerificationButton('background_check')}\n              >\n                <View style={styles.verificationButtonIcon}>\n                  <MaterialCommunityIcons \n                    name=\"shield-check\" \n                    size={24} \n                    color={theme.colors.primary} \n                  />\n                </View>\n                <View style={styles.verificationButtonContent}>\n                  <Text style={styles.verificationButtonTitle}>Background Verified</Text>\n                  <Text style={styles.verificationButtonSubtitle}>Increase client trust</Text>\n                </View>\n                <MaterialCommunityIcons \n                  name=\"chevron-right\" \n                  size={20} \n                  color={theme.colors.text} \n                />\n              </TouchableOpacity>\n\n              {/* Insurance Button */}\n              <TouchableOpacity \n                style={styles.verificationButton}\n                onPress={() => handleVerificationButton('insurance')}\n              >\n                <View style={styles.verificationButtonIcon}>\n                  <MaterialCommunityIcons \n                    name=\"shield-account\" \n                    size={24} \n                    color={theme.colors.primary} \n                  />\n                </View>\n                <View style={styles.verificationButtonContent}>\n                  <Text style={styles.verificationButtonTitle}>Insured Professional</Text>\n                  <Text style={styles.verificationButtonSubtitle}>Additional protection</Text>\n                </View>\n                <MaterialCommunityIcons \n                  name=\"chevron-right\" \n                  size={20} \n                  color={theme.colors.text} \n                />\n              </TouchableOpacity>\n\n              {/* Elite Pro Button */}\n              <TouchableOpacity \n                style={[\n                  styles.verificationButton,\n                  isElitePro && styles.verificationButtonElite\n                ]}\n                onPress={() => handleVerificationButton('elite_pro')}\n                disabled={!isElitePro}\n              >\n                <View style={styles.verificationButtonIcon}>\n                  <MaterialCommunityIcons \n                    name=\"star-circle\" \n                    size={24} \n                    color={isElitePro ? theme.colors.warning : theme.colors.placeHolderText} \n                  />\n                </View>\n                <View style={styles.verificationButtonContent}>\n                  <Text style={[\n                    styles.verificationButtonTitle,\n                    isElitePro && styles.verificationButtonTitleElite\n                  ]}>\n                    Elite Pro Status\n                  </Text>\n                  <Text style={[\n                    styles.verificationButtonSubtitle,\n                    isElitePro && styles.verificationButtonSubtitleElite\n                  ]}>\n                    {isElitePro ? 'Congratulations! You\\'re Elite!' : '10+ bookings, 5-star average rating required'}\n                  </Text>\n                </View>\n                <MaterialCommunityIcons \n                  name={isElitePro ? \"crown\" : \"chevron-right\"} \n                  size={20} \n                  color={isElitePro ? theme.colors.warning : theme.colors.placeHolderText} \n                />\n              </TouchableOpacity>\n            </View>\n          </>\n        )}\n\n        {/* Support Section */}\n        <SupportButton \n          style={[isProfessional && styles.donateSectionWithVerification]}\n          showTitle={!isProfessional}\n        />\n      </View>\n    );\n  };\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.contentWrapper}>\n        <View style={[styles.mainContent, !isMobile && styles.desktopLayout]}>\n          {/* Profile Photo Section */}\n          <View style={[styles.profileSection, !isMobile && styles.profileSectionDesktop]}>\n            <View style={styles.profileCard}>\n              <TouchableOpacity onPress={handleProfilePhotoSelection} style={styles.profilePhotoContainer}>\n                {profileData.profile_photo ? (\n                  <Image \n                    source={{ \n                      uri: getMediaUrl(profileData.profile_photo)\n                    }} \n                    style={styles.profilePhoto}\n                    onError={(e) => {\n                      debugLog('MBA5080', 'Error loading profile photo:', e.nativeEvent.error);\n                      debugLog('MBA5080', 'Profile photo URI:', getMediaUrl(profileData.profile_photo));\n                    }}\n                  />\n                ) : (\n                  <View style={[styles.profilePhoto, styles.profilePhotoPlaceholder]}>\n                    <MaterialCommunityIcons name=\"camera-plus\" size={40} color={theme.colors.placeHolderText} />\n                  </View>\n                )}\n                <View style={styles.cameraButton}>\n                  <MaterialCommunityIcons name=\"camera\" size={20} color={theme.colors.background} />\n                </View>\n              </TouchableOpacity>\n              \n              <View style={styles.nameSection}>\n                <Text style={styles.name}>\n                  {name || authName || 'Your Name'}\n                </Text>\n                  <TouchableOpacity \n                    onPress={() => handleEdit('name', displayValues.name)}\n                  style={styles.editButton}\n                  >\n                  <MaterialCommunityIcons name=\"pencil\" size={24} color={theme.colors.primary} />\n                  </TouchableOpacity>\n                </View>\n              \n              <View style={styles.section}>\n                <View style={styles.sectionTitleContainer}>\n                  <MaterialCommunityIcons\n                    name=\"email-outline\"\n                    size={24}\n                    color={theme.colors.text}\n                  />\n                  <Text style={styles.sectionTitle}>Email</Text>\n                </View>\n                <View style={styles.sectionContent}>\n                  <Text style={styles.sectionText}>\n                    {email || 'Add your email'}\n                  </Text>\n                  <TouchableOpacity \n                    onPress={() => handleEdit('email', displayValues.email)}\n                    style={styles.editButton}\n                  >\n                    <MaterialCommunityIcons name=\"pencil\" size={20} color={theme.colors.primary} />\n                  </TouchableOpacity>\n                </View>\n                  </View>\n              \n              <View style={styles.section}>\n                <View style={styles.sectionTitleContainer}>\n                  <MaterialCommunityIcons\n                    name=\"map-marker-outline\"\n                    size={24}\n                    color={theme.colors.text}\n                  />\n                  <Text style={styles.sectionTitle}>Location</Text>\n                </View>\n                <View style={styles.sectionContent}>\n                  <Text style={styles.sectionText}>\n                    {displayValues.location || 'Add your location'}\n                  </Text>\n                  <TouchableOpacity \n                    onPress={() => handleEdit('location', displayValues.location)}\n                    style={styles.editButton}\n                  >\n                    <MaterialCommunityIcons name=\"pencil\" size={20} color={theme.colors.primary} />\n                  </TouchableOpacity>\n                </View>\n              </View>\n\n              {/* Mobile: Show verification and support section here */}\n              {isMobile && renderVerificationAndSupport()}\n            </View>\n          </View>\n\n          {/* Right Side Sections */}\n          <View style={[styles.sectionsContainer, { paddingBottom: isMobile ? 150 : 0 }, !isMobile && styles.sectionsContainerDesktop]}>\n            {/* About Me Section */}\n            <View style={[styles.section, { marginBottom: isMobile ? 0 : 16 }]}>\n              <View style={styles.sectionHeader}>\n                <Text style={styles.sectionTitle}>{isProfessional ? 'Professional Bio' : 'About Me'}</Text>\n                <TouchableOpacity \n                  style={styles.editButton}\n                  onPress={() => handleEdit('bio', displayValues.bio)}\n                >\n                  <Text style={styles.editButtonText}>Edit {isProfessional ? 'Bio' : 'About Me'}</Text>\n                </TouchableOpacity>\n              </View>\n              <Text style={styles.bioText}>\n                {displayValues.bio || 'Tell us about yourself...'}\n              </Text>\n            </View>\n\n            {/* Desktop: Show verification and support section here */}\n            {!isMobile && renderVerificationAndSupport()}\n\n            {/* Show either Home & Facilities (for owners) or Insurance (for professionals) */}\n            {/* TODO: UNCOMMONT THIS SECTION after mvp launch and implementation of facilities and insurance */}\n            {/* {isProfessional ? renderInsuranceSection() : renderFacilitiesSection()} */}\n\n            {/* TODO: UNCOMMONT THIS SECTION\n            Portfolio Photos Section - comment this out for now\n            <View style={styles.section}>\n              <View style={styles.sectionHeader}>\n                <Text style={styles.sectionTitle}>Portfolio Photos</Text>\n                <TouchableOpacity \n                  style={styles.addPhotoButton}\n                  onPress={handleAddPortfolioPhoto}\n                >\n                  <MaterialCommunityIcons name=\"plus\" size={20} color={theme.colors.background} />\n                  <Text style={styles.addPhotoText}>Add Photos</Text>\n                </TouchableOpacity>\n              </View>\n              <View style={styles.photoGrid}>\n                {portfolioPhotos.map((photo, index) => (\n                  <Image \n                    key={index} \n                    source={{ uri: photo }} \n                    style={styles.portfolioPhoto} \n                  />\n                ))}\n                {portfolioPhotos.length === 0 && (\n                  <Text style={styles.noPhotosText}>No photos added yet</Text>\n                )}\n              </View>\n            </View> */}\n          </View>\n        </View>\n      </View>\n\n      {/* Photo Cropper Modal */}\n      <ProfilePhotoCropper\n        visible={showCropper}\n        imageUri={selectedPhoto}\n        onClose={() => {\n          setShowCropper(false);\n          setSelectedPhoto(null);\n        }}\n        onSave={handleSaveCroppedImage}\n        isUploading={isSaving}\n      />\n\n      {/* Verification Modal */}\n      <VerificationModal\n        visible={showVerificationModal}\n        onClose={() => {\n          setShowVerificationModal(false);\n          setVerificationModalType(null);\n        }}\n        title={\n          verificationModalType === 'background_check' ? 'Background Verification' :\n          verificationModalType === 'insurance' ? 'Insurance Verification' :\n          verificationModalType === 'elite_pro' ? 'Elite Pro Status' : ''\n        }\n        type={verificationModalType}\n        onProceed={handleVerificationProceed}\n      />\n\n      <EditOverlay\n        visible={!!editingField}\n        onClose={() => setEditingField(null)}\n        title={`Edit ${editingField?.charAt(0).toUpperCase()}${editingField?.slice(1)}`}\n        value={editValue}\n        onSave={handleSave}\n        isLocation={editingField === 'location'}\n        isMultiline={editingField === 'bio' || editingField === 'about_me'}\n        isProfessional={isProfessional}\n        isInsurance={editingField === 'insurance'}\n        selectedInsurance={selectedInsurance}\n        onInsuranceChange={setSelectedInsurance}\n      />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.colors.surface,\n  },\n  contentWrapper: {\n    maxWidth: 1200,\n    alignSelf: 'center',\n    width: '100%',\n    padding: 16,\n  },\n  mainContent: {\n    width: '100%',\n  },\n  desktopLayout: {\n    flexDirection: 'row',\n    gap: 24,\n  },\n  profileSection: {\n    marginBottom: 24,\n  },\n  profileSectionDesktop: {\n    width: 300,\n    marginBottom: 0,\n  },\n  profileCard: {\n    backgroundColor: theme.colors.surfaceContrast,\n    borderRadius: 8,\n    padding: 16,\n  },\n  profilePhotoContainer: {\n    position: 'relative',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  profilePhoto: {\n    width: 200,\n    height: 200,\n    borderRadius: 100,\n  },\n  profilePhotoPlaceholder: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderWidth: 2,\n    borderStyle: 'dashed',\n    borderColor: theme.colors.border,\n  },\n  cameraButton: {\n    position: 'absolute',\n    right: 8,\n    bottom: 8,\n    backgroundColor: theme.colors.primary,\n    padding: 8,\n    borderRadius: 20,\n  },\n  profileInfo: {\n    alignItems: 'center',\n  },\n  nameContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    marginBottom: 4,\n  },\n  name: {\n    fontSize: 24,\n    fontWeight: '600',\n    color: theme.colors.text,\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n  emailContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n    marginBottom: 4,\n  },\n  email: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n  locationContainer: {\n    flexDirection: 'row',\n    marginBottom: 12,\n    width: '100%',\n    position: 'relative',\n    paddingHorizontal: 20,\n  },\n  locationIconWrapper: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n  },\n  location: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n    fontFamily: theme.fonts?.regular?.fontFamily,\n    textAlign: 'center',\n    flex: 1,\n  },\n  locationEditIcon: {\n    position: 'absolute',\n    right: 0,\n    top: 0,\n    padding: 4,\n  },\n  roleContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n    marginBottom: 4,\n  },\n  role: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n  },\n  editIcon: {\n    padding: 4,\n  },\n  ratingContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  rating: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: theme.colors.text,\n  },\n  reviews: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n  },\n  sectionsContainer: {\n    flex: 1,\n  },\n  sectionsContainerDesktop: {\n    paddingLeft: 24,\n  },\n  section: {\n    backgroundColor: theme.colors.surfaceContrast,\n    borderRadius: 8,\n    padding: 16,\n  },\n  sectionHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  sectionTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.text,\n    fontFamily: theme.fonts?.header?.fontFamily,\n  },\n  editButton: {\n    backgroundColor: 'transparent',\n  },\n  editButtonText: {\n    color: theme.colors.primary,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  bioInput: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    padding: 12,\n    minHeight: 100,\n    textAlignVertical: 'top',\n    fontSize: 16,\n    color: theme.colors.text,\n  },\n  facilitiesGrid: {\n    gap: 16,\n  },\n  facilityItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.surface,\n    padding: 12,\n    borderRadius: 8,\n  },\n  facilityContent: {\n    marginLeft: 12,\n  },\n  facilityTitle: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n  },\n  facilityValue: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: theme.colors.text,\n    marginTop: 2,\n  },\n  addPhotoButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.primary,\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    borderRadius: 6,\n    gap: 6,\n  },\n  addPhotoText: {\n    color: theme.colors.background,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  photoGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 16,\n    marginTop: 16,\n  },\n  reviewsContainer: {\n    marginBottom: 12,\n  },\n  noReviews: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n    fontStyle: 'italic',\n  },\n  bioText: {\n    fontSize: 16,\n    color: theme.colors.text,\n    lineHeight: 24,\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n  locationButtons: {\n    gap: 16,\n  },\n  locationButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.primary,\n    padding: 12,\n    borderRadius: 8,\n    justifyContent: 'center',\n    gap: 8,\n  },\n  locationButtonText: {\n    color: theme.colors.background,\n    fontSize: 16,\n    fontWeight: '500',\n  },\n  orText: {\n    textAlign: 'center',\n    color: theme.colors.secondary,\n    fontSize: 14,\n  },\n  multilineInput: {\n    minHeight: 100,\n    textAlignVertical: 'top',\n  },\n  portfolioPhoto: {\n    width: '30%',\n    aspectRatio: 4/3,\n    borderRadius: 8,\n  },\n  noPhotosText: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n    fontStyle: 'italic',\n    textAlign: 'center',\n    padding: 20,\n  },\n  facilitiesModalContent: {\n    height: '80%',\n    width: '90%',\n    maxWidth: 500,\n  },\n  facilitiesScrollView: {\n    flex: 1,\n    marginBottom: 16,\n  },\n  facilityPresetItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 16,\n    borderRadius: 8,\n    marginBottom: 8,\n    backgroundColor: theme.colors.background,\n  },\n  selectedFacilityPreset: {\n    backgroundColor: theme.colors.primary,\n  },\n  facilityPresetContent: {\n    flex: 1,\n    marginLeft: 12,\n  },\n  facilityPresetTitle: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: theme.colors.text,\n    marginBottom: 4,\n  },\n  facilityPresetDescription: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n  },\n  selectedFacilityText: {\n    color: theme.colors.background,\n  },\n  checkIcon: {\n    marginLeft: 8,\n  },\n  modalButtons: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    gap: 12,\n  },\n  modalCancelButton: {\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 6,\n    backgroundColor: theme.colors.surface,\n  },\n  modalCancelText: {\n    color: theme.colors.text,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  modalSaveButton: {\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 6,\n    backgroundColor: theme.colors.primary,\n  },\n  modalSaveText: {\n    color: theme.colors.background,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  locationModalContent: {\n    width: '90%',\n    maxWidth: 500,\n    maxHeight: '90%',\n  },\n  locationContent: {\n    gap: 16,\n    paddingBottom: 16,\n  },\n  addressInstructions: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n    marginBottom: 8,\n    textAlign: 'center',\n  },\n  addressAutocomplete: {\n    marginBottom: 12,\n  },\n  selectedAddressInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    padding: 12,\n    backgroundColor: theme.colors.mainColors.tertiary + '10',\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.mainColors.tertiary + '30',\n  },\n  selectedAddressText: {\n    fontSize: 14,\n    color: theme.colors.mainColors.tertiary,\n    fontWeight: '500',\n  },\n  addressForm: {\n    gap: 12,\n  },\n  addressInput: {\n    backgroundColor: theme.colors.background,\n    borderRadius: 8,\n    padding: 12,\n    fontSize: 16,\n    color: theme.colors.text,\n    minHeight: 44,\n  },\n  addressRow: {\n    flexDirection: 'row',\n    gap: 12,\n    flexWrap: 'wrap',\n  },\n  maxFacilitiesText: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n    fontStyle: 'italic',\n    textAlign: 'center',\n    marginTop: 8,\n  },\n  modalSaveButtonDisabled: {\n    opacity: 0.5,\n  },\n  modalInputError: {\n    borderColor: theme.colors.error,\n    borderWidth: 1,\n  },\n  modalInputErrorText: {\n    color: theme.colors.error,\n    fontSize: 12,\n    marginTop: 4,\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n  modalInputCharacterCount: {\n    color: theme.colors.textSecondary,\n    fontSize: 12,\n    marginTop: 4,\n    textAlign: 'right',\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n  insuranceContent: {\n    gap: 16,\n  },\n  customInsuranceCard: {\n    alignItems: 'center',\n    gap: 8,\n  },\n  insuranceCardImage: {\n    width: '100%',\n    height: 200,\n    borderRadius: 8,\n    backgroundColor: theme.colors.background,\n  },\n  insuranceCardText: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n  },\n  insuranceOption: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.background,\n    padding: 16,\n    borderRadius: 8,\n    gap: 16,\n  },\n  insuranceOptionContent: {\n    flex: 1,\n  },\n  insuranceOptionTitle: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: theme.colors.text,\n    marginBottom: 4,\n  },\n  insuranceOptionDescription: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n  },\n  editButtonContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  insuranceStepContent: {\n    gap: 16,\n  },\n  insuranceStepTitle: {\n    fontSize: 18,\n    fontWeight: '500',\n    color: theme.colors.text,\n    marginBottom: 16,\n  },\n  insuranceTypeButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.background,\n    padding: 16,\n    borderRadius: 8,\n    gap: 16,\n  },\n  insuranceTypeContent: {\n    flex: 1,\n  },\n  insuranceTypeTitle: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: theme.colors.text,\n    marginBottom: 4,\n  },\n  insuranceTypeDescription: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n  },\n  uploadButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: theme.colors.background,\n    padding: 16,\n    borderRadius: 8,\n    gap: 8,\n  },\n  uploadText: {\n    fontSize: 16,\n    color: theme.colors.primary,\n    fontWeight: '500',\n  },\n  selectedInsuranceOption: {\n    backgroundColor: theme.colors.primary + '20',\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    padding: 16,\n    width: '90%',\n    maxWidth: 400,\n    maxHeight: '90%',\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginBottom: 16,\n    position: 'relative',\n  },\n  modalTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.text,\n    flex: 1,\n    fontFamily: theme.fonts?.header?.fontFamily,\n  },\n  modalTitleCentered: {\n    textAlign: 'center',\n  },\n  backButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n    position: 'absolute',\n    left: 0,\n    padding: 8,\n    zIndex: 1,\n  },\n  backButtonText: {\n    color: theme.colors.primary,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  modalInput: {\n    backgroundColor: theme.colors.background,\n    borderRadius: 8,\n    padding: 12,\n    fontSize: 16,\n    color: theme.colors.text,\n    marginBottom: 16,\n  },\n  modalCloseButton: {\n    alignSelf: 'flex-end',\n    backgroundColor: theme.colors.primary,\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 6,\n  },\n  modalCloseText: {\n    color: theme.colors.background,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  nameSection: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginBottom: 4,\n  },\n  sectionTitleContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n  },\n  sectionContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n  sectionText: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n\n  verificationSectionSubtitle: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n    marginBottom: 16,\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n  verificationButtonsContainer: {\n    gap: 12,\n  },\n  verificationButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.surface,\n    padding: 16,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  verificationButtonElite: {\n    backgroundColor: theme.colors.warning + '10',\n    borderColor: theme.colors.warning + '30',\n  },\n  verificationButtonIcon: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    backgroundColor: theme.colors.primary + '10',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 12,\n  },\n  verificationButtonContent: {\n    flex: 1,\n  },\n  verificationButtonTitle: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: theme.colors.text,\n    marginBottom: 2,\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n  verificationButtonTitleElite: {\n    color: theme.colors.warning,\n  },\n  verificationButtonSubtitle: {\n    fontSize: 12,\n    color: theme.colors.secondary,\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n  verificationButtonSubtitleElite: {\n    color: theme.colors.warning,\n  },\n  \n  // Verification modal styles\n  verificationModalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 16,\n  },\n  verificationModalContent: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 12,\n    width: '100%',\n    maxWidth: 500,\n    maxHeight: '90%',\n  },\n  verificationModalHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    padding: 20,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  verificationIconContainer: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    backgroundColor: theme.colors.primary + '10',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  verificationModalTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: theme.colors.text,\n    flex: 1,\n    textAlign: 'center',\n    fontFamily: theme.fonts?.header?.fontFamily,\n  },\n  verificationModalClose: {\n    width: 30,\n    height: 30,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  verificationModalScroll: {\n    maxHeight: 400,\n  },\n     verificationDescription: {\n     fontSize: 16,\n     color: theme.colors.text,\n     lineHeight: 24,\n     padding: 20,\n     textAlign: 'center',\n     fontFamily: theme.fonts?.regular?.fontFamily,\n   },\n   verificationModalSection: {\n     padding: 20,\n     paddingTop: 0,\n   },\n   verificationModalSectionTitle: {\n     fontSize: 18,\n     fontWeight: '600',\n     color: theme.colors.text,\n     marginBottom: 12,\n     fontFamily: theme.fonts?.header?.fontFamily,\n   },\n  verificationStep: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    marginBottom: 12,\n  },\n  verificationStepNumber: {\n    width: 24,\n    height: 24,\n    borderRadius: 12,\n    backgroundColor: theme.colors.primary,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 12,\n    marginTop: 2,\n  },\n  verificationStepNumberText: {\n    fontSize: 12,\n    fontWeight: '600',\n    color: theme.colors.background,\n  },\n  verificationStepText: {\n    fontSize: 14,\n    color: theme.colors.text,\n    flex: 1,\n    lineHeight: 20,\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n  verificationBenefit: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    marginBottom: 8,\n  },\n  verificationBenefitText: {\n    fontSize: 14,\n    color: theme.colors.text,\n    flex: 1,\n    marginLeft: 8,\n    lineHeight: 20,\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n  verificationModalButtons: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    gap: 12,\n    padding: 20,\n    borderTopWidth: 1,\n    borderTopColor: theme.colors.border,\n  },\n  verificationModalCancelButton: {\n    paddingHorizontal: 20,\n    paddingVertical: 12,\n    borderRadius: 8,\n    backgroundColor: theme.colors.surface,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  verificationModalCancelText: {\n    color: theme.colors.text,\n    fontSize: 14,\n    fontWeight: '500',\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n  verificationModalProceedButton: {\n    paddingHorizontal: 20,\n    paddingVertical: 12,\n    borderRadius: 8,\n    backgroundColor: theme.colors.primary,\n  },\n  verificationModalProceedText: {\n    color: theme.colors.background,\n    fontSize: 14,\n    fontWeight: '500',\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n\n  // Mobile verification section styles\n  mobileVerificationSection: {\n    backgroundColor: 'transparent',\n    marginTop: 16,\n    padding: 0,\n    borderRadius: 0,\n  },\n\n  // Support section styles\n  donateSectionWithVerification: {\n    paddingTop: 16,\n    borderTopWidth: 1,\n    borderTopColor: theme.colors.border,\n  },\n});\n\nexport default ProfileInfoTab; ","import React, { useState, useContext } from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet, Switch, ScrollView } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../../styles/theme';\nimport { AuthContext } from '../../context/AuthContext';\nimport { useNavigation } from '@react-navigation/native';\n\nconst DAYS_OF_WEEK = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];\n\nconst ServiceIcon = ({ service }) => {\n  const iconMap = {\n    'Dog Walking': 'walk',\n    'Pet Sitting': 'home',\n    'Overnight Care': 'bed',\n    // Add more mappings as needed\n  };\n\n  return (\n    <MaterialCommunityIcons \n      name={iconMap[service] || 'paw'} \n      size={24} \n      color={theme.colors.text} \n    />\n  );\n};\n\nconst ServicesAvailabilityTab = ({\n  services = [\n    {\n      id: 1,\n      name: 'Dog Walking',\n      price: 25,\n      unit: 'walk',\n      isActive: true,\n      unavailableDays: ['Sun']\n    },\n    {\n      id: 2,\n      name: 'Pet Sitting',\n      price: 35,\n      unit: 'visit',\n      isActive: true,\n      unavailableDays: ['Sat', 'Sun']\n    },\n    {\n      id: 3,\n      name: 'Overnight Care',\n      price: 85,\n      unit: 'night',\n      isActive: true,\n      isOvernight: true\n    }\n  ],\n  onToggleService,\n  onEditHours,\n  onBlockService,\n  onPartialDayBlock,\n}) => {\n  const { screenWidth } = useContext(AuthContext);\n  const navigation = useNavigation();\n  const [selectedService, setSelectedService] = useState(null);\n  const isStacked = screenWidth <= 1250;\n\n  const renderServiceItem = (service, index) => (\n    <TouchableOpacity\n      key={service.id}\n      style={[\n        styles.serviceItem,\n        { backgroundColor: index % 2 === 0 ? \n          theme.colors.proDashboard.secondary : \n          theme.colors.proDashboard.tertiary \n        },\n        selectedService?.id === service.id && styles.selectedServiceItem\n      ]}\n      onPress={() => setSelectedService(service)}\n    >\n      <View style={styles.serviceItemContent}>\n        <ServiceIcon service={service.name} />\n        <View style={styles.serviceInfo}>\n          <Text style={styles.serviceName}>{service.name}</Text>\n          <Text style={styles.servicePrice}>${service.price}/{service.unit}</Text>\n        </View>\n      </View>\n      <Switch\n        value={service.isActive}\n        onValueChange={() => onToggleService(service.id)}\n        trackColor={{ false: theme.colors.border, true: theme.colors.primary }}\n        thumbColor={theme.colors.background}\n      />\n    </TouchableOpacity>\n  );\n\n  const renderDayAvailability = (service) => {\n    if (service.isOvernight) {\n      // For overnight services, show next unavailable date\n      return (\n        <View style={styles.nextUnavailableContainer}>\n          <Text style={styles.nextUnavailableText}>Next Unavailable: Dec 24-25</Text>\n        </View>\n      );\n    }\n\n    return (\n      <ScrollView \n        horizontal \n        showsHorizontalScrollIndicator={false}\n        style={styles.daysScrollContainer}\n        contentContainerStyle={styles.daysContainer}\n      >\n        {DAYS_OF_WEEK.map((day) => {\n          const isUnavailable = service.unavailableDays?.includes(day);\n          return (\n            <View \n              key={day} \n              style={[\n                styles.dayItem,\n                isUnavailable && styles.unavailableDayItem\n              ]}\n            >\n              {isUnavailable && <View style={styles.unavailableSlash} />}\n              <Text style={[\n                styles.dayText,\n                isUnavailable && styles.unavailableDayText\n              ]}>{day}</Text>\n            </View>\n          );\n        })}\n      </ScrollView>\n    );\n  };\n\n  const renderAvailabilitySection = (service, index) => (\n    <View style={styles.availabilitySection}>\n      <View style={styles.availabilityHeader}>\n        <Text style={styles.availabilityTitle}>{service.name}</Text>\n        <TouchableOpacity \n          style={styles.editHoursButton}\n          onPress={() => onEditHours(service.id)}\n        >\n          <Text style={styles.editHoursText}>Edit Hours</Text>\n        </TouchableOpacity>\n      </View>\n      {renderDayAvailability(service)}\n      <Text style={styles.availabilityTime}>\n        {service.isOvernight ? 'Check-in: 3 PM, Check-out: 11 AM' : 'Available 9 AM - 5 PM'}\n      </Text>\n      {index !== services.length - 1 && <View style={styles.availabilityDivider} />}\n    </View>\n  );\n\n  return (\n    <View style={styles.container}>\n      <View style={[\n        styles.content,\n        { flexDirection: isStacked ? 'column' : 'row' }\n      ]}>\n        {/* Services Section */}\n        <View style={[\n          styles.servicesSection,\n          !isStacked && { maxWidth: 400 },\n          styles.sectionBox\n        ]}>\n          <View style={styles.sectionHeader}>\n            <Text style={styles.sectionTitle}>Your Services</Text>\n            <TouchableOpacity \n              style={styles.editButton}\n              onPress={() => navigation.navigate('ServiceManager')}\n            >\n              <Text style={styles.editButtonText}>Edit Services</Text>\n            </TouchableOpacity>\n          </View>\n          <View style={styles.servicesList}>\n            {services.map((service, index) => (\n              <View key={service.id} style={styles.serviceWrapper}>\n                {renderServiceItem(service, index)}\n                {index !== services.length - 1 && <View style={styles.serviceDivider} />}\n              </View>\n            ))}\n          </View>\n        </View>\n\n        {/* Availability Section */}\n        <View style={[\n          styles.availabilityContainer,\n          isStacked && { marginTop: 24 },\n          styles.sectionBox\n        ]}>\n          <View style={styles.sectionHeader}>\n            <Text style={styles.sectionTitle}>Availability</Text>\n          </View>\n          <ScrollView \n            horizontal \n            showsHorizontalScrollIndicator={false}\n            style={styles.controlsScrollContainer}\n            contentContainerStyle={styles.availabilityControls}\n          >\n            <TouchableOpacity \n              style={styles.controlButton}\n              onPress={onBlockService}\n            >\n              <View style={styles.blockButtonContent}>\n                <MaterialCommunityIcons name=\"block-helper\" size={20} color={theme.colors.error} />\n                <Text style={styles.blockButtonText}>Block All Services</Text>\n              </View>\n            </TouchableOpacity>\n            <TouchableOpacity \n              style={styles.controlButton}\n              onPress={onPartialDayBlock}\n            >\n              <View style={styles.partialBlockButtonContent}>\n                <MaterialCommunityIcons name=\"clock-outline\" size={20} color=\"#F97316\" />\n                <Text style={styles.partialBlockText}>Partial Day Block</Text>\n              </View>\n            </TouchableOpacity>\n            <TouchableOpacity \n              style={styles.controlButton}\n            >\n              <View style={styles.dateRangeButtonContent}>\n                <MaterialCommunityIcons name=\"calendar-range\" size={20} color=\"#3B82F6\" />\n                <Text style={styles.dateRangeText}>Date Range</Text>\n              </View>\n            </TouchableOpacity>\n          </ScrollView>\n          <View style={styles.controlsDivider} />\n          <View style={styles.availabilityList}>\n            {services.map((service, index) => renderAvailabilitySection(service, index))}\n          </View>\n        </View>\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.colors.surface,\n  },\n  content: {\n    padding: 24,\n    gap: 24,\n  },\n  sectionBox: {\n    backgroundColor: theme.colors.surfaceContrast,\n    borderRadius: 8,\n    padding: 16,\n    alignSelf: 'flex-start',\n  },\n  servicesSection: {\n    width: '100%',\n  },\n  servicesList: {\n    width: '100%',\n  },\n  serviceWrapper: {\n    width: '100%',\n  },\n  serviceItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    padding: 16,\n    borderRadius: 8,\n    marginBottom: 8,\n  },\n  selectedServiceItem: {\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n  },\n  serviceItemContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  serviceInfo: {\n    marginLeft: 12,\n    flex: 1,\n  },\n  serviceName: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: theme.colors.text,\n  },\n  servicePrice: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n    marginTop: 2,\n  },\n  availabilityContainer: {\n    flex: 1,\n    width: '100%',\n  },\n  controlsScrollContainer: {\n    marginBottom: 16,\n  },\n  availabilityControls: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n  controlsDivider: {\n    height: 1,\n    backgroundColor: theme.colors.surface,\n    marginBottom: 16,\n  },\n  daysScrollContainer: {\n    marginBottom: 12,\n  },\n  daysContainer: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n  availabilityDivider: {\n    height: 4,\n    backgroundColor: theme.colors.surface,\n    marginTop: 16,\n  },\n  availabilitySection: {\n    backgroundColor: theme.colors.surfaceContrast,\n    borderRadius: 8,\n    padding: 16,\n    marginBottom: 16,\n  },\n  availabilityHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  availabilityTitle: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: theme.colors.text,\n  },\n  editHoursButton: {\n    backgroundColor: 'transparent',\n  },\n  editHoursText: {\n    color: theme.colors.primary,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  dayItem: {\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n    backgroundColor: 'transparent',\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    borderRadius: 6,\n    position: 'relative',\n    overflow: 'hidden',\n  },\n  petsittingDayItem: {\n    backgroundColor: theme.colors.warningLight,\n  },\n  dayText: {\n    color: theme.colors.primary,\n    fontSize: 14,\n    fontWeight: '500',\n    zIndex: 1,\n  },\n  availabilityTime: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n  },\n  serviceDivider: {\n    // height: 1,\n    backgroundColor: theme.colors.surface,\n    marginVertical: 8,\n    marginHorizontal: 16,\n  },\n  availabilityList: {\n    width: '100%',\n  },\n  sectionHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  sectionTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.text,\n  },\n  editButton: {\n    backgroundColor: 'transparent',\n  },\n  editButtonText: {\n    color: theme.colors.primary,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  controlButton: {\n    borderRadius: 20,\n    overflow: 'hidden',\n  },\n  blockButtonContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    backgroundColor: '#FEE2E2',\n    gap: 6,\n  },\n  blockButtonText: {\n    color: theme.colors.error,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  partialBlockButtonContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    backgroundColor: '#FFEDD5',\n    gap: 6,\n  },\n  partialBlockText: {\n    color: '#F97316',\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  dateRangeButtonContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    backgroundColor: '#EFF6FF',\n    gap: 6,\n  },\n  dateRangeText: {\n    color: '#3B82F6',\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  unavailableDayItem: {\n    borderColor: theme.colors.error,\n  },\n  unavailableSlash: {\n    position: 'absolute',\n    top: '50%',\n    left: -5,\n    right: -5,\n    height: 1,\n    backgroundColor: theme.colors.error,\n    transform: [{ rotate: '45deg' }],\n  },\n  unavailableDayText: {\n    color: theme.colors.error,\n  },\n  nextUnavailableContainer: {\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n  },\n  nextUnavailableText: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n  },\n});\n\nexport default ServicesAvailabilityTab; ","// This is a calculation for the addpet.js file\nexport const calculateAge = (birthday) => {\n  if (!birthday) return '';\n  const today = new Date();\n  const birthDate = new Date(birthday);\n  let ageYears = today.getFullYear() - birthDate.getFullYear();\n  let ageMonths = today.getMonth() - birthDate.getMonth();\n\n  if (ageMonths < 0) {\n    ageYears--;\n    ageMonths += 12;\n  }\n\n  let result = '';\n  if (ageYears > 0) {\n    result += `${ageYears} year${ageYears > 1 ? 's' : ''}`;\n  }\n  if (ageMonths > 0) {\n    if (result) result += ' ';\n    result += `${ageMonths} month${ageMonths > 1 ? 's' : ''}`;\n  }\n  if (!result) result = '< 1 month';\n  return result;\n};\n\nexport const calculateProratedMultiplier = (startDate, endDate, startTime, endTime, timeUnit) => {\n    // Parse the dates and times separately\n    const [startYear, startMonth, startDay] = startDate.split('-').map(Number);\n    const [startHour, startMinute] = startTime.split(':').map(Number);\n    const [endYear, endMonth, endDay] = endDate.split('-').map(Number);\n    const [endHour, endMinute] = endTime.split(':').map(Number);\n\n    console.log('MBA12348785 ========= Starting calculateProratedMultiplier =========');\n    console.log('MBA12348785 Input parameters:', {\n        startDate,\n        endDate,\n        startTime,\n        endTime,\n        timeUnit\n    });\n\n    console.log('MBA12348785 Parsed components:', {\n        start: {\n            year: startYear,\n            month: startMonth,\n            day: startDay,\n            hour: startHour,\n            minute: startMinute\n        },\n        end: {\n            year: endYear,\n            month: endMonth,\n            day: endDay,\n            hour: endHour,\n            minute: endMinute\n        }\n    });\n\n    // Calculate days difference directly\n    const startDateOnly = new Date(Date.UTC(startYear, startMonth - 1, startDay));\n    const endDateOnly = new Date(Date.UTC(endYear, endMonth - 1, endDay));\n    const daysDiff = Math.floor((endDateOnly - startDateOnly) / (1000 * 60 * 60 * 24));\n    const daysDiffHours = daysDiff * 24;\n    \n    console.log('MBA12348785 Date difference calculation:', {\n        startDateOnly: startDateOnly.toISOString(),\n        endDateOnly: endDateOnly.toISOString(),\n        daysDiff,\n        daysDiffHours\n    });\n    \n    // Calculate time difference\n    const startTimeMinutes = startHour * 60 + startMinute;\n    const endTimeMinutes = endHour * 60 + endMinute;\n    const timeDiffHours = (endTimeMinutes - startTimeMinutes) / 60;\n    \n    console.log('MBA12348785 Time difference calculation:', {\n        startTimeMinutes,\n        endTimeMinutes,\n        timeDiffHours\n    });\n    \n    // Total hours is days difference plus time difference\n    const totalHours = daysDiffHours + timeDiffHours;\n    \n    console.log('MBA12348785 Total duration:', {\n        daysDiffHours,\n        timeDiffHours,\n        totalHours\n    });\n\n    let result;\n    switch(timeUnit) {\n        case '15 Min':\n            result = totalHours / .25;\n            break;\n        case '30 Min':\n            result = totalHours / .5;\n            break;\n        case '45 Min':\n            result = totalHours / .75;\n            break;\n        case '1 Hour':\n            result = totalHours / 1;\n            break;\n        case '2 Hour':\n            result = totalHours / 2;\n            break;\n        case '3 Hour':\n            result = totalHours / 3;\n            break;\n        case '4 Hour':\n            result = totalHours / 4;\n            break;\n        case '5 Hour':\n            result = totalHours / 5;\n            break;\n        case '6 Hour':\n            result = totalHours / 6;\n            break;\n        case '7 Hour':\n            result = totalHours / 7;\n            break;\n        case '8 Hour':\n            result = totalHours / 8;\n            break;\n        case '24 Hour':\n        case 'Per Day':\n            result = totalHours / 24;\n            break;\n        case 'Week':\n            result = totalHours / 168;\n            break;\n        case 'Per Visit':\n            result = 1;\n            break;\n        default:\n            result = 1;\n    }\n\n    console.log('MBA12348785 Final calculation:', {\n        timeUnit,\n        totalHours,\n        divisor: timeUnit === 'Per Visit' ? 1 : timeUnit === 'Week' ? 168 : parseInt(timeUnit) || 24,\n        result\n    });\n    console.log('MBA12348785 ========= End calculateProratedMultiplier =========');\n\n    return result;\n};\n  \n// Implementation of the backend's calculate_cost function in JavaScript\nexport const calculateOccurrenceCost = (occurrenceData, numPets = 0) => {\n    console.log('MBA93652 Starting cost calculation with data:', {\n        occurrenceData,\n        numPets\n    });\n\n    // Extract values from occurrence data\n    const {\n        start_date,\n        end_date,\n        start_time,\n        end_time,\n        rates: {\n            base_rate,\n            additional_animal_rate,\n            applies_after,\n            holiday_rate,\n            unit_of_time,\n            additional_rates = []\n        }\n    } = occurrenceData;\n\n    // Calculate number of units needed (this already handles the unit_of_time appropriately)\n    const numberOfUnits = calculateProratedMultiplier(\n        start_date,\n        end_date,\n        start_time,\n        end_time,\n        unit_of_time\n    );\n\n    console.log('MBA93652 calculateProratedMultiplier returned:', {\n        numberOfUnits,\n        unit_of_time,\n        start: `${start_date} ${start_time}`,\n        end: `${end_date} ${end_time}`\n    });\n    \n    // Calculate base cost - simply multiply base rate by number of units\n    const baseTotal = parseFloat(base_rate) * numberOfUnits;\n\n    console.log('MBA93652 Base cost calculation:', {\n        numberOfUnits,\n        baseTotal,\n        base_rate\n    });\n\n    // Calculate additional animal cost\n    let additionalAnimalRateTotal = 0;\n    if (numPets > parseInt(applies_after)) {\n        const additionalPets = numPets - parseInt(applies_after);\n        additionalAnimalRateTotal = parseFloat(additional_animal_rate) * additionalPets;\n    }\n\n    console.log('MBA93652 Additional animal cost:', {\n        additionalAnimalRateTotal,\n        numPets,\n        applies_after,\n        additional_animal_rate\n    });\n\n    // Add holiday rate if applicable (currently not implemented)\n    const holidayRateTotal = 0;\n\n    // Calculate additional rates total\n    const additionalRatesTotal = additional_rates.reduce((sum, rate) => \n        sum + parseFloat(rate.amount || 0), 0);\n\n    console.log('MBA93652 Additional rates:', {\n        additionalRatesTotal,\n        additional_rates\n    });\n\n    // Calculate total\n    const totalCost = baseTotal + additionalAnimalRateTotal + holidayRateTotal + additionalRatesTotal;\n\n    console.log('MBA93652 Final calculation:', {\n        baseTotal,\n        additionalAnimalRateTotal,\n        holidayRateTotal,\n        additionalRatesTotal,\n        totalCost\n    });\n\n    return {\n        base_total: baseTotal,\n        multiplier: numberOfUnits,\n        additional_animal_rate_total: additionalAnimalRateTotal,\n        holiday_rate_total: holidayRateTotal,\n        additional_rates_total: additionalRatesTotal,\n        total_cost: totalCost\n    };\n};","import React, { useState, useRef, useMemo, useEffect } from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet, Image, TextInput, ScrollView, Platform, Modal, Dimensions, TouchableWithoutFeedback } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../../styles/theme';\nimport { debugLog } from '../../context/AuthContext';\nimport { getMediaUrl } from '../../config/config';\nimport DateTimePicker from '@react-native-community/datetimepicker';\nimport { addPet, updatePet, fixPetOwner, deletePet } from '../../api/API';\nimport { useToast } from '../../components/ToastProvider';\nimport ConfirmationModal from '../ConfirmationModal';\nimport { calculateAge } from '../../data/calculations';\nimport * as ImagePicker from 'expo-image-picker';\nimport ProfilePhotoCropper from './ProfilePhotoCropper';\nimport { processImageWithCrop, prepareImageForUpload } from '../../utils/imageCropUtils';\nimport { sanitizeInput, validateName, validatePhoneNumber } from '../../validation/validation';\n\nconst PetsPreferencesTab = ({\n  pets = [],\n  preferences = {\n    homeEnvironment: [],\n    emergencyContacts: [],\n    authorizedHouseholdMembers: []\n  },\n  onAddPet,\n  onEditPet,\n  onDeletePet,\n  onReplacePet, // New prop for atomic replace operation\n  onUpdatePreferences,\n  userRole,\n  isMobile,\n}) => {\n  // Debug the initial pets array\n  debugLog(\"MBAi39gh45v\", \"COMPONENT INIT - Pets provided to component:\", \n    Array.isArray(pets) ? pets.map(p => ({ id: p.id, name: p.name || 'unnamed' })) : 'Not an array');\n    \n  // Debug the available callback functions\n  debugLog(\"MBAi39gh45v\", \"COMPONENT INIT - Available callbacks:\", {\n    hasOnAddPet: !!onAddPet,\n    hasOnEditPet: !!onEditPet,\n    hasOnDeletePet: !!onDeletePet,\n    hasOnReplacePet: !!onReplacePet\n  });\n  const [expandedPetIds, setExpandedPetIds] = useState(new Set());\n  const [newEmergencyContact, setNewEmergencyContact] = useState({ name: '', phone: '' });\n  const [newHouseholdMember, setNewHouseholdMember] = useState({ name: '', phone: '' });\n  const [isAddingEmergencyContact, setIsAddingEmergencyContact] = useState(false);\n  const [isAddingHouseholdMember, setIsAddingHouseholdMember] = useState(false);\n  const [editingPetIds, setEditingPetIds] = useState(new Set());\n  const [editedPetsData, setEditedPetsData] = useState({});\n  const [expandedSections, setExpandedSections] = useState({});\n  const [datePickerConfig, setDatePickerConfig] = useState({\n    isVisible: false,\n    currentField: null,\n    currentPetId: null,\n    selectedDate: new Date()\n  });\n  \n  // Add state for calendar display\n  const [displayMonth, setDisplayMonth] = useState(new Date().getMonth());\n  const [displayYear, setDisplayYear] = useState(new Date().getFullYear());\n  const [windowWidth, setWindowWidth] = useState(Dimensions.get('window').width);\n  const toast = useToast();\n\n  // Add this new variable to track if a save operation is in progress\n  const [savingPet, setSavingPet] = useState(false);\n\n  // Add this near other state declarations\n  const [showSuccessModals, setShowSuccessModals] = useState(true);\n\n  // Add state for delete confirmation modal\n  const [deleteConfirmation, setDeleteConfirmation] = useState({\n    visible: false,\n    petId: null,\n    petName: '',\n    isDeleting: false\n  });\n\n  // Add these new state variables at the top of the component with other state declarations\n  const [showMonthPicker, setShowMonthPicker] = useState(false);\n  const [showYearPicker, setShowYearPicker] = useState(false);\n\n  // Add state for pet photo cropping\n  const [selectedPetPhotoUri, setSelectedPetPhotoUri] = useState(null);\n  const [showPetPhotoCropper, setShowPetPhotoCropper] = useState(false);\n  const [currentEditingPetId, setCurrentEditingPetId] = useState(null);\n  const [isUploadingPhoto, setIsUploadingPhoto] = useState(false);\n  \n  // Add validation state\n  const [validationErrors, setValidationErrors] = useState({});\n  const [contactValidationErrors, setContactValidationErrors] = useState({});\n\n  // Add window resize listener\n  useEffect(() => {\n    const updateWidth = () => {\n      setWindowWidth(Dimensions.get('window').width);\n    };\n\n    Dimensions.addEventListener('change', updateWidth);\n    \n    return () => {\n      // For newer React Native versions, we would use remove\n      // In case this component is using an older version, handle appropriately\n      if (Dimensions.removeEventListener) {\n        Dimensions.removeEventListener('change', updateWidth);\n      }\n    };\n  }, []);\n\n  // Define all available facilities\n  const allFacilities = [\n    { id: 'yard', label: 'Fully fenced backyard', icon: 'fence' },\n    { id: 'roam', label: 'Free roam of house', icon: 'home' },\n    { id: 'ac', label: 'Air Conditioned', icon: 'snowflake' },\n    { id: 'furniture', label: 'Allowed on furniture', icon: 'sofa' },\n    { id: 'bed', label: 'Allowed on bed', icon: 'bed' },\n    { id: 'crate', label: 'Crate Available', icon: 'gate' },\n    { id: 'pet_door', label: 'Pet Door', icon: 'door' },\n    { id: 'toys', label: 'Pet Toy Collection', icon: 'handball' },\n    { id: 'first_aid', label: 'Pet First Aid Kit', icon: 'medical-bag' },\n    { id: 'cameras', label: 'Pet Cameras', icon: 'cctv' },\n    { id: 'covered_patio', label: 'Covered Patio', icon: 'umbrella' },\n    { id: 'garden', label: 'Pet-Safe Garden', icon: 'flower' },\n    { id: 'heating', label: 'Central Heating', icon: 'fire' },\n    { id: 'feeding_station', label: 'Feeding Station', icon: 'food-variant' },\n    { id: 'water_fountain', label: 'Water Fountain', icon: 'fountain' },\n    { id: 'scratching_post', label: 'Cat Posts', icon: 'cat' },\n    { id: 'litter_area', label: 'Private Litter Area', icon: 'broom' }\n  ];\n\n  // Define selectable options for dropdowns\n  const yesNoOptions = [\"Yes\", \"No\", \"N/A\"];\n  const energyLevelOptions = [\"Low\", \"Medium\", \"High\", \"N/A\"];\n  const sexOptions = [\"Male\", \"Female\"];\n\n  // Add at the top of the component, after the other utility functions\n  \n  // Helper function to safely convert any value to a display string\n  const safeDisplayText = (value, defaultText = '') => {\n    if (value === null || value === undefined) {\n      return defaultText;\n    }\n    \n    if (typeof value === 'string') {\n      return value;\n    }\n    \n    if (typeof value === 'number' || typeof value === 'boolean') {\n      return String(value);\n    }\n    \n    // For any other type (like objects), return the default\n    return defaultText;\n  };\n  \n  const returnYesNoContainer = (pet, attributeName) => {\n    let displayValue = 'No Option Selected';\n    \n    if (pet && attributeName) {\n      if (pet[attributeName] === null) {\n        displayValue = 'N/A';\n      } else if (pet[attributeName] === true) {\n        displayValue = 'Yes';\n      } else if (pet[attributeName] === false) {\n        displayValue = 'No';\n      } else if (typeof pet[attributeName] === 'string') {\n        displayValue = pet[attributeName];\n      }\n      // If pet[attributeName] is an object or other non-string type, keep the default \"No Option Selected\"\n    }\n    \n    return (\n      <View style={styles.dropdownContainer}>\n        <Text style={styles.dropdownText}>{displayValue}</Text>\n      </View>\n    );\n  };\n\n  const returnEnergyLevelContainer = (pet) => {\n    // Map backend value to frontend display value\n    let displayValue = 'No Option Selected';\n    \n    // Make sure pet exists before trying to access its energyLevel property\n    if (pet && pet.energyLevel !== undefined) {\n      if (pet.energyLevel === null) {\n        displayValue = 'N/A';\n      } else if (pet.energyLevel === 'LOW') {\n        displayValue = 'Low';\n      } else if (pet.energyLevel === 'MODERATE') {\n        displayValue = 'Medium';\n      } else if (pet.energyLevel === 'HIGH') {\n        displayValue = 'High';\n      } else if (typeof pet.energyLevel === 'string') {\n        displayValue = pet.energyLevel ? pet.energyLevel : \"None selected yet\"; // Fallback to whatever string is there\n      } else if (pet.energyLevel && typeof pet.energyLevel === 'object') {\n        displayValue = 'No Option Selected';\n      }\n    }\n    \n    return (\n      <View style={styles.dropdownContainer}>\n        <Text style={styles.dropdownText}>{displayValue}</Text>\n      </View>\n    );\n  };\n\n  const togglePetDetails = (petId) => {\n    // Remove the condition that prevents toggling when editing\n    // We want to allow collapsing/expanding even in edit mode\n    setExpandedPetIds(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(petId)) {\n        newSet.delete(petId);\n      } else {\n        newSet.add(petId);\n      }\n      return newSet;\n    });\n  };\n\n  const handleEditPet = (petId) => {\n    // Clone the current pet data to edit\n    const petToEdit = pets.find(pet => pet.id === petId);\n    \n    // Make sure medications is a string, not an object\n    const editData = {...petToEdit};\n    if (editData.medications && typeof editData.medications === 'object') {\n      editData.medications = '';\n    }\n    \n    // Map boolean/null values to \"Yes\"/\"No\"/\"N/A\" for UI compatibility fields\n    const booleanToYesNo = (value) => {\n      if (value === true) return \"Yes\";\n      if (value === false) return \"No\";\n      return \"N/A\";\n    };\n    \n    // Convert backend compatibility fields to UI-friendly format\n    if (petToEdit) {\n      editData.childrenFriendly = booleanToYesNo(petToEdit.friendly_with_children);\n      editData.catFriendly = booleanToYesNo(petToEdit.friendly_with_cats);\n      editData.dogFriendly = booleanToYesNo(petToEdit.friendly_with_dogs);\n      editData.spayedNeutered = booleanToYesNo(petToEdit.spayed_neutered);\n      editData.houseTrained = booleanToYesNo(petToEdit.house_trained);\n      editData.microchipped = booleanToYesNo(petToEdit.microchipped);\n      editData.canBeLeftAlone = booleanToYesNo(petToEdit.can_be_left_alone);\n      \n      // Also map the corresponding gets_along_with_* fields for compatibility\n      editData.getsAlongWithChildren = editData.childrenFriendly;\n      editData.getsAlongWithCats = editData.catFriendly;\n      editData.getsAlongWithDogs = editData.dogFriendly;\n    }\n    \n    // Update the edited data for this specific pet\n    setEditedPetsData(prev => ({\n      ...prev,\n      [petId]: editData\n    }));\n    \n    // Add this pet's ID to the set of pets being edited\n    setEditingPetIds(prev => {\n      const newSet = new Set(prev);\n      newSet.add(petId);\n      return newSet;\n    });\n  };\n  \n  const handleFixPet = async (petId) => {\n    try {\n      debugLog(\"MBA456\", \"Attempting to fix pet with ID:\", petId);\n      \n      // Show fixing toast\n      toast({\n        message: \"Attempting to repair pet data. Please wait...\",\n        type: 'info',\n        duration: 4000\n      });\n      \n      // Call the fix pet owner API\n      const response = await fixPetOwner(petId);\n      debugLog(\"MBA456\", \"Successfully fixed pet owner:\", response);\n      \n      // Update the pet data with the fixed pet info\n      if (response && response.pet) {\n        // Find the current pet data\n        const currentPetIndex = pets.findIndex(pet => pet.id === petId);\n        if (currentPetIndex !== -1) {\n          // Create updated pet data\n          const updatedPet = {\n            ...pets[currentPetIndex],\n            ...response.pet,\n            // Ensure UI-specific fields are updated\n            type: response.pet.species || pets[currentPetIndex].type,\n            feedingInstructions: response.pet.feeding_schedule || pets[currentPetIndex].feedingInstructions,\n            medicalNotes: response.pet.medication_notes || pets[currentPetIndex].medicalNotes,\n            pottyBreakSchedule: response.pet.potty_break_schedule || pets[currentPetIndex].pottyBreakSchedule,\n            specialCareInstructions: response.pet.special_care_instructions || pets[currentPetIndex].specialCareInstructions,\n            birthday: response.pet.birthday ? formatDateFromBackend(response.pet.birthday) : pets[currentPetIndex].birthday,\n            adoptionDate: response.pet.adoption_date ? formatDateFromBackend(response.pet.adoption_date) : pets[currentPetIndex].adoptionDate,\n            lastEditFailed: false // Clear the error flag\n          };\n          \n          // Update the pet in the parent component\n          onEditPet(petId, updatedPet);\n          \n          // Show success toast\n          toast({\n            message: \"The pet's owner has been restored. You should now be able to edit this pet normally.\",\n            type: 'success',\n            duration: 5000\n          });\n        }\n      }\n    } catch (error) {\n      debugLog(\"MBA456\", \"Error fixing pet:\", error);\n      \n      // Show error toast\n      let errorMessage = \"There was a problem fixing the pet. Please try again or contact support.\";\n      \n      if (error.response && error.response.data) {\n        if (error.response.data.error) {\n          errorMessage = error.response.data.error;\n        }\n      }\n      \n      toast({\n        message: errorMessage,\n        type: 'error',\n        duration: 5000\n      });\n    }\n  };\n  \n  const handleDeletePet = async (petId) => {\n    // Find the pet to get its name for the confirmation\n    const petToDelete = pets.find(pet => pet.id === petId);\n    \n    // Log the petId and found pet for debugging\n    debugLog(\"MBA456\", \"DELETE PET - Attempting to delete pet with ID:\", petId);\n    debugLog(\"MBA456\", \"DELETE PET - Found pet:\", petToDelete ? { id: petToDelete.id, name: petToDelete.name } : \"Pet not found\");\n    \n    // Safety check - if pet is not found or has no ID, show error\n    if (!petToDelete) {\n      toast({\n        message: `Unable to delete pet - could not find pet with ID ${petId}`,\n        type: 'error',\n        duration: 4000\n      });\n      return;\n    }\n    \n    const petName = petToDelete.name || 'this pet';\n    \n    // Show confirmation modal with the real pet ID from the pet object\n    setDeleteConfirmation({\n      visible: true,\n      petId: petToDelete.id, // Use the pet's actual ID from the object\n      petName: petName,\n      isDeleting: false\n    });\n  };\n  \n  const confirmDeletePet = async () => {\n    try {\n      const { petId, petName } = deleteConfirmation;\n      \n      // Set deleting state\n      setDeleteConfirmation(prev => ({ ...prev, isDeleting: true }));\n      \n      debugLog(\"MBA456\", \"Attempting to delete pet with ID:\", petId);\n      \n      // Show deleting toast\n      toast({\n        message: `Deleting ${petName}...`,\n        type: 'info',\n        duration: 4000\n      });\n      \n      // Call the delete pet API\n      await deletePet(petId);\n      debugLog(\"MBA456\", \"Successfully deleted pet:\", petId);\n      \n      // Remove the pet from the parent component's state\n      onDeletePet(petId);\n      \n      // Hide modal\n      setDeleteConfirmation({\n        visible: false,\n        petId: null,\n        petName: '',\n        isDeleting: false\n      });\n      \n      // Show success toast\n      toast({\n        message: `${petName} has been successfully deleted.`,\n        type: 'success',\n        duration: 4000\n      });\n      \n    } catch (error) {\n      debugLog(\"MBA456\", \"Error deleting pet:\", error);\n      \n      // Reset deleting state but keep modal open\n      setDeleteConfirmation(prev => ({ ...prev, isDeleting: false }));\n      \n      // Show error toast\n      let errorMessage = \"There was a problem deleting the pet. Please try again or contact support.\";\n      \n      if (error.response && error.response.data) {\n        if (error.response.data.error) {\n          errorMessage = error.response.data.error;\n        }\n      }\n      \n      toast({\n        message: errorMessage,\n        type: 'error',\n        duration: 5000\n      });\n    }\n  };\n  \n  const cancelDeletePet = () => {\n    setDeleteConfirmation({\n      visible: false,\n      petId: null,\n      petName: '',\n      isDeleting: false\n    });\n  };\n  \n  const formatDateForBackend = (dateString) => {\n    if (!dateString) return null;\n    \n    // Convert from MM-DD-YYYY to YYYY-MM-DD\n    const [month, day, year] = dateString.split('-');\n    return `${year}-${month}-${day}`;\n  };\n  \n  // Helper function to convert dates from backend format to frontend format\n  const formatDateFromBackend = (dateString) => {\n    if (!dateString) return null;\n    \n    // Convert from YYYY-MM-DD to MM-DD-YYYY\n    const [year, month, day] = dateString.split('-');\n    return `${month}-${day}-${year}`;\n  };\n  \n  const handleSavePetEdit = async (petId) => {\n    try {\n      // Set saving indicator to prevent duplicate saves\n      setSavingPet(true);\n      \n      // Get the edited data for this pet\n      const petData = editedPetsData[petId] || {};\n      \n      // Make a copy of the current pets list before any operations\n      // This ensures we can restore it if something goes wrong\n      const currentPetsList = [...pets];\n      debugLog(\"MBA456\", \"SAVE PET - Saving current pets list state:\", \n        currentPetsList.map(p => ({ id: p.id, name: p.name || 'unnamed' }))\n      );\n      \n      debugLog(\"MBA456\", \"SAVE PET - Starting to save pet:\", { petId, petData });\n      \n      // Check if this is a new pet\n      const isNewPet = petId && petId.toString().startsWith('temp_');\n      \n      // Helper function to convert Yes/No/N/A to true/false/null\n      const convertYesNoToBoolean = (value) => {\n        if (value === 'Yes') return true;\n        if (value === 'No') return false;\n        return null; // For N/A or undefined\n      };\n      \n      // Sanitize the pet data before saving\n      const sanitizedPetData = {\n        name: sanitizeInput(petData.name || '', 'name', { maxLength: 50 }),\n        breed: sanitizeInput(petData.breed || '', 'name', { maxLength: 50 }),\n        type: sanitizeInput(petData.type || '', 'name', { maxLength: 50 }),\n        feedingInstructions: sanitizeInput(petData.feedingInstructions || '', 'description', { maxLength: 500 }),\n        medicalNotes: sanitizeInput(petData.medicalNotes || '', 'description', { maxLength: 500 }),\n        pottyBreakSchedule: sanitizeInput(petData.pottyBreakSchedule || '', 'description', { maxLength: 500 }),\n        specialCareInstructions: sanitizeInput(petData.specialCareInstructions || '', 'description', { maxLength: 500 }),\n        medications: sanitizeInput(petData.medications || '', 'description', { maxLength: 500 }),\n        vetName: sanitizeInput(petData.vetName || '', 'general', { maxLength: 100 }),\n        vetAddress: sanitizeInput(petData.vetAddress || '', 'description', { maxLength: 200 }),\n        insuranceProvider: sanitizeInput(petData.insuranceProvider || '', 'general', { maxLength: 100 }),\n        // These fields don't need sanitization as they're controlled inputs\n        birthday: petData.birthday,\n        adoptionDate: petData.adoptionDate,\n        weight: petData.weight,\n        microchipId: petData.microchipId,\n        sex: petData.sex,\n        allergies: petData.allergies,\n        vaccinations: petData.vaccinations,\n        vetPhone: petData.vetPhone, // Already sanitized in phone validation\n      };\n      \n      debugLog(\"MBA456\", \"SAVE PET - Sanitized pet data:\", {\n        originalName: petData.name,\n        sanitizedName: sanitizedPetData.name,\n        originalBreed: petData.breed,\n        sanitizedBreed: sanitizedPetData.breed\n      });\n      \n      // Format the pet data for the API\n      let petToSave = {\n        name: sanitizedPetData.name,\n        breed: sanitizedPetData.breed,\n        birthday: sanitizedPetData.birthday ? formatDateForBackend(sanitizedPetData.birthday) : null,\n        adoption_date: sanitizedPetData.adoptionDate ? formatDateForBackend(sanitizedPetData.adoptionDate) : null,\n        weight: sanitizedPetData.weight || null,\n        feeding_schedule: sanitizedPetData.feedingInstructions,\n        medication_notes: sanitizedPetData.medicalNotes,\n        potty_break_schedule: sanitizedPetData.pottyBreakSchedule,\n        special_care_instructions: sanitizedPetData.specialCareInstructions,\n        species: sanitizedPetData.type,\n        microchip_id: sanitizedPetData.microchipId || '',\n        sex: sanitizedPetData.sex || null,\n        medications: sanitizedPetData.medications,\n        allergies: sanitizedPetData.allergies || '',\n        vaccinations: sanitizedPetData.vaccinations || '',\n        vet_name: sanitizedPetData.vetName,\n        vet_address: sanitizedPetData.vetAddress || '',\n        vet_phone: sanitizedPetData.vetPhone || '',\n        insurance_provider: sanitizedPetData.insuranceProvider,\n        // Use the correct field names for the backend\n        spayed_neutered: convertYesNoToBoolean(petData.spayedNeutered),\n        house_trained: convertYesNoToBoolean(petData.houseTrained),\n        friendly_with_dogs: convertYesNoToBoolean(petData.dogFriendly),\n        friendly_with_cats: convertYesNoToBoolean(petData.catFriendly),\n        friendly_with_children: convertYesNoToBoolean(petData.childrenFriendly),\n        microchipped: convertYesNoToBoolean(petData.microchipped),\n        can_be_left_alone: convertYesNoToBoolean(petData.canBeLeftAlone),\n        // Use the exact energy level values expected by the backend\n        energy_level: petData.energyLevel || null,\n      };\n      \n      debugLog(\"MBA456\", \"SAVE PET - Formatted pet compatibility fields:\", { \n        friendly_with_children: petToSave.friendly_with_children,\n        friendly_with_cats: petToSave.friendly_with_cats,\n        friendly_with_dogs: petToSave.friendly_with_dogs,\n        spayed_neutered: petToSave.spayed_neutered,\n        house_trained: petToSave.house_trained,\n        microchipped: petToSave.microchipped,\n        can_be_left_alone: petToSave.can_be_left_alone,\n        energy_level: petToSave.energy_level\n      });\n      \n      // Create a FormData object for sending multipart/form-data (needed for file upload)\n      const formData = new FormData();\n      \n      // Add the pet photo if available\n      if (petData.photo) {\n        debugLog(\"MBA5555\", \"Adding pet photo to form data\");\n        \n        // Add old pet photo URL for deletion, if this is an existing pet\n        if (!isNewPet) {\n          const currentPet = pets.find(p => p.id === petId);\n          if (currentPet && currentPet.profile_photo) {\n            formData.append('old_profile_photo_url', currentPet.profile_photo);\n          }\n        }\n        \n        // If it's a base64 image (web platform)\n        if (petData.photo.base64Data) {\n          formData.append('pet_photo_base64', petData.photo.base64Data);\n        } \n        // If it's a file URI (native platforms)\n        else if (petData.photo.uri) {\n          const photoFile = {\n            uri: Platform.OS === 'android' ? petData.photo.uri : petData.photo.uri.replace('file://', ''),\n            type: 'image/jpeg',\n            name: 'pet_photo.jpg'\n          };\n          formData.append('pet_photo', photoFile);\n          \n          // Add crop parameters if provided\n          if (petData.photo.cropParams) {\n            formData.append('crop_params', JSON.stringify(petData.photo.cropParams));\n          }\n        }\n      }\n      \n      // Add all the pet data fields to the FormData\n      Object.entries(petToSave).forEach(([key, value]) => {\n        // Only add fields that have values\n        if (value !== null && value !== undefined) {\n          // Convert boolean values to strings for FormData\n          if (typeof value === 'boolean') {\n            formData.append(key, value.toString());\n          } else {\n            formData.append(key, value);\n          }\n        }\n      });\n      \n      let response;\n      \n      if (isNewPet) {\n        try {\n          // This is a new pet, add it\n          debugLog(\"MBA456\", \"Adding new pet with data:\", {\n            name: petToSave.name,\n            species: petToSave.species,\n            breed: petToSave.breed\n          });\n          \n          // Create a direct copy of the pet data for UI use in case the API call fails\n          const uiSafePet = {\n            id: petId, // Keep using the temp ID for now\n            name: petToSave.name || 'New Pet',\n            type: petToSave.species || '',\n            breed: petToSave.breed || '',\n            // Map all the other fields for UI display\n            childrenFriendly: petData.childrenFriendly || 'N/A',\n            catFriendly: petData.catFriendly || 'N/A',\n            dogFriendly: petData.dogFriendly || 'N/A',\n            houseTrained: petData.houseTrained || 'N/A',\n            spayedNeutered: petData.spayedNeutered || 'N/A',\n            microchipped: petData.microchipped || 'N/A',\n            canBeLeftAlone: petData.canBeLeftAlone || 'N/A',\n            energyLevel: petData.energyLevel || '',\n            birthday: petData.birthday || null,\n            adoptionDate: petData.adoptionDate || null,\n            feedingInstructions: petData.feedingInstructions || '',\n            medicalNotes: petData.medicalNotes || '',\n            pottyBreakSchedule: petData.pottyBreakSchedule || '',\n            specialCareInstructions: petData.specialCareInstructions || '',\n            // These are used directly from the edited data\n            weight: petData.weight || '',\n            vetName: petData.vetName || '',\n            vetAddress: petData.vetAddress || '',\n            vetPhone: petData.vetPhone || '',\n            insuranceProvider: petData.insuranceProvider || '',\n            sex: petData.sex || '',\n            // Photo data if available\n            photoUri: petData.photoUri || null,\n          };\n          \n          response = await addPet(formData);\n          \n          // Check if it's a successful response\n          if (response && response.pet) {\n            const savedPet = response.pet;\n            // Log the full pet_id to make sure we're getting it from the server\n            debugLog(\"MBA5555\", \"Pet created successfully, server response:\", {\n              pet_id: savedPet.pet_id || 'not returned',\n              id: savedPet.id || 'not returned', // Log any alternative ID as well\n              name: savedPet.name,\n              species: savedPet.species,\n              breed: savedPet.breed\n            });\n            \n            // Validate that we have a proper pet_id\n            if (!savedPet.pet_id) {\n              debugLog(\"MBA5555\", \"WARNING: No pet_id in server response. Raw response:\", savedPet);\n            }\n            \n            // Show success toast\n            toast({\n              message: `${petToSave.name || 'Pet'} added successfully!`,\n              type: 'success',\n              duration: 4000\n            });\n            \n            // Replace the temporary pet with the real one - this needs to be atomic to prevent duplicates\n            // We pass both the server response and our locally edited data\n            const enhancedPetData = {\n              ...savedPet,\n              // Ensure these fields are present from user input\n              name: petToSave.name || savedPet.name,\n              species: petToSave.species || savedPet.species,\n              breed: petToSave.breed || savedPet.breed,\n              // The backend response contains pet_id - we must use this as the primary identifier\n              // This ensures we're always using the real database ID, not a temporary one\n              id: savedPet.pet_id,\n            };\n            \n            // Use the enhanced pet data for the replacement\n            replaceTempPetWithReal(petId, enhancedPetData);\n          } else {\n            throw new Error(\"Invalid response from server when adding pet\");\n          }\n        } catch (error) {\n          // Show error toast\n          toast({\n            message: `Error saving pet: ${error.message}`,\n            type: 'error',\n            duration: 4000\n          });\n          \n          debugLog(\"MBA456\", \"Error in pet creation:\", error);\n          \n          // Important: If there was an error, we need to make sure the pets list doesn't disappear\n          // We'll use the current pets list we saved earlier\n          if (Array.isArray(currentPetsList) && currentPetsList.length > 0) {\n            debugLog(\"MBA456\", \"Restoring pets list after error\");\n            // This approach depends on how your parent component updates the pets\n            // If you're using React context, you might need a different approach\n          }\n        }\n      } else {\n        // This is an existing pet, update it\n        debugLog(\"MBA456\", \"Updating existing pet with ID:\", petId);\n        response = await updatePet(petId, formData);\n        \n        // Check if it's a successful response\n        if (response && response.pet) {\n          const updatedPet = response.pet;\n          \n          // Show success toast\n          toast({\n            message: `${updatedPet.name ? updatedPet.name.charAt(0).toUpperCase() + updatedPet.name.slice(1).toLowerCase() : 'Pet'} updated successfully!`,\n            type: 'success',\n            duration: 4000\n          });\n          \n          // Process the profile_photo URL from the server to ensure it's complete\n          let profilePhotoUrl = updatedPet.profile_photo;\n          \n          // Only prepend MEDIA_URL if the URL is a relative path\n          if (profilePhotoUrl && !profilePhotoUrl.startsWith('http') && !profilePhotoUrl.startsWith('data:')) {\n            profilePhotoUrl = getMediaUrl(profilePhotoUrl);\n          }\n          \n          debugLog(\"MBA5555\", \"Pet updated successfully, profile photo URL:\", profilePhotoUrl);\n          \n          // Format the updated pet data for UI\n          const formattedPet = {\n            ...updatedPet,\n            id: petId, // Ensure the ID is preserved\n            // Map fields from backend to frontend format\n            type: updatedPet.species || updatedPet.type,\n            feedingInstructions: updatedPet.feeding_schedule || updatedPet.feedingInstructions,\n            medicalNotes: updatedPet.medication_notes || updatedPet.medicalNotes,\n            pottyBreakSchedule: updatedPet.potty_break_schedule || updatedPet.pottyBreakSchedule,\n            specialCareInstructions: updatedPet.special_care_instructions || updatedPet.specialCareInstructions,\n            // Map vet info fields\n            vetName: updatedPet.vet_name || '',\n            vetAddress: updatedPet.vet_address || '',\n            vetPhone: updatedPet.vet_phone || '',\n            insuranceProvider: updatedPet.insurance_provider || '',\n            // Format compatibility fields for UI (true/false/null to Yes/No/N/A)\n            childrenFriendly: updatedPet.friendly_with_children === true ? \"Yes\" : \n                             updatedPet.friendly_with_children === false ? \"No\" : \"N/A\",\n            catFriendly: updatedPet.friendly_with_cats === true ? \"Yes\" : \n                        updatedPet.friendly_with_cats === false ? \"No\" : \"N/A\",\n            dogFriendly: updatedPet.friendly_with_dogs === true ? \"Yes\" : \n                        updatedPet.friendly_with_dogs === false ? \"No\" : \"N/A\",\n            houseTrained: updatedPet.house_trained === true ? \"Yes\" : \n                         updatedPet.house_trained === false ? \"No\" : \"N/A\",\n            spayedNeutered: updatedPet.spayed_neutered === true ? \"Yes\" : \n                           updatedPet.spayed_neutered === false ? \"No\" : \"N/A\",\n            microchipped: updatedPet.microchipped === true ? \"Yes\" : \n                         updatedPet.microchipped === false ? \"No\" : \"N/A\",\n            canBeLeftAlone: updatedPet.can_be_left_alone === true ? \"Yes\" : \n                           updatedPet.can_be_left_alone === false ? \"No\" : \"N/A\",\n            // Map energy level from backend to frontend\n            energyLevel: updatedPet.energy_level || '',\n            // Format dates correctly\n            birthday: updatedPet.birthday ? formatDateFromBackend(updatedPet.birthday) : null,\n            adoptionDate: updatedPet.adoption_date ? formatDateFromBackend(updatedPet.adoption_date) : null,\n            // Update the profile photo with the server's URL\n            profile_photo: profilePhotoUrl,\n          };\n          \n          debugLog(\"MBA5555\", \"Formatted pet data for UI:\", formattedPet);\n          \n          // Update our local state with server data\n          setEditedPetsData(prev => {\n            const newData = { ...prev };\n            delete newData[petId]; // Remove editing data\n            return newData;\n          });\n          \n          // Notify parent component of the updated pet\n          if (onEditPet) {\n            onEditPet(petId, formattedPet);\n          }\n        } else {\n          throw new Error(\"Invalid response from server when updating pet\");\n        }\n      }\n      \n      // Remove this pet from the editing set\n      setEditingPetIds(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(petId);\n        return newSet;\n      });\n      \n    } catch (error) {\n      debugLog(\"MBA456\", \"Error saving pet:\", error);\n      \n      // Show error toast\n      toast({\n        message: `Failed to save pet: ${error.message || 'Unknown error'}`,\n        type: 'error',\n        duration: 5000\n      });\n      \n      // Mark the pet as failed\n      setEditedPetsData(prev => ({\n        ...prev,\n        [petId]: {\n          ...(prev[petId] || {}),\n          lastEditFailed: true\n        }\n      }));\n    } finally {\n      setSavingPet(false);\n    }\n  };\n  \n  const handleCancelPetEdit = (petId) => {\n    // Check if this is a newly added pet (has a temp_ ID)\n    if (petId && petId.toString().startsWith('temp_')) {\n      // Delete the pet instead of just canceling edit mode\n      debugLog(\"MBA456\", \"Discarding newly added pet:\", petId);\n      onDeletePet(petId);\n    }\n    \n    // Remove this pet from editing state\n    setEditingPetIds(prev => {\n      const newSet = new Set(prev);\n      newSet.delete(petId);\n      return newSet;\n    });\n    \n    // Clean up the edited data for this pet\n    setEditedPetsData(prev => {\n      const newData = {...prev};\n      delete newData[petId];\n      return newData;\n    });\n  };\n  \n  const formatPhoneNumber = (phoneNumber) => {\n    // Format phone number as XXX-XXX-XXXX\n    const cleaned = phoneNumber.replace(/\\D/g, '');\n    \n    if (cleaned.length >= 6) {\n      return `${cleaned.substring(0, 3)}-${cleaned.substring(3, 6)}-${cleaned.substring(6, 10)}`;\n    } else if (cleaned.length >= 3) {\n      return `${cleaned.substring(0, 3)}-${cleaned.substring(3)}`;\n    } else {\n      return cleaned;\n    }\n  };\n\n  const validatePetInput = (field, value, petId) => {\n    debugLog('MBA1234', 'Validating pet input:', { field, value, petId });\n    \n    let sanitized = value;\n    let error = '';\n    \n    // Skip validation for dropdown/boolean fields\n    if (['childrenFriendly', 'catFriendly', 'dogFriendly', 'spayedNeutered', 'houseTrained', 'microchipped', 'canBeLeftAlone', 'energyLevel', 'sex', 'type'].includes(field)) {\n      return { sanitized, error };\n    }\n    \n    // First check for dangerous content that should always be blocked\n    const hasScriptTags = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi.test(value);\n    const hasSqlInjection = /\\b(SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|EXEC|UNION|SCRIPT|JAVASCRIPT|VBSCRIPT)\\b/gi.test(value);\n    \n    if (hasScriptTags || hasSqlInjection) {\n      debugLog('MBA1234', 'Dangerous content detected and blocked:', { field, value });\n      return { sanitized: '', error: 'Invalid content detected and removed' };\n    }\n    \n    // Sanitize based on field type\n    if (field === 'name') {\n      sanitized = sanitizeInput(value, 'name', { maxLength: 50 });\n      \n      // Check for malicious content\n      const originalLength = value.length;\n      const sanitizedLength = sanitized.length;\n      const removalPercentage = originalLength > 0 ? ((originalLength - sanitizedLength) / originalLength) * 100 : 0;\n      \n      if (removalPercentage > 30 && originalLength > 3) {\n        debugLog('MBA1234', 'Malicious content detected in pet name:', { originalLength, sanitizedLength, removalPercentage });\n        error = 'Invalid characters detected in pet name';\n      } else {\n        const nameValidation = validateName(sanitized);\n        if (!nameValidation.isValid && sanitized.length > 0) {\n          error = nameValidation.message;\n        } else if (sanitized.length > 0 && sanitized.length < 2) {\n          error = 'Pet name must be at least 2 characters long';\n        }\n      }\n    } else if (field === 'breed' || field === 'color') {\n      sanitized = sanitizeInput(value, 'name', { maxLength: 50 });\n      \n      // Check for malicious content\n      const originalLength = value.length;\n      const sanitizedLength = sanitized.length;\n      const removalPercentage = originalLength > 0 ? ((originalLength - sanitizedLength) / originalLength) * 100 : 0;\n      \n      if (removalPercentage > 30 && originalLength > 3) {\n        debugLog('MBA1234', `Malicious content detected in pet ${field}:`, { originalLength, sanitizedLength, removalPercentage });\n        error = `Invalid characters detected in pet ${field}`;\n      } else if (sanitized.length > 0 && sanitized.length < 2) {\n        error = `Pet ${field} must be at least 2 characters long`;\n      }\n    } else if (['specialInstructions', 'medicalConditions', 'feedingInstructions', 'medicalNotes', 'pottyBreakSchedule', 'specialCareInstructions', 'medications'].includes(field)) {\n      sanitized = sanitizeInput(value, 'description', { maxLength: 500 });\n      \n      // Check for malicious content\n      const originalLength = value.length;\n      const sanitizedLength = sanitized.length;\n      const removalPercentage = originalLength > 0 ? ((originalLength - sanitizedLength) / originalLength) * 100 : 0;\n      \n      if (removalPercentage > 30 && originalLength > 10) {\n        debugLog('MBA1234', `Malicious content detected in pet ${field}:`, { originalLength, sanitizedLength, removalPercentage });\n        error = `Invalid characters detected in ${field}`;\n      } else if (sanitized.length > 500) {\n        error = `${field} must be no more than 500 characters long`;\n      }\n    } else if (field === 'weight') {\n      sanitized = sanitizeInput(value, 'amount');\n      \n      if (sanitized && sanitized.length > 0) {\n        const weightValue = parseFloat(sanitized);\n        if (isNaN(weightValue)) {\n          error = 'Weight must be a valid number';\n        } else if (weightValue <= 0) {\n          error = 'Weight must be greater than 0';\n        } else if (weightValue > 500) {\n          error = 'Weight cannot exceed 500 lbs';\n        }\n      }\n    } else if (['vetName', 'insuranceProvider'].includes(field)) {\n      sanitized = sanitizeInput(value, 'general', { maxLength: 100 });\n      \n      // Check for malicious content\n      const originalLength = value.length;\n      const sanitizedLength = sanitized.length;\n      const removalPercentage = originalLength > 0 ? ((originalLength - sanitizedLength) / originalLength) * 100 : 0;\n      \n      if (removalPercentage > 30 && originalLength > 3) {\n        debugLog('MBA1234', `Malicious content detected in ${field}:`, { originalLength, sanitizedLength, removalPercentage });\n        error = `Invalid characters detected in ${field}`;\n      }\n    } else if (['vetAddress'].includes(field)) {\n      sanitized = sanitizeInput(value, 'description', { maxLength: 200 });\n      \n      // Check for malicious content\n      const originalLength = value.length;\n      const sanitizedLength = sanitized.length;\n      const removalPercentage = originalLength > 0 ? ((originalLength - sanitizedLength) / originalLength) * 100 : 0;\n      \n      if (removalPercentage > 30 && originalLength > 5) {\n        debugLog('MBA1234', `Malicious content detected in ${field}:`, { originalLength, sanitizedLength, removalPercentage });\n        error = `Invalid characters detected in ${field}`;\n      }\n    } else if (field === 'vetPhone') {\n      // For vet phone, be more restrictive - only allow numbers and format as XXX-XXX-XXXX\n      const numbersOnly = value.replace(/\\D/g, ''); // Remove all non-digits\n      \n      if (numbersOnly.length > 10) {\n        // Don't allow more than 10 digits\n        sanitized = formatPhoneNumber(numbersOnly.substring(0, 10));\n        error = 'Phone number cannot exceed 10 digits';\n      } else if (numbersOnly.length > 0) {\n        sanitized = formatPhoneNumber(numbersOnly);\n        \n        if (numbersOnly.length === 10) {\n          // Validate complete phone number\n          const phoneValidation = validatePhoneNumber(sanitized);\n          if (!phoneValidation.isValid) {\n            error = phoneValidation.message;\n          }\n        } else if (numbersOnly.length < 10 && numbersOnly.length > 0) {\n          // Allow partial entry but show it's incomplete\n          // Don't set error for partial entry to allow typing\n        }\n      } else {\n        sanitized = '';\n      }\n    } else {\n      // General text field sanitization\n      sanitized = sanitizeInput(value, 'general', { maxLength: 200 });\n    }\n    \n    // Update validation errors\n    setValidationErrors(prevErrors => {\n      const petErrors = prevErrors[petId] || {};\n      const newPetErrors = { ...petErrors };\n      \n      if (error) {\n        newPetErrors[field] = error;\n      } else {\n        delete newPetErrors[field];\n      }\n      \n      const cleanedErrors = Object.keys(newPetErrors).length > 0 ? newPetErrors : undefined;\n      const newErrors = { ...prevErrors };\n      \n      if (cleanedErrors) {\n        newErrors[petId] = cleanedErrors;\n      } else {\n        delete newErrors[petId];\n      }\n      \n      return newErrors;\n    });\n    \n    return { sanitized, error };\n  };\n\n  const handleEditChange = (petId, field, value) => {\n    // For compatibility fields, no need to validate\n    if (['childrenFriendly', 'catFriendly', 'dogFriendly', 'spayedNeutered', 'houseTrained', 'microchipped', 'canBeLeftAlone', 'energyLevel', 'sex', 'type'].includes(field)) {\n      // Store the direct selected value (\"Yes\", \"No\", \"N/A\") in the edit state\n      setEditedPetsData(prev => ({\n        ...prev,\n        [petId]: {\n          ...(prev[petId] || {}),\n          [field]: value\n        }\n      }));\n      \n      // Also update the corresponding gets_along_with_* fields for compatibility with the API\n      if (field === 'childrenFriendly') {\n        setEditedPetsData(prev => ({\n          ...prev,\n          [petId]: {\n            ...(prev[petId] || {}),\n            getsAlongWithChildren: value\n          }\n        }));\n      } else if (field === 'catFriendly') {\n        setEditedPetsData(prev => ({\n          ...prev,\n          [petId]: {\n            ...(prev[petId] || {}),\n            getsAlongWithCats: value\n          }\n        }));\n      } else if (field === 'dogFriendly') {\n        setEditedPetsData(prev => ({\n          ...prev,\n          [petId]: {\n            ...(prev[petId] || {}),\n            getsAlongWithDogs: value\n          }\n        }));\n      }\n    } else {\n      // For text fields, only block extremely dangerous content in real-time\n      const hasScriptTags = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi.test(value);\n      const hasSqlInjection = /\\b(SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|EXEC|UNION|SCRIPT|JAVASCRIPT|VBSCRIPT)\\b/gi.test(value);\n      \n      if (hasScriptTags || hasSqlInjection) {\n        debugLog('MBA1234', 'Dangerous content detected and blocked in pet input:', { field, value });\n        return; // Don't update the input if it contains dangerous content\n      }\n      \n      // For phone fields, apply formatting\n      let processedValue = value;\n      if (field === 'vetPhone') {\n        const numbersOnly = value.replace(/\\D/g, '');\n        if (numbersOnly.length <= 10) {\n          processedValue = formatPhoneNumber(numbersOnly);\n        } else {\n          // Don't allow more than 10 digits\n          processedValue = formatPhoneNumber(numbersOnly.substring(0, 10));\n        }\n      }\n      \n      // Store the value (with formatting for phone numbers, original for everything else)\n      setEditedPetsData(prev => ({\n        ...prev,\n        [petId]: {\n          ...(prev[petId] || {}),\n          [field]: processedValue\n        }\n      }));\n    }\n    debugLog(\"MBA456\", \"Editing pet field\", { petId, field, value });\n  };\n\n  const handleAddNewPet = () => {\n    // Debug current state before adding a pet\n    debugLog(\"MBAi39gh45v\", \"ADD PET START - Current pets array:\", \n      Array.isArray(pets) ? \n        pets.map(p => ({ id: p.id, name: p.name || 'unnamed' })) : \n        'pets is not an array');\n    \n    // Check for existing temporary pets first\n    const existingTempPets = Array.isArray(pets) ? \n      pets.filter(pet => pet && pet.id && String(pet.id).startsWith('temp_')) : \n      [];\n    \n    debugLog(\"MBAi39gh45v\", \"ADD PET - Existing temp pets:\", \n      existingTempPets.length ? existingTempPets.map(p => p.id) : 'none');\n    \n    // If we already have a temporary pet being edited, don't create a new one\n    if (existingTempPets.length > 0) {\n      debugLog(\"MBAi39gh45v\", \"ADD PET - Found existing temp pet, not creating a new one\");\n      // Just focus on the existing temp pet instead\n      const tempPet = existingTempPets[0];\n      \n      // Make sure it's in edit mode\n      setEditingPetIds(prev => {\n        const newSet = new Set(prev);\n        newSet.add(tempPet.id);\n        return newSet;\n      });\n      \n      // Make sure it's expanded\n      setExpandedPetIds(prev => {\n        const newSet = new Set(prev);\n        newSet.add(tempPet.id);\n        return newSet;\n      });\n      \n      debugLog(\"MBAi39gh45v\", \"ADD PET - Focused on existing temp pet:\", tempPet.id);\n      return;\n    }\n    \n    // Create a temporary ID for the new pet\n    const tempId = `temp_${Date.now()}`;\n    debugLog(\"MBAi39gh45v\", \"ADD PET - Creating new pet with temp ID:\", tempId);\n    \n    // Create a blank pet entry\n    const newPet = {\n      id: tempId,\n      name: '',\n      breed: '',\n      birthday: '',\n      type: '',\n      feedingInstructions: '',\n      medicalNotes: '',\n      pottyBreakSchedule: '',\n      specialCareInstructions: '',\n      childrenFriendly: undefined,\n      dogFriendly: undefined,\n      catFriendly: undefined,\n      spayedNeutered: undefined,\n      houseTrained: undefined,\n      microchipped: undefined,\n      energyLevel: undefined,\n      canBeLeftAlone: undefined,\n      medications: '',\n      vetName: '',\n      vetAddress: '',\n      vetPhone: '',\n      insuranceProvider: '',\n      vetDocuments: [],\n      // New fields\n      sex: undefined,\n      weight: '',\n      adoptionDate: ''\n    };\n    \n    // Debug the new pet data\n    debugLog(\"MBAi39gh45v\", \"ADD PET - New pet object created:\", { id: newPet.id });\n    \n    // First update our local state to show we're editing this pet\n    setEditingPetIds(prev => {\n      const newSet = new Set(prev);\n      newSet.add(tempId);\n      return newSet;\n    });\n    \n    setEditedPetsData(prev => ({\n      ...prev,\n      [tempId]: {...newPet}\n    }));\n    \n    // Expand the pet card\n    setExpandedPetIds(prev => {\n      const newSet = new Set(prev);\n      newSet.add(tempId);\n      return newSet;\n    });\n    \n    debugLog(\"MBAi39gh45v\", \"ADD PET - Local state updated, now calling parent component\");\n    \n    // Check if onAddPet function exists\n    if (!onAddPet) {\n      debugLog(\"MBAi39gh45v\", \"ADD PET ERROR - onAddPet function is not available\");\n      toast({\n        message: \"Unable to add pet - system error\",\n        type: 'error',\n        duration: 4000\n      });\n      return;\n    }\n    \n    try {\n      // Now add the new pet to the existing pets array via the parent component\n      // Adding at the top of the list makes it visible immediately to the user\n      debugLog(\"MBAi39gh45v\", \"ADD PET - Calling onAddPet with new pet (adding to top of list)\");\n      onAddPet({...newPet, _addToTop: true});\n      \n      // After everything is done, log the current state\n      setTimeout(() => {\n        if (Array.isArray(pets)) {\n          debugLog(\"MBAi39gh45v\", \"ADD PET - Pets after adding:\", \n            pets.length > 0 ? \n              pets.map(p => ({id: p.id, name: p.name || 'unnamed'})) : \n              'empty array');\n        } else {\n          debugLog(\"MBAi39gh45v\", \"ADD PET ERROR - Pets is not an array after adding\");\n        }\n      }, 100);\n    } catch (error) {\n      debugLog(\"MBAi39gh45v\", \"ADD PET ERROR - Exception when calling onAddPet:\", error);\n      toast({\n        message: \"Error adding pet\",\n        type: 'error',\n        duration: 4000\n      });\n    }\n  };\n\n  const handleUploadDocument = async (petId) => {\n    try {\n      debugLog(\"MBA5555\", \"Opening image picker for pet:\", petId);\n      \n      // Request permissions first if on native platforms\n      if (Platform.OS !== 'web') {\n        const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n        if (status !== 'granted') {\n          debugLog('MBA5555', 'Permission to access media library was denied');\n          toast({\n            message: 'Permission to access media library was denied',\n            type: 'error',\n            duration: 4000\n          });\n          return;\n        }\n      }\n      \n      // Launch image picker with platform-specific options\n      const result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: false, // Disable built-in editing as we'll use our custom cropper\n        quality: 1,\n        // On web, we need base64 for direct upload\n        base64: Platform.OS === 'web',\n        allowsMultipleSelection: false,\n      });\n      \n      if (!result.canceled && result.assets && result.assets.length > 0) {\n        const selectedAsset = result.assets[0];\n        \n        debugLog('MBA5555', 'Selected pet photo:', {\n          uri: selectedAsset.uri.substring(0, 30) + '...',\n          type: selectedAsset.type || 'image/jpeg',\n          width: selectedAsset.width,\n          height: selectedAsset.height,\n          hasBase64: !!selectedAsset.base64\n        });\n        \n        // Store the selected photo URI and pet ID\n        setSelectedPetPhotoUri(selectedAsset.uri);\n        setCurrentEditingPetId(petId);\n        \n        // Show the photo cropper\n        setShowPetPhotoCropper(true);\n      }\n    } catch (error) {\n      debugLog('MBA5555', 'Error selecting pet photo:', error);\n      toast({\n        message: 'Failed to select pet photo. Please try again.',\n        type: 'error',\n        duration: 4000\n      });\n    }\n  };\n\n  const renderVetDocuments = (documents = []) => {\n    if (documents.length === 0) {\n      return <Text style={styles.noDocumentsText}>No documents uploaded</Text>;\n    }\n    \n    return (\n      <View style={styles.documentsList}>\n        {documents.map((doc, index) => (\n          <View key={index} style={styles.documentItem}>\n            <MaterialCommunityIcons name=\"file-document-outline\" size={18} color={theme.colors.primary} />\n            <Text style={styles.documentName} numberOfLines={1} ellipsizeMode=\"middle\">\n              {doc.name}\n            </Text>\n            <TouchableOpacity style={styles.viewDocButton}>\n              <Text style={styles.viewDocText}>View</Text>\n            </TouchableOpacity>\n          </View>\n        ))}\n      </View>\n    );\n  };\n\n  const toggleSection = (petId, sectionName, event) => {\n    // A completely rewritten, bulletproof version of toggleSection\n    \n    try {\n      // First, stop event propagation if an event was provided\n      if (event && typeof event.stopPropagation === 'function') {\n        event.stopPropagation();\n      }\n      \n      // Validate inputs - only proceed if we have valid data\n      if (!petId) {\n        console.warn(\"Missing petId in toggleSection\");\n        return;\n      }\n      \n      if (!sectionName) {\n        console.warn(\"Missing sectionName in toggleSection\");\n        return;\n      }\n      \n      // Sanitize inputs to ensure they're simple strings\n      const petIdStr = String(petId);\n      const sectionNameStr = String(sectionName);\n      \n      // Create a consistent key format\n      const key = `${petIdStr}-${sectionNameStr}`;\n      \n      // Update state safely\n      setExpandedSections((prev) => {\n        // If prev is somehow not an object, start fresh\n        if (!prev || typeof prev !== 'object') {\n          const newState = {};\n          newState[key] = true;\n          return newState;\n        }\n        \n        // Create a clean copy of the previous state\n        const newState = { ...prev };\n        \n        // Toggle the value, defaulting to false if not boolean\n        const currentValue = newState[key] === true;\n        newState[key] = !currentValue;\n        \n        return newState;\n      });\n    } catch (err) {\n      // If anything goes wrong, log it but don't crash\n      console.error(\"Error toggling section:\", err.message || \"Unknown error\");\n    }\n  };\n\n  const isSectionExpanded = (petId, sectionName) => {\n    try {\n      // Safety checks for invalid inputs\n      if (!petId || !sectionName) {\n        return false;\n      }\n      \n      // Ensure petId is a string for consistent key format\n      const petIdStr = String(petId);\n      const key = `${petIdStr}-${sectionName}`;\n      \n      // Default to false (closed) for initial view or non-boolean values\n      const result = expandedSections[key] === true;\n      return result;\n    } catch (err) {\n      console.error(\"Error checking if section is expanded:\", err.message || \"Unknown error\");\n      return false; // Default to not expanded on error\n    }\n  };\n\n  const renderSectionHeader = (petId, title, sectionName) => {\n    try {\n      // Safety check for valid inputs\n      if (!petId || !sectionName) {\n        console.warn(\"Missing required parameters in renderSectionHeader\");\n        return null;\n      }\n      \n      // Ensure title has a valid string value\n      const safeTitle = typeof title === 'string' ? title : 'Section';\n      \n      const isExpanded = isSectionExpanded(petId, sectionName);\n      \n      return (\n        <TouchableOpacity \n          style={styles.sectionHeader}\n          onPress={(event) => toggleSection(petId, sectionName, event)}\n        >\n          <Text style={styles.detailTitle}>{safeTitle}</Text>\n          <MaterialCommunityIcons \n            name={isExpanded ? \"chevron-up\" : \"chevron-down\"} \n            size={20} \n            color={theme.colors.text}\n          />\n        </TouchableOpacity>\n      );\n    } catch (error) {\n      console.error(\"Error rendering section header:\", error.message || \"Unknown error\");\n      return null; // Return null on error to prevent crashes\n    }\n  };\n\n  const renderPetCard = (pet) => {\n    // Check if this pet is being edited\n    const isEditing = editingPetIds.has(pet.id);\n    \n    // Get the edited data for this pet if it exists\n    const editedPetData = editedPetsData[pet.id] || {};\n    \n    // Determine if this is a newly added pet\n    const isNewPet = pet.id && pet.id.toString().startsWith('temp_');\n    \n    // Is this pet's details expanded?\n    const isExpanded = expandedPetIds.has(pet.id);\n    \n    // Determine what photo URL to display\n    let photoUri = null;\n    \n    // First priority: if we're editing and have a new photo URI from cropping, use that\n    if (isEditing && editedPetData.photoUri) {\n      // Check if the URI already has http/https or is a data URI\n      if (editedPetData.photoUri.startsWith('http') || editedPetData.photoUri.startsWith('data:')) {\n        photoUri = editedPetData.photoUri;\n      } else {\n        // If it's a relative path, prepend the API base URL\n        photoUri = getMediaUrl(editedPetData.photoUri);\n      }\n      debugLog('MBA5555', 'Using edited pet photo URI:', photoUri);\n    } \n    // Second priority: use the pet's profile_photo from the server if available\n    else if (pet.profile_photo) {\n      // Check if the profile_photo is a valid URL or a relative path\n      if (pet.profile_photo.startsWith('http')) {\n        photoUri = pet.profile_photo;\n      } else {\n        // If it's a relative path, prepend the API base URL\n        photoUri = getMediaUrl(pet.profile_photo);\n      }\n      debugLog('MBA5555', 'Using server profile photo:', photoUri);\n    }\n    \n    return (\n      <View \n        key={pet.id} \n        style={styles.petCard}\n      >\n        <TouchableOpacity\n          style={styles.petCardHeader}\n          onPress={() => togglePetDetails(pet.id)}\n          activeOpacity={0.7}\n        >\n          <View style={styles.petBasicInfo}>\n            {isEditing ? (\n              <View style={styles.editMainContainer}>\n                <View style={styles.editHeaderRow}>\n                  <View style={styles.editProfileContainer}>\n                    <TouchableOpacity\n                      style={styles.profilePhotoButton}\n                      onPress={() => handleUploadDocument(pet.id)}\n                    >\n                      {editedPetData.photoUri ? (\n                        <Image \n                          source={{ uri: editedPetData.photoUri }}\n                          style={styles.petPhoto}\n                        />\n                      ) : photoUri ? (\n                        <Image \n                          source={{ uri: photoUri }}\n                          style={styles.petPhoto}\n                        />\n                      ) : (\n                        <MaterialCommunityIcons \n                          name=\"paw\" \n                          size={40} \n                          color={theme.colors.primary} \n                          style={styles.placeholderIcon}\n                        />\n                      )}\n                      <View style={styles.plusIconContainer}>\n                        <MaterialCommunityIcons name=\"plus-circle\" size={20} color={theme.colors.primary} />\n                      </View>\n                    </TouchableOpacity>\n                  </View>\n                  <View style={[\n                    styles.editActions,\n                    windowWidth < 600 && styles.editActionsSmallScreen\n                  ]}>\n                    {windowWidth < 600 ? (\n                      // Small screen layout: two rows of buttons\n                      <>\n                        <View style={styles.buttonRowTop}>\n                          {!isNewPet && (\n                            <TouchableOpacity \n                              style={styles.deleteButton}\n                              onPress={(event) => {\n                                event.stopPropagation();\n                                handleDeletePet(pet.id);\n                              }}\n                            >\n                              <MaterialCommunityIcons name=\"delete\" size={20} color={theme.colors.error} />\n                            </TouchableOpacity>\n                          )}\n                          <TouchableOpacity \n                            style={styles.saveButton}\n                            onPress={(event) => {\n                              // Prevent event propagation\n                              event.stopPropagation();\n                              // Prevent duplicates\n                              if (savingPet) {\n                                debugLog(\"MBA5555\", \"Save button already clicked, ignoring\");\n                                return;\n                              }\n                              debugLog(\"MBA5555\", \"SAVE BUTTON - Clicked for pet:\", pet.id);\n                              handleSavePetEdit(pet.id);\n                            }}\n                            disabled={savingPet}\n                          >\n                            <Text style={styles.saveButtonText}>\n                              {isNewPet ? 'Create Pet' : 'Save Pet'}\n                            </Text>\n                          </TouchableOpacity>\n                        </View>\n                        <View style={styles.buttonRowBottom}>\n                          <TouchableOpacity \n                            style={styles.editButton}\n                            onPress={(event) => {\n                              event.stopPropagation();\n                              handleCancelPetEdit(pet.id);\n                            }}\n                          >\n                            <MaterialCommunityIcons name=\"close\" size={20} color={theme.colors.error} />\n                          </TouchableOpacity>\n                          <TouchableOpacity \n                            style={styles.editButton}\n                            onPress={(event) => {\n                              event.stopPropagation();\n                              togglePetDetails(pet.id);\n                            }}\n                          >\n                            <MaterialCommunityIcons \n                              name={isExpanded ? \"chevron-up\" : \"chevron-down\"} \n                              size={24} \n                              color={theme.colors.text}\n                            />\n                          </TouchableOpacity>\n                        </View>\n                      </>\n                    ) : (\n                      // Large screen layout: single row\n                      <>\n                        <TouchableOpacity \n                          style={styles.saveButton}\n                          onPress={(event) => {\n                            // Prevent event propagation\n                            event.stopPropagation();\n                            // Prevent duplicates\n                            if (savingPet) {\n                              debugLog(\"MBA5555\", \"Save button already clicked, ignoring\");\n                              return;\n                            }\n                            debugLog(\"MBA5555\", \"SAVE BUTTON - Clicked for pet:\", pet.id);\n                            handleSavePetEdit(pet.id);\n                          }}\n                          disabled={savingPet}\n                        >\n                          <Text style={styles.saveButtonText}>\n                            {isNewPet ? 'Create Pet' : 'Save Pet'}\n                          </Text>\n                        </TouchableOpacity>\n                        {!isNewPet && (\n                          <TouchableOpacity \n                            style={styles.deleteButton}\n                            onPress={(event) => {\n                              event.stopPropagation();\n                              handleDeletePet(pet.id);\n                            }}\n                          >\n                            <MaterialCommunityIcons name=\"delete\" size={20} color={theme.colors.error} />\n                          </TouchableOpacity>\n                        )}\n                        <TouchableOpacity \n                          style={styles.editButton}\n                          onPress={(event) => {\n                            event.stopPropagation();\n                            handleCancelPetEdit(pet.id);\n                          }}\n                        >\n                          <MaterialCommunityIcons name=\"close\" size={20} color={theme.colors.error} />\n                        </TouchableOpacity>\n                        <TouchableOpacity \n                          style={styles.editButton}\n                          onPress={(event) => {\n                            event.stopPropagation();\n                            togglePetDetails(pet.id);\n                          }}\n                        >\n                          <MaterialCommunityIcons \n                            name={isExpanded ? \"chevron-up\" : \"chevron-down\"} \n                            size={24} \n                            color={theme.colors.text}\n                          />\n                        </TouchableOpacity>\n                      </>\n                    )}\n                  </View>\n                </View>\n                \n                <View style={styles.editDetailsContainer}>\n                  <View style={styles.detailRow}>\n                    <View style={styles.detailColumn}>\n                      <Text style={styles.inputLabel}>Name</Text>\n                      <TextInput\n                        style={styles.editInput}\n                        value={editedPetData.name || ''}\n                        onChangeText={(text) => handleEditChange(pet.id, 'name', text)}\n                        placeholder=\"Enter pet name\"\n                        placeholderTextColor={theme.colors.placeholder}\n                      />\n                    </View>\n                    <View style={styles.detailColumn}>\n                      <Text style={styles.inputLabel}>Breed</Text>\n                      <TextInput\n                        style={styles.editInput}\n                        value={editedPetData.breed || ''}\n                        onChangeText={(text) => handleEditChange(pet.id, 'breed', text)}\n                        placeholder=\"Enter breed - ex: Golden Retriever\"\n                        placeholderTextColor={theme.colors.placeholder}\n                      />\n                    </View>\n                  </View>\n                  \n                  {windowWidth < 900 ? (\n                    // Stack animal type and birthday vertically on small screens\n                    <View style={styles.stackedFields}>\n                      <View style={[styles.detailColumn, styles.fullWidth]}>\n                        <Text style={styles.inputLabel}>Animal Type</Text>\n                        <TextInput\n                          style={styles.editInput}\n                          value={editedPetData.type || ''}\n                          onChangeText={(text) => handleEditChange(pet.id, 'type', text)}\n                          placeholder=\"Enter type - ex: Dog\"\n                          placeholderTextColor={theme.colors.placeholder}\n                        />\n                      </View>\n                      \n                      <View style={[styles.detailColumn, styles.fullWidth]}>\n                        <Text style={styles.inputLabel}>Birthday</Text>\n                        <View style={styles.customDatePickerContainer}>\n                          <TouchableOpacity \n                            activeOpacity={0.8}\n                            style={styles.dateInputBox}\n                            onPress={() => showDatePicker(pet.id, 'birthday')}\n                          >\n                            <Text style={[\n                              styles.dateInputText, \n                              !editedPetData.birthday && styles.placeholderText\n                            ]}>\n                              {editedPetData.birthday || 'MM-DD-YYYY'}\n                            </Text>\n                          </TouchableOpacity>\n                          <TouchableOpacity \n                            style={styles.calendarButton}\n                            onPress={() => showDatePicker(pet.id, 'birthday')}\n                            activeOpacity={0.7}\n                          >\n                            <MaterialCommunityIcons name=\"calendar\" size={20} color={theme.colors.primary} />\n                          </TouchableOpacity>\n                        </View>\n                      </View>\n                    </View>\n                  ) : (\n                    // Original horizontal layout for larger screens\n                    <View style={styles.detailRow}>\n                      <View style={styles.detailColumn}>\n                        <Text style={styles.inputLabel}>Birthday</Text>\n                        <View style={styles.customDatePickerContainer}>\n                          <TouchableOpacity \n                            activeOpacity={0.8}\n                            style={styles.dateInputBox}\n                            onPress={() => showDatePicker(pet.id, 'birthday')}\n                          >\n                            <Text style={[\n                              styles.dateInputText, \n                              !editedPetData.birthday && styles.placeholderText\n                            ]}>\n                              {editedPetData.birthday || 'MM-DD-YYYY'}\n                            </Text>\n                          </TouchableOpacity>\n                          <TouchableOpacity \n                            style={styles.calendarButton}\n                            onPress={() => showDatePicker(pet.id, 'birthday')}\n                            activeOpacity={0.7}\n                          >\n                            <MaterialCommunityIcons name=\"calendar\" size={20} color={theme.colors.primary} />\n                          </TouchableOpacity>\n                        </View>\n                      </View>\n                      <View style={styles.detailColumn}>\n                        <Text style={styles.inputLabel}>Animal Type</Text>\n                        <TextInput\n                          style={styles.editInput}\n                          value={editedPetData.type || ''}\n                          onChangeText={(text) => handleEditChange(pet.id, 'type', text)}\n                          placeholder=\"Enter type - ex: Dog\"\n                          placeholderTextColor={theme.colors.placeholder}\n                        />\n                      </View>\n                    </View>\n                  )}\n                </View>\n              </View>\n            ) : (\n              <>\n                {photoUri ? (\n                  <Image \n                    source={{ uri: photoUri }}\n                    style={styles.petPhoto}\n                    onError={(e) => {\n                      debugLog('MBA5555', 'Error loading pet photo:', e.nativeEvent.error);\n                      // If there's an error loading the image, set photoUri to null to show the default icon\n                      setEditedPetsData(prev => ({\n                        ...prev,\n                        [pet.id]: {\n                          ...(prev[pet.id] || {}),\n                          photoLoadError: true\n                        }\n                      }));\n                    }}\n                  />\n                ) : (\n                  <MaterialCommunityIcons \n                    name=\"paw\" \n                    size={40} \n                    color={theme.colors.primary} \n                    style={styles.placeholderIcon}\n                  />\n                )}\n                <View style={[\n                  styles.petInfo,\n                  windowWidth < 600 && styles.petInfoWithButtonPadding\n                ]}>\n                  <Text style={styles.petName}>{pet.name.toLowerCase().charAt(0).toUpperCase() + pet.name.toLowerCase().slice(1)}</Text>\n                  <View style={styles.petDetailsContainer}>\n                    <Text style={styles.petDetails}>\n                    {pet.type ? pet.type.toLowerCase().charAt(0).toUpperCase() + pet.type.toLowerCase().slice(1) : 'No type'} • {pet.birthday ? calculateAge(pet.birthday) : 'No age set'} • {pet.breed ? pet.breed.toLowerCase().charAt(0).toUpperCase() + pet.breed.toLowerCase().slice(1) : 'No breed'}\n                    </Text>\n                  </View>\n                </View>\n              </>\n            )}\n          </View>\n          {!isEditing && windowWidth < 600 ? (\n            <>\n              <TouchableOpacity\n                style={[styles.editButton, styles.editButtonTopRight]}\n                onPress={() => handleEditPet(pet.id)}\n              >\n                <MaterialCommunityIcons name=\"pencil\" size={20} color={theme.colors.primary} />\n              </TouchableOpacity>\n              <TouchableOpacity\n                style={[styles.editButton, styles.chevronButtonBottomRight]}\n                onPress={() => togglePetDetails(pet.id)}\n              >\n                <MaterialCommunityIcons\n                  name={isExpanded ? \"chevron-up\" : \"chevron-down\"}\n                  size={24}\n                  color={theme.colors.text}\n                />\n              </TouchableOpacity>\n            </>\n          ) : !isEditing ? (\n            <View style={styles.petActions}>\n              <TouchableOpacity\n                style={styles.editButton}\n                onPress={() => handleEditPet(pet.id)}\n              >\n                <MaterialCommunityIcons name=\"pencil\" size={20} color={theme.colors.primary} />\n              </TouchableOpacity>\n              <TouchableOpacity\n                style={styles.editButton}\n                onPress={() => togglePetDetails(pet.id)}\n              >\n                <MaterialCommunityIcons\n                  name={isExpanded ? \"chevron-up\" : \"chevron-down\"}\n                  size={24}\n                  color={theme.colors.text}\n                />\n              </TouchableOpacity>\n            </View>\n          ) : null}\n        </TouchableOpacity>\n\n        {isExpanded && (\n          <View style={[styles.expandedDetails, { backgroundColor: theme.colors.surfaceContrast }]}>\n            <View style={styles.detailRow}>\n              <View style={styles.detailColumn}>\n                <Text style={styles.detailTitle}>Feeding Instructions</Text>\n                {isEditing ? (\n                  <TextInput\n                    style={styles.editInput}\n                    value={editedPetData.feedingInstructions || ''}\n                    onChangeText={(text) => handleEditChange(pet.id, 'feedingInstructions', text)}\n                    placeholder=\"Enter feeding instructions\"\n                    placeholderTextColor={theme.colors.placeholder}\n                    multiline\n                  />\n                ) : (\n                  <Text style={styles.detailText}>{pet.feedingInstructions || 'No feeding instructions yet'}</Text>\n                )}\n              </View>\n              <View style={styles.detailColumn}>\n                <Text style={styles.detailTitle}>Medical Notes</Text>\n                {isEditing ? (\n                  <TextInput\n                    style={styles.editInput}\n                    value={editedPetData.medicalNotes || ''}\n                    onChangeText={(text) => handleEditChange(pet.id, 'medicalNotes', text)}\n                    placeholder=\"Enter medical notes\"\n                    placeholderTextColor={theme.colors.placeholder}\n                    multiline\n                  />\n                ) : (\n                  <Text style={styles.detailText}>{pet.medicalNotes || 'No medical notes yet'}</Text>\n                )}\n              </View>\n            </View>\n            <View style={styles.detailRow}>\n              <View style={styles.detailColumn}>\n                <Text style={styles.detailTitle}>Potty Break Schedule</Text>\n                {isEditing ? (\n                  <TextInput\n                    style={styles.editInput}\n                    value={editedPetData.pottyBreakSchedule || ''}\n                    onChangeText={(text) => handleEditChange(pet.id, 'pottyBreakSchedule', text)}\n                    placeholder=\"Potty break schedule\"\n                    placeholderTextColor={theme.colors.placeholder}\n                    multiline\n                  />\n                ) : (\n                  <Text style={styles.detailText}>{pet.pottyBreakSchedule || 'No potty break schedule yet'}</Text>\n                )}\n              </View>\n              <View style={styles.detailColumn}>\n                <Text style={styles.detailTitle}>Special Care Instructions</Text>\n                {isEditing ? (\n                  <TextInput\n                    style={styles.editInput}\n                    value={editedPetData.specialCareInstructions || ''}\n                    onChangeText={(text) => handleEditChange(pet.id, 'specialCareInstructions', text)}\n                    placeholder=\"Special care instructions\"\n                    placeholderTextColor={theme.colors.placeholder}\n                    multiline\n                  />\n                ) : (\n                  <Text style={styles.detailText}>{pet.specialCareInstructions || 'No special care instructions yet'}</Text>\n                )}\n              </View>\n            </View>\n            \n            <View style={styles.detailSection}>\n              {renderSectionHeader(pet.id, \"Care Information\", \"careInfo\")}\n              \n              {isSectionExpanded(pet.id, \"careInfo\") && (\n                <View style={styles.detailColumn}>\n                  <View style={styles.careInfoContainer}>\n                    <View style={styles.compatibilityItem}>\n                      <Text style={styles.compatibilityLabel}>Energy level:</Text>\n                      {isEditing ? (\n                        <View style={styles.dropdownContainerEdit}>\n                          {energyLevelOptions.map((option) => (\n                            <TouchableOpacity\n                              key={option}\n                              style={[\n                                styles.optionButton,\n                                (editedPetData.energyLevel === null && option === \"N/A\") || \n                                editedPetData.energyLevel === option ? styles.selectedOption : null\n                              ]}\n                              onPress={() => handleEditChange(pet.id, 'energyLevel', option === \"N/A\" ? null : option)}\n                            >\n                              <Text style={[\n                                styles.optionText,\n                                (editedPetData.energyLevel === null && option === \"N/A\") || \n                                editedPetData.energyLevel === option ? styles.selectedOptionText : null\n                              ]}>\n                                {option ? option : \"None selected yet\"}\n                              </Text>\n                            </TouchableOpacity>\n                          ))}\n                        </View>\n                      ) : (\n                        returnEnergyLevelContainer(pet)\n                      )}\n                    </View>\n                    \n                    {/* Removing duplicate \"Can be left alone\" section as it's already in the Compatibility & Training section */}\n                    \n                    <View style={styles.compatibilityItem}>\n                      <Text style={styles.compatibilityLabel}>Weight (lbs):</Text>\n                      {isEditing ? (\n                        <TextInput\n                          style={styles.editInputWeight}\n                          value={editedPetData.weight || ''}\n                          onChangeText={(text) => {\n                            // Only allow numbers and decimal point\n                            if (/^(\\d*\\.?\\d*)$/.test(text) || text === '') {\n                              handleEditChange(pet.id, 'weight', text);\n                            }\n                          }}\n                          placeholder=\"Enter weight\"\n                          placeholderTextColor={theme.colors.placeholder}\n                          keyboardType=\"numeric\"\n                        />\n                      ) : (\n                        <Text style={styles.vetInfoText}>{pet.weight || 'Not specified'}</Text>\n                      )}\n                    </View>\n                    <View style={styles.medicationsContainer}>\n                      <Text style={styles.compatibilityLabel}>Medications:</Text>\n                      {isEditing ? (\n                        <TextInput\n                          style={styles.editInputMedications}\n                          value={editedPetData.medications || ''}\n                          onChangeText={(text) => handleEditChange(pet.id, 'medications', text)}\n                          placeholder=\"Enter medications\"\n                          placeholderTextColor={theme.colors.placeholder}\n                          multiline\n                        />\n                      ) : (\n                        <Text style={styles.medicationsText}>\n                          {pet.medications || 'None'}\n                        </Text>\n                      )}\n                    </View>\n                  </View>\n                </View>\n              )}\n            </View>\n            \n            <View style={styles.detailSection}>\n              {renderSectionHeader(pet.id, \"Compatibility & Training\", \"compatibility\")}\n              \n              {isSectionExpanded(pet.id, \"compatibility\") && (\n                <View style={styles.detailColumn}>\n                  <View style={styles.compatibilityContainer}>\n                    <View style={styles.compatibilityItem}>\n                      <Text style={styles.compatibilityLabel}>Friendly with children:</Text>\n                      {isEditing ? (\n                        <View style={styles.dropdownContainerEdit}>\n                          {yesNoOptions.map((option) => (\n                            <TouchableOpacity\n                              key={option}\n                              style={[\n                                styles.optionButton,\n                                (editedPetData.childrenFriendly === null && option === \"N/A\") || \n                                (editedPetData.childrenFriendly === true && option === \"Yes\") || \n                                (editedPetData.childrenFriendly === false && option === \"No\") ||\n                                editedPetData.childrenFriendly === option ? styles.selectedOption : null\n                              ]}\n                              onPress={() => handleEditChange(pet.id, 'childrenFriendly', option === \"N/A\" ? null : option)}\n                            >\n                              <Text style={[\n                                styles.optionText,\n                                (editedPetData.childrenFriendly === null && option === \"N/A\") || \n                                (editedPetData.childrenFriendly === true && option === \"Yes\") || \n                                (editedPetData.childrenFriendly === false && option === \"No\") ||\n                                editedPetData.childrenFriendly === option ? styles.selectedOptionText : null\n                              ]}>\n                                {option}\n                              </Text>\n                            </TouchableOpacity>\n                          ))}\n                        </View>\n                      ) : (\n                        returnYesNoContainer(pet, 'childrenFriendly')\n                      )}\n                    </View>\n                    <View style={styles.compatibilityItem}>\n                      <Text style={styles.compatibilityLabel}>Friendly with cats:</Text>\n                      {isEditing ? (\n                        <View style={styles.dropdownContainerEdit}>\n                          {yesNoOptions.map((option) => (\n                            <TouchableOpacity\n                              key={option}\n                              style={[\n                                styles.optionButton,\n                                (editedPetData.catFriendly === null && option === \"N/A\") || \n                                (editedPetData.catFriendly === true && option === \"Yes\") || \n                                (editedPetData.catFriendly === false && option === \"No\") ||\n                                editedPetData.catFriendly === option ? styles.selectedOption : null\n                              ]}\n                              onPress={() => handleEditChange(pet.id, 'catFriendly', option === \"N/A\" ? null : option)}\n                            >\n                              <Text style={[\n                                styles.optionText,\n                                (editedPetData.catFriendly === null && option === \"N/A\") || \n                                (editedPetData.catFriendly === true && option === \"Yes\") || \n                                (editedPetData.catFriendly === false && option === \"No\") ||\n                                editedPetData.catFriendly === option ? styles.selectedOptionText : null\n                              ]}>\n                                {option}\n                              </Text>\n                            </TouchableOpacity>\n                          ))}\n                        </View>\n                      ) : (\n                        returnYesNoContainer(pet, 'catFriendly')\n                      )}\n                    </View>\n                    <View style={styles.compatibilityItem}>\n                      <Text style={styles.compatibilityLabel}>Friendly with dogs:</Text>\n                      {isEditing ? (\n                        <View style={styles.dropdownContainerEdit}>\n                          {yesNoOptions.map((option) => (\n                            <TouchableOpacity\n                              key={option}\n                              style={[\n                                styles.optionButton,\n                                (editedPetData.dogFriendly === null && option === \"N/A\") || \n                                (editedPetData.dogFriendly === true && option === \"Yes\") || \n                                (editedPetData.dogFriendly === false && option === \"No\") ||\n                                editedPetData.dogFriendly === option ? styles.selectedOption : null\n                              ]}\n                              onPress={() => handleEditChange(pet.id, 'dogFriendly', option === \"N/A\" ? null : option)}\n                            >\n                              <Text style={[\n                                styles.optionText,\n                                (editedPetData.dogFriendly === null && option === \"N/A\") || \n                                (editedPetData.dogFriendly === true && option === \"Yes\") || \n                                (editedPetData.dogFriendly === false && option === \"No\") ||\n                                editedPetData.dogFriendly === option ? styles.selectedOptionText : null\n                              ]}>\n                                {option}\n                              </Text>\n                            </TouchableOpacity>\n                          ))}\n                        </View>\n                      ) : (\n                        returnYesNoContainer(pet, 'dogFriendly')\n                      )}\n                    </View>\n                    <View style={styles.compatibilityItem}>\n                      <Text style={styles.compatibilityLabel}>Spayed/neutered:</Text>\n                      {isEditing ? (\n                        <View style={styles.dropdownContainerEdit}>\n                          {yesNoOptions.map((option) => (\n                            <TouchableOpacity\n                              key={option}\n                              style={[\n                                styles.optionButton,\n                                (editedPetData.spayedNeutered === null && option === \"N/A\") || \n                                (editedPetData.spayedNeutered === true && option === \"Yes\") || \n                                (editedPetData.spayedNeutered === false && option === \"No\") ||\n                                editedPetData.spayedNeutered === option ? styles.selectedOption : null\n                              ]}\n                              onPress={() => handleEditChange(pet.id, 'spayedNeutered', option === \"N/A\" ? null : option)}\n                            >\n                              <Text style={[\n                                styles.optionText,\n                                (editedPetData.spayedNeutered === null && option === \"N/A\") || \n                                (editedPetData.spayedNeutered === true && option === \"Yes\") || \n                                (editedPetData.spayedNeutered === false && option === \"No\") ||\n                                editedPetData.spayedNeutered === option ? styles.selectedOptionText : null\n                              ]}>\n                                {option}\n                              </Text>\n                            </TouchableOpacity>\n                          ))}\n                        </View>\n                      ) : (\n                        returnYesNoContainer(pet, 'spayedNeutered')\n                      )}\n                    </View>\n                    <View style={styles.compatibilityItem}>\n                      <Text style={styles.compatibilityLabel}>House trained:</Text>\n                      {isEditing ? (\n                        <View style={styles.dropdownContainerEdit}>\n                          {yesNoOptions.map((option) => (\n                            <TouchableOpacity\n                              key={option}\n                              style={[\n                                styles.optionButton,\n                                (editedPetData.houseTrained === null && option === \"N/A\") || \n                                (editedPetData.houseTrained === true && option === \"Yes\") || \n                                (editedPetData.houseTrained === false && option === \"No\") ||\n                                editedPetData.houseTrained === option ? styles.selectedOption : null\n                              ]}\n                              onPress={() => handleEditChange(pet.id, 'houseTrained', option === \"N/A\" ? null : option)}\n                            >\n                              <Text style={[\n                                styles.optionText,\n                                (editedPetData.houseTrained === null && option === \"N/A\") || \n                                (editedPetData.houseTrained === true && option === \"Yes\") || \n                                (editedPetData.houseTrained === false && option === \"No\") ||\n                                editedPetData.houseTrained === option ? styles.selectedOptionText : null\n                              ]}>\n                                {option}\n                              </Text>\n                            </TouchableOpacity>\n                          ))}\n                        </View>\n                      ) : (\n                        returnYesNoContainer(pet, 'houseTrained')\n                      )}\n                    </View>\n                    <View style={styles.compatibilityItem}>\n                      <Text style={styles.compatibilityLabel}>Microchipped:</Text>\n                      {isEditing ? (\n                        <View style={styles.dropdownContainerEdit}>\n                          {yesNoOptions.map((option) => (\n                            <TouchableOpacity\n                              key={option}\n                              style={[\n                                styles.optionButton,\n                                (editedPetData.microchipped === null && option === \"N/A\") || \n                                (editedPetData.microchipped === true && option === \"Yes\") || \n                                (editedPetData.microchipped === false && option === \"No\") ||\n                                editedPetData.microchipped === option ? styles.selectedOption : null\n                              ]}\n                              onPress={() => handleEditChange(pet.id, 'microchipped', option === \"N/A\" ? null : option)}\n                            >\n                              <Text style={[\n                                styles.optionText,\n                                (editedPetData.microchipped === null && option === \"N/A\") || \n                                (editedPetData.microchipped === true && option === \"Yes\") || \n                                (editedPetData.microchipped === false && option === \"No\") ||\n                                editedPetData.microchipped === option ? styles.selectedOptionText : null\n                              ]}>\n                                {option}\n                              </Text>\n                            </TouchableOpacity>\n                          ))}\n                        </View>\n                      ) : (\n                        returnYesNoContainer(pet, 'microchipped')\n                      )}\n                    </View>\n                    <View style={styles.compatibilityItem}>\n                      <Text style={styles.compatibilityLabel}>Can be left alone:</Text>\n                      {isEditing ? (\n                        <View style={styles.dropdownContainerEdit}>\n                          {yesNoOptions.map((option) => (\n                            <TouchableOpacity\n                              key={option}\n                              style={[\n                                styles.optionButton,\n                                (editedPetData.canBeLeftAlone === null && option === \"N/A\") || \n                                (editedPetData.canBeLeftAlone === true && option === \"Yes\") || \n                                (editedPetData.canBeLeftAlone === false && option === \"No\") ||\n                                editedPetData.canBeLeftAlone === option ? styles.selectedOption : null\n                              ]}\n                              onPress={() => handleEditChange(pet.id, 'canBeLeftAlone', option === \"N/A\" ? null : option)}\n                            >\n                              <Text style={[\n                                styles.optionText,\n                                (editedPetData.canBeLeftAlone === null && option === \"N/A\") || \n                                (editedPetData.canBeLeftAlone === true && option === \"Yes\") || \n                                (editedPetData.canBeLeftAlone === false && option === \"No\") ||\n                                editedPetData.canBeLeftAlone === option ? styles.selectedOptionText : null\n                              ]}>\n                                {option}\n                              </Text>\n                            </TouchableOpacity>\n                          ))}\n                        </View>\n                      ) : (\n                        returnYesNoContainer(pet, 'canBeLeftAlone')\n                      )}\n                    </View>\n                  </View>\n                </View>\n              )}\n            </View>\n            \n            <View style={styles.detailSection}>\n              {renderSectionHeader(pet.id, \"Vet Information\", \"vetInfo\")}\n              \n              {isSectionExpanded(pet.id, \"vetInfo\") && (\n                <View style={styles.detailColumn}>\n                  <View style={styles.vetInfoContainer}>\n                    <View style={styles.vetInfoItem}>\n                      <Text style={styles.vetInfoLabel}>Vet name:</Text>\n                      {isEditing ? (\n                        <TextInput\n                          style={styles.editInputShort}\n                          value={editedPetData.vetName || ''}\n                          onChangeText={(text) => handleEditChange(pet.id, 'vetName', text)}\n                          placeholder=\"Enter vet name\"\n                          placeholderTextColor={theme.colors.placeholder}\n                        />\n                      ) : (\n                        <Text style={styles.vetInfoText}>{pet.vetName || 'None'}</Text>\n                      )}\n                    </View>\n                    <View style={styles.vetInfoItem}>\n                      <Text style={styles.vetInfoLabel}>Vet address:</Text>\n                      {isEditing ? (\n                        <TextInput\n                          style={styles.editInputShort}\n                          value={editedPetData.vetAddress || ''}\n                          onChangeText={(text) => handleEditChange(pet.id, 'vetAddress', text)}\n                          placeholder=\"Enter vet address\"\n                          placeholderTextColor={theme.colors.placeholder}\n                        />\n                      ) : (\n                        <Text style={styles.vetInfoText}>{pet.vetAddress || 'None'}</Text>\n                      )}\n                    </View>\n                    <View style={styles.vetInfoItem}>\n                      <Text style={styles.vetInfoLabel}>Vet phone:</Text>\n                      {isEditing ? (\n                        <TextInput\n                          style={styles.editInputShort}\n                          value={editedPetData.vetPhone || ''}\n                          onChangeText={(text) => handleEditChange(pet.id, 'vetPhone', text)}\n                          placeholder=\"Enter vet phone\"\n                          placeholderTextColor={theme.colors.placeholder}\n                          keyboardType=\"phone-pad\"\n                          maxLength={12}\n                        />\n                      ) : (\n                        <Text style={styles.vetInfoText}>{pet.vetPhone || 'None'}</Text>\n                      )}\n                    </View>\n                    <View style={styles.vetInfoItem}>\n                      <Text style={styles.vetInfoLabel}>Insurance provider:</Text>\n                      {isEditing ? (\n                        <TextInput\n                          style={styles.editInputShort}\n                          value={editedPetData.insuranceProvider || ''}\n                          onChangeText={(text) => handleEditChange(pet.id, 'insuranceProvider', text)}\n                          placeholder=\"Enter insurance provider\"\n                          placeholderTextColor={theme.colors.placeholder}\n                        />\n                      ) : (\n                        <Text style={styles.vetInfoText}>{pet.insuranceProvider || 'Not specified'}</Text>\n                      )}\n                    </View>\n                    <View style={styles.vetInfoItem}>\n                      <Text style={styles.vetInfoLabel}>Sex:</Text>\n                      {isEditing ? (\n                        <View style={styles.dropdownContainerEdit}>\n                          {sexOptions.map((option) => (\n                            <TouchableOpacity\n                              key={option}\n                              style={[\n                                styles.optionButton,\n                                editedPetData.sex === option ? styles.selectedOption : null\n                              ]}\n                              onPress={() => handleEditChange(pet.id, 'sex', option)}\n                            >\n                              <Text style={[\n                                styles.optionText,\n                                editedPetData.sex === option ? styles.selectedOptionText : null\n                              ]}>\n                                {option}\n                              </Text>\n                            </TouchableOpacity>\n                          ))}\n                        </View>\n                      ) : (\n                        <Text style={styles.vetInfoText}>{pet.sex || 'None Selected'}</Text>\n                      )}\n                    </View>\n                    <View style={styles.vetInfoItem}>\n                      <Text style={styles.vetInfoLabel}>Adoption Date:</Text>\n                      {isEditing ? (\n                        <View style={styles.customDatePickerContainer}>\n                          <TouchableOpacity \n                            activeOpacity={0.8}\n                            style={styles.dateInputBox}\n                            onPress={() => showDatePicker(pet.id, 'adoptionDate')}\n                          >\n                            <Text style={[\n                              styles.dateInputText, \n                              !editedPetData.adoptionDate && styles.placeholderText\n                            ]}>\n                              {editedPetData.adoptionDate || 'MM-DD-YYYY'}\n                            </Text>\n                          </TouchableOpacity>\n                          <TouchableOpacity \n                            style={styles.calendarButton}\n                            onPress={() => showDatePicker(pet.id, 'adoptionDate')}\n                            activeOpacity={0.7}\n                          >\n                            <MaterialCommunityIcons name=\"calendar\" size={20} color={theme.colors.primary} />\n                          </TouchableOpacity>\n                        </View>\n                      ) : (\n                        <Text style={styles.vetInfoText}>{pet.adoptionDate || 'Not specified'}</Text>\n                      )}\n                    </View>\n                    {/* TODO: add back after MVP <View style={styles.vetInfoItem}>\n                      <Text style={styles.vetInfoLabel}>Vet documents:</Text>\n                      {isEditing ? (\n                        <View style={styles.documentActionContainer}>\n                          <TouchableOpacity \n                            style={styles.uploadButton}\n                            onPress={() => handleUploadDocument(pet.id)}\n                          >\n                            <MaterialCommunityIcons name=\"upload\" size={16} color={theme.colors.background} />\n                            <Text style={styles.uploadButtonText}>Upload</Text>\n                          </TouchableOpacity>\n                          {renderVetDocuments(editedPetData.vetDocuments)}\n                        </View>\n                      ) : (\n                        <TouchableOpacity style={styles.documentButton}>\n                          <MaterialCommunityIcons name=\"file-document-outline\" size={16} color={theme.colors.primary} />\n                          <Text style={styles.documentButtonText}>View documents</Text>\n                        </TouchableOpacity>\n                      )}\n                    </View> */}\n                  </View>\n                </View>\n              )}\n            </View>\n          </View>\n        )}\n      </View>\n    );\n  };\n\n  const validateContactInput = (field, value, type) => {\n    debugLog('MBA1234', 'Validating contact input:', { field, value, type });\n    \n    let sanitized = value;\n    let error = '';\n    \n    if (field === 'name') {\n      sanitized = sanitizeInput(value, 'name', { maxLength: 50 });\n      \n      // Check for malicious content\n      const originalLength = value.length;\n      const sanitizedLength = sanitized.length;\n      const removalPercentage = originalLength > 0 ? ((originalLength - sanitizedLength) / originalLength) * 100 : 0;\n      \n      if (removalPercentage > 30 && originalLength > 3) {\n        debugLog('MBA1234', `Malicious content detected in ${type} name:`, { originalLength, sanitizedLength, removalPercentage });\n        error = `Invalid characters detected in ${type} name`;\n      } else {\n        const nameValidation = validateName(sanitized);\n        if (!nameValidation.isValid && sanitized.length > 0) {\n          error = nameValidation.message;\n        } else if (sanitized.length > 0 && sanitized.length < 2) {\n          error = `${type} name must be at least 2 characters long`;\n        }\n      }\n    } else if (field === 'phone') {\n      // For contact phone, be more restrictive - only allow numbers and format as XXX-XXX-XXXX\n      const numbersOnly = value.replace(/\\D/g, ''); // Remove all non-digits\n      \n      if (numbersOnly.length > 10) {\n        // Don't allow more than 10 digits\n        sanitized = formatPhoneNumber(numbersOnly.substring(0, 10));\n        error = 'Phone number cannot exceed 10 digits';\n      } else if (numbersOnly.length > 0) {\n        sanitized = formatPhoneNumber(numbersOnly);\n        \n        if (numbersOnly.length === 10) {\n          // Validate complete phone number\n          const phoneValidation = validatePhoneNumber(sanitized);\n          if (!phoneValidation.isValid) {\n            error = phoneValidation.message;\n          }\n        } else if (numbersOnly.length < 10 && numbersOnly.length > 0) {\n          // Allow partial entry but show it's incomplete\n          // Don't set error for partial entry to allow typing\n        }\n      } else {\n        sanitized = '';\n      }\n    }\n    \n    return { sanitized, error };\n  };\n\n  const handleContactInputChange = (field, value, type) => {\n    // First check for dangerous content that should always be blocked\n    const hasScriptTags = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi.test(value);\n    const hasSqlInjection = /\\b(SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|EXEC|UNION|SCRIPT|JAVASCRIPT|VBSCRIPT)\\b/gi.test(value);\n    \n    if (hasScriptTags || hasSqlInjection) {\n      debugLog('MBA1234', 'Dangerous content detected and blocked in contact input:', { field, value, type });\n      return; // Don't update the input if it contains dangerous content\n    }\n    \n    const { sanitized, error } = validateContactInput(field, value, type);\n    \n    // Update validation errors\n    setContactValidationErrors(prevErrors => {\n      const newErrors = { ...prevErrors };\n      const errorKey = `${type}_${field}`;\n      \n      if (error) {\n        newErrors[errorKey] = error;\n      } else {\n        delete newErrors[errorKey];\n      }\n      \n      return newErrors;\n    });\n    \n    // Update the input state with sanitized value for proper formatting\n    if (type === 'emergency') {\n      setNewEmergencyContact(prev => ({\n        ...prev,\n        [field]: sanitized\n      }));\n    } else if (type === 'household') {\n      setNewHouseholdMember(prev => ({\n        ...prev,\n        [field]: sanitized\n      }));\n    }\n  };\n\n  const handleAddEmergencyContact = () => {\n    // Validate inputs before adding\n    const nameError = contactValidationErrors.emergency_name;\n    const phoneError = contactValidationErrors.emergency_phone;\n    \n    if (nameError || phoneError) {\n      debugLog('MBA1234', 'Cannot add emergency contact due to validation errors:', { nameError, phoneError });\n      return;\n    }\n    \n    if (newEmergencyContact.name && newEmergencyContact.phone) {\n      debugLog(\"MBA123\", \"Adding emergency contact\", newEmergencyContact);\n      const updatedContacts = [...(preferences.emergencyContacts || []), newEmergencyContact];\n      onUpdatePreferences('emergencyContacts', updatedContacts);\n      setNewEmergencyContact({ name: '', phone: '' });\n      setIsAddingEmergencyContact(false);\n      \n      // Clear validation errors\n      setContactValidationErrors(prevErrors => {\n        const newErrors = { ...prevErrors };\n        delete newErrors.emergency_name;\n        delete newErrors.emergency_phone;\n        return newErrors;\n      });\n    }\n  };\n\n  const handleAddHouseholdMember = () => {\n    // Validate inputs before adding\n    const nameError = contactValidationErrors.household_name;\n    const phoneError = contactValidationErrors.household_phone;\n    \n    if (nameError || phoneError) {\n      debugLog('MBA1234', 'Cannot add household member due to validation errors:', { nameError, phoneError });\n      return;\n    }\n    \n    if (newHouseholdMember.name && newHouseholdMember.phone) {\n      debugLog(\"MBA123\", \"Adding household member\", newHouseholdMember);\n      const updatedMembers = [...(preferences.authorizedHouseholdMembers || []), newHouseholdMember];\n      onUpdatePreferences('authorizedHouseholdMembers', updatedMembers);\n      setNewHouseholdMember({ name: '', phone: '' });\n      setIsAddingHouseholdMember(false);\n      \n      // Clear validation errors\n      setContactValidationErrors(prevErrors => {\n        const newErrors = { ...prevErrors };\n        delete newErrors.household_name;\n        delete newErrors.household_phone;\n        return newErrors;\n      });\n    }\n  };\n\n  const handleRemoveEmergencyContact = (index) => {\n    debugLog(\"MBA123\", \"Removing emergency contact\", index);\n    const updatedContacts = [...(preferences.emergencyContacts || [])];\n    updatedContacts.splice(index, 1);\n    onUpdatePreferences('emergencyContacts', updatedContacts);\n  };\n\n  const handleRemoveHouseholdMember = (index) => {\n    debugLog(\"MBA123\", \"Removing household member\", index);\n    const updatedMembers = [...(preferences.authorizedHouseholdMembers || [])];\n    updatedMembers.splice(index, 1);\n    onUpdatePreferences('authorizedHouseholdMembers', updatedMembers);\n  };\n\n  const handleAddAsHouseholdMember = (contact) => {\n    debugLog(\"MBA123\", \"Adding emergency contact as household member\", contact);\n    const updatedMembers = [...(preferences.authorizedHouseholdMembers || [])];\n    \n    // Check if already exists\n    const exists = updatedMembers.some(member => \n      member.name === contact.name && member.phone === contact.phone\n    );\n    \n    if (!exists) {\n      updatedMembers.push(contact);\n      onUpdatePreferences('authorizedHouseholdMembers', updatedMembers);\n    }\n  };\n\n  const renderEmergencyContactsSection = () => {\n    if (userRole !== 'petOwner') return null;\n\n    return (\n      <View style={[styles.section, { backgroundColor: theme.colors.surfaceContrast }]}>\n        <View style={styles.sectionHeader}>\n          <Text style={styles.sectionTitle}>Emergency Contacts</Text>\n          <TouchableOpacity \n            style={styles.addButton}\n            onPress={() => setIsAddingEmergencyContact(!isAddingEmergencyContact)}\n          >\n            <MaterialCommunityIcons name=\"plus\" size={20} color={theme.colors.background} />\n            <Text style={styles.addButtonText}>Add Contact</Text>\n          </TouchableOpacity>\n        </View>\n        \n        {isAddingEmergencyContact && (\n          <View style={styles.addContactForm}>\n            <View>\n              <TextInput\n                style={[\n                  styles.input,\n                  contactValidationErrors.emergency_name ? styles.inputError : null\n                ]}\n                placeholder=\"Contact Name\"\n                value={newEmergencyContact.name}\n                onChangeText={(text) => handleContactInputChange('name', text, 'emergency')}\n                maxLength={50}\n              />\n              {contactValidationErrors.emergency_name ? (\n                <Text style={styles.errorText}>{contactValidationErrors.emergency_name}</Text>\n              ) : null}\n            </View>\n            <View>\n              <TextInput\n                style={[\n                  styles.input,\n                  contactValidationErrors.emergency_phone ? styles.inputError : null\n                ]}\n                placeholder=\"719-510-6342\"\n                value={newEmergencyContact.phone}\n                onChangeText={(text) => handleContactInputChange('phone', text, 'emergency')}\n                keyboardType=\"phone-pad\"\n                maxLength={12}\n              />\n              {contactValidationErrors.emergency_phone ? (\n                <Text style={styles.errorText}>{contactValidationErrors.emergency_phone}</Text>\n              ) : null}\n            </View>\n            <TouchableOpacity \n              style={[\n                styles.submitButton,\n                (contactValidationErrors.emergency_name || contactValidationErrors.emergency_phone || !newEmergencyContact.name.trim() || !newEmergencyContact.phone.trim()) ? styles.submitButtonDisabled : null\n              ]}\n              onPress={handleAddEmergencyContact}\n              disabled={contactValidationErrors.emergency_name || contactValidationErrors.emergency_phone || !newEmergencyContact.name.trim() || !newEmergencyContact.phone.trim()}\n            >\n              <Text style={styles.submitButtonText}>Save Contact</Text>\n            </TouchableOpacity>\n          </View>\n        )}\n        \n        <View style={styles.contactsList}>\n          {(preferences.emergencyContacts || []).map((contact, index) => (\n            <View key={index} style={styles.contactCard}>\n              <View style={styles.contactInfo}>\n                <Text style={styles.contactName}>{contact.name}</Text>\n                <Text style={styles.contactPhone}>{contact.phone}</Text>\n              </View>\n              <View style={styles.contactActions}>\n                <TouchableOpacity \n                  style={styles.actionButton}\n                  onPress={() => handleAddAsHouseholdMember(contact)}\n                >\n                  <MaterialCommunityIcons name=\"account-plus\" size={20} color={theme.colors.primary} />\n                </TouchableOpacity>\n                <TouchableOpacity \n                  style={styles.actionButton}\n                  onPress={() => handleRemoveEmergencyContact(index)}\n                >\n                  <MaterialCommunityIcons name=\"delete\" size={20} color={theme.colors.error} />\n                </TouchableOpacity>\n              </View>\n            </View>\n          ))}\n          {(preferences.emergencyContacts || []).length === 0 && !isAddingEmergencyContact && (\n            <Text style={styles.emptyListText}>No emergency contacts added yet</Text>\n          )}\n        </View>\n      </View>\n    );\n  };\n\n  const renderHouseholdMembersSection = () => {\n    if (userRole !== 'petOwner') return null;\n\n    return (\n      <View style={[styles.section, { backgroundColor: theme.colors.surfaceContrast }]}>\n        <View style={styles.sectionHeader}>\n          <Text style={styles.sectionTitle}>Authorized Household Members</Text>\n          <TouchableOpacity \n            style={styles.addButton}\n            onPress={() => setIsAddingHouseholdMember(!isAddingHouseholdMember)}\n          >\n            <MaterialCommunityIcons name=\"plus\" size={20} color={theme.colors.background} />\n            <Text style={styles.addButtonText}>Add Member</Text>\n          </TouchableOpacity>\n        </View>\n        \n        {isAddingHouseholdMember && (\n          <View style={styles.addContactForm}>\n            <View>\n              <TextInput\n                style={[\n                  styles.input,\n                  contactValidationErrors.household_name ? styles.inputError : null\n                ]}\n                placeholder=\"Member Name\"\n                value={newHouseholdMember.name}\n                onChangeText={(text) => handleContactInputChange('name', text, 'household')}\n                maxLength={50}\n              />\n              {contactValidationErrors.household_name ? (\n                <Text style={styles.errorText}>{contactValidationErrors.household_name}</Text>\n              ) : null}\n            </View>\n            <View>\n              <TextInput\n                style={[\n                  styles.input,\n                  contactValidationErrors.household_phone ? styles.inputError : null\n                ]}\n                placeholder=\"719-510-6342\"\n                value={newHouseholdMember.phone}\n                onChangeText={(text) => handleContactInputChange('phone', text, 'household')}\n                keyboardType=\"phone-pad\"\n                maxLength={12}\n              />\n              {contactValidationErrors.household_phone ? (\n                <Text style={styles.errorText}>{contactValidationErrors.household_phone}</Text>\n              ) : null}\n            </View>\n            <TouchableOpacity \n              style={[\n                styles.submitButton,\n                (contactValidationErrors.household_name || contactValidationErrors.household_phone || !newHouseholdMember.name.trim() || !newHouseholdMember.phone.trim()) ? styles.submitButtonDisabled : null\n              ]}\n              onPress={handleAddHouseholdMember}\n              disabled={contactValidationErrors.household_name || contactValidationErrors.household_phone || !newHouseholdMember.name.trim() || !newHouseholdMember.phone.trim()}\n            >\n              <Text style={styles.submitButtonText}>Save Member</Text>\n            </TouchableOpacity>\n          </View>\n        )}\n        \n        <View style={styles.contactsList}>\n          {(preferences.authorizedHouseholdMembers || []).map((member, index) => (\n            <View key={index} style={styles.contactCard}>\n              <View style={styles.contactInfo}>\n                <Text style={styles.contactName}>{member.name}</Text>\n                <Text style={styles.contactPhone}>{member.phone}</Text>\n              </View>\n              <View style={styles.contactActions}>\n                <TouchableOpacity \n                  style={styles.actionButton}\n                  onPress={() => handleRemoveHouseholdMember(index)}\n                >\n                  <MaterialCommunityIcons name=\"delete\" size={20} color={theme.colors.error} />\n                </TouchableOpacity>\n              </View>\n            </View>\n          ))}\n          {(preferences.authorizedHouseholdMembers || []).length === 0 && !isAddingHouseholdMember && (\n            <Text style={styles.emptyListText}>No household members added yet</Text>\n          )}\n        </View>\n      </View>\n    );\n  };\n\n  const formatDateString = (date) => {\n    if (!date) return '';\n    \n    const month = (date.getMonth() + 1).toString().padStart(2, '0');\n    const day = date.getDate().toString().padStart(2, '0');\n    const year = date.getFullYear();\n    \n    return `${month}-${day}-${year}`;\n  };\n\n  const parseDate = (dateString) => {\n    if (!dateString) return new Date();\n    \n    const [month, day, year] = dateString.split('-').map(part => parseInt(part, 10));\n    \n    if (!month || !day || !year || isNaN(month) || isNaN(day) || isNaN(year)) {\n      return new Date();\n    }\n    \n    return new Date(year, month - 1, day);\n  };\n\n  const showDatePicker = (petId, field) => {\n    const currentDate = parseDate(editedPetsData[petId]?.[field]);\n    \n    setDisplayMonth(currentDate.getMonth());\n    setDisplayYear(currentDate.getFullYear());\n    \n    setDatePickerConfig({\n      isVisible: true,\n      currentField: field,\n      currentPetId: petId,\n      selectedDate: currentDate\n    });\n  };\n\n  const handleDatePickerSelect = (event, date) => {\n    // On Android, this is called immediately when a date is selected\n    if (Platform.OS === 'android') {\n      if (event?.type === 'dismissed') {\n        setDatePickerConfig(prev => ({ ...prev, isVisible: false }));\n        return;\n      }\n      \n      if (date) {\n        const formattedDate = formatDateString(date);\n        handleEditChange(datePickerConfig.currentPetId, datePickerConfig.currentField, formattedDate);\n      }\n      \n      setDatePickerConfig(prev => ({ ...prev, isVisible: false }));\n      return;\n    }\n    \n    // For iOS and Web, this is called when the confirm button is pressed\n    if (date) {\n      const formattedDate = formatDateString(date);\n      handleEditChange(datePickerConfig.currentPetId, datePickerConfig.currentField, formattedDate);\n    }\n    \n    setDatePickerConfig({\n      isVisible: false,\n      currentField: null,\n      currentPetId: null,\n      selectedDate: null\n    });\n  };\n\n  // Generate calendar grid data\n  const calendarData = useMemo(() => {\n    if (!datePickerConfig.isVisible) return [];\n    \n    const currentDate = datePickerConfig.selectedDate || new Date();\n    const firstDayOfMonth = new Date(displayYear, displayMonth, 1);\n    const lastDayOfMonth = new Date(displayYear, displayMonth + 1, 0);\n    const daysInMonth = lastDayOfMonth.getDate();\n    const startingDayOfWeek = firstDayOfMonth.getDay(); // 0 = Sunday, 1 = Monday, etc.\n    \n    // Create calendar grid with padding for previous and next month days\n    const totalDays = Math.ceil((daysInMonth + startingDayOfWeek) / 7) * 7;\n    const calendarDays = [];\n    \n    let dayCounter = 1 - startingDayOfWeek;\n    for (let i = 0; i < totalDays; i++) {\n      const dayDate = new Date(displayYear, displayMonth, dayCounter);\n      const isCurrentMonth = dayDate.getMonth() === displayMonth;\n      const isSelectedDate = isCurrentMonth && \n        dayDate.getDate() === currentDate.getDate() && \n        dayDate.getMonth() === currentDate.getMonth() && \n        dayDate.getFullYear() === currentDate.getFullYear();\n      \n      calendarDays.push({\n        date: dayDate,\n        day: dayDate.getDate(),\n        isCurrentMonth,\n        isSelectedDate,\n      });\n      \n      dayCounter++;\n    }\n    \n    // Group by weeks\n    const weeks = [];\n    for (let i = 0; i < calendarDays.length; i += 7) {\n      weeks.push(calendarDays.slice(i, i + 7));\n    }\n    \n    return weeks;\n  }, [displayMonth, displayYear, datePickerConfig.selectedDate, datePickerConfig.isVisible]);\n  \n  // Navigation functions\n  const goToPreviousMonth = () => {\n    if (displayMonth === 0) {\n      setDisplayMonth(11);\n      setDisplayYear(prevYear => prevYear - 1);\n    } else {\n      setDisplayMonth(prevMonth => prevMonth - 1);\n    }\n    // Close any open dropdowns when navigating\n    setShowMonthPicker(false);\n    setShowYearPicker(false);\n  };\n  \n  const goToNextMonth = () => {\n    if (displayMonth === 11) {\n      setDisplayMonth(0);\n      setDisplayYear(prevYear => prevYear + 1);\n    } else {\n      setDisplayMonth(prevMonth => prevMonth + 1);\n    }\n    // Close any open dropdowns when navigating\n    setShowMonthPicker(false);\n    setShowYearPicker(false);\n  };\n  \n  const selectDate = (date) => {\n    // Close any open dropdowns when selecting a date\n    setShowMonthPicker(false);\n    setShowYearPicker(false);\n    // Just update the selected date without closing the modal\n    setDatePickerConfig(prev => ({\n      ...prev,\n      selectedDate: date\n    }));\n  };\n\n  const renderDatePickerModal = () => {\n    if (!datePickerConfig.isVisible) return null;\n    \n    // For Android, use the native date picker\n    if (Platform.OS === 'android') {\n      return (\n        <DateTimePicker\n          value={datePickerConfig.selectedDate}\n          mode=\"date\"\n          display=\"default\"\n          onChange={handleDatePickerSelect}\n        />\n      );\n    }\n    \n    // Month names for header\n    const monthNames = [\n      'January', 'February', 'March', 'April', 'May', 'June',\n      'July', 'August', 'September', 'October', 'November', 'December'\n    ];\n\n    // Generate years array - only current and previous years, with current year first\n    const currentYear = new Date().getFullYear();\n    const years = Array.from({ length: 101 }, (_, i) => currentYear - i);\n    \n    // Function to handle clicking outside dropdowns\n    const handleOutsideClick = () => {\n      setShowMonthPicker(false);\n      setShowYearPicker(false);\n    };\n    \n    return (\n      <Modal\n        visible={datePickerConfig.isVisible}\n        transparent={true}\n        animationType=\"fade\"\n        onRequestClose={() => {\n          setDatePickerConfig(prev => ({ ...prev, isVisible: false }));\n          setShowMonthPicker(false);\n          setShowYearPicker(false);\n        }}\n      >\n        <TouchableOpacity\n          style={styles.modalOverlay}\n          activeOpacity={1}\n          onPress={handleOutsideClick}\n        >\n          <View style={styles.calendarModalContent}>\n            <View style={styles.calendarModalHeader}>\n              <Text style={styles.calendarModalTitle}>\n                Select {datePickerConfig.currentField === 'birthday' ? 'Birthday' : 'Adoption Date'}\n              </Text>\n              <TouchableOpacity \n                onPress={() => {\n                  setDatePickerConfig(prev => ({ ...prev, isVisible: false }));\n                  setShowMonthPicker(false);\n                  setShowYearPicker(false);\n                }}\n                style={styles.closeButton}\n              >\n                <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.text} />\n              </TouchableOpacity>\n            </View>\n            \n            {/* Calendar Header with Dropdowns */}\n            <View style={styles.calendarHeader}>\n              <View style={styles.dropdownContainer}>\n                <TouchableOpacity \n                  style={styles.dropdownButton}\n                  onPress={(e) => {\n                    e.stopPropagation();\n                    setShowMonthPicker(!showMonthPicker);\n                    setShowYearPicker(false);\n                  }}\n                >\n                  <Text style={styles.dropdownButtonText}>{monthNames[displayMonth]}</Text>\n                  <MaterialCommunityIcons \n                    name={showMonthPicker ? \"chevron-up\" : \"chevron-down\"} \n                    size={20} \n                    color={theme.colors.text} \n                  />\n                </TouchableOpacity>\n                \n                <TouchableOpacity \n                  style={styles.dropdownButton}\n                  onPress={(e) => {\n                    e.stopPropagation();\n                    setShowYearPicker(!showYearPicker);\n                    setShowMonthPicker(false);\n                  }}\n                >\n                  <Text style={styles.dropdownButtonText}>{displayYear}</Text>\n                  <MaterialCommunityIcons \n                    name={showYearPicker ? \"chevron-up\" : \"chevron-down\"} \n                    size={20} \n                    color={theme.colors.text} \n                  />\n                </TouchableOpacity>\n              </View>\n            </View>\n\n            {/* Month Picker Dropdown */}\n            {showMonthPicker && (\n              <TouchableOpacity \n                style={styles.dropdownList}\n                activeOpacity={1}\n                onPress={(e) => e.stopPropagation()}\n              >\n                <ScrollView style={styles.dropdownScrollView}>\n                  {monthNames.map((month, index) => (\n                    <TouchableOpacity\n                      key={month}\n                      style={[\n                        styles.dropdownItem,\n                        displayMonth === index && styles.dropdownItemSelected\n                      ]}\n                      onPress={(e) => {\n                        e.stopPropagation();\n                        setDisplayMonth(index);\n                        setShowMonthPicker(false);\n                      }}\n                    >\n                      <Text style={[\n                        styles.dropdownItemText,\n                        displayMonth === index && styles.dropdownItemTextSelected\n                      ]}>\n                        {month}\n                      </Text>\n                    </TouchableOpacity>\n                  ))}\n                </ScrollView>\n              </TouchableOpacity>\n            )}\n\n            {/* Year Picker Dropdown */}\n            {showYearPicker && (\n              <TouchableOpacity \n                style={styles.dropdownList}\n                activeOpacity={1}\n                onPress={(e) => e.stopPropagation()}\n              >\n                <ScrollView style={styles.dropdownScrollView}>\n                  {years.map((year) => (\n                    <TouchableOpacity\n                      key={year}\n                      style={[\n                        styles.dropdownItem,\n                        displayYear === year && styles.dropdownItemSelected\n                      ]}\n                      onPress={(e) => {\n                        e.stopPropagation();\n                        setDisplayYear(year);\n                        setShowYearPicker(false);\n                      }}\n                    >\n                      <Text style={[\n                        styles.dropdownItemText,\n                        displayYear === year && styles.dropdownItemTextSelected\n                      ]}>\n                        {year}\n                      </Text>\n                    </TouchableOpacity>\n                  ))}\n                </ScrollView>\n              </TouchableOpacity>\n            )}\n            \n            {/* Weekday Headers */}\n            <TouchableOpacity \n              activeOpacity={1} \n              onPress={(e) => e.stopPropagation()}\n            >\n              <View style={styles.weekdayLabels}>\n                {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map((day, index) => (\n                  <Text key={index} style={styles.weekdayLabel}>{day}</Text>\n                ))}\n              </View>\n            </TouchableOpacity>\n            \n            {/* Calendar Grid */}\n            <TouchableOpacity \n              activeOpacity={1} \n              onPress={(e) => e.stopPropagation()}\n            >\n              <View style={styles.calendarGrid}>\n                {calendarData.map((week, weekIndex) => (\n                  <View key={weekIndex} style={styles.calendarRow}>\n                    {week.map((dayObj, dayIndex) => (\n                      <TouchableOpacity\n                        key={dayIndex}\n                        style={[\n                          styles.calendarDay,\n                          !dayObj.isCurrentMonth && styles.calendarDayOtherMonth,\n                          dayObj.isSelectedDate && styles.calendarDaySelected\n                        ]}\n                        onPress={(e) => {\n                          e.stopPropagation();\n                          if (dayObj.isCurrentMonth) selectDate(dayObj.date);\n                        }}\n                        disabled={!dayObj.isCurrentMonth}\n                      >\n                        <Text style={[\n                          styles.calendarDayText,\n                          !dayObj.isCurrentMonth && styles.calendarDayTextOtherMonth,\n                          dayObj.isSelectedDate && styles.calendarDayTextSelected\n                        ]}>\n                          {dayObj.day}\n                        </Text>\n                      </TouchableOpacity>\n                    ))}\n                  </View>\n                ))}\n              </View>\n            </TouchableOpacity>\n            \n            <TouchableOpacity \n              style={styles.confirmButton}\n              onPress={(e) => {\n                e.stopPropagation();\n                handleDatePickerSelect(null, datePickerConfig.selectedDate);\n              }}\n            >\n              <Text style={styles.confirmButtonText}>Confirm</Text>\n            </TouchableOpacity>\n          </View>\n        </TouchableOpacity>\n      </Modal>\n    );\n  };\n\n  // Helper function to show error toasts with consistent formatting\n  const showErrorMessage = (title, error) => {\n    let errorMessage = \"There was a problem with this operation. Please try again.\";\n    \n    // Check if we have more specific error details from the API\n    if (error.response && error.response.data) {\n      const details = error.response.data.details;\n      if (details) {\n        // Build a more specific error message\n        errorMessage = \"Error details: \";\n        \n        Object.keys(details).forEach(field => {\n          errorMessage += `${field}: ${details[field].join(\", \")}`;\n        });\n      } else if (error.response.data.error) {\n        errorMessage = error.response.data.error;\n      }\n    } else if (error.message) {\n      errorMessage = error.message;\n    }\n    \n    toast({\n      message: `${title}: ${errorMessage}`,\n      type: 'error',\n      duration: 5000\n    });\n  };\n\n\n  // New helper function to replace a temporary pet with a real one in a single operation\n  const replaceTempPetWithReal = (tempPetId, realPetData) => {\n    try {\n      // Detailed debugging for the pet replacement process\n      debugLog(\"MBAi39gh45v\", \"REPLACE PET START - Current pets before replacement:\", \n        Array.isArray(pets) ? \n          pets.map(p => ({ id: p.id, name: p.name || 'unnamed' })) : \n          'pets is not an array');\n          \n      debugLog(\"MBAi39gh45v\", \"REPLACE PET - Temp ID to replace:\", tempPetId);\n      debugLog(\"MBAi39gh45v\", \"REPLACE PET - Real pet data:\", JSON.stringify(realPetData));\n      \n      // Make sure we have valid input data\n      if (!tempPetId || !realPetData) {\n        debugLog(\"MBAi39gh45v\", \"REPLACE PET ERROR - Invalid data provided\", { tempPetId, realPetData });\n        // Just show success toast but don't attempt replacement\n        toast({\n          message: `Pet saved successfully!`,\n          type: 'success',\n          duration: 4000\n        });\n        return;\n      }\n      \n      // Log the full response data to help diagnose issues\n      debugLog(\"MBA5555\", \"REPLACE PET - Backend response data:\", JSON.stringify(realPetData));\n      \n      // The pet_id from the server response is the primary key in the database\n      // This is the ID we should always use for the pet\n      const realPetId = realPetData.pet_id;\n      \n      // Verify we have a valid ID\n      if (!realPetId) {\n        debugLog(\"MBA5555\", \"REPLACE PET ERROR - No pet_id in server response:\", realPetData);\n        // If somehow we don't have a pet_id (this should never happen), show an error\n        toast({\n          message: \"Pet was created but ID is missing. Please refresh the page.\",\n          type: 'warning',\n          duration: 5000\n        });\n      } else {\n        debugLog(\"MBA5555\", \"REPLACE PET - Using pet_id from server:\", realPetId);\n      }\n      \n      debugLog(\"MBA5555\", \"REPLACE PET - Using pet ID:\", realPetId);\n      \n      // Helper function to convert backend boolean to UI Yes/No/N/A\n      const booleanToYesNo = (value) => {\n        if (value === true) return \"Yes\";\n        if (value === false) return \"No\";\n        return \"N/A\";\n      };\n      \n      // Format the pet data with the correct field mappings for UI\n      const formattedPetData = {\n        ...realPetData,\n        // Always use the pet_id from the API response as our primary id\n        id: realPetId,\n        // Ensure proper type mapping between backend and UI\n        type: realPetData.species || realPetData.type || '',\n        // Make sure feeding instructions are mapped properly\n        feedingInstructions: realPetData.feeding_schedule || realPetData.feedingInstructions || '',\n        // Make sure medical notes are mapped properly\n        medicalNotes: realPetData.medication_notes || realPetData.medicalNotes || '',\n        // Make sure potty break schedule is mapped properly\n        pottyBreakSchedule: realPetData.potty_break_schedule || realPetData.pottyBreakSchedule || '',\n        // Make sure special care instructions are mapped properly\n        specialCareInstructions: realPetData.special_care_instructions || realPetData.specialCareInstructions || '',\n        // Map vet info fields\n        vetName: realPetData.vet_name || '',\n        vetAddress: realPetData.vet_address || '',\n        vetPhone: realPetData.vet_phone || '',\n        insuranceProvider: realPetData.insurance_provider || '',\n        // Format compatibility fields for UI (true/false/null to Yes/No/N/A)\n        childrenFriendly: booleanToYesNo(realPetData.friendly_with_children),\n        catFriendly: booleanToYesNo(realPetData.friendly_with_cats),\n        dogFriendly: booleanToYesNo(realPetData.friendly_with_dogs),\n        houseTrained: booleanToYesNo(realPetData.house_trained),\n        spayedNeutered: booleanToYesNo(realPetData.spayed_neutered),\n        microchipped: booleanToYesNo(realPetData.microchipped),\n        canBeLeftAlone: booleanToYesNo(realPetData.can_be_left_alone),\n        // Format dates correctly\n        birthday: realPetData.birthday ? formatDateFromBackend(realPetData.birthday) : null,\n        adoptionDate: realPetData.adoption_date ? formatDateFromBackend(realPetData.adoption_date) : null,\n        // Preserve photo information if it exists\n        photoUri: realPetData.profile_photo ? \n          getMediaUrl(realPetData.profile_photo) : \n          null,\n        // Add a flag to indicate this pet was just created (for UI logic)\n        justCreated: true,\n        // Important - make sure name is preserved in the UI\n        name: realPetData.name || 'Unnamed Pet',\n        // Explicitly copy other fields that might be missing\n        breed: realPetData.breed || '',\n        energyLevel: realPetData.energy_level || '',\n      };\n      \n      debugLog(\"MBA5555\", \"REPLACE PET - Formatted pet data:\", { \n        tempPetId, \n        realPetId,\n        name: formattedPetData.name,\n        type: formattedPetData.type,\n        breed: formattedPetData.breed\n      });\n      \n      // Get the data the user was editing\n      const editedData = editedPetsData[tempPetId] || {};\n      \n      // Merge user edits with server data to ensure no data loss\n      const mergedPetData = {\n        ...formattedPetData,\n        // If user edited these fields, prefer their values over server values\n        name: editedData.name || formattedPetData.name,\n        breed: editedData.breed || formattedPetData.breed,\n        type: editedData.type || formattedPetData.type,\n        // Preserve user's compatibility field selections\n        childrenFriendly: editedData.childrenFriendly || formattedPetData.childrenFriendly,\n        catFriendly: editedData.catFriendly || formattedPetData.catFriendly,\n        dogFriendly: editedData.dogFriendly || formattedPetData.dogFriendly,\n        houseTrained: editedData.houseTrained || formattedPetData.houseTrained,\n        spayedNeutered: editedData.spayedNeutered || formattedPetData.spayedNeutered,\n        microchipped: editedData.microchipped || formattedPetData.microchipped,\n        canBeLeftAlone: editedData.canBeLeftAlone || formattedPetData.canBeLeftAlone,\n        // Preserve user's energy level selection\n        energyLevel: editedData.energyLevel || formattedPetData.energyLevel,\n        // Preserve other user-edited fields\n        sex: editedData.sex || formattedPetData.sex,\n        weight: editedData.weight || formattedPetData.weight,\n        feedingInstructions: editedData.feedingInstructions || formattedPetData.feedingInstructions,\n        medicalNotes: editedData.medicalNotes || formattedPetData.medicalNotes,\n        pottyBreakSchedule: editedData.pottyBreakSchedule || formattedPetData.pottyBreakSchedule,\n        specialCareInstructions: editedData.specialCareInstructions || formattedPetData.specialCareInstructions,\n        medications: editedData.medications || formattedPetData.medications,\n        vetName: editedData.vetName || formattedPetData.vetName,\n        vetAddress: editedData.vetAddress || formattedPetData.vetAddress,\n        vetPhone: editedData.vetPhone || formattedPetData.vetPhone,\n        insuranceProvider: editedData.insuranceProvider || formattedPetData.insuranceProvider,\n        birthday: editedData.birthday || formattedPetData.birthday,\n        adoptionDate: editedData.adoptionDate || formattedPetData.adoptionDate,\n      };\n      \n      // Clean up the edited data for the temp pet\n      setEditedPetsData(prev => {\n        const newData = { ...prev };\n        delete newData[tempPetId];\n        return newData;\n      });\n      \n      // Notify parent component of the replacement - critical to prevent duplicate pets\n      try {\n        // Save a copy of the current pets array for debugging\n        const petsBefore = Array.isArray(pets) ? [...pets] : [];\n        debugLog(\"MBAi39gh45v\", \"REPLACE PET - Pets count before update:\", petsBefore.length);\n        \n        // Double-check that the merged pet data is valid\n        if (!mergedPetData.id && !mergedPetData.pet_id) {\n          debugLog(\"MBAi39gh45v\", \"REPLACE PET ERROR - Merged data has no valid ID:\", mergedPetData);\n          mergedPetData.id = `generated_${Date.now()}`;\n          debugLog(\"MBAi39gh45v\", \"REPLACE PET FIX - Generated new ID:\", mergedPetData.id);\n        }\n        \n        if (onReplacePet) {\n          debugLog(\"MBAi39gh45v\", \"REPLACE PET - Calling onReplacePet:\", {\n            tempId: tempPetId,\n            realId: mergedPetData.id || mergedPetData.pet_id,\n            name: mergedPetData.name\n          });\n          \n          // Build a new pets array for atomic replacement\n          // The parent component expects a complete new array, not just two parameters\n          const newPetsArray = [\n            // Add the new pet at the top for better visibility\n            mergedPetData,\n            // Add all previous pets except the temp one we're replacing\n            ...pets.filter(p => p.id !== tempPetId)\n          ];\n          \n          // Actually call the parent function to replace the entire pets array\n          onReplacePet(newPetsArray);\n          \n          // Debug the result after a short delay to allow state updates\n          setTimeout(() => {\n            debugLog(\"MBAi39gh45v\", \"REPLACE PET - After onReplacePet, pets count:\", \n              Array.isArray(pets) ? pets.length : \"pets not an array\");\n          }, 100);\n        } else {\n          // Fallback if onReplacePet is not provided (though it should be)\n          debugLog(\"MBAi39gh45v\", \"REPLACE PET WARNING - No onReplacePet handler provided by parent component\");\n          \n          // Use onDeletePet and onAddPet as a fallback, adding to the top of the list\n          if (onDeletePet && onAddPet) {\n            debugLog(\"MBAi39gh45v\", \"REPLACE PET - Using fallback: delete temp pet and add real pet\");\n            \n            // Safely create a copy of the merged pet data to avoid reference issues\n            const newPetData = {...mergedPetData, _addToTop: true};\n            \n            // First, add the new pet to ensure we don't end up with an empty list\n            onAddPet(newPetData);\n            \n            // Then delete the temporary pet - but only if it's different from what we just added\n            if (tempPetId !== newPetData.id) {\n              onDeletePet(tempPetId);\n            }\n            \n            // Debug the result after a short delay\n            setTimeout(() => {\n              debugLog(\"MBAi39gh45v\", \"REPLACE PET - After fallback method, pets count:\", \n                Array.isArray(pets) ? pets.length : \"pets not an array\");\n            }, 100);\n          } else {\n            // No replacement methods available at all\n            debugLog(\"MBAi39gh45v\", \"REPLACE PET ERROR - No methods available to update pets list\");\n            toast({\n              message: \"Unable to update pets list. Please refresh the page.\",\n              type: 'error',\n              duration: 4000\n            });\n          }\n        }\n      } catch (error) {\n        // If the parent component's update methods fail, at least don't crash\n        debugLog(\"MBAi39gh45v\", \"REPLACE PET ERROR - Exception updating parent component:\", error);\n        \n        // Safety check: If somehow the pets list is no longer an array, restore it\n        // This is the critical fix for the main bug where pets becomes a string\n        if (!Array.isArray(pets)) {\n          debugLog(\"MBAi39gh45v\", \"REPLACE PET CRITICAL ERROR - pets is not an array after replace:\", pets);\n          \n          // Restore from the saved copy we made earlier\n          const petsBefore = Array.isArray(pets) ? [...pets] : [];\n          \n          // If we have the original pets array, use that with the new pet added\n          if (Array.isArray(petsBefore) && petsBefore.length > 0) {\n            // Create a clean pets array with the new pet added\n            const restoredPets = [\n              // Add the new pet at the top\n              mergedPetData,\n              // Add all previous pets except the temp one\n              ...petsBefore.filter(p => p.id !== tempPetId)\n            ];\n            \n            // If the parent component has a pets state setter, we could call it here\n            // This is commented out because we don't have direct access to the parent's state setter\n            // setPets(restoredPets);\n            \n            debugLog(\"MBAi39gh45v\", \"REPLACE PET FIX - Created restored pets array with length:\", restoredPets.length);\n          }\n        }\n        \n        toast({\n          message: \"Pet saved but display may not be updated. Please refresh if needed.\",\n          type: 'info',\n          duration: 4000\n        });\n      }\n      \n      // Clear any editing state for the temp pet\n      setEditingPetIds(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(tempPetId);\n        return newSet;\n      });\n      \n      // Update expanded state to show the real pet\n      setExpandedPetIds(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(tempPetId);\n        newSet.add(realPetId);\n        return newSet;\n      });\n      \n      // Log success\n      debugLog(\"MBA5555\", \"REPLACE PET - Successfully replaced temp pet with real pet\");\n      \n      // No need for a toast anymore since we've properly handled the data\n      \n    } catch (error) {\n      debugLog(\"MBA5555\", \"REPLACE PET - Error replacing pet:\", error);\n    }\n  };\n\n  // Handle saving the cropped pet image\n  const handleSaveCroppedPetImage = async (imageUri, cropParams) => {\n    try {\n      setIsUploadingPhoto(true);\n      \n      debugLog('MBA5555', 'Processing cropped pet image with params:', cropParams);\n      \n      // Process the image with crop parameters\n      const processedImage = await processImageWithCrop(imageUri, cropParams);\n      \n      // For web platform, we get a base64 data URL that we can display directly\n      let displayUri = imageUri;\n      if (processedImage.base64Data) {\n        displayUri = processedImage.base64Data;\n      }\n      \n      // Update the edited pet data with the new photo URI\n      setEditedPetsData(prev => {\n        const petData = prev[currentEditingPetId] || {};\n        return {\n          ...prev,\n          [currentEditingPetId]: {\n            ...petData,\n            photo: processedImage, // Store the processed image for later upload\n            photoUri: displayUri, // Use the cropped image for display\n          }\n        };\n      });\n      \n      toast({\n        message: 'Pet photo updated. It will be saved when you save the pet.',\n        type: 'success',\n        duration: 4000\n      });\n      \n    } catch (error) {\n      debugLog('MBA5555', 'Error processing pet photo:', error);\n      toast({\n        message: 'Failed to process pet photo. Please try again.',\n        type: 'error',\n        duration: 4000\n      });\n    } finally {\n      setIsUploadingPhoto(false);\n      setShowPetPhotoCropper(false);\n      setSelectedPetPhotoUri(null);\n      setCurrentEditingPetId(null);\n    }\n  };\n\n  return (\n    <ScrollView style={styles.container}>\n      {renderDatePickerModal()}\n      <ConfirmationModal\n        visible={deleteConfirmation.visible}\n        onClose={cancelDeletePet}\n        onConfirm={confirmDeletePet}\n        actionText={`delete ${deleteConfirmation.petName}`}\n        isLoading={deleteConfirmation.isDeleting}\n      />\n      <View style={[styles.section, { backgroundColor: theme.colors.surfaceContrast }]}>\n        <View style={styles.sectionHeader}>\n          <Text style={styles.sectionTitle}>My Pets</Text>\n          <TouchableOpacity \n            style={styles.addButton}\n            onPress={handleAddNewPet}\n          >\n            <MaterialCommunityIcons name=\"plus\" size={20} color={theme.colors.background} />\n            <Text style={styles.addButtonText}>Add Pet</Text>\n          </TouchableOpacity>\n        </View>\n        <View style={styles.petsList}>\n          {Array.isArray(pets) ? (\n            pets.length > 0 ? (\n              pets.map(renderPetCard)\n            ) : (\n              // Show empty state if pets array is empty\n              <View style={styles.emptyStateContainer}>\n                <Text style={styles.emptyStateText}>No pets found. Add a pet using the button above.</Text>\n              </View>\n            )\n          ) : (\n            // Show error state if pets is not an array\n            <View style={styles.emptyStateContainer}>\n              <Text style={styles.emptyStateText}>Error: Unable to display pets</Text>\n            </View>\n          )}\n        </View>\n      </View>\n\n      {/* TODO: uncomment this once we have implemented edit facilities */}\n      {/* <View style={[styles.section, { backgroundColor: theme.colors.surfaceContrast }]}>\n        <Text style={styles.sectionTitle}>\n          {userRole === 'professional' ? 'My Home & Environment Facilities' : 'Home & Environment Preferences'}\n        </Text>\n        <Text style={styles.sectionDescription}>\n          {userRole === 'professional' \n            ? 'Select the facilities available in your home for pet care'\n            : 'Select your preferences for pet care facilities'\n          }\n        </Text>\n        <View style={styles.preferencesGrid}>\n          {allFacilities.map((facility) => {\n            const isSelected = preferences.homeEnvironment.includes(facility.id);\n            return (\n              <TouchableOpacity\n                key={facility.id}\n                style={[\n                  styles.preferenceButton,\n                  isSelected && styles.selectedPreference\n                ]}\n                onPress={() => onUpdatePreferences('homeEnvironment', facility.id)}\n              >\n                <MaterialCommunityIcons \n                  name={facility.icon} \n                  size={20} \n                  color={theme.colors.primary}\n                />\n                <Text style={[\n                  styles.preferenceText,\n                  isSelected && styles.selectedPreferenceText\n                ]}>\n                  {facility.label}\n                </Text>\n                {isSelected && (\n                  <MaterialCommunityIcons \n                    name=\"check\" \n                    size={18} \n                    color={theme.colors.primary}\n                    style={styles.checkmark}\n                  />\n                )}\n              </TouchableOpacity>\n            );\n          })}\n        </View>\n      </View>\n\n      {renderEmergencyContactsSection()}\n      {renderHouseholdMembersSection()} */}\n      \n      {/* Pet Photo Cropper Modal */}\n      <ProfilePhotoCropper\n        visible={showPetPhotoCropper}\n        imageUri={selectedPetPhotoUri}\n        onClose={() => {\n          setShowPetPhotoCropper(false);\n          setSelectedPetPhotoUri(null);\n          setCurrentEditingPetId(null);\n        }}\n        onSave={handleSaveCroppedPetImage}\n        isUploading={isUploadingPhoto}\n      />\n    </ScrollView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  emptyStateContainer: {\n    padding: 20,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 1,\n    borderStyle: 'dashed',\n    borderColor: theme.colors.border,\n    borderRadius: 8,\n    marginVertical: 10,\n  },\n  emptyStateText: {\n    fontSize: 16,\n    color: theme.colors.secondary,\n    textAlign: 'center',\n    marginBottom: 10,\n  },\n  container: {\n    flex: 1,\n    gap: 24,\n  },\n  section: {\n    borderRadius: 12,\n    padding: 24,\n    marginBottom: 24,\n  },\n  sectionHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingVertical: 10,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n    marginBottom: 12,\n  },\n  sectionTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.text,\n  },\n  sectionDescription: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n    marginBottom: 16,\n  },\n  addButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.primary,\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 6,\n    gap: 8,\n  },\n  addButtonText: {\n    color: theme.colors.background,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  petsList: {\n    gap: 16,\n    paddingBottom: 70, // Add extra padding at the bottom for better scrolling on mobile\n  },\n  petCard: {\n    borderRadius: 12,\n    overflow: 'hidden',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  petCardHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n  },\n  petBasicInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 16,\n    flex: 1,\n  },\n  petPhoto: {\n    width: 68,\n    height: 68,\n    borderRadius: 50,\n  },\n  placeholderIcon: {\n    width: 68,\n    height: 68,\n    borderRadius: 34,\n    backgroundColor: theme.colors.surfaceVariant,\n    textAlign: 'center',\n    textAlignVertical: 'center',\n    paddingTop: 14,  // Center the icon\n  },\n  profilePhotoButton: {\n    position: 'relative',\n  },\n  plusIconContainer: {\n    position: 'absolute',\n    bottom: 0,\n    right: 0,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 12,\n    padding: 2,\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n  },\n  petInfo: {\n    flex: 1,\n    marginLeft: 12,\n    justifyContent: 'center',\n  },\n  petName: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 4,\n  },\n  petDetailsContainer: {\n    flexDirection: 'column',\n  },\n  petDetails: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n    marginBottom: 2,\n  },\n  expandedDetails: {\n    borderTopWidth: 1,\n    borderTopColor: theme.colors.border,\n    padding: 16,\n  },\n  detailRow: {\n    flexDirection: 'row',\n    gap: 24,\n    marginBottom: 16,\n  },\n  detailColumn: {\n    flex: 1,\n  },\n  detailTitle: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 8,\n  },\n  detailText: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n  },\n  preferencesGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 12,\n    marginTop: 16,\n  },\n  preferenceButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    borderRadius: 6,\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n    backgroundColor: theme.colors.surface,\n  },\n  selectedPreference: {\n    borderColor: theme.colors.primary,\n    backgroundColor: `${theme.colors.primary}15`, // 15 is the hex opacity (about 8%)\n  },\n  preferenceText: {\n    fontSize: 14,\n    color: theme.colors.primary,\n    flex: 1,\n  },\n  selectedPreferenceText: {\n    color: theme.colors.primary,\n  },\n  checkmark: {\n    marginLeft: 'auto',\n  },\n  petActions: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n  },\n  editButton: {\n    padding: 4,\n  },\n  fixButton: {\n    padding: 4,\n    backgroundColor: `${theme.colors.warning}15`,\n    borderRadius: 4,\n    marginHorizontal: 4,\n  },\n  // New styles for emergency contacts and household members\n  addContactForm: {\n    marginBottom: 16,\n    gap: 12,\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 6,\n    padding: 12,\n    fontSize: 14,\n    color: theme.colors.text,\n  },\n  submitButton: {\n    backgroundColor: theme.colors.primary,\n    padding: 12,\n    borderRadius: 6,\n    alignItems: 'center',\n  },\n  submitButtonText: {\n    color: theme.colors.background,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  contactsList: {\n    gap: 12,\n  },\n  contactCard: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 12,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    backgroundColor: theme.colors.surface,\n  },\n  contactInfo: {\n    flex: 1,\n  },\n  contactName: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: theme.colors.text,\n  },\n  contactPhone: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n  },\n  contactActions: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n  actionButton: {\n    padding: 8,\n  },\n  emptyListText: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n    fontStyle: 'italic',\n    textAlign: 'center',\n    padding: 12,\n  },\n  compatibilityContainer: {\n    flexDirection: 'column',\n    gap: 12,\n  },\n  compatibilityItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingVertical: 6,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n    flexWrap: 'wrap',\n  },\n  compatibilityLabel: {\n    fontSize: 14,\n    color: theme.colors.text,\n    flex: 0.4,\n    marginRight: 10,\n  },\n  dropdownContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    minWidth: 60,\n    justifyContent: 'flex-end',\n  },\n  dropdownText: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n  },\n  careInfoContainer: {\n    flexDirection: 'column',\n    gap: 12,\n  },\n  medicationsContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingVertical: 6,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  medicationsText: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n  },\n  vetInfoContainer: {\n    flexDirection: 'column',\n    gap: 12,\n  },\n  vetInfoItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingVertical: 6,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  vetInfoLabel: {\n    fontSize: 14,\n    color: theme.colors.text,\n  },\n  vetInfoText: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n  },\n  documentButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n  },\n  documentButtonText: {\n    fontSize: 14,\n    color: theme.colors.primary,\n  },\n  dropdownContainerEdit: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    minWidth: 60,\n    justifyContent: 'flex-end',\n    flexWrap: 'wrap'\n  },\n  optionButton: {\n    padding: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 6,\n    marginLeft: 10,\n    marginBottom: 5\n  },\n  selectedOption: {\n    borderColor: theme.colors.primary,\n    backgroundColor: `${theme.colors.primary}15`,\n  },\n  optionText: {\n    fontSize: 14,\n    color: theme.colors.text,\n  },\n  selectedOptionText: {\n    color: theme.colors.primary,\n  },\n  editInput: {\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 6,\n    padding: 12,\n    fontSize: 14,\n    color: theme.colors.text,\n  },\n  editInputMedications: {\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 6,\n    padding: 12,\n    fontSize: 14,\n    color: theme.colors.text,\n    flex: 1,\n    marginLeft: 10\n  },\n  editInputShort: {\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 6,\n    padding: 12,\n    fontSize: 14,\n    color: theme.colors.text,\n    width: '55%',\n    marginLeft: 'auto'\n  },\n  editInputWeight: {\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 6,\n    padding: 12,\n    fontSize: 14,\n    color: theme.colors.text,\n    width: '40%',\n    marginLeft: 'auto'\n  },\n  uploadButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    backgroundColor: theme.colors.primary,\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    borderRadius: 6,\n  },\n  uploadButtonText: {\n    color: theme.colors.background,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  documentActionContainer: {\n    flexDirection: 'column',\n    gap: 8,\n  },\n  documentsList: {\n    marginTop: 8,\n  },\n  documentItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n    paddingVertical: 6,\n  },\n  documentName: {\n    fontSize: 14,\n    color: theme.colors.text,\n    flex: 1,\n  },\n  viewDocButton: {\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 4,\n    backgroundColor: `${theme.colors.primary}15`,\n  },\n  viewDocText: {\n    fontSize: 12,\n    color: theme.colors.primary,\n  },\n  noDocumentsText: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n    fontStyle: 'italic',\n    marginTop: 8,\n  },\n  detailSection: {\n    marginTop: 16,\n  },\n  editContainer: {\n    flexWrap: 'wrap',\n    gap: 16,\n    alignItems: 'flex-start',\n  },\n  inputsWrapper: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 16,\n    flex: 1,\n  },\n  inputWrapper: {\n    minWidth: 150,\n    flexBasis: '46%',\n    flexGrow: 1,\n    marginBottom: 8,\n  },\n  inputLabel: {\n    fontSize: 12,\n    color: theme.colors.secondary,\n    marginBottom: 4,\n  },\n  editMainContainer: {\n    width: '100%',\n    marginBottom: 16,\n  },\n  editHeaderRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    width: '100%',\n    marginBottom: 16,\n  },\n  editProfileContainer: {\n    marginBottom: 16,\n    alignItems: 'center',\n  },\n  editDetailsContainer: {\n    width: '100%',\n  },\n  editActions: {\n    flexDirection: 'row',\n    gap: 12,\n    alignItems: 'center',\n    flexWrap: 'wrap',\n  },\n  editActionsSmallScreen: {\n    flexDirection: 'column',\n    alignItems: 'stretch',\n    gap: 8,\n  },\n  buttonRowTop: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  buttonRowBottom: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    alignItems: 'center',\n    marginTop: 8,\n    gap: 4,\n  },\n  dateInfoContainer: {\n    flexDirection: 'column',\n    gap: 12,\n  },\n  dateInfoItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingVertical: 6,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  dateInfoLabel: {\n    fontSize: 14,\n    color: theme.colors.text,\n    flex: 1,\n  },\n  dateInfoText: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n  },\n  customDatePickerContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 6,\n    overflow: 'hidden',\n    height: 46,\n  },\n  dateInputBox: {\n    flex: 1,\n    height: '100%',\n    justifyContent: 'center',\n    paddingHorizontal: 12,\n  },\n  dateInputText: {\n    fontSize: 14,\n    color: theme.colors.text,\n  },\n  placeholderText: {\n    color: theme.colors.placeholder,\n  },\n  calendarButton: {\n    width: 46,\n    height: '100%',\n    backgroundColor: theme.colors.surface,\n    borderLeftWidth: 1,\n    borderLeftColor: theme.colors.border,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  datePickerContainer: {\n    flex: 1,\n    maxWidth: '60%',\n    marginLeft: 'auto',\n    marginRight: 10,\n  },\n  // Media query style for larger screens\n  '@media (min-width: 900px)': {\n    petDetailsContainer: {\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      gap: 8,\n    },\n    petDetails: {\n      marginRight: 8,\n    },\n  },\n  // Modal calendar styles\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  calendarModalContent: {\n    backgroundColor: theme.colors.background,\n    borderRadius: 12,\n    padding: 20,\n    width: '90%',\n    maxWidth: 420,\n  },\n  calendarModalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 20,\n  },\n  calendarModalTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: theme.colors.text,\n  },\n  closeButton: {\n    padding: 4,\n  },\n  calendarHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  calendarNavButton: {\n    padding: 8,\n  },\n  calendarMonthYear: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.text,\n  },\n  weekdayLabels: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: 8,\n  },\n  weekdayLabel: {\n    flex: 1,\n    textAlign: 'center',\n    fontSize: 14,\n    fontWeight: '500',\n    color: theme.colors.secondary,\n    paddingVertical: 8,\n  },\n  calendarGrid: {\n    marginBottom: 16,\n  },\n  calendarRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: 8,\n  },\n  calendarDay: {\n    flex: 1,\n    aspectRatio: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: 8,\n    margin: 2,\n  },\n  calendarDayText: {\n    fontSize: 16,\n    color: theme.colors.text,\n  },\n  calendarDayOtherMonth: {\n    opacity: 0.3,\n  },\n  calendarDayTextOtherMonth: {\n    color: theme.colors.placeholder,\n  },\n  calendarDaySelected: {\n    backgroundColor: theme.colors.primary,\n  },\n  calendarDayTextSelected: {\n    color: theme.colors.background,\n    fontWeight: '600',\n  },\n  confirmButton: {\n    backgroundColor: theme.colors.primary,\n    borderRadius: 8,\n    padding: 14,\n    alignItems: 'center',\n    marginTop: 8,\n  },\n  confirmButtonText: {\n    color: theme.colors.background,\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  stackedFields: {\n    flexDirection: 'column',\n    gap: 16,\n    marginBottom: 16,\n  },\n  fullWidth: {\n    width: '100%',\n  },\n  saveButton: {\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n    borderRadius: 6,\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    backgroundColor: theme.colors.primary,\n    marginRight: 8,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  saveButtonText: {\n    color: 'white',\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  deleteButton: {\n    padding: 8,\n    marginRight: 4,\n    borderRadius: 6,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  // Error modal styles\n  errorModalContent: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 12,\n    padding: 24,\n    width: '90%',\n    maxWidth: 500,\n  },\n  successModalContent: {\n    borderLeftWidth: 4,\n    borderLeftColor: theme.colors.success,\n  },\n  errorModalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  successModalHeader: {\n    // Same styles, but we might want to customize in the future\n  },\n  errorModalTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: theme.colors.error,\n  },\n  successModalTitle: {\n    color: theme.colors.success,\n  },\n  errorModalMessage: {\n    marginBottom: 24,\n    fontSize: 16,\n    lineHeight: 24,\n  },\n  successModalMessage: {\n    // Same styles, but we might want to customize in the future\n  },\n  errorModalButton: {\n    backgroundColor: theme.colors.primary,\n    padding: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  successModalButton: {\n    backgroundColor: theme.colors.success,\n  },\n  errorModalButtonText: {\n    color: theme.colors.surface,\n    fontWeight: 'bold',\n  },\n  successModalButtonText: {\n    // Same styles, but we might want to customize in the future\n  },\n  editButtonTopRight: {\n    position: 'absolute',\n    top: 12,\n    right: 12,\n    zIndex: 2,\n  },\n  chevronButtonBottomRight: {\n    position: 'absolute',\n    bottom: 12,\n    right: 12,\n    zIndex: 2,\n  },\n  petInfoWithButtonPadding: {\n    paddingRight: 20, // enough space for both buttons\n  },\n  dropdownContainer: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n    gap: 12,\n    marginBottom: 16,\n  },\n  dropdownButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.surface,\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    borderRadius: 6,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    minWidth: 120,\n  },\n  dropdownButtonText: {\n    fontSize: 16,\n    color: theme.colors.text,\n    marginRight: 8,\n  },\n  dropdownList: {\n    position: 'absolute',\n    top: 100,\n    left: 20,\n    right: 20,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    zIndex: 1000,\n    maxHeight: 200,\n    elevation: 5,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n  },\n  dropdownScrollView: {\n    maxHeight: 200,\n  },\n  dropdownItem: {\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  dropdownItemSelected: {\n    backgroundColor: theme.colors.primary + '20',\n  },\n  dropdownItemText: {\n    fontSize: 16,\n    color: theme.colors.text,\n  },\n  dropdownItemTextSelected: {\n    color: theme.colors.primary,\n    fontWeight: '600',\n  },\n  inputError: {\n    borderColor: theme.colors.error,\n    borderWidth: 1,\n  },\n  errorText: {\n    color: theme.colors.error,\n    fontSize: 12,\n    marginTop: 4,\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n  submitButtonDisabled: {\n    opacity: 0.5,\n  },\n});\n\nexport default PetsPreferencesTab; ","// Centralized timezone data for the entire application\n\n// Complete mapping of all backend timezone IDs to display names\n// This ensures any timezone returned by the backend can be translated to a user-friendly name\nexport const TIMEZONE_MAPPING = {\n  // Eastern Time Zone (UTC-5)\n  'America/New_York': 'Eastern Time',\n  'America/Detroit': 'Eastern Time',\n  'America/Indiana/Indianapolis': 'Eastern Time',\n  'America/Indiana/Marengo': 'Eastern Time',\n  'America/Indiana/Vincennes': 'Eastern Time',\n  'America/Indiana/Tell_City': 'Eastern Time',\n  'America/Indiana/Petersburg': 'Eastern Time',\n  'America/Indiana/Vevay': 'Eastern Time',\n  'America/Indiana/Winamac': 'Eastern Time',\n  'America/Kentucky/Louisville': 'Eastern Time',\n  'America/Kentucky/Monticello': 'Eastern Time',\n  \n  // Central Time Zone (UTC-6)\n  'America/Chicago': 'Central Time',\n  'America/Indiana/Knox': 'Central Time',\n  'America/Menominee': 'Central Time',\n  'America/North_Dakota/Center': 'Central Time',\n  'America/North_Dakota/New_Salem': 'Central Time',\n  'America/North_Dakota/Beulah': 'Central Time',\n  \n  // Mountain Time Zone (UTC-7)\n  'America/Denver': 'Mountain Time',\n  'America/Boise': 'Mountain Time',\n  'America/Phoenix': 'Mountain Time (No DST)',\n  \n  // Pacific Time Zone (UTC-8)\n  'America/Los_Angeles': 'Pacific Time',\n  \n  // Alaska Time Zone (UTC-9)\n  'America/Anchorage': 'Alaska Time',\n  'America/Juneau': 'Alaska Time',\n  'America/Sitka': 'Alaska Time',\n  'America/Metlakatla': 'Alaska Time',\n  'America/Yakutat': 'Alaska Time',\n  'America/Nome': 'Alaska Time',\n  \n  // Hawaii-Aleutian Time Zone (UTC-10)\n  'Pacific/Honolulu': 'Hawaii Time',\n  'America/Adak': 'Hawaii-Aleutian Time',\n  \n  // UTC\n  'UTC': 'UTC',\n};\n\n// Simplified timezone options for user selection\n// These are the only options users will see in the dropdown\nexport const USER_TIMEZONE_OPTIONS = [\n  { \n    id: 'America/New_York', \n    displayName: 'Eastern Time', \n    searchTerms: ['eastern', 'est', 'edt', 'new york', 'florida', 'georgia', 'virginia', 'north carolina', 'south carolina', 'tennessee', 'kentucky', 'ohio', 'pennsylvania', 'new jersey', 'connecticut', 'rhode island', 'massachusetts', 'vermont', 'new hampshire', 'maine', 'delaware', 'maryland', 'west virginia', 'washington dc', 'michigan', 'indiana'],\n    zone: 'Eastern'\n  },\n  { \n    id: 'America/Chicago', \n    displayName: 'Central Time', \n    searchTerms: ['central', 'cst', 'cdt', 'texas', 'illinois', 'alabama', 'arkansas', 'iowa', 'kansas', 'louisiana', 'minnesota', 'mississippi', 'missouri', 'nebraska', 'north dakota', 'oklahoma', 'south dakota', 'wisconsin', 'chicago'],\n    zone: 'Central'\n  },\n  { \n    id: 'America/Denver', \n    displayName: 'Mountain Time', \n    searchTerms: ['mountain', 'mst', 'mdt', 'colorado', 'montana', 'utah', 'wyoming', 'new mexico', 'idaho', 'denver'],\n    zone: 'Mountain'\n  },\n  { \n    id: 'America/Phoenix', \n    displayName: 'Mountain Time (No DST)', \n    searchTerms: ['arizona', 'phoenix', 'mountain no dst', 'mst arizona'],\n    zone: 'Mountain'\n  },\n  { \n    id: 'America/Los_Angeles', \n    displayName: 'Pacific Time', \n    searchTerms: ['pacific', 'pst', 'pdt', 'california', 'washington', 'oregon', 'nevada', 'los angeles', 'san francisco', 'seattle', 'portland'],\n    zone: 'Pacific'\n  },\n  { \n    id: 'America/Anchorage', \n    displayName: 'Alaska Time', \n    searchTerms: ['alaska', 'akst', 'akdt', 'anchorage', 'juneau', 'fairbanks'],\n    zone: 'Alaska'\n  },\n  { \n    id: 'Pacific/Honolulu', \n    displayName: 'Hawaii Time', \n    searchTerms: ['hawaii', 'hst', 'honolulu', 'maui', 'big island', 'kauai', 'oahu'],\n    zone: 'Hawaii'\n  },\n  { \n    id: 'UTC', \n    displayName: 'UTC', \n    searchTerms: ['utc', 'coordinated universal time', 'gmt', 'greenwich'],\n    zone: 'UTC'\n  },\n];\n\n// Function to get display name from backend timezone ID\nexport const getTimezoneDisplayName = (timezoneId) => {\n  return TIMEZONE_MAPPING[timezoneId] || timezoneId;\n};\n\n// Function to search timezones based on query\nexport const searchTimezones = (query) => {\n  if (!query) return USER_TIMEZONE_OPTIONS;\n  \n  const searchTerm = query.toLowerCase();\n  return USER_TIMEZONE_OPTIONS.filter(tz => \n    tz.displayName.toLowerCase().includes(searchTerm) ||\n    tz.searchTerms.some(term => term.includes(searchTerm))\n  );\n};\n\n// Function to group timezones by zone for display\nexport const getGroupedTimezones = (timezones = USER_TIMEZONE_OPTIONS) => {\n  return timezones.reduce((groups, tz) => {\n    const zone = tz.zone;\n    if (!groups[zone]) {\n      groups[zone] = [];\n    }\n    groups[zone].push(tz);\n    return groups;\n  }, {});\n}; ","import React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Switch, ScrollView, Modal, FlatList, TextInput } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../../styles/theme';\nimport { getTimeSettings, updateTimeSettings } from '../../api/API';\nimport { debugLog } from '../../context/AuthContext';\nimport { useToast } from '../../components/ToastProvider';\nimport { USER_TIMEZONE_OPTIONS, getTimezoneDisplayName, searchTimezones, getGroupedTimezones } from '../../data/Timezones';\n\nconst SubscriptionPlan = ({ plan, isPopular, isCurrent, onSwitch }) => (\n  <View style={[\n    styles.planCard,\n    isCurrent && styles.currentPlanBorder\n  ]}>\n    {isPopular && (\n      <View style={styles.popularTag}>\n        <Text style={styles.popularTagText}>Popular</Text>\n      </View>\n    )}\n    <Text style={styles.planTitle}>{plan.title}</Text>\n    <Text style={styles.planPrice}>{plan.price}</Text>\n    <Text style={styles.planDescription}>{plan.description}</Text>\n    <View style={styles.featuresList}>\n      {plan.features.map((feature, index) => (\n        <View key={index} style={styles.featureItem}>\n          <MaterialCommunityIcons name=\"check\" size={20} color={theme.colors.primary} />\n          <Text style={styles.featureText}>{feature}</Text>\n        </View>\n      ))}\n    </View>\n    <TouchableOpacity\n      style={[styles.planButton, isCurrent && styles.currentPlanButton]}\n      onPress={() => !isCurrent && onSwitch(plan.id)}\n    >\n      <Text style={[styles.planButtonText, isCurrent && styles.currentPlanButtonText]}>\n        {isCurrent ? 'Current Plan' : 'Switch Plan'}\n      </Text>\n    </TouchableOpacity>\n  </View>\n);\n\nconst SettingsPaymentsTab = ({\n  push_notifications,\n  email_updates,\n  marketing_communications,\n  profile_visibility,\n  timezone: propTimezone,\n  use_military_time,\n  onUpdateSetting,\n  paymentMethods,\n  onAddPaymentMethod,\n  onRemovePaymentMethod,\n  onSetDefaultPayment,\n  isMobile,\n  currentPlan = { \n    id: 'waitlist',\n    title: 'Waitlist Signup',\n    nextBilling: 'N/A',\n    connections: { used: 0, total: 'Unlimited' }\n  },\n  onSwitchPlan,\n  userRole,\n  isApprovedProfessional,\n  navigation,\n}) => {\n  const [timezone, setTimezone] = useState(propTimezone || 'UTC');\n  const [timezoneModalVisible, setTimezoneModalVisible] = useState(false);\n  const [timezones, setTimezones] = useState([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [loading, setLoading] = useState(false);\n  const showToast = useToast();\n\n  useEffect(() => {\n    // Fetch user's time settings when component mounts\n    const fetchTimeSettings = async () => {\n      try {\n        setLoading(true);\n        const timeSettings = await getTimeSettings();\n        setTimezone(timeSettings.timezone);\n        debugLog('MBA12345 Fetched time settings:', timeSettings);\n      } catch (error) {\n        debugLog('MBA12345 Error fetching time settings:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    // Check if timezone is in the props already\n    if (propTimezone) {\n      setTimezone(propTimezone);\n    } else {\n      fetchTimeSettings();\n    }\n  }, [propTimezone]);\n\n  useEffect(() => {\n    debugLog('MBA54321 SettingsPaymentsTab received paymentMethods:', paymentMethods);\n  }, [paymentMethods]);\n\n  const handleTimezoneChange = async (newTimezone) => {\n    try {\n      setLoading(true);\n      await updateTimeSettings(newTimezone);\n      setTimezone(newTimezone);\n      setTimezoneModalVisible(false);\n      setSearchQuery(''); // Clear search when timezone is selected\n      debugLog('MBA12345 Updated timezone to:', newTimezone);\n      \n      // Get display name for the toast using centralized function\n      const friendlyName = getTimezoneDisplayName(newTimezone);\n      \n      showToast({\n        message: `Timezone updated to ${friendlyName}`,\n        type: 'success',\n        duration: 3000\n      });\n    } catch (error) {\n      debugLog('MBA12345 Error updating timezone:', error);\n      showToast({\n        message: 'Failed to update timezone. Please try again.',\n        type: 'error',\n        duration: 4000\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const openTimezoneModal = () => {\n    setTimezones(USER_TIMEZONE_OPTIONS);\n    setSearchQuery(''); // Clear search when opening modal\n    setTimezoneModalVisible(true);\n  };\n\n  // Get display name for current timezone using centralized mapping\n  const getCurrentTimezoneDisplayName = () => {\n    return getTimezoneDisplayName(timezone);\n  };\n\n  const renderTimezoneModal = () => {\n    // Use centralized search function\n    const filteredTimezones = searchTimezones(searchQuery);\n    \n    // Use centralized grouping function\n    const groupedTimezones = getGroupedTimezones(filteredTimezones);\n\n    const renderTimezoneGroup = (zoneName, timezones) => (\n      <View key={zoneName} style={styles.timezoneGroup}>\n        <Text style={styles.timezoneGroupHeader}>{zoneName} Time Zone</Text>\n        {timezones.map((tz) => (\n          <TouchableOpacity\n            key={tz.id}\n            style={[\n              styles.timezoneItem,\n              tz.id === timezone && styles.selectedTimezoneItem\n            ]}\n            onPress={() => handleTimezoneChange(tz.id)}\n          >\n            <View style={styles.timezoneItemContent}>\n              <Text style={[\n                styles.timezoneText,\n                tz.id === timezone && styles.selectedTimezoneText\n              ]}>\n                {tz.displayName}\n              </Text>\n            </View>\n            {tz.id === timezone && (\n              <MaterialCommunityIcons name=\"check\" size={20} color={theme.colors.primary} />\n            )}\n          </TouchableOpacity>\n        ))}\n      </View>\n    );\n\n    return (\n              <Modal\n          animationType=\"slide\"\n          transparent={true}\n          visible={timezoneModalVisible}\n          onRequestClose={() => {\n            setTimezoneModalVisible(false);\n            setSearchQuery(''); // Clear search when closing modal\n          }}\n        >\n        <View style={styles.modalOverlay}>\n          <View style={styles.modalContent}>\n            <View style={styles.modalHeader}>\n              <Text style={styles.modalTitle}>Select Timezone</Text>\n              <TouchableOpacity onPress={() => {\n                setTimezoneModalVisible(false);\n                setSearchQuery(''); // Clear search when closing modal\n              }}>\n                <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.text} />\n              </TouchableOpacity>\n            </View>\n\n            <TextInput\n              style={styles.searchInput}\n              placeholder=\"Search timezones (e.g., 'Texas', 'Central Time', 'Mountain')...\"\n              value={searchQuery}\n              onChangeText={setSearchQuery}\n              placeholderTextColor={theme.colors.secondary}\n            />\n            \n            <FlatList\n              data={Object.keys(groupedTimezones)}\n              keyExtractor={(zoneName) => zoneName}\n              renderItem={({ item: zoneName }) => \n                renderTimezoneGroup(zoneName, groupedTimezones[zoneName])\n              }\n              showsVerticalScrollIndicator={true}\n              initialNumToRender={20}\n              maxToRenderPerBatch={20}\n              windowSize={10}\n            />\n          </View>\n        </View>\n      </Modal>\n    );\n  };\n\n  const getSubscriptionPlans = () => {\n    const commonPlans = [\n      {\n        id: 'free',\n        title: 'Free Tier',\n        price: 'Free',\n        description: '1 Free Booking/Month, then 15% per booking',\n        features: ['Basic profile listing', 'Up to 1 booking/month', 'Standard support'],\n        isPopular: false,\n      },\n      {\n        id: 'waitlist',\n        title: 'Waitlist Tier',\n        price: 'Free',\n        description: 'No commissions, no subscriptions, no fees',\n        features: ['Early signup discounts', 'Waitlist for early access', 'Unlimited connections', 'Priority support',],\n        isPopular: false,\n      }\n    ];\n\n    if (userRole === 'professional') {\n      return [\n        ...commonPlans,\n        {\n          id: 'subscription',\n          title: 'Pro Subscription',\n          price: '$29.99/month',\n          description: 'No fees as pro',\n          features: ['Unlimited connections', 'Priority support', 'Advanced analytics', 'No commission fees'],\n          isPopular: true,\n        },\n        {\n          id: 'dual_subscription',\n          title: 'Dual Role Subscription',\n          price: '$39.99/month',\n          description: 'No fees as pro or owner',\n          features: ['Unlimited connections', 'Priority support', 'Advanced analytics', 'No commission fees', 'Use as both pro and owner'],\n          isPopular: false,\n        }\n      ];\n    } else {\n      return [\n        ...commonPlans,\n        {\n          id: 'subscription',\n          title: 'Owner Subscription',\n          price: '$19.99/month',\n          description: 'Unlimited bookings',\n          features: ['Unlimited connections', 'Priority support', 'Advanced analytics'],\n          isPopular: true,\n        }\n      ];\n\n      if (isApprovedProfessional) {\n        plans.push({\n          id: 'dual_subscription',\n          title: 'Dual Role Subscription',\n          price: '$39.99/month',\n          description: 'No fees as pro or owner',\n          features: ['Unlimited connections', 'Priority support', 'Advanced analytics', 'No commission fees', 'Use as both pro and owner'],\n          isPopular: false,\n        });\n      }\n\n      return plans;\n    }\n  };\n\n  const renderPlansSection = () => (\n    <View style={styles.section}>\n      <Text style={styles.sectionTitle}>Subscription Plans</Text>\n      <ScrollView \n        horizontal\n        showsHorizontalScrollIndicator={true}\n        style={styles.plansScroll}\n        contentContainerStyle={styles.plansScrollContent}\n      >\n        {getSubscriptionPlans().map((plan) => (\n          <View key={plan.id} style={styles.planCardContainer}>\n            <SubscriptionPlan\n              plan={plan}\n              isPopular={plan.isPopular}\n              isCurrent={currentPlan?.id === plan.id}\n              onSwitch={onSwitchPlan}\n            />\n          </View>\n        ))}\n      </ScrollView>\n    </View>\n  );\n\n  const renderCurrentPlanInfo = () => (\n    <View style={styles.currentPlanInfo}>\n      <Text style={styles.currentPlanTitle}>{currentPlan?.title || 'Waitlist Signup'}</Text>\n      <Text style={styles.currentPlanBilling}>\n        Next billing date: {currentPlan?.nextBilling || 'N/A'}\n      </Text>\n      <View style={styles.usageStats}>\n        <Text style={styles.usageText}>\n          {currentPlan?.id === 'waitlist' ? 'Unlimited connections available' : `${currentPlan?.connections?.used || 0} of ${currentPlan?.connections?.total || 'Unlimited'} connections used`}\n        </Text>\n        {currentPlan?.id !== 'waitlist' && (\n          <View style={styles.usageBar}>\n            <View style={[styles.usageProgress, { width: `${(currentPlan?.connections?.used / currentPlan?.connections?.total) * 100 || 0}%` }]} />\n          </View>\n        )}\n      </View>\n    </View>\n  );\n\n  const renderPaymentMethodsSection = () => (\n    <View style={styles.section}>\n      <View style={styles.sectionHeader}>\n        <Text style={styles.sectionTitle}>{userRole === 'professional' ? 'Payout Methods' : 'Payment Methods' }</Text>\n        <TouchableOpacity style={styles.addButton} onPress={onAddPaymentMethod}>\n          <MaterialCommunityIcons name=\"plus\" size={20} color={theme.colors.background} />\n          <Text style={styles.addButtonText}>Add New</Text>\n        </TouchableOpacity>\n      </View>\n      {paymentMethods && paymentMethods.length > 0 ? (\n        paymentMethods.map(renderPaymentMethod)\n      ) : (\n        <View style={styles.noPaymentMethodsContainer}>\n          <Text style={styles.noPaymentMethodsText}>No payment methods added yet</Text>\n        </View>\n      )}\n    </View>\n  );\n\n  const renderDesktopLayout = () => (\n    <View style={styles.desktopContainer}>\n      <View style={styles.leftColumn}>\n        {/*\n        TODO: Add back in after MVP \n        {renderPlansSection()} */}\n\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>Notification Preferences</Text>\n          {renderNotificationSettings()}\n        </View>\n\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>Privacy & Security Settings</Text>\n          {renderPrivacySettings()}\n        </View>\n\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>Time Settings</Text>\n          <View style={styles.settingItem}>\n            <View style={styles.settingContent}>\n              <MaterialCommunityIcons name=\"clock-outline\" size={24} color={theme.colors.primary} />\n              <View style={styles.settingTextContainer}>\n                <Text style={styles.settingTitle}>Timezone</Text>\n                <Text style={styles.settingDescription}>Set your local timezone for accurate time display</Text>\n              </View>\n            </View>\n            <TouchableOpacity \n              style={styles.timezoneButton}\n              onPress={openTimezoneModal}\n            >\n              <Text style={styles.timezoneButtonText}>{getCurrentTimezoneDisplayName()}</Text>\n              <MaterialCommunityIcons name=\"chevron-down\" size={20} color={theme.colors.primary} />\n            </TouchableOpacity>\n          </View>\n          \n          {/* TODO: implement after MVP Launch \n          <View style={styles.settingItem}>\n            <View style={styles.settingContent}>\n              <MaterialCommunityIcons name=\"clock-time-eight\" size={24} color={theme.colors.primary} />\n              <View style={styles.settingTextContainer}>\n                <Text style={styles.settingTitle}>Military Time (24-hour)</Text>\n                <Text style={styles.settingDescription}>Use 24-hour time format instead of 12-hour format</Text>\n              </View>\n            </View>\n            <Switch\n              value={use_military_time}\n              onValueChange={(value) => handleUpdateSetting('use_military_time', value)}\n              trackColor={{ false: theme.colors.disabled, true: theme.colors.primary }}\n            />\n          </View> */}\n        </View>\n      </View>\n\n      {/* TODO: Add back in after MVP \n      <View style={styles.rightColumn}>\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>Current Plan</Text>\n          {renderCurrentPlanInfo()}\n        </View>\n\n        {renderPaymentMethodsSection()}\n\n        <View style={styles.section}>\n          <Text style={styles.sectionTitle}>Billing History</Text>\n          {/* Add billing history items here\n          <TouchableOpacity style={styles.viewAllButton}>\n            <Text style={styles.viewAllText}>View All Transactions</Text>\n          </TouchableOpacity>\n        </View>\n      </View> */}\n    </View>\n  );\n\n  const renderMobileLayout = () => (\n    <ScrollView style={styles.mobileContainer} contentContainerStyle={{ paddingBottom: 100 }}>\n      {/* TODO: Add back after MVP \n      {renderPlansSection()}\n      {renderPaymentMethodsSection()} */}\n\n      <View style={styles.section}>\n        <Text style={styles.sectionTitle}>Notification Settings</Text>\n        {renderNotificationSettings()}\n      </View>\n\n      <View style={styles.section}>\n        <Text style={styles.sectionTitle}>Privacy & Security Settings</Text>\n        {renderPrivacySettings()}\n      </View>\n\n      <View style={styles.section}>\n        <Text style={styles.sectionTitle}>Time Settings</Text>\n        <View style={styles.settingItem}>\n          <View style={styles.settingContent}>\n            <MaterialCommunityIcons name=\"clock-outline\" size={24} color={theme.colors.primary} />\n            <View style={styles.settingTextContainer}>\n              <Text style={styles.settingTitle}>Timezone</Text>\n              <Text style={styles.settingDescription}>Set your local timezone for accurate time display</Text>\n            </View>\n          </View>\n          <TouchableOpacity \n            style={styles.timezoneButton}\n            onPress={openTimezoneModal}\n          >\n            <Text style={styles.timezoneButtonText}>{getCurrentTimezoneDisplayName()}</Text>\n            <MaterialCommunityIcons name=\"chevron-down\" size={20} color={theme.colors.primary} />\n          </TouchableOpacity>\n        </View>\n        \n        {/* TODO: implement after MVP Launch \n        <View style={styles.settingItem}>\n          <View style={styles.settingContent}>\n            <MaterialCommunityIcons name=\"clock-time-eight\" size={24} color={theme.colors.primary} />\n            <View style={styles.settingTextContainer}>\n              <Text style={styles.settingTitle}>Military Time (24-hour)</Text>\n              <Text style={styles.settingDescription}>Use 24-hour time format instead of 12-hour format</Text>\n            </View>\n          </View>\n          <Switch\n            value={use_military_time}\n            onValueChange={(value) => handleUpdateSetting('use_military_time', value)}\n            trackColor={{ false: theme.colors.disabled, true: theme.colors.primary }}\n          />\n        </View> */}\n      </View>\n    </ScrollView>\n  );\n\n  const renderNotificationSettings = () => {\n    return (\n      <>\n        {/* TODO: Uncomment for ios/android code\n        <View style={styles.settingItem}>\n          <View style={styles.settingContent}>\n            <MaterialCommunityIcons name=\"bell\" size={24} color={theme.colors.primary} />\n            <View style={styles.settingTextContainer}>\n              <Text style={styles.settingTitle}>Push Notifications</Text>\n              <Text style={styles.settingDescription}>Receive push notifications for updates</Text>\n            </View>\n          </View>\n          <Switch\n            value={push_notifications}\n            onValueChange={(value) => handleUpdateSetting('push_notifications', value)}\n            trackColor={{ false: theme.colors.disabled, true: theme.colors.primary }}\n          />\n        </View> */}\n\n        <View style={styles.settingItem}>\n          <View style={styles.settingContent}>\n            <MaterialCommunityIcons name=\"email\" size={24} color={theme.colors.primary} />\n            <View style={styles.settingTextContainer}>\n              <Text style={styles.settingTitle}>Email Updates</Text>\n              <Text style={styles.settingDescription}>Receive important updates via email</Text>\n            </View>\n          </View>\n          <Switch\n            value={email_updates}\n            onValueChange={(value) => handleUpdateSetting('email_updates', value)}\n            trackColor={{ false: theme.colors.disabled, true: theme.colors.primary }}\n          />\n        </View>\n\n        <View style={styles.settingItem}>\n          <View style={styles.settingContent}>\n            <MaterialCommunityIcons name=\"bell-outline\" size={24} color={theme.colors.primary} />\n            <View style={styles.settingTextContainer}>\n              <Text style={styles.settingTitle}>Marketing Communications</Text>\n              <Text style={styles.settingDescription}>Receive promotions and marketing emails</Text>\n            </View>\n          </View>\n          <Switch\n            value={marketing_communications}\n            onValueChange={(value) => handleUpdateSetting('marketing_communications', value)}\n            trackColor={{ false: theme.colors.disabled, true: theme.colors.primary }}\n          />\n        </View>\n      </>\n    );\n  };\n\n  const renderPrivacySettings = () => {\n    return (\n      <>\n        <View style={styles.settingItem}>\n          <View style={styles.settingContent}>\n            <MaterialCommunityIcons name=\"account-eye\" size={24} color={theme.colors.primary} />\n            <View style={styles.settingTextContainer}>\n              <Text style={styles.settingTitle}>Profile Visibility</Text>\n              <Text style={styles.settingDescription}>Make your profile visible to others</Text>\n            </View>\n          </View>\n          <Switch\n            value={profile_visibility}\n            onValueChange={(value) => handleUpdateSetting('profile_visibility', value)}\n            trackColor={{ false: theme.colors.disabled, true: theme.colors.primary }}\n          />\n        </View>\n\n        <View style={styles.settingItem}>\n          <View style={styles.settingContent}>\n            <MaterialCommunityIcons name=\"lock-reset\" size={24} color={theme.colors.primary} />\n            <View style={styles.settingTextContainer}>\n              <Text style={styles.settingTitle}>Change Password</Text>\n              <Text style={styles.settingDescription}>Update your account password</Text>\n            </View>\n          </View>\n          <TouchableOpacity \n            style={styles.actionButton}\n            onPress={() => navigation.navigate('ChangePassword')}\n          >\n            <Text style={styles.actionButtonText}>Change</Text>\n          </TouchableOpacity>\n        </View>\n        \n        {/* TODO: Add location privacy toggle after MVP launch */}\n      </>\n    );\n  };\n\n  const renderSettingItem = (setting) => (\n    <View key={setting.id} style={styles.settingItem}>\n      <View style={styles.settingContent}>\n        <MaterialCommunityIcons name={setting.icon} size={24} color={theme.colors.primary} />\n        <View style={styles.settingTextContainer}>\n          <Text style={styles.settingTitle}>{setting.title}</Text>\n          {setting.description && (\n            <Text style={styles.settingDescription}>{setting.description}</Text>\n          )}\n        </View>\n      </View>\n      {setting.type === 'toggle' ? (\n        <Switch\n          value={setting.value}\n          onValueChange={(value) => handleUpdateSetting(setting.id, value)}\n          trackColor={{ false: theme.colors.disabled, true: theme.colors.primary }}\n        />\n      ) : setting.type === 'timezone' ? (\n        <TouchableOpacity \n          style={styles.timezoneButton}\n          onPress={openTimezoneModal}\n        >\n          <Text style={styles.timezoneButtonText}>{getCurrentTimezoneDisplayName()}</Text>\n          <MaterialCommunityIcons name=\"chevron-down\" size={20} color={theme.colors.primary} />\n        </TouchableOpacity>\n      ) : (\n        <TouchableOpacity \n          style={styles.actionButton}\n          onPress={() => handleUpdateSetting(setting.id)}\n        >\n          <Text style={styles.actionButtonText}>{setting.actionText || 'Update'}</Text>\n        </TouchableOpacity>\n      )}\n    </View>\n  );\n\n  const renderPaymentMethod = (method) => (\n    <View key={method.id} style={styles.paymentItem}>\n      <View style={styles.paymentContent}>\n        <MaterialCommunityIcons \n          name={method.type === 'card' ? 'credit-card' : 'bank'} \n          size={24} \n          color={theme.colors.primary} \n        />\n        <View style={styles.paymentTextContainer}>\n          <View style={styles.paymentTitleRow}>\n            <Text style={styles.paymentTitle}>\n              {method.type === 'card' ? `•••• ${method.last4}` : method.bankName}\n            </Text>\n            {!method.isDefault && (\n              <TouchableOpacity \n                style={styles.setDefaultButton}\n                onPress={() => onSetDefaultPayment(method.id)}\n              >\n                <Text style={styles.setDefaultText}>Set Default</Text>\n              </TouchableOpacity>\n            )}\n          </View>\n          <Text style={styles.paymentDescription} numberOfLines={1}>\n            {method.type === 'card' ? `Expires ${method.expiry}` : `Account ending in ${method.last4}`}\n          </Text>\n        </View>\n      </View>\n      <TouchableOpacity \n        style={styles.deleteButton} \n        onPress={() => onRemovePaymentMethod(method.id)}\n      >\n        <MaterialCommunityIcons name=\"delete\" size={20} color={theme.colors.error} />\n      </TouchableOpacity>\n    </View>\n  );\n\n  // Handle setting updates with toast notifications\n  const handleUpdateSetting = (id, value) => {\n    debugLog('MBA54321 Updating setting:', { id, value });\n    \n    // Get readable setting name for toast messages\n    const settingNames = {\n      'push_notifications': 'Push Notifications',\n      'email_updates': 'Email Updates',\n      'marketing_communications': 'Marketing Communications',\n      'profile_visibility': 'Profile Visibility',\n      'use_military_time': 'Military Time'\n    };\n    \n    const settingName = settingNames[id] || id;\n    \n    // Call the parent update function\n    onUpdateSetting(id, value)\n      .then(() => {\n        // Show success toast\n        showToast({\n          message: `${settingName} ${value ? 'enabled' : 'disabled'} successfully`,\n          type: 'success',\n          duration: 3000\n        });\n      })\n      .catch(error => {\n        debugLog('MBA54321 Error updating setting:', error);\n        // Show error toast\n        showToast({\n          message: `Failed to update ${settingName.toLowerCase()}. Please try again.`,\n          type: 'error',\n          duration: 4000\n        });\n      });\n  };\n\n  return (\n    <View style={styles.container}>\n      {isMobile ? renderMobileLayout() : renderDesktopLayout()}\n      {renderTimezoneModal()}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  desktopContainer: {\n    flexDirection: 'row',\n    gap: 24,\n  },\n  leftColumn: {\n    flex: 1,\n    gap: 24,\n  },\n  rightColumn: {\n    width: '35%',\n    minWidth: 300,\n    gap: 24,\n  },\n  mobileContainer: {\n    flex: 1,\n  },\n  section: {\n    backgroundColor: theme.colors.surfaceContrast,\n    borderRadius: 10,\n    padding: 20,\n    marginBottom: 15,\n  },\n  sectionHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 15,\n  },\n  sectionTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: theme.colors.text,\n    marginBottom: 15,\n  },\n  plansScroll: {\n    marginHorizontal: -20,\n  },\n  plansScrollContent: {\n    paddingHorizontal: 20,\n    paddingBottom: 16,\n  },\n  planCardContainer: {\n    width: 280,\n    marginRight: 16,\n    paddingBottom: 4,\n  },\n  planCard: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 10,\n    padding: 20,\n    position: 'relative',\n    marginTop: 12,\n    height: '100%',\n    borderWidth: 0,\n  },\n  currentPlanBorder: {\n    borderWidth: 2,\n    borderColor: theme.colors.primary,\n  },\n  popularPlan: {\n  },\n  popularTag: {\n    position: 'absolute',\n    top: -12,\n    right: 20,\n    backgroundColor: theme.colors.primary,\n    paddingHorizontal: 12,\n    paddingVertical: 4,\n    borderRadius: 12,\n    zIndex: 2,\n  },\n  popularTagText: {\n    color: theme.colors.surfaceContrast,\n    fontWeight: '600',\n    fontSize: 12,\n  },\n  planTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginBottom: 10,\n  },\n  planPrice: {\n    fontSize: 24,\n    fontWeight: '600',\n    color: theme.colors.primary,\n    marginBottom: 5,\n  },\n  planDescription: {\n    color: theme.colors.secondary,\n    marginBottom: 15,\n  },\n  featuresList: {\n    gap: 10,\n    marginBottom: 20,\n  },\n  featureItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 10,\n  },\n  featureText: {\n    color: theme.colors.text,\n  },\n  planButton: {\n    backgroundColor: theme.colors.primary,\n    padding: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n    marginTop: 'auto',\n    marginBottom: 0,\n  },\n  currentPlanButton: {\n    backgroundColor: theme.colors.surface,\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n  },\n  planButtonText: {\n    color: theme.colors.surfaceContrast,\n    fontWeight: '600',\n  },\n  currentPlanButtonText: {\n    color: theme.colors.primary,\n  },\n  settingItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.placeHolderText,\n  },\n  settingContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  settingTextContainer: {\n    marginLeft: 15,\n    flex: 1,\n  },\n  settingTitle: {\n    fontSize: 16,\n    fontWeight: '500',\n  },\n  settingDescription: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n    marginTop: 2,\n  },\n  actionButton: {\n    backgroundColor: theme.colors.surface,\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 6,\n  },\n  actionButtonText: {\n    color: theme.colors.primary,\n    fontWeight: '500',\n  },\n  currentPlanInfo: {\n    backgroundColor: theme.colors.surface,\n    padding: 15,\n    borderRadius: 8,\n  },\n  currentPlanTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n    marginBottom: 5,\n  },\n  currentPlanBilling: {\n    color: theme.colors.secondary,\n    marginBottom: 15,\n  },\n  usageStats: {\n    gap: 8,\n  },\n  usageText: {\n    fontSize: 14,\n    color: theme.colors.text,\n  },\n  usageBar: {\n    height: 8,\n    backgroundColor: theme.colors.background,\n    borderRadius: 4,\n  },\n  usageProgress: {\n    height: '100%',\n    backgroundColor: theme.colors.primary,\n    borderRadius: 4,\n  },\n  paymentItem: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    justifyContent: 'space-between',\n    padding: 12,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    marginBottom: 10,\n  },\n  paymentContent: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    flex: 1,\n    marginRight: 12,\n  },\n  paymentTextContainer: {\n    marginLeft: 15,\n    flex: 1,\n  },\n  paymentTitleRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flexWrap: 'wrap',\n    gap: 8,\n  },\n  paymentTitle: {\n    fontSize: 16,\n    fontWeight: '500',\n  },\n  paymentDescription: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n    marginTop: 2,\n  },\n  setDefaultButton: {\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    borderRadius: 4,\n  },\n  setDefaultText: {\n    color: theme.colors.primary,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  deleteButton: {\n    padding: 4,\n  },\n  addButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.primary,\n    padding: 8,\n    borderRadius: 5,\n  },\n  addButtonText: {\n    color: theme.colors.surfaceContrast,\n    marginLeft: 5,\n    fontWeight: '500',\n  },\n  viewAllButton: {\n    padding: 12,\n    borderRadius: 8,\n    backgroundColor: theme.colors.surface,\n    alignItems: 'center',\n  },\n  viewAllText: {\n    color: theme.colors.primary,\n    fontWeight: '500',\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    backgroundColor: theme.colors.background,\n    borderRadius: 10,\n    width: '90%',\n    maxWidth: 500,\n    maxHeight: '80%',\n    padding: 20,\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 15,\n    paddingBottom: 10,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  modalTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: theme.colors.text,\n  },\n  timezoneItem: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingVertical: 12,\n    paddingHorizontal: 15,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  selectedTimezoneItem: {\n    backgroundColor: theme.colors.primaryLight,\n  },\n  timezoneText: {\n    fontSize: 16,\n    color: theme.colors.text,\n  },\n  selectedTimezoneText: {\n    fontWeight: 'bold',\n    color: theme.colors.primary,\n  },\n  timezoneButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.surface,\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 6,\n  },\n  timezoneButtonText: {\n    color: theme.colors.primary,\n    fontWeight: '500',\n    marginRight: 5,\n  },\n  searchInput: {\n    backgroundColor: theme.colors.surface,\n    padding: 12,\n    borderRadius: 8,\n    marginBottom: 15,\n    fontSize: 16,\n    color: theme.colors.text,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  timezoneGroup: {\n    marginBottom: 20,\n  },\n  timezoneGroupHeader: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: theme.colors.primary,\n    marginBottom: 10,\n    paddingHorizontal: 10,\n  },\n  timezoneItemContent: {\n    flex: 1,\n  },\n  timezoneId: {\n    fontSize: 12,\n    color: theme.colors.secondary,\n    marginTop: 2,\n  },\n  noPaymentMethodsContainer: {\n    padding: 20,\n    alignItems: 'center',\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n  },\n  noPaymentMethodsText: {\n    color: theme.colors.secondary,\n    fontSize: 16,\n  },\n});\n\nexport default SettingsPaymentsTab; ","import React from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet, ScrollView } from 'react-native';\nimport { theme } from '../styles/theme';\n\nconst TabBar = ({ tabs, activeTab, onTabPress, isMobile }) => {\n  return (\n    <ScrollView \n      horizontal={isMobile}\n      showsHorizontalScrollIndicator={false}\n      contentContainerStyle={[\n        styles.container,\n        isMobile && styles.mobileContainer\n      ]}\n    >\n      {tabs.map((tab) => (\n        <TouchableOpacity\n          key={tab.id}\n          style={[\n            styles.tab,\n            activeTab === tab.id && styles.activeTab,\n            isMobile && styles.mobileTab\n          ]}\n          onPress={() => onTabPress(tab.id)}\n        >\n          <Text style={[\n            styles.tabText,\n            activeTab === tab.id && styles.activeTabText,\n            isMobile && styles.mobileTabText\n          ]}>\n            {tab.label}\n          </Text>\n        </TouchableOpacity>\n      ))}\n    </ScrollView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    padding: 8,\n    marginBottom: 16,\n  },\n  mobileContainer: {\n    padding: 4,\n    marginBottom: 10,\n  },\n  tab: {\n    flex: 1,\n    paddingVertical: 12,\n    paddingHorizontal: 20,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: 6,\n    marginHorizontal: 4,\n  },\n  mobileTab: {\n    flex: 0,\n    minWidth: 150,\n    paddingVertical: 8,\n    paddingHorizontal: 16,\n  },\n  activeTab: {\n    backgroundColor: theme.colors.primary,\n  },\n  tabText: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: theme.colors.text,\n    fontFamily: theme.fonts?.regular?.fontFamily,\n  },\n  mobileTabText: {\n    fontSize: 14,\n  },\n  activeTabText: {\n    color: theme.colors.whiteText || theme.colors.background,\n  },\n});\n\nexport default TabBar; ","import React, { useState, useEffect, useContext, useRef, useCallback } from 'react';\nimport { View, ScrollView, StyleSheet, Text, TextInput, TouchableOpacity, Image, Platform, StatusBar, Alert, useWindowDimensions, SafeAreaView, ActivityIndicator } from 'react-native';\nimport { MaterialCommunityIcons, Ionicons } from '@expo/vector-icons';\nimport { Button, Portal, Dialog, Paragraph } from 'react-native-paper';\nimport { useNavigation } from '@react-navigation/native';\nimport * as ImagePicker from 'expo-image-picker';\nimport { theme } from '../styles/theme';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { AuthContext, debugLog, getStorage, setStorage } from '../context/AuthContext';\nimport { TutorialContext } from '../context/TutorialContext';\nimport FloatingSaveButton from '../components/FloatingSaveButton';\nimport ServiceManager from '../components/ServiceManager';\nimport ProfessionalTab from '../components/ProfessionalTab';\nimport RecordedPets from '../components/RecordedPets';\nimport EditableSection from '../components/EditableSection';\nimport DatePicker from '../components/DatePicker';\nimport BackHeader from '../components/BackHeader';\nimport CrossPlatformView from '../components/CrossPlatformView';\nimport TutorialModal from '../components/TutorialModal';\nimport { DEFAULT_SERVICES } from '../data/mockData';\nimport ProfileInfoTab from '../components/profile/ProfileInfoTab';\nimport ServicesAvailabilityTab from '../components/profile/ServicesAvailabilityTab';\nimport PetsPreferencesTab from '../components/profile/PetsPreferencesTab';\nimport SettingsPaymentsTab from '../components/profile/SettingsPaymentsTab';\nimport TabBar from '../components/TabBar';\nimport { userProfile, updateProfileInfo } from '../api/API';\n\nconst MyProfile = () => {\n  debugLog('MBA3ou4bg54ug: MyProfile component rendering/mounting');\n  \n  const navigation = useNavigation();\n  const { width: windowWidth } = useWindowDimensions();\n  const { screenWidth, isCollapsed, is_DEBUG, userRole, isApprovedProfessional, user, logout } = useContext(AuthContext);\n  const [isMobileDesktop, setisMobileDesktop] = useState(screenWidth <= 900);\n  const [isWideScreen, setIsWideScreen] = useState(screenWidth >= 1200);\n  const styles = createStyles(screenWidth, isCollapsed);\n  const [activeTab, setActiveTab] = useState('profile_info');\n  const [hasUnsavedChanges, setHasUnsavedChanges] = useState(false);\n  \n  // Track when profile was last loaded\n  const lastProfileLoadRef = useRef(0);\n  // Flag to prevent multiple concurrent API calls\n  const isLoadingProfileRef = useRef(false);\n  // Track component mounted state\n  const isMountedRef = useRef(true);\n  \n  // Profile state\n  const [profileData, setProfileData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  const [editMode, setEditMode] = useState({});\n\n  const [currentPlan, setCurrentPlan] = useState({\n    id: 'waitlist',\n    title: 'Waitlist Signup',\n    nextBilling: 'N/A',\n    connections: { used: 0, total: 'Unlimited' }\n  });\n\n  const { \n    isVisible: isTutorialVisible,\n    currentStep,\n    totalSteps,\n    stepData,\n    handleNext,\n    handlePrevious,\n    handleSkip,\n    completeTutorial,\n  } = useContext(TutorialContext);\n\n  // Set mounted flag to false when component unmounts\n  useEffect(() => {\n    return () => {\n      debugLog('MBA3ou4bg54ug: MyProfile component unmounting');\n      isMountedRef.current = false;\n    };\n  }, []);\n\n  const loadActiveTab = useCallback(async () => {\n    try {\n      // First, check URL parameters directly when on web\n      if (Platform.OS === 'web') {\n        const urlParams = new URLSearchParams(window.location.search);\n        const tabFromUrl = urlParams.get('initialTab') || urlParams.get('screen');\n        \n        if (tabFromUrl && ['profile_info', 'pets_preferences', 'settings_payments', 'services_availability'].includes(tabFromUrl)) {\n          debugLog('MBA3ou4bg54ug: Retrieved tab from URL params', { tabFromUrl });\n          setActiveTab(tabFromUrl);\n          // Store this tab in storage for persistence\n          await setStorage('MyProfileActiveTab', tabFromUrl);\n          return;\n        }\n      }\n      \n      // Then check navigation params\n      const params = navigation.getState().routes.find(route => route.name === 'MyProfile')?.params;\n      debugLog('MBA3ou4bg54ug: Navigation params', params);\n      \n      if (params?.initialTab) {\n        debugLog('MBA3ou4bg54ug: Received initialTab param', { initialTab: params.initialTab });\n        setActiveTab(params.initialTab);\n        await setStorage('MyProfileActiveTab', params.initialTab);\n        return;\n      } else if (params?.screen) {\n        debugLog('MBA3ou4bg54ug: Received screen param', { screen: params.screen });\n        setActiveTab(params.screen);\n        await setStorage('MyProfileActiveTab', params.screen);\n        return;\n      } else if (stepData?.tab) {\n        debugLog('MBA3ou4bg54ug: Received tab from stepData', { tab: stepData.tab });\n        setActiveTab(stepData.tab);\n        await setStorage('MyProfileActiveTab', stepData.tab);\n        return;\n      }\n      \n      // If we reach here, attempt to load from storage\n      const storedTab = await getStorage('MyProfileActiveTab');\n      if (storedTab) {\n        debugLog('MBA3ou4bg54ug: Loaded tab from storage', { storedTab });\n        setActiveTab(storedTab);\n      }\n    } catch (error) {\n      debugLog('MBA3ou4bg54ug: Error loading active tab', error);\n    }\n  }, [navigation, stepData]);\n\n  // Safely fix pet owners without triggering a profile reload\n  const checkAndFixPetOwners = useCallback(async (pets) => {\n    if (!pets || pets.length === 0) return;\n    \n    try {\n      const petsWithMissingOwners = pets.filter(pet => \n        pet.lastUpdateFailed || pet.ownerMissing\n      );\n      \n      if (petsWithMissingOwners.length > 0) {\n        debugLog('MBA3ou4bg54ug: Found pets with potential missing owners:', petsWithMissingOwners.length);\n        \n        // Try to fix each pet\n        for (const pet of petsWithMissingOwners) {\n          try {\n            const { fixPetOwner } = require('../api/API');\n            await fixPetOwner(pet.id);\n            debugLog('MBA3ou4bg54ug: Fixed pet owner successfully:', pet.id);\n          } catch (err) {\n            debugLog('MBA3ou4bg54ug: Failed to fix pet owner:', err);\n          }\n        }\n      }\n    } catch (error) {\n      debugLog('MBA3ou4bg54ug: Error checking/fixing pet owners:', error);\n    }\n  }, []);\n\n  const loadProfileData = useCallback(async () => {\n    // Prevent concurrent API calls\n    if (isLoadingProfileRef.current) {\n      debugLog('MBA3ou4bg54ug: Profile data load already in progress, skipping');\n      return;\n    }\n\n    // Check if we should reload based on time\n    const now = Date.now();\n    const timeSinceLastLoad = now - lastProfileLoadRef.current;\n    if (profileData && timeSinceLastLoad < 5000) {\n      debugLog('MBA3ou4bg54ug: Profile data loaded recently, skipping reload', { \n        timeSinceLastLoad: Math.round(timeSinceLastLoad / 1000) + 's' \n      });\n      return;\n    }\n\n    try {\n      isLoadingProfileRef.current = true;\n      \n      if (isMountedRef.current) setLoading(true);\n      if (isMountedRef.current) setError(null);\n      \n      debugLog('MBA3ou4bg54ug: Starting profile data load');\n      const response = await userProfile();\n      \n      if (!response || typeof response !== 'object') {\n        throw new Error('Invalid response format from API');\n      }\n      \n      debugLog('MBA3ou4bg54ug: Profile data loaded successfully');\n      \n      // Process the response\n      const processedResponse = {\n        ...response,\n        profilePhoto: response.profile_photo || null\n      };\n      \n      // Update the profile data state if the component is still mounted\n      if (isMountedRef.current) {\n        setProfileData(processedResponse);\n        setLoading(false);\n      }\n      \n      // Record successful load time\n      lastProfileLoadRef.current = Date.now();\n      \n      // Process pets if needed (without triggering another profile load)\n      await checkAndFixPetOwners(response.pets);\n      \n      // Load active tab after data is ready\n      if (isMountedRef.current) {\n        setTimeout(() => {\n          loadActiveTab();\n        }, 100);\n      }\n    } catch (error) {\n      debugLog('MBA3ou4bg54ug: Failed to load profile data:', error);\n      \n      if (isMountedRef.current) {\n        // Only show error if we don't have existing data\n        if (!profileData) {\n          setError('Failed to load profile data');\n        }\n        setLoading(false);\n      }\n    } finally {\n      isLoadingProfileRef.current = false;\n    }\n  }, [checkAndFixPetOwners, loadActiveTab]);\n\n  // Initial data load on mount\n  useEffect(() => {\n    debugLog('MBA3ou4bg54ug: Initial profile data load');\n    loadProfileData();\n    \n    // Load active tab independently\n    loadActiveTab();\n  }, []); // Empty dependency array to run only once on mount\n\n  // Handle focus events (when returning to this screen)\n  useEffect(() => {\n    const unsubscribe = navigation.addListener('focus', () => {\n      // Only reload data if sufficient time has passed since the last load\n      const now = Date.now();\n      const timeSinceLastLoad = now - lastProfileLoadRef.current;\n      const shouldReload = !profileData || timeSinceLastLoad > 60000;\n      \n      if (shouldReload) {\n        debugLog('MBA3ou4bg54ug: Focus event - reloading profile data', {\n          timeSinceLastLoad: Math.round(timeSinceLastLoad / 1000) + 's'\n        });\n        loadProfileData();\n      } else {\n        debugLog('MBA3ou4bg54ug: Focus event - using existing profile data', {\n          timeSinceLastLoad: Math.round(timeSinceLastLoad / 1000) + 's'\n        });\n      }\n    });\n\n    return unsubscribe;\n  }, [navigation, loadProfileData]);\n\n  // Store the active tab whenever it changes\n  useEffect(() => {\n    const storeActiveTab = async () => {\n      try {\n        await setStorage('MyProfileActiveTab', activeTab);\n        \n        // Update URL params without reloading the page\n        if (Platform.OS === 'web') {\n          const url = new URL(window.location.href);\n          url.searchParams.set('initialTab', activeTab);\n          window.history.replaceState({}, '', url.toString());\n        }\n        \n        debugLog('MBA3ou4bg54ug: Stored active tab', { activeTab });\n      } catch (error) {\n        debugLog('MBA3ou4bg54ug: Error storing active tab', error);\n      }\n    };\n    \n    if (activeTab) {\n      storeActiveTab();\n    }\n  }, [activeTab]);\n\n  // Handle navigation state changes (tab selection from params)\n  useEffect(() => {\n    const unsubscribe = navigation.addListener('state', () => {\n      try {\n        const params = navigation.getState().routes.find(route => route.name === 'MyProfile')?.params;\n        \n        if (params?.screen) {\n          debugLog('MBA3ou4bg54ug: State change - setting active tab', { screen: params.screen });\n          setActiveTab(params.screen);\n        } else if (params?.initialTab) {\n          debugLog('MBA3ou4bg54ug: State change - setting active tab', { initialTab: params.initialTab });\n          setActiveTab(params.initialTab);\n        }\n      } catch (error) {\n        debugLog('MBA3ou4bg54ug: Error handling navigation state change', error);\n      }\n    });\n\n    return unsubscribe;\n  }, [navigation]);\n\n  // Handle screen dimension changes\n  useEffect(() => {\n    const updateLayout = () => {\n      setisMobileDesktop(screenWidth <= 900);\n      setIsWideScreen(screenWidth >= 1200);\n    };\n    updateLayout();\n  }, [screenWidth]);\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n    } catch (err) {\n      debugLog('MBA3ou4bg54ug: Error during logout:', err);\n    }\n  };\n\n  const tabs = [\n    { id: 'profile_info', label: userRole === 'professional' ? 'Professional Profile Info' : 'Owner Profile Info' },\n    // ...(userRole === 'professional' ? [{ id: 'services_availability', label: 'Services & Availability' }] : []), TODO: Add back in after MVP\n    { id: 'pets_preferences', label: 'My Pets' },\n    // { id: 'pets_preferences', label: 'Pets & Preferences' }, // TODO: Add back in after MVP\n    { id: 'settings_payments', label: 'Settings' }\n    // { id: 'settings_payments', label: userRole === 'professional' ? 'Settings & Payout Methods' : 'Settings & Payment Methods' } // TODO: Add back in after MVP\n  ];\n\n  const handlePickImage = async () => {\n    // This function is now just a stub that returns a promise\n    // The actual image picking and uploading is handled in ProfileInfoTab\n    return null;\n  };\n\n  // Handle save completion from child components\n  const handleSaveComplete = (updatedProfile) => {\n    debugLog('MBA3ou4bg54ug: Save completed with updated profile');\n    \n    // Update the profileData with the saved data\n    setProfileData(prev => {\n      const newProfileData = {\n        ...prev,\n        ...updatedProfile\n      };\n      \n      // Ensure profilePhoto is set from either property name\n      if (updatedProfile.profile_photo) {\n        newProfileData.profilePhoto = updatedProfile.profile_photo;\n        newProfileData.profile_photo = updatedProfile.profile_photo;\n      } else if (updatedProfile.profilePhoto) {\n        newProfileData.profile_photo = updatedProfile.profilePhoto;\n        newProfileData.profilePhoto = updatedProfile.profilePhoto;\n      }\n      \n      return newProfileData;\n    });\n    \n    // Reset state flags\n    setHasUnsavedChanges(false);\n    setEditMode({});\n    \n    // Update last profile load timestamp to prevent unnecessary reloads\n    lastProfileLoadRef.current = Date.now();\n  };\n\n  // Handle field updates before saving\n  const handleUpdateField = (field, value) => {\n    debugLog('MBA3ou4bg54ug: Updating field locally:', field);\n    \n    // Only update local state, actual save will happen in the child component\n    setProfileData(prev => ({\n      ...prev,\n      [field]: value\n    }));\n    \n    // Mark that we have unsaved changes\n    setHasUnsavedChanges(true);\n  };\n\n  const toggleEditMode = (section) => {\n    setEditMode(prev => ({ ...prev, [section]: !prev[section] }));\n  };\n\n  const handleSwitchPlan = (planId) => {\n    // TODO: Implement API call to switch plans\n    debugLog('MBA3ou4bg54ug: Switching to plan:', planId);\n  };\n\n  const renderActiveTab = () => {\n    debugLog('MBA3ou4bg54ug: Rendering active tab', { activeTab });\n    \n    switch (activeTab) {\n      case 'profile_info':\n        return (\n          <ProfileInfoTab\n            profilePhoto={profileData?.profilePhoto}\n            email={profileData?.email}\n            phone={profileData?.phone}\n            age={profileData?.age}\n            address={profileData?.address}\n            city={profileData?.city}\n            state={profileData?.state}\n            zip={profileData?.zip}\n            country={profileData?.country}\n            coordinates={profileData?.coordinates}\n            bio={profileData?.bio}\n            about_me={profileData?.about_me}\n            name={profileData?.name}\n            emergencyContact={profileData?.emergency_contact}\n            authorizedHouseholdMembers={profileData?.authorized_household_members}\n            editMode={editMode}\n            toggleEditMode={toggleEditMode}\n            onChangeText={handleUpdateField}\n            pickImage={handlePickImage}\n            setHasUnsavedChanges={(hasChanges) => {\n              debugLog('MBA9876', 'ProfileInfoTab setting hasUnsavedChanges:', hasChanges);\n              setHasUnsavedChanges(hasChanges);\n            }}\n            onSaveComplete={handleSaveComplete}\n            isMobile={isMobileDesktop}\n            rating={profileData?.rating}\n            reviews={profileData?.reviews}\n            role={userRole}\n            isProfessional={userRole === 'professional'}\n            insurance={profileData?.insurance}\n            onNavigateToTab={setActiveTab}\n            navigation={navigation}\n          />\n        );\n      case 'services_availability':\n        return (\n          <ServicesAvailabilityTab\n            services={profileData?.services}\n            onToggleService={(id) => {\n              const updatedServices = profileData?.services.map(s => \n                s.id === id ? { ...s, isActive: !s.isActive } : s\n              );\n              handleUpdateField('services', updatedServices);\n            }}\n            onEditHours={() => {}}\n            onBlockService={() => {}}\n            onPartialDayBlock={() => {}}\n            isMobile={isMobileDesktop}\n          />\n        );\n      case 'pets_preferences':\n        return (\n          <PetsPreferencesTab\n            pets={profileData?.pets}\n            onAddPet={(newPet) => {\n              // Check if the pet should be added to the top of the list\n              const shouldAddToTop = newPet._addToTop;\n              \n              // Remove the _addToTop flag before adding to state\n              const { _addToTop, ...petToAdd } = newPet;\n              \n              // Add the new pet to the local state (at the top or bottom)\n              const updatedPets = shouldAddToTop \n                ? [petToAdd, ...(profileData?.pets || [])] \n                : [...(profileData?.pets || []), petToAdd];\n                \n              handleUpdateField('pets', updatedPets);\n              \n              // This will mark that there are unsaved changes\n              debugLog('MBA5432', 'Added new pet locally:', petToAdd, shouldAddToTop ? '(at top of list)' : '(at bottom of list)');\n            }}\n            onEditPet={(petId, updatedPetData) => {\n              // Update the existing pet in local state\n              const updatedPets = (profileData?.pets || []).map(pet => \n                pet.id === petId ? { ...pet, ...updatedPetData } : pet\n              );\n              handleUpdateField('pets', updatedPets);\n              debugLog('MBA5432', 'Updated pet locally:', { petId, updatedPetData });\n            }}\n            onDeletePet={(petId) => {\n              // Remove the pet from local state\n              const updatedPets = (profileData?.pets || []).filter(pet => pet.id !== petId);\n              handleUpdateField('pets', updatedPets);\n              debugLog('MBA5432', 'Deleted pet locally:', petId);\n            }}\n            onReplacePet={(newPetsArray) => {\n              // Replace the entire pets array with the new one\n              // This prevents the issue with double updates causing blank pets\n              handleUpdateField('pets', newPetsArray);\n              debugLog('MBA5432', 'Replaced entire pets array:', newPetsArray);\n            }}\n            preferences={profileData?.preferences}\n            onUpdatePreferences={(section, id) => {\n              const updatedPreferences = { ...profileData?.preferences };\n              if (section === 'homeEnvironment') {\n                if (updatedPreferences[section].includes(id)) {\n                  updatedPreferences[section] = updatedPreferences[section].filter(item => item !== id);\n                } else {\n                  updatedPreferences[section] = [...updatedPreferences[section], id];\n                }\n              } else {\n                updatedPreferences[section] = updatedPreferences[section].map(p =>\n                  p.id === id ? { ...p, selected: !p.selected } : p\n                );\n              }\n              handleUpdateField('preferences', updatedPreferences);\n            }}\n            userRole={userRole}\n            isMobile={isMobileDesktop}\n          />\n        );\n      case 'settings_payments':\n        debugLog('MBA54321 Rendering settings_payments tab with payment methods:', {\n          paymentMethods: profileData?.payment_methods\n        });\n        return (\n          <SettingsPaymentsTab\n            {...profileData}\n            navigation={navigation}\n            isMobile={isMobileDesktop}\n            onUpdateSetting={(id, value) => {\n              debugLog('Updating setting:', { id, value });\n              // Create an update object with just the changed setting\n              const updateData = { [id]: value };\n              \n              // Return the promise for proper chaining in the component\n              return updateProfileInfo(updateData)\n                .then(updatedProfile => {\n                  // Update the profile data with the response\n                  setProfileData(prev => ({\n                    ...prev,\n                    ...updatedProfile\n                  }));\n                  debugLog('MBA54321 Setting updated successfully:', updateData);\n                  // Return the updated profile for the promise chain\n                  return updatedProfile;\n                });\n            }}\n            paymentMethods={profileData?.payment_methods || []}\n            onAddPaymentMethod={() => navigation.navigate('AddPaymentMethod')}\n            onRemovePaymentMethod={(id) => {\n              debugLog('Removing payment method:', id);\n              // TODO: Implement API call to remove payment method\n            }}\n            onSetDefaultPayment={(id) => {\n              debugLog('Setting default payment method:', id);\n              // TODO: Implement API call to set default payment method\n            }}\n            currentPlan={profileData?.currentPlan || currentPlan}\n            onSwitchPlan={handleSwitchPlan}\n            isMobile={isMobileDesktop}\n            userRole={userRole}\n            isApprovedProfessional={isApprovedProfessional}\n          />\n        );\n      default:\n        return null;\n    }\n  };\n\n  // Show loading indicator if we're loading AND don't have existing data\n  if (loading && !profileData) {\n    return (\n      <View style={styles.container}>\n        <ActivityIndicator size=\"large\" color=\"#0000ff\" />\n      </View>\n    );\n  }\n\n  // Only show error if we have an error AND don't have existing data to display\n  if (error && !profileData) {\n    return (\n      <View style={styles.container}>\n        <Text style={styles.errorText}>{error}</Text>\n      </View>\n    );\n  }\n  \n  // If loading with existing data, we'll render the UI with the existing data\n\n  return (\n    <View style={styles.mainContainer}>\n      <SafeAreaView style={styles.container}>        \n        <View style={styles.content}>\n          <View style={styles.mainContent}>\n            <View style={[styles.headerSection, { paddingTop: isMobileDesktop ? 64 : 24 }]}>\n              <Text style={styles.title}>Profile Settings</Text>\n              <ScrollView \n                horizontal \n                showsHorizontalScrollIndicator={false}\n                contentContainerStyle={styles.tabScrollContainer}\n              >\n                <View style={styles.tabContainer}>\n                  {tabs.map((tab) => (\n                    <TouchableOpacity\n                      key={tab.id}\n                      style={[styles.tab, activeTab === tab.id && styles.activeTab]}\n                      onPress={() => {\n                        if (activeTab !== tab.id) {\n                          debugLog('MBA3ou4bg54ug: Tab clicked - changing to', { tab: tab.id });\n                          setActiveTab(tab.id);\n                          // Update URL params without navigation\n                          if (Platform.OS === 'web') {\n                            const url = new URL(window.location.href);\n                            url.searchParams.set('initialTab', tab.id);\n                            window.history.replaceState({}, '', url.toString());\n                          }\n                        }\n                      }}\n                    >\n                      <Text style={[styles.tabText, activeTab === tab.id && styles.activeTabText]}>\n                        {tab.label}\n                      </Text>\n                    </TouchableOpacity>\n                  ))}\n                </View>\n              </ScrollView>\n            </View>\n\n            <View style={styles.tabContent}>\n              {renderActiveTab()}\n            </View>\n          </View>\n        </View>\n\n        {isTutorialVisible && stepData?.screen === 'MyProfile' && (\n          <TutorialModal\n            step={currentStep}\n            totalSteps={totalSteps}\n            title={stepData.title}\n            description={stepData.description}\n            position={stepData.position}\n            onNext={handleNext}\n            onPrevious={handlePrevious}\n            onSkip={handleSkip}\n            onClose={completeTutorial}\n          />\n        )}\n      </SafeAreaView>\n    </View>\n  );\n};\n\nconst createStyles = (screenWidth, isCollapsed) => StyleSheet.create({\n  mainContainer: {\n    flex: 1,\n    backgroundColor: theme.colors.surface,\n    height: '100vh',\n    overflow: 'hidden',\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    marginLeft: screenWidth > 900 ? (isCollapsed ? 70 : 250) : 0,\n    transition: 'margin-left 0.3s ease',\n  },\n  container: {\n    flex: 1,\n    backgroundColor: theme.colors.surface,\n  },\n  content: {\n    flex: 1,\n    height: '100%',\n    overflow: 'auto',\n    backgroundColor: theme.colors.surface,\n  },\n  mainContent: {\n    flex: 1,\n    width: '100%',\n    alignSelf: 'center',\n    backgroundColor: theme.colors.surface,\n  },\n  headerSection: {\n    width: '100%',\n    backgroundColor: theme.colors.surfaceContrast,\n    paddingHorizontal: 24,\n    paddingTop: 24,\n    zIndex: 2,\n  },\n  title: {\n    fontSize: 32,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 24,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  tabScrollContainer: {\n    flexGrow: 0,\n  },\n  tabContainer: {\n    flexDirection: 'row',\n    gap: screenWidth <= 900 ? 22 : 32,\n    paddingRight: screenWidth <= 900 ? 16 : 0,\n  },\n  tab: {\n    paddingBottom: 8,\n    borderBottomWidth: 2,\n    borderBottomColor: 'transparent',\n  },\n  activeTab: {\n    borderBottomColor: theme.colors.primary,\n  },\n  tabText: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  activeTabText: {\n    color: theme.colors.primary,\n    fontWeight: '500',\n  },\n  tabContent: {\n    flex: 1,\n    padding: screenWidth <= 900 ? 10 : 24,\n    backgroundColor: theme.colors.surface,\n  },\n  errorText: {\n    color: 'red',\n    textAlign: 'center',\n    marginTop: 20,\n  },\n});\n\nexport default MyProfile;\n","import React from 'react';\nimport { TouchableOpacity, Text, StyleSheet } from 'react-native';\nimport { theme } from '../styles/theme';\n\nexport default function CustomButton({ title, onPress }) {\n  return (\n    <TouchableOpacity style={styles.button} onPress={onPress}>\n      <Text style={styles.buttonText}>{title}</Text>\n    </TouchableOpacity>\n  );\n}\n\nconst styles = StyleSheet.create({\n  button: {\n    backgroundColor: theme.colors.primary,\n    paddingVertical: theme.spacing.small,\n    paddingHorizontal: theme.spacing.medium,\n    borderRadius: 5,\n    alignItems: 'center',\n    marginVertical: theme.spacing.small,\n  },\n  buttonText: {\n    color: theme.colors.whiteText,\n    fontSize: theme.fontSizes.medium,\n  },\n});","import React, { useState, useContext, useEffect } from 'react';\nimport { View, TextInput, Text, StyleSheet, TouchableOpacity, Dimensions, Alert, ActivityIndicator, Platform, Keyboard, SafeAreaView, KeyboardAvoidingView, ScrollView } from 'react-native';\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport axios from 'axios';\nimport { theme } from '../styles/theme';\nimport CustomButton from '../components/CustomButton';\nimport { AuthContext } from '../context/AuthContext';\nimport { API_BASE_URL } from '../config/config';\nimport { navigateToFrom } from '../components/Navigation';\nimport { validateEmail, validatePassword, sanitizeInput } from '../validation/validation';\nimport { debugLog } from '../context/AuthContext';\nimport { updateTimeSettings } from '../api/API';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { Ionicons } from '@expo/vector-icons';\nimport platformNavigation from '../utils/platformNavigation';\n\nconst { width: screenWidth } = Dimensions.get('window');\n\nexport default function SignIn() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [emailError, setEmailError] = useState('');\n  const [passwordError, setPasswordError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [successMessage, setSuccessMessage] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [rememberMe, setRememberMe] = useState(false);\n  const navigation = useNavigation();\n  const { signIn, is_prototype, is_DEBUG } = useContext(AuthContext);\n  const route = useRoute();\n\n  const validateForm = () => {\n    let isValid = true;\n    \n    // Validate email\n    const emailValidation = validateEmail(email.trim());\n    setEmailError(emailValidation.message);\n    if (!emailValidation.isValid) isValid = false;\n    \n    // Validate password\n    const passwordValidation = validatePassword(password);\n    setPasswordError(passwordValidation.message);\n    if (!passwordValidation.isValid) isValid = false;\n    \n    return isValid;\n  };\n\n  // Enhanced input handlers with real-time sanitization\n  const handleEmailChange = (text) => {\n    const sanitizedText = sanitizeInput(text, 'email');\n    \n    const removalPercentage = text.length > 0 ? ((text.length - sanitizedText.length) / text.length) * 100 : 0;\n    \n    if (removalPercentage > 20 && text.length > 5) {\n      debugLog('MBA1234: Potentially malicious email input detected in SignIn:', {\n        original: text,\n        sanitized: sanitizedText,\n        removalPercentage\n      });\n      return;\n    }\n    \n    setEmail(sanitizedText);\n    setEmailError('');\n  };\n\n  const handlePasswordChange = (text) => {\n    const sanitizedText = sanitizeInput(text, 'password');\n    \n    const removalPercentage = text.length > 0 ? ((text.length - sanitizedText.length) / text.length) * 100 : 0;\n    \n    if (removalPercentage > 50 && text.length > 8) {\n      debugLog('MBA1234: Potentially malicious password input detected in SignIn:', {\n        original: text,\n        sanitized: sanitizedText,\n        removalPercentage\n      });\n      return;\n    }\n    \n    setPassword(sanitizedText);\n    setPasswordError('');\n  };\n\n  const handleLogin = async () => {\n    if (Platform.OS === 'ios' || Platform.OS === 'android') {\n      Keyboard.dismiss();\n    }\n\n    // Validate form before proceeding\n    if (!validateForm()) {\n      return;\n    }\n\n    setLoading(true);\n    try {\n      debugLog('MBA67890 Starting login process');\n      debugLog('MBA67890 API Base URL:', API_BASE_URL);\n      debugLog('MBA67890 Login request details:', {\n        url: `${API_BASE_URL}/api/token/`,\n        method: 'POST',\n        data: {\n          email: email.trim().toLowerCase(),\n          password: '***' // masked for security\n        }\n      });\n\n      debugLog('MBA67890 Attempting to authenticate with backend');\n      \n      // Sanitize inputs before sending to API\n      const sanitizedEmail = sanitizeInput(email, 'email');\n      const sanitizedPassword = sanitizeInput(password, 'password');\n      \n      debugLog('MBA9876: Login attempt with sanitized inputs', {\n        originalEmail: email,\n        sanitizedEmail,\n        passwordChanged: password !== sanitizedPassword\n      });\n      \n      // Create a direct axios instance without interceptors for login\n      const directAxios = axios.create({\n        baseURL: API_BASE_URL,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n\n      const response = await directAxios.post('/api/token/', {\n        email: sanitizedEmail.toLowerCase(),\n        password: sanitizedPassword,\n      });\n\n      const { access, refresh } = response.data;\n      \n      debugLog('MBA67890 Authentication successful, received tokens');\n      \n      // Use the signIn function from AuthContext to properly set up authentication\n      await signIn(access, refresh);\n\n      // Update time settings after successful login\n      try {\n        let userTimezone = 'UTC';\n        try {\n          userTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n        } catch (error) {\n          debugLog('MBA9876: Error detecting timezone', error);\n        }\n        \n        await updateTimeSettings(userTimezone, false);\n        debugLog('MBA9876: Time settings updated successfully');\n      } catch (timeError) {\n        debugLog('MBA9876: Error updating time settings (non-critical)', timeError);\n      }\n\n      // Navigate to the appropriate screen\n      const fromScreen = route.params?.from;\n      if (fromScreen) {\n        navigateToFrom(navigation, fromScreen);\n      } else {\n        navigation.navigate('Dashboard');\n      }\n    } catch (error) {\n      debugLog('MBA9876: Login error:', error.response?.data || error.message);\n      \n      let errorMessage = 'Login failed. Please check your credentials.';\n      if (error.response) {\n        const errorData = error.response.data;\n        if (errorData) {\n          if (typeof errorData === 'string') {\n            errorMessage = errorData;\n          } else if (errorData.detail) {\n            errorMessage = errorData.detail;\n          } else if (errorData.error) {\n            errorMessage = errorData.error;\n          }\n        }\n      }\n      \n      if (Platform.OS === 'ios' || Platform.OS === 'android') {\n        Alert.alert('Login Failed', errorMessage);\n      } else {\n        setSuccessMessage(errorMessage);\n      }\n\n      setEmailError('Invalid email or password');\n      setPasswordError('Invalid email or password');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Add useEffect to handle document-wide keyboard events\n  useEffect(() => {\n    if (Platform.OS === 'web' && typeof document !== 'undefined') {\n      const handleDocumentKeyPress = (e) => {\n        if (e.key === 'Enter') {\n          handleLogin();\n        }\n      };\n\n      document.addEventListener('keydown', handleDocumentKeyPress);\n\n      // Cleanup listener when component unmounts\n      return () => {\n        document.removeEventListener('keydown', handleDocumentKeyPress);\n      };\n    }\n  }, [email, password]); // Dependencies ensure we have latest state values\n\n  // Keep the existing handleKeyPress for input fields\n  const handleKeyPress = (e) => {\n    if (Platform.OS === 'web' && e.nativeEvent.key === 'Enter') {\n      handleLogin();\n    }\n  };\n\n  // Add this inside the SignIn component, after any existing useEffect\n  useEffect(() => {\n    // Check if we're on web and have an invitation token in the URL\n    if (Platform.OS === 'web') {\n      const currentRouteInfo = platformNavigation.getCurrentRoute();\n      const url = currentRouteInfo.path;\n      debugLog('MBA5555 SignIn screen - Current URL path:', url);\n      \n      if (url.includes('/invite/')) {\n        // Extract token and redirect to signup\n        const pathParts = url.split('/');\n        const inviteIndex = pathParts.findIndex(part => part === 'invite');\n        if (inviteIndex !== -1 && pathParts.length > inviteIndex + 1) {\n          const token = pathParts[inviteIndex + 1];\n          debugLog('MBA5555 SignIn detected invite token, redirecting to SignUp:', token);\n          // Navigate to SignUp with the token\n          navigation.navigate('SignUp', { token });\n        }\n      }\n    }\n  }, []);\n\n  const togglePasswordVisibility = () => {\n    setShowPassword(!showPassword);\n  };\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.card}>\n        <Text style={styles.title}>Log in</Text>\n        \n        {is_prototype && (\n          <Text style={styles.prototypeWarning}>\n            Prototype Mode: You can sign in with anything for email and password\n          </Text>\n        )}\n        \n        <View style={styles.createAccountContainer}>\n          <Text style={styles.createAccountText}>Need a CrittrCove account?</Text>\n          <TouchableOpacity onPress={() => navigation.navigate('SignUp')}>\n            <Text style={styles.createAccountLink}>Create an account</Text>\n          </TouchableOpacity>\n        </View>\n        \n        <View style={styles.inputLabelContainer}>\n          <Text style={styles.inputLabel}>Email</Text>\n          <TextInput\n            style={[styles.input, emailError ? styles.errorInput : null]}\n            value={email}\n            onChangeText={handleEmailChange}\n            keyboardType=\"email-address\"\n            autoCapitalize=\"none\"\n            onKeyPress={Platform.OS === 'web' ? handleKeyPress : undefined}\n          />\n          {emailError ? <Text style={styles.errorText}>{emailError}</Text> : null}\n        </View>\n        \n        <View style={styles.inputLabelContainer}>\n          <View style={styles.passwordLabelContainer}>\n            <Text style={styles.inputLabel}>Password</Text>\n            <TouchableOpacity onPress={togglePasswordVisibility}>\n              <Text style={styles.showHideText}>{showPassword ? 'Hide' : 'Show'}</Text>\n            </TouchableOpacity>\n          </View>\n          <TextInput\n            style={[styles.input, passwordError ? styles.errorInput : null]}\n            secureTextEntry={!showPassword}\n            value={password}\n            onChangeText={handlePasswordChange}\n            onKeyPress={Platform.OS === 'web' ? handleKeyPress : undefined}\n          />\n          {passwordError ? <Text style={styles.errorText}>{passwordError}</Text> : null}\n        </View>\n        \n        <View style={styles.rememberMeContainer}>\n          <TouchableOpacity \n            style={styles.checkbox} \n            onPress={() => setRememberMe(!rememberMe)}\n          >\n            {rememberMe && (\n              <View style={styles.checkboxInner}>\n                <MaterialCommunityIcons name=\"check\" size={14} color={theme.colors.whiteText} />\n              </View>\n            )}\n          </TouchableOpacity>\n          <Text style={styles.rememberMeText}>Keep me logged in</Text>\n        </View>\n        \n        <TouchableOpacity style={styles.loginButton} onPress={handleLogin}>\n          <Text style={styles.loginButtonText}>Log in</Text>\n        </TouchableOpacity>\n        \n        {loading && <ActivityIndicator size=\"large\" color={theme.colors.primary} />}\n        {successMessage ? <Text style={styles.message}>{successMessage}</Text> : null}\n        \n        <TouchableOpacity onPress={() => navigation.navigate('ResetPassword')} style={styles.forgotPasswordContainer}>\n          <Text style={styles.link}>Forgot Password?</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: theme.colors.background,\n    padding: theme.spacing.medium,\n  },\n  card: {\n    backgroundColor: theme.colors.surfaceContrast,\n    borderRadius: 8,\n    padding: theme.spacing.large * 1.5,\n    width: '100%',\n    maxWidth: 480,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  title: {\n    fontSize: theme.fontSizes.extraLarge * 1.4,\n    fontWeight: 'bold',\n    color: theme.colors.text,\n    marginBottom: theme.spacing.medium,\n    textAlign: 'left',\n  },\n  createAccountContainer: {\n    flexDirection: 'row',\n    marginBottom: theme.spacing.large,\n  },\n  createAccountText: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    marginRight: 5,\n  },\n  createAccountLink: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.primary,\n    textDecorationLine: 'underline',\n  },\n  inputLabelContainer: {\n    marginBottom: theme.spacing.medium,\n  },\n  inputLabel: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    marginBottom: theme.spacing.small,\n    fontWeight: '500',\n  },\n  passwordLabelContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: theme.spacing.small,\n  },\n  showHideText: {\n    color: theme.colors.primary,\n    fontSize: theme.fontSizes.smallMedium,\n  },\n  input: {\n    height: 48,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 4,\n    paddingHorizontal: theme.spacing.small * 1.5,\n    fontSize: theme.fontSizes.medium,\n    backgroundColor: theme.colors.surfaceContrast,\n  },\n  errorInput: {\n    borderColor: theme.colors.error,\n  },\n  errorText: {\n    color: theme.colors.error,\n    fontSize: theme.fontSizes.smallMedium,\n    marginTop: 4,\n  },\n  rememberMeContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: theme.spacing.large,\n  },\n  checkbox: {\n    width: 20,\n    height: 20,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 2,\n    marginRight: 10,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  checkboxInner: {\n    width: 20,\n    height: 20,\n    backgroundColor: theme.colors.primary,\n    borderRadius: 2,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  rememberMeText: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n  },\n  loginButton: {\n    backgroundColor: theme.colors.primary,\n    paddingVertical: theme.spacing.small * 1.75,\n    borderRadius: 4,\n    alignItems: 'center',\n    marginBottom: theme.spacing.medium,\n  },\n  loginButtonText: {\n    color: theme.colors.whiteText,\n    fontSize: theme.fontSizes.medium,\n    fontWeight: '500',\n  },\n  forgotPasswordContainer: {\n    alignItems: 'center',\n    marginTop: theme.spacing.small,\n  },\n  link: {\n    color: theme.colors.primary,\n    fontSize: theme.fontSizes.smallMedium,\n  },\n  message: {\n    marginTop: theme.spacing.small,\n    color: theme.colors.error,\n    fontSize: theme.fontSizes.smallMedium,\n    textAlign: 'center',\n  },\n  prototypeWarning: {\n    backgroundColor: '#FFF3CD',\n    color: '#856404',\n    padding: theme.spacing.small * 1.5,\n    marginBottom: theme.spacing.medium,\n    borderRadius: 4,\n    textAlign: 'center',\n  },\n});\n","import React, { useState, useContext, useEffect } from 'react';\nimport { View, TextInput, Text, StyleSheet, ActivityIndicator, Dimensions, KeyboardAvoidingView, Platform, ScrollView, Alert, TouchableOpacity } from 'react-native';\nimport axios from 'axios';\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport { theme } from '../styles/theme';\nimport CustomButton from '../components/CustomButton';\nimport { API_BASE_URL } from '../config/config';\nimport { AuthContext, debugLog } from '../context/AuthContext'; // Import AuthContext\nimport { validateEmail, validateName, validatePassword, validatePasswordMatch, sanitizeInput } from '../validation/validation';\nimport { verifyInvitation } from '../api/API';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\n\nconst { width: screenWidth } = Dimensions.get('window');\n\nexport default function SignUp() {\n  const navigation = useNavigation();\n  const route = useRoute();\n  const { signIn, is_DEBUG } = useContext(AuthContext); // Use AuthContext to update auth state\n\n  const [firstName, setFirstName] = useState('');\n  const [lastName, setLastName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [successMessage, setSuccessMessage] = useState('');\n  const [inviterName, setInviterName] = useState('');\n  const [inviteToken, setInviteToken] = useState(null);\n  const [inviteVerified, setInviteVerified] = useState(false);\n  const [verifyingInvite, setVerifyingInvite] = useState(false);\n  \n  // Location state\n  const [location, setLocation] = useState('');\n  const [showLocationDropdown, setShowLocationDropdown] = useState(false);\n  const [locationError, setLocationError] = useState('');\n  const [locations, setLocations] = useState([]);\n  const [loadingLocations, setLoadingLocations] = useState(true);\n  \n  // Fallback locations in case API fails\n  const fallbackLocations = [\n    { name: 'Colorado Springs', supported: true },\n    { name: 'Denver', supported: false },\n    { name: 'Other', supported: false }\n  ];\n  \n  // Validation states\n  const [firstNameError, setFirstNameError] = useState('');\n  const [lastNameError, setLastNameError] = useState('');\n  const [emailError, setEmailError] = useState('');\n  const [passwordError, setPasswordError] = useState('');\n  const [confirmPasswordError, setConfirmPasswordError] = useState('');\n\n  // Check for invitation token when component mounts\n  useEffect(() => {\n    // Check if we have an invitation token in the route params or URL\n    const checkInvitation = async () => {\n      try {\n        // First check if we're on the 'Invite' screen\n        const isInviteScreen = route.name === 'Invite';\n        debugLog('MBA4321 Current route name:', route.name);\n        \n        // Check route params\n        let token = route.params?.token;\n        debugLog('MBA4321 Token from route params:', token);\n        \n        // If not in route params, check if we're on web and have it in the URL\n        if (!token && Platform.OS === 'web') {\n          const url = window.location.pathname;\n          debugLog('MBA4321 Current URL path:', url);\n          debugLog('MBA4321 Full location object:', {\n            pathname: window.location.pathname,\n            href: window.location.href,\n            search: window.location.search,\n            hash: window.location.hash\n          });\n          \n          if (url.includes('/invite/')) {\n            // Extract token from invite URL format\n            const pathParts = url.split('/');\n            const inviteIndex = pathParts.findIndex(part => part === 'invite');\n            if (inviteIndex !== -1 && pathParts.length > inviteIndex + 1) {\n              token = pathParts[inviteIndex + 1];\n              debugLog('MBA4321 Found invitation token from invite URL path:', token);\n            }\n          } else if (url.includes('/signup/')) {\n            // Extract token from signup URL format\n            const pathParts = url.split('/');\n            const signupIndex = pathParts.findIndex(part => part === 'signup');\n            if (signupIndex !== -1 && pathParts.length > signupIndex + 1) {\n              token = pathParts[signupIndex + 1];\n              debugLog('MBA4321 Found invitation token from signup URL path:', token);\n            }\n          }\n        }\n        \n        // If we still don't have a token, check the URL search params\n        if (!token && Platform.OS === 'web') {\n          const searchParams = new URLSearchParams(window.location.search);\n          const searchToken = searchParams.get('token');\n          if (searchToken) {\n            token = searchToken;\n            debugLog('MBA4321 Found invitation token from URL search params:', token);\n          }\n        }\n        \n        if (token) {\n          debugLog('MBA4321 Processing invitation token:', token);\n          setInviteToken(token);\n          setVerifyingInvite(true);\n          \n          try {\n            // Verify the token with the backend\n            const inviteInfo = await verifyInvitation(token);\n            debugLog('MBA4321 Invitation verification result:', inviteInfo);\n            \n            if (inviteInfo.valid) {\n              setInviteVerified(true);\n              setInviterName(inviteInfo.inviter_name);\n              \n              // If it's an email invitation, set the email field\n              if (inviteInfo.email) {\n                setEmail(inviteInfo.email);\n              }\n              \n              setSuccessMessage(`You've been invited by ${inviteInfo.inviter_name}!`);\n            } else {\n              setSuccessMessage(`This invitation is no longer valid: ${inviteInfo.error}`);\n            }\n          } catch (error) {\n            debugLog('MBA4321 Error verifying invitation:', error);\n            setSuccessMessage('This invitation link is invalid or has expired.');\n          } finally {\n            setVerifyingInvite(false);\n          }\n        }\n      } catch (error) {\n        debugLog('MBA4321 Error processing invitation:', error);\n        setVerifyingInvite(false);\n      }\n    };\n    \n    checkInvitation();\n  }, [route.params, route.name]);\n\n  // Fetch supported locations from backend\n  useEffect(() => {\n    const fetchLocations = async () => {\n      setLoadingLocations(true);\n      try {\n        // Fetch locations from backend\n        const response = await axios.get(`${API_BASE_URL}/api/locations/v1/supported/`);\n        debugLog('MBA6789: Locations fetched from backend', response.data);\n        \n        if (response.data && Array.isArray(response.data.locations)) {\n          setLocations(response.data.locations);\n        } else {\n          // Fallback to hardcoded locations if response format is unexpected\n          debugLog('MBA6789: Using fallback locations due to unexpected response format', response.data);\n          setLocations(fallbackLocations);\n        }\n      } catch (error) {\n        debugLog('MBA6789: Error fetching locations', error);\n        // Use fallback locations if API call fails\n        setLocations(fallbackLocations);\n      } finally {\n        setLoadingLocations(false);\n      }\n    };\n    \n    fetchLocations();\n  }, []);\n\n  const validateForm = () => {\n    let isValid = true;\n    \n    // Validate location only if not invited\n    if (!inviteVerified && !location) {\n      setLocationError('Please select your location');\n      isValid = false;\n    }\n    \n    // Validate first name with sanitization\n    const firstNameValidation = validateName(firstName);\n    setFirstNameError(firstNameValidation.message);\n    if (!firstNameValidation.isValid) isValid = false;\n    \n    // Validate last name with sanitization\n    const lastNameValidation = validateName(lastName);\n    setLastNameError(lastNameValidation.message);\n    if (!lastNameValidation.isValid) isValid = false;\n    \n    // Validate email with sanitization\n    const emailValidation = validateEmail(email);\n    setEmailError(emailValidation.message);\n    if (!emailValidation.isValid) isValid = false;\n    \n    // Validate password with sanitization\n    const passwordValidation = validatePassword(password);\n    setPasswordError(passwordValidation.message);\n    if (!passwordValidation.isValid) isValid = false;\n    \n    // Validate password match\n    const passwordMatchValidation = validatePasswordMatch(password, confirmPassword);\n    setConfirmPasswordError(passwordMatchValidation.message);\n    if (!passwordMatchValidation.isValid) isValid = false;\n    \n    return isValid;\n  };\n\n  const handleSignUp = async () => {\n    // Validate form before proceeding\n    if (!validateForm()) {\n      return;\n    }\n\n    setLoading(true);\n    try {\n      debugLog('MBA12345 Starting user registration process');\n      \n      // Sanitize all inputs before sending to backend\n      const sanitizedFirstName = sanitizeInput(firstName, 'name');\n      const sanitizedLastName = sanitizeInput(lastName, 'name');\n      const sanitizedEmail = sanitizeInput(email, 'email');\n      const sanitizedPassword = sanitizeInput(password, 'password');\n      const sanitizedLocation = sanitizeInput(location, 'general');\n      \n      debugLog('MBA12345 Input sanitization completed', {\n        originalFirstName: firstName,\n        sanitizedFirstName,\n        originalLastName: lastName,\n        sanitizedLastName,\n        originalEmail: email,\n        sanitizedEmail,\n        originalLocation: location,\n        sanitizedLocation,\n        passwordChanged: password !== sanitizedPassword\n      });\n      \n      // Get user's timezone and time format preferences\n      let userTimezone = 'UTC';\n      try {\n        // Try to get the timezone using Intl API\n        userTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n        debugLog('MBA12345 User timezone detected using Intl API', { userTimezone });\n      } catch (error) {\n        debugLog('MBA12345 Error detecting timezone using Intl API', error);\n        // Fallback to a default timezone\n        userTimezone = 'UTC';\n      }\n      \n      const useMilitaryTime = false; // Default to non-military time\n      \n      debugLog('MBA12345 User timezone and preferences', { userTimezone, useMilitaryTime });\n      \n      // Updated data structure with sanitized inputs\n      const userData = {\n        name: `${sanitizedFirstName.trim().charAt(0).toUpperCase() + sanitizedFirstName.trim().slice(1).toLowerCase()} ${sanitizedLastName.trim().charAt(0).toUpperCase() + sanitizedLastName.trim().slice(1).toLowerCase()}`, // Combine first and last name with first letter capitalized and all other letters lowercase\n        email: sanitizedEmail.trim().toLowerCase(),\n        password: sanitizedPassword,\n        password2: confirmPassword, // Note: We don't sanitize confirm password as it needs to match exactly\n        phone_number: '', // Add empty phone number for now\n        location: inviteVerified ? 'Colorado Springs' : sanitizedLocation, // Use default location for invited users\n        ...(inviteToken && { invitation_token: inviteToken }) // Only include invitation_token if it exists\n      };\n      \n      // Prepare user data with time settings and invitation token\n      const registrationData = {\n        ...userData,\n        timezone: userTimezone,\n        use_military_time: useMilitaryTime,\n        invitation_token: inviteToken // Add invitation token here for backend to handle\n      };\n      \n      debugLog('MBA12345 Registration data:', registrationData);\n      \n      // Create a direct axios instance without interceptors for registration\n      const directAxios = axios.create({\n        baseURL: API_BASE_URL,\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      // First register the user with the direct axios instance\n      const registerResponse = await directAxios.post('/api/users/v1/register/', registrationData);\n      \n      debugLog('MBA12345 User registration successful', registerResponse.data);\n      \n      // The backend already handles invitation acceptance during registration\n      // No need to manually accept it again\n      \n      // After successful registration, log the user in to get authentication tokens\n      debugLog('MBA12345 Attempting to log in with new credentials');\n      \n      const loginResponse = await directAxios.post('/api/token/', {\n        email: sanitizedEmail.trim().toLowerCase(),\n        password: sanitizedPassword,\n      });\n      \n      debugLog('MBA12345 Login successful, received tokens');\n      \n      const { access, refresh } = loginResponse.data;\n      \n      // Use the signIn function from AuthContext to properly set up authentication\n      debugLog('MBA12345 Calling signIn function from AuthContext');\n      \n      await signIn(access, refresh);\n      \n      debugLog('MBA12345 Authentication setup complete');\n      \n      // NOTE: We don't need to manually accept the invitation since the backend handles it during registration\n      \n      if (Platform.OS === 'ios' || Platform.OS === 'android') {\n        Alert.alert('Success', 'Account created successfully!', [\n          { text: 'OK', onPress: () => navigation.navigate('Dashboard') }\n        ]);\n      } else {\n        navigation.navigate('Dashboard');\n      }\n    } catch (error) {\n      debugLog('MBA12345 Error during signup process', error.response?.data || error.message);\n      \n      let errorMessage = 'Signup Failed: An error occurred during signup.';\n      if (error.response) {\n        const errorData = error.response.data;\n        // Handle specific field errors\n        if (errorData) {\n          if (typeof errorData === 'object') {\n            // Handle field-specific errors\n            const firstError = Object.entries(errorData)[0];\n            if (firstError) {\n              const [field, messages] = firstError;\n              errorMessage = `${field}: ${Array.isArray(messages) ? messages[0] : messages}`;\n            }\n          } else if (typeof errorData === 'string') {\n            // Handle string error responses\n            errorMessage = errorData;\n          }\n        }\n      }\n      if (Platform.OS === 'ios' || Platform.OS === 'android') {\n        Alert.alert('Error', errorMessage);\n      } else {\n        setSuccessMessage(errorMessage);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Enhanced input handlers with real-time sanitization\n  const handleFirstNameChange = (text) => {\n    // Apply real-time sanitization for names\n    const sanitizedText = sanitizeInput(text, 'name');\n    \n    // Check if sanitization removed too much content (potential attack)\n    const removalPercentage = text.length > 0 ? ((text.length - sanitizedText.length) / text.length) * 100 : 0;\n    \n    if (removalPercentage > 30 && text.length > 3) {\n      debugLog('MBA1234: Potentially malicious first name input detected:', {\n        original: text,\n        sanitized: sanitizedText,\n        removalPercentage\n      });\n      return; // Don't update if too much was removed\n    }\n    \n    setFirstName(sanitizedText);\n    setFirstNameError('');\n  };\n\n  const handleLastNameChange = (text) => {\n    // Apply real-time sanitization for names\n    const sanitizedText = sanitizeInput(text, 'name');\n    \n    // Check if sanitization removed too much content (potential attack)\n    const removalPercentage = text.length > 0 ? ((text.length - sanitizedText.length) / text.length) * 100 : 0;\n    \n    if (removalPercentage > 30 && text.length > 3) {\n      debugLog('MBA1234: Potentially malicious last name input detected:', {\n        original: text,\n        sanitized: sanitizedText,\n        removalPercentage\n      });\n      return; // Don't update if too much was removed\n    }\n    \n    setLastName(sanitizedText);\n    setLastNameError('');\n  };\n\n  const handleEmailChange = (text) => {\n    // Apply real-time sanitization for emails\n    const sanitizedText = sanitizeInput(text, 'email');\n    \n    // For emails, we're more strict about changes since they have a specific format\n    const removalPercentage = text.length > 0 ? ((text.length - sanitizedText.length) / text.length) * 100 : 0;\n    \n    if (removalPercentage > 20 && text.length > 5) {\n      debugLog('MBA1234: Potentially malicious email input detected:', {\n        original: text,\n        sanitized: sanitizedText,\n        removalPercentage\n      });\n      return; // Don't update if too much was removed\n    }\n    \n    setEmail(sanitizedText);\n    setEmailError('');\n  };\n\n  const handlePasswordChange = (text) => {\n    // For passwords, we're more lenient with sanitization during typing\n    // Full validation happens on form submission\n    const sanitizedText = sanitizeInput(text, 'password');\n    \n    // Only block if obvious malicious content\n    const removalPercentage = text.length > 0 ? ((text.length - sanitizedText.length) / text.length) * 100 : 0;\n    \n    if (removalPercentage > 50 && text.length > 8) {\n      debugLog('MBA1234: Potentially malicious password input detected:', {\n        original: text,\n        sanitized: sanitizedText,\n        removalPercentage\n      });\n      return; // Don't update if too much was removed\n    }\n    \n    setPassword(sanitizedText);\n    setPasswordError('');\n  };\n\n  const handleConfirmPasswordChange = (text) => {\n    // For confirm password, we don't sanitize as much since it needs to match exactly\n    // But we still prevent obvious XSS attempts\n    const sanitizedText = sanitizeInput(text, 'password');\n    \n    const removalPercentage = text.length > 0 ? ((text.length - sanitizedText.length) / text.length) * 100 : 0;\n    \n    if (removalPercentage > 50 && text.length > 8) {\n      debugLog('MBA1234: Potentially malicious confirm password input detected:', {\n        original: text,\n        sanitized: sanitizedText,\n        removalPercentage\n      });\n      return; // Don't update if too much was removed\n    }\n    \n    setConfirmPassword(sanitizedText);\n    setConfirmPasswordError('');\n  };\n\n  // Navigate to the sign in page\n  const navigateToSignIn = () => {\n    navigation.navigate('SignIn');\n  };\n\n  // Navigate to the waitlist page\n  const navigateToWaitlist = () => {\n    navigation.navigate('Waitlist');\n  };\n\n  // Handle location selection \n  const selectLocation = (selectedLocation) => {\n    console.log(\"Location selected:\", selectedLocation);\n    debugLog('MBA6789: Location selected', selectedLocation);\n    setLocation(selectedLocation);\n    setShowLocationDropdown(false);\n    setLocationError('');\n  };\n\n  return (\n    <KeyboardAvoidingView\n      style={styles.container}\n      behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n      keyboardVerticalOffset={Platform.OS === 'ios' ? 64 : 0}\n    >\n      <ScrollView contentContainerStyle={styles.scrollContainer}>\n        <View style={styles.formContainer}>\n          <Text style={styles.title}>Sign Up</Text>\n          <Text style={styles.subtitle}>Sign up to continue</Text>\n          \n          {verifyingInvite && (\n            <View style={styles.inviteContainer}>\n              <ActivityIndicator size=\"small\" color={theme.colors.primary} />\n              <Text style={styles.inviteText}>Verifying invitation...</Text>\n            </View>\n          )}\n          \n          {inviteVerified && (\n            <View style={styles.inviteContainer}>\n              <Text style={styles.inviteText}>\n                You've been invited by {inviterName}!\n              </Text>\n            </View>\n          )}\n          \n          {/* Location Dropdown - Only show if not invited */}\n          {!inviteVerified && (\n            <View style={styles.locationContainer}>\n              <Text style={styles.label}>Where are you located?</Text>\n              {loadingLocations ? (\n                <View style={[styles.input, styles.dropdown, styles.loadingContainer]}>\n                  <ActivityIndicator size=\"small\" color={theme.colors.primary} />\n                  <Text style={styles.placeholderText}>Loading locations...</Text>\n                </View>\n              ) : (\n                <View style={styles.dropdownWrapper}>\n                  <TouchableOpacity\n                    style={[\n                      styles.input,\n                      styles.dropdown,\n                      locationError ? styles.errorInput : null\n                    ]}\n                    onPress={() => setShowLocationDropdown(!showLocationDropdown)}\n                  >\n                    <Text style={location ? styles.inputText : styles.placeholderText}>\n                      {location || 'Select your location'}\n                    </Text>\n                    <MaterialCommunityIcons\n                      name={showLocationDropdown ? \"chevron-up\" : \"chevron-down\"}\n                      size={24}\n                      color={theme.colors.text}\n                    />\n                  </TouchableOpacity>\n                  \n                  {showLocationDropdown && (\n                    <View style={styles.dropdownMenu}>\n                      {locations.map((loc) => (\n                        <TouchableOpacity\n                          key={loc.name}\n                          style={styles.dropdownItem}\n                          onPress={() => selectLocation(loc.name)}\n                        >\n                          <Text style={styles.dropdownItemText}>\n                            {loc.name} {!loc.supported && \"(Coming Soon)\"}\n                          </Text>\n                        </TouchableOpacity>\n                      ))}\n                    </View>\n                  )}\n                </View>\n              )}\n              {locationError ? <Text style={styles.errorText}>{locationError}</Text> : null}\n            </View>\n          )}\n          \n          {/* Regular form fields */}\n          {(inviteVerified || !location || locations.find(loc => loc.name === location && loc.supported)) ? (\n            <>\n              <View style={styles.inputContainer}>\n                <TextInput\n                  style={[styles.input, firstNameError ? styles.errorInput : null]}\n                  placeholder=\"First Name\"\n                  value={firstName}\n                  onChangeText={handleFirstNameChange}\n                />\n                {firstNameError ? <Text style={styles.errorText}>{firstNameError}</Text> : null}\n              </View>\n              \n              <View style={styles.inputContainer}>\n                <TextInput\n                  style={[styles.input, lastNameError ? styles.errorInput : null]}\n                  placeholder=\"Last Name\"\n                  value={lastName}\n                  onChangeText={handleLastNameChange}\n                />\n                {lastNameError ? <Text style={styles.errorText}>{lastNameError}</Text> : null}\n              </View>\n              \n              <View style={styles.inputContainer}>\n                <TextInput\n                  style={[styles.input, emailError ? styles.errorInput : null]}\n                  placeholder=\"Email\"\n                  value={email}\n                  onChangeText={handleEmailChange}\n                  keyboardType=\"email-address\"\n                  autoCapitalize=\"none\"\n                  editable={true}\n                />\n                {emailError ? <Text style={styles.errorText}>{emailError}</Text> : null}\n              </View>\n              \n              <View style={styles.inputContainer}>\n                <TextInput\n                  style={[styles.input, passwordError ? styles.errorInput : null]}\n                  placeholder=\"Password\"\n                  value={password}\n                  onChangeText={handlePasswordChange}\n                  secureTextEntry\n                />\n                {passwordError ? <Text style={styles.errorText}>{passwordError}</Text> : null}\n              </View>\n              \n              <View style={styles.inputContainer}>\n                <TextInput\n                  style={[styles.input, confirmPasswordError ? styles.errorInput : null]}\n                  placeholder=\"Confirm Password\"\n                  value={confirmPassword}\n                  onChangeText={handleConfirmPasswordChange}\n                  secureTextEntry\n                />\n                {confirmPasswordError ? <Text style={styles.errorText}>{confirmPasswordError}</Text> : null}\n              </View>\n              \n              <CustomButton title=\"Sign Up\" onPress={handleSignUp} style={styles.signupButton} />\n            </>\n          ) : (\n            /* Show waitlist button if unsupported location is selected */\n            <View style={styles.waitlistContainer}>\n              <Text style={styles.waitlistMessage}>\n                CrittrCove isn't available in {location} yet, but we're expanding soon!\n              </Text>\n              <Text style={styles.waitlistSubMessage}>\n                Join our waitlist to be notified when we launch in your area.\n              </Text>\n              <CustomButton\n                title=\"Join Waitlist\"\n                onPress={navigateToWaitlist}\n                style={styles.waitlistButton}\n              />\n            </View>\n          )}\n          \n          {loading && <ActivityIndicator size=\"large\" color={theme.colors.primary} style={styles.loader} />}\n          {successMessage ? <Text style={styles.message}>{successMessage}</Text> : null}\n        </View>\n        \n        {/* Sign In Link */}\n        <View style={styles.signInContainer}>\n          <Text style={styles.signInText}>Already have an account? </Text>\n          <TouchableOpacity onPress={navigateToSignIn}>\n            <Text style={styles.signInLink}>Sign in</Text>\n          </TouchableOpacity>\n        </View>\n      </ScrollView>\n    </KeyboardAvoidingView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n  },\n  scrollContainer: {\n    padding: 20,\n    alignItems: 'center',\n    justifyContent: 'center',\n    minHeight: '100%',\n  },\n  formContainer: {\n    backgroundColor: theme.colors.surfaceContrast,\n    padding: 30,\n    borderRadius: 10,\n    width: '100%',\n    maxWidth: 500,\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  title: {\n    fontSize: 32,\n    color: theme.colors.text,\n    marginBottom: 8,\n    fontWeight: 'bold',\n    textAlign: 'center',\n  },\n  subtitle: {\n    color: theme.colors.text,\n    fontSize: 16,\n    marginBottom: 24,\n    textAlign: 'center',\n  },\n  inputContainer: {\n    width: '100%',\n    marginBottom: 16,\n  },\n  input: {\n    width: '100%',\n    height: 50,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 5,\n    paddingHorizontal: 10,\n    backgroundColor: theme.colors.surface,\n    fontSize: 16,\n  },\n  errorInput: {\n    borderColor: theme.colors.error,\n  },\n  errorText: {\n    color: theme.colors.error,\n    fontSize: 12,\n    marginTop: 5,\n  },\n  message: {\n    marginTop: 20,\n    color: theme.colors.text,\n    textAlign: 'center',\n    fontSize: 16,\n  },\n  inviteContainer: {\n    marginBottom: 20,\n    padding: 16,\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n    borderRadius: 8,\n    alignItems: 'center',\n    backgroundColor: '#f0f9ff',\n    width: '100%',\n    flexDirection: 'row',\n    justifyContent: 'center',\n  },\n  inviteText: {\n    color: theme.colors.primary,\n    fontSize: 16,\n    marginLeft: 8,\n    fontWeight: '500',\n    textAlign: 'center',\n  },\n  signupButton: {\n    marginTop: 24,\n    width: '100%',\n  },\n  loader: {\n    marginTop: 20,\n  },\n  signInContainer: {\n    flexDirection: 'row',\n    marginTop: 24,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  signInText: {\n    color: theme.colors.text,\n    fontSize: 16,\n  },\n  signInLink: {\n    color: theme.colors.primary,\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  dropdown: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    height: 50,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 5,\n    paddingHorizontal: 10,\n    backgroundColor: theme.colors.surface,\n  },\n  placeholderText: {\n    color: theme.colors.placeHolderText,\n    fontSize: 16,\n  },\n  inputText: {\n    color: theme.colors.text,\n    fontSize: 16,\n  },\n  dropdownMenu: {\n    position: 'absolute',\n    top: '100%',\n    left: 0,\n    right: 0,\n    zIndex: 1002,\n    marginTop: 4,\n    maxHeight: 200,\n    backgroundColor: theme.colors.surface,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 5,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  dropdownItem: {\n    padding: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  dropdownItemText: {\n    color: theme.colors.text,\n    fontSize: 16,\n  },\n  label: {\n    color: theme.colors.text,\n    fontSize: 16,\n    marginBottom: 8,\n  },\n  locationContainer: {\n    width: '100%',\n    marginBottom: 16,\n    position: 'relative',\n    zIndex: 1000,\n  },\n  dropdownWrapper: {\n    position: 'relative',\n    zIndex: 1001,\n  },\n  loadingContainer: {\n    justifyContent: 'center',\n  },\n  waitlistContainer: {\n    marginTop: 20,\n    padding: 20,\n    borderRadius: 8,\n    alignItems: 'center',\n    width: '100%',\n    backgroundColor: '#f0f9ff',\n    borderWidth: 1,\n    borderColor: '#e0e7ff',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.05,\n    shadowRadius: 2,\n    elevation: 2,\n  },\n  waitlistMessage: {\n    color: theme.colors.text,\n    fontSize: 18,\n    fontWeight: '600',\n    marginBottom: 16,\n    textAlign: 'center',\n  },\n  waitlistSubMessage: {\n    color: theme.colors.text,\n    fontSize: 16,\n    textAlign: 'center',\n    marginBottom: 8,\n  },\n  waitlistButton: {\n    marginTop: 24,\n    width: '100%',\n    backgroundColor: '#6B7280',\n  },\n});","import React, { useState, useContext } from 'react';\nimport { View, TextInput, Text, StyleSheet, Alert, ActivityIndicator, Dimensions, Platform, SafeAreaView, TouchableOpacity } from 'react-native';\nimport { theme } from '../styles/theme';\nimport { useNavigation } from '@react-navigation/native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { AuthContext, debugLog } from '../context/AuthContext';\nimport CustomButton from '../components/CustomButton';\nimport axios from 'axios';\nimport { API_BASE_URL } from '../config/config';\nimport { validateEmail, sanitizeInput } from '../validation/validation';\n\nconst { width: screenWidth } = Dimensions.get('window');\n\nexport default function ResetPassword() {\n  const [email, setEmail] = useState('');\n  const [emailError, setEmailError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [successMessage, setSuccessMessage] = useState('');\n  const navigation = useNavigation();\n  const { screenWidth: contextScreenWidth, isCollapsed, isSignedIn } = useContext(AuthContext);\n\n  // Enhanced input handler with real-time sanitization\n  const handleEmailChange = (text) => {\n    const sanitizedText = sanitizeInput(text, 'email');\n    \n    const removalPercentage = text.length > 0 ? ((text.length - sanitizedText.length) / text.length) * 100 : 0;\n    \n    if (removalPercentage > 20 && text.length > 5) {\n      debugLog('MBA1234: Potentially malicious email input detected in ResetPassword:', {\n        original: text,\n        sanitized: sanitizedText,\n        removalPercentage\n      });\n      return;\n    }\n    \n    setEmail(sanitizedText);\n    setEmailError('');\n    setSuccessMessage('');\n  };\n\n  const handleResetPassword = async () => {\n    // Validate email before proceeding\n    const emailValidation = validateEmail(email);\n    setEmailError(emailValidation.message);\n    \n    if (!emailValidation.isValid) {\n      return;\n    }\n\n    setLoading(true);\n    setSuccessMessage('');\n\n    try {\n      // Sanitize email before sending to API\n      const sanitizedEmail = sanitizeInput(email, 'email');\n      \n      debugLog('MBA1234: Password reset request for sanitized email:', {\n        originalEmail: email,\n        sanitizedEmail\n      });\n\n      const response = await axios.post(`${API_BASE_URL}/api/users/v1/reset-password/`, {\n        email: sanitizedEmail.toLowerCase(),\n      });\n\n      if (response.status === 200) {\n        setSuccessMessage('If an account with this email exists, you will receive a password reset link shortly.');\n        setEmail('');\n      }\n    } catch (error) {\n      debugLog('MBA1234: Error during password reset:', error);\n      \n      let errorMessage = 'Error: Unable to process password reset request.';\n      if (error.response && error.response.data) {\n        if (typeof error.response.data === 'string') {\n          errorMessage = error.response.data;\n        } else if (error.response.data.error) {\n          errorMessage = error.response.data.error;\n        } else if (error.response.data.detail) {\n          errorMessage = error.response.data.detail;\n        }\n      }\n      \n      setSuccessMessage(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const styles = createStyles(contextScreenWidth, isCollapsed, isSignedIn);\n\n  return (\n    <View style={styles.container}>\n      <SafeAreaView style={styles.safeArea}>\n        <View style={styles.content}>\n          {isSignedIn && (\n            <TouchableOpacity onPress={() => navigation.navigate('ChangePassword')} style={styles.backButton}>\n              <MaterialCommunityIcons name=\"arrow-left\" size={24} color={theme.colors.text} />\n              <Text style={styles.backText}>Reset Password</Text>\n            </TouchableOpacity>\n          )}\n          \n          <View style={styles.card}>\n            <Text style={styles.title}>Reset Password</Text>\n            \n            <TextInput\n              style={[styles.input, emailError && styles.inputError]}\n              placeholder=\"Email\"\n              value={email}\n              onChangeText={handleEmailChange}\n              keyboardType=\"email-address\"\n              autoCapitalize=\"none\"\n              placeholderTextColor={theme.colors.placeHolderText}\n            />\n            {emailError ? <Text style={styles.errorText}>{emailError}</Text> : null}\n            \n            <CustomButton \n              title=\"Reset Password\" \n              onPress={handleResetPassword}\n              disabled={loading}\n              style={styles.button}\n            />\n            \n            {loading && <ActivityIndicator size=\"large\" color={theme.colors.primary} style={styles.loader} />}\n            {successMessage ? <Text style={[styles.message, successMessage.includes('Error') && styles.errorMessage]}>{successMessage}</Text> : null}\n          </View>\n        </View>\n      </SafeAreaView>\n    </View>\n  );\n}\n\nconst createStyles = (screenWidth, isCollapsed, isSignedIn) => StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n    marginLeft: (screenWidth > 900 && isSignedIn) ? (isCollapsed ? 70 : 250) : 0,\n    transition: 'margin-left 0.3s ease',\n  },\n  safeArea: {\n    flex: 1,\n    paddingTop: Platform.OS === 'android' ? 20 : 0,\n  },\n  content: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  backButton: {\n    position: 'absolute',\n    top: 20,\n    left: 20,\n    flexDirection: 'row',\n    alignItems: 'center',\n    zIndex: 1,\n  },\n  backText: {\n    marginLeft: 8,\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.text,\n  },\n  card: {\n    backgroundColor: theme.colors.surfaceContrast,\n    borderRadius: 12,\n    padding: 40,\n    width: '100%',\n    maxWidth: 400,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n  },\n  title: {\n    fontSize: 28,\n    fontWeight: '600',\n    color: theme.colors.text,\n    textAlign: 'center',\n    marginBottom: 30,\n  },\n  input: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    padding: 15,\n    fontSize: 16,\n    color: theme.colors.text,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    marginBottom: 20,\n  },\n  inputError: {\n    borderColor: theme.colors.error,\n  },\n  button: {\n    marginBottom: 20,\n  },\n  loader: {\n    marginTop: 10,\n  },\n  message: {\n    textAlign: 'center',\n    color: theme.colors.primary,\n    fontSize: 14,\n    marginTop: 10,\n  },\n  errorMessage: {\n    color: theme.colors.error,\n  },\n  errorText: {\n    color: theme.colors.error,\n    marginBottom: 10,\n  },\n});\n","import React, { useState } from 'react';\nimport { View, TextInput, Text, StyleSheet, ActivityIndicator, Dimensions, Alert, Platform } from 'react-native';\nimport { useNavigation } from '@react-navigation/native';\nimport { theme } from '../styles/theme';\nimport CustomButton from '../components/CustomButton';\nimport axios from 'axios';\nimport { API_BASE_URL } from '../config/config';\nimport { navigateToFrom } from '../components/Navigation';\n\nconst { width: screenWidth } = Dimensions.get('window');\n\nexport default function ResetPasswordConfirm({ route }) {\n  const { uid, token } = route.params;\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [successMessage, setSuccessMessage] = useState('');\n  const navigation = useNavigation();\n\n  const handlePasswordReset = async () => {\n    if (newPassword !== confirmPassword) {\n      if (Platform.OS === 'ios' || Platform.OS === 'android') {\n        Alert.alert('Error', 'Passwords do not match.');\n      } else {\n        setSuccessMessage('Passwords do not match.');\n      }\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/users/v1/reset-password-confirm/${uid}/${token}/`, {\n        new_password: newPassword,\n      });\n      if (Platform.OS === 'ios' || Platform.OS === 'android') {\n        Alert.alert('Success', 'Your password has been reset.', [\n          { text: 'OK', onPress: () => navigateToFrom(navigation, 'SignIn', 'ResetPasswordConfirm') }\n        ]);\n      } else {\n        setSuccessMessage('Your password has been reset.');\n        setTimeout(() => {\n          navigateToFrom(navigation, 'SignIn', 'ResetPasswordConfirm');\n        }, 2000); // Navigate after 2 seconds\n      }\n    } catch (error) {\n      const errorMessage = 'Failed to reset password. Please try again later.';\n      if (Platform.OS === 'ios' || Platform.OS === 'android') {\n        Alert.alert('Error', errorMessage);\n      } else {\n        setSuccessMessage(errorMessage);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Reset Password</Text>\n      <TextInput\n        style={styles.input}\n        placeholder=\"New Password\"\n        value={newPassword}\n        onChangeText={setNewPassword}\n        secureTextEntry\n      />\n      <TextInput\n        style={styles.input}\n        placeholder=\"Confirm Password\"\n        value={confirmPassword}\n        onChangeText={setConfirmPassword}\n        secureTextEntry\n      />\n      <CustomButton title=\"Reset Password\" onPress={handlePasswordReset} />\n      {loading && <ActivityIndicator size=\"large\" color={theme.colors.primary} />}\n      {successMessage ? <Text style={styles.message}>{successMessage}</Text> : null}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    padding: theme.spacing.medium,\n    backgroundColor: theme.colors.background,\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  title: {\n    fontSize: theme.fontSizes.large,\n    color: theme.colors.primary,\n    marginBottom: theme.spacing.medium,\n  },\n  input: {\n    width: screenWidth > 600 ? 600 : '100%',\n    maxWidth: 600,\n    height: 40,\n    borderColor: 'gray',\n    borderWidth: 1,\n    marginBottom: theme.spacing.small,\n    paddingHorizontal: theme.spacing.small,\n  },\n  message: {\n    marginTop: theme.spacing.small,\n    color: theme.colors.primary,\n    fontSize: theme.fontSizes.medium,\n  },\n});","// components/BookingCard.js\nimport React, { useContext, useState } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Image, Platform } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { AuthContext, debugLog } from '../context/AuthContext';\nimport { convertDateTimeFromUTC, formatDate } from '../utils/time_utils';\nimport { supportsHover } from '../utils/deviceUtils';\n\nconst getStatusInfo = (status) => {\n  // Add debugging for status values\n  debugLog(\"MBA5677: Processing status\", { status });\n  \n  switch (status) {\n    case 'Pending Initial Professional Changes':\n    case 'Pending Professional Changes':\n      return {\n        text: 'Pending Pro',\n        bgColor: theme.colors.mybookings.main,\n        textColor: theme.colors.mybookings.secondary,\n        icon: 'clock-outline'\n      };\n    case 'Pending Owner Approval':\n      return {\n        text: 'Pending Owner',\n        bgColor: theme.colors.mybookings.main,\n        textColor: theme.colors.mybookings.secondary,\n        icon: 'clock-outline'\n      };\n    case 'Confirmed':\n      return {\n        text: 'Confirmed',\n        bgColor: theme.colors.mybookings.confirmedBg,\n        textColor: theme.colors.mybookings.confirmedText,\n        icon: 'check-circle-outline'\n      };\n    case 'Completed':\n      return {\n        text: 'Completed',\n        bgColor: theme.colors.mybookings.completedBg,\n        textColor: theme.colors.mybookings.completedText,\n        icon: 'flag-checkered'\n      };\n    case 'Confirmed Pending Professional Changes':\n      return {\n        text: 'Confirmed • Pending Pro',\n        bgColor: theme.colors.mybookings.confirmedBg,\n        textColor: theme.colors.mybookings.confirmedText,\n        icon: 'check-circle-outline'\n      };\n    case 'Confirmed Pending Owner Approval':\n      return {\n        text: 'Confirmed • Pending Owner',\n        bgColor: theme.colors.mybookings.confirmedBg,\n        textColor: theme.colors.mybookings.confirmedText,\n        icon: 'check-circle-outline'\n      };\n    default:\n      return {\n        text: status || 'Unknown',\n        bgColor: theme.colors.mybookings.main,\n        textColor: theme.colors.mybookings.secondary,\n        icon: 'clock-outline'\n      };\n  }\n};\n\nconst BookingCard = ({ booking, type, onViewDetails }) => {\n  const { id, status, date, time, serviceName } = booking;\n  \n  // Handle both client_name and professional_name, with fallbacks for backward compatibility\n  let name = '';\n  if (type === 'professional') {\n    name = booking.client_name || booking.ownerName || 'Client';\n    debugLog(\"MBA5677: Using client name for professional view\", { client_name: booking.client_name, ownerName: booking.ownerName });\n  } else {\n    name = booking.professional_name || booking.professionalName || 'Professional';\n    debugLog(\"MBA5677: Using professional name for client view\", { professional_name: booking.professional_name, professionalName: booking.professionalName });\n  }\n  \n  const statusInfo = getStatusInfo(status);\n  const pets = booking.pets || [];\n  const { screenWidth, timeSettings } = useContext(AuthContext);\n  const isMobile = screenWidth < 600;\n  const [isHovered, setIsHovered] = useState(false);\n  \n  // Check if device supports hover\n  const deviceSupportsHover = supportsHover();\n\n  // Add debugging for incoming date\n  debugLog(\"MBA5677: Original booking date/time\", { date, time });\n\n  // Convert time from UTC to user's timezone if needed\n  const convertedDateTime = timeSettings?.timezone !== 'UTC' && date && time\n    ? convertDateTimeFromUTC(date, time, timeSettings?.timezone || 'America/Denver', timeSettings?.use_military_time || false)\n    : date && time ? { date, time } : null;\n\n  // Format the date for display using the moment-based approach\n  const formattedDate = convertedDateTime?.date \n    ? (() => {\n        debugLog(\"MBA5677: Formatting with direct date\", convertedDateTime.date);\n        const parts = convertedDateTime.date.split('-');\n        if (parts.length === 3) {\n          const [year, month, day] = parts;\n          // Create date object directly\n          const dateObj = new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\n          if (!isNaN(dateObj.getTime())) {\n            const monthName = dateObj.toLocaleString('default', { month: 'short' });\n            debugLog(\"MBA5677: Formatted date parts\", { year, month, day, monthName, day: dateObj.getDate() });\n            return `${monthName} ${dateObj.getDate()}`;\n          }\n        }\n        // Fallback to original date if parsing fails\n        return convertedDateTime.date;\n      })()\n    : 'No date selected';\n    \n  const convertedTime = convertedDateTime?.time;\n\n  debugLog(\"MBA5677: Converted date/time\", { \n    formattedDate,\n    convertedTime,\n    convertedDateTime,\n    timezone: timeSettings?.timezone,\n    originalDate: date,\n    originalTime: time\n  });\n\n  const getMetaText = () => {\n    const timeText = convertedTime || 'No time selected';\n    const serviceText = serviceName || 'No service selected';\n\n    if (isMobile) {\n      return (\n        <View style={styles.mobileMetaInfo}>\n          <View style={styles.mobileMetaRow}>\n            <View style={styles.metaItemContainer}>\n              <MaterialCommunityIcons name=\"calendar\" size={14} color={theme.colors.mybookings.metaText} />\n              <Text style={styles.metaText}>{formattedDate}</Text>\n            </View>\n            <View style={styles.metaItemContainer}>\n              <MaterialCommunityIcons name=\"clock-outline\" size={14} color={theme.colors.mybookings.metaText} />\n              <Text style={styles.metaText}>{timeText}</Text>\n            </View>\n            <View style={styles.metaItemContainer}>\n              <MaterialCommunityIcons name=\"briefcase-outline\" size={14} color={theme.colors.mybookings.metaText} />\n              <Text style={styles.metaText}>{serviceText}</Text>\n            </View>\n          </View>\n        </View>\n      );\n    }\n\n    return (\n      <View style={styles.metaInfo}>\n        <View style={styles.metaItemContainer}>\n          <MaterialCommunityIcons name=\"calendar\" size={16} color={theme.colors.mybookings.metaText} />\n          <Text style={styles.metaText}>{formattedDate}</Text>\n        </View>\n        <Text style={styles.metaText}> • </Text>\n        <View style={styles.metaItemContainer}>\n          <MaterialCommunityIcons name=\"clock-outline\" size={16} color={theme.colors.mybookings.metaText} />\n          <Text style={styles.metaText}>{timeText}</Text>\n        </View>\n        <Text style={styles.metaText}> • </Text>\n        <View style={styles.metaItemContainer}>\n          <MaterialCommunityIcons name=\"briefcase-outline\" size={16} color={theme.colors.mybookings.metaText} />\n          <Text style={styles.metaText}>{serviceText}</Text>\n        </View>\n      </View>\n    );\n  };\n\n  // Add debugging for complete booking object and type\n  debugLog(\"MBA5677: Rendering BookingCard\", { \n    booking,\n    type,\n    name,\n    status\n  });\n\n  return (\n    <TouchableOpacity \n      style={[\n        styles.card,\n        Platform.OS === 'web' && isHovered && styles.cardHovered\n      ]}\n      onPress={onViewDetails}\n      onMouseEnter={() => deviceSupportsHover && setIsHovered(true)}\n      onMouseLeave={() => deviceSupportsHover && setIsHovered(false)}\n    >\n      <View style={[styles.cardContent, isMobile && styles.mobileCardContent]}>\n        <View style={[styles.topContent, isMobile && styles.mobileTopContent]}>\n          <Image \n            source={require('../../assets/default-profile.png')} \n            style={[\n              styles.profileImage,\n              isMobile && styles.mobileProfileImage\n            ]}\n          />\n          <View style={[styles.contentContainer, isMobile && styles.mobileContentContainer]}>\n            <View style={[styles.headerContainer, isMobile && styles.mobileHeaderContainer]}>\n              <View style={styles.nameAndPets}>\n                <View style={[styles.clientContainer, isMobile && styles.mobileClientContainer]}>\n                  <MaterialCommunityIcons \n                    name=\"account\" \n                    size={isMobile ? 16 : 18} \n                    color={theme.colors.mybookings.ownername} \n                  />\n                  <Text style={[styles.name, isMobile && styles.mobileName]}>{name}</Text>\n                </View>\n                <View style={[styles.petContainer, isMobile && styles.mobilePetContainer]}>\n                  <MaterialCommunityIcons name=\"paw\" size={isMobile ? 14 : 14} color={theme.colors.mybookings.metaText} />\n                  <Text style={[styles.petInfo, isMobile && styles.mobilePetInfo]}>\n                    {pets.length > 0 ? pets.map(pet => pet.name).join(', ') : 'No pets selected'}\n                  </Text>\n                </View>\n              </View>\n              <View style={[\n                styles.statusBadge, \n                { backgroundColor: statusInfo.bgColor },\n                isMobile && styles.mobileStatusBadge\n              ]}>\n                <View style={styles.statusContent}>\n                  <MaterialCommunityIcons \n                    name={statusInfo.icon} \n                    size={isMobile ? 12 : 16} \n                    color={statusInfo.textColor}\n                  />\n                  <Text style={[\n                    styles.statusText, \n                    { color: statusInfo.textColor },\n                    isMobile && styles.mobileStatusText\n                  ]}>\n                    {statusInfo.text}\n                  </Text>\n                </View>\n              </View>\n            </View>\n            {!isMobile && getMetaText()}\n          </View>\n          {!isMobile && (\n            <TouchableOpacity\n              style={styles.viewDetailsButton}\n              onPress={onViewDetails}\n            >\n              <Text style={styles.viewDetailsText}>View Details</Text>\n            </TouchableOpacity>\n          )}\n        </View>\n        {isMobile && (\n          <>\n            <View style={styles.mobileDivider} />\n            {getMetaText()}\n          </>\n        )}\n      </View>\n    </TouchableOpacity>\n  );\n};\n\nconst styles = StyleSheet.create({\n  card: {\n    backgroundColor: theme.colors.surfaceContrast,\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 16,\n    ...(Platform.OS === 'web' && {\n      transition: 'all 0.2s ease-in-out',\n      cursor: 'pointer',\n    })\n  },\n  cardHovered: {\n    transform: [{ scale: 1.02 }],\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 5,\n  },\n  cardContent: {\n    flexDirection: 'column',\n  },\n  mobileCardContent: {\n    gap: 12,\n  },\n  topContent: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    gap: 16,\n  },\n  mobileTopContent: {\n    marginBottom: 0,\n  },\n  profileImage: {\n    width: 88,\n    height: 88,\n    borderRadius: 44,\n  },\n  mobileProfileImage: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n  },\n  contentContainer: {\n    flex: 1,\n  },\n  mobileContentContainer: {\n    flex: 1,\n  },\n  headerContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: 8,\n  },\n  mobileHeaderContainer: {\n    marginBottom: 0,\n  },\n  nameAndPets: {\n    flex: 1,\n  },\n  statusBadge: {\n    alignSelf: 'flex-start',\n    paddingHorizontal: 12,\n    paddingVertical: 4,\n    borderRadius: 16,\n  },\n  statusContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n  },\n  statusText: {\n    fontSize: 12,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  clientContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n    marginBottom: 6,\n  },\n  name: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: theme.colors.mybookings.ownerName,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  petContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  petInfo: {\n    fontSize: 14,\n    color: '#888975',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  mobileDivider: {\n    height: 1,\n    backgroundColor: theme.colors.surface,\n    width: '100%',\n    // marginVertical: 12,\n  },\n  metaInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flexWrap: 'wrap',\n    gap: 8,\n  },\n  mobileMetaInfo: {\n    width: '100%',\n  },\n  mobileMetaRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  metaItemContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  metaText: {\n    fontSize: 14,\n    color: theme.colors.mybookings.metaText,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  viewDetailsButton: {\n    backgroundColor: theme.colors.primary,\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    borderRadius: 8,\n  },\n  viewDetailsText: {\n    color: theme.colors.surfaceContrast,\n    fontSize: 14,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  mobileClientContainer: {\n    marginBottom: 4,\n  },\n  mobileName: {\n    fontSize: 15,\n    color: theme.colors.mybookings.ownerName,\n  },\n  mobilePetContainer: {\n    marginBottom: 2,\n  },\n  mobilePetInfo: {\n    fontSize: 13,\n    color: theme.colors.mybookings.metaText,\n  },\n  mobileStatusBadge: {\n    paddingHorizontal: 8,\n    paddingVertical: 2,\n    borderRadius: 12,\n  },\n  mobileStatusText: {\n    fontSize: 10,\n  },\n});\n\nexport default BookingCard;","import React from 'react';\nimport { View, Text, StyleSheet } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../../styles/theme';\n\nconst ProfessionalAlert = ({ isProfessional, fromApprovalModal = false }) => {\n  if (!isProfessional || fromApprovalModal) return null;\n\n  return (\n    <View style={[styles.alertContainer, { marginBottom: fromApprovalModal ? 0 : 16 }]}>\n      <View style={styles.alertHeader}>\n        <MaterialCommunityIcons name=\"alert-circle\" size={20} color={theme.colors.error} />\n        <Text style={styles.alertBold}>Professional Reminders</Text>\n      </View>\n      <Text style={styles.alertText}>\n        • <Text style={styles.alertText}>Collect payment from your client before the booking begins</Text>\n      </Text>\n      <Text style={styles.alertText}>\n        • Consider scheduling a meet-and-greet before confirming this booking to ensure compatibility and discuss specific care requirements\n      </Text>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  alertContainer: {\n    backgroundColor: '#fef2f2',\n    borderRadius: 8,\n    padding: 16,\n    // marginBottom: 16,\n    borderLeftWidth: 4,\n    borderLeftColor: theme.colors.error,\n  },\n  alertHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  alertBold: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginLeft: 8,\n    fontWeight: 'bold',\n  },\n  alertText: {\n    fontSize: 14,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default ProfessionalAlert; ","import React, { useContext } from 'react';\nimport {\n  Modal,\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  ScrollView,\n  SafeAreaView,\n  Platform\n} from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../../styles/theme';\nimport { AuthContext } from '../../context/AuthContext';\n\nconst TermsOfServiceModal = ({ visible, onClose, termsData }) => {\n  const { screenWidth } = useContext(AuthContext);\n  const isDesktop = screenWidth > 768;\n\n  // Default terms data if none provided\n  const defaultTermsData = [\n    {\n      header: \"Terms of Service\",\n      body: \"By using CrittrCove's services, you agree to the following terms and conditions. Please read these terms carefully before proceeding with your booking.\"\n    },\n    {\n      header: \"Service Agreement\",\n      body: \"This agreement is between you (the client) and the professional pet care provider. CrittrCove acts as a platform to facilitate this connection but is not directly responsible for the services provided.\"\n    },\n    {\n      header: \"Payment Terms\",\n      body: \"Payment is due as agreed upon between the client and professional. CrittrCove may process payments on behalf of professionals. All fees and charges are clearly displayed before booking confirmation.\"\n    },\n    {\n      header: \"Cancellation Policy\",\n      body: \"Cancellation policies vary by professional and service type. Please review the specific cancellation terms with your chosen professional before confirming your booking.\"\n    },\n    {\n      header: \"Liability and Insurance\",\n      body: \"Professionals are responsible for maintaining appropriate insurance coverage. Clients are responsible for ensuring their pets are properly vaccinated and disclosed any behavioral or health concerns.\"\n    },\n    {\n      header: \"Platform Fees\",\n      body: \"CrittrCove charges platform fees to both clients and professionals to maintain and improve our services. These fees are clearly disclosed during the booking process.\"\n    },\n    {\n      header: \"User Conduct\",\n      body: \"All users must conduct themselves professionally and respectfully. Any inappropriate behavior, harassment, or violation of these terms may result in account suspension or termination.\"\n    },\n    {\n      header: \"Privacy and Data Protection\",\n      body: \"Your privacy is important to us. We collect and use personal information in accordance with our Privacy Policy. By using our services, you consent to our data collection and use practices.\"\n    },\n    {\n      header: \"Dispute Resolution\",\n      body: \"Any disputes should first be addressed directly between the client and professional. If resolution cannot be reached, CrittrCove may assist in mediation. Legal disputes will be resolved according to applicable law.\"\n    },\n    {\n      header: \"Modifications to Terms\",\n      body: \"CrittrCove reserves the right to modify these terms at any time. Users will be notified of significant changes and continued use of the platform constitutes acceptance of updated terms.\"\n    }\n  ];\n\n  const terms = termsData || defaultTermsData;\n\n  const renderTermsContent = () => {\n    return terms.map((section, index) => (\n      <View key={index} style={styles.section}>\n        <Text style={styles.sectionHeader}>{section.header}</Text>\n        <Text style={styles.sectionBody}>{section.body}</Text>\n      </View>\n    ));\n  };\n\n  return (\n    <Modal\n      visible={visible}\n      transparent={true}\n      animationType=\"slide\"\n      onRequestClose={onClose}\n    >\n      <SafeAreaView style={styles.safeArea}>\n        <View style={[\n          styles.container, \n          isDesktop ? styles.desktopContainer : {}\n        ]}>\n          {/* Header */}\n          <View style={styles.header}>\n            <Text style={styles.title}>Terms of Service</Text>\n            <TouchableOpacity style={styles.closeButton} onPress={onClose}>\n              <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.text} />\n            </TouchableOpacity>\n          </View>\n          \n          {/* Content */}\n          <ScrollView style={styles.scrollContainer} contentContainerStyle={styles.scrollContent}>\n            {renderTermsContent()}\n          </ScrollView>\n          \n          {/* Footer */}\n          <View style={styles.footerContainer}>\n            <TouchableOpacity\n              style={[styles.button, styles.closeFooterButton]}\n              onPress={onClose}\n            >\n              <Text style={styles.buttonText}>Close</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </SafeAreaView>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n  },\n  container: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n    margin: Platform.OS === 'web' ? 0 : 24,\n    borderRadius: 12,\n    overflow: 'hidden',\n  },\n  desktopContainer: {\n    maxWidth: 800,\n    maxHeight: '90%',\n    alignSelf: 'center',\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n    backgroundColor: theme.colors.surface,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  closeButton: {\n    padding: 8,\n  },\n  scrollContainer: {\n    flex: 1,\n  },\n  scrollContent: {\n    padding: 16,\n    paddingBottom: 32,\n  },\n  section: {\n    marginBottom: 24,\n  },\n  sectionHeader: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n    marginBottom: 8,\n  },\n  sectionBody: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    lineHeight: 24,\n  },\n  footerContainer: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    padding: 16,\n    borderTopWidth: 1,\n    borderTopColor: theme.colors.border,\n    backgroundColor: theme.colors.surface,\n  },\n  button: {\n    paddingVertical: 12,\n    paddingHorizontal: 32,\n    borderRadius: 8,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  closeFooterButton: {\n    backgroundColor: theme.colors.primary,\n  },\n  buttonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default TermsOfServiceModal; ","// THIS FILE IS FOR THE BOOKING STEP MODAL\nimport React, { useEffect, useContext, useState, useRef } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  ScrollView,\n  TextInput,\n  useWindowDimensions,\n} from 'react-native';\nimport { theme } from '../../styles/theme';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { AuthContext, debugLog } from '../../context/AuthContext';\nimport { formatDateTimeRangeFromUTC, formatFromUTC, FORMAT_TYPES } from '../../utils/time_utils';\nimport { updateBookingDraftRates, updateDraftNotesFromPro } from '../../api/API';\nimport SupportButton from '../SupportButton';\nimport { capitalizeWords } from '../../utils/formatStrings';\nimport ProfessionalAlert from '../common/ProfessionalAlert';\nimport TermsOfServiceModal from '../modals/TermsOfServiceModal';\n\nconst ReviewAndRatesCard = ({ bookingData, onRatesUpdate, bookingId, showEditControls = true, isProfessional = true, onTermsAgreed, fromApprovalModal = false, onTosAgreementChange }) => {\n  const { timeSettings } = useContext(AuthContext);\n  const [isEditMode, setIsEditMode] = useState(false);\n  const [isAddingRate, setIsAddingRate] = useState(false);\n  const [editedRates, setEditedRates] = useState(null);\n  const [newRate, setNewRate] = useState({ name: '', amount: '', description: '' });\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [expandedRates, setExpandedRates] = useState(new Set());\n  const [editingOccurrenceId, setEditingOccurrenceId] = useState(null);\n  const [occurrenceEdits, setOccurrenceEdits] = useState({});\n  const [isAddingRateForOccurrence, setIsAddingRateForOccurrence] = useState(null);\n  const [newOccurrenceRate, setNewOccurrenceRate] = useState({ name: '', amount: '', description: '' });\n  const [termsAgreed, setTermsAgreed] = useState(false);\n  const [serviceAdditionalRatesEnabled, setServiceAdditionalRatesEnabled] = useState({});\n  const [availableAdditionalRates, setAvailableAdditionalRates] = useState([]);\n  const [hasInitializedRates, setHasInitializedRates] = useState(false);\n  const lastBookingIdRef = useRef(null);\n  const [notesFromPro, setNotesFromPro] = useState('');\n  const [isSavingNotes, setIsSavingNotes] = useState(false);\n  const [notesSaved, setNotesSaved] = useState(false);\n  const [lastSavedNotes, setLastSavedNotes] = useState('');\n  \n  // Initialize notes from booking data if it exists\n  useEffect(() => {\n    if (bookingData?.notes_from_pro) {\n      setNotesFromPro(bookingData.notes_from_pro);\n      setLastSavedNotes(bookingData.notes_from_pro);\n    }\n  }, [bookingData?.notes_from_pro]);\n\n  // Update saved state when notes change\n  useEffect(() => {\n    setNotesSaved(notesFromPro === lastSavedNotes);\n  }, [notesFromPro, lastSavedNotes]);\n  \n  // Determine TOS status based on user type and booking data\n  const getTosStatus = () => {\n    if (!bookingData) return undefined;\n    return isProfessional ? bookingData.pro_agreed_tos : bookingData.client_agreed_tos;\n  };\n  \n  const currentTosStatus = getTosStatus();\n  const [showTermsModal, setShowTermsModal] = useState(false);\n  const { width } = useWindowDimensions();\n\n  useEffect(() => {\n    debugLog('MBA54321 ReviewAndRatesCard received bookingData:', bookingData);\n    debugLog('MBA54321 ReviewAndRatesCard received bookingId:', bookingId);\n    \n    if (bookingData?.occurrences?.[0]) {\n      // Create a safe default rates object\n      const defaultRates = {\n        base_rate: 0,\n        additional_animal_rate: 0,\n        applies_after: 1,\n        holiday_rate: 0,\n        holiday_days: 0,\n        additional_rates: []\n      };\n      \n      // Get the occurrence\n      const occurrence = bookingData.occurrences[0];\n      \n      // Use the existing rates or default to our safe defaults\n      const safeRates = occurrence.rates || defaultRates;\n      \n      // Initialize edited rates\n      setEditedRates({ ...safeRates });\n    }\n\n    // Initialize service additional rates toggle state for non-overnight services\n    debugLog('MBA2394jv340 Effect triggered - checking if should initialize service rates');\n    debugLog('MBA2394jv340 Has service:', !!bookingData?.service);\n    debugLog('MBA2394jv340 Service is_overnight:', bookingData?.service?.is_overnight);\n    debugLog('MBA2394jv340 Occurrences length:', bookingData?.occurrences?.length);\n    debugLog('MBA2394jv340 Has already initialized rates:', hasInitializedRates);\n    debugLog('MBA2394jv340 Service details additional rates:', bookingData?.service_details?.additional_rates);\n    \n    // Check if bookingId changed to reset initialization\n    if (lastBookingIdRef.current !== bookingId && lastBookingIdRef.current !== null) {\n      debugLog('MBA2394jv340 BookingId changed from', lastBookingIdRef.current, 'to', bookingId, '- resetting');\n      setHasInitializedRates(false);\n      setAvailableAdditionalRates([]);\n      setServiceAdditionalRatesEnabled({});\n    }\n    lastBookingIdRef.current = bookingId;\n    \n    if (bookingData?.service && !bookingData.service.is_overnight && bookingData?.occurrences?.length >= 1 && !hasInitializedRates) {\n      debugLog('MBA2394jv340 Initializing service additional rates for non-overnight service');\n      \n      // Prioritize service_details.additional_rates as source of truth\n      let availableRates = [];\n      let enabledRates = {};\n      \n      if (bookingData.service_details?.additional_rates) {\n        debugLog('MBA2394jv340 Using service_details.additional_rates as source:', bookingData.service_details.additional_rates);\n        \n        // Parse service_details.additional_rates to extract rate info\n        Object.entries(bookingData.service_details.additional_rates).forEach(([rateKey, rateValue]) => {\n          // Extract rate title from key (format: \"rate_title_start-randomid\")\n          const titleMatch = rateKey.match(/^(.+)_start-[a-f0-9]+$/);\n          if (titleMatch) {\n            const rateTitle = titleMatch[1];\n            \n            // Handle both old boolean format and new enhanced object format\n            let isEnabled, rateAmount, rateDescription;\n            \n            if (typeof rateValue === 'boolean') {\n              // Old format: boolean value only\n              isEnabled = rateValue;\n              \n              // Find the rate details from service or occurrences for backward compatibility\n              rateAmount = '0.00';\n              rateDescription = '';\n              \n              // First check service rates\n              const serviceRate = bookingData.service?.additional_rates?.find(r => r.title === rateTitle);\n              if (serviceRate) {\n                rateAmount = serviceRate.amount || serviceRate.rate || '0.00';\n                rateDescription = serviceRate.description || '';\n              } else {\n                // Check occurrence rates for amount/description\n                for (const occ of bookingData.occurrences) {\n                  const occRate = occ.rates?.additional_rates?.find(r => (r.title || r.name) === rateTitle);\n                  if (occRate) {\n                    rateAmount = occRate.amount || '0.00';\n                    rateDescription = occRate.description || '';\n                    break;\n                  }\n                }\n              }\n            } else if (typeof rateValue === 'object' && rateValue !== null) {\n              // New enhanced format: {applies: bool, amount: str, description: str}\n              isEnabled = rateValue.applies || false;\n              rateAmount = rateValue.amount || '0.00';\n              rateDescription = rateValue.description || '';\n            } else {\n              // Fallback for unexpected format\n              debugLog('MBA2394jv340 Unexpected rate value format:', rateValue);\n              isEnabled = false;\n              rateAmount = '0.00';\n              rateDescription = '';\n            }\n            \n            availableRates.push({\n              title: rateTitle,\n              amount: rateAmount,\n              rate: rateAmount, // For consistency\n              description: rateDescription\n            });\n            \n            enabledRates[rateTitle] = isEnabled;\n          }\n        });\n        \n        debugLog('MBA2394jv340 Parsed available rates from service_details:', availableRates);\n        debugLog('MBA2394jv340 Parsed enabled rates from service_details:', enabledRates);\n      } else {\n        // Fallback to legacy logic if service_details.additional_rates doesn't exist\n        debugLog('MBA2394jv340 No service_details.additional_rates found, falling back to legacy logic');\n        \n        // Get service additional rates from the service object or collect from occurrences\n        const serviceAdditionalRates = bookingData.service.additional_rates || [];\n        debugLog('MBA2394jv340 Raw service additional rates from initialization:', serviceAdditionalRates);\n        \n        // If service doesn't have additional rates, collect unique rates from all occurrences\n        availableRates = serviceAdditionalRates;\n        if (serviceAdditionalRates.length === 0) {\n          debugLog('MBA2394jv340 No service rates found in initialization, collecting from occurrences');\n          const allOccurrenceRates = [];\n          \n          bookingData.occurrences.forEach((occ, index) => {\n            const occRates = occ.rates?.additional_rates || [];\n            debugLog(`MBA2394jv340 Initialization: Occurrence ${index} additional rates:`, occRates);\n            allOccurrenceRates.push(...occRates);\n          });\n          \n          // Get unique rates by title\n          const uniqueRatesMap = new Map();\n          allOccurrenceRates.forEach(rate => {\n            if (rate.title && !uniqueRatesMap.has(rate.title)) {\n              uniqueRatesMap.set(rate.title, {\n                title: rate.title,\n                amount: rate.amount,\n                rate: rate.amount, // For consistency with service rates\n                description: rate.description || ''\n              });\n            }\n          });\n          \n          availableRates = Array.from(uniqueRatesMap.values());\n          debugLog('MBA2394jv340 Initialization: Unique rates collected from occurrences:', availableRates);\n        }\n        \n        // Filter out base rates that are not actual additional rates\n        availableRates = availableRates.filter(rate => {\n          const title = (rate.title || '').toLowerCase();\n          return !title.includes('base rate') && \n                 !title.includes('additional animal') && \n                 !title.includes('holiday rate');\n        });\n        \n        debugLog('MBA2394jv340 Filtered service additional rates from initialization:', availableRates);\n        \n        // Check which rates are currently applied to ALL occurrences\n        availableRates.forEach(serviceRate => {\n          // Count how many occurrences have this rate\n          let occurrencesWithRate = 0;\n          bookingData.occurrences.forEach(occ => {\n            const hasRate = occ.rates?.additional_rates?.some(occRate => \n              (occRate.title || occRate.name) === serviceRate.title\n            );\n            if (hasRate) occurrencesWithRate++;\n          });\n          \n          // Rate is enabled only if it appears in ALL occurrences\n          const isEnabled = occurrencesWithRate === bookingData.occurrences.length;\n          enabledRates[serviceRate.title] = isEnabled;\n          debugLog('MBA2394jv340 Rate status:', { \n            title: serviceRate.title, \n            isEnabled, \n            occurrencesWithRate, \n            totalOccurrences: bookingData.occurrences.length \n          });\n        });\n      }\n      \n      debugLog('MBA2394jv340 Final available rates:', availableRates);\n      debugLog('MBA2394jv340 Final enabled rates state:', enabledRates);\n      \n      // Store the available rates in state so they persist\n      setAvailableAdditionalRates(availableRates);\n      setServiceAdditionalRatesEnabled(enabledRates);\n      setHasInitializedRates(true);\n    } else {\n      debugLog('MBA2394jv340 NOT initializing service rates - conditions not met or already initialized');\n      if (!hasInitializedRates) {\n        setAvailableAdditionalRates([]);\n      }\n    }\n  }, [bookingData, bookingId, hasInitializedRates]);\n\n\n\n  // Log whenever either editMode or editingOccurrenceId changes\n  useEffect(() => {\n    debugLog('MBA66777 Edit state changed:', { \n      isEditMode, \n      editingOccurrenceId, \n      occurrencesCount: bookingData?.occurrences?.length || 0\n    });\n    debugLog('MBA2oinv5nd Current editedRates state:', editedRates);\n    debugLog('MBA2oinv5nd Current occurrenceEdits state:', occurrenceEdits);\n  }, [isEditMode, editingOccurrenceId, bookingData?.occurrences?.length, editedRates, occurrenceEdits]);\n\n\n\n  const formatCurrency = (amount) => {\n    if (!amount) return '$0.00';\n    return `$${parseFloat(amount).toFixed(2)}`;\n  };\n\n  const saveNotesToDraft = async () => {\n    if (!bookingData?.conversation_id) {\n      debugLog('MBA88888 No conversation ID available for saving notes');\n      return;\n    }\n\n    if (notesFromPro === lastSavedNotes) {\n      debugLog('MBA88888 Notes are the same as last saved notes');\n      return;\n    }\n\n    try {\n      setIsSavingNotes(true);\n      debugLog('MBA88888 Saving notes to draft:', { \n        conversationId: bookingData.conversation_id, \n        notes: notesFromPro \n      });\n\n      await updateDraftNotesFromPro(bookingData.conversation_id, notesFromPro);\n      \n      setLastSavedNotes(notesFromPro);\n      debugLog('MBA88888 Notes saved successfully');\n    } catch (error) {\n      debugLog('MBA88888 Error saving notes:', error);\n      // Could add error state/toast here if needed\n    } finally {\n      setIsSavingNotes(false);\n    }\n  };\n\n  const toggleEditMode = () => {\n    debugLog('MBA2oinv5nd toggleEditMode called, current isEditMode:', isEditMode);\n    if (isEditMode) {\n      // Save changes\n      debugLog('MBA2oinv5nd Saving changes via toggleEditMode');\n      saveRateChanges();\n    } else {\n      // Enter edit mode - initialize editedRates with current occurrence data\n      const occurrence = bookingData.occurrences[0]; // For single occurrence bookings\n      debugLog('MBA2oinv5nd Entering edit mode, initializing editedRates with occurrence data:', occurrence?.rates);\n      if (occurrence) {\n        const initialEditedRates = {\n          base_rate: occurrence.rates.base_rate,\n          additional_animal_rate: occurrence.rates.additional_animal_rate || 0,\n          applies_after: occurrence.rates.applies_after || 1,\n          holiday_rate: occurrence.rates.holiday_rate || 0,\n          additional_rates: occurrence.rates.additional_rates?.map(r => ({\n            name: r.name || r.title,\n            amount: r.amount,\n            description: r.description || ''\n          })) || []\n        };\n        debugLog('MBA2oinv5nd Setting editedRates to:', initialEditedRates);\n        setEditedRates(initialEditedRates);\n      }\n      setIsEditMode(true);\n      setIsAddingRate(false);\n    }\n  };\n\n  const toggleAddRate = () => {\n    setIsAddingRate(!isAddingRate);\n    // Don't exit edit mode when adding a rate for overnight bookings\n    setNewRate({ name: '', amount: '', description: '' });\n  };\n\n  // Helper function to sanitize amount input for consistent handling\n  const sanitizeAmountInput = (value) => {\n    // Remove non-numeric characters except decimal point\n    let sanitized = value\n      .replace(/[^\\d.]/g, '') // Remove anything that's not a digit or decimal point\n      .replace(/(\\..*)\\./g, '$1'); // Remove multiple decimal points, keep only the first one\n    \n    // Limit to 2 decimal places\n    const parts = sanitized.split('.');\n    if (parts.length > 1 && parts[1].length > 2) {\n      sanitized = `${parts[0]}.${parts[1].substring(0, 2)}`;\n    }\n    \n    return sanitized;\n  };\n  \n  // Update the setNewRate for amount field to apply consistent validation\n  const handleNewRateAmountChange = (text) => {\n    setNewRate(prev => ({\n      ...prev,\n      amount: sanitizeAmountInput(text)\n    }));\n  };\n  \n  // Update the setNewOccurrenceRate for amount field to apply consistent validation\n  const handleNewOccurrenceRateAmountChange = (text) => {\n    setNewOccurrenceRate(prev => ({\n      ...prev,\n      amount: sanitizeAmountInput(text)\n    }));\n  };\n\n  const saveRateChanges = async () => {\n    // Use occurrenceEdits if it has values (single occurrence edit mode), otherwise use editedRates\n    const hasOccurrenceEdits = occurrenceEdits && Object.keys(occurrenceEdits).length > 0;\n    const ratesToSave = hasOccurrenceEdits ? occurrenceEdits : editedRates;\n    debugLog('MBA2oinv5nd saveRateChanges called. Using ratesToSave:', ratesToSave, 'Source:', hasOccurrenceEdits ? 'occurrenceEdits' : 'editedRates');\n    \n    if (!ratesToSave) {\n      debugLog('MBA2oinv5nd No ratesToSave found, returning early');\n      return;\n    }\n\n    try {\n      setIsLoading(true);\n      setError(null);\n      \n      debugLog('MBA66777 Saving rate changes:', ratesToSave);\n      debugLog('MBA66777 Using bookingId:', bookingId);\n      debugLog('MBA2oinv5nd Detailed ratesToSave breakdown:', {\n        base_rate: ratesToSave.base_rate,\n        additional_animal_rate: ratesToSave.additional_animal_rate,\n        applies_after: ratesToSave.applies_after,\n        holiday_rate: ratesToSave.holiday_rate,\n        additional_rates: ratesToSave.additional_rates\n      });\n      \n      // Create a clean version of ratesToSave to send to API\n      const cleanRates = {\n        ...ratesToSave,\n        additional_rates: ratesToSave.additional_rates && ratesToSave.additional_rates.length > 0 \n          ? ratesToSave.additional_rates.map(rate => ({\n              title: rate.name || rate.title, // Always use 'title' for backend\n              // Convert empty or string amount values to number\n              amount: rate.amount === '' ? 0 : typeof rate.amount === 'string' ? parseFloat(rate.amount) : rate.amount,\n              description: rate.description || `Additional rate`\n            }))\n          : []\n      };\n      \n      // Create occurrences array for API with all occurrences\n      const occurrencesForApi = bookingData.occurrences.map((occ, index) => {\n        // For the first occurrence (the one being edited in this case), update its rates\n        if (index === 0) {\n          return {\n            occurrence_id: occ.occurrence_id,\n            rates: {\n              base_rate: cleanRates.base_rate === '' ? 0 : typeof cleanRates.base_rate === 'string' ? parseFloat(cleanRates.base_rate) : cleanRates.base_rate,\n              additional_animal_rate: cleanRates.additional_animal_rate === '' ? 0 : typeof cleanRates.additional_animal_rate === 'string' ? parseFloat(cleanRates.additional_animal_rate) : cleanRates.additional_animal_rate || 0,\n              applies_after: parseInt(cleanRates.applies_after || 1),\n              holiday_rate: cleanRates.holiday_rate === '' ? 0 : typeof cleanRates.holiday_rate === 'string' ? parseFloat(cleanRates.holiday_rate) : cleanRates.holiday_rate || 0,\n              additional_rates: cleanRates.additional_rates\n            }\n          };\n        }\n        // For other occurrences, keep them as they are\n        return {\n          occurrence_id: occ.occurrence_id,\n          rates: {\n            base_rate: parseFloat(occ.rates.base_rate),\n            additional_animal_rate: parseFloat(occ.rates.additional_animal_rate || 0),\n            applies_after: parseInt(occ.rates.applies_after || 1),\n            holiday_rate: parseFloat(occ.rates.holiday_rate || 0),\n            additional_rates: (occ.rates.additional_rates || []).map(rate => ({\n              title: rate.name || rate.title,\n              amount: parseFloat(rate.amount),\n              description: rate.description || ''\n            }))\n          }\n        };\n      });\n      \n      debugLog('MBA66777 Sending all occurrences to API:', occurrencesForApi);\n      debugLog('MBA2oinv5nd First occurrence rates being sent to API:', occurrencesForApi[0]?.rates);\n      \n      // Call the API to update rates using the bookingId prop\n      const response = await updateBookingDraftRates(\n        bookingId, \n        occurrencesForApi\n      );\n      \n      debugLog('MBA66777 Rate update API response:', response);\n      \n      // Update the local state with the response\n      if (response.draft_data) {\n        // Call onRatesUpdate with the updated data from the API\n        if (onRatesUpdate) {\n          onRatesUpdate(response.draft_data);\n        }\n      }\n      \n      // Reset all edit state\n      setIsEditMode(false);\n      setEditingOccurrenceId(null);\n      setOccurrenceEdits({});\n      setExpandedRates(new Set());\n      setIsAddingRate(false);\n      setIsAddingRateForOccurrence(null);\n    } catch (err) {\n      debugLog('MBA66777 Error saving rate changes:', err);\n      setError('Failed to update rates. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const saveNewRate = async () => {\n    if (!newRate.name || (!newRate.amount && newRate.amount !== '')) return;\n    \n    try {\n      setIsLoading(true);\n      setError(null);\n      \n      // Create the new rate object\n      const newAdditionalRate = {\n        title: newRate.name,\n        amount: newRate.amount === '' ? 0 : typeof newRate.amount === 'string' ? parseFloat(newRate.amount) : newRate.amount,\n        description: newRate.description || `Additional rate`\n      };\n      \n      // Create an updated rates object\n      const updatedRates = { ...editedRates };\n      \n      if (!updatedRates.additional_rates) {\n        updatedRates.additional_rates = [];\n      }\n      \n      updatedRates.additional_rates.push({\n        name: newRate.name,\n        title: newRate.name, // Add title for consistency\n        amount: newRate.amount === '' ? 0 : typeof newRate.amount === 'string' ? parseFloat(newRate.amount) : newRate.amount,\n        description: newRate.description || `Additional rate`\n      });\n      \n      // Create occurrences array for API with all occurrences\n      const occurrencesForApi = bookingData.occurrences.map((occ, index) => {\n        // For the first occurrence (the one being edited in this case), update its rates with the new rate\n        if (index === 0) {\n          return {\n            occurrence_id: occ.occurrence_id,\n            rates: {\n              base_rate: parseFloat(updatedRates.base_rate),\n              additional_animal_rate: parseFloat(updatedRates.additional_animal_rate || 0),\n              applies_after: parseInt(updatedRates.applies_after || 1),\n              holiday_rate: parseFloat(updatedRates.holiday_rate || 0),\n              additional_rates: updatedRates.additional_rates.map(rate => ({\n                title: rate.name || rate.title,\n                amount: parseFloat(rate.amount),\n                description: rate.description || `Additional rate`\n              }))\n            }\n          };\n        }\n        // For other occurrences, keep them as they are\n        return {\n          occurrence_id: occ.occurrence_id,\n          rates: {\n            base_rate: parseFloat(occ.rates.base_rate),\n            additional_animal_rate: parseFloat(occ.rates.additional_animal_rate || 0),\n            applies_after: parseInt(occ.rates.applies_after || 1),\n            holiday_rate: parseFloat(occ.rates.holiday_rate || 0),\n            additional_rates: (occ.rates.additional_rates || []).map(rate => ({\n              title: rate.name || rate.title,\n              amount: parseFloat(rate.amount),\n              description: rate.description || ''\n            }))\n          }\n        };\n      });\n      \n      debugLog('MBA66777 Sending all occurrences with new rate to API:', occurrencesForApi);\n      \n      // Call the API to update rates using the bookingId prop\n      const response = await updateBookingDraftRates(\n        bookingId, \n        occurrencesForApi\n      );\n      \n      debugLog('MBA66777 New rate added API response:', response);\n      \n      // Update the local state with the response\n      if (response.draft_data) {\n        // Set the edited rates from the response\n        if (response.draft_data.occurrences && response.draft_data.occurrences[0]) {\n          setEditedRates(response.draft_data.occurrences[0].rates);\n        }\n        \n        // Call onRatesUpdate with the updated data from the API\n        if (onRatesUpdate) {\n          onRatesUpdate(response.draft_data);\n        }\n      }\n      \n      setIsAddingRate(false);\n      setNewRate({ name: '', amount: '', description: '' });\n    } catch (err) {\n      debugLog('MBA66777 Error adding new rate:', err);\n      setError('Failed to add new rate. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const updateBaseRate = (value) => {\n    // Apply consistent amount sanitization\n    const sanitizedValue = sanitizeAmountInput(value);\n    debugLog('MBA2oinv5nd updateBaseRate called with value:', value, 'sanitized to:', sanitizedValue);\n    debugLog('MBA2oinv5nd Current editedRates before update:', editedRates);\n    \n    setEditedRates(prev => {\n      const newRates = {\n        ...prev,\n        base_rate: sanitizedValue\n      };\n      debugLog('MBA2oinv5nd New editedRates after base rate update:', newRates);\n      return newRates;\n    });\n  };\n\n  const updateAdditionalAnimalRate = (value) => {\n    // Apply consistent amount sanitization\n    const sanitizedValue = sanitizeAmountInput(value);\n    debugLog('MBA2oinv5nd updateAdditionalAnimalRate called with value:', value, 'sanitized to:', sanitizedValue);\n    debugLog('MBA2oinv5nd Current editedRates before update:', editedRates);\n    \n    setEditedRates(prev => {\n      const newRates = {\n        ...prev,\n        additional_animal_rate: sanitizedValue\n      };\n      debugLog('MBA2oinv5nd New editedRates after additional animal rate update:', newRates);\n      return newRates;\n    });\n  };\n\n  const updateHolidayRate = (value) => {\n    // Apply consistent amount sanitization\n    const sanitizedValue = sanitizeAmountInput(value);\n    \n    setEditedRates(prev => ({\n      ...prev,\n      holiday_rate: sanitizedValue\n    }));\n  };\n\n  const updateAdditionalRate = (index, field, value) => {\n    debugLog('MBA2oinv5nd updateAdditionalRate called with index:', index, 'field:', field, 'value:', value);\n    debugLog('MBA2oinv5nd Current editedRates:', editedRates);\n    \n    if (!editedRates?.additional_rates) {\n      debugLog('MBA2oinv5nd No additional_rates in editedRates, returning early');\n      return;\n    }\n    \n    const updatedAdditionalRates = [...editedRates.additional_rates];\n    debugLog('MBA2oinv5nd Current additional_rates:', updatedAdditionalRates);\n    \n    if (field === 'amount') {\n      // Apply consistent amount sanitization\n      const sanitizedValue = sanitizeAmountInput(value);\n      debugLog('MBA2oinv5nd Updating amount from', updatedAdditionalRates[index]?.amount, 'to', sanitizedValue);\n      \n      updatedAdditionalRates[index] = {\n        ...updatedAdditionalRates[index],\n        amount: sanitizedValue === '' ? '' : sanitizedValue\n      };\n    } else if (field === 'name') {\n      debugLog('MBA2oinv5nd Updating name from', updatedAdditionalRates[index]?.name, 'to', value);\n      updatedAdditionalRates[index] = {\n        ...updatedAdditionalRates[index],\n        name: value\n      };\n    }\n    \n    debugLog('MBA2oinv5nd Updated additional_rates:', updatedAdditionalRates);\n    \n    setEditedRates(prev => {\n      const newRates = {\n        ...prev,\n        additional_rates: updatedAdditionalRates\n      };\n      debugLog('MBA2oinv5nd New editedRates after additional rate update:', newRates);\n      return newRates;\n    });\n  };\n\n  const deleteAdditionalRate = async (index) => {\n    if (!editedRates?.additional_rates) return;\n    \n    try {\n      setIsLoading(true);\n      setError(null);\n      \n      // Create an updated rates object\n      const updatedRates = { ...editedRates };\n      const updatedAdditionalRates = [...updatedRates.additional_rates];\n      updatedAdditionalRates.splice(index, 1);\n      updatedRates.additional_rates = updatedAdditionalRates;\n      \n      // Create occurrences array for API with all occurrences\n      const occurrencesForApi = bookingData.occurrences.map((occ, occIndex) => {\n        // For the first occurrence (the one being edited in this case), update its rates with the updated rates\n        if (occIndex === 0) {\n          return {\n            occurrence_id: occ.occurrence_id,\n            rates: {\n              base_rate: parseFloat(updatedRates.base_rate),\n              additional_animal_rate: parseFloat(updatedRates.additional_animal_rate || 0),\n              applies_after: parseInt(updatedRates.applies_after || 1),\n              holiday_rate: parseFloat(updatedRates.holiday_rate || 0),\n              additional_rates: updatedRates.additional_rates.map(rate => ({\n                title: rate.name || rate.title,\n                amount: parseFloat(rate.amount),\n                description: rate.description || `Additional rate`\n              }))\n            }\n          };\n        }\n        // For other occurrences, keep them as they are\n        return {\n          occurrence_id: occ.occurrence_id,\n          rates: {\n            base_rate: parseFloat(occ.rates.base_rate),\n            additional_animal_rate: parseFloat(occ.rates.additional_animal_rate || 0),\n            applies_after: parseInt(occ.rates.applies_after || 1),\n            holiday_rate: parseFloat(occ.rates.holiday_rate || 0),\n            additional_rates: (occ.rates.additional_rates || []).map(rate => ({\n              title: rate.name || rate.title,\n              amount: parseFloat(rate.amount),\n              description: rate.description || ''\n            }))\n          }\n        };\n      });\n      \n      debugLog('MBA66777 Sending all occurrences with updated rates to API:', occurrencesForApi);\n      \n      // Call the API to update rates using the bookingId prop\n      const response = await updateBookingDraftRates(\n        bookingId, \n        occurrencesForApi\n      );\n      \n      debugLog('MBA66777 Rate deleted API response:', response);\n      \n      // Update the local state with the response\n      if (response.draft_data) {\n        // Set the edited rates from the response\n        if (response.draft_data.occurrences && response.draft_data.occurrences[0]) {\n          setEditedRates(response.draft_data.occurrences[0].rates);\n        }\n        \n        // Call onRatesUpdate with the updated data from the API\n        if (onRatesUpdate) {\n          onRatesUpdate(response.draft_data);\n        }\n      }\n    } catch (err) {\n      debugLog('MBA66777 Error deleting rate:', err);\n      setError('Failed to delete rate. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleEditOccurrence = (occurrence) => {\n    debugLog('MBA66777 Editing occurrence:', occurrence);\n    \n    // Set the occurrence ID being edited\n    setEditingOccurrenceId(occurrence.occurrence_id);\n    \n    // For single occurrence bookings (typically overnight), also enter edit mode\n    if (bookingData.occurrences.length === 1) {\n      debugLog('MBA66777 Setting isEditMode for single occurrence booking');\n      setIsEditMode(true);\n      \n      // Make sure we have the correct rates in editedRates\n      setEditedRates({\n        base_rate: occurrence.rates.base_rate,\n        additional_animal_rate: occurrence.rates.additional_animal_rate || 0,\n        applies_after: occurrence.rates.applies_after || 1,\n        holiday_rate: occurrence.rates.holiday_rate || 0,\n        additional_rates: occurrence.rates.additional_rates?.map(r => ({\n          name: r.name || r.title,\n          amount: r.amount,\n          description: r.description || ''\n        })) || []\n      });\n    } else {\n      // For multiple occurrences, expand the rates panel\n      setExpandedRates(new Set([occurrence.occurrence_id]));\n    }\n    \n    // Set the occurrence edits for either case\n    setOccurrenceEdits({\n      base_rate: occurrence.rates.base_rate,\n      additional_animal_rate: occurrence.rates.additional_animal_rate || 0,\n      applies_after: occurrence.rates.applies_after || 1,\n      holiday_rate: occurrence.rates.holiday_rate || 0,\n      additional_rates: occurrence.rates.additional_rates?.map(r => ({\n        name: r.name || r.title,\n        amount: r.amount,\n        description: r.description || ''\n      })) || []\n    });\n  };\n\n  const handleCancelEdit = () => {\n    setEditingOccurrenceId(null);\n    setOccurrenceEdits({});\n    \n    // If we were editing a single occurrence booking, exit edit mode\n    if (bookingData.occurrences.length === 1) {\n      setIsEditMode(false);\n    }\n    \n    // Also cancel adding a rate if that was in progress\n    setIsAddingRate(false);\n    setIsAddingRateForOccurrence(null);\n  };\n\n  const handleOccurrenceInputChange = (field, value) => {\n    if (field === 'base_rate' || field === 'additional_animal_rate' || field === 'holiday_rate') {\n      // Apply consistent amount sanitization\n      const sanitizedValue = sanitizeAmountInput(value);\n      \n      setOccurrenceEdits(prev => ({\n        ...prev,\n        [field]: sanitizedValue\n      }));\n    } else {\n      setOccurrenceEdits(prev => ({\n        ...prev,\n        [field]: value\n      }));\n    }\n  };\n\n  const handleAdditionalRateChange = (index, field, value) => {\n    debugLog(`MBA66778 Changing additional rate at index ${index}, field ${field} to value: ${value}`, {\n      currentOccurrenceEdits: occurrenceEdits,\n      currentAdditionalRates: occurrenceEdits.additional_rates\n    });\n    \n    setOccurrenceEdits(prev => {\n      const updated = [...(prev.additional_rates || [])];\n      \n      if (field === 'amount') {\n        // Apply consistent amount sanitization\n        const sanitizedValue = sanitizeAmountInput(value);\n        \n        updated[index] = {\n          ...updated[index],\n          amount: sanitizedValue === '' ? '' : sanitizedValue\n        };\n      } else if (field === 'name') {\n        updated[index] = {\n          ...updated[index],\n          name: value\n        };\n      }\n      \n      debugLog(`MBA66778 Updated additional rate:`, {\n        updatedRate: updated[index],\n        allRates: updated\n      });\n      \n      return { ...prev, additional_rates: updated };\n    });\n  };\n\n  const handleSaveOccurrenceRates = async (occurrence) => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      \n      // Clean up any empty amount values in occurrenceEdits\n      const cleanOccurrenceEdits = {\n        ...occurrenceEdits,\n        additional_rates: (occurrenceEdits.additional_rates || []).map(rate => ({\n          title: rate.name || rate.title, // Always use 'title' for backend\n          // Convert empty or string amount values to number\n          amount: rate.amount === '' ? 0 : typeof rate.amount === 'string' ? parseFloat(rate.amount) : rate.amount,\n          description: rate.description || ''\n        }))\n      };\n      \n      // Create a list of occurrences to send to the API\n      const occurrencesForApi = bookingData.occurrences.map(occ => {\n        // For the occurrence being edited, update its rates\n        if (occ.occurrence_id === occurrence.occurrence_id) {\n          return {\n            occurrence_id: occurrence.occurrence_id,\n            rates: {\n              base_rate: occurrenceEdits.base_rate === '' ? 0 : typeof occurrenceEdits.base_rate === 'string' ? parseFloat(occurrenceEdits.base_rate) : occurrenceEdits.base_rate,\n              additional_animal_rate: occurrenceEdits.additional_animal_rate === '' ? 0 : typeof occurrenceEdits.additional_animal_rate === 'string' ? parseFloat(occurrenceEdits.additional_animal_rate) : occurrenceEdits.additional_animal_rate || 0,\n              applies_after: parseInt(occurrenceEdits.applies_after || 1),\n              holiday_rate: occurrenceEdits.holiday_rate === '' ? 0 : typeof occurrenceEdits.holiday_rate === 'string' ? parseFloat(occurrenceEdits.holiday_rate) : occurrenceEdits.holiday_rate || 0,\n              additional_rates: cleanOccurrenceEdits.additional_rates\n            }\n          };\n        }\n        // For other occurrences, keep them as they are\n        return {\n          occurrence_id: occ.occurrence_id,\n          rates: {\n            base_rate: parseFloat(occ.rates.base_rate),\n            additional_animal_rate: parseFloat(occ.rates.additional_animal_rate || 0),\n            applies_after: parseInt(occ.rates.applies_after || 1),\n            holiday_rate: parseFloat(occ.rates.holiday_rate || 0),\n            additional_rates: (occ.rates.additional_rates || []).map(rate => ({\n              title: rate.name || rate.title,\n              amount: parseFloat(rate.amount),\n              description: rate.description || ''\n            }))\n          }\n        };\n      });\n      \n      debugLog('MBA54321 - Sending all occurrences to API:', occurrencesForApi);\n      \n      const response = await updateBookingDraftRates(\n        bookingId,\n        occurrencesForApi\n      );\n      \n      if (response.draft_data) {\n        if (onRatesUpdate) onRatesUpdate(response.draft_data);\n        \n        // Reset all edit state\n        setEditingOccurrenceId(null);\n        setOccurrenceEdits({});\n        \n        // If we're in edit mode for a single occurrence booking, exit that mode too\n        if (bookingData.occurrences.length === 1) {\n          setIsEditMode(false);\n        }\n        \n        // Also remove any expanded rates and cancel any rate addition in progress\n        setExpandedRates(new Set());\n        setIsAddingRate(false);\n        setIsAddingRateForOccurrence(null);\n      }\n    } catch (err) {\n      debugLog('MBA54321 - Error saving occurrence rates:', err);\n      setError('Failed to update rates. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const toggleAddRateForOccurrence = (occurrenceId) => {\n    if (isAddingRateForOccurrence === occurrenceId) {\n      setIsAddingRateForOccurrence(null);\n    } else {\n      setIsAddingRateForOccurrence(occurrenceId);\n    }\n    setNewOccurrenceRate({ name: '', amount: '', description: '' });\n  };\n\n  const saveNewRateForOccurrence = async (occurrence) => {\n    if (!newOccurrenceRate.name || (!newOccurrenceRate.amount && newOccurrenceRate.amount !== '')) return;\n    \n    try {\n      setIsLoading(true);\n      setError(null);\n      \n      // Create updated occurrence edits with the new rate\n      const updatedOccurrenceEdits = { ...occurrenceEdits };\n      \n      if (!updatedOccurrenceEdits.additional_rates) {\n        updatedOccurrenceEdits.additional_rates = [];\n      }\n      \n      updatedOccurrenceEdits.additional_rates.push({\n        name: newOccurrenceRate.name,\n        title: newOccurrenceRate.name, // Add title for consistency\n        amount: newOccurrenceRate.amount === '' ? 0 : typeof newOccurrenceRate.amount === 'string' ? parseFloat(newOccurrenceRate.amount) : newOccurrenceRate.amount,\n        description: newOccurrenceRate.description || `Additional rate`\n      });\n      \n      // Update state\n      setOccurrenceEdits(updatedOccurrenceEdits);\n      \n      // Call API to save the new rate\n      const occurrencesForApi = bookingData.occurrences.map(occ => {\n        // For the occurrence being edited, update its rates with the new rate\n        if (occ.occurrence_id === occurrence.occurrence_id) {\n          return {\n            occurrence_id: occurrence.occurrence_id,\n            rates: {\n              base_rate: parseFloat(updatedOccurrenceEdits.base_rate),\n              additional_animal_rate: parseFloat(updatedOccurrenceEdits.additional_animal_rate || 0),\n              applies_after: parseInt(updatedOccurrenceEdits.applies_after || 1),\n              holiday_rate: parseFloat(updatedOccurrenceEdits.holiday_rate || 0),\n              additional_rates: updatedOccurrenceEdits.additional_rates.map(rate => ({\n                title: rate.name,\n                amount: parseFloat(rate.amount),\n                description: rate.description || ''\n              }))\n            }\n          };\n        }\n        // For other occurrences, keep them as they are\n        return {\n          occurrence_id: occ.occurrence_id,\n          rates: {\n            base_rate: parseFloat(occ.rates.base_rate),\n            additional_animal_rate: parseFloat(occ.rates.additional_animal_rate || 0),\n            applies_after: parseInt(occ.rates.applies_after || 1),\n            holiday_rate: parseFloat(occ.rates.holiday_rate || 0),\n            additional_rates: (occ.rates.additional_rates || []).map(rate => ({\n              title: rate.name || rate.title,\n              amount: parseFloat(rate.amount),\n              description: rate.description || ''\n            }))\n          }\n        };\n      });\n      \n      debugLog('MBA54321 - Sending all occurrences with new rate to API:', occurrencesForApi);\n      \n      const response = await updateBookingDraftRates(\n        bookingId,\n        occurrencesForApi\n      );\n      \n      debugLog('MBA54321 - New rate added to occurrence API response:', response);\n      \n      if (response.draft_data) {\n        if (onRatesUpdate) onRatesUpdate(response.draft_data);\n      }\n      \n      // Close add rate form\n      setIsAddingRateForOccurrence(null);\n      setNewOccurrenceRate({ name: '', amount: '', description: '' });\n      \n    } catch (err) {\n      debugLog('MBA66777 Error adding new rate for occurrence:', err);\n      setError('Failed to add new rate. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const deleteRateForOccurrence = async (occurrence, rateIndex) => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      \n      // Create updated occurrence edits with the rate removed\n      const updatedOccurrenceEdits = { ...occurrenceEdits };\n      \n      if (updatedOccurrenceEdits.additional_rates && updatedOccurrenceEdits.additional_rates.length > rateIndex) {\n        // Remove the rate at the specified index\n        updatedOccurrenceEdits.additional_rates.splice(rateIndex, 1);\n        \n        // Update state\n        setOccurrenceEdits(updatedOccurrenceEdits);\n        \n        // Call API to save the updated rates\n        const occurrencesForApi = bookingData.occurrences.map(occ => {\n          // For the occurrence being edited, update its rates with the rate removed\n          if (occ.occurrence_id === occurrence.occurrence_id) {\n            return {\n              occurrence_id: occurrence.occurrence_id,\n              rates: {\n                base_rate: parseFloat(updatedOccurrenceEdits.base_rate),\n                additional_animal_rate: parseFloat(updatedOccurrenceEdits.additional_animal_rate || 0),\n                applies_after: parseInt(updatedOccurrenceEdits.applies_after || 1),\n                holiday_rate: parseFloat(updatedOccurrenceEdits.holiday_rate || 0),\n                additional_rates: updatedOccurrenceEdits.additional_rates.map(rate => ({\n                  title: rate.name,\n                  amount: parseFloat(rate.amount),\n                  description: rate.description || ''\n                }))\n              }\n            };\n          }\n          // For other occurrences, keep them as they are\n          return {\n            occurrence_id: occ.occurrence_id,\n            rates: {\n              base_rate: parseFloat(occ.rates.base_rate),\n              additional_animal_rate: parseFloat(occ.rates.additional_animal_rate || 0),\n              applies_after: parseInt(occ.rates.applies_after || 1),\n              holiday_rate: parseFloat(occ.rates.holiday_rate || 0),\n              additional_rates: (occ.rates.additional_rates || []).map(rate => ({\n                title: rate.name || rate.title,\n                amount: parseFloat(rate.amount),\n                description: rate.description || ''\n              }))\n            }\n          };\n        });\n        \n        debugLog('MBA54321 - Sending all occurrences with rate deleted to API:', occurrencesForApi);\n        \n        const response = await updateBookingDraftRates(\n          bookingId,\n          occurrencesForApi\n        );\n        \n        debugLog('MBA54321 - Rate deleted from occurrence API response:', response);\n        \n        if (response.draft_data) {\n          if (onRatesUpdate) onRatesUpdate(response.draft_data);\n        }\n      }\n    } catch (err) {\n      debugLog('MBA66777 Error deleting rate for occurrence:', err);\n      setError('Failed to delete rate. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const toggleServiceAdditionalRate = async (serviceRate, isEnabled) => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      \n      debugLog('MBA77999 Toggling service additional rate:', { \n        title: serviceRate.title, \n        isEnabled, \n        occurrencesCount: bookingData.occurrences.length \n      });\n      \n      // Update the toggle state\n      setServiceAdditionalRatesEnabled(prev => ({\n        ...prev,\n        [serviceRate.title]: isEnabled\n      }));\n      \n      // Create occurrences array for API - apply the rate to all occurrences if enabled\n      const occurrencesForApi = bookingData.occurrences.map(occ => {\n        const currentAdditionalRates = [...(occ.rates.additional_rates || [])];\n        \n        if (isEnabled) {\n          // Add the rate if it's not already present\n          const rateExists = currentAdditionalRates.some(rate => \n            (rate.title || rate.name) === serviceRate.title\n          );\n          \n                     if (!rateExists) {\n             currentAdditionalRates.push({\n               title: serviceRate.title,\n               amount: parseFloat(serviceRate.amount || serviceRate.rate || 0),\n               description: serviceRate.description || 'Additional rate'\n             });\n           }\n        } else {\n          // Remove the rate if it exists\n          const filteredRates = currentAdditionalRates.filter(rate => \n            (rate.title || rate.name) !== serviceRate.title\n          );\n          currentAdditionalRates.length = 0;\n          currentAdditionalRates.push(...filteredRates);\n        }\n        \n        return {\n          occurrence_id: occ.occurrence_id,\n          rates: {\n            base_rate: parseFloat(occ.rates.base_rate),\n            additional_animal_rate: parseFloat(occ.rates.additional_animal_rate || 0),\n            applies_after: parseInt(occ.rates.applies_after || 1),\n            holiday_rate: parseFloat(occ.rates.holiday_rate || 0),\n            additional_rates: currentAdditionalRates\n          }\n        };\n      });\n      \n      debugLog('MBA77999 Sending updated occurrences to API:', occurrencesForApi);\n      \n      // Call the API to update rates for all occurrences\n      const response = await updateBookingDraftRates(\n        bookingId, \n        occurrencesForApi\n      );\n      \n      debugLog('MBA77999 Service rate toggle API response:', response);\n      \n      // Update the local state with the response\n      if (response.draft_data) {\n        if (onRatesUpdate) {\n          onRatesUpdate(response.draft_data);\n        }\n      }\n      \n    } catch (err) {\n      debugLog('MBA77999 Error toggling service additional rate:', err);\n      setError('Failed to update rates. Please try again.');\n      \n      // Revert the toggle state on error\n      setServiceAdditionalRatesEnabled(prev => ({\n        ...prev,\n        [serviceRate.title]: !isEnabled\n      }));\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Helper function to get the correct value for an additional rate field based on edit state\n  const getAdditionalRateValue = (occurrence, index, field) => {\n    // If we're editing this occurrence, get value from occurrenceEdits\n    if (editingOccurrenceId === occurrence.occurrence_id && occurrenceEdits.additional_rates) {\n      const value = occurrenceEdits.additional_rates[index]?.[field];\n      // For numeric fields like 'amount', 0 is a valid value\n      if (field === 'amount' && value === 0) return '';\n      return value || '';\n    }\n    \n    // If we're in edit mode (for single occurrence bookings), get from editedRates\n    if (isEditMode && editedRates?.additional_rates) {\n      const value = editedRates.additional_rates[index]?.[field];\n      // For numeric fields like 'amount', 0 is a valid value\n      if (field === 'amount' && value === 0) return '';\n      return value || '';\n    }\n    \n    // Otherwise get from the rate directly\n    const rates = occurrence.rates?.additional_rates || [];\n    const rate = rates[index] || {};\n    const value = field === 'name' ? (rate.name || rate.title) : rate[field];\n    \n    // For numeric fields like 'amount', 0 is a valid value\n    if (field === 'amount' && value === 0) return '';\n    return value || '';\n  };\n\n  const renderServiceAndPets = () => {\n    return (\n      <View style={[styles.section, { marginTop: 0, marginBottom: 16 }]}>\n          <Text style={styles.sectionHeader}>Service & Pets</Text>\n          <View style={[styles.card, { padding: 16 }]}>\n            <View style={styles.serviceContainer}>\n              <Text style={styles.serviceLabel}>Service:</Text>\n              <Text style={styles.serviceValue}>{bookingData.service_details?.service_type || 'N/A'}</Text>\n            </View>\n            \n            <View style={styles.serviceDivider} />\n            \n            <View style={styles.petsContainer}>\n              <Text style={styles.petsLabel}>Pets:</Text>\n              <View style={styles.petsList}>\n                {bookingData.pets && bookingData.pets.length > 0 ? (\n                  bookingData.pets.map((pet, index) => (\n                    <View key={index} style={styles.petItem}>\n                      <Text style={styles.petName}>{pet.name}</Text>\n                      <Text style={styles.petType}>{capitalizeWords(pet.species)} | {pet.breed}</Text>\n                    </View>\n                  ))\n                ) : (\n                  <Text style={styles.noPets}>No pets selected</Text>\n                )}\n              </View>\n            </View>\n          </View>\n        </View>\n    );\n  };\n\n  const renderServiceAdditionalRates = () => {\n    debugLog('MBA2394jv340 renderServiceAdditionalRates called');\n    debugLog('MBA2394jv340 bookingData:', bookingData);\n    debugLog('MBA2394jv340 bookingData.service:', bookingData?.service);\n    debugLog('MBA2394jv340 service.is_overnight:', bookingData?.service?.is_overnight);\n    debugLog('MBA2394jv340 occurrences length:', bookingData?.occurrences?.length);\n    \n    // Only show for non-overnight services that have additional rates available\n    if (!bookingData?.service) {\n      debugLog('MBA2394jv340 No service found, returning null');\n      return null;\n    }\n    \n    if (bookingData.service.is_overnight === true) {\n      debugLog('MBA2394jv340 Service is overnight, returning null');\n      return null;\n    }\n    \n    if (!bookingData?.occurrences) {\n      debugLog('MBA2394jv340 No occurrences found, returning null');\n      return null;\n    }\n\n    // Use the stored available rates from state\n    const filteredRates = availableAdditionalRates;\n    debugLog('MBA2394jv340 Using stored available rates:', filteredRates);\n    \n    if (filteredRates.length === 0) {\n      debugLog('MBA2394jv340 No stored rates found, returning null');\n      return null;\n    }\n\n    debugLog('MBA2394jv340 Rendering service additional rates section with', filteredRates.length, 'rates');\n\n    return (\n      <View style={styles.section}>\n        <View style={styles.sectionHeaderContainer}>\n          <Text style={styles.sectionHeader}>Additional Rates</Text>\n        </View>\n        <View style={[styles.card, { paddingTop: 16 }]}>\n          <Text style={styles.additionalRatesDescription}>\n            Toggle additional rates to apply or remove them from {bookingData.occurrences.length === 1 ? 'this booking' : `all ${bookingData.occurrences.length} dates in this booking`}:\n          </Text>\n          \n          {filteredRates.map((serviceRate, index) => {\n            const isEnabled = serviceAdditionalRatesEnabled[serviceRate.title] || false;\n            \n            return (\n              <View key={index} style={styles.serviceRateItem}>\n                <TouchableOpacity \n                  style={styles.serviceRateCheckbox}\n                  onPress={() => toggleServiceAdditionalRate(serviceRate, !isEnabled)}\n                  disabled={isLoading}\n                >\n                  <View style={[styles.checkbox, isEnabled && styles.checkboxChecked]}>\n                    {isEnabled && (\n                      <MaterialCommunityIcons name=\"check\" size={16} color=\"white\" />\n                    )}\n                  </View>\n                  \n                  <View style={styles.serviceRateInfo}>\n                    <Text style={styles.serviceRateTitle}>{serviceRate.title}</Text>\n                    <Text style={styles.serviceRateAmount}>\n                      {formatCurrency(serviceRate.amount || serviceRate.rate)}\n                    </Text>\n                    {serviceRate.description && (\n                      <Text style={styles.serviceRateDescription}>{serviceRate.description}</Text>\n                    )}\n                  </View>\n                </TouchableOpacity>\n              </View>\n            );\n          })}\n        </View>\n      </View>\n    );\n  };\n\n  const renderNotesForClient = () => {\n    // Show notes section for professionals (when creating/editing) or anyone when viewing from approval modal\n    if (!isProfessional && !fromApprovalModal) {\n      return null;\n    }\n\n    // Don't show if viewing from approval modal and there are no notes\n    if (fromApprovalModal && !notesFromPro) {\n      return null;\n    }\n\n    const isReadOnly = fromApprovalModal;\n    const sectionTitle = fromApprovalModal ? \"Notes from Professional\" : \"Notes for Client\";\n\n    return (\n      <View style={styles.section}>\n        <View style={styles.sectionHeaderContainer}>\n          <Text style={styles.sectionHeader}>{sectionTitle}</Text>\n        </View>\n        <View style={[styles.card, { paddingTop: 16, marginBottom: 16 }]}>\n          {isReadOnly ? (\n            <Text style={styles.notesTextInputReadOnly}>\n              {notesFromPro}\n            </Text>\n          ) : (\n            <View>\n              <TextInput\n                style={styles.notesTextInput}\n                value={notesFromPro}\n                onChangeText={(text) => {\n                  setNotesFromPro(text);\n                  setNotesSaved(false); // Reset saved state when text changes\n                }}\n                placeholder={\"Enter notes for the client (optional)...\"}\n                placeholderTextColor={theme.colors.placeHolderText}\n                multiline={true}\n                numberOfLines={4}\n                textAlignVertical=\"top\"\n              />\n              \n              {/* Save Button */}\n              <View style={styles.notesSaveContainer}>\n                <TouchableOpacity \n                  style={[styles.notesSaveButton, notesSaved && styles.notesSaveButtonSaved]}\n                  onPress={saveNotesToDraft}\n                  disabled={isSavingNotes}\n                >\n                  <Text style={[styles.notesSaveButtonText, notesSaved && styles.notesSaveButtonTextSaved]}>\n                    {notesSaved ? '✓ Saved' : isSavingNotes ? 'Saving...' : 'Save Notes'}\n                  </Text>\n                </TouchableOpacity>\n              </View>\n            </View>\n          )}\n        </View>\n      </View>\n    );\n  };\n\n  const renderBookingBreakdown = () => {\n    debugLog('MBAio3htg5uohg: Rendering booking breakdown with data:', bookingData?.occurrences?.[0]);\n    const occurrences = bookingData?.occurrences;\n    if (!occurrences || occurrences.length === 0) return null;\n\n    // Get the user's timezone from context\n    const { timeSettings } = useContext(AuthContext);\n    const userTimezone = timeSettings?.timezone || 'US/Mountain';\n    debugLog('MBAio3htg5uohg: userTimezone: ', userTimezone);\n\n    // Check if we're dealing with multiple individual dates\n    // Updated logic to properly handle midnight end times\n    const isMultipleDates = occurrences.length > 1 || \n      // Consider a booking with 00:00 end time as a multiple date booking even if\n      // there's only one occurrence and end_date is different from start_date\n      (occurrences.length === 1 && \n       ((occurrences[0].end_date !== occurrences[0].start_date && occurrences[0].end_time === \"00:00\") ||\n        occurrences[0].start_date === occurrences[0].end_date));\n    \n    debugLog('MBAio3htg5uohg: isMultipleDates detection:', { \n      isMultipleDates, \n      count: occurrences.length,\n      firstOccurrence: occurrences[0] ? {\n        start_date: occurrences[0].start_date,\n        end_date: occurrences[0].end_date,\n        end_time: occurrences[0].end_time\n      } : null\n    });\n\n    if (isMultipleDates) {\n      return (\n        <View style={[styles.section]}>\n          <View style={styles.sectionHeaderContainer}>\n            <Text style={styles.sectionHeader}>Booking Breakdown</Text>\n          </View>\n          <View style={[styles.card, { paddingTop: 16 }]}>\n            {occurrences.map((occurrence, index) => {\n              // Ensure we have a valid unit_of_time - check in multiple places\n              const unitOfTime = \n                (occurrence.unit_of_time) || \n                (occurrence.rates && occurrence.rates.unit_of_time) || \n                'Per Visit';\n                \n              // Ensure multiple is properly formatted as a number\n              const multiple = parseFloat(occurrence.multiple) || 1;\n              \n              // Log each occurrence for debugging\n              debugLog('MBAio3htg5uohg: Processing occurrence in UI:', {\n                id: occurrence.occurrence_id,\n                unit_of_time: unitOfTime,\n                multiple: multiple,\n                calculated_cost: occurrence.calculated_cost\n              });\n              \n              return (\n                <View key={occurrence.occurrence_id} style={styles.multipleDatesContainer}>\n                  <View style={styles.dateHeader}>\n                    <View style={styles.dateTextContainer}>\n                      <Text style={styles.dateText}>\n                        {formatDateTimeRangeFromUTC({\n                          startDate: occurrence.start_date,\n                          startTime: occurrence.start_time,\n                          endDate: occurrence.end_date,\n                          endTime: occurrence.end_time,\n                          userTimezone: userTimezone,\n                          includeTimes: true,\n                          includeTimezone: true\n                        })}\n                      </Text>\n                    </View>\n                    <Text style={styles.occurrenceCost}>\n                      {formatCurrency(occurrence.calculated_cost)}\n                    </Text>\n                    {/* Edit/Cancel Button - moved here, only one icon */}\n                    {editingOccurrenceId === occurrence.occurrence_id ? (\n                      <TouchableOpacity onPress={handleCancelEdit}>\n                        <MaterialCommunityIcons name=\"close\" size={20} color={theme.colors.error} />\n                      </TouchableOpacity>\n                    ) : (\n                      showEditControls && (\n                        <TouchableOpacity onPress={() => handleEditOccurrence(occurrence)}>\n                          <MaterialCommunityIcons name=\"pencil\" size={20} color={theme.colors.mainColors.main} />\n                        </TouchableOpacity>\n                      )\n                    )}\n                  </View>\n\n                  {/* Collapsible Rates Section */}\n                  <TouchableOpacity \n                    style={styles.ratesToggleButton}\n                    onPress={() => {\n                      const newExpandedRates = new Set(expandedRates);\n                      if (newExpandedRates.has(occurrence.occurrence_id)) {\n                        newExpandedRates.delete(occurrence.occurrence_id);\n                      } else {\n                        newExpandedRates.add(occurrence.occurrence_id);\n                      }\n                      setExpandedRates(newExpandedRates);\n                    }}\n                  >\n                    <Text style={styles.ratesToggleText}>\n                      {expandedRates.has(occurrence.occurrence_id) ? 'Hide Rates' : 'Show Rates'}\n                    </Text>\n                    <MaterialCommunityIcons \n                      name={expandedRates.has(occurrence.occurrence_id) ? \"chevron-up\" : \"chevron-down\"} \n                      size={20} \n                      color={theme.colors.mainColors.main} \n                    />\n                  </TouchableOpacity>\n\n                  {expandedRates.has(occurrence.occurrence_id) && (\n                    <View style={styles.ratesBreakdown}>\n                      {/* Base Rate */}\n                      <View style={styles.rateItem}>\n                        {editingOccurrenceId === occurrence.occurrence_id ? (\n                          <View style={{ flexDirection: 'row', alignItems: 'center', justifyContent: 'space-between', width: '100%' }}>\n                            <Text style={styles.rateLabel}>Base Rate ({unitOfTime})</Text>\n                            <TextInput\n                              style={{ \n                                width: 80, \n                                borderWidth: 1,\n                                borderColor: theme.colors.border,\n                                borderRadius: 4,\n                                padding: 8\n                              }}\n                              keyboardType=\"decimal-pad\"\n                              value={occurrenceEdits.base_rate?.toString() || ''}\n                              onChangeText={v => handleOccurrenceInputChange('base_rate', v)}\n                            />\n                          </View>\n                        ) : (\n                          <View>\n                            <Text style={styles.rateLabel}>Base Rate</Text>\n                            <Text style={styles.breakdownCalculation}>\n                              {formatCurrency(occurrence.rates.base_rate)} ({unitOfTime}) × {multiple} = {formatCurrency(occurrence.base_total)}\n                            </Text>\n                          </View>\n                        )}\n                        {editingOccurrenceId === occurrence.occurrence_id ? null : (\n                          <Text style={styles.rateAmount}>{formatCurrency(occurrence.base_total)}</Text>\n                        )}\n                      </View>\n\n                      {/* Additional Animal Rate */}\n                      {occurrence.rates?.additional_animal_rate && parseFloat(occurrence.rates.additional_animal_rate) > 0 && occurrence.rates?.applies_after && occurrence.rates.applies_after < (bookingData.pets?.length || 1) && (\n                        <View style={styles.rateItem}>\n                          {editingOccurrenceId === occurrence.occurrence_id ? (\n                            <View style={{ flexDirection: 'row', alignItems: 'center', justifyContent: 'space-between', width: '100%' }}>\n                              <Text style={styles.rateLabel}>\n                                Additional Pet Rate (after {occurrence.rates.applies_after} {occurrence.rates.applies_after !== 1 ? 'pets' : 'pet'})\n                              </Text>\n                              <TextInput\n                                style={{ \n                                  width: 80, \n                                  borderWidth: 1,\n                                  borderColor: theme.colors.border,\n                                  borderRadius: 4,\n                                  padding: 8\n                                }}\n                                keyboardType=\"decimal-pad\"\n                                value={occurrenceEdits.additional_animal_rate?.toString() || ''}\n                                onChangeText={v => handleOccurrenceInputChange('additional_animal_rate', v)}\n                              />\n                            </View>\n                          ) : (\n                            <View>\n                              <Text style={styles.rateLabel}>\n                                Additional Pet Rate (after {occurrence.rates.applies_after} {occurrence.rates.applies_after !== 1 ? 'pets' : 'pet'})\n                              </Text>\n                              <Text style={styles.breakdownCalculation}>\n                                {formatCurrency(occurrence.rates.additional_animal_rate)} / pet / {occurrence.unit_of_time || occurrence.rates?.unit_of_time || 'Per Visit'} × {Math.max(0, (bookingData.pets?.length || 0) - occurrence.rates.applies_after)} additional pets = {formatCurrency(occurrence.rates.additional_animal_rate_total || 0)}\n                              </Text>\n                            </View>\n                          )}\n                          {editingOccurrenceId === occurrence.occurrence_id ? null : (\n                            <Text style={styles.rateAmount}>{formatCurrency(occurrence.rates.additional_animal_rate_total || 0)}</Text>\n                          )}\n                        </View>\n                      )}\n\n                      {/* Holiday Rate - only show if there are actually holiday days */}\n                      {occurrence.rates?.holiday_rate && parseFloat(occurrence.rates.holiday_rate) > 0 && \n                       (occurrence.rates?.holiday_days > 0 || !('holiday_days' in occurrence.rates)) && (\n                        <View style={styles.rateItem}>\n                          {editingOccurrenceId === occurrence.occurrence_id ? (\n                            <View style={{ flexDirection: 'row', alignItems: 'center', justifyContent: 'space-between', width: '100%' }}>\n                              <Text style={styles.rateLabel}>Holiday Rate</Text>\n                              <TextInput\n                                style={{ \n                                  width: 80, \n                                  borderWidth: 1,\n                                  borderColor: theme.colors.border,\n                                  borderRadius: 4,\n                                  padding: 8\n                                }}\n                                keyboardType=\"decimal-pad\"\n                                value={occurrenceEdits.holiday_rate?.toString() || ''}\n                                onChangeText={v => handleOccurrenceInputChange('holiday_rate', v)}\n                              />\n                            </View>\n                          ) : (\n                            <Text style={styles.rateLabel}>Holiday Rate</Text>\n                          )}\n                          {editingOccurrenceId === occurrence.occurrence_id ? null : (\n                            <Text style={styles.rateAmount}>{formatCurrency(occurrence.rates.holiday_rate)}</Text>\n                          )}\n                        </View>\n                      )}\n\n                      {/* Additional Rates */}\n                      {((isEditMode ? editedRates?.additional_rates : occurrence.rates?.additional_rates) || []).length > 0 ? \n                        ((isEditMode ? editedRates?.additional_rates : occurrence.rates?.additional_rates) || []).map((rate, index) => (\n                          <View key={index} style={styles.breakdownItem}>\n                            <View style={styles.breakdownLabelContainer}>\n                              {isEditMode || editingOccurrenceId === occurrence.occurrence_id ? (\n                                width < 600 ? (\n                                  // Mobile layout - stacked with trash icon on the right\n                                  <View style={{ width: '100%' }}>\n                                    <View style={{ flexDirection: 'row', alignItems: 'center', justifyContent: 'space-between' }}>\n                                      {/* Debug log for rate name */}\n                                      {debugLog(`MBA66778 Rendering rate at index ${index}:`, {\n                                        isEditMode,\n                                        editingOccurrenceId: editingOccurrenceId,\n                                        occurrenceId: occurrence.occurrence_id,\n                                        rateName: rate.name || rate.title,\n                                        rateAmount: rate.amount,\n                                        occurrenceEditsRate: occurrenceEdits.additional_rates?.[index],\n                                        valueToShow: editingOccurrenceId === occurrence.occurrence_id ? \n                                          (occurrenceEdits.additional_rates && occurrenceEdits.additional_rates[index]?.amount?.toString()) || '0' : \n                                          rate.amount?.toString() || '0'\n                                      })}\n                                      <TextInput\n                                        style={[styles.nameInput, { flex: 1, marginRight: 8 }]}\n                                        value={getAdditionalRateValue(occurrence, index, 'name')}\n                                        onChangeText={(value) => editingOccurrenceId === occurrence.occurrence_id ? \n                                          handleAdditionalRateChange(index, 'name', value) : \n                                          updateAdditionalRate(index, 'name', value)}\n                                        placeholder=\"Rate Name\"\n                                      />\n                                      <TouchableOpacity \n                                        style={styles.deleteButton} \n                                        onPress={() => editingOccurrenceId === occurrence.occurrence_id ? \n                                          deleteRateForOccurrence(occurrence, index) : \n                                          deleteAdditionalRate(index)}\n                                      >\n                                        <MaterialCommunityIcons \n                                          name=\"trash-can-outline\" \n                                          size={22} \n                                          color={theme.colors.error} \n                                        />\n                                      </TouchableOpacity>\n                                    </View>\n                                    <View style={{ marginTop: 8 }}>\n                                      <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                                        <Text style={{ marginRight: 8 }}>Amount: $</Text>\n                                        <TextInput\n                                          style={{ \n                                            width: 80, \n                                            borderWidth: 1,\n                                            borderColor: theme.colors.border,\n                                            borderRadius: 4,\n                                            padding: 8\n                                          }}\n                                          keyboardType=\"decimal-pad\"\n                                          value={getAdditionalRateValue(occurrence, index, 'amount') === '' ? '' : \n                                                getAdditionalRateValue(occurrence, index, 'amount').toString()}\n                                          onChangeText={(value) => editingOccurrenceId === occurrence.occurrence_id ? \n                                            handleAdditionalRateChange(index, 'amount', value) : \n                                            updateAdditionalRate(index, 'amount', value)}\n                                        />\n                                      </View>\n                                    </View>\n                                  </View>\n                                ) : (\n                                  // Desktop layout - side by side\n                                  <View style={styles.editableAdditionalRateRow}>\n                                    <View style={styles.rateNameAmountRowWithDelete}>\n                                      <TextInput\n                                        style={styles.nameInput}\n                                        value={getAdditionalRateValue(occurrence, index, 'name')}\n                                        onChangeText={(value) => editingOccurrenceId === occurrence.occurrence_id ? \n                                          handleAdditionalRateChange(index, 'name', value) : \n                                          updateAdditionalRate(index, 'name', value)}\n                                        placeholder=\"Rate Name\"\n                                      />\n                                      <View style={styles.amountInputContainer}>\n                                        <Text style={styles.currencySymbol}>$</Text>\n                                        <TextInput\n                                          style={styles.rateInput}\n                                          keyboardType=\"decimal-pad\"\n                                          value={getAdditionalRateValue(occurrence, index, 'amount') === '' ? '' : \n                                                getAdditionalRateValue(occurrence, index, 'amount').toString()}\n                                          onChangeText={(value) => editingOccurrenceId === occurrence.occurrence_id ? \n                                            handleAdditionalRateChange(index, 'amount', value) : \n                                            updateAdditionalRate(index, 'amount', value)}\n                                        />\n                                      </View>\n                                    </View>\n                                    <TouchableOpacity \n                                      style={styles.deleteButton} \n                                      onPress={() => editingOccurrenceId === occurrence.occurrence_id ? \n                                        deleteRateForOccurrence(occurrence, index) : \n                                        deleteAdditionalRate(index)}\n                                    >\n                                      <MaterialCommunityIcons \n                                        name=\"trash-can-outline\" \n                                        size={22} \n                                        color={theme.colors.error} \n                                      />\n                                    </TouchableOpacity>\n                                  </View>\n                                )\n                              ) : (\n                                <>\n                                  <Text style={styles.breakdownLabel}>{rate.name || rate.title}</Text>\n                                  <Text style={styles.breakdownCalculation}>{rate.description || \"Additional Rate\"}</Text>\n                                </>\n                              )}\n                            </View>\n                            {!isEditMode && editingOccurrenceId !== occurrence.occurrence_id && (\n                              <Text style={styles.breakdownAmount}>+{formatCurrency(rate.amount)}</Text>\n                            )}\n                          </View>\n                        ))\n                      : null}\n                    </View>\n                  )}\n\n                  {/* Add New Rate Form for individual occurrence */}\n                  {isAddingRateForOccurrence === occurrence.occurrence_id && (\n                    <View>\n                      <View style={styles.addRateContainer}>\n                        <View style={styles.formDivider} />\n                        \n                        {width < 600 ? (\n                          // Mobile layout - stacked\n                          <View>\n                            <TextInput\n                              style={[styles.nameInput, { marginRight: 0, marginBottom: 12 }]}\n                              value={newOccurrenceRate.name}\n                              onChangeText={(text) => setNewOccurrenceRate(prev => ({ ...prev, name: text }))}\n                              placeholder=\"Rate Name\"\n                              placeholderTextColor={theme.colors.placeHolderText}\n                            />\n                            <View style={[styles.amountInputContainer, { marginBottom: 12 }]}>\n                              <Text style={styles.currencySymbol}>$</Text>\n                              <TextInput\n                                style={styles.rateInput}\n                                keyboardType=\"decimal-pad\"\n                                value={newOccurrenceRate.amount}\n                                onChangeText={handleNewOccurrenceRateAmountChange}\n                                placeholder=\"0.00\"\n                                placeholderTextColor={theme.colors.placeHolderText}\n                              />\n                            </View>\n                            <TextInput\n                              style={styles.descriptionInput}\n                              value={newOccurrenceRate.description}\n                              onChangeText={(text) => setNewOccurrenceRate(prev => ({ ...prev, description: text }))}\n                              placeholder=\"Description (optional)\"\n                              placeholderTextColor={theme.colors.placeHolderText}\n                            />\n                          </View>\n                        ) : (\n                          // Desktop layout - side by side\n                          <>\n                            <View style={styles.rateNameAmountRow}>\n                              <TextInput\n                                style={styles.nameInput}\n                                value={newOccurrenceRate.name}\n                                onChangeText={(text) => setNewOccurrenceRate(prev => ({ ...prev, name: text }))}\n                                placeholder=\"Rate Name\"\n                                placeholderTextColor={theme.colors.placeHolderText}\n                              />\n                              <View style={styles.amountInputContainer}>\n                                <Text style={styles.currencySymbol}>$</Text>\n                                <TextInput\n                                  style={styles.rateInput}\n                                  keyboardType=\"decimal-pad\"\n                                  value={newOccurrenceRate.amount}\n                                  onChangeText={handleNewOccurrenceRateAmountChange}\n                                  placeholder=\"0.00\"\n                                  placeholderTextColor={theme.colors.placeHolderText}\n                                />\n                              </View>\n                            </View>\n                            \n                            <TextInput\n                              style={styles.descriptionInput}\n                              value={newOccurrenceRate.description}\n                              onChangeText={(text) => setNewOccurrenceRate(prev => ({ ...prev, description: text }))}\n                              placeholder=\"Description (optional)\"\n                              placeholderTextColor={theme.colors.placeHolderText}\n                            />\n                          </>\n                        )}\n                        \n                        <View style={styles.formDivider} />\n                      </View>\n                      <View style={styles.buttonsContainer}>\n                        <TouchableOpacity style={styles.cancelButton} onPress={() => setIsAddingRateForOccurrence(null)}>\n                          <Text style={styles.cancelButtonText}>Cancel</Text>\n                        </TouchableOpacity>\n                        <TouchableOpacity style={styles.saveButton} onPress={() => saveNewRateForOccurrence(occurrence)}>\n                          <Text style={styles.saveButtonText}>Save New Rate</Text>\n                        </TouchableOpacity>\n                      </View>\n                    </View>\n                  )}\n\n                  {/* Add Rate and Save buttons for edit mode for this occurrence */}\n                  {editingOccurrenceId === occurrence.occurrence_id && !isAddingRateForOccurrence && (\n                    <View style={styles.buttonsContainer}>\n                      <TouchableOpacity \n                        style={styles.cancelButton} \n                        onPress={() => toggleAddRateForOccurrence(occurrence.occurrence_id)}\n                      >\n                        <Text style={styles.cancelButtonText}>+ Add Rate</Text>\n                      </TouchableOpacity>\n                      <TouchableOpacity \n                        style={styles.saveButton} \n                        onPress={() => handleSaveOccurrenceRates(occurrence)}\n                      >\n                        <Text style={styles.saveButtonText}>Save Changes</Text>\n                      </TouchableOpacity>\n                    </View>\n                  )}\n                </View>\n              );\n            })}\n          </View>\n        </View>\n      );\n    }\n   \n    // Rest of the function for non-multiple dates case\n    const occurrence = occurrences[0];\n    if (!occurrence) return null;\n\n    const formattedDateRange = formatDateTimeRangeFromUTC({\n      startDate: occurrence.start_date,\n      startTime: occurrence.start_time,\n      endDate: occurrence.end_date,\n      endTime: occurrence.end_time,\n      userTimezone: userTimezone,\n      includeTimes: true,\n      includeTimezone: true\n    });\n\n    debugLog('MBA54321 Formatted date range:', formattedDateRange);\n\n    // Initialize rates object if it doesn't exist\n    if (!occurrence.rates) {\n      debugLog('MBA54321 occurrence.rates is undefined, initializing with defaults');\n      occurrence.rates = {\n        base_rate: 0,\n        additional_animal_rate: 0,\n        applies_after: 1,\n        holiday_rate: 0,\n        holiday_days: 0,\n        additional_rates: []\n      };\n    }\n\n    return (\n      <View style={[styles.section, { marginTop: showEditControls ? 24 : 0 }]}>\n        <View style={styles.sectionHeaderContainer}>\n          <Text style={styles.sectionHeader}>Booking Breakdown</Text>\n        </View>\n        <View style={[styles.card, { paddingTop: 16 }]}>\n          <View style={styles.breakdownSection}>\n            <View style={styles.dateHeader}>\n              <View style={styles.dateTextContainer}>\n                <Text style={styles.dateText}>\n                  {formatDateTimeRangeFromUTC({\n                    startDate: occurrence.start_date,\n                    startTime: occurrence.start_time,\n                    endDate: occurrence.end_date,\n                    endTime: occurrence.end_time,\n                    userTimezone: userTimezone,\n                    includeTimes: true,\n                    includeTimezone: true\n                  })}\n                </Text>\n              </View>\n              <Text style={styles.occurrenceCost}>\n                {formatCurrency(occurrence.calculated_cost)}\n              </Text>\n              {/* Edit/Cancel Button - moved here, only one icon */}\n              {editingOccurrenceId === occurrence.occurrence_id ? (\n                <TouchableOpacity onPress={handleCancelEdit}>\n                  <MaterialCommunityIcons name=\"close\" size={20} color={theme.colors.error} />\n                </TouchableOpacity>\n              ) : (\n                showEditControls && (\n                  <TouchableOpacity onPress={() => handleEditOccurrence(occurrence)}>\n                    <MaterialCommunityIcons name=\"pencil\" size={20} color={theme.colors.mainColors.main} />\n                  </TouchableOpacity>\n                )\n              )}\n            </View>\n            \n            {/* Base Rate */}\n            <View style={styles.breakdownItem}>\n              <View style={styles.breakdownLabelContainer}>\n                <View style={styles.rateNameAmountRow}>\n                  <Text style={styles.breakdownLabel}>\n                    Base Rate ({(occurrence.unit_of_time) || \n                              (occurrence.rates && occurrence.rates.unit_of_time) || \n                              'Per Visit'})\n                  </Text>\n                  {isEditMode || editingOccurrenceId === occurrence.occurrence_id ? (\n                    <View style={styles.amountInputContainer}>\n                      <Text style={styles.currencySymbol}>$</Text>\n                                              <TextInput\n                          style={styles.rateInput}\n                          keyboardType=\"decimal-pad\"\n                          value={editingOccurrenceId === occurrence.occurrence_id ? \n                            occurrenceEdits.base_rate?.toString() || '0' : \n                            editedRates?.base_rate?.toString() || '0'}\n                          onChangeText={editingOccurrenceId === occurrence.occurrence_id ? \n                            v => handleOccurrenceInputChange('base_rate', v) : \n                            (v) => {\n                              debugLog('MBA2oinv5nd Base rate TextInput onChange called with value:', v);\n                              updateBaseRate(v);\n                            }}\n                        />\n                    </View>\n                  ) : null}\n                </View>\n                {!isEditMode && editingOccurrenceId !== occurrence.occurrence_id && (\n                  <Text style={styles.breakdownCalculation}>\n                    {occurrence.multiple || 1} × {formatCurrency(occurrence.rates?.base_rate || 0)} = {formatCurrency(occurrence.base_total || occurrence.rates?.base_rate || 0)}\n                  </Text>\n                )}\n              </View>\n              {!isEditMode && editingOccurrenceId !== occurrence.occurrence_id && (\n                <Text style={styles.breakdownAmount}>{formatCurrency(occurrence.base_total || occurrence.rates?.base_rate || 0)}</Text>\n              )}\n            </View>\n            \n            {/* Additional Animal Rate */}\n            {occurrence.rates?.additional_animal_rate && parseFloat(occurrence.rates.additional_animal_rate) > 0 && occurrence.rates?.applies_after && occurrence.rates.applies_after < (bookingData.pets?.length || 1) ? (\n              <View style={styles.breakdownItem}>\n                <View style={styles.breakdownLabelContainer}>\n                  <View style={styles.rateNameAmountRow}>\n                    <Text style={styles.breakdownLabel}>\n                      Additional Pet Rate (after {occurrence.rates?.applies_after || 1} {occurrence.rates?.applies_after !== 1 ? 'pets' : 'pet'})\n                    </Text>\n                    {isEditMode || editingOccurrenceId === occurrence.occurrence_id ? (\n                      <View style={styles.amountInputContainer}>\n                        <Text style={styles.currencySymbol}>$</Text>\n                        <TextInput\n                          style={styles.rateInput}\n                          keyboardType=\"decimal-pad\"\n                          value={(() => {\n                            const value = editingOccurrenceId === occurrence.occurrence_id ? \n                              occurrenceEdits.additional_animal_rate?.toString() || '0' : \n                              editedRates?.additional_animal_rate?.toString() || '0';\n                            debugLog('MBA2oinv5nd Additional animal rate TextInput value:', value, 'using editingMode:', editingOccurrenceId === occurrence.occurrence_id);\n                            return value;\n                          })()}\n                          onChangeText={editingOccurrenceId === occurrence.occurrence_id ? \n                            v => handleOccurrenceInputChange('additional_animal_rate', v) : \n                            (v) => {\n                              debugLog('MBA2oinv5nd Additional animal rate TextInput onChange called with value:', v);\n                              updateAdditionalAnimalRate(v);\n                            }}\n                        />\n                        <Text style={styles.inputLabel}> / pet / {(occurrence.unit_of_time) || \n                                                                (occurrence.rates && occurrence.rates.unit_of_time) || \n                                                                'Per Visit'}</Text>\n                      </View>\n                    ) : null}\n                  </View>\n                  {!isEditMode && editingOccurrenceId !== occurrence.occurrence_id && (\n                    <Text style={styles.breakdownCalculation}>\n                      {formatCurrency(occurrence.rates?.additional_animal_rate || 0)} / pet / {(occurrence.unit_of_time) || \n                                                                              (occurrence.rates && occurrence.rates.unit_of_time) || \n                                                                              'Per Visit'} × {Math.max(0, (bookingData.pets?.length || 0) - (occurrence.rates?.applies_after || 1))} additional pets = {formatCurrency(occurrence.rates?.additional_animal_rate_total || 0)}\n                    </Text>\n                  )}\n                </View>\n                {!isEditMode && editingOccurrenceId !== occurrence.occurrence_id && (\n                  <Text style={styles.breakdownAmount}>\n                    {(occurrence.rates?.applies_after && occurrence.rates.applies_after < (bookingData.pets?.length || 0)) ? '+' : ''}\n                    {(occurrence.rates?.applies_after && occurrence.rates.applies_after < (bookingData.pets?.length || 0)) \n                      ? formatCurrency(occurrence.rates?.additional_animal_rate_total || 0) \n                      : 'NA'}\n                  </Text>\n                )}\n              </View>\n            ) : null}\n            \n            {/* Holiday Rate */}\n            {occurrence.rates?.holiday_rate && occurrence.rates?.holiday_days && occurrence.rates.holiday_days > 0 ? (\n              <View style={[styles.breakdownItem, { borderBottomWidth: (occurrence.rates?.additional_rates?.length > 0 || isAddingRate) ? 1 : 0 }]}>\n                <View style={styles.breakdownLabelContainer}>\n                  <View style={styles.rateNameAmountRow}>\n                    <Text style={styles.breakdownLabel}>\n                      Holiday Rate\n                    </Text>\n                    {isEditMode || editingOccurrenceId === occurrence.occurrence_id ? (\n                      <View style={styles.amountInputContainer}>\n                        <Text style={styles.currencySymbol}>$</Text>\n                        <TextInput\n                          style={styles.rateInput}\n                          keyboardType=\"decimal-pad\"\n                          value={editingOccurrenceId === occurrence.occurrence_id ? \n                            occurrenceEdits.holiday_rate?.toString() || '0' : \n                            editedRates?.holiday_rate?.toString() || '0'}\n                          onChangeText={editingOccurrenceId === occurrence.occurrence_id ? \n                            v => handleOccurrenceInputChange('holiday_rate', v) : \n                            updateHolidayRate}\n                        />\n                        <Text style={styles.inputLabel}> × {occurrence.rates?.holiday_days || 0} {occurrence.rates?.holiday_days !== 1 ? 'holidays' : 'holiday'}</Text>\n                      </View>\n                    ) : null}\n                  </View>\n                  {!isEditMode && editingOccurrenceId !== occurrence.occurrence_id && (\n                    <Text style={styles.breakdownCalculation}>\n                      {formatCurrency(occurrence.rates?.holiday_rate || 0)} × {occurrence.rates?.holiday_days || 0} {occurrence.rates?.holiday_days !== 1 ? 'holidays' : 'holiday'}\n                    </Text>\n                  )}\n                </View>\n                {!isEditMode && editingOccurrenceId !== occurrence.occurrence_id && (\n                  <Text style={styles.breakdownAmount}>\n                    {occurrence.rates?.holiday_days ? '+' : ''}\n                    {occurrence.rates?.holiday_days ? formatCurrency(occurrence.rates?.holiday_rate_total || occurrence.rates?.holiday_rate || 0) : 'NA'}\n                  </Text>\n                )}\n              </View>\n            ) : null}\n            \n            {/* Additional Rates */}\n            {((isEditMode ? editedRates?.additional_rates : occurrence.rates?.additional_rates) || []).length > 0 ? \n              ((isEditMode ? editedRates?.additional_rates : occurrence.rates?.additional_rates) || []).map((rate, index) => (\n                <View key={index} style={styles.breakdownItem}>\n                  <View style={styles.breakdownLabelContainer}>\n                    {isEditMode || editingOccurrenceId === occurrence.occurrence_id ? (\n                      width < 600 ? (\n                        // Mobile layout - stacked with trash icon on the right\n                        <View style={{ width: '100%' }}>\n                          <View style={{ flexDirection: 'row', alignItems: 'center', justifyContent: 'space-between' }}>\n                            {/* Debug log for rate name */}\n                            {debugLog(`MBA66778 Rendering rate at index ${index}:`, {\n                              isEditMode,\n                              editingOccurrenceId: editingOccurrenceId,\n                              occurrenceId: occurrence.occurrence_id,\n                              rateName: rate.name || rate.title,\n                              rateAmount: rate.amount,\n                              occurrenceEditsRate: occurrenceEdits.additional_rates?.[index],\n                              valueToShow: editingOccurrenceId === occurrence.occurrence_id ? \n                                (occurrenceEdits.additional_rates && occurrenceEdits.additional_rates[index]?.amount?.toString()) || '0' : \n                                rate.amount?.toString() || '0'\n                            })}\n                            <TextInput\n                              style={[styles.nameInput, { flex: 1, marginRight: 8 }]}\n                              value={getAdditionalRateValue(occurrence, index, 'name')}\n                              onChangeText={(value) => editingOccurrenceId === occurrence.occurrence_id ? \n                                handleAdditionalRateChange(index, 'name', value) : \n                                updateAdditionalRate(index, 'name', value)}\n                              placeholder=\"Rate Name\"\n                            />\n                            <TouchableOpacity \n                              style={styles.deleteButton} \n                              onPress={() => editingOccurrenceId === occurrence.occurrence_id ? \n                                deleteRateForOccurrence(occurrence, index) : \n                                deleteAdditionalRate(index)}\n                            >\n                              <MaterialCommunityIcons \n                                name=\"trash-can-outline\" \n                                size={22} \n                                color={theme.colors.error} \n                              />\n                            </TouchableOpacity>\n                          </View>\n                          <View style={{ marginTop: 8 }}>\n                            <View style={{ flexDirection: 'row', alignItems: 'center' }}>\n                              <Text style={{ marginRight: 8 }}>Amount: $</Text>\n                              <TextInput\n                                style={{ \n                                  width: 80, \n                                  borderWidth: 1,\n                                  borderColor: theme.colors.border,\n                                  borderRadius: 4,\n                                  padding: 8\n                                }}\n                                keyboardType=\"decimal-pad\"\n                                value={getAdditionalRateValue(occurrence, index, 'amount') === '' ? '' : \n                                      getAdditionalRateValue(occurrence, index, 'amount').toString()}\n                                onChangeText={(value) => editingOccurrenceId === occurrence.occurrence_id ? \n                                  handleAdditionalRateChange(index, 'amount', value) : \n                                  updateAdditionalRate(index, 'amount', value)}\n                              />\n                            </View>\n                          </View>\n                        </View>\n                      ) : (\n                        // Desktop layout - side by side\n                        <View style={styles.editableAdditionalRateRow}>\n                          <View style={styles.rateNameAmountRowWithDelete}>\n                            <TextInput\n                              style={styles.nameInput}\n                              value={getAdditionalRateValue(occurrence, index, 'name')}\n                              onChangeText={(value) => editingOccurrenceId === occurrence.occurrence_id ? \n                                handleAdditionalRateChange(index, 'name', value) : \n                                updateAdditionalRate(index, 'name', value)}\n                              placeholder=\"Rate Name\"\n                            />\n                            <View style={styles.amountInputContainer}>\n                              <Text style={styles.currencySymbol}>$</Text>\n                              <TextInput\n                                style={styles.rateInput}\n                                keyboardType=\"decimal-pad\"\n                                value={getAdditionalRateValue(occurrence, index, 'amount') === '' ? '' : \n                                      getAdditionalRateValue(occurrence, index, 'amount').toString()}\n                                onChangeText={(value) => editingOccurrenceId === occurrence.occurrence_id ? \n                                  handleAdditionalRateChange(index, 'amount', value) : \n                                  updateAdditionalRate(index, 'amount', value)}\n                              />\n                            </View>\n                          </View>\n                          <TouchableOpacity \n                            style={styles.deleteButton} \n                            onPress={() => editingOccurrenceId === occurrence.occurrence_id ? \n                              deleteRateForOccurrence(occurrence, index) : \n                              deleteAdditionalRate(index)}\n                          >\n                            <MaterialCommunityIcons \n                              name=\"trash-can-outline\" \n                              size={22} \n                              color={theme.colors.error} \n                            />\n                          </TouchableOpacity>\n                        </View>\n                      )\n                    ) : (\n                      <>\n                        <Text style={styles.breakdownLabel}>{rate.name || rate.title}</Text>\n                        <Text style={styles.breakdownCalculation}>{rate.description || \"Additional Rate\"}</Text>\n                      </>\n                    )}\n                  </View>\n                  {!isEditMode && editingOccurrenceId !== occurrence.occurrence_id && (\n                    <Text style={styles.breakdownAmount}>+{formatCurrency(rate.amount)}</Text>\n                  )}\n                </View>\n              ))\n            : null}\n            \n            {/* Add New Rate Form */}\n            {isAddingRate ? (\n              <View>\n                <View style={styles.addRateContainer}>\n                  <View style={styles.formDivider} />\n                  \n                  {width < 600 ? (\n                    // Mobile layout - stacked\n                    <View>\n                      <TextInput\n                        style={[styles.nameInput, { marginRight: 0, marginBottom: 12 }]}\n                        value={newRate.name}\n                        onChangeText={(text) => setNewRate(prev => ({ ...prev, name: text }))}\n                        placeholder=\"Rate Name\"\n                        placeholderTextColor={theme.colors.placeHolderText}\n                      />\n                      <View style={[styles.amountInputContainer, { marginBottom: 12 }]}>\n                        <Text style={styles.currencySymbol}>$</Text>\n                        <TextInput\n                          style={styles.rateInput}\n                          keyboardType=\"decimal-pad\"\n                          value={newRate.amount}\n                          onChangeText={handleNewRateAmountChange}\n                          placeholder=\"0.00\"\n                          placeholderTextColor={theme.colors.placeHolderText}\n                        />\n                      </View>\n                      <TextInput\n                        style={styles.descriptionInput}\n                        value={newRate.description}\n                        onChangeText={(text) => setNewRate(prev => ({ ...prev, description: text }))}\n                        placeholder=\"Description (optional)\"\n                        placeholderTextColor={theme.colors.placeHolderText}\n                      />\n                    </View>\n                  ) : (\n                    // Desktop layout - side by side\n                    <>\n                      <View style={styles.rateNameAmountRow}>\n                        <TextInput\n                          style={styles.nameInput}\n                          value={newRate.name}\n                          onChangeText={(text) => setNewRate(prev => ({ ...prev, name: text }))}\n                          placeholder=\"Rate Name\"\n                          placeholderTextColor={theme.colors.placeHolderText}\n                        />\n                        <View style={styles.amountInputContainer}>\n                          <Text style={styles.currencySymbol}>$</Text>\n                          <TextInput\n                            style={styles.rateInput}\n                            keyboardType=\"decimal-pad\"\n                            value={newRate.amount}\n                            onChangeText={handleNewRateAmountChange}\n                            placeholder=\"0.00\"\n                            placeholderTextColor={theme.colors.placeHolderText}\n                          />\n                        </View>\n                      </View>\n                      \n                      <TextInput\n                        style={styles.descriptionInput}\n                        value={newRate.description}\n                        onChangeText={(text) => setNewRate(prev => ({ ...prev, description: text }))}\n                        placeholder=\"Description (optional)\"\n                        placeholderTextColor={theme.colors.placeHolderText}\n                      />\n                    </>\n                  )}\n                  \n                  <View style={styles.formDivider} />\n                </View>\n                <View style={styles.buttonsContainer}>\n                  <TouchableOpacity style={styles.cancelButton} onPress={toggleAddRate}>\n                    <Text style={styles.cancelButtonText}>Cancel</Text>\n                  </TouchableOpacity>\n                  <TouchableOpacity style={styles.saveButton} onPress={saveNewRate}>\n                    <Text style={styles.saveButtonText}>Save New Rate</Text>\n                  </TouchableOpacity>\n                </View>\n              </View>\n            ) : null}\n            \n            {/* Add buttons for edit mode on single occurrence bookings */}\n            {isEditMode && !isAddingRate && (\n              <View style={styles.buttonsContainer}>\n                <TouchableOpacity style={styles.cancelButton} onPress={toggleAddRate}>\n                  <Text style={styles.cancelButtonText}>+ Add Rate</Text>\n                </TouchableOpacity>\n                <TouchableOpacity style={styles.saveButton} onPress={saveRateChanges}>\n                  <Text style={styles.saveButtonText}>Save Changes</Text>\n                </TouchableOpacity>\n              </View>\n            )}\n          </View>\n        </View>\n      </View>\n    );\n  };\n\n  const renderTotalAmount = () => {\n    debugLog('MBA54321 Rendering total amount with data:', bookingData?.cost_summary);\n    \n    // Create default cost summary in case it's missing\n    const defaultCostSummary = {\n      subtotal: 0,\n      client_platform_fee: 0,\n      pro_platform_fee: 0,\n      taxes: 0,\n      tax_state: '',\n      total_client_cost: 0,\n      total_sitter_payout: 0,\n      pro_subscription_plan: 0\n    };\n    \n    // Use the actual cost summary or our default\n    const costSummary = bookingData?.cost_summary || defaultCostSummary;\n\n    return (\n      <View style={styles.section}>\n        <Text style={styles.sectionHeader}>Cost Summary</Text>\n        <View style={[styles.card, { paddingTop: 16 }]}>\n          <View style={styles.subtotalRow}>\n            <Text style={styles.subtotalLabel}>Subtotal</Text>\n            <Text style={styles.subtotalAmount}>{formatCurrency(costSummary.subtotal)}</Text>\n          </View>\n          \n          {/* Platform Fee */}\n          <View style={styles.feeRow}>\n            <Text style={styles.feeLabel}>Service Fee</Text>\n            <Text style={styles.feeAmount}>{formatCurrency(costSummary.client_platform_fee)}</Text>\n          </View>\n          \n          {/* Taxes */}\n          <View style={styles.feeRow}>\n            <Text style={styles.feeLabel}>{costSummary.tax_state}{costSummary.tax_state ? ' - ' : ''}Taxes</Text>\n            <Text style={styles.feeAmount}>{formatCurrency(costSummary.taxes)}</Text>\n          </View>\n\n          {/* Total Owner Cost */}\n          <View style={[styles.totalAmountContainer, { paddingBottom: isProfessional ? 16 : 0, marginBottom: isProfessional ? 16 : 0 }]}>\n            <Text style={styles.totalLabel}>Total Owner Cost</Text>\n            <Text style={styles.totalAmount}>{formatCurrency(costSummary.total_client_cost)}</Text>\n          </View>\n\n          {/* Divider */}\n          {isProfessional ? <View style={styles.divider} /> : null}\n\n          {/* Professional Payout - Only show when isProfessional is true */}\n          {isProfessional ? (\n            <View style={styles.payoutContainer}>\n              <Text style={styles.payoutLabel}>Professional Payout</Text>\n              <Text style={styles.payoutAmount}>{formatCurrency(costSummary.total_sitter_payout)}</Text>\n              <Text style={styles.payoutBreakdown}>\n                (Subtotal {formatCurrency(costSummary.subtotal)} - Service Fee {formatCurrency(costSummary.pro_platform_fee)})\n              </Text>\n              {costSummary.pro_platform_fee === 0 ? (\n                <Text style={styles.badge}>{costSummary.pro_subscription_plan === 0 ? 'Free Tier - ' \n                  : costSummary.pro_subscription_plan === 1 ? 'Beta Tier - ' \n                  : costSummary.pro_subscription_plan === 2 ? 'Commission Tier - ' \n                  : costSummary.pro_subscription_plan === 3 ? 'Pro Subscription - ' \n                  : costSummary.pro_subscription_plan === 4 ? 'Pro Subscription - ' \n                  :  costSummary.pro_subscription_plan === 5 ? 'Client Subscription - ' \n                  : ''} Saved {formatCurrency(costSummary.subtotal * 0.15)}</Text>\n              ) : null}\n            </View>\n          ) : null}\n        </View>\n      </View>\n    );\n  };\n\n\n\n  const renderTermsCheckbox = () => {\n    // Determine if checkbox should be checked:\n    // - If client has previously agreed (currentTosStatus === true), show as checked\n    // - If client hasn't agreed yet (currentTosStatus === false), use local termsAgreed state  \n    // - If this is a new booking (currentTosStatus === undefined), use local termsAgreed state\n    const isChecked = currentTosStatus === true || (currentTosStatus !== true && termsAgreed);\n    const hasAgreedTos = currentTosStatus === true;\n    \n    // Debug checkbox state\n    debugLog('MBA54321: Checkbox state calculation:', {\n      currentTosStatus,\n      termsAgreed,\n      isChecked,\n      hasAgreedTos,\n      fromApprovalModal\n    });\n    \n    // If already agreed, show different text\n    if (hasAgreedTos) {\n      return (\n        <View style={styles.termsContainer}>\n          <View style={styles.checkboxContainer}>\n            <View style={[styles.checkbox, styles.checkboxChecked]}>\n              <MaterialCommunityIcons name=\"check\" size={16} color=\"white\" />\n            </View>\n            <Text style={styles.termsText}>\n              <Text style={styles.termsAgreedText}>TERMS AGREED</Text> -{' '}\n              <Text \n                style={styles.termsLink}\n                onPress={() => setShowTermsModal(true)}\n              >\n                view terms of service\n              </Text>\n            </Text>\n          </View>\n        </View>\n      );\n    }\n    \n    return (\n      <View style={styles.termsContainer}>\n        <TouchableOpacity \n          style={styles.checkboxContainer}\n          onPress={() => {\n            // Allow toggling if this is a new booking (undefined) or if client hasn't agreed yet (false)\n            if (currentTosStatus !== true) {\n              const newValue = !termsAgreed;\n              setTermsAgreed(newValue);\n              if (onTermsAgreed) {\n                onTermsAgreed(newValue);\n              }\n              // Notify parent of TOS agreement change\n              if (onTosAgreementChange) {\n                debugLog('MBA54321: Notifying parent of TOS agreement change:', {\n                  newValue,\n                  isProfessional,\n                  fromApprovalModal,\n                  currentTosStatus\n                });\n                onTosAgreementChange(newValue);\n              }\n            }\n          }}\n        >\n          <View style={[styles.checkbox, isChecked && styles.checkboxChecked]}>\n            {isChecked && (\n              <MaterialCommunityIcons name=\"check\" size={16} color=\"white\" />\n            )}\n          </View>\n          <Text style={styles.termsText}>\n            I agree to the{' '}\n            <Text \n              style={styles.termsLink}\n              onPress={() => setShowTermsModal(true)}\n            >\n              terms of service\n            </Text>\n            {' '}for this booking\n          </Text>\n        </TouchableOpacity>\n      </View>\n    );\n  };\n\n  debugLog('MBA2394jv340 ReviewAndRatesCard main render called');\n  \n  return (\n    <>\n      <ScrollView style={styles.container} contentContainerStyle={styles.contentContainer}>\n        <ProfessionalAlert isProfessional={isProfessional} fromApprovalModal={fromApprovalModal} />\n        {renderServiceAndPets()}\n        {renderNotesForClient()}\n        {renderServiceAdditionalRates()}\n        {renderBookingBreakdown()}\n        {renderTotalAmount()}\n        {renderTermsCheckbox()}\n        \n        {/* Support CrittrCove Button */}\n        <SupportButton \n          size=\"compact\"\n          showTitle={false}\n          style={{ marginTop: 16 }}\n        />\n      </ScrollView>\n      \n      <TermsOfServiceModal\n        visible={showTermsModal}\n        onClose={() => setShowTermsModal(false)}\n      />\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n  },\n  contentContainer: {\n    padding: 16,\n  },\n  section: {\n    marginTop: 24,\n  },\n  badge: {\n    fontSize: 12,\n    color: theme.colors.whiteText,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: 'bold',\n    backgroundColor: theme.colors.mainColors.main,\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 4,\n    marginTop: 4,\n  },\n  sectionHeaderContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  sectionHeader: {\n    fontSize: 20,\n    fontFamily: theme.fonts.header.fontFamily,\n    color: theme.colors.text,\n    marginBottom: 8,\n  },\n  addRateText: {\n    color: theme.colors.mainColors.main,\n    fontSize: 14,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  card: {\n    backgroundColor: theme.colors.surfaceContrast,\n    borderRadius: 8,\n    paddingHorizontal: 16,\n    paddingBottom: 16,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  breakdownSection: {\n    width: '100%',\n  },\n  dateHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  dateTextContainer: {\n    flex: 1,\n    marginRight: 8,\n  },\n  dateText: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  breakdownItem: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  breakdownLabelContainer: {\n    flex: 1,\n    marginRight: 16,\n  },\n  breakdownLabel: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  breakdownCalculation: {\n    fontSize: 14,\n    color: theme.colors.placeHolderText,\n    marginTop: 4,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  breakdownAmount: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  totalItem: {\n    marginTop: 8,\n    paddingTop: 16,\n  },\n  // Fee and total styles\n  subtotalRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 12,\n    paddingBottom: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  subtotalLabel: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  subtotalAmount: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  feeRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 12,\n    paddingBottom: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  feeLabel: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  feeAmount: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  totalAmountContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 16,\n    paddingBottom: 16,\n  },\n  totalLabel: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  totalAmount: {\n    fontSize: 18,\n    fontWeight: '700',\n    color: theme.colors.mainColors.main,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  divider: {\n    height: 1,\n    backgroundColor: theme.colors.border,\n    marginBottom: 16,\n  },\n  payoutContainer: {\n    alignItems: 'flex-end',\n  },\n  payoutLabel: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  payoutAmount: {\n    fontSize: 18,\n    fontWeight: '700',\n    color: theme.colors.success,\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginTop: 4,\n  },\n  payoutBreakdown: {\n    fontSize: 12,\n    color: theme.colors.placeHolderText,\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginTop: 4,\n  },\n  // Input styles for editable fields\n  inputContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginTop: 4,\n  },\n  addRateContainer: {\n    padding: 16,\n    width: '100%',\n  },\n  rateNameAmountRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    width: '100%',\n    marginBottom: 12,\n  },\n  rateEditContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginTop: 8,\n  },\n  amountInputContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    minWidth: 120,\n    maxWidth: 150,\n  },\n  rateInput: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 4,\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    minWidth: 100,\n    flex: 1,\n  },\n  currencySymbol: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginRight: 4,\n    marginLeft: 2,\n  },\n  inputLabel: {\n    fontSize: 14,\n    color: theme.colors.placeHolderText,\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginLeft: 4,\n  },\n  nameInput: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 4,\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    flex: 1,\n    marginRight: 16,\n  },\n  descriptionInput: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 4,\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    width: '100%',\n  },\n  saveButton: {\n    backgroundColor: theme.colors.mainColors.main,\n    borderRadius: 4,\n    paddingVertical: 12,\n    paddingHorizontal: 20,\n    marginTop: 0,\n    marginBottom: 0,\n    marginRight: 0,\n  },\n  saveButtonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  formDivider: {\n    height: 1,\n    backgroundColor: theme.colors.border,\n    marginVertical: 12,\n    width: '100%',\n  },\n  editableAdditionalRateRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    width: '100%',\n  },\n  rateNameAmountRowWithDelete: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    flex: 1,\n    marginRight: 8,\n  },\n  deleteButton: {\n    padding: 8,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 4,\n    marginLeft: 8,\n  },\n  buttonsContainer: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    alignItems: 'center',\n    marginTop: 16,\n    marginBottom: 8,\n    marginRight: 16,\n  },\n  cancelButton: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 4,\n    paddingVertical: 12,\n    paddingHorizontal: 20,\n    marginRight: 12,\n  },\n  cancelButtonText: {\n    color: theme.colors.text,\n    fontSize: 16,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  multipleDatesContainer: {\n    marginBottom: 16,\n  },\n  occurrenceCost: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n  },\n  ratesToggleButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    padding: 8,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 4,\n  },\n  ratesToggleText: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  ratesBreakdown: {\n    padding: 16,\n  },\n  rateItem: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 8,\n  },\n  rateLabel: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  rateAmount: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n  },\n  rateDescription: {\n    fontSize: 14,\n    color: theme.colors.placeHolderText,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  occurrenceDivider: {\n    height: 1,\n    backgroundColor: theme.colors.border,\n    marginBottom: 16,\n  },\n  termsContainer: {\n    backgroundColor: theme.colors.surfaceContrast,\n    borderRadius: 8,\n    padding: 16,\n    marginTop: 16,\n  },\n  checkboxContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  checkbox: {\n    width: 20,\n    height: 20,\n    borderWidth: 2,\n    borderColor: theme.colors.border,\n    borderRadius: 4,\n    marginRight: 8,\n  },\n  checkboxChecked: {\n    backgroundColor: theme.colors.mainColors.main,\n  },\n  termsText: {\n    fontSize: 14,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    flex: 1,\n  },\n  termsLink: {\n    fontSize: 14,\n    color: theme.colors.primary,\n    fontFamily: theme.fonts.regular.fontFamily,\n    textDecorationLine: 'underline',\n  },\n  termsAgreedText: {\n    fontSize: 14,\n    color: theme.colors.mainColors.main,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: 'bold',\n  },\n  // Service Additional Rates Styles\n  additionalRatesDescription: {\n    fontSize: 14,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginBottom: 16,\n    lineHeight: 20,\n  },\n  serviceRateItem: {\n    marginBottom: 12,\n  },\n  serviceRateCheckbox: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 12,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  serviceRateInfo: {\n    flex: 1,\n    marginLeft: 12,\n  },\n  serviceRateTitle: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n    marginBottom: 2,\n  },\n  serviceRateAmount: {\n    fontSize: 16,\n    color: theme.colors.mainColors.main,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n    marginBottom: 2,\n  },\n  serviceRateDescription: {\n    fontSize: 14,\n    color: theme.colors.placeHolderText,\n    fontFamily: theme.fonts.regular.fontFamily,\n    lineHeight: 18,\n  },\n  serviceContainer: {\n    flexDirection: 'row',\n    marginBottom: 16,\n    alignItems: 'center',\n    paddingBottom: 16,\n  },\n  serviceDivider: {\n    height: 1,\n    backgroundColor: theme.colors.border,\n    marginBottom: 16,\n    width: '100%',\n  },\n  serviceLabel: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: theme.colors.text,\n    width: 80,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  serviceValue: {\n    fontSize: 16,\n    color: theme.colors.text,\n    flex: 1,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  petsContainer: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n  },\n  petsLabel: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: theme.colors.text,\n    width: 80,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  petsList: {\n    flex: 1,\n  },\n  petItem: {\n    marginBottom: 8,\n  },\n  petName: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  petType: {\n    fontSize: 14,\n    color: theme.colors.placeHolderText,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  noPets: {\n    fontSize: 16,\n    color: theme.colors.placeHolderText,\n    fontStyle: 'italic',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  notesDescription: {\n    fontSize: 18,\n    color: theme.colors.text,\n    fontWeight: 'bold',\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginBottom: 12,\n  },\n  notesTextInput: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 4,\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    width: '100%',\n    height: 100,\n    textAlignVertical: 'top',\n  },\n  notesTextInputReadOnly: {\n    backgroundColor: theme.colors.surfaceContrast,\n    color: theme.colors.text,\n    borderColor: theme.colors.surface,\n  },\n  notesSaveContainer: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    marginTop: 12,\n  },\n  notesSaveButton: {\n    backgroundColor: theme.colors.mainColors.main,\n    borderRadius: 4,\n    paddingVertical: 8,\n    paddingHorizontal: 16,\n  },\n  notesSaveButtonSaved: {\n    backgroundColor: theme.colors.success,\n  },\n  notesSaveButtonText: {\n    color: 'white',\n    fontSize: 14,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  notesSaveButtonTextSaved: {\n    color: 'white',\n  },\n});\n\nexport default ReviewAndRatesCard; ","/**\n * Capitalizes the first letter of each word in a string, with all other letters lowercase\n * @param {string} str - The string to format\n * @returns {string} - Formatted string with first letter of each word capitalized\n * \n * Examples:\n * 1. \"DOG\" -> \"Dog\"\n * 2. \"HouSE CAt\" -> \"House Cat\"\n */\nexport const capitalizeWords = (str) => {\n  if (!str) return str;\n  \n  return str\n    .split(' ')\n    .map(word => \n      word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()\n    )\n    .join(' ');\n};\n","import React from 'react';\nimport {\n  Modal,\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity\n} from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../../styles/theme';\n\nconst TosRequiredModal = ({ visible, onClose, actionType = 'booking' }) => {\n  const getModalContent = () => {\n    switch (actionType) {\n      case 'booking':\n        return {\n          title: 'Terms of Service Required',\n          message: 'You must agree to the terms of service before requesting a booking. Please scroll down and check the agreement box to continue.'\n        };\n      case 'approval':\n        return {\n          title: 'Terms of Service Required',\n          message: 'You must agree to the terms of service before approving this booking. Please scroll down and check the agreement box to continue.'\n        };\n      default:\n        return {\n          title: 'Terms of Service Required',\n          message: 'You must agree to the terms of service before continuing. Please scroll down and check the agreement box to continue.'\n        };\n    }\n  };\n\n  const content = getModalContent();\n\n  return (\n    <Modal\n      visible={visible}\n      animationType=\"fade\"\n      onRequestClose={onClose}\n      transparent={true}\n    >\n      <View style={styles.termsModalOverlay}>\n        <View style={styles.termsModalContent}>\n          <View style={styles.termsModalHeader}>\n            <MaterialCommunityIcons name=\"alert-circle\" size={24} color={theme.colors.error} />\n            <Text style={styles.termsModalTitle}>{content.title}</Text>\n          </View>\n          <Text style={styles.termsModalText}>\n            {content.message}\n          </Text>\n          <TouchableOpacity\n            style={styles.termsModalButton}\n            onPress={onClose}\n          >\n            <Text style={styles.termsModalButtonText}>OK</Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  termsModalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  termsModalContent: {\n    backgroundColor: theme.colors.background,\n    borderRadius: 12,\n    padding: 24,\n    maxWidth: 400,\n    width: '100%',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 8,\n    elevation: 5,\n  },\n  termsModalHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  termsModalTitle: {\n    fontSize: 18,\n    fontFamily: theme.fonts.header.fontFamily,\n    color: theme.colors.text,\n    marginLeft: 8,\n    flex: 1,\n  },\n  termsModalText: {\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n    color: theme.colors.text,\n    lineHeight: 22,\n    marginBottom: 24,\n  },\n  termsModalButton: {\n    backgroundColor: theme.colors.mainColors.main,\n    borderRadius: 8,\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    alignItems: 'center',\n  },\n  termsModalButtonText: {\n    color: 'white',\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n  },\n});\n\nexport default TosRequiredModal; ","import React, { useState, useEffect, useContext, useRef } from 'react';\nimport {\n  Modal,\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  ScrollView,\n  SafeAreaView,\n  ActivityIndicator,\n  TextInput,\n  Dimensions,\n  Platform\n} from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { AuthContext, debugLog } from '../context/AuthContext';\nimport ReviewAndRatesCard from './bookingComponents/ReviewAndRatesCard';\nimport TosRequiredModal from './modals/TosRequiredModal';\nimport { getBookingDetails, approveBooking, requestBookingChanges } from '../api/API';\nimport { capitalizeWords } from '../utils/formatStrings';\nimport ProfessionalAlert from './common/ProfessionalAlert';\n\nconst BookingApprovalModal = ({ \n  visible, \n  onClose, \n  bookingId,\n  onApproveSuccess,\n  onApproveError,\n  onRequestChangesSuccess,\n  onRequestChangesError,\n  initialData = null,\n  isProfessional = true,\n  modalTitle = \"Booking Approval Request\",\n  hideButtons = false,\n  isReadOnly = false\n}) => {\n  const { screenWidth } = useContext(AuthContext);\n  const isDesktop = screenWidth > 768;\n  \n  // Create a safe default initial data structure if initialData is null\n  const defaultInitialData = initialData || {\n    booking_id: bookingId,\n    service_type: 'Loading...',\n    pets: [],\n    occurrences: [],\n    cost_summary: {\n      subtotal: 0,\n      client_platform_fee: 0,\n      pro_platform_fee: 0,\n      taxes: 0,\n      tax_state: '',\n      total_client_cost: 0,\n      total_sitter_payout: 0,\n      pro_subscription_plan: 0\n    }\n  };\n  \n  const [bookingData, setBookingData] = useState(defaultInitialData);\n  const [loading, setLoading] = useState(false);\n  const [loadingText, setLoadingText] = useState(\"Loading booking details...\");\n  const [error, setError] = useState(null);\n  const [changeRequestMessage, setChangeRequestMessage] = useState('');\n  const [showChangeRequestInput, setShowChangeRequestInput] = useState(false);\n  const [userTosAgreed, setUserTosAgreed] = useState(false);\n  const [showTosRequiredModal, setShowTosRequiredModal] = useState(false);\n  \n  // Use a ref to store a cached copy of the booking data that won't be affected by re-renders\n  const bookingDataRef = useRef(defaultInitialData);\n  // Flag to track if data has been fully loaded\n  const dataLoadedRef = useRef(false);\n\n  useEffect(() => {\n    if (visible && bookingId) {\n      fetchBookingDetails();\n    }\n  }, [visible, bookingId]);\n\n  // Update modal title based on mode\n  const getModalTitle = () => {\n    // Removed excessive debug logging for performance\n    \n    if (isReadOnly) {\n      return \"Booking Details\";\n    }\n    \n    // Keep the provided modal title\n    return modalTitle;\n  };\n\n  // Update bookingData when initialData changes\n  useEffect(() => {\n    if (initialData && !dataLoadedRef.current) {\n      // Removed excessive debug logging for performance\n      setBookingData(initialData);\n      bookingDataRef.current = initialData;\n    }\n  }, [initialData]);\n\n  // Add this useEffect to detect when a websocket update or unread count changes might occur\n  // and protect the bookingData from being affected\n  useEffect(() => {\n    // This sets a regular interval to check if bookingData is still intact\n    const dataProtectionInterval = setInterval(() => {\n      if (visible && dataLoadedRef.current) {\n        // Check if booking data has been unexpectedly cleared\n        const hasNoData = !bookingData || \n                         !bookingData.occurrences || \n                         bookingData.occurrences.length === 0;\n                         \n        const hasRefData = bookingDataRef.current && \n                          bookingDataRef.current.occurrences && \n                          bookingDataRef.current.occurrences.length > 0;\n        \n        if (hasNoData && hasRefData) {\n          debugLog('MBAio3htg5uohg: Detected that bookingData was cleared unexpectedly, restoring from cache');\n          setBookingData({...bookingDataRef.current});\n        }\n      }\n    }, 1000); // Check every second\n    \n    return () => {\n      // Clean up interval on unmount\n      clearInterval(dataProtectionInterval);\n    };\n  }, [visible, bookingData]);\n\n  const fetchBookingDetails = async () => {\n    if (!bookingId) return;\n    \n    try {\n      setLoading(true);\n      setError(null);\n      setLoadingText(\"Loading booking details...\");\n      \n      debugLog('MBAio3htg5uohg: Fetching booking details for ID:', bookingId);\n      const response = await getBookingDetails(bookingId);\n      \n      debugLog('MBAio3htg5uohg: Booking details fetched:', response);\n      \n      // Ensure the response has the expected structure\n      const safeResponse = {\n        ...response,\n        occurrences: response.occurrences || [],\n        pets: response.pets || [],\n        cost_summary: response.cost_summary || {\n          subtotal: 0,\n          client_platform_fee: 0,\n          pro_platform_fee: 0,\n          taxes: 0,\n          tax_state: '',\n          total_client_cost: 0,\n          total_sitter_payout: 0,\n          pro_subscription_plan: 0\n        },\n        service_type: response.service_type || 'N/A'\n      };\n      \n      // Make sure we have at least one occurrence with required fields\n      if (safeResponse.occurrences.length === 0) {\n        safeResponse.occurrences = [{\n          occurrence_id: '0',\n          start_date: new Date().toISOString().split('T')[0],\n          end_date: new Date().toISOString().split('T')[0],\n          start_time: '09:00',\n          end_time: '17:00',\n          unit_of_time: 'visit',\n          multiple: 1,\n          base_total: 0,\n          rates: {\n            base_rate: 0,\n            additional_animal_rate: 0,\n            applies_after: 1,\n            holiday_rate: 0,\n            holiday_days: 0,\n            additional_rates: []\n          }\n        }];\n      } else {\n        // Ensure each occurrence has a rates object and that unit_of_time is preserved\n        safeResponse.occurrences = safeResponse.occurrences.map(occ => {\n          // Log detailed info about each occurrence for debugging\n          debugLog('MBAio3htg5uohg: Processing occurrence:', {\n            id: occ.occurrence_id,\n            unit_of_time: occ.unit_of_time,\n            multiple: occ.multiple\n          });\n          \n          return {\n            ...occ,\n            unit_of_time: occ.unit_of_time || 'visit',\n            multiple: parseFloat(occ.multiple) || 1,\n            base_total: occ.base_total || 0,\n            rates: occ.rates || {\n              base_rate: 0,\n              additional_animal_rate: 0,\n              applies_after: 1,\n              holiday_rate: 0,\n              holiday_days: 0,\n              additional_rates: []\n            }\n          };\n        });\n      }\n      \n      // Store the processed response both in state and ref\n      setBookingData(safeResponse);\n      bookingDataRef.current = safeResponse;\n      dataLoadedRef.current = true;\n      \n      debugLog('MBAio3htg5uohg: Booking data processed and stored');\n    } catch (err) {\n      debugLog('MBAio3htg5uohg: Error fetching booking details:', err);\n      setError('Failed to load booking details. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  // Add a safety effect that restores booking data from ref if it's cleared unexpectedly\n  useEffect(() => {\n    // Only run this check if we have actually loaded data before\n    if (dataLoadedRef.current) {\n      // Check if booking data was cleared but we have a cache in the ref\n      const hasNoData = !bookingData || !bookingData.occurrences || bookingData.occurrences.length === 0;\n      const hasRefData = bookingDataRef.current && bookingDataRef.current.occurrences && bookingDataRef.current.occurrences.length > 0;\n      \n      if (hasNoData && hasRefData) {\n        debugLog('MBAio3htg5uohg: Booking data was cleared unexpectedly, restoring from cache');\n        setBookingData(bookingDataRef.current);\n      }\n    }\n  }, [bookingData]);\n\n  const handleApprove = async () => {\n    // Check TOS agreement before proceeding\n    const existingTosAgreed = isProfessional ? bookingData?.pro_agreed_tos : bookingData?.client_agreed_tos;\n    const currentTosAgreed = existingTosAgreed || userTosAgreed;\n    \n    debugLog('MBA4321: TOS check for approval:', {\n      isProfessional,\n      existingTosAgreed,\n      userTosAgreed,\n      currentTosAgreed\n    });\n    \n    if (!currentTosAgreed) {\n      setShowTosRequiredModal(true);\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      setLoadingText(\"Approving booking...\");\n      setError(null);\n      \n      // Determine TOS value to send based on user type and current status\n      let tosValueToSend = false;\n      if (!isProfessional) {\n        // For clients, send true if they have agreed to TOS (either previously or in this session)\n        const clientHasAgreedTos = bookingData?.client_agreed_tos || userTosAgreed;\n        tosValueToSend = clientHasAgreedTos;\n        \n        debugLog('MBA4321: Client TOS agreement for approval:', {\n          bookingDataClientAgreedTos: bookingData?.client_agreed_tos,\n          userTosAgreed,\n          clientHasAgreedTos,\n          tosValueToSend\n        });\n      }\n      \n      // Call approve booking with TOS agreement if needed\n      const response = await approveBooking(bookingId, tosValueToSend);\n      \n      if (onApproveSuccess) {\n        onApproveSuccess(response);\n      }\n      \n      onClose();\n    } catch (err) {\n      debugLog('MBA77788 Error approving booking:', err);\n      setError('Failed to approve booking. Please try again.');\n      \n      if (onApproveError) {\n        onApproveError(err.response?.data?.error || 'Failed to approve booking');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleShowChangeRequest = () => {\n    setShowChangeRequestInput(true);\n  };\n\n  const handleCancelChangeRequest = () => {\n    setShowChangeRequestInput(false);\n    setChangeRequestMessage('');\n  };\n\n  const handleSubmitChangeRequest = async () => {\n    if (!changeRequestMessage.trim()) {\n      setError('Please provide details about your requested changes.');\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      setLoadingText(\"Submitting change request...\");\n      setError(null);\n      \n      const response = await requestBookingChanges(bookingId, changeRequestMessage);\n      \n      if (onRequestChangesSuccess) {\n        debugLog('MBA77788 Notifying parent of successful change request submission');\n        onRequestChangesSuccess(response);\n      }\n      \n      onClose();\n    } catch (err) {\n      debugLog('MBA77788 Error requesting booking changes:', err);\n      setError('Failed to submit change request. Please try again.');\n      \n      if (onRequestChangesError) {\n        onRequestChangesError(err.response?.data?.error || 'Failed to submit change request');\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle modal close\n  const handleClose = () => {\n    setShowChangeRequestInput(false);\n    setChangeRequestMessage('');\n    onClose();\n  };\n\n  // Main content of the modal\n  const renderContent = () => {\n    if (loading) {\n      return (\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color={theme.colors.primary} />\n          <Text style={styles.loadingText}>{loadingText}</Text>\n        </View>\n      );\n    }\n\n    if (error) {\n      return (\n        <View style={styles.errorContainer}>\n          <MaterialCommunityIcons name=\"alert-circle\" size={48} color={theme.colors.error} />\n          <Text style={styles.errorText}>{error}</Text>\n          <TouchableOpacity style={styles.retryButton} onPress={fetchBookingDetails}>\n            <Text style={styles.retryButtonText}>Retry</Text>\n          </TouchableOpacity>\n        </View>\n      );\n    }\n\n    if (!bookingData) {\n      return (\n        <View style={styles.emptyContainer}>\n          <Text style={styles.emptyText}>No booking data available</Text>\n        </View>\n      );\n    }\n\n    return (\n      <>\n        <ProfessionalAlert isProfessional={isProfessional} fromApprovalModal={false} />\n        \n        {/* ReviewAndRatesCard for booking details */}\n        {bookingData && (\n          <ReviewAndRatesCard \n            bookingData={bookingData} \n            bookingId={bookingId}\n            onRatesUpdate={(updatedData) => setBookingData(updatedData)}\n            showEditControls={false}\n            isProfessional={isProfessional}\n            fromApprovalModal={true}\n            onTosAgreementChange={setUserTosAgreed}\n          />\n        )}\n      </>\n    );\n  };\n\n  // Render change request input\n  const renderChangeRequestInput = () => {\n    return (\n      <View style={styles.changeRequestContainer}>\n        <TextInput\n          style={styles.changeRequestInput}\n          placeholder=\"Enter details about your requested changes...\"\n          value={changeRequestMessage}\n          onChangeText={setChangeRequestMessage}\n          multiline={true}\n          numberOfLines={3}\n          placeholderTextColor={theme.colors.placeHolderText}\n        />\n        <View style={styles.buttonWrapper}>\n          <View style={styles.changeRequestButtons}>\n            <TouchableOpacity\n              style={styles.cancelRequestButton}\n              onPress={handleCancelChangeRequest}\n            >\n              <Text style={styles.cancelRequestButtonText}>Cancel</Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n              style={styles.submitRequestButton}\n              onPress={handleSubmitChangeRequest}\n              disabled={!changeRequestMessage.trim()}\n            >\n              <Text style={styles.submitRequestButtonText}>Request Changes</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </View>\n    );\n  };\n\n  // Footer with action buttons\n  const renderFooter = () => {\n    // Removed excessive debug logging for performance\n    \n    // Don't render any footer if the buttons should be hidden\n    if (hideButtons) {\n      return null;\n    }\n    \n    // Read-only mode for confirmed bookings - just show a close button\n    if (isReadOnly) {\n      return (\n        <View style={styles.footerContainer}>\n          <TouchableOpacity\n            style={[styles.button, styles.closeButton]}\n            onPress={handleClose}\n          >\n            <Text style={styles.buttonText}>Close</Text>\n          </TouchableOpacity>\n        </View>\n      );\n    }\n    \n    // Show change request input or default buttons\n    if (showChangeRequestInput) {\n      return null; // Don't render footer when change request input is shown\n    }\n    \n    if (isProfessional) {\n      // Professional only gets Close button\n      return (\n        <View style={styles.footerContainer}>\n          <TouchableOpacity\n            style={[styles.button, styles.closeButton]}\n            onPress={handleClose}\n          >\n            <Text style={styles.buttonText}>Close</Text>\n          </TouchableOpacity>\n        </View>\n      );\n    } else {\n      // For booking updates or regular approvals, show all action buttons\n      const isBookingUpdate = modalTitle === \"Booking Update\";\n      \n      // Client gets two or three buttons: Close, Approve, Request Changes\n      return (\n        <View style={styles.footerContainer}>\n          <TouchableOpacity\n            style={[styles.button, styles.closeButton]}\n            onPress={handleClose}\n          >\n            <Text style={styles.buttonText}>Close</Text>\n          </TouchableOpacity>\n          \n          <TouchableOpacity\n            style={[styles.button, styles.changeButton]}\n            onPress={handleShowChangeRequest}\n          >\n            <Text style={styles.buttonText}>Request Changes</Text>\n          </TouchableOpacity>\n          \n          <TouchableOpacity\n            style={[styles.button, styles.approveButton]}\n            onPress={handleApprove}\n          >\n            <Text style={styles.approveText}>\n              {isBookingUpdate ? \"Approve Update\" : \"Approve\"}\n            </Text>\n          </TouchableOpacity>\n        </View>\n      );\n    }\n  };\n\n  return (\n    <Modal\n      visible={visible}\n      transparent={true}\n      animationType=\"slide\"\n      onRequestClose={handleClose}\n    >\n      <SafeAreaView style={styles.safeArea}>\n        <View style={[\n          styles.container, \n          isDesktop ? styles.desktopContainer : {},\n          showChangeRequestInput ? styles.shortenedContainer : {}\n        ]}>\n          {/* Header with customizable title */}\n          <View style={styles.header}>\n            <Text style={styles.title}>{getModalTitle()}</Text>\n            <TouchableOpacity style={styles.closeButton} onPress={handleClose}>\n              <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.text} />\n            </TouchableOpacity>\n          </View>\n          \n          {/* Content */}\n          {showChangeRequestInput ? (\n            // Render change request input as direct content\n            renderChangeRequestInput()\n          ) : (\n            // Render scrollable booking details\n            <ScrollView style={styles.scrollContainer} contentContainerStyle={styles.scrollContent}>\n              {renderContent()}\n            </ScrollView>\n          )}\n          \n          {/* Footer with action buttons - only shown when not in change request mode */}\n          {!showChangeRequestInput && renderFooter()}\n        </View>\n      </SafeAreaView>\n      \n      <TosRequiredModal\n        visible={showTosRequiredModal}\n        onClose={() => setShowTosRequiredModal(false)}\n        actionType=\"approval\"\n      />\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n  },\n  container: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n    margin: Platform.OS === 'web' ? 0 : 24,\n    borderRadius: 12,\n    overflow: 'hidden',\n  },\n  desktopContainer: {\n    maxWidth: 800,\n    maxHeight: '90%',\n    alignSelf: 'center',\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n    backgroundColor: theme.colors.surface,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  closeButton: {\n    padding: 8,\n  },\n  scrollContainer: {\n    flex: 1,\n  },\n  scrollContent: {\n    padding: 16,\n    paddingBottom: 32,\n  },\n  footerContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    padding: 16,\n    borderTopWidth: 1,\n    borderTopColor: theme.colors.border,\n    backgroundColor: theme.colors.surface,\n  },\n  button: {\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n    alignItems: 'center',\n    justifyContent: 'center',\n    flex: 1,\n    marginRight: 8,\n  },\n  buttonText: {\n    color: theme.colors.primary,\n    fontSize: 16,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  approveButton: {\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    backgroundColor: theme.colors.primary,\n    alignItems: 'center',\n    justifyContent: 'center',\n    flex: 1,\n    marginLeft: 8,\n  },\n  approveText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 24,\n  },\n  loadingText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  errorContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 24,\n  },\n  errorText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: theme.colors.error,\n    textAlign: 'center',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  retryButton: {\n    marginTop: 16,\n    paddingVertical: 8,\n    paddingHorizontal: 16,\n    backgroundColor: theme.colors.primary,\n    borderRadius: 8,\n  },\n  retryButtonText: {\n    color: 'white',\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 24,\n  },\n  emptyText: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  // Service and Pets section styles\n  section: {\n    marginTop: 24,\n    marginHorizontal: 16,\n  },\n  sectionHeader: {\n    fontSize: 20,\n    // fontWeight: 'bold',\n    marginBottom: 8,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  card: {\n    backgroundColor: theme.colors.surfaceContrast,\n    borderRadius: 8,\n    padding: 16,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  // Change request styles\n  changeRequestContainer: {\n    padding: 16,\n  },\n  changeRequestInput: {\n    backgroundColor: theme.colors.background,\n    borderColor: theme.colors.border,\n    borderWidth: 1,\n    borderRadius: 8,\n    padding: 12,\n    fontSize: 16,\n    color: theme.colors.text,\n    minHeight: 120,\n    textAlignVertical: 'top',\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginBottom: 16,\n  },\n  buttonWrapper: {\n    alignItems: 'center',\n    width: '100%',\n  },\n  changeRequestButtons: {\n    flexDirection: 'row',\n    width: 300,\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginTop: 16,\n  },\n  cancelRequestButton: {\n    width: 140,\n    height: 45,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.border || '#E0E0E0',\n    borderRadius: 8,\n    backgroundColor: 'white',\n  },\n  cancelRequestButtonText: {\n    color: theme.colors.text || '#333333',\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  submitRequestButton: {\n    width: 140,\n    height: 45,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: theme.colors.olive || '#707855',\n    borderRadius: 8,\n  },\n  submitRequestButtonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: 'bold',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  changeButton: {\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n    alignItems: 'center',\n    justifyContent: 'center',\n    flex: 1,\n    marginLeft: 8,\n  },\n  shortenedContainer: {\n    flex: 0,\n    backgroundColor: theme.colors.background,\n    margin: Platform.OS === 'web' ? 0 : 24,\n    borderRadius: 12,\n    overflow: 'hidden',\n    alignSelf: 'center',\n    width: '90%',\n    maxWidth: 500,\n    minHeight: 320,\n  },\n});\n\nexport default BookingApprovalModal; ","import React, { useContext, useState, useEffect, useCallback } from 'react';\nimport { View, ScrollView, StyleSheet, Platform, SafeAreaView, Dimensions, StatusBar, TouchableOpacity, Text } from 'react-native';\nimport { Card, Title, Paragraph, List, Button, useTheme, Appbar, ActivityIndicator, Avatar } from 'react-native-paper';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { useFocusEffect } from '@react-navigation/native';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport { API_BASE_URL } from '../config/config';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { AuthContext, debugLog } from '../context/AuthContext';\nimport { TutorialContext } from '../context/TutorialContext';\nimport CrossPlatformView from '../components/CrossPlatformView';\nimport { theme } from '../styles/theme';\nimport { navigateToFrom } from '../components/Navigation';\nimport ProfessionalServiceCard from '../components/ProfessionalServiceCard';\nimport { getProfessionalServices, getProfessionalDashboard, getClientDashboard, markNoreplyAsNotSpam } from '../api/API';\nimport BookingCard from '../components/BookingCard';\nimport TutorialModal from '../components/TutorialModal';\nimport BookingApprovalModal from '../components/BookingApprovalModal';\nimport { useToast } from '../components/ToastProvider';\n\nconst { width: screenWidth, height: screenHeight } = Dimensions.get('window');\n\nconst Dashboard = ({ navigation }) => {\n  const { colors } = useTheme();\n  const { signOut, firstName, is_prototype, screenWidth, is_DEBUG, isSignedIn, isCollapsed, userRole } = useContext(AuthContext);\n  const { \n    isVisible: isTutorialVisible,\n    currentStep,\n    totalSteps,\n    stepData,\n    handleNext,\n    handlePrevious,\n    handleSkip,\n    completeTutorial,\n  } = useContext(TutorialContext);\n  const showToast = useToast();\n  const [bookings, setBookings] = useState([]);\n  const [services, setServices] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [activeFilter, setActiveFilter] = useState('upcoming');\n  const [onboardingProgress, setOnboardingProgress] = useState({\n    profile_complete: 0,\n    has_bank_account: false,\n    has_services: false,\n    subscription_plan: 0\n  });\n\n  // Add state for the BookingApprovalModal\n  const [bookingModalVisible, setBookingModalVisible] = useState(false);\n  const [selectedBookingId, setSelectedBookingId] = useState(null);\n\n  const isLargeScreen = screenWidth > 900;\n  const isMobile = screenWidth <= 900;\n  const isProfessional = userRole === 'professional';\n\n  // Filter bookings based on active filter\n  const filteredBookings = bookings.filter(booking => {\n    const now = new Date();\n    let bookingDate = null;\n    \n    // Ensure we have a valid date before parsing\n    if (booking.start_date) {\n      try {\n        bookingDate = new Date(booking.start_date);\n        // Check if date is valid\n        if (isNaN(bookingDate.getTime())) {\n          debugLog(\"MBA5677: Invalid booking date\", booking.start_date);\n          return false;\n        }\n      } catch (error) {\n        debugLog(\"MBA5677: Error parsing booking date\", { date: booking.start_date, error });\n        return false;\n      }\n    }\n    \n    debugLog(\"MBA5677: Filtering booking\", { \n      id: booking.booking_id || booking.id,\n      date: booking.start_date || booking.date,\n      parsedDate: bookingDate ? bookingDate.toISOString() : null,\n      now: now.toISOString(),\n      filter: activeFilter\n    });\n    \n    switch (activeFilter) {\n      case 'upcoming':\n        return bookingDate && bookingDate > now;\n      case 'active':\n        return bookingDate && bookingDate <= now && !booking.completed;\n      case 'past':\n        return bookingDate && bookingDate < now && booking.completed;\n      default:\n        return true;\n    }\n  });\n\n  // Limit bookings for owner view\n  const displayedBookings = !isProfessional ? filteredBookings.slice(0, 3) : filteredBookings;\n\n  // Dynamic styles based on screen size\n  const dynamicStyles = {\n    welcomeTitle: {\n      fontSize: isLargeScreen ? 32 : 24,\n      fontWeight: '600',\n      color: theme.colors.whiteText,\n      fontFamily: theme.fonts.header.fontFamily,\n    },\n    bookingCount: {\n      fontSize: isLargeScreen ? 16 : 14,\n      color: theme.colors.whiteText,\n      fontFamily: theme.fonts.regular.fontFamily,\n      opacity: 0.8,\n      marginTop: 12,\n    },\n    statValue: {\n      fontSize: isLargeScreen ? 20 : 16,\n      fontWeight: '600',\n      color: theme.colors.text,\n      fontFamily: theme.fonts.header.fontFamily,\n    },\n    statLabel: {\n      fontSize: isLargeScreen ? 16 : 14,\n      color: theme.colors.textSecondary,\n      fontFamily: theme.fonts.regular.fontFamily,\n      marginTop: 4,\n    },\n    statChange: {\n      fontSize: isLargeScreen ? 14 : 12,\n      fontFamily: theme.fonts.regular.fontFamily,\n      marginTop: 4,\n    },\n    sectionTitle: {\n      fontSize: isLargeScreen ? 20 : 18,\n      fontWeight: '600',\n      color: theme.colors.text,\n      fontFamily: theme.fonts.header.fontFamily,\n      marginBottom: 16,\n      marginTop: 24,\n    },\n  };\n\n  const fetchDashboardData = async () => {\n    if (is_prototype) {\n      // Prototype data\n      const prototypeBookings = [\n        { id: '56782', owner: 'John Doe', pet: 'Max (Dog)', date: '2023-05-15', time: '14:00', status: 'upcoming' },\n        { id: '5678', owner: 'Jane Smith', pet: 'Whiskers (Cat)', date: '2023-05-17', time: '10:00', status: 'active' },\n      ];\n\n      const prototypeServices = [\n        {\n          service_name: \"Dog Walking\",\n          description: \"Professional dog walking service\",\n          unit_of_time: \"30 minutes\",\n          base_rate: 25,\n          additional_animal_rate: 10,\n          holiday_rate: 35,\n          additional_rates: []\n        },\n      ];\n\n      setBookings(prototypeBookings);\n      setServices(prototypeServices);\n      setOnboardingProgress({\n        profile_complete: 0.5,\n        has_bank_account: false,\n        has_services: true,\n        subscription_plan: 0\n      });\n      setIsLoading(false);\n      return;\n    }\n\n    try {\n      setIsLoading(true);\n      \n      // Use API.js functions which will be properly intercepted by AuthContext\n      const dashboardData = isProfessional \n        ? await getProfessionalDashboard()\n        : await getClientDashboard();\n\n      debugLog('MBA5677: Dashboard response data', dashboardData);\n      \n      // Log the structure of the first booking for debugging\n      if (dashboardData && dashboardData.upcoming_bookings && dashboardData.upcoming_bookings.length > 0) {\n        const firstBooking = dashboardData.upcoming_bookings[0];\n        debugLog('MBA5677: First booking complete structure', firstBooking);\n        \n        // Log all the keys in the booking object to see available fields\n        debugLog('MBA5677: First booking keys', Object.keys(firstBooking));\n        \n        // Explicitly check for client_name\n        debugLog('MBA5677: First booking client_name field', {\n          client_name: firstBooking.client_name,\n          owner_name: firstBooking.owner_name,\n          client_name_exists: 'client_name' in firstBooking\n        });\n      }\n\n      // Process the incoming bookings to ensure dates are properly formatted\n      const processedBookings = (dashboardData.upcoming_bookings || []).map(booking => {\n        debugLog('MBA5677: Processing booking', booking);\n        \n        // Make sure we have a valid booking object\n        if (!booking) {\n          debugLog('MBA5677: Null booking received');\n          return null;\n        }\n        \n        // Normalize date format if needed\n        let normalizedDate = booking.start_date;\n        if (normalizedDate && normalizedDate.includes(' ')) {\n          // Handle if the date includes time\n          normalizedDate = normalizedDate.split(' ')[0];\n        }\n        \n        // Return a properly formatted booking object with the client_name explicitly mapped\n        return {\n          ...booking,\n          start_date: normalizedDate, // Ensure date is in YYYY-MM-DD format\n          client_name: booking.client_name || booking.owner_name // Ensure client_name is set\n        };\n      }).filter(booking => booking !== null); // Remove any null bookings\n\n      debugLog('MBA5677: Processed bookings', processedBookings);\n      setBookings(processedBookings);\n      \n      setOnboardingProgress(dashboardData.onboarding_progress || {\n        profile_complete: 0,\n        has_bank_account: false,\n        has_services: false,\n        subscription_plan: 0\n      });\n\n      // Fetch services if professional\n      if (isProfessional) {\n        try {\n          const servicesData = await getProfessionalServices();\n          setServices(servicesData || []);\n        } catch (error) {\n          console.error('Error fetching professional services:', error);\n        }\n      }\n    } catch (error) {\n      // AuthContext will handle 401 errors and redirect to sign-in automatically\n      // We just need to handle other types of errors here\n      console.error('Error fetching dashboard data:', error);\n      \n      // Only handle non-auth errors (AuthContext handles 401s)\n      if (error.response?.status !== 401) {\n        // Handle other errors if needed\n        debugLog('MBA5677: Non-auth error in dashboard fetch:', error);\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchDashboardData();\n  }, [userRole, is_prototype]);\n\n  // Use useFocusEffect to reload data when screen comes into focus\n  useFocusEffect(\n    useCallback(() => {\n      debugLog('MBA5677: Dashboard screen focused, refreshing data');\n      fetchDashboardData();\n      return () => {\n        // Cleanup function when screen loses focus (if needed)\n      };\n    }, [userRole, is_prototype])\n  );\n\n  // Add useEffect to check for active bookings and select the active tab if there are any\n  useEffect(() => {\n    if (!isLoading && bookings.length > 0) {\n      const now = new Date();\n      \n      // Check if there are any active bookings (date <= now && !completed)\n      const hasActiveBookings = bookings.some(booking => {\n        try {\n          const bookingDate = booking.start_date ? new Date(booking.start_date) : null;\n          return bookingDate && bookingDate <= now && !booking.completed;\n        } catch (error) {\n          return false;\n        }\n      });\n      \n      debugLog(\"MBA5677: Checking for active bookings\", { \n        hasActiveBookings, \n        bookingsCount: bookings.length,\n        currentActiveFilter: activeFilter\n      });\n      \n      // If there are active bookings, set the active filter to 'active'\n      if (hasActiveBookings && activeFilter !== 'active') {\n        debugLog(\"MBA5677: Setting active filter to 'active' due to active bookings\");\n        setActiveFilter('active');\n      }\n    }\n  }, [bookings, isLoading]);\n\n  // TODO: Fetch owner requests from the backend\n  const ownerRequests = [\n    { id: '1', owner: 'Alice Johnson', pet: 'Fluffy (Rabbit)', date: '2023-05-20', time: '09:00' },\n    { id: '2', owner: 'Bob Williams', pet: 'Spike (Iguana)', date: '2023-05-22', time: '16:00' },\n  ];\n\n  const IconComponent = Platform.OS === 'web'\n    ? ({ name, ...props }) => <MaterialCommunityIcons name={name} {...props} />\n    : List.Icon;\n\n  const navigateToServiceManager = async () => {\n    if (is_DEBUG) {\n      console.log('Setting previousRoute to:', 'Dashboard');\n      console.log('Setting currentRoute to:', 'ServiceManager');\n    }\n    setTimeout(async () => {\n      await navigateToFrom(navigation, 'ServiceManager', 'Dashboard');\n    }, 100);\n  };\n\n  const renderHeader = () => {\n    if (isMobile) return null;\n    \n    return (\n      <View style={styles.headerContainer}>\n        <View style={styles.headerRight}>\n          {/* <TouchableOpacity style={styles.notificationButton}>\n            <MaterialCommunityIcons name=\"bell-outline\" size={24} color={theme.colors.text} />\n            <View style={styles.notificationBadge}>\n              <Text style={styles.notificationCount}>3</Text>\n            </View>\n          </TouchableOpacity> */}\n          <TouchableOpacity \n            style={styles.profileButton}\n            onPress={() => navigateToFrom(navigation, 'MyProfile', 'Dashboard')}\n          >\n            <Avatar.Image \n              size={40} \n              source={require('../../assets/default-profile.png')} \n            />\n          </TouchableOpacity>\n        </View>\n      </View>\n    );\n  };\n\n  const renderWelcomeSection = () => (\n    <View style={styles.welcomeSection}>\n      <View style={styles.welcomeContent}>\n        {Platform.OS === 'web' ? (\n          // Web version with CSS gradient\n          <View style={styles.welcomeCard}>\n            <View style={styles.welcomeHeader}>\n              <View style={styles.welcomeTextContainer}>\n                <Text style={dynamicStyles.welcomeTitle}>\n                  Welcome back{firstName ? ', ' + firstName : ''}! 👋\n                </Text>\n                <Text style={dynamicStyles.bookingCount}>\n                  You have {bookings.filter(b => !b.completed).length} active bookings today and {bookings.filter(b => new Date(b.start_date) > new Date()).length} upcoming appointments.\n                </Text>\n              </View>\n            </View>\n          </View>\n        ) : (\n          // Mobile version with LinearGradient\n          <LinearGradient\n            colors={['#6B6C53', '#86C5D9']}\n            start={{ x: 0, y: 0 }}\n            end={{ x: 1, y: 0 }}\n            style={[styles.welcomeCard, { backgroundImage: undefined }]}\n          >\n            <View style={styles.welcomeHeader}>\n              <View style={styles.welcomeTextContainer}>\n                <Text style={dynamicStyles.welcomeTitle}>\n                  Welcome back{firstName ? ', ' + firstName : ''}! 👋\n                </Text>\n                <Text style={dynamicStyles.bookingCount}>\n                  You have {bookings.filter(b => !b.completed).length} active bookings today and {bookings.filter(b => new Date(b.start_date) > new Date()).length} upcoming appointments.\n                </Text>\n              </View>\n            </View>\n          </LinearGradient>\n        )}\n      </View>\n    </View>\n  );\n\n  const renderOnboardingProgress = () => (\n    <View style={styles.statsContainer}>\n      <View style={styles.statsGrid}>\n        {isProfessional ? (\n          // Professional onboarding cards\n          <>\n            {/* Only show profile card if profile is not complete */}\n            {onboardingProgress.profile_complete < 1.0 && (\n              <TouchableOpacity \n                style={styles.statCard}\n                onPress={() => navigateToFrom(navigation, 'MyProfile', 'Dashboard', { initialTab: 'profile_info' })}\n              >\n                <View style={styles.statHeader}>\n                  <View style={[styles.statIconContainer, { backgroundColor: '#F0F9E5' }]}>\n                    <MaterialCommunityIcons name=\"account-check\" size={24} color={theme.colors.primary} />\n                  </View>\n                  <Text style={[dynamicStyles.statChange, { color: onboardingProgress.profile_complete === 1 ? theme.colors.success : theme.colors.warning }]}>\n                    {Math.round(onboardingProgress.profile_complete * 100)}% Complete\n                  </Text>\n                </View>\n                <Text style={dynamicStyles.statValue}>Profile</Text>\n                <Text style={dynamicStyles.statLabel}>Add an address to get clients</Text>\n              </TouchableOpacity>\n            )}\n\n            {/* TODO: Add back after MVP \n            <TouchableOpacity \n              style={styles.statCard}\n              onPress={() => navigateToFrom(navigation, 'MyProfile', 'Dashboard', { initialTab: 'settings_payments' })}\n            >\n              <View style={styles.statHeader}>\n                <View style={[styles.statIconContainer, { backgroundColor: '#E7F3F8' }]}>\n                  <MaterialCommunityIcons name=\"bank\" size={24} color={theme.colors.primary} />\n                </View>\n                <Text style={[dynamicStyles.statChange, { color: onboardingProgress.has_bank_account ? theme.colors.success : theme.colors.warning }]}>\n                  {onboardingProgress.has_bank_account ? 'Connected' : 'Not Connected'}\n                </Text>\n              </View>\n              <Text style={dynamicStyles.statValue}>Bank Account</Text>\n              <Text style={dynamicStyles.statLabel}>Connect your bank to receive payments</Text>\n            </TouchableOpacity> */}\n\n            {/* Only show services card if no services yet */}\n            {!onboardingProgress.has_services && (\n              <TouchableOpacity \n                style={styles.statCard}\n                onPress={() => navigateToFrom(navigation, 'ServiceManager', 'Dashboard')}\n              >\n                <View style={styles.statHeader}>\n                  <View style={[styles.statIconContainer, { backgroundColor: '#FEF0DA' }]}>\n                    <MaterialCommunityIcons name=\"briefcase\" size={24} color={theme.colors.primary} />\n                  </View>\n                  <Text style={[dynamicStyles.statChange, { color: onboardingProgress.has_services ? theme.colors.success : theme.colors.warning }]}>\n                    {onboardingProgress.has_services ? 'Active' : 'No Services'}\n                  </Text>\n                </View>\n                <Text style={dynamicStyles.statValue}>Services</Text>\n                <Text style={dynamicStyles.statLabel}>Add services to start accepting bookings</Text>\n              </TouchableOpacity>\n            )}\n\n            {/* TODO: Add back after MVP \n            <TouchableOpacity \n              style={styles.statCard}\n              onPress={() => navigateToFrom(navigation, 'MyProfile', 'Dashboard', { initialTab: 'settings_payments' })}\n            >\n              <View style={styles.statHeader}>\n                <View style={[styles.statIconContainer, { backgroundColor: '#E1E2DB' }]}>\n                  <MaterialCommunityIcons name=\"star\" size={24} color={theme.colors.primary} />\n                </View>\n                <Text style={[dynamicStyles.statChange, { color: onboardingProgress.subscription_plan > 0 ? theme.colors.success : theme.colors.warning }]}>\n                  {onboardingProgress.subscription_plan === 0 ? 'Free Tier' : 'Premium'}\n                </Text>\n              </View>\n              <Text style={dynamicStyles.statValue}>Subscription</Text>\n              <Text style={dynamicStyles.statLabel}>Upgrade for more features</Text>\n            </TouchableOpacity> */}\n          </>\n        ) : (\n          // Owner onboarding cards\n          <>\n            {/* Only show noreply card if not marked as not spam */}\n            {!onboardingProgress.marked_noreply_as_not_spam && (\n              <View style={styles.statCard}>\n                <View style={styles.statHeader}>\n                  <View style={[styles.statIconContainer, { backgroundColor: '#FEF0DA' }]}>\n                    <MaterialCommunityIcons name=\"email\" size={24} color={theme.colors.primary} />\n                  </View>\n                  <TouchableOpacity \n                    onPress={async () => {\n                      try {\n                        const response = await markNoreplyAsNotSpam();\n                        if (response) {\n                          debugLog('MBA5677: Marked noreply as not spam', response);\n                          setOnboardingProgress(prev => ({\n                            ...prev,\n                            marked_noreply_as_not_spam: true\n                          }));\n                          \n                          // Show success toast\n                          showToast({\n                            message: 'Success! You have marked our email as not spam and will receive emails about bookings and messages.',\n                            type: 'success',\n                            duration: 4000\n                          });\n                        }\n                      } catch (error) {\n                        debugLog('MBA5677: Error marking noreply as not spam', error);\n                        \n                        // Show error toast\n                        showToast({\n                          message: 'Failed to mark email as not spam. Please try again.',\n                          type: 'error',\n                          duration: 4000\n                        });\n                      }\n                    }}\n                  >\n                    <MaterialCommunityIcons name=\"close-circle\" size={24} color={theme.colors.error} />\n                  </TouchableOpacity>\n                </View>\n                <Text style={dynamicStyles.statValue}>Mark our email as not spam</Text>\n                <Text style={dynamicStyles.statLabel}>We send you emails about your bookings/messsages and other important updates</Text>\n              </View>\n            )}\n            {/* Only show profile card if profile is not complete */}\n            {onboardingProgress.profile_complete < 1.0 && (\n              <TouchableOpacity \n                style={styles.statCard}\n                onPress={() => navigateToFrom(navigation, 'MyProfile', 'Dashboard', { initialTab: 'profile_info' })}\n              >\n                <View style={styles.statHeader}>\n                  <View style={[styles.statIconContainer, { backgroundColor: '#F0F9E5' }]}>\n                    <MaterialCommunityIcons name=\"account-check\" size={24} color={theme.colors.primary} />\n                  </View>\n                  <Text style={[dynamicStyles.statChange, { color: onboardingProgress.profile_complete === 1 ? theme.colors.success : theme.colors.warning }]}>\n                    {Math.round(onboardingProgress.profile_complete * 100)}% Complete\n                  </Text>\n                </View>\n                <Text style={dynamicStyles.statValue}>Profile</Text>\n                <Text style={dynamicStyles.statLabel}>Add an address to find professionals</Text>\n              </TouchableOpacity>\n            )}\n\n            {/* TODO: Add back after MVP \n            <TouchableOpacity \n              style={styles.statCard}\n              onPress={() => navigateToFrom(navigation, 'MyProfile', 'Dashboard', { initialTab: 'settings_payments' })}\n            >\n              <View style={styles.statHeader}>\n                <View style={[styles.statIconContainer, { backgroundColor: '#E7F3F8' }]}>\n                  <MaterialCommunityIcons name=\"credit-card\" size={24} color={theme.colors.primary} />\n                </View>\n                <Text style={[dynamicStyles.statChange, { color: onboardingProgress.has_payment_method ? theme.colors.success : theme.colors.warning }]}>\n                  {onboardingProgress.has_payment_method ? 'Connected' : 'Not Connected'}\n                </Text>\n              </View>\n              <Text style={dynamicStyles.statValue}>Payment Method</Text>\n              <Text style={dynamicStyles.statLabel}>Add a payment method to book services</Text>\n            </TouchableOpacity> */}\n\n            {/* Only show pets card if no pets yet */}\n            {!onboardingProgress.has_pets && (\n              <TouchableOpacity \n                style={styles.statCard}\n                onPress={() => navigateToFrom(navigation, 'MyProfile', 'Dashboard', { initialTab: 'pets_preferences' })}\n              >\n                <View style={styles.statHeader}>\n                  <View style={[styles.statIconContainer, { backgroundColor: '#FEF0DA' }]}>\n                    <MaterialCommunityIcons name=\"paw\" size={24} color={theme.colors.primary} />\n                  </View>\n                  <Text style={[dynamicStyles.statChange, { color: onboardingProgress.has_pets ? theme.colors.success : theme.colors.warning }]}>\n                    {onboardingProgress.has_pets ? 'Added' : 'No Pets'}\n                  </Text>\n                </View>\n                <Text style={dynamicStyles.statValue}>Pets</Text>\n                <Text style={dynamicStyles.statLabel}>Add your pets to book services</Text>\n              </TouchableOpacity>\n            )}\n\n            {/* TODO: Add back after MVP \n            <TouchableOpacity \n              style={styles.statCard}\n              onPress={() => navigateToFrom(navigation, 'MyProfile', 'Dashboard', { initialTab: 'settings_payments' })}\n            >\n              <View style={styles.statHeader}>\n                <View style={[styles.statIconContainer, { backgroundColor: '#E1E2DB' }]}>\n                  <MaterialCommunityIcons name=\"star\" size={24} color={theme.colors.primary} />\n                </View>\n                <Text style={[dynamicStyles.statChange, { color: onboardingProgress.subscription_plan > 0 ? theme.colors.success : theme.colors.warning }]}>\n                  {onboardingProgress.subscription_plan === 0 ? 'Free Tier' : 'Premium'}\n                </Text>\n              </View>\n              <Text style={dynamicStyles.statValue}>Subscription</Text>\n              <Text style={dynamicStyles.statLabel}>Upgrade for more features</Text>\n            </TouchableOpacity> */}\n          </>\n        )}\n      </View>\n    </View>\n  );\n\n  const renderBookingFilters = () => (\n    <View style={styles.filterContainer}>\n      <View style={styles.filterButtons}>\n        {['upcoming', 'active'].map((filter) => (\n          <TouchableOpacity\n            key={filter}\n            style={[\n              styles.filterButton,\n              activeFilter === filter && styles.activeFilterButton\n            ]}\n            onPress={() => setActiveFilter(filter)}\n          >\n            <Text style={[\n              styles.filterText,\n              activeFilter === filter && styles.activeFilterText\n            ]}>\n              {filter.charAt(0).toUpperCase() + filter.slice(1)}\n            </Text>\n          </TouchableOpacity>\n        ))}\n      </View>\n      {/* TODO: UNCOMMONT THIS SECTION after mvp launch and implementation of mybookings screen\n      <TouchableOpacity\n        style={styles.viewAllButton}\n        onPress={() => navigateToFrom(navigation, 'MyBookings', 'Dashboard')}\n      >\n        <Text style={styles.viewAllText}>View All</Text>\n        <MaterialCommunityIcons name=\"chevron-right\" size={20} color={theme.colors.primary} />\n      </TouchableOpacity> */}\n    </View>\n  );\n\n  // Handle opening the booking modal\n  const handleViewBookingDetails = (bookingId) => {\n    setSelectedBookingId(bookingId);\n    setBookingModalVisible(true);\n    debugLog(\"MBA5677: Opening booking modal for ID:\", bookingId);\n  };\n\n  // Handle closing the booking modal\n  const handleCloseBookingModal = () => {\n    setBookingModalVisible(false);\n    setSelectedBookingId(null);\n  };\n\n  const renderBookings = () => (\n    <View style={styles.bookingsContainer}>\n      {isLoading ? (\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"small\" color={colors.primary} />\n        </View>\n      ) : filteredBookings.length > 0 ? (\n        filteredBookings.map((booking) => {\n          debugLog('MBA5677: Rendering booking', { \n            id: is_prototype ? booking.id : booking.booking_id,\n            date: is_prototype ? booking.date : booking.start_date,\n            time: is_prototype ? booking.time : booking.start_time,\n            client_name: is_prototype ? booking.owner : booking.client_name,\n            professional_name: is_prototype ? booking.professional : booking.professional_name,\n            status: is_prototype ? booking.status : booking.status\n          });\n          \n          const bookingId = is_prototype ? booking.id : booking.booking_id;\n          \n          // Set name based on user role\n          let name;\n          if (isProfessional) {\n            name = is_prototype ? booking.owner : (booking.client_name || booking.owner_name || 'Client');\n            debugLog('MBA5677: Using client name', name);\n          } else {\n            name = is_prototype ? booking.professional : (booking.professional_name || 'Professional');\n            debugLog('MBA5677: Using professional name', name);\n          }\n          \n          return (\n            <BookingCard\n              key={bookingId}\n              booking={{\n                id: bookingId,\n                client_name: isProfessional ? name : null,\n                professional_name: !isProfessional ? name : null,\n                serviceName: is_prototype ? booking.service : booking.service_type,\n                date: is_prototype ? booking.date : booking.start_date,\n                time: is_prototype ? booking.time : booking.start_time,\n                status: is_prototype ? booking.status : booking.status,\n                pets: is_prototype ? [{ name: booking.pet }] : booking.pets\n              }}\n              type={isProfessional ? \"professional\" : \"client\"}\n              onViewDetails={() => handleViewBookingDetails(bookingId)}\n            />\n          );\n        })\n      ) : (\n        <View style={styles.emptyStateContainer}>\n          <MaterialCommunityIcons name=\"calendar\" size={48} color={theme.colors.textSecondary} />\n          <Text style={styles.emptyStateTitle}>No {activeFilter} bookings</Text>\n          <Text style={styles.emptyStateText}>\n            {isProfessional \n              ? 'Create services to start receiving bookings from owners.'\n              : 'Find professional services to book your first appointment.'}\n          </Text>\n          <TouchableOpacity\n            style={styles.createServiceButton}\n            onPress={() => navigateToFrom(navigation, \n              isProfessional ? 'ServiceManager' : 'SearchProfessionalsListing', \n              'Dashboard'\n            )}\n          >\n            <MaterialCommunityIcons \n              name={isProfessional ? \"plus\" : \"magnify\"} \n              size={20} \n              color={theme.colors.surface} \n            />\n            <Text style={styles.createServiceButtonText}>\n              {isProfessional ? 'Create Service' : 'Find Professionals'}\n            </Text>\n          </TouchableOpacity>\n        </View>\n      )}\n    </View>\n  );\n\n  const renderServiceCard = (service) => (\n    <View style={styles.serviceCard} key={service.id}>\n      <View style={styles.serviceContent}>\n        <View style={styles.serviceHeader}>\n          <Text \n            style={styles.serviceTitle}\n            numberOfLines={1}\n            ellipsizeMode=\"tail\"\n          >\n            {service.service_name}\n          </Text>\n          <Text style={styles.serviceRate}>${service.base_rate} {service.unit_of_time || 'Per Visit'}</Text>\n        </View>\n        <Text style={styles.serviceCategory}>{service.category || 'Exotic'}</Text>\n      </View>\n      <View style={styles.serviceFooter}>\n        {/* TODO: Implement this section after mvp */}\n        {/* <View style={styles.bookingsCount}>\n          <MaterialCommunityIcons name=\"calendar\" size={16} color={theme.colors.textSecondary} />\n          <Text style={styles.bookingsText}>{service.booking_count || 8} bookings</Text>\n        </View> */}\n        <TouchableOpacity \n          style={styles.viewButton}\n          onPress={() => navigateToFrom(navigation, 'ServiceManager', 'Dashboard', { serviceId: service.id })}\n        >\n          <Text style={styles.viewButtonText}>View</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n\n  const renderServices = () => {\n    if (!isProfessional) return null;\n\n    return (\n      <View style={styles.servicesContainer}>\n        <View style={styles.sectionHeader}>\n          <Text style={dynamicStyles.sectionTitle}>My Services</Text>\n          <TouchableOpacity\n            style={styles.viewAllButton}\n            onPress={() => navigateToFrom(navigation, 'ServiceManager', 'Dashboard')}\n          >\n            <Text style={styles.viewAllText}>View All</Text>\n            <MaterialCommunityIcons name=\"chevron-right\" size={20} color={theme.colors.primary} />\n          </TouchableOpacity>\n        </View>\n        <View style={styles.servicesGrid}>\n          {services.map(service => renderServiceCard(service))}\n        </View>\n      </View>\n    );\n  };\n\n  return (\n    <View style={styles.mainContainer}>\n      <ScrollView \n        style={[\n          styles.scrollView,\n          {\n            marginLeft: !isMobile && isSignedIn ? (isCollapsed ? 70 : 250) : 0,\n            marginTop: isMobile ? 60 : 0,\n          }\n        ]}\n        contentContainerStyle={[\n          styles.scrollViewContent,\n          {\n            maxWidth: 1200,\n            marginHorizontal: 'auto',\n            paddingTop: isMobile ? 24 : 0,\n          }\n        ]}\n      >\n        {/* TODO: Add back after mvp launch.{renderHeader()} */}\n        {renderWelcomeSection()}\n        {renderOnboardingProgress()}\n        {renderBookingFilters()}\n        {renderBookings()}\n        {renderServices()}\n      </ScrollView>\n      \n      {/* Custom BookingApprovalModal with modified title */}\n      <BookingApprovalModal\n        visible={bookingModalVisible}\n        onClose={handleCloseBookingModal}\n        bookingId={selectedBookingId}\n        isProfessional={isProfessional}\n        modalTitle=\"Review Details\" // Custom title for dashboard view\n        hideButtons={true} // Hide action buttons when viewed from dashboard\n      />\n      \n      {isTutorialVisible && stepData?.screen === 'Dashboard' && (\n        <TutorialModal\n          step={currentStep}\n          totalSteps={totalSteps}\n          title={stepData.title}\n          description={stepData.description}\n          position={stepData.position}\n          onNext={() => handleNext(navigation)}\n          onPrevious={handlePrevious}\n          onSkip={handleSkip}\n          onClose={completeTutorial}\n        />\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  mainContainer: {\n    flex: 1,\n    height: '100vh',\n    backgroundColor: '#f5f5f5',\n    position: 'fixed',\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    overflow: 'hidden',\n  },\n  scrollView: {\n    flex: 1,\n    height: '100%',\n    overflow: 'auto',\n  },\n  scrollViewContent: {\n    width: '100%',\n    paddingBottom: 40,\n  },\n  headerContainer: {\n    padding: 24,\n    paddingTop: Platform.OS === 'android' ? StatusBar.currentHeight + 24 : 24,\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    alignItems: 'center',\n  },\n  headerRight: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 16,\n  },\n  notificationButton: {\n    position: 'relative',\n    padding: 8,\n  },\n  notificationBadge: {\n    position: 'absolute',\n    top: 4,\n    right: 4,\n    backgroundColor: theme.colors.error,\n    borderRadius: 10,\n    minWidth: 20,\n    height: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  notificationCount: {\n    color: theme.colors.whiteText,\n    fontSize: 12,\n    fontWeight: 'bold',\n  },\n  profileButton: {\n    borderRadius: 20,\n    overflow: 'hidden',\n  },\n  welcomeSection: {\n    padding: 24,\n    // paddingTop: 0,\n  },\n  welcomeContent: {\n    maxWidth: 1200,\n    marginHorizontal: 'auto',\n    width: '100%',\n  },\n  welcomeCard: {\n    // backgroundColor: 'transparent',\n    backgroundImage: 'linear-gradient(to right, #6B6C53, #86C5D9)',\n    borderRadius: 12,\n    padding: 24,\n    marginBottom: 24,\n  },\n  welcomeHeader: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n  },\n  welcomeTextContainer: {\n    flex: 1,\n    minWidth: 280,\n  },\n  statsContainer: {\n    padding: 24,\n    paddingTop: 0,\n    backgroundColor: '#f5f5f5',\n  },\n  statsGrid: {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(auto-fit, minmax(140px, 1fr))',\n    gap: 24,\n    maxWidth: 1200,\n    marginHorizontal: 'auto',\n    width: '100%',\n  },\n  statCard: {\n    backgroundColor: theme.colors.surface,\n    padding: 16,\n    borderRadius: 12,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n    ...Platform.select({\n      ios: {\n        activeOpacity: 0.7,\n      },\n      android: {\n        android_ripple: {\n          color: 'rgba(0, 0, 0, 0.1)',\n        },\n      },\n    }),\n  },\n  statHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  statIconContainer: {\n    width: 48,\n    height: 48,\n    borderRadius: 12,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  bookingsContainer: {\n    padding: 24,\n    paddingTop: 0,\n    backgroundColor: '#f5f5f5',\n    maxWidth: 1200,\n    marginHorizontal: 'auto',\n    width: '100%',\n  },\n  bookingItem: {\n    marginBottom: 16,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    padding: 16,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.1,\n    shadowRadius: 2,\n    elevation: 2,\n  },\n  bookingContent: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  bookingInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  bookingDetails: {\n    marginLeft: 12,\n  },\n  bookingTitle: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 4,\n  },\n  bookingTime: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n  },\n  bookingStatus: {\n    alignItems: 'flex-end',\n  },\n  statusText: {\n    fontSize: 14,\n    fontWeight: '500',\n    marginBottom: 8,\n  },\n  progressBar: {\n    width: 100,\n    height: 4,\n    backgroundColor: theme.colors.border,\n    borderRadius: 2,\n    overflow: 'hidden',\n  },\n  progress: {\n    height: '100%',\n    backgroundColor: theme.colors.primary,\n  },\n  timeLeft: {\n    fontSize: 12,\n    color: theme.colors.textSecondary,\n    marginTop: 4,\n  },\n  emptyStateContainer: {\n    padding: 40,\n    alignItems: 'center',\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    marginBottom: 24,\n  },\n  emptyStateTitle: {\n    fontSize: theme.fontSizes.large,\n    color: theme.colors.text,\n    fontWeight: '600',\n    marginTop: 16,\n    marginBottom: 8,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  emptyStateText: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.textSecondary,\n    textAlign: 'center',\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginBottom: 24,\n  },\n  createServiceButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#6B6C53',\n    paddingVertical: 12,\n    paddingHorizontal: 20,\n    borderRadius: 8,\n    gap: 8,\n  },\n  createServiceButtonText: {\n    color: theme.colors.surface,\n    fontSize: 16,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  filterContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16,\n    paddingHorizontal: 24,\n    paddingVertical: 8,\n    borderRadius: 30,\n    // marginHorizontal: 24,\n  },\n  filterButtons: {\n    flexDirection: 'row',\n    backgroundColor: 'rgb(238, 241, 245)', //rgb(227, 229, 232)\n    padding: 4,\n    borderRadius: 5,\n    // gap: 4,\n  },\n  filterButton: {\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n    borderRadius: 5,\n  },\n  activeFilterButton: {\n    backgroundColor: theme.colors.surface,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.05,\n    shadowRadius: 3,\n    elevation: 2,\n  },\n  filterText: {\n    color: '#6B7280',\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '500',\n  },\n  activeFilterText: {\n    color: '#111827',\n    fontWeight: '600',\n  },\n  viewAllButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n    paddingRight: 12,\n  },\n  viewAllText: {\n    color: theme.colors.primary,\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '500',\n  },\n  servicesContainer: {\n    padding: 24,\n    paddingTop: 0,\n    paddingBottom: 70,\n  },\n  sectionHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  servicesGrid: {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))',\n    gap: 16,\n  },\n  serviceCard: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 12,\n    padding: 20,\n    marginBottom: 16,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.05,\n    shadowRadius: 3,\n    elevation: 2,\n    justifyContent: 'space-between',\n  },\n  serviceContent: {\n    marginBottom: 20,\n  },\n  serviceHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    marginBottom: 4,\n  },\n  serviceTitle: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n    maxWidth: '50%',\n  },\n  serviceCategory: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  serviceFooter: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n  bookingsCount: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 6,\n  },\n  bookingsText: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  serviceRate: {\n    fontSize: 16,\n    color: '#6B6C53',\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  viewButton: {\n    paddingVertical: 8,\n    paddingHorizontal: 16,\n    borderRadius: 6,\n    backgroundColor: theme.colors.surface,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 1,\n    },\n    shadowOpacity: 0.05,\n    shadowRadius: 2,\n    elevation: 1,\n  },\n  viewButtonText: {\n    color: theme.colors.text,\n    fontSize: 14,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default Dashboard;\n","import React, { useState, useEffect, useContext } from 'react';\nimport { View, Text, TextInput, StyleSheet, ScrollView, SafeAreaView, Platform, StatusBar, TouchableOpacity, ActivityIndicator, Alert, Image, useWindowDimensions } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport * as ImagePicker from 'expo-image-picker';\nimport { AuthContext } from '../context/AuthContext';\nimport { navigateToFrom, handleBack } from '../components/Navigation';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\n\n// TODO: mention to user initially we are doing a manual verification process, will implement automation later.\nconst BecomeProfessional = ({ navigation }) => {\n  const { width: windowWidth } = useWindowDimensions();\n  const { screenWidth, isCollapsed, is_DEBUG } = useContext(AuthContext);\n  const [isMobile, setIsMobile] = useState(screenWidth <= 900);\n  const [selectedPets, setSelectedPets] = useState({\n    dog: false,\n    cat: false,\n    exotics: false,\n  });\n  const [about, setAbout] = useState('');\n  const [certifications, setCertifications] = useState([]);\n  const [insuranceProof, setInsuranceProof] = useState([]);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  useEffect(() => {\n    const updateLayout = () => {\n      setIsMobile(screenWidth <= 900);\n    };\n    updateLayout();\n  }, [screenWidth]);\n\n  useEffect(() => {\n    const initializeNavigation = async () => {\n      const currentRoute = Platform.OS === 'web' ? sessionStorage.getItem('currentRoute') : await AsyncStorage.getItem('currentRoute');\n      if (currentRoute !== 'BecomeProfessional') {\n        await navigateToFrom(navigation, 'BecomeProfessional', currentRoute);\n      } else {\n        if (is_DEBUG) {\n          console.log('Error, currentRoute is BecomeProfessional');\n        }\n      }\n    };\n    initializeNavigation();\n  }, []);\n\n  const handleBackPress = () => {\n    handleBack(navigation);\n  };\n\n  const togglePetSelection = (pet) => {\n    setSelectedPets({ ...selectedPets, [pet]: !selectedPets[pet] });\n  };\n\n  const pickCertification = async () => {\n    let result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.Images,\n      allowsEditing: true,\n      aspect: [4, 3],\n      quality: 1,\n      base64: true,\n    });\n\n    if (!result.canceled) {\n      const newCertification = {\n        uri: result.assets[0].uri,\n        base64: result.assets[0].base64,\n        name: result.assets[0].uri.split('/').pop()\n      };\n      setCertifications([...certifications, newCertification]);\n    }\n  };\n\n  const pickInsuranceProof = async () => {\n    let result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.Images,\n      allowsEditing: true,\n      aspect: [4, 3],\n      quality: 1,\n      base64: true,\n    });\n\n    if (!result.canceled) {\n      const newProof = {\n        uri: result.assets[0].uri,\n        base64: result.assets[0].base64,\n        name: result.assets[0].uri.split('/').pop()\n      };\n      setInsuranceProof([...insuranceProof, newProof]);\n    }\n  };\n\n  const removeCertification = (index) => {\n    setCertifications(certifications.filter((_, i) => i !== index));\n  };\n\n  const removeInsuranceProof = (index) => {\n    setInsuranceProof(insuranceProof.filter((_, i) => i !== index));\n  };\n\n  const handleSubmit = async () => {\n    setIsSubmitting(true);\n\n    \n      // Original submission logic for non-prototype mode\n      setTimeout(() => {\n        setIsSubmitting(false);\n        setSelectedPets({\n          dog: false,\n          cat: false,\n          exotics: false,\n        });\n        setAbout('');\n        setCertifications([]);\n        setInsuranceProof([]);\n        if (Platform.OS === 'web') {\n          window.confirm('Success: Your application has been submitted successfully!') && navigation.navigate('More');\n        } else {\n          Alert.alert('Success', 'Your application has been submitted successfully!', [\n            { text: 'OK', onPress: () => navigation.navigate('More', { screen: 'More', transition: 'slide' }) },\n          ]);\n        }\n      }, 2000);\n  };\n\n  const createStyles = (screenWidth, isCollapsed) => StyleSheet.create({\n    mainContainer: {\n      flex: 1,\n      backgroundColor: theme.colors.background,\n      height: '100vh',\n      overflow: 'hidden',\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      marginLeft: screenWidth > 900 ? (isCollapsed ? 70 : 250) : 0,\n      transition: 'margin-left 0.3s ease',\n    },\n    container: {\n      flex: 1,\n      backgroundColor: theme.colors.background,\n      paddingTop: Platform.OS === 'android' ? StatusBar.currentHeight : 0,\n    },\n    scrollContent: {\n      flexGrow: 1,\n      padding: screenWidth <= 900 ? 16 : 20,\n      width: screenWidth > 900 ? '60%' : '90%',\n      maxWidth: 800,\n      alignSelf: 'center',\n    },\n    header: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      padding: 16,\n      borderBottomWidth: 1,\n      borderBottomColor: theme.colors.border,\n      display: screenWidth <= 900 ? 'flex' : 'none',\n    },\n    backButton: {\n      marginRight: 16,\n    },\n    headerText: {\n      fontSize: 20,\n      fontWeight: 'bold',\n      color: theme.colors.primary,\n    },\n    title: {\n      fontSize: screenWidth <= 900 ? 24 : 32,\n      color: theme.colors.text,\n      textAlign: 'center',\n      marginBottom: screenWidth <= 900 ? 16 : 24,\n      fontFamily: theme.fonts.header.fontFamily,\n    },\n    label: {\n      fontSize: theme.fontSizes.medium,\n      color: theme.colors.text,\n      marginBottom: screenWidth <= 900 ? 8 : 12,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    checkboxContainer: {\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      justifyContent: screenWidth <= 900 ? 'space-between' : 'flex-start',\n      gap: screenWidth <= 900 ? 8 : 16,\n      marginBottom: screenWidth <= 900 ? 16 : 24,\n    },\n    petButton: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      padding: screenWidth <= 900 ? 8 : 12,\n      borderWidth: 1,\n      borderColor: theme.colors.primary,\n      borderRadius: 8,\n      backgroundColor: theme.colors.surface,\n      minWidth: screenWidth <= 900 ? '45%' : 150,\n    },\n    selectedPetButton: {\n      backgroundColor: theme.colors.primary,\n    },\n    petButtonText: {\n      marginLeft: 8,\n      color: theme.colors.primary,\n      fontSize: theme.fontSizes.medium,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    selectedPetButtonText: {\n      color: theme.colors.surface,\n    },\n    textInput: {\n      borderColor: theme.colors.border,\n      borderWidth: 1,\n      borderRadius: 8,\n      padding: screenWidth <= 900 ? 12 : 16,\n      marginBottom: screenWidth <= 900 ? 16 : 24,\n      backgroundColor: theme.colors.inputBackground,\n      minHeight: 120,\n      fontSize: theme.fontSizes.medium,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    uploadButton: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'center',\n      padding: screenWidth <= 900 ? 12 : 16,\n      borderWidth: 1,\n      borderColor: theme.colors.border,\n      borderRadius: 8,\n      borderStyle: 'dashed',\n      marginBottom: screenWidth <= 900 ? 12 : 16,\n    },\n    uploadText: {\n      marginLeft: 8,\n      color: theme.colors.text,\n      fontSize: theme.fontSizes.medium,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    uploadedFileContainer: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      backgroundColor: theme.colors.surfaceVariant,\n      padding: screenWidth <= 900 ? 8 : 12,\n      borderRadius: 8,\n      marginBottom: 8,\n    },\n    uploadedFilePreview: {\n      width: 40,\n      height: 40,\n      borderRadius: 4,\n      marginRight: 8,\n    },\n    certificationText: {\n      flex: 1,\n      fontSize: theme.fontSizes.small,\n      color: theme.colors.text,\n      marginRight: 8,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    removeFileButton: {\n      padding: 4,\n    },\n    submitButton: {\n      backgroundColor: theme.colors.primary,\n      padding: screenWidth <= 900 ? 12 : 16,\n      borderRadius: 8,\n      alignItems: 'center',\n      marginTop: screenWidth <= 900 ? 20 : 32,\n    },\n    submitButtonDisabled: {\n      opacity: 0.6,\n    },\n    submitButtonText: {\n      color: theme.colors.surface,\n      fontSize: theme.fontSizes.medium,\n      fontWeight: 'bold',\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    loadingIndicator: {\n      marginTop: 16,\n    },\n    formContainer: {\n      width: '100%',\n    },\n  });\n\n  return (\n    <View style={createStyles(screenWidth, isCollapsed).mainContainer}>\n      <SafeAreaView style={createStyles(screenWidth, isCollapsed).container}>\n        {isMobile && (\n          <View style={createStyles(screenWidth, isCollapsed).header}>\n            <TouchableOpacity onPress={handleBackPress} style={createStyles(screenWidth, isCollapsed).backButton}>\n              <MaterialCommunityIcons name=\"arrow-left\" size={24} color={theme.colors.primary} />\n            </TouchableOpacity>\n            <Text style={createStyles(screenWidth, isCollapsed).headerText}>Become a Professional</Text>\n          </View>\n        )}\n        \n        <ScrollView contentContainerStyle={createStyles(screenWidth, isCollapsed).scrollContent}>\n          <View style={createStyles(screenWidth, isCollapsed).formContainer}>\n            <Text style={createStyles(screenWidth, isCollapsed).title}>Become a Professional</Text>\n            \n            <Text style={createStyles(screenWidth, isCollapsed).label}>Select Pets You Can Sit:</Text>\n            <View style={createStyles(screenWidth, isCollapsed).checkboxContainer}>\n              {['dog', 'cat', 'exotics'].map((pet) => (\n                <TouchableOpacity\n                  key={pet}\n                  style={[\n                    createStyles(screenWidth, isCollapsed).petButton,\n                    selectedPets[pet] && createStyles(screenWidth, isCollapsed).selectedPetButton,\n                  ]}\n                  onPress={() => togglePetSelection(pet)}\n                >\n                  <MaterialCommunityIcons\n                    name={pet === 'exotics' ? 'turtle' : pet}\n                    size={24}\n                    color={selectedPets[pet] ? theme.colors.surface : theme.colors.primary}\n                  />\n                  <Text style={[\n                    createStyles(screenWidth, isCollapsed).petButtonText,\n                    selectedPets[pet] && createStyles(screenWidth, isCollapsed).selectedPetButtonText\n                  ]}>\n                    {pet.charAt(0).toUpperCase() + pet.slice(1)}\n                  </Text>\n                </TouchableOpacity>\n              ))}\n            </View>\n\n            <Text style={createStyles(screenWidth, isCollapsed).label}>About You:</Text>\n            <TextInput\n              style={createStyles(screenWidth, isCollapsed).textInput}\n              multiline\n              numberOfLines={4}\n              placeholder=\"Write a little about yourself...\"\n              value={about}\n              onChangeText={setAbout}\n            />\n\n            <Text style={createStyles(screenWidth, isCollapsed).label}>Upload Certifications/Resume:</Text>\n            <TouchableOpacity style={createStyles(screenWidth, isCollapsed).uploadButton} onPress={pickCertification}>\n              <MaterialCommunityIcons name=\"file-upload\" size={24} color={theme.colors.text} />\n              <Text style={createStyles(screenWidth, isCollapsed).uploadText}>Upload Documents</Text>\n            </TouchableOpacity>\n            {certifications.map((cert, index) => (\n              <View key={index} style={createStyles(screenWidth, isCollapsed).uploadedFileContainer}>\n                <Image source={{ uri: cert.uri }} style={createStyles(screenWidth, isCollapsed).uploadedFilePreview} />\n                <Text style={createStyles(screenWidth, isCollapsed).certificationText} numberOfLines={1}>\n                  {cert.name}\n                </Text>\n                <TouchableOpacity \n                  style={createStyles(screenWidth, isCollapsed).removeFileButton}\n                  onPress={() => removeCertification(index)}\n                >\n                  <MaterialCommunityIcons name=\"close\" size={20} color={theme.colors.error} />\n                </TouchableOpacity>\n              </View>\n            ))}\n\n            <Text style={createStyles(screenWidth, isCollapsed).label}>Upload Insurance Proof:</Text>\n            <TouchableOpacity style={createStyles(screenWidth, isCollapsed).uploadButton} onPress={pickInsuranceProof}>\n              <MaterialCommunityIcons name=\"file-upload\" size={24} color={theme.colors.text} />\n              <Text style={createStyles(screenWidth, isCollapsed).uploadText}>Upload Insurance</Text>\n            </TouchableOpacity>\n            {insuranceProof.map((proof, index) => (\n              <View key={index} style={createStyles(screenWidth, isCollapsed).uploadedFileContainer}>\n                <Image source={{ uri: proof.uri }} style={createStyles(screenWidth, isCollapsed).uploadedFilePreview} />\n                <Text style={createStyles(screenWidth, isCollapsed).certificationText} numberOfLines={1}>\n                  {proof.name}\n                </Text>\n                <TouchableOpacity \n                  style={createStyles(screenWidth, isCollapsed).removeFileButton}\n                  onPress={() => removeInsuranceProof(index)}\n                >\n                  <MaterialCommunityIcons name=\"close\" size={20} color={theme.colors.error} />\n                </TouchableOpacity>\n              </View>\n            ))}\n\n            <TouchableOpacity \n              style={[\n                createStyles(screenWidth, isCollapsed).submitButton,\n                isSubmitting && createStyles(screenWidth, isCollapsed).submitButtonDisabled\n              ]} \n              onPress={handleSubmit} \n              disabled={isSubmitting}\n            >\n              <Text style={createStyles(screenWidth, isCollapsed).submitButtonText}>\n                {isSubmitting ? 'Submitting...' : 'Submit Application'}\n              </Text>\n            </TouchableOpacity>\n            \n            {isSubmitting && (\n              <ActivityIndicator \n                style={createStyles(screenWidth, isCollapsed).loadingIndicator} \n                size=\"small\" \n                color={theme.colors.primary} \n              />\n            )}\n          </View>\n        </ScrollView>\n      </SafeAreaView>\n    </View>\n  );\n};\n\nexport default BecomeProfessional;\n","import React, { useContext, useEffect, useState } from 'react';\nimport { \n  View, \n  StyleSheet, \n  Alert, \n  Platform, \n  SafeAreaView, \n  StatusBar, \n  ScrollView, \n  Text, \n  TouchableOpacity \n} from 'react-native';\nimport { List, Divider, Button } from 'react-native-paper';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { AuthContext } from '../context/AuthContext';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { navigateToFrom } from '../components/Navigation';\n\nconst MoreScreen = ({ navigation }) => {\n  const { isSignedIn, isApprovedProfessional, userRole, switchRole, signOut, screenWidth, isCollapsed, is_DEBUG } = useContext(AuthContext);\n  const [isMobile, setIsMobile] = useState(screenWidth <= 900);\n  const styles = createStyles(screenWidth, isCollapsed);\n\n  useEffect(() => {\n    const updateLayout = () => {\n      setIsMobile(screenWidth <= 900);\n    };\n    updateLayout();\n  }, [screenWidth]);\n\n  useEffect(() => {\n    const initializeRoutes = async () => {\n      try {\n        const initialRoute = isSignedIn \n          ? 'Dashboard'\n          : 'Home';\n\n        if (Platform.OS === 'web') {\n          sessionStorage.setItem('currentRoute', initialRoute);\n          sessionStorage.setItem('previousRoute', 'More');\n        } else {\n          await AsyncStorage.setItem('currentRoute', initialRoute);\n          await AsyncStorage.setItem('previousRoute', 'More');\n        }\n      } catch (error) {\n        console.error('Error initializing routes:', error);\n      }\n    };\n\n    initializeRoutes();\n  }, [isSignedIn, userRole]);\n\n  const handleNavigation = async (route, tab) => {\n    try {\n      await navigateToFrom(navigation, route, 'More', tab);\n    } catch (error) {\n      console.error('Error handling navigation:', error);\n      navigation.navigate(route);\n    }\n  };\n\n  const handleLogout = async () => {\n    try {\n      await signOut();\n      // Clear navigation history on logout\n      if (Platform.OS === 'web') {\n        sessionStorage.removeItem('currentRoute');\n        sessionStorage.removeItem('previousRoute');\n      } else {\n        await AsyncStorage.multiRemove(['currentRoute', 'previousRoute']);\n      }\n      Alert.alert('Logged Out', 'You have been successfully logged out.');\n      navigation.navigate('Home');\n    } catch (error) {\n      console.error('Logout failed', error);\n      Alert.alert('Logout Failed', 'An error occurred while logging out.');\n    }\n  };\n\n  const handleSwitchRole = async () => {\n    if (isApprovedProfessional) {\n      const newRole = userRole === 'professional' ? 'petOwner' : 'professional';\n      \n      await switchRole();\n      \n      // Store new route before navigating\n      const newRoute = 'Dashboard';\n      if (Platform.OS === 'web') {\n        sessionStorage.setItem('currentRoute', newRoute);\n      } else {\n        await AsyncStorage.setItem('currentRoute', newRoute);\n      }\n      \n      // Add a small delay to ensure state is updated before navigation\n      setTimeout(() => {\n        navigation.navigate(newRoute);\n      }, 0);\n    } else {\n      Alert.alert('Not Approved', 'You are not approved as a professional yet.');\n      handleNavigation('BecomeProfessional', 'Overview');\n    }\n  };\n\n  const menuItems = {\n    notSignedIn: [\n      { title: 'Sign In', icon: 'login', route: 'SignIn' },\n      { title: 'Sign Up', icon: 'account-plus-outline', route: 'SignUp' },\n      { title: 'Search Professionals', icon: 'magnify', route: 'SearchProfessionalsListing' },\n      // { title: 'About', icon: 'information-outline', route: 'AboutScreen' },\n      // { title: 'Help & FAQ', icon: 'help-circle-outline', route: 'HelpFAQ' },\n      { title: 'Privacy Policy', icon: 'shield-account', route: 'PrivacyPolicy' },\n      { title: 'Terms of Service', icon: 'file-document', route: 'TermsOfService' },\n      { title: 'Contact Us', icon: 'email', route: 'ContactUs' },\n    ],\n    petOwner: [\n      { title: 'My Profile', icon: 'account-outline', route: 'MyProfile' },\n      // { title: 'My Bookings', icon: 'calendar-check', route: 'MyBookings' },\n      // { title: 'My Contracts', icon: 'file-document-outline', route: 'MyContracts' },\n      // { title: 'Payment Methods', icon: 'credit-card-outline', route: 'PaymentMethods' },\n      { title: 'Connections', icon: 'account-group-outline', route: 'Connections' },\n      { title: 'Become a Professional', icon: 'account-tie', route: 'BecomeProfessional' },\n      // { title: 'Settings', icon: 'cog-outline', route: 'Settings' },\n      // { title: 'About', icon: 'information-outline', route: 'AboutScreen' },\n      // { title: 'Help & FAQ', icon: 'help-circle-outline', route: 'HelpFAQ' },\n      { title: 'Privacy Policy', icon: 'shield-account', route: 'PrivacyPolicy' },\n      { title: 'Terms of Service', icon: 'file-document', route: 'TermsOfService' },\n      { title: 'Contact Us', icon: 'email', route: 'ContactUs' },\n    ],\n    professional: [\n      { title: 'My Profile', icon: 'account-outline', route: 'MyProfile' },\n      { title: 'My Services', icon: 'briefcase-outline', route: 'ServiceManagerScreen' },\n      // { title: 'Availability Settings', icon: 'calendar-clock', route: 'AvailabilitySettings' },\n      // { title: 'My Bookings', icon: 'calendar-check', route: 'MyBookings' },\n      // { title: 'My Contracts', icon: 'file-document-outline', route: 'MyContracts' },\n      { title: 'Connections', icon: 'account-group-outline', route: 'Connections' },\n      // { title: 'Payment Methods', icon: 'credit-card-outline', route: 'PaymentMethods' },\n      // { title: 'Settings', icon: 'cog-outline', route: 'Settings' },\n      // { title: 'About', icon: 'information-outline', route: 'AboutScreen' },\n      // { title: 'Help & FAQ', icon: 'help-circle-outline', route: 'HelpFAQ' },\n      { title: 'Privacy Policy', icon: 'shield-account', route: 'PrivacyPolicy' },\n      { title: 'Terms of Service', icon: 'file-document', route: 'TermsOfService' },\n      { title: 'Contact Us', icon: 'email', route: 'ContactUs' },\n    ],\n  };\n\n  const renderMenuItems = () => {\n    let items;\n    if (!isSignedIn) {\n      items = menuItems.notSignedIn;\n    } else if (userRole === 'professional') {\n      items = menuItems.professional;\n    } else {\n      items = menuItems.petOwner;\n    }\n\n    return items.map((item, index) => (\n      <React.Fragment key={index}>\n        <List.Item\n          title={item.title}\n          titleStyle={styles.listItemTitle}\n          left={props => \n            Platform.OS === 'web' \n              ? <MaterialCommunityIcons \n                  name={item.icon} \n                  size={screenWidth <= 900 ? 20 : 24} \n                  color={theme.colors.primary} \n                />\n              : <List.Icon {...props} icon={item.icon} />\n          }\n          onPress={() => handleNavigation(item.route, item.tab)}\n          style={[\n            styles.webListItem,\n            { paddingHorizontal: screenWidth <= 900 ? 8 : 16 }\n          ]}\n        />\n        {index < items.length - 1 && <Divider />}\n      </React.Fragment>\n    ));\n  };\n\n  return (\n    <View style={styles.mainContainer}>\n      <SafeAreaView style={styles.container}>\n        {/* Mobile Header */}\n        {isMobile && (\n          <View style={styles.mobileHeader}>\n            <Text style={styles.headerTitle}>More</Text>\n          </View>\n        )}\n        \n        <ScrollView style={styles.scrollView} showsVerticalScrollIndicator={false}>\n          <View style={styles.content}>\n            <View style={styles.webContent}>\n              {/* Role Toggle for Mobile - Only show when signed in and approved professional */}\n              {isSignedIn && isApprovedProfessional && isMobile && (\n                <View style={styles.roleToggleSection}>\n                  <Text style={styles.sectionTitle}>Switch Role</Text>\n                  <View style={styles.roleButtons}>\n                    <TouchableOpacity\n                      style={[\n                        styles.roleButton,\n                        userRole === 'petOwner' && styles.roleButtonActive\n                      ]}\n                      onPress={() => handleSwitchRole()}\n                    >\n                      <Text\n                        style={[\n                          styles.roleButtonText,\n                          userRole === 'petOwner' && styles.roleButtonTextActive\n                        ]}\n                      >\n                        Pet Owner\n                      </Text>\n                    </TouchableOpacity>\n                    <TouchableOpacity\n                      style={[\n                        styles.roleButton,\n                        userRole === 'professional' && styles.roleButtonActive\n                      ]}\n                      onPress={() => handleSwitchRole()}\n                    >\n                      <Text\n                        style={[\n                          styles.roleButtonText,\n                          userRole === 'professional' && styles.roleButtonTextActive\n                        ]}\n                      >\n                        Professional\n                      </Text>\n                    </TouchableOpacity>\n                  </View>\n                </View>\n              )}\n              \n              <List.Section style={styles.listSection}>\n                {renderMenuItems()}\n              </List.Section>\n              \n              {isSignedIn && (\n                <View style={styles.buttonContainer}>\n                  <Button \n                    mode=\"contained\" \n                    onPress={handleLogout} \n                    style={[styles.logoutButton]}\n                    labelStyle={styles.buttonText}\n                  >\n                    Log Out\n                  </Button>\n                </View>\n              )}\n            </View>\n          </View>\n        </ScrollView>\n      </SafeAreaView>\n    </View>\n  );\n};\n\nconst createStyles = (screenWidth, isCollapsed) => StyleSheet.create({\n  mainContainer: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n    ...(Platform.OS === 'web' && screenWidth > 900 && {\n      height: '100vh',\n      overflow: 'hidden',\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      marginLeft: isCollapsed ? 70 : 250,\n      transition: 'margin-left 0.3s ease',\n    }),\n  },\n  container: {\n    flex: 1,\n  },\n  scrollView: {\n    flex: 1,\n  },\n  mobileHeader: {\n    backgroundColor: theme.colors.surface,\n    paddingHorizontal: 20,\n    paddingVertical: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  headerTitle: {\n    fontSize: theme.fontSizes.extraLarge,\n    fontWeight: 'bold',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  content: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n    paddingTop: Platform.OS === 'android' ? StatusBar.currentHeight : 0,\n  },\n  webContent: {\n    width: '100%',\n    maxWidth: screenWidth > 900 ? 800 : 600,\n    alignSelf: 'center',\n    padding: screenWidth <= 900 ? 16 : 16,\n    paddingTop: screenWidth <= 900 ? 16 : 16,\n    paddingBottom: screenWidth <= 900 ? 100 : 16, // Extra bottom padding for mobile to account for tab bar\n  },\n  roleToggleSection: {\n    backgroundColor: theme.colors.surface,\n    padding: 16,\n    marginBottom: 16,\n    borderRadius: 12,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  sectionTitle: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n    marginBottom: 12,\n  },\n  roleButtons: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n  roleButton: {\n    flex: 1,\n    padding: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n    backgroundColor: 'transparent',\n  },\n  roleButtonActive: {\n    backgroundColor: theme.colors.primary,\n  },\n  roleButtonText: {\n    fontSize: theme.fontSizes.medium,\n    fontFamily: theme.fonts.regular.fontFamily,\n    color: theme.colors.primary,\n    fontWeight: '500',\n  },\n  roleButtonTextActive: {\n    color: theme.colors.surface,\n  },\n  listSection: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    marginBottom: 16,\n  },\n  webListItem: {\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n    paddingVertical: screenWidth <= 900 ? 8 : 12,\n  },\n  listItemTitle: {\n    fontSize: screenWidth <= 900 ? theme.fontSizes.medium : theme.fontSizes.large,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n  },\n  buttonContainer: {\n    marginBottom: 16,\n  },\n  switchRoleButton: {\n    borderColor: theme.colors.primary,\n  },\n  logoutButton: {\n    backgroundColor: theme.colors.error,\n  },\n  buttonText: {\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n  }\n});\n\nexport default MoreScreen;\n","import React, { useState } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Modal } from 'react-native';\nimport { theme } from '../styles/theme';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { format, parse } from 'date-fns';\n\nconst UnavailableTimeSlot = ({ startTime, endTime, reason, onPress, onRemove }) => {\n  const [showAllServices, setShowAllServices] = useState(false);\n  \n  const isAllDay = startTime === '00:00' && endTime === '24:00';\n\n  const formatTime = (time) => {\n    if (isAllDay) {\n      return 'All Day';\n    }\n    \n    if (typeof time === 'string') {\n      try {\n        const date = parse(time, 'HH:mm', new Date());\n        return format(date, 'h:mm a');\n      } catch (error) {\n        console.warn(`Invalid time format: ${time}`);\n        return 'Invalid Time';\n      }\n    } else if (time instanceof Date) {\n      return format(time, 'h:mm a');\n    } else {\n      console.warn(`Invalid time format: ${time}`);\n      return 'Invalid Time';\n    }\n  };\n\n  const formatServicesDisplay = () => {\n    const services = reason?.replace('Unavailable for: ', '').split(', ') || [];\n    \n    if (services.length === 0) return 'No services specified';\n    if (services.length === 10) return 'All Services';\n    return `${services.length} ${services.length === 1 ? 'Service' : 'Services'}`;\n  };\n\n  return (\n    <>\n      <View style={styles.container}>\n        <TouchableOpacity \n          style={styles.removeButton} \n          onPress={onRemove}\n        >\n          <MaterialCommunityIcons name=\"close\" size={20} color={theme.colors.error} />\n        </TouchableOpacity>\n        \n        <View style={styles.contentContainer}>\n          <Text style={styles.time}>\n            {isAllDay ? 'All Day' : `${formatTime(startTime)} - ${formatTime(endTime)}`}\n          </Text>\n          <View style={styles.serviceContainer}>\n            <Text style={styles.reason}>{formatServicesDisplay()}</Text>\n            {reason && (\n              <TouchableOpacity \n                onPress={() => setShowAllServices(true)}\n                style={styles.seeMoreButton}\n              >\n                <Text style={styles.seeMoreText}>See All</Text>\n              </TouchableOpacity>\n            )}\n          </View>\n        </View>\n      </View>\n\n      <Modal\n        visible={showAllServices}\n        transparent={true}\n        animationType=\"fade\"\n        onRequestClose={() => setShowAllServices(false)}\n      >\n        <TouchableOpacity \n          style={styles.modalOverlay}\n          activeOpacity={1}\n          onPress={() => setShowAllServices(false)}\n        >\n          <View style={styles.modalContent}>\n            <View style={styles.modalHeader}>\n              <Text style={styles.modalTitle}>Unavailable Services</Text>\n              <TouchableOpacity onPress={() => setShowAllServices(false)}>\n                <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.text} />\n              </TouchableOpacity>\n            </View>\n            <Text style={styles.modalTime}>\n              {formatTime(startTime)} - {formatTime(endTime)}\n            </Text>\n            {reason?.replace('Unavailable for: ', '').split(', ').map((service, index) => (\n              <Text key={index} style={styles.serviceItem}>• {service}</Text>\n            ))}\n          </View>\n        </TouchableOpacity>\n      </Modal>\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 8,\n    paddingHorizontal: 10,\n    backgroundColor: theme.colors.lightGrey,\n    borderRadius: 5,\n    marginBottom: 5,\n  },\n  removeButton: {\n    padding: 5,\n    marginRight: 5,\n  },\n  contentContainer: {\n    flex: 1,\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  time: {\n    fontSize: theme.fontSizes.small,\n    fontWeight: 'bold',\n    flex: 1,\n  },\n  serviceContainer: {\n    flex: 2,\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    alignItems: 'center',\n  },\n  reason: {\n    fontSize: theme.fontSizes.small,\n    color: theme.colors.textSecondary,\n    marginRight: 8,\n  },\n  seeMoreButton: {\n    padding: 4,\n    borderRadius: 4,\n    backgroundColor: theme.colors.primary,\n  },\n  seeMoreText: {\n    color: theme.colors.whiteText,\n    fontSize: theme.fontSizes.small,\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    backgroundColor: theme.colors.background,\n    borderRadius: 8,\n    padding: 16,\n    width: '80%',\n    maxHeight: '80%',\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  modalTitle: {\n    fontSize: theme.fontSizes.large,\n    fontWeight: 'bold',\n    color: theme.colors.text,\n  },\n  modalTime: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    marginBottom: 12,\n  },\n  serviceItem: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    paddingVertical: 4,\n  },\n});\n\nexport default UnavailableTimeSlot;\n","// First, create a new BookingCard component\n// src/components/BookingCard.js\n\nimport React from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { format, parse } from 'date-fns';\nimport { useNavigation } from '@react-navigation/native';\n\nconst AvailabilityBookingCard = ({ booking, onPress, onEdit }) => {\n  const navigation = useNavigation();\n  const formatTime = (time) => {\n    try {\n      const date = parse(time, 'HH:mm', new Date());\n      return format(date, 'h:mm a');\n    } catch (error) {\n      console.warn(`Invalid time format: ${time}`);\n      return 'Invalid Time';\n    }\n  };\n\n  const handlePress = () => {\n    if (onPress) {\n      onPress(booking);\n    }\n  };\n\n  return (\n    <TouchableOpacity \n      style={styles.card} \n      onPress={handlePress}\n    >\n      <View style={styles.cardContent}>\n        <View style={styles.timeContainer}>\n          <MaterialCommunityIcons name=\"clock-outline\" size={20} color={theme.colors.primary} />\n          <Text style={styles.timeText}>\n            {formatTime(booking.startTime)} - {formatTime(booking.endTime)}\n          </Text>\n        </View>\n        <Text style={styles.ownerName}>Booked with {booking.owner_name}</Text>\n      </View>\n      <TouchableOpacity \n        style={styles.editButton} \n        onPress={handlePress}\n      >\n        <MaterialCommunityIcons name=\"pencil\" size={20} color={theme.colors.primary} />\n      </TouchableOpacity>\n    </TouchableOpacity>\n  );\n};\n\nconst styles = StyleSheet.create({\n  card: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    padding: 12,\n    marginBottom: 8,\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    elevation: 2,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.2,\n    shadowRadius: 2,\n  },\n  cardContent: {\n    flex: 1,\n  },\n  timeContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 4,\n  },\n  timeText: {\n    marginLeft: 8,\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    fontWeight: '500',\n  },\n  ownerName: {\n    fontSize: theme.fontSizes.small,\n    color: theme.colors.textSecondary,\n  },\n  editButton: {\n    padding: 8,\n  },\n});\n\nexport default AvailabilityBookingCard;","import React, { useContext } from 'react';\nimport { View, Text, StyleSheet, Platform, TouchableOpacity } from 'react-native';\nimport DateTimePicker from '@react-native-community/datetimepicker';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { AuthContext } from '../context/AuthContext';\n\nconst TimePicker = ({ \n  label, \n  value, \n  onChange, \n  fullWidth = false, \n  containerStyle,\n  error,\n  disabled = false \n}) => {\n  const [showPicker, setShowPicker] = React.useState(false);\n  const { screenWidth } = useContext(AuthContext);\n  const showClockIcon = screenWidth > 400;\n\n  const handleChange = (event, selectedDate) => {\n    setShowPicker(Platform.OS === 'ios');\n    if (selectedDate) {\n      onChange(selectedDate);\n    }\n  };\n\n  const showTimepicker = () => {\n    setShowPicker(true);\n  };\n\n  if (Platform.OS === 'web') {\n    // Add browser detection for Chrome\n    const isChrome = typeof navigator !== 'undefined' && /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);\n\n    // Create style element using React.createElement to avoid JSX parsing on mobile\n    const styleElement = React.createElement('style', {}, `\n      input[type=\"time\"]::-webkit-calendar-picker-indicator {\n        display: ${showClockIcon && isChrome ? 'block' : 'none'};\n      }\n      input[type=\"time\"]::-webkit-inner-spin-button,\n      input[type=\"time\"]::-webkit-clear-button {\n        display: none;\n      }\n    `);\n\n    // Create input element using React.createElement\n    const inputElement = React.createElement('input', {\n      type: 'time',\n      value: value.toTimeString().slice(0, 5),\n      onChange: (e) => onChange(new Date(`2000-01-01T${e.target.value}`)),\n      style: {\n        ...styles.webInput,\n        paddingRight: '12px',\n      },\n      disabled: disabled\n    });\n\n    const handleIconPress = () => {\n      if (!disabled && typeof document !== 'undefined') {\n        const input = document.querySelector('input[type=\"time\"]');\n        if (input && typeof input.showPicker === 'function') {\n          input.showPicker();\n        }\n      }\n    };\n\n    return (\n      <View style={[styles.container, fullWidth && styles.fullWidth, containerStyle]}>\n        {label && <Text style={[styles.label, error && styles.errorText]}>{label}</Text>}\n        <View style={[\n          styles.webInputContainer,\n          !fullWidth && styles.compactTimeButton,\n          error && styles.errorBorder,\n          disabled && styles.disabled\n        ]}>\n          {styleElement}\n          {inputElement}\n          {showClockIcon && !isChrome && (\n            <MaterialCommunityIcons \n              name=\"clock-outline\" \n              size={24} \n              color={disabled ? theme.colors.placeholder : theme.colors.text}\n              style={styles.webIcon}\n              onPress={disabled ? null : handleIconPress}\n            />\n          )}\n        </View>\n        {error && <Text style={styles.errorMessage}>{error}</Text>}\n      </View>\n    );\n  }\n\n  return (\n    <View style={[styles.container, fullWidth && styles.fullWidth, containerStyle]}>\n      {label && <Text style={[styles.label, error && styles.errorText]}>{label}</Text>}\n      <TouchableOpacity \n        onPress={showTimepicker}\n        style={[\n          styles.timeButton, \n          !fullWidth && styles.compactTimeButton,\n          error && styles.errorBorder,\n          disabled && styles.disabled\n        ]}\n        disabled={disabled}\n      >\n        <Text style={[styles.timeText, disabled && styles.disabledText]}>\n          {value.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\n        </Text>\n        {showClockIcon && (\n          <MaterialCommunityIcons \n            name=\"clock-outline\" \n            size={24} \n            color={disabled ? theme.colors.placeholder : theme.colors.text} \n          />\n        )}\n      </TouchableOpacity>\n      {error && <Text style={styles.errorMessage}>{error}</Text>}\n      {showPicker && (\n        <DateTimePicker\n          value={value}\n          mode=\"time\"\n          is24Hour={true}\n          display=\"default\"\n          onChange={handleChange}\n          disabled={disabled}\n        />\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    // marginVertical: 8,\n    // marginBottom: 8,\n  },\n  fullWidth: {\n    width: '100%',\n  },\n  label: {\n    fontSize: theme.fontSizes.smallMedium,\n    color: theme.colors.placeholder,\n    fontWeight: '500',\n  },\n  timeButton: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 8,\n    padding: 8,\n    backgroundColor: theme.colors.background,\n    minHeight: 20,\n  },\n  compactTimeButton: {\n    width: 150,\n  },\n  timeText: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n  },\n  webInputContainer: {\n    position: 'relative',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 8,\n    backgroundColor: theme.colors.background,\n    overflow: 'hidden',\n    height: 40,\n    display: 'flex',\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  webInput: {\n    // padding: '8px 36px 8px 12px',\n    fontSize: theme.fontSizes.medium,\n    marginLeft: 12,\n    width: '90%',\n    height: '100%',\n    border: 'none',\n    outline: 'none',\n    backgroundColor: 'transparent',\n    color: theme.colors.text,\n  },\n  webIcon: {\n    position: 'absolute',\n    right: 12,\n    cursor: 'pointer',\n    pointerEvents: 'auto',\n  },\n  errorBorder: {\n    borderColor: theme.colors.error,\n  },\n  errorText: {\n    color: theme.colors.error,\n  },\n  errorMessage: {\n    color: theme.colors.error,\n    fontSize: theme.fontSizes.small,\n    marginTop: 4,\n  },\n  disabled: {\n    backgroundColor: theme.colors.disabled,\n    opacity: 0.7,\n  },\n  disabledText: {\n    color: theme.colors.placeholder,\n  },\n});\n\nexport default TimePicker;\n\n","import React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, Modal, TouchableOpacity, Switch, Platform, Dimensions, ScrollView } from 'react-native';\nimport { theme } from '../styles/theme';\nimport UnavailableTimeSlot from './UnavailableTimeSlot';\nimport { format, parse } from 'date-fns';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { SERVICE_TYPES, ALL_SERVICES } from '../data/mockData';\nimport AvailabilityBookingCard from './AvailabilityBookingCard';\nimport { useNavigation } from '@react-navigation/native';\nimport TimePicker from './TimePicker';\n\nconst { width, height: SCREEN_HEIGHT } = Dimensions.get('window');\nconst modalWidth = Platform.OS === 'web' ? width * 0.4 : width * 0.9;\n\nconst AddAvailabilityModal = ({ isVisible: propIsVisible, onClose, onSave, selectedDates, currentAvailability, bookings, onRemoveTimeSlot }) => {\n  const [isVisible, setIsVisible] = useState(propIsVisible);\n  const [isAllDay, setIsAllDay] = useState(false);\n  const [startTime, setStartTime] = useState(new Date());\n  const [endTime, setEndTime] = useState(new Date());\n  const [showStartTimePicker, setShowStartTimePicker] = useState(false);\n  const [showEndTimePicker, setShowEndTimePicker] = useState(false);\n  const [selectedServices, setSelectedServices] = useState([]);\n  const [showServiceDropdown, setShowServiceDropdown] = useState(false);\n  const [modalWidth, setModalWidth] = useState(getModalWidth());\n  const [activeView, setActiveView] = useState('bookings');\n  const [editingBooking, setEditingBooking] = useState(null);\n  const navigation = useNavigation();\n\n  useEffect(() => {\n    setIsVisible(propIsVisible);\n  }, [propIsVisible]);\n\n  function getModalWidth() {\n    const { width } = Dimensions.get('window');\n    return width < 600 ? width * 0.9 : width * 0.4;\n  }\n\n  useEffect(() => {\n    const updateWidth = () => {\n      setModalWidth(getModalWidth());\n    };\n\n    const dimensionsHandler = Dimensions.addEventListener('change', updateWidth);\n\n    return () => {\n      dimensionsHandler.remove();\n    };\n  }, []);\n\n  const isTimeSlotUnavailable = () => {\n    if (!startTime || !endTime || isAllDay) return false;\n    \n    return selectedDates.some(date => {\n      const existingTimes = currentAvailability[date]?.unavailableTimes || [];\n      return existingTimes.some(time => {\n        const [existingStartHour, existingStartMin] = time.startTime.split(':').map(Number);\n        const [existingEndHour, existingEndMin] = time.endTime.split(':').map(Number);\n        const newStartStr = format(startTime, 'HH:mm');\n        const newEndStr = format(endTime, 'HH:mm');\n        const [newStartHour, newStartMin] = newStartStr.split(':').map(Number);\n        const [newEndHour, newEndMin] = newEndStr.split(':').map(Number);\n        \n        return newStartHour === existingStartHour && \n               newStartMin === existingStartMin && \n               newEndHour === existingEndHour && \n               newEndMin === existingEndMin;\n      });\n    });\n  };\n\n  const handleMarkUnavailable = () => {\n    if (selectedServices.length === 0 || isTimeSlotUnavailable()) return;\n    \n    const services = selectedServices.includes(ALL_SERVICES) \n      ? SERVICE_TYPES.filter(service => service !== ALL_SERVICES) \n      : selectedServices;\n\n    onSave({\n      dates: selectedDates,\n      isAllDay,\n      startTime: isAllDay ? null : format(startTime, 'HH:mm'),\n      endTime: isAllDay ? null : format(endTime, 'HH:mm'),\n      isUnavailable: true,\n      serviceTypes: services,\n      reason: `Unavailable for: ${services.join(', ')}`,\n    });\n  };\n\n  const handleMarkAvailable = () => {\n    if (selectedServices.length === 0 || !isTimeSlotUnavailable()) return;\n\n    const newStartStr = format(startTime, 'HH:mm');\n    const newEndStr = format(endTime, 'HH:mm');\n\n    const updatedAvailability = {};\n    \n    selectedDates.forEach(selectedDate => {\n      if (currentAvailability[selectedDate]?.unavailableTimes) {\n        const currentTimes = currentAvailability[selectedDate].unavailableTimes;\n        const filteredTimes = currentTimes.filter(time => \n          time.startTime !== newStartStr || time.endTime !== newEndStr\n        );\n\n        updatedAvailability[selectedDate] = {\n          ...currentAvailability[selectedDate],\n          unavailableTimes: filteredTimes\n        };\n      }\n    });\n\n    onRemoveTimeSlot(selectedDates[0], { startTime: newStartStr, endTime: newEndStr }, updatedAvailability, selectedDates);\n  };\n\n  const handleRemoveTimeSlot = (date, timeSlot) => {\n    if (selectedDates.length === 1) {\n      onRemoveTimeSlot(date, timeSlot);\n      return;\n    }\n\n    const updatedAvailability = {};\n    \n    selectedDates.forEach(selectedDate => {\n      if (currentAvailability[selectedDate]?.unavailableTimes) {\n        const currentTimes = currentAvailability[selectedDate].unavailableTimes;\n        const filteredTimes = currentTimes.filter(time => \n          time.startTime !== timeSlot.startTime || time.endTime !== timeSlot.endTime\n        );\n\n        updatedAvailability[selectedDate] = {\n          ...currentAvailability[selectedDate],\n          unavailableTimes: filteredTimes\n        };\n      }\n    });\n\n    onRemoveTimeSlot(date, timeSlot, updatedAvailability, selectedDates);\n  };\n\n  const renderUnavailableTimes = () => {\n    if (selectedDates.length === 0) return null;\n\n    const date = selectedDates[0];\n    const unavailableTimes = currentAvailability[date]?.unavailableTimes || [];\n\n    if (unavailableTimes.length === 0) return null;\n\n    return (\n      <View style={styles.unavailableTimesContainer}>\n        <Text style={styles.sectionTitle}>Unavailable Times:</Text>\n        <ScrollView>\n          {unavailableTimes.map((time, index) => (\n            <UnavailableTimeSlot\n              key={index}\n              startTime={time.startTime}\n              endTime={time.endTime}\n              reason={time.reason}\n              onRemove={() => handleRemoveTimeSlot(date, time)}\n            />\n          ))}\n        </ScrollView>\n      </View>\n    );\n  };\n\nconst renderTimePicker = () => (\n  <>\n    <View style={styles.timePickerContainer}>\n      <Text>Start Time:</Text>\n      <TimePicker\n        value={startTime}\n        onChange={setStartTime}\n        showPicker={showStartTimePicker}\n        setShowPicker={setShowStartTimePicker}\n        fullWidth\n      />\n    </View>\n    <View style={styles.timePickerContainer}>\n      <Text>End Time:</Text>\n      <TimePicker\n        value={endTime}\n        onChange={setEndTime}\n        showPicker={showEndTimePicker}\n        setShowPicker={setShowEndTimePicker}\n        fullWidth\n      />\n    </View>\n  </>\n);\n\nconst formatSelectedDates = () => {\n  if (!selectedDates || selectedDates.length === 0) return '';\n  \n  const startDate = selectedDates[0];\n  const endDate = selectedDates[selectedDates.length - 1];\n  \n  if (startDate === endDate) {\n    return startDate;\n  }\n  \n  return `${startDate} - ${endDate}`;\n};\n\nconst handleEditBooking = async (booking) => {\n  setEditingBooking(booking);\n  // Implement your booking edit logic here\n  try {\n    const response = await updateBooking({\n      ...booking,\n      // Add your updated booking data\n    });\n    \n    if (response.success) {\n      // Update local state\n      // Implement your state update logic\n    }\n  } catch (error) {\n    console.error('Failed to update booking:', error);\n  }\n};\n\nconst renderToggleButtons = () => (\n  <View style={styles.toggleContainer}>\n    <TouchableOpacity\n      style={[\n        styles.toggleButton,\n        activeView === 'unavailable' && styles.activeToggle\n      ]}\n      onPress={() => setActiveView('unavailable')}\n    >\n      <Text style={[\n        styles.toggleText,\n        activeView === 'unavailable' && styles.activeToggleText\n      ]}>\n        Unavailable Times\n      </Text>\n    </TouchableOpacity>\n    <TouchableOpacity\n      style={[\n        styles.toggleButton,\n        activeView === 'bookings' && styles.activeToggle\n      ]}\n      onPress={() => setActiveView('bookings')}\n    >\n      <Text style={[\n        styles.toggleText,\n        activeView === 'bookings' && styles.activeToggleText\n      ]}>\n        Bookings\n      </Text>\n    </TouchableOpacity>\n  </View>\n);\n\nconst renderBookings = () => {\n  const dateBookings = selectedDates.reduce((acc, date) => {\n    if (bookings[date]) {\n      acc.push(...bookings[date].map(booking => ({\n        ...booking,\n        date\n      })));\n    }\n    return acc;\n  }, []);\n\n  if (dateBookings.length === 0) {\n    return (\n      <View style={styles.emptyState}>\n        <MaterialCommunityIcons \n          name=\"calendar-blank\" \n          size={48} \n          color={theme.colors.textSecondary} \n        />\n        <Text style={styles.emptyStateText}>No bookings for selected dates</Text>\n      </View>\n    );\n  }\n\n  const handleBookingPress = (booking) => {\n    onClose();\n    \n    // Navigate after a short delay\n    setTimeout(() => {\n      navigation.navigate('BookingDetails', { bookingId: booking.id });\n    }, 300);\n  };\n\n  return (\n    <View style={styles.bookingsContainer}>\n      <ScrollView \n        style={styles.bookingsList}\n        nestedScrollEnabled={true}\n      >\n        {dateBookings.map((booking, index) => (\n          <AvailabilityBookingCard\n            key={index}\n            booking={booking}\n            onPress={() => handleBookingPress(booking)}\n            onEdit={() => handleBookingPress(booking)}\n          />\n        ))}\n      </ScrollView>\n    </View>\n  );\n};\n\n  return (\n    <Modal\n      visible={isVisible}\n      animationType=\"slide\"\n      transparent={true}\n      onRequestClose={onClose}\n    >\n      <View style={styles.modalContainer}>\n        <View style={[styles.modalContent, { width: modalWidth }]}>\n          <View style={styles.modalHeader}>\n            <Text style={styles.modalTitle}>\n              {selectedDates.length > 1 ? 'Edit Multiple Days' : 'Edit Availability'}\n            </Text>\n            <TouchableOpacity \n              style={styles.closeButton} \n              onPress={onClose}\n            >\n              <MaterialCommunityIcons \n                name=\"close\" \n                size={24} \n                color={theme.colors.text} \n              />\n            </TouchableOpacity>\n          </View>\n\n          <Text style={styles.selectedDatesText}>\n            Selected Dates: {formatSelectedDates()}\n          </Text>\n\n          {renderToggleButtons()}\n          \n          <ScrollView \n            style={styles.contentScrollView}\n            nestedScrollEnabled={true}\n          >\n            {activeView === 'unavailable' ? (\n              <View style={styles.unavailableTimesWrapper}>\n                {renderUnavailableTimes()}\n              </View>\n            ) : (\n              <View style={styles.bookingsWrapper}>\n                {renderBookings()}\n              </View>\n            )}\n\n            <View style={styles.availabilityControls}>\n              <View style={styles.inputWrapper}>\n                <Text style={styles.inputLabel}>Service Type(s) *</Text>\n                <TouchableOpacity\n                  style={[\n                    styles.input,\n                    styles.customDropdown,\n                    selectedServices.length === 0 && styles.inputError\n                  ]}\n                  onPress={() => setShowServiceDropdown(!showServiceDropdown)}\n                >\n                  <Text style={{\n                    color: selectedServices.length > 0 ? theme.colors.text : theme.colors.placeHolderText\n                  }}>\n                    {selectedServices.length > 0 \n                      ? selectedServices.includes(ALL_SERVICES)\n                        ? \"All Services\"\n                        : selectedServices.length > 1\n                          ? `${selectedServices.length} services selected`\n                          : selectedServices[0]\n                      : \"Select service type(s)\"\n                    }\n                  </Text>\n                  <MaterialCommunityIcons \n                    name={showServiceDropdown ? \"chevron-up\" : \"chevron-down\"} \n                    size={24} \n                    color={theme.colors.primary} \n                  />\n                </TouchableOpacity>\n                \n                {showServiceDropdown && (\n                  <View style={styles.dropdownContainer}>\n                    <ScrollView style={styles.dropdownScroll}>\n                      {SERVICE_TYPES.map((service) => (\n                        <TouchableOpacity\n                          key={service}\n                          style={styles.dropdownItem}\n                          onPress={() => {\n                            if (service === ALL_SERVICES) {\n                              setSelectedServices(\n                                selectedServices.includes(ALL_SERVICES) \n                                  ? [] \n                                  : [ALL_SERVICES]\n                              );\n                            } else {\n                              setSelectedServices(prev => {\n                                // Remove \"All Services\" if it was selected\n                                const withoutAll = prev.filter(s => s !== ALL_SERVICES);\n                                \n                                if (prev.includes(service)) {\n                                  return withoutAll.filter(s => s !== service);\n                                } else {\n                                  return [...withoutAll, service];\n                                }\n                              });\n                            }\n                          }}\n                        >\n                          <View style={styles.dropdownItemContent}>\n                            <Text style={[\n                              styles.dropdownText,\n                              selectedServices.includes(service) && styles.selectedOption\n                            ]}>\n                              {service}\n                            </Text>\n                            {selectedServices.includes(service) && (\n                              <MaterialCommunityIcons \n                                name=\"check\" \n                                size={20} \n                                color={theme.colors.primary} \n                              />\n                            )}\n                          </View>\n                        </TouchableOpacity>\n                      ))}\n                    </ScrollView>\n                  </View>\n                )}\n              </View>\n\n              <View style={styles.switchContainer}>\n                <Text>All Day</Text>\n                <Switch value={isAllDay} onValueChange={setIsAllDay} />\n              </View>\n\n              {!isAllDay && renderTimePicker()}\n\n              <View style={styles.buttonContainer}>\n                <TouchableOpacity\n                  style={[\n                    styles.availabilityButton,\n                    styles.availableButton,\n                    (selectedServices.length === 0 || !isTimeSlotUnavailable()) && styles.disabledButton\n                  ]}\n                  onPress={handleMarkAvailable}\n                  disabled={selectedServices.length === 0 || !isTimeSlotUnavailable()}\n                >\n                  <Text style={styles.availabilityButtonText}>\n                    Mark Available\n                  </Text>\n                </TouchableOpacity>\n\n                <TouchableOpacity\n                  style={[\n                    styles.availabilityButton,\n                    styles.unavailableButton,\n                    (selectedServices.length === 0 || isTimeSlotUnavailable()) && styles.disabledButton\n                  ]}\n                  onPress={handleMarkUnavailable}\n                  disabled={selectedServices.length === 0 || isTimeSlotUnavailable()}\n                >\n                  <Text style={styles.availabilityButtonText}>\n                    Mark Unavailable\n                  </Text>\n                </TouchableOpacity>\n              </View>\n            </View>\n          </ScrollView>\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  modalContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n  },\n  modalContent: {\n    backgroundColor: theme.colors.background,\n    padding: 22,\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 17,\n    maxHeight: SCREEN_HEIGHT * 0.7,\n    zIndex: 1,\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    width: '100%',\n    marginBottom: 15,\n  },\n  modalTitle: {\n    fontSize: theme.fontSizes.large,\n    fontWeight: 'bold',\n  },\n  closeButton: {\n    padding: 5,\n  },\n  switchContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    width: '100%',\n    marginVertical: 10,\n    zIndex: 1,\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    width: '100%',\n    marginTop: 20,\n    gap: 10,\n  },\n  availabilityButton: {\n    padding: 10,\n    borderRadius: 5,\n    flex: 1,\n    alignItems: 'center',\n  },\n  availableButton: {\n    backgroundColor: theme.colors.primary,\n  },\n  unavailableButton: {\n    backgroundColor: theme.colors.danger,\n  },\n  disabledButton: {\n    opacity: 0.5,\n  },\n  availabilityButtonText: {\n    color: theme.colors.whiteText,\n    fontWeight: 'bold',\n  },\n  timePickerContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    width: '100%',\n    marginVertical: 10,\n    zIndex: 1,\n  },\n  webTimePicker: {\n    padding: 5,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 5,\n  },\n  unavailableTimesContainer: {\n    marginTop: 20,\n    maxHeight: 200,\n  },\n  sectionTitle: {\n    fontSize: theme.fontSizes.medium,\n    fontWeight: 'bold',\n    marginBottom: 10,\n  },\n  inputWrapper: {\n    position: 'relative',\n    width: '100%',\n    marginBottom: 15,\n    zIndex: 2,\n  },\n  \n  inputLabel: {\n    fontSize: theme.fontSizes.small,\n    color: theme.colors.text,\n    marginBottom: 5,\n    fontWeight: '500',\n  },\n  \n  input: {\n    borderColor: theme.colors.border,\n    borderWidth: 1,\n    borderRadius: 5,\n    padding: 10,\n    backgroundColor: theme.colors.inputBackground,\n  },\n  \n  customDropdown: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    height: 40,\n  },\n  \n  dropdownContainer: {\n    position: 'absolute',\n    top: '95%',\n    left: 0,\n    right: 0,\n    backgroundColor: theme.colors.surface,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 5,\n    marginTop: 2,\n    maxHeight: 160,\n    zIndex: 1000,\n    elevation: 5,\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n  },\n  \n  dropdownScroll: {\n    maxHeight: 160,\n  },\n  \n  dropdownItem: {\n    padding: 10,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n    height: 40,\n  },\n  \n  dropdownText: {\n    color: theme.colors.text,\n    fontSize: theme.fontSizes.medium,\n  },\n  \n  selectedOption: {\n    color: theme.colors.primary,\n    fontWeight: 'bold',\n  },\n  \n  inputError: {\n    borderColor: theme.colors.danger,\n  },\n  \n  dropdownItemContent: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingRight: 10,\n  },\n  toggleContainer: {\n    flexDirection: 'row',\n    marginBottom: 16,\n    borderRadius: 8,\n    backgroundColor: theme.colors.surface,\n    padding: 4,\n  },\n  toggleButton: {\n    flex: 1,\n    paddingVertical: 8,\n    paddingHorizontal: 16,\n    borderRadius: 6,\n    borderColor: theme.colors.border,\n    borderWidth: 1,\n    margin: 2,\n  },\n  activeToggle: {\n    backgroundColor: theme.colors.primary,\n  },\n  toggleText: {\n    textAlign: 'center',\n    color: theme.colors.text,\n    fontSize: theme.fontSizes.small,\n  },\n  activeToggleText: {\n    color: theme.colors.whiteText,\n    fontWeight: '500',\n  },\n  bookingsList: {\n    maxHeight: 300,\n  },\n  emptyState: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 32,\n  },\n  emptyStateText: {\n    marginTop: 16,\n    color: theme.colors.textSecondary,\n    fontSize: theme.fontSizes.medium,\n    textAlign: 'center',\n  },\n  contentScrollView: {\n    flex: 1,\n    width: '100%',\n  },\n  availabilityControls: {\n    marginTop: 20,\n    paddingTop: 20,\n    borderTopWidth: 1,\n    borderTopColor: theme.colors.border,\n    width: '100%',\n  },\n  bookingsContainer: {\n    maxHeight: 200,\n    marginBottom: 16,\n  },\n  unavailableTimesWrapper: {\n    maxHeight: 200,\n    marginBottom: 16,\n  },\n  bookingsWrapper: {\n    marginBottom: 16,\n  },\n  selectedDatesText: {\n    marginVertical: 8,\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n  },\n});\n\nexport default AddAvailabilityModal;\n","import React, { useState } from 'react';\nimport { View, Text, StyleSheet, Platform } from 'react-native';\nimport { theme } from '../../styles/theme';\n\nconst DatetimePicker = ({ \n  format = [\n    [\"months\", \"days\", \"years\"],\n    [\"hours\", \"minutes\", \"am/pm\"]\n  ],\n  value,\n  onChange,\n  disabled = false,\n  isInModal = false,\n  error = false\n}) => {\n  const [selectedValues, setSelectedValues] = useState({\n    months: '',\n    days: '',\n    years: '',\n    hours: '',\n    minutes: '',\n    ampm: 'AM'\n  });\n\n  // Only render on web platform\n  if (Platform.OS !== 'web') {\n    return null;\n  }\n\n  const handleSelectChange = (type, value) => {\n    if (disabled) return;\n    \n    const newValues = { ...selectedValues, [type]: value };\n    setSelectedValues(newValues);\n    \n    if (onChange) {\n      // Convert to date object and call onChange\n      const date = convertToDate(newValues);\n      onChange(date);\n    }\n  };\n\n  const convertToDate = (values) => {\n    const { months, days, years, hours, minutes, ampm } = values;\n    if (!months || !days || !years) return null;\n    \n    let hour = parseInt(hours || '12');\n    if (ampm === 'PM' && hour !== 12) hour += 12;\n    if (ampm === 'AM' && hour === 12) hour = 0;\n    \n    return new Date(\n      parseInt(years),\n      parseInt(months) - 1,\n      parseInt(days),\n      hour,\n      parseInt(minutes || '0')\n    );\n  };\n\n  const renderSelect = (type) => {\n    let options = [];\n    switch (type) {\n      case 'months':\n        options = Array.from({ length: 12 }, (_, i) => ({\n          value: (i + 1).toString(),\n          label: new Date(2000, i).toLocaleString('default', { month: 'long' })\n        }));\n        break;\n      case 'days':\n        options = Array.from({ length: 31 }, (_, i) => ({\n          value: (i + 1).toString(),\n          label: (i + 1).toString()\n        }));\n        break;\n      case 'years':\n        const currentYear = new Date().getFullYear();\n        options = Array.from({ length: 100 }, (_, i) => ({\n          value: (currentYear - 50 + i).toString(),\n          label: (currentYear - 50 + i).toString()\n        }));\n        break;\n      case 'hours':\n        options = Array.from({ length: 12 }, (_, i) => ({\n          value: (i + 1).toString(),\n          label: (i + 1).toString()\n        }));\n        break;\n      case 'minutes':\n        options = Array.from({ length: 60 }, (_, i) => ({\n          value: i.toString().padStart(2, '0'),\n          label: i.toString().padStart(2, '0')\n        }));\n        break;\n      case 'am/pm':\n        options = [\n          { value: 'AM', label: 'AM' },\n          { value: 'PM', label: 'PM' }\n        ];\n        break;\n    }\n\n    const handleChange = (e) => {\n      if (isInModal && Platform.OS === 'web') {\n        e.stopPropagation();\n      }\n      handleSelectChange(type === 'am/pm' ? 'ampm' : type, e.target.value);\n    };\n\n    const selectStyle = {\n      ...styles.select,\n      ...(error ? styles.errorSelect : {}),\n      ...(type === 'months' ? styles.monthSelect : {}),\n      ...(type === 'years' ? styles.yearSelect : {}),\n      ...(type === 'days' ? styles.daySelect : {})\n    };\n\n    return (\n      React.createElement('select', {\n        value: selectedValues[type === 'am/pm' ? 'ampm' : type],\n        onChange: handleChange,\n        style: selectStyle,\n        disabled: disabled\n      }, [\n        React.createElement('option', { \n          key: 'default', \n          value: '' \n        }, type.charAt(0).toUpperCase() + type.slice(1)),\n        ...options.map(option => \n          React.createElement('option', {\n            key: option.value,\n            value: option.value\n          }, option.label)\n        )\n      ])\n    );\n  };\n\n  return (\n    <View style={styles.container}>\n      {format.map((row, rowIndex) => (\n        <View key={rowIndex} style={styles.row}>\n          {row.map((type, index) => (\n            <View key={type} style={styles.selectContainer}>\n              {renderSelect(type)}\n            </View>\n          ))}\n        </View>\n      ))}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    width: '100%',\n  },\n  row: {\n    flexDirection: 'row',\n    marginBottom: 8,\n    gap: 8,\n  },\n  selectContainer: {\n    flex: 1,\n  },\n  select: {\n    width: '100%',\n    padding: 8,\n    borderRadius: 4,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    backgroundColor: theme.colors.background,\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    appearance: 'none',\n    WebkitAppearance: 'none',\n    MozAppearance: 'none',\n    paddingRight: 8,\n    cursor: 'pointer',\n  },\n  monthSelect: {\n    flex: 1.5,\n  },\n  daySelect: {\n    flex: 0.8,\n  },\n  yearSelect: {\n    flex: 1.2,\n  },\n  errorSelect: {\n    borderColor: theme.colors.danger,\n  }\n});\n\nexport { DatetimePicker }; ","import React, { useState, useEffect, useContext, useRef } from 'react';\nimport { View, Text, StyleSheet, Modal, TouchableOpacity, Switch, ScrollView, Platform, Dimensions, Animated } from 'react-native';\nimport DateTimePicker from '@react-native-community/datetimepicker';\nimport { theme } from '../styles/theme';\nimport DatePicker from './DatePicker';\nimport TimePicker from './TimePicker';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { AuthContext } from '../context/AuthContext';\nimport { DatetimePicker } from './ui/datetime-picker';\n\nconst { width } = Dimensions.get('window');\nconst modalWidth = Platform.OS === 'web' ? width * 0.4 : width * 0.9;\n\nconst ALL_DAYS = \"All Days\";\nconst DAYS_OF_WEEK = [\n  ALL_DAYS,\n  'Monday',\n  'Tuesday',\n  'Wednesday',\n  'Thursday',\n  'Friday',\n  'Saturday',\n  'Sunday'\n];\n\nconst DefaultSettingsModal = ({ isVisible, onClose, onSave, defaultSettings }) => {\n  const { screenWidth } = useContext(AuthContext);\n  const [selectedDays, setSelectedDays] = useState([]);\n  const [settings, setSettings] = useState(defaultSettings || {\n    Monday: { isAllDay: false, startTime: '09:00', endTime: '17:00', endDate: null },\n    Tuesday: { isAllDay: false, startTime: '09:00', endTime: '17:00', endDate: null },\n    Wednesday: { isAllDay: false, startTime: '09:00', endTime: '17:00', endDate: null },\n    Thursday: { isAllDay: false, startTime: '09:00', endTime: '17:00', endDate: null },\n    Friday: { isAllDay: false, startTime: '09:00', endTime: '17:00', endDate: null },\n    Saturday: { isAllDay: false, startTime: '09:00', endTime: '17:00', endDate: null },\n    Sunday: { isAllDay: false, startTime: '09:00', endTime: '17:00', endDate: null },\n  });\n\n  const [showTimePicker, setShowTimePicker] = useState({ visible: false, type: '', value: '' });\n  const [showDatePicker, setShowDatePicker] = useState(false);\n  const [isCurrentlyUnavailable, setIsCurrentlyUnavailable] = useState(false);\n  const [showDayDropdown, setShowDayDropdown] = useState(false);\n  const [validationError, setValidationError] = useState(\"Please select day(s) first\");\n\n  const fadeAnim = useRef(new Animated.Value(0)).current;\n  const slideAnim = useRef(new Animated.Value(600)).current;\n\n  const handleClose = () => {\n    // Animate out\n    Animated.parallel([\n      Animated.timing(fadeAnim, {\n        toValue: 0,\n        duration: 300,\n        useNativeDriver: true,\n      }),\n      Animated.timing(slideAnim, {\n        toValue: 600,\n        duration: 300,\n        useNativeDriver: true,\n      })\n    ]).start(() => {\n      // Call onClose after animations complete\n      onClose();\n    });\n  };\n\n  useEffect(() => {\n    if (isVisible) {\n      // Fade in the background overlay\n      Animated.timing(fadeAnim, {\n        toValue: 1,\n        duration: 300,\n        useNativeDriver: true,\n      }).start();\n\n      // Slide up the modal content\n      Animated.spring(slideAnim, {\n        toValue: 0,\n        tension: 50,\n        friction: 8,\n        useNativeDriver: true,\n      }).start();\n    }\n  }, [isVisible]);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      const dropdownButton = document.getElementById('dropdown-button');\n      const dropdownContainer = document.getElementById('dropdown-container');\n      \n      // If click is not on the button and not inside the dropdown, close it\n      if (showDayDropdown && \n          dropdownContainer && \n          !dropdownContainer.contains(event.target) &&\n          !dropdownButton.contains(event.target)) {\n        setShowDayDropdown(false);\n      }\n    };\n\n    if (Platform.OS === 'web') {\n      document.addEventListener('mousedown', handleClickOutside);\n      return () => {\n        document.removeEventListener('mousedown', handleClickOutside);\n      };\n    }\n  }, [showDayDropdown]);\n\n  const handleSave = () => {\n    onSave({\n      ...settings,\n      [selectedDays[0]]: {\n        ...settings[selectedDays[0]],\n        isUnavailable: !isCurrentlyUnavailable\n      }\n    });\n  };\n\n  const updateDaySettings = (day, newSettings) => {\n    setSettings(prevSettings => ({\n      ...prevSettings,\n      [day]: { ...prevSettings[day], ...newSettings }\n    }));\n  };\n\n  const handleDaySelection = (day) => {\n    setSelectedDays(current => {\n      if (day === ALL_DAYS) {\n        return current.includes(ALL_DAYS) \n          ? [] \n          : DAYS_OF_WEEK.filter(d => d !== ALL_DAYS);\n      }\n      \n      const withoutAll = current.filter(d => d !== ALL_DAYS);\n      if (withoutAll.includes(day)) {\n        return withoutAll.filter(d => d !== day);\n      } else {\n        if (withoutAll.length + 1 === DAYS_OF_WEEK.length - 1) {\n          return DAYS_OF_WEEK.filter(d => d !== ALL_DAYS);\n        } else {\n          return [...withoutAll, day];\n        }\n      }\n    });\n  };\n\n  const handleAvailabilityChange = (makeAvailable) => {\n    console.log(\"Selected days:\", selectedDays);\n    if (selectedDays.length === 0) return;\n\n    const daysToUpdate = selectedDays.includes(ALL_DAYS) \n      ? DAYS_OF_WEEK.filter(day => day !== ALL_DAYS)\n      : selectedDays;\n    \n    console.log(\"Days to update:\", daysToUpdate);\n    console.log(\"Current settings:\", settings);\n    console.log(\"Making available:\", makeAvailable);\n\n    const newSettings = { ...settings };\n    daysToUpdate.forEach(day => {\n      console.log(`Updating ${day}`);\n      newSettings[day] = {\n        ...settings[day],\n        isUnavailable: !makeAvailable,\n        startTime: settings[selectedDays[0]].startTime,\n        endTime: settings[selectedDays[0]].endTime,\n        isAllDay: settings[selectedDays[0]].isAllDay,\n        endDate: settings[selectedDays[0]].endDate\n      };\n    });\n    \n    console.log(\"New settings:\", newSettings);\n    setSettings(newSettings);\n    onSave(newSettings);\n    setIsCurrentlyUnavailable(!makeAvailable);\n  };\n\n  // Update validation error whenever selected days changes\n  useEffect(() => {\n    if (selectedDays.length === 0) {\n      setValidationError(\"Please select day(s) first\");\n    } else {\n      setValidationError(\"\");\n    }\n  }, [selectedDays]);\n\n  const renderTimePicker = (type, value, onChange) => {\n      return (\n      <TimePicker\n        value={new Date(`2000-01-01T${value}`)}\n        onChange={(selectedTime) => {\n          const timeString = selectedTime.toTimeString().slice(0, 5);\n          onChange(timeString);\n        }}\n        fullWidth={false}\n        disabled={selectedDays.length === 0}\n        error={validationError}\n      />\n    );\n  };\n\n  const renderEndDatePicker = () => {\n    // Guard against no selected days\n    if (!selectedDays || selectedDays.length === 0) {\n      return (\n        <View style={styles.datePickerWrapper}>\n          <View \n            style={[styles.datePickerContainer]} \n            onClick={(e) => e.stopPropagation()}\n            onMouseDown={(e) => e.stopPropagation()}\n          >\n            <DatetimePicker\n              format={[[\"months\", \"days\", \"years\"]]}\n              disabled={true}\n              isInModal={true}\n              error={true}\n            />\n          </View>\n          <Text style={styles.validationErrorText}>{validationError}</Text>\n        </View>\n      );\n    }\n\n    const daySettings = settings[selectedDays[0]];\n    \n    return (\n      <View style={styles.datePickerWrapper}>\n        <View \n          style={styles.datePickerContainer}\n          onClick={(e) => e.stopPropagation()}\n          onMouseDown={(e) => e.stopPropagation()}\n        >\n          <DatetimePicker\n            format={[[\"months\", \"days\", \"years\"]]}\n            value={daySettings.endDate ? new Date(daySettings.endDate) : null}\n            onChange={(date) => updateDaySettings(selectedDays[0], { endDate: date.toISOString().split('T')[0] })}\n            disabled={false}\n            isInModal={true}\n            error={false}\n          />\n        </View>\n      </View>\n    );\n  };\n\n  const renderDaySettings = () => {\n    const daySettings = settings[selectedDays[0]] || {\n      isAllDay: false,\n      startTime: '09:00',\n      endTime: '17:00',\n      endDate: null\n    };\n    \n    return (\n      <View style={styles.daySettingsContainer}>\n        <View style={styles.settingRow}>\n          <Text style={selectedDays.length === 0 ? styles.disabledText : styles.enabledText}>All Day:</Text>\n          <Switch\n            value={daySettings.isAllDay}\n            onValueChange={(value) => {\n              if (selectedDays.length === 0) return;\n              const newSettings = { ...settings };\n              selectedDays.forEach(day => {\n                newSettings[day] = {\n                  ...newSettings[day],\n                  isAllDay: value\n                };\n              });\n              setSettings(newSettings);\n            }}\n            disabled={selectedDays.length === 0}\n          />\n        </View>\n        {!daySettings.isAllDay && (\n          <>\n            <View style={styles.settingRow}>\n              <Text style={selectedDays.length === 0 ? styles.disabledText : styles.enabledText}>Start Time:</Text>\n              <View style={styles.timePickerContainer}>\n                {renderTimePicker(\n                  'startTime',\n                  daySettings.startTime,\n                  (newTime) => {\n                    if (selectedDays.length === 0) return;\n                    const newSettings = { ...settings };\n                    selectedDays.forEach(day => {\n                      newSettings[day] = {\n                        ...newSettings[day],\n                        startTime: newTime\n                      };\n                    });\n                    setSettings(newSettings);\n                  }\n                )}\n              </View>\n            </View>\n            <View style={styles.settingRow}>\n              <Text style={selectedDays.length === 0 ? styles.disabledText : styles.enabledText}>End Time:</Text>\n              <View style={styles.timePickerContainer}>\n                {renderTimePicker(\n                  'endTime',\n                  daySettings.endTime,\n                  (newTime) => {\n                    if (selectedDays.length === 0) return;\n                    const newSettings = { ...settings };\n                    selectedDays.forEach(day => {\n                      newSettings[day] = {\n                        ...newSettings[day],\n                        endTime: newTime\n                      };\n                    });\n                    setSettings(newSettings);\n                  }\n                )}\n              </View>\n            </View>\n          </>\n        )}\n        <View style={styles.settingRow}>\n          <Text style={selectedDays.length === 0 ? styles.disabledText : styles.enabledText}>End Date:</Text>\n          <View pointerEvents={selectedDays.length === 0 ? 'none' : 'auto'}>\n            {renderEndDatePicker()}\n          </View>\n        </View>\n      </View>\n    );\n  };\n\n  const checkCurrentAvailability = (days, settings) => {\n    if (!days || days.length === 0) return false;\n    \n    return days.some(day => settings[day]?.isUnavailable);\n  };\n\n  useEffect(() => {\n    if (selectedDays.length > 0) {\n      const isUnavailable = checkCurrentAvailability(selectedDays, settings);\n      setIsCurrentlyUnavailable(isUnavailable);\n    } else {\n      setIsCurrentlyUnavailable(false);\n    }\n  }, [selectedDays, settings]);\n\n  const renderDaySelector = () => (\n    <View style={styles.inputWrapper}>\n      <Text style={styles.inputLabel}>Day(s) *</Text>\n      <TouchableOpacity\n        id=\"dropdown-button\"\n        style={[\n          styles.input,\n          styles.customDropdown,\n          selectedDays.length === 0 && styles.inputError\n        ]}\n        onPress={() => setShowDayDropdown(!showDayDropdown)}\n      >\n        <Text style={{\n          color: selectedDays.length > 0 ? theme.colors.text : theme.colors.placeHolderText\n        }}>\n          {selectedDays.length === 0 \n            ? 'Select Days' \n            : selectedDays.includes(ALL_DAYS)\n              ? 'All Days'\n              : selectedDays.length > 2\n                ? `${selectedDays.length} Days Selected`\n                : selectedDays.join(', ')}\n        </Text>\n        <MaterialCommunityIcons \n          name={showDayDropdown ? \"chevron-up\" : \"chevron-down\"} \n          size={24} \n          color={theme.colors.text} \n        />\n      </TouchableOpacity>\n      \n      {showDayDropdown && (\n        <View \n          id=\"dropdown-container\"\n          style={styles.dropdownContainer}\n        >\n          <ScrollView style={styles.dropdownScroll}>\n            {DAYS_OF_WEEK.map((day) => (\n              <TouchableOpacity\n                key={day}\n                style={styles.dropdownItem}\n                onPress={() => handleDaySelection(day)}\n              >\n                <View style={styles.dropdownItemContent}>\n                  <Text style={[\n                    styles.dropdownText,\n                    selectedDays.includes(day) && styles.selectedOption\n                  ]}>\n                    {day}\n                  </Text>\n                  {selectedDays.includes(day) && (\n                    <MaterialCommunityIcons \n                      name=\"check\" \n                      size={20} \n                      color={theme.colors.primary} \n                    />\n                  )}\n                </View>\n              </TouchableOpacity>\n            ))}\n          </ScrollView>\n        </View>\n      )}\n    </View>\n  );\n\n  return (\n    <Modal\n      visible={isVisible}\n      transparent={true}\n      onRequestClose={handleClose}\n    >\n      <Animated.View style={[\n        styles.modalContainer,\n        {\n          opacity: fadeAnim,\n        }\n      ]}>\n        <Animated.View style={[\n          styles.modalContent,\n          {\n            width: screenWidth < 600 ? '90%' : 600,\n            transform: [{ translateY: slideAnim }]\n          }\n        ]}>\n          <View style={styles.modalHeader}>\n            <Text style={styles.modalTitle}>Default Settings</Text>\n            <TouchableOpacity onPress={handleClose} style={styles.closeButton}>\n              <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.text} />\n            </TouchableOpacity>\n          </View>\n          {renderDaySelector()}\n          {renderDaySettings()}\n          <View style={styles.buttonContainer}>\n            <TouchableOpacity\n              style={[styles.button, styles.availableButton]}\n              onPress={() => handleAvailabilityChange(true)}\n              disabled={selectedDays.length === 0}\n            >\n              <Text style={styles.buttonText}>Mark Available</Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n              style={[styles.button, styles.unavailableButton]}\n              onPress={() => handleAvailabilityChange(false)}\n              disabled={selectedDays.length === 0}\n            >\n              <Text style={styles.buttonText}>Mark Unavailable</Text>\n            </TouchableOpacity>\n          </View>\n        </Animated.View>\n      </Animated.View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  modalContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n  },\n  modalContent: {\n    backgroundColor: theme.colors.background,\n    padding: 22,\n    borderRadius: 17,\n    maxHeight: '80%',\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 20,\n  },\n  closeButton: {\n    padding: 8,\n  },\n  modalTitle: {\n    fontSize: theme.fontSizes.large,\n    fontWeight: 'bold',\n    marginBottom: 15,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  settingContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    width: '100%',\n    marginVertical: 10,\n  },\n  sectionTitle: {\n    fontSize: theme.fontSizes.medium,\n    fontWeight: 'bold',\n    marginTop: 20,\n    marginBottom: 10,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  dayContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    width: '100%',\n    marginVertical: 5,\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    gap: 12,\n    marginTop: 20,\n  },\n  button: {\n    flex: 1,\n    padding: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  availableButton: {\n    backgroundColor: theme.colors.primary,\n  },\n  unavailableButton: {\n    backgroundColor: theme.colors.error,\n  },\n  buttonText: {\n    color: theme.colors.whiteText,\n    fontWeight: 'bold',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  tabContainer: {\n    flexDirection: 'row',\n    marginBottom: 15,\n  },\n  tab: {\n    paddingHorizontal: 15,\n    paddingVertical: 10,\n    borderBottomWidth: 2,\n    borderBottomColor: 'transparent',\n  },\n  selectedTab: {\n    borderBottomColor: theme.colors.primary,\n  },\n  tabText: {\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  selectedTabText: {\n    color: theme.colors.primary,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  daySettingsContainer: {\n    marginBottom: 15,\n  },\n  settingRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 15,\n    gap: 12,\n  },\n  webTimePicker: {\n    padding: 5,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 5,\n  },\n  webDatePicker: {\n    padding: 5,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 5,\n  },\n  inputWrapper: {\n    position: 'relative',\n    width: '100%',\n    marginBottom: 15,\n    zIndex: 2,\n  },\n  inputLabel: {\n    marginBottom: 5,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 5,\n    padding: 10,\n    backgroundColor: theme.colors.surface,\n  },\n  customDropdown: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  dropdownContainer: {\n    position: 'absolute',\n    top: '100%',\n    left: 0,\n    right: 0,\n    backgroundColor: theme.colors.surface,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 5,\n    maxHeight: 200,\n    zIndex: 1000,\n  },\n  dropdownScroll: {\n    maxHeight: 200,\n  },\n  dropdownItem: {\n    padding: 10,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  dropdownItemContent: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  dropdownText: {\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  selectedOption: {\n    color: theme.colors.primary,\n    fontWeight: 'bold',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  inputError: {\n    borderColor: theme.colors.danger,\n  },\n  disabledButton: {\n    opacity: 0.5,\n  },\n  disabledText: {\n    color: theme.colors.placeHolderText,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  enabledText: {\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  timePickerContainer: {\n    flex: 1,\n    maxWidth: 150,\n  },\n  datePickerContainer: {\n    flex: 1,\n    maxWidth: 200,\n  },\n  datePickerWrapper: {\n    width: '100%',\n  },\n  validationErrorText: {\n    color: theme.colors.danger,\n    fontSize: theme.fontSizes.small,\n    marginTop: 4,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default DefaultSettingsModal;\n","import React, { useState, useRef, useEffect, useContext } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, ScrollView, Platform, Switch, Animated } from 'react-native';\nimport { theme } from '../styles/theme';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { format, parse } from 'date-fns';\nimport TimePicker from './TimePicker';\nimport { SERVICE_TYPES, ALL_SERVICES } from '../data/mockData';\nimport { AuthContext } from '../context/AuthContext';\n\nconst AvailabilityBottomSheet = ({ \n  selectedDates, \n  currentAvailability,\n  onClose,\n  onViewUnavailableTimes,\n  onSave,\n  onMinimize\n}) => {\n  const { screenWidth } = useContext(AuthContext);\n  const [startTime, setStartTime] = useState(new Date());\n  const [endTime, setEndTime] = useState(new Date());\n  const [selectedServices, setSelectedServices] = useState([]);\n  const [showServiceDropdown, setShowServiceDropdown] = useState(false);\n  const [isAllDay, setIsAllDay] = useState(false);\n  const [error, setError] = useState(null);\n  const [isMinimized, setIsMinimized] = useState(false);\n  const animatedHeight = useRef(new Animated.Value(1)).current;\n  const animatedOpacity = useRef(new Animated.Value(1)).current;\n  const slideAnimation = useRef(new Animated.Value(0)).current;\n\n  useEffect(() => {\n    // Start the entrance animation when the component mounts\n    Animated.spring(slideAnimation, {\n      toValue: 1,\n      useNativeDriver: true,\n      tension: 50,\n      friction: 8\n    }).start();\n  }, []);\n\n  const getAvailabilityStatus = () => {\n    if (!selectedDates || selectedDates.length === 0) return 'Unknown';\n\n    const date = selectedDates[0];\n    const dateAvailability = currentAvailability[date];\n\n    if (!dateAvailability) return 'Available';\n    if (!dateAvailability.isAvailable) return 'Unavailable';\n    if (dateAvailability.unavailableTimes?.length > 0) return 'Partially Available';\n    return 'Available';\n  };\n\n  const getStatusColor = () => {\n    const status = getAvailabilityStatus();\n    switch (status) {\n      case 'Available':\n        return theme.colors.success;\n      case 'Partially Available':\n        return theme.colors.warning;\n      case 'Unavailable':\n        return theme.colors.error;\n      default:\n        return theme.colors.text;\n    }\n  };\n\n  const formatDateRange = () => {\n    if (!selectedDates || selectedDates.length === 0) return '';\n    \n    if (selectedDates.length === 1) {\n      return format(parse(selectedDates[0], 'yyyy-MM-dd', new Date()), 'MMM dd, yyyy');\n    }\n\n    return `${format(parse(selectedDates[0], 'yyyy-MM-dd', new Date()), 'MMM dd')} - ${format(parse(selectedDates[selectedDates.length - 1], 'yyyy-MM-dd', new Date()), 'MMM dd, yyyy')}`;\n  };\n\n  const validateAndSave = (isAvailable) => {\n    if (selectedServices.length === 0) {\n      setError('Please select at least one service type');\n      return;\n    }\n    setError(null);\n    onSave({ \n      startTime: isAllDay ? '00:00' : format(startTime, 'HH:mm'),\n      endTime: isAllDay ? '24:00' : format(endTime, 'HH:mm'),\n      services: selectedServices,\n      isAvailable,\n      isAllDay\n    });\n  };\n\n  const toggleMinimized = () => {\n    const toValue = isMinimized ? 1 : 0;\n    \n    // Call onMinimize first to start the background fade\n    const newMinimizedState = !isMinimized;\n    onMinimize?.(newMinimizedState);\n    \n    // Then start our animations\n    Animated.parallel([\n      Animated.timing(animatedHeight, {\n        toValue,\n        duration: 300,\n        useNativeDriver: false\n      }),\n      Animated.timing(animatedOpacity, {\n        toValue,\n        duration: 300,\n        useNativeDriver: false\n      })\n    ]).start(() => {\n      setIsMinimized(newMinimizedState);\n    });\n  };\n\n  const handleClose = () => {\n    // Animate the slide down\n    Animated.timing(slideAnimation, {\n      toValue: 0,\n      duration: 300,\n      useNativeDriver: true\n    }).start(() => {\n      // Call the onClose prop after animation completes\n      onClose();\n    });\n  };\n\n  const maxHeight = isAllDay ? 364 : 445; // Adjust this value based on your content\n  const minHeight = 96;\n\n  const containerHeight = animatedHeight.interpolate({\n    inputRange: [0, 1],\n    outputRange: [minHeight, maxHeight]\n  });\n\n  const renderHandle = () => {\n    if (Platform.OS === 'web') {\n      return (\n        <TouchableOpacity \n          onPress={toggleMinimized}\n          style={styles.handleContainer}\n        >\n          <MaterialCommunityIcons \n            name={isMinimized ? \"chevron-up\" : \"chevron-down\"}\n            size={24}\n            color={theme.colors.text}\n          />\n        </TouchableOpacity>\n      );\n    }\n\n    return (\n      <TouchableOpacity \n        onPress={toggleMinimized}\n        style={styles.handleContainer}\n      >\n        <View style={styles.handle} />\n      </TouchableOpacity>\n    );\n  };\n\n  return (\n    <View style={[\n      styles.overlay,\n      { pointerEvents: isMinimized ? 'box-none' : 'auto' } // Allow clicks through when minimized\n    ]}>\n      <Animated.View \n        style={[\n          styles.container,\n          { \n            height: containerHeight,\n            transform: [{\n              translateY: slideAnimation.interpolate({\n                inputRange: [0, 1],\n                outputRange: [600, 0]\n              })\n            }]\n          }\n        ]}\n      >\n        {renderHandle()}\n        \n        <View style={[styles.header, isMinimized && styles.headerMinimized]}>\n          {!isMinimized && (\n            <TouchableOpacity onPress={handleClose} style={styles.closeButton}>\n              <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.text} />\n            </TouchableOpacity>\n          )}\n          <View style={styles.headerCenter}>\n            <Text style={styles.dateText}>{formatDateRange()}</Text>\n            <Text style={[styles.statusText, { color: getStatusColor() }]}>\n              {getAvailabilityStatus()}\n            </Text>\n          </View>\n          {!isMinimized && (\n            <Animated.View style={{ opacity: animatedOpacity }}>\n              <TouchableOpacity \n                style={styles.actionButton}\n                onPress={onViewUnavailableTimes}\n              >\n                <MaterialCommunityIcons \n                  name=\"clock-outline\" \n                  size={24} \n                  color={theme.colors.primary} \n                />\n                <Text style={styles.actionButtonText}>\n                  {'Unavailable\\nTimes'}\n                </Text>\n              </TouchableOpacity>\n            </Animated.View>\n          )}\n        </View>\n\n        <Animated.View \n          style={[\n            styles.content,\n            { opacity: animatedOpacity,\n             }\n          ]}\n        >\n          <View style={styles.serviceSection}>\n            <Text style={[styles.label, { textAlign: 'center' }]}>Change Availability for Services</Text>\n            <TouchableOpacity\n              style={[styles.serviceSelector, error && selectedServices.length <= 0 && styles.serviceSelectorError]}\n              onPress={() => setShowServiceDropdown(!showServiceDropdown)}\n            >\n              <Text style={styles.serviceSelectorText}>\n                {selectedServices.length > 0 \n                  ? selectedServices.includes(ALL_SERVICES)\n                    ? \"All Services\"\n                    : selectedServices.length > 1\n                      ? `${selectedServices.length} services selected`\n                      : selectedServices[0]\n                  : \"Select one or more service types\"\n                }\n              </Text>\n              <MaterialCommunityIcons \n                name={showServiceDropdown ? \"chevron-up\" : \"chevron-down\"} \n                size={24} \n                color={theme.colors.primary} \n              />\n            </TouchableOpacity>\n            {error && selectedServices.length <= 0 && !showServiceDropdown && <Text style={styles.errorText}>{error}</Text>}\n\n            {showServiceDropdown && (\n              <View style={styles.dropdownContainer}>\n                <ScrollView style={styles.dropdownScroll}>\n                  {SERVICE_TYPES.map((service) => (\n                    <TouchableOpacity\n                      key={service}\n                      style={styles.dropdownItem}\n                      onPress={() => {\n                        if (service === ALL_SERVICES) {\n                          setSelectedServices(\n                            selectedServices.includes(ALL_SERVICES) \n                              ? [] \n                              : [ALL_SERVICES]\n                          );\n                        } else {\n                          setSelectedServices(prev => {\n                            const withoutAll = prev.filter(s => s !== ALL_SERVICES);\n                            if (prev.includes(service)) {\n                              return withoutAll.filter(s => s !== service);\n                            } else {\n                              return [...withoutAll, service];\n                            }\n                          });\n                        }\n                      }}\n                    >\n                      <View style={styles.dropdownItemContent}>\n                        <Text style={[\n                          styles.dropdownText,\n                          selectedServices.includes(service) && styles.selectedOption\n                        ]}>\n                          {service}\n                        </Text>\n                        {selectedServices.includes(service) && (\n                          <MaterialCommunityIcons \n                            name=\"check\" \n                            size={20} \n                            color={theme.colors.primary} \n                          />\n                        )}\n                      </View>\n                    </TouchableOpacity>\n                  ))}\n                </ScrollView>\n              </View>\n            )}\n          </View>\n\n          <View style={styles.timeToggleContainer}>\n            <Text style={[styles.label, { marginBottom: 0 }]}>Time Selection</Text>\n            <View style={styles.customToggle}>\n              <TouchableOpacity \n                style={[\n                  styles.toggleButton,\n                  isAllDay ? styles.toggleButtonActive : styles.toggleButtonInactive\n                ]}\n                onPress={() => setIsAllDay(true)}\n              >\n                <Text style={[\n                  styles.toggleButtonText,\n                  isAllDay && styles.toggleButtonTextActive\n                ]}>All Day</Text>\n              </TouchableOpacity>\n              <TouchableOpacity \n                style={[\n                  styles.toggleButton,\n                  !isAllDay ? styles.toggleButtonActive : styles.toggleButtonInactive\n                ]}\n                onPress={() => setIsAllDay(false)}\n              >\n                <Text style={[\n                  styles.toggleButtonText,\n                  !isAllDay && styles.toggleButtonTextActive\n                ]}>Custom Hours</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n\n          {!isAllDay && (\n            <View style={styles.timeSection}>\n              <View style={styles.timeContainer}>\n                <Text style={[styles.label, { marginBottom: 0 }]}>Start Time</Text>\n                <TimePicker\n                  value={startTime}\n                  onChange={setStartTime}\n                  fullWidth\n                />\n              </View>\n              <View style={styles.timeContainer}>\n                <Text style={[styles.label, { marginBottom: 0 }]}>End Time</Text>\n                <TimePicker\n                  value={endTime}\n                  onChange={setEndTime}\n                  fullWidth\n                />\n              </View>\n            </View>\n          )}\n\n          <View style={styles.buttonContainer}>\n            <TouchableOpacity\n              style={[styles.button, styles.availableButton]}\n              onPress={() => validateAndSave(true)}\n            >\n              <Text style={styles.buttonText}>Mark Available</Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n              style={[styles.button, styles.unavailableButton]}\n              onPress={() => validateAndSave(false)}\n            >\n              <Text style={styles.buttonText}>Mark Unavailable</Text>\n            </TouchableOpacity>\n          </View>\n        </Animated.View>\n      </Animated.View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  overlay: {\n    width: '100%',\n    pointerEvents: 'box-none', // This allows clicks to pass through to elements behind\n  },\n  container: {\n    backgroundColor: theme.colors.surface,\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n    padding: 16,\n    paddingBottom: Platform.OS === 'ios' ? 40 : 16,\n    maxWidth: 600,\n    width: '100%',\n    alignSelf: 'center',\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: -2,\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5,\n  },\n  handleContainer: {\n    width: '100%',\n    height: 24,\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginBottom: 4,\n  },\n  handle: {\n    width: 40,\n    height: 4,\n    backgroundColor: theme.colors.border,\n    borderRadius: 2,\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 12,\n    paddingRight: 8,\n    marginTop: 4, // Add a small margin to separate from the chevron\n  },\n  headerMinimized: {\n    marginBottom: 8,\n    paddingBottom: 12, // Add padding at the bottom when minimized\n    justifyContent: 'space-between',\n  },\n  headerCenter: {\n    flex: 1,\n    alignItems: 'center',\n  },\n  closeButton: {\n    width: 60,\n    height: 40,\n    // marginBottom: 30,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  dateText: {\n    fontSize: theme.fontSizes.medium,\n    fontWeight: 'bold',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  statusText: {\n    fontSize: theme.fontSizes.medium,\n    marginTop: 4,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  actionButton: {\n    width: 60,\n    alignItems: 'center',\n  },\n  actionButtonText: {\n    fontSize: theme.fontSizes.small,\n    color: theme.colors.primary,\n    marginTop: 4,\n    textAlign: 'center',\n    lineHeight: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  content: {\n    gap: 12,\n  },\n  timeToggleContainer: {\n    // marginBottom: 8,\n  },\n  customToggle: {\n    flexDirection: 'row',\n    backgroundColor: theme.colors.background,\n    borderRadius: 8,\n    padding: 4,\n    // marginTop: 8,\n    gap: 8,\n  },\n  toggleButton: {\n    flex: 1,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 6,\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  toggleButtonActive: {\n    backgroundColor: theme.colors.primary,\n    borderColor: theme.colors.primary,\n  },\n  toggleButtonInactive: {\n    backgroundColor: 'transparent',\n  },\n  toggleButtonText: {\n    color: theme.colors.text,\n    fontSize: theme.fontSizes.medium,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  toggleButtonTextActive: {\n    color: theme.colors.whiteText,\n    fontWeight: 'bold',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  timeSection: {\n    flexDirection: 'row',\n    gap: 16,\n  },\n  timeContainer: {\n    flex: 1,\n  },\n  label: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    marginBottom: 4,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  serviceSection: {\n    position: 'relative',\n    zIndex: 1,\n  },\n  serviceSelector: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 8,\n    padding: 12,\n    backgroundColor: theme.colors.background,\n  },\n  serviceSelectorText: {\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  dropdownContainer: {\n    position: 'absolute',\n    top: '100%',\n    left: 0,\n    right: 0,\n    backgroundColor: theme.colors.surface,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 8,\n    maxHeight: 200,\n    zIndex: 1000,\n  },\n  dropdownScroll: {\n    maxHeight: 200,\n  },\n  dropdownItem: {\n    padding: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  dropdownItemContent: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  dropdownText: {\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  selectedOption: {\n    color: theme.colors.primary,\n    fontWeight: 'bold',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    gap: 12,\n    // marginTop: 12,\n  },\n  button: {\n    flex: 1,\n    padding: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  availableButton: {\n    backgroundColor: theme.colors.primary,\n  },\n  unavailableButton: {\n    backgroundColor: theme.colors.error,\n  },\n  buttonText: {\n    color: theme.colors.whiteText,\n    fontSize: theme.fontSizes.medium,\n    fontWeight: 'bold',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  serviceSelectorError: {\n    borderColor: theme.colors.error,\n    borderWidth: 1,\n  },\n  errorText: {\n    color: theme.colors.error,\n    fontSize: theme.fontSizes.small,\n    marginTop: 4,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default AvailabilityBottomSheet; ","import React, { useRef, useEffect } from 'react';\nimport { View, Text, StyleSheet, Modal, TouchableOpacity, ScrollView, Animated } from 'react-native';\nimport { theme } from '../styles/theme';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { format, parse } from 'date-fns';\nimport { useNavigation } from '@react-navigation/native';\nimport { navigateToFrom } from '../components/Navigation';\n\nconst UnavailableTimesModal = ({ \n  visible, \n  onClose, \n  selectedDates,\n  currentAvailability,\n  onRemoveTimeSlot,\n  bookings\n}) => {\n  const navigation = useNavigation();\n  const fadeAnim = useRef(new Animated.Value(0)).current;\n  const slideAnim = useRef(new Animated.Value(600)).current;\n\n  useEffect(() => {\n    if (visible) {\n      // Fade in the background overlay\n      Animated.timing(fadeAnim, {\n        toValue: 1,\n        duration: 300,\n        useNativeDriver: true,\n      }).start();\n\n      // Slide up the modal content\n      Animated.spring(slideAnim, {\n        toValue: 0,\n        tension: 50,\n        friction: 8,\n        useNativeDriver: true,\n      }).start();\n    }\n  }, [visible]);\n\n  const handleClose = () => {\n    // Animate out\n    Animated.parallel([\n      Animated.timing(fadeAnim, {\n        toValue: 0,\n        duration: 300,\n        useNativeDriver: true,\n      }),\n      Animated.timing(slideAnim, {\n        toValue: 600,\n        duration: 300,\n        useNativeDriver: true,\n      })\n    ]).start(() => {\n      // Call onClose after animations complete\n      onClose();\n    });\n  };\n\n  const formatTime = (time) => {\n    const [hours, minutes] = time.split(':');\n    const date = new Date();\n    date.setHours(parseInt(hours), parseInt(minutes));\n    return format(date, 'h:mm a');\n  };\n\n  const handleBookingPress = async (bookingId) => {\n    onClose(); // Close the modal first\n    await navigateToFrom(navigation, 'BookingDetails', 'AvailabilitySettings', { bookingId });\n  };\n\n  const getUnavailableTimes = () => {\n    if (!selectedDates || selectedDates.length === 0) return [];\n\n    const allTimes = [];\n    const processedTimes = new Set(); // Track processed time slots\n\n    selectedDates.forEach(date => {\n      const dateBookings = bookings[date] || [];\n      const dateAvailability = currentAvailability[date];\n\n      // Add bookings first\n      dateBookings.forEach(booking => {\n        const timeKey = `${date}-${booking.startTime}-${booking.endTime}`;\n        if (!processedTimes.has(timeKey)) {\n          allTimes.push({\n            date,\n            startTime: booking.startTime,\n            endTime: booking.endTime,\n            reason: `${booking.service_type}\\nBooked with ${booking.owner_name}`,\n            isBooking: true,\n            ownerId: booking.ownerId\n          });\n          processedTimes.add(timeKey);\n        }\n      });\n\n      // Add personal unavailable times, excluding any that overlap with bookings\n      if (dateAvailability?.unavailableTimes) {\n        dateAvailability.unavailableTimes\n          .filter(time => !time.ownerId) // Only include non-booking unavailable times\n          .forEach(time => {\n            const timeKey = `${date}-${time.startTime}-${time.endTime}`;\n            if (!processedTimes.has(timeKey)) {\n              allTimes.push({\n                date,\n                startTime: time.startTime,\n                endTime: time.endTime,\n                reason: time.reason,\n                isBooking: false\n              });\n              processedTimes.add(timeKey);\n            }\n          });\n      }\n    });\n\n    // Sort by date and then by start time\n    return allTimes.sort((a, b) => {\n      if (a.date !== b.date) return a.date.localeCompare(b.date);\n      return a.startTime.localeCompare(b.startTime);\n    });\n  };\n\n  const renderActionButton = (item) => {\n    if (item.isBooking) {\n      return (\n        <TouchableOpacity\n          style={styles.bookingButton}\n          onPress={() => handleBookingPress(item.ownerId)}\n        >\n          <MaterialCommunityIcons name=\"arrow-right\" size={24} color={theme.colors.primary} />\n        </TouchableOpacity>\n      );\n    }\n    \n    return (\n      <TouchableOpacity\n        style={styles.removeButton}\n        onPress={() => onRemoveTimeSlot(item.date, item)}\n      >\n        <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.error} />\n      </TouchableOpacity>\n    );\n  };\n\n  const renderTimeSlot = (item, index) => {\n    const formattedDate = format(parse(item.date, 'yyyy-MM-dd', new Date()), 'MMM d, yyyy');\n    const formattedStartTime = formatTime(item.startTime);\n    const formattedEndTime = formatTime(item.endTime);\n\n    return (\n      <View key={index} style={styles.timeSlotContainer}>\n        <View style={styles.dateHeader}>\n          <Text style={styles.dateText}>{formattedDate}</Text>\n        </View>\n        <View style={[\n          styles.timeSlotContent,\n          item.isBooking && styles.bookingContent\n        ]}>\n          <View style={styles.timeAndReason}>\n            <Text style={styles.timeText}>\n              {formattedStartTime} - {formattedEndTime}\n            </Text>\n            <Text style={styles.reasonText}>\n              {item.reason}\n            </Text>\n          </View>\n          {renderActionButton(item)}\n        </View>\n      </View>\n    );\n  };\n\n  return (\n    <Modal\n      visible={visible}\n      transparent={true}\n      onRequestClose={handleClose}\n    >\n      <Animated.View style={[\n        styles.modalContainer,\n        {\n          opacity: fadeAnim,\n        }\n      ]}>\n        <Animated.View style={[\n          styles.modalContent,\n          {\n            transform: [{ translateY: slideAnim }]\n          }\n        ]}>\n          <View style={styles.modalHeader}>\n            <Text style={styles.modalTitle}>Unavailable Times</Text>\n            <TouchableOpacity onPress={handleClose} style={styles.closeButton}>\n              <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.text} />\n            </TouchableOpacity>\n          </View>\n          \n          <ScrollView style={styles.timesList}>\n            {getUnavailableTimes().map((item, index) => renderTimeSlot(item, index))}\n            {getUnavailableTimes().length === 0 && (\n              <Text style={styles.emptyText}>No unavailable times for selected date(s)</Text>\n            )}\n          </ScrollView>\n        </Animated.View>\n      </Animated.View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  modalContainer: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 20,\n    padding: 20,\n    width: '90%',\n    maxWidth: 500,\n    maxHeight: '80%',\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 20,\n  },\n  modalTitle: {\n    fontSize: theme.fontSizes.large,\n    fontWeight: 'bold',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  closeButton: {\n    padding: 5,\n  },\n  timesList: {\n    maxHeight: '90%',\n  },\n  timeSlotContainer: {\n    marginBottom: 15,\n  },\n  dateHeader: {\n    marginBottom: 8,\n  },\n  dateText: {\n    fontSize: theme.fontSizes.medium,\n    fontWeight: 'bold',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  timeSlotContent: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    backgroundColor: theme.colors.background,\n    padding: 12,\n    borderRadius: 8,\n  },\n  bookingContent: {\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    backgroundColor: theme.colors.surface,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 1,\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 2,\n    elevation: 2,\n  },\n  timeAndReason: {\n    flex: 1,\n  },\n  timeText: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    marginBottom: 4,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  reasonText: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.textSecondary,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  removeButton: {\n    padding: 5,\n    marginLeft: 10,\n  },\n  bookingButton: {\n    padding: 5,\n    marginLeft: 10,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 20,\n    width: 34,\n    height: 34,\n    alignItems: 'center',\n    justifyContent: 'center',\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 1,\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 1,\n    elevation: 2,\n  },\n  emptyText: {\n    textAlign: 'center',\n    color: theme.colors.textSecondary,\n    fontSize: theme.fontSizes.medium,\n    marginTop: 20,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default UnavailableTimesModal; ","import React, { useState, useEffect, useRef, useContext } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Modal, ScrollView, Platform, StatusBar, Dimensions, ActivityIndicator, Animated } from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { Calendar } from 'react-native-calendars';\nimport moment from 'moment';\nimport Icon from 'react-native-vector-icons/Ionicons';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport AddAvailabilityModal from '../components/AddAvailabilityModal';\nimport DefaultSettingsModal from '../components/DefaultSettingsModal';\nimport { format, parse } from 'date-fns';\nimport { SERVICE_TYPES, fetchAvailabilityData, ALL_SERVICES } from '../data/mockData';\nimport AvailabilityBottomSheet from '../components/AvailabilityBottomSheet';\nimport UnavailableTimesModal from '../components/UnavailableTimesModal';\nimport { useNavigation } from '@react-navigation/native';\nimport { AuthContext } from '../context/AuthContext';\n\nconst daysOfWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n\nconst AvailabilitySettings = () => {\n  const { screenWidth, isCollapsed, is_DEBUG } = useContext(AuthContext);\n  const [isMobile, setIsMobile] = useState(screenWidth <= 900);\n  const styles = createStyles(screenWidth, isCollapsed);\n  const [markedDates, setMarkedDates] = useState({});\n  const [selectedDates, setSelectedDates] = useState([]);\n  const [isAddModalVisible, setIsAddModalVisible] = useState(false);\n  const [isSettingsModalVisible, setIsSettingsModalVisible] = useState(false);\n  const [defaultAvailability, setDefaultAvailability] = useState('available');\n  const [currentAvailability, setCurrentAvailability] = useState({});\n  const [bookings, setBookings] = useState({});\n  const [defaultSettings, setDefaultSettings] = useState({\n    Monday: { isAllDay: false, isUnavailable: false, startTime: '09:00', endTime: '17:00', endDate: null },\n    Tuesday: { isAllDay: false, isUnavailable: false, startTime: '09:00', endTime: '17:00', endDate: null },\n    Wednesday: { isAllDay: false, isUnavailable: false, startTime: '09:00', endTime: '17:00', endDate: null },\n    Thursday: { isAllDay: false, isUnavailable: false, startTime: '09:00', endTime: '17:00', endDate: null },\n    Friday: { isAllDay: false, isUnavailable: false, startTime: '09:00', endTime: '17:00', endDate: null },\n    Saturday: { isAllDay: false, isUnavailable: false, startTime: '09:00', endTime: '17:00', endDate: null },\n    Sunday: { isAllDay: false, isUnavailable: false, startTime: '09:00', endTime: '17:00', endDate: null },\n  });\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [showBottomSheet, setShowBottomSheet] = useState(false);\n  const [showUnavailableTimesModal, setShowUnavailableTimesModal] = useState(false);\n  const [isClosing, setIsClosing] = useState(false);\n  const [isBottomSheetMinimized, setIsBottomSheetMinimized] = useState(false);\n  const navigation = useNavigation();\n  const fadeAnim = useRef(new Animated.Value(0)).current;\n\n  useEffect(() => {\n    const updateLayout = () => {\n      setIsMobile(screenWidth <= 900);\n    };\n    updateLayout();\n  }, [screenWidth]);\n\n  useEffect(() => {\n    const loadAvailabilityData = async () => {\n      try {\n        setIsLoading(true);\n        const data = await fetchAvailabilityData();\n        updateMarkedDates(data.availableDates, data.unavailableDates, data.bookings);\n        \n        const combinedAvailability = {};\n        Object.keys(data.availableDates).forEach(date => {\n          combinedAvailability[date] = { \n            isAvailable: true,\n            unavailableTimes: [] // Initialize empty array for partially unavailable times\n          };\n        });\n        Object.keys(data.unavailableDates).forEach(date => {\n          combinedAvailability[date] = { \n            isAvailable: false,\n            unavailableTimes: [{\n              startTime: data.unavailableDates[date].startTime,\n              endTime: data.unavailableDates[date].endTime,\n              reason: ' Personal Time'\n            }]\n          };\n        });\n        Object.keys(data.bookings).forEach(date => {\n          if (!combinedAvailability[date]) {\n            combinedAvailability[date] = { \n              isAvailable: true,\n              unavailableTimes: []\n            };\n          }\n          combinedAvailability[date].unavailableTimes = [\n            ...combinedAvailability[date].unavailableTimes,\n            ...data.bookings[date].map(booking => ({\n              startTime: booking.startTime,\n              endTime: booking.endTime,\n              reason: ` Booked with ${booking.owner_name}`,\n              ownerId: booking.ownerId // Assuming each booking has a ownerId\n            }))\n          ];\n        });\n        setCurrentAvailability(combinedAvailability);\n        setBookings(data.bookings);\n      } catch (err) {\n        setError('Failed to load availability data');\n        console.error(err);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadAvailabilityData();\n  }, []);\n\n  const updateMarkedDates = (availableDates, unavailableDates, bookings) => {\n    const newMarkedDates = {};\n\n    // Helper function to check if all services are selected for a time slot\n    const hasAllServices = (reason) => {\n      if (!reason) return false;\n      const services = reason.replace('Unavailable for: ', '').split(', ');\n      return services.length === (SERVICE_TYPES.length - 1);\n    };\n\n    Object.entries(unavailableDates).forEach(([date, time]) => {\n      const isFullDay = time.startTime === '00:00' && time.endTime === '24:00';\n      const allServicesSelected = hasAllServices(time.reason);\n      \n      newMarkedDates[date] = {\n        customStyles: {\n          container: { \n            backgroundColor: isFullDay && allServicesSelected ? 'lightgrey' : theme.colors.calendarColor,\n            width: 35,\n            height: 35,\n            borderRadius: 17.5,\n            alignItems: 'center',\n            justifyContent: 'center'\n          },\n          text: { color: 'white' }\n        }\n      };\n    });\n\n    Object.entries(availableDates).forEach(([date, time]) => {\n      if (!newMarkedDates[date]) {\n        newMarkedDates[date] = {\n          customStyles: {\n            container: { \n              backgroundColor: 'white',\n              width: 35,\n              height: 35,\n              borderRadius: 17.5,\n              alignItems: 'center',\n              justifyContent: 'center'\n            },\n            text: { color: 'black' }\n          }\n        };\n      }\n    });\n\n    Object.entries(bookings).forEach(([date, bookingList]) => {\n      const isFullDay = bookingList.some(booking => \n        booking.startTime === '00:00' && booking.endTime === '24:00'\n      );\n      newMarkedDates[date] = { \n        marked: true,\n        dotColor: theme.colors.primary,\n        customStyles: {\n          container: { \n            backgroundColor: isFullDay ? theme.colors.primary : theme.colors.calendarColorYellowBrown,\n            width: 35,\n            height: 35,\n            borderRadius: 17.5,\n            alignItems: 'center',\n            justifyContent: 'center'\n          },\n          text: { color: 'white' }\n        }\n      };\n    });\n\n    setMarkedDates(newMarkedDates);\n  };\n\n  const toggleBottomSheet = (show) => {\n    if (show) {\n      setIsClosing(false);\n      setShowBottomSheet(true);\n      Animated.timing(fadeAnim, {\n        toValue: 0.5,\n        duration: 300,\n        useNativeDriver: true,\n      }).start();\n    } else {\n      setIsClosing(true);\n      Animated.timing(fadeAnim, {\n        toValue: 0,\n        duration: 300,\n        useNativeDriver: true,\n      }).start(() => {\n        setShowBottomSheet(false);\n        setIsClosing(false);\n      });\n    }\n  };\n\n  const handleBottomSheetMinimize = (minimized) => {\n    setIsBottomSheetMinimized(minimized);\n    Animated.timing(fadeAnim, {\n      toValue: minimized ? 0 : 0.5,\n      duration: 300,\n      useNativeDriver: true,\n    }).start();\n  };\n\n  const onDayPress = (day) => {\n    const { dateString } = day;\n    const selectedDate = new Date(dateString);\n    selectedDate.setDate(selectedDate.getDate() + 1); // Adjust for timezone offset\n    selectedDate.setHours(0, 0, 0, 0);\n  \n    if (selectedDates.length === 0) {\n      setSelectedDates([dateString]);\n      toggleBottomSheet(true);\n    } else if (selectedDates.length >= 1) {\n      const firstDate = new Date(selectedDates[0]);\n      firstDate.setDate(firstDate.getDate() + 1); // Adjust for timezone offset\n      firstDate.setHours(0, 0, 0, 0);    \n\n      if (selectedDate.getTime() === firstDate.getTime()) {\n        return;\n      }\n\n      if (selectedDate < firstDate) {\n        setSelectedDates([dateString]);\n        toggleBottomSheet(true);\n        return;\n      }\n\n      const range = [];\n      const currentDate = new Date(firstDate);\n      const endDate = new Date(selectedDate);\n\n      while (currentDate <= endDate) {\n        range.push(format(currentDate, 'yyyy-MM-dd'));\n        currentDate.setDate(currentDate.getDate() + 1);\n      }\n    \n      setSelectedDates(range);\n    }\n  };\n\n  const handleAddAvailability = (availabilityData) => {\n    const newMarkedDates = { ...markedDates };\n    const newCurrentAvailability = { ...currentAvailability };\n\n    availabilityData.dates.forEach(date => {\n      const allServicesSelected = availabilityData.serviceTypes.includes(ALL_SERVICES) || \n                                 availabilityData.serviceTypes.length === SERVICE_TYPES.length - 1;\n\n      if (!availabilityData.isAvailable) {\n        newCurrentAvailability[date] = {\n          isAvailable: false,\n          unavailableTimes: [{\n            startTime: availabilityData.startTime,\n            endTime: availabilityData.endTime,\n            reason: availabilityData.reason\n          }]\n        };\n\n        newMarkedDates[date] = {\n          customStyles: {\n            container: {\n              backgroundColor: availabilityData.isAllDay && allServicesSelected ? 'lightgrey' : theme.colors.calendarColor,\n              width: 35,\n              height: 35,\n              borderRadius: 17.5,\n              alignItems: 'center',\n              justifyContent: 'center'\n            },\n            text: { color: 'white' }\n          }\n        };\n      } else {\n        newCurrentAvailability[date] = {\n          isAvailable: true,\n          unavailableTimes: []\n        };\n        newMarkedDates[date] = {\n          customStyles: {\n            container: { \n              backgroundColor: 'white',\n              width: 35,\n              height: 35,\n              borderRadius: 17.5,\n              alignItems: 'center',\n              justifyContent: 'center'\n            },\n            text: { color: 'black' }\n          }\n        };\n      }\n    });\n\n    setMarkedDates(newMarkedDates);\n    setCurrentAvailability(newCurrentAvailability);\n    setIsAddModalVisible(false);\n    setSelectedDates([]);\n  };\n\n  const applyDefaultSettingsToCalendar = (settings) => {\n    const newMarkedDates = { ...markedDates };\n    const newCurrentAvailability = { ...currentAvailability };\n    \n    const today = new Date();\n    const oneYearFromNow = new Date(today.getFullYear() + 1, today.getMonth(), today.getDate());\n\n    const daysMapping = {\n      'Sunday': 0,\n      'Monday': 1,\n      'Tuesday': 2,\n      'Wednesday': 3,\n      'Thursday': 4,\n      'Friday': 5,\n      'Saturday': 6\n    };\n\n    Object.entries(settings).forEach(([day, daySettings]) => {\n      let currentDate = new Date(Date.UTC(today.getFullYear(), today.getMonth(), today.getDate()));\n      const targetDayNumber = daysMapping[day];\n      \n      while (currentDate <= (daySettings.endDate ? new Date(daySettings.endDate) : oneYearFromNow)) {\n        const currentDayNumber = currentDate.getUTCDay();\n        const dateString = currentDate.toISOString().split('T')[0];\n        \n        if (currentDayNumber === targetDayNumber) {\n          if (daySettings.isUnavailable) {\n            if (daySettings.isAllDay) {\n              newMarkedDates[dateString] = {\n                customStyles: {\n                  container: { backgroundColor: 'lightgrey' },\n                  text: { color: 'white' }\n                }\n              };\n              newCurrentAvailability[dateString] = {\n                isAvailable: false,\n                unavailableTimes: [{ startTime: '00:00', endTime: '24:00', reason: 'Default Setting' }]\n              };\n            } else {\n              newMarkedDates[dateString] = {\n                customStyles: {\n                  container: { backgroundColor: theme.colors.calendarColor },\n                  text: { color: 'white' }\n                }\n              };\n              newCurrentAvailability[dateString] = {\n                isAvailable: true,\n                unavailableTimes: [{\n                  startTime: daySettings.startTime,\n                  endTime: daySettings.endTime,\n                  reason: 'Default Setting'\n                }]\n              };\n            }\n          } else {\n            // Reset to available\n            delete newMarkedDates[dateString];\n            delete newCurrentAvailability[dateString];\n          }\n        }\n        currentDate.setUTCDate(currentDate.getUTCDate() + 1);\n      }\n    });\n\n    setMarkedDates(newMarkedDates);\n    setCurrentAvailability(newCurrentAvailability);\n  };\n\n  //TODO: implement this in future for making owners on bookings clickable\n  // const handleOwnerPress = (ownerId) => {\n  //   // Navigate to the owner history page\n  //   // You'll need to implement this navigation logic\n  //   console.log(`Navigating to owner history for owner ID: ${ownerId}`);\n  // };\n\n  const IconComponent = Platform.OS === 'web' ? MaterialCommunityIcons : Icon;\n\n  const renderArrow = (direction) => {\n    let iconName;\n    if (Platform.OS === 'web') {\n      iconName = direction === 'left' ? 'chevron-left' : 'chevron-right';\n    } else {\n      iconName = direction === 'left' ? 'chevron-back' : 'chevron-forward';\n    }\n    return (\n      <IconComponent \n        name={iconName} \n        size={24} \n        color={theme.colors.primary}\n      />\n    );\n  };\n\n  const handleDefaultSettingsSave = (newSettings) => {\n    console.log(\"Before updating defaultSettings:\", defaultSettings);\n    console.log(\"New settings to be applied:\", newSettings);\n    setDefaultSettings(newSettings);\n    \n    // Add a setTimeout to check the state after update\n    setTimeout(() => {\n      console.log(\"After updating defaultSettings:\", defaultSettings);\n    }, 0);\n    \n    // Call applyDefaultSettingsToCalendar to update the calendar view\n    applyDefaultSettingsToCalendar(newSettings);\n    setIsSettingsModalVisible(false);\n  };\n\n  const handleSaveAvailability = (data) => {\n    const { startTime, endTime, services, isAvailable } = data;\n    const isAllDay = startTime === '00:00' && endTime === '24:00';\n    handleAddAvailability({\n      dates: selectedDates,\n      isAllDay,\n      startTime,\n      endTime,\n      isUnavailable: !isAvailable,\n      serviceTypes: services,\n      reason: `Unavailable for: ${services.join(', ')}`,\n    });\n    toggleBottomSheet(false);\n    setSelectedDates([]);\n  };\n\n  // TODO: make this actually remove the timeslot on the backend\n  const handleRemoveTimeSlot = (date, timeSlot, updatedAvailability, selectedDates) => {\n    if (updatedAvailability && selectedDates) {\n      // Handle multiple dates\n      setCurrentAvailability(prev => ({\n        ...prev,\n        ...updatedAvailability\n      }));\n\n      // Update marked dates for multiple dates\n      const newMarkedDates = { ...markedDates };\n      selectedDates.forEach(date => {\n        if (updatedAvailability[date]?.unavailableTimes.length === 0) {\n          newMarkedDates[date] = {\n            customStyles: {\n              container: { backgroundColor: 'white' },\n              text: { color: 'black' }\n            }\n          };\n        }\n      });\n      setMarkedDates(newMarkedDates);\n    } else {\n      // Handle single date (existing functionality)\n      setCurrentAvailability(prev => {\n        const currentDateAvailability = prev[date];\n        if (!currentDateAvailability) return prev;\n\n        const filteredTimes = currentDateAvailability.unavailableTimes.filter(\n          time => !(time.startTime === timeSlot.startTime && time.endTime === timeSlot.endTime)\n        );\n\n        // Update marked dates for single date\n        const newMarkedDates = { ...markedDates };\n        if (filteredTimes.length === 0) {\n          newMarkedDates[date] = {\n            customStyles: {\n              container: { backgroundColor: 'white' },\n              text: { color: 'black' }\n            }\n          };\n          setMarkedDates(newMarkedDates);\n        }\n\n        return {\n          ...prev,\n          [date]: {\n            ...currentDateAvailability,\n            unavailableTimes: filteredTimes\n          }\n        };\n      });\n    }\n  };\n\n  const handleViewBookings = () => {\n    if (selectedDates.length > 0) {\n      navigation.navigate('MyBookings', {\n        selectedDates,\n        initialTab: 'Upcoming'\n      });\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <SafeAreaView style={styles.container}>\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color={theme.colors.primary} />\n          <Text style={styles.loadingText}>Loading availability...</Text>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  if (error) {\n    return (\n      <SafeAreaView style={styles.container}>\n        <View style={styles.errorContainer}>\n          <Text style={styles.errorText}>{error}</Text>\n          <TouchableOpacity \n            style={styles.retryButton}\n            onPress={() => {\n              setError(null);\n              loadAvailabilityData();\n            }}\n          >\n            <Text style={styles.retryButtonText}>Retry</Text>\n          </TouchableOpacity>\n        </View>\n      </SafeAreaView>\n    );\n  }\n\n  return (\n    <View style={createStyles(screenWidth, isCollapsed).mainContainer}>\n      <View style={createStyles(screenWidth, isCollapsed).container}>\n        <ScrollView \n          style={createStyles(screenWidth, isCollapsed).scrollView}\n          contentContainerStyle={createStyles(screenWidth, isCollapsed).scrollContent}\n          showsVerticalScrollIndicator={false}\n        >\n          <View style={createStyles(screenWidth, isCollapsed).centeredContainer}>\n            <View style={createStyles(screenWidth, isCollapsed).header}>\n              <Text style={createStyles(screenWidth, isCollapsed).title}>Availability Settings</Text>\n              <TouchableOpacity \n                style={createStyles(screenWidth, isCollapsed).defaultSettingsButton}\n                onPress={() => setIsSettingsModalVisible(true)}\n              >\n                <Text style={createStyles(screenWidth, isCollapsed).defaultSettingsText}>Default Settings</Text>\n                <IconComponent \n                  name={Platform.OS === 'web' ? 'cog' : 'settings-outline'} \n                  size={24} \n                  color={theme.colors.text} \n                />\n              </TouchableOpacity>\n            </View>\n\n            <Calendar\n              style={[createStyles(screenWidth, isCollapsed).calendar, { width: screenWidth <= 900 ? '100%' : 'auto' }]}\n              markedDates={markedDates}\n              onDayPress={onDayPress}\n              theme={{\n                backgroundColor: 'transparent',\n                calendarBackground: 'transparent',\n                textSectionTitleColor: theme.colors.text,\n                selectedDayBackgroundColor: theme.colors.primary,\n                selectedDayTextColor: '#ffffff',\n                todayTextColor: theme.colors.primary,\n                dayTextColor: theme.colors.text,\n                textDisabledColor: '#d9e1e8',\n                dotColor: theme.colors.primary,\n                monthTextColor: theme.colors.text,\n                arrowColor: theme.colors.primary,\n                indicatorColor: theme.colors.primary,\n              }}\n            />\n\n            <View style={createStyles(screenWidth, isCollapsed).colorKeyContainer}>\n              <Text style={createStyles(screenWidth, isCollapsed).colorKeyTitle}>Color Key</Text>\n              <View style={createStyles(screenWidth, isCollapsed).colorKeyItem}>\n                <View style={[createStyles(screenWidth, isCollapsed).colorBox, { backgroundColor: theme.colors.calendarColor }]} />\n                <Text style={createStyles(screenWidth, isCollapsed).colorKeyText}>Unavailable</Text>\n              </View>\n              <View style={createStyles(screenWidth, isCollapsed).colorKeyItem}>\n                <View style={[createStyles(screenWidth, isCollapsed).colorBox, { backgroundColor: theme.colors.calendarColorYellowBrown }]} />\n                <Text style={createStyles(screenWidth, isCollapsed).colorKeyText}>Partially Available</Text>\n              </View>\n            </View>\n          </View>\n        </ScrollView>\n\n        <TouchableOpacity \n          style={createStyles(screenWidth, isCollapsed).addButton}\n          onPress={() => setIsAddModalVisible(true)}\n        >\n          <Icon name=\"add\" size={24} color={theme.colors.whiteText} />\n        </TouchableOpacity>\n      </View>\n\n      {isAddModalVisible && (\n        <AddAvailabilityModal\n          visible={isAddModalVisible}\n          onClose={() => setIsAddModalVisible(false)}\n          onSave={handleAddAvailability}\n          selectedDate={selectedDates.length > 0 ? selectedDates[0] : null}\n        />\n      )}\n\n      {isSettingsModalVisible && (\n        <DefaultSettingsModal\n          isVisible={isSettingsModalVisible}\n          onClose={() => setIsSettingsModalVisible(false)}\n          onSave={handleDefaultSettingsSave}\n          defaultSettings={defaultSettings}\n        />\n      )}\n\n      {(showBottomSheet || isClosing) && (\n        <>\n          <Animated.View \n            style={[\n              styles.overlay,\n              {\n                opacity: fadeAnim,\n                backgroundColor: 'black',\n                pointerEvents: isBottomSheetMinimized ? 'none' : 'auto'\n              }\n            ]} \n          />\n          <View style={[\n            styles.bottomSheetContainer,\n            { pointerEvents: 'box-none' }\n          ]}>\n            <AvailabilityBottomSheet\n              selectedDates={selectedDates}\n              currentAvailability={currentAvailability}\n              onClose={() => {\n                toggleBottomSheet(false);\n                setSelectedDates([]);\n              }}\n              onViewUnavailableTimes={() => {\n                setShowUnavailableTimesModal(true);\n              }}\n              onSave={handleSaveAvailability}\n              onViewBookings={handleViewBookings}\n              onMinimize={handleBottomSheetMinimize}\n            />\n          </View>\n        </>\n      )}\n\n      <UnavailableTimesModal\n        visible={showUnavailableTimesModal}\n        onClose={() => setShowUnavailableTimesModal(false)}\n        selectedDates={selectedDates}\n        currentAvailability={currentAvailability}\n        onRemoveTimeSlot={handleRemoveTimeSlot}\n        bookings={bookings}\n      />\n    </View>\n  );\n};\n\nconst createStyles = (screenWidth, isCollapsed) => StyleSheet.create({\n  mainContainer: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n    height: '100vh',\n    overflow: 'hidden',\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    marginLeft: screenWidth > 900 ? (isCollapsed ? 70 : 250) : 0,\n    transition: 'margin-left 0.3s ease',\n  },\n  container: {\n    flex: 1,\n  },\n  scrollView: {\n    flex: 1,\n  },\n  scrollContent: {\n    flexGrow: 1,\n  },\n  bottomSheetOverlay: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n  },\n  centeredContainer: {\n    maxWidth: screenWidth > 900 ? 1000 : '100%',\n    width: '100%',\n    alignSelf: 'center',\n    flex: 1,\n    padding: screenWidth <= 900 ? 10 : 20,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: screenWidth <= 900 ? 10 : 16,\n    flexWrap: screenWidth <= 600 ? 'wrap' : 'nowrap',\n    gap: screenWidth <= 600 ? 10 : 0,\n  },\n  title: {\n    fontSize: screenWidth <= 600 ? theme.fontSizes.medium : theme.fontSizes.large,\n    fontWeight: 'bold',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n    width: screenWidth <= 600 ? '100%' : 'auto',\n  },\n  addButton: {\n    position: 'absolute',\n    right: 20,\n    bottom: 20,\n    width: 56,\n    height: 56,\n    borderRadius: 28,\n    backgroundColor: theme.colors.primary,\n    justifyContent: 'center',\n    alignItems: 'center',\n    elevation: 5,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n  },\n  defaultSettingsButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 8,\n  },\n  defaultSettingsText: {\n    marginRight: 8,\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  colorKeyContainer: {\n    marginTop: 20,\n    padding: screenWidth <= 600 ? 15 : 10,\n    backgroundColor: 'white',\n    borderRadius: 5,\n    elevation: 2,\n    flexDirection: screenWidth <= 600 ? 'column' : 'row',\n    flexWrap: 'wrap',\n    gap: 10,\n  },\n  colorKeyTitle: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    marginBottom: 10,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  colorKeyItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginVertical: screenWidth <= 600 ? 2 : 5,\n    flex: screenWidth <= 600 ? 0 : 1,\n  },\n  colorBox: {\n    width: 20,\n    height: 20,\n    borderRadius: 3,\n    marginRight: 10,\n  },\n  colorKeyText: {\n    fontSize: 14,\n    color: 'black',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    marginTop: 10,\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  errorContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  errorText: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.error,\n    textAlign: 'center',\n    marginBottom: 20,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  retryButton: {\n    backgroundColor: theme.colors.primary,\n    padding: 10,\n    borderRadius: 5,\n  },\n  retryButtonText: {\n    color: theme.colors.whiteText,\n    fontSize: theme.fontSizes.medium,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  overlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'black',\n  },\n  bottomSheetContainer: {\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n  },\n  calendar: {\n    paddingBottom: 20,\n    paddingLeft: 10,\n    paddingRight: 10\n  },\n});\n\nexport default AvailabilitySettings;\n","import React from 'react';\nimport { View, StyleSheet, ScrollView, Platform, SafeAreaView, StatusBar } from 'react-native';\nimport { Card, Title, Paragraph, List, Button, useTheme } from 'react-native-paper';\nimport { theme } from '../styles/theme';\nimport { navigateToFrom } from '../components/Navigation';\n\nconst OwnerHistory = ({ route, navigation }) => {\n  const { ownerId } = route.params;\n  const { colors } = useTheme();\n\n  // Mock data - replace with actual data from your backend\n  const ownerData = {\n    id: ownerId,\n    name: 'John Doe',\n    email: 'john.doe@example.com',\n    phone: '(123) 456-7890',\n    contracts: [\n      { id: '1', date: '2023-05-01', status: 'Completed' },\n      { id: '2', date: '2023-04-15', status: 'Pending' },\n    ],\n    invoices: [\n      { id: '1', date: '2023-05-02', amount: '$100', status: 'Paid' },\n      { id: '2', date: '2023-04-16', amount: '$75', status: 'Unpaid' },\n    ],\n    upcomingBookings: [\n      { id: '1', date: '2023-06-01', service: 'Dog Walking' },\n      { id: '2', date: '2023-06-15', service: 'Cat Sitting' },\n    ],\n  };\n\n  const Content = () => (\n    <ScrollView style={styles.scrollView} contentContainerStyle={styles.scrollViewContent}>\n      <Card style={styles.card}>\n        <Card.Content>\n          <Title>{ownerData.name}</Title>\n          <Paragraph>Email: {ownerData.email}</Paragraph>\n          <Paragraph>Phone: {ownerData.phone}</Paragraph>\n        </Card.Content>\n      </Card>\n\n      <Card style={styles.card}>\n        <Card.Content>\n          <Title>Upcoming Bookings</Title>\n          {ownerData.upcomingBookings.map(booking => (\n            <List.Item\n              key={booking.id}\n              title={`Booking ${booking.id}`}\n              description={`Date: ${booking.date} - Service: ${booking.service}`}\n              left={props => <List.Icon {...props} icon=\"calendar\" />}\n            />\n          ))}\n        </Card.Content>\n      </Card>\n\n      <Card style={styles.card}>\n        <Card.Content>\n          <Title>Contracts</Title>\n          {ownerData.contracts.map(contract => (\n            <List.Item\n              key={contract.id}\n              title={`Contract ${contract.id}`}\n              description={`Date: ${contract.date} - Status: ${contract.status}`}\n              left={props => <List.Icon {...props} icon=\"file-document-outline\" />}\n            />\n          ))}\n        </Card.Content>\n        <Card.Actions>\n          <Button onPress={() => navigateToFrom(navigation, 'Contracts', 'OwnerHistory', { ownerId })}>View All Contracts</Button>\n        </Card.Actions>\n      </Card>\n\n      <Card style={styles.card}>\n        <Card.Content>\n          <Title>Invoices</Title>\n          {ownerData.invoices.map(invoice => (\n            <List.Item\n              key={invoice.id}\n              title={`Invoice ${invoice.id}`}\n              description={`Date: ${invoice.date} - Amount: ${invoice.amount} - Status: ${invoice.status}`}\n              left={props => <List.Icon {...props} icon=\"file-document-outline\" />}\n            />\n          ))}\n        </Card.Content>\n        <Card.Actions>\n          <Button onPress={() => navigateToFrom(navigation, 'Invoices', 'OwnerHistory', { ownerId })}>View All Invoices</Button>\n        </Card.Actions>\n      </Card>\n\n      <View style={styles.messageButtonContainer}>\n        <Button \n          mode=\"contained\" \n          onPress={() => navigateToFrom(navigation, 'MessageHistory', 'OwnerHistory', { ownerId })}\n          style={styles.messageButton}\n        >\n          View Messages\n        </Button>\n      </View>\n    </ScrollView>\n  );\n\n  if (Platform.OS === 'ios') {\n    return (\n      <SafeAreaView style={styles.container}>\n        <Content />\n      </SafeAreaView>\n    );\n  } else if (Platform.OS === 'android') {\n    return (\n      <View style={[styles.container, styles.androidContainer]}>\n        <Content />\n      </View>\n    );\n  } else {\n    return (\n      <View style={styles.container}>\n        <Content />\n      </View>\n    );\n  }\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n  },\n  androidContainer: {\n    paddingTop: StatusBar.currentHeight,\n  },\n  scrollView: {\n    flex: 1,\n  },\n  scrollViewContent: {\n    padding: 16,\n    paddingBottom: Platform.OS === 'web' ? 16 : 90, // Extra padding for iOS and Android\n  },\n  card: {\n    marginBottom: 16,\n    maxWidth: 600,\n    alignSelf: 'center',\n    width: '100%',\n  },\n  messageButtonContainer: {\n    maxWidth: 600,\n    alignSelf: 'center',\n    width: '100%',\n    marginTop: 16,\n  },\n  messageButton: {\n    width: '100%',\n  },\n});\n\nexport default OwnerHistory;\n","import React, { useState, useContext, useEffect, useRef } from 'react';\nimport { View, Text, StyleSheet, TextInput, Pressable, ScrollView, Animated, Platform } from 'react-native';\nimport { theme } from '../styles/theme';\nimport { AuthContext } from '../context/AuthContext';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\n\nconst DateTimePicker = ({\n  value,\n  onChange,\n  error,\n  disabled = false,\n  containerStyle,\n  isMilitary = true,\n  onPickerStateChange\n}) => {\n  const { is_DEBUG, screenWidth } = useContext(AuthContext);\n  const [inputs, setInputs] = useState({\n    month: '',\n    day: '',\n    year: '',\n    hours: '',\n    minutes: '',\n    period: isMilitary ? null : 'AM'\n  });\n  const [showCalendar, setShowCalendar] = useState(false);\n  const [showTimeSelector, setShowTimeSelector] = useState(false);\n  const containerRef = useRef(null);\n  const fadeAnim = useRef(new Animated.Value(0)).current;\n\n  const animatePickerVisibility = (show) => {\n    Animated.timing(fadeAnim, {\n      toValue: show ? 1 : 0,\n      duration: 200,\n      useNativeDriver: true,\n    }).start();\n  };\n\n  useEffect(() => {\n    animatePickerVisibility(showCalendar || showTimeSelector);\n  }, [showCalendar, showTimeSelector]);\n\n  useEffect(() => {\n    if (value instanceof Date && !isNaN(value)) {\n      if (is_DEBUG) {\n        console.log('MBA1234 Received date value:', value.toISOString());\n      }\n      \n      const hours24 = value.getHours();\n      const hours12 = hours24 % 12 || 12;\n      const period = isMilitary ? null : (hours24 >= 12 ? 'PM' : 'AM');\n      \n      if (is_DEBUG) {\n        console.log('MBA1234 Time format detection:', {\n          hours24,\n          hours12,\n          period,\n          isMilitary\n        });\n      }\n      \n      setInputs({\n        month: String(value.getMonth() + 1).padStart(2, '0'),\n        day: String(value.getDate()).padStart(2, '0'),\n        year: String(value.getFullYear()),\n        hours: isMilitary ? String(hours24).padStart(2, '0') : String(hours12).padStart(2, '0'),\n        minutes: String(value.getMinutes()).padStart(2, '0'),\n        period\n      });\n    }\n  }, [value, isMilitary]);\n\n  useEffect(() => {\n    if (is_DEBUG) {\n      console.log('MBA5678 DateTimePicker picker states:', {\n        showCalendar,\n        showTimeSelector,\n        isPickerActive: showCalendar || showTimeSelector\n      });\n    }\n    onPickerStateChange?.(showCalendar || showTimeSelector);\n  }, [showCalendar, showTimeSelector]);\n\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (containerRef.current && !containerRef.current.contains(event.target)) {\n        if (is_DEBUG) {\n          console.log('MBA5678 Click outside - closing pickers');\n        }\n        setShowCalendar(false);\n        setShowTimeSelector(false);\n      }\n    };\n\n    // Only add document listeners on web platform\n    if (Platform.OS === 'web' && typeof document !== 'undefined') {\n      document.addEventListener('mousedown', handleClickOutside);\n      return () => document.removeEventListener('mousedown', handleClickOutside);\n    }\n    \n    // On mobile platforms, we'll handle click outside via Modal components\n    // which have built-in touch dismissal functionality\n  }, []);\n\n  const formatTwoDigitInput = (input, field, currentValue) => {\n    // Remove any non-numeric characters\n    const numbers = input.replace(/[^0-9]/g, '');\n    \n    if (is_DEBUG) {\n      console.log('MBA1234 Formatting input:', {\n        field,\n        input,\n        numbers,\n        currentValue\n      });\n    }\n\n    // Handle backspace (empty input)\n    if (numbers.length === 0) {\n      return '00';\n    }\n\n    // If we only have one digit\n    if (numbers.length === 1) {\n      return `0${numbers}`;\n    }\n\n    // If we have two digits\n    if (numbers.length >= 2) {\n      const firstDigit = parseInt(numbers[0], 10);\n      const secondDigit = parseInt(numbers[1], 10);\n      \n      if (field === 'month') {\n        if (firstDigit > 1 || (firstDigit === 1 && secondDigit > 2)) {\n          return '12';\n        }\n        return `${firstDigit}${secondDigit}`;\n      }\n      \n      if (field === 'day') {\n        if (firstDigit > 3 || (firstDigit === 3 && secondDigit > 1)) {\n          return '31';\n        }\n        return `${firstDigit}${secondDigit}`;\n      }\n      \n      if (field === 'hours') {\n        if (!currentValue.period) {\n          // 24-hour format\n          if (firstDigit > 2 || (firstDigit === 2 && secondDigit > 3)) {\n            return '23';\n          }\n        } else {\n          // 12-hour format\n          if (firstDigit > 1 || (firstDigit === 1 && secondDigit > 2)) {\n            return '12';\n          }\n        }\n        return `${firstDigit}${secondDigit}`;\n      }\n      \n      if (field === 'minutes') {\n        if (firstDigit > 5) {\n          return '59';\n        }\n        return `${firstDigit}${secondDigit}`;\n      }\n    }\n    \n    return numbers.slice(0, 2);\n  };\n\n  const formatYearInput = (input) => {\n    const numbers = input.replace(/[^0-9]/g, '');\n    if (numbers.length === 0) return '0000';\n    return numbers.padStart(4, '0').slice(0, 4);\n  };\n\n  const handleInputChange = (field, value) => {\n    let formattedValue = value;\n\n    if (is_DEBUG) {\n      console.log('MBA1234 Input change:', {\n        field,\n        value,\n        currentInputs: inputs\n      });\n    }\n\n    switch (field) {\n      case 'month':\n        formattedValue = formatTwoDigitInput(value, 'month', inputs);\n        break;\n      case 'day':\n        formattedValue = formatTwoDigitInput(value, 'day', inputs);\n        break;\n      case 'year':\n        formattedValue = formatYearInput(value);\n        break;\n      case 'hours':\n        formattedValue = formatTwoDigitInput(value, 'hours', inputs);\n        break;\n      case 'minutes':\n        formattedValue = formatTwoDigitInput(value, 'minutes', inputs);\n        break;\n      case 'period':\n        formattedValue = value;\n        break;\n    }\n\n    if (is_DEBUG) {\n      console.log('MBA1234 Formatted value:', {\n        field,\n        formattedValue\n      });\n    }\n\n    const newInputs = { ...inputs, [field]: formattedValue };\n    setInputs(newInputs);\n\n    // Only create new date if we have all required fields\n    if (newInputs.month && newInputs.day && newInputs.year && \n        newInputs.hours && newInputs.minutes) {\n      createNewDate(newInputs);\n    }\n  };\n\n  const createNewDate = (currentInputs) => {\n    try {\n      let hours = parseInt(currentInputs.hours, 10);\n      if (currentInputs.period) {\n        // Only convert hours if we're using AM/PM\n        if (currentInputs.period === 'PM' && hours !== 12) {\n          hours += 12;\n        } else if (currentInputs.period === 'AM' && hours === 12) {\n          hours = 0;\n        }\n      }\n\n      const newDate = new Date(\n        parseInt(currentInputs.year, 10),\n        parseInt(currentInputs.month, 10) - 1,\n        parseInt(currentInputs.day, 10),\n        hours,\n        parseInt(currentInputs.minutes, 10)\n      );\n\n      if (is_DEBUG) {\n        console.log('MBA1234 Created new date:', {\n          inputs: currentInputs,\n          newDate: newDate.toISOString()\n        });\n      }\n\n      if (!isNaN(newDate.getTime())) {\n        onChange(newDate);\n      }\n    } catch (error) {\n      if (is_DEBUG) {\n        console.error('MBA1234 Error creating date:', error);\n      }\n    }\n  };\n\n  const handleDatePress = () => {\n    if (is_DEBUG) {\n      console.log('MBA5678 Date press - toggling calendar');\n    }\n    setShowCalendar(prev => !prev);\n    setShowTimeSelector(false);\n  };\n\n  const handleTimePress = () => {\n    if (is_DEBUG) {\n      console.log('MBA5678 Time press - toggling time selector');\n    }\n    setShowTimeSelector(prev => !prev);\n    setShowCalendar(false);\n  };\n\n  const handleDaySelect = (day) => {\n    handleInputChange('day', String(day));\n    setShowCalendar(false);\n  };\n\n  if (is_DEBUG) {\n    console.log('MBA1234 Current state:', {\n      inputs,\n      isMilitary\n    });\n  }\n\n  return (\n    <View style={[styles.container, containerStyle]} ref={containerRef}>\n      <View style={[\n        styles.dateTimeContainer,\n        error && styles.errorBorder,\n        disabled && styles.disabled\n      ]}>\n        {/* Date Inputs */}\n        <Pressable \n          style={styles.dateInputGroup}\n          onPress={() => !disabled && handleDatePress()}\n        >\n          <TextInput\n            style={styles.numberInput}\n            value={inputs.month}\n            maxLength={2}\n            keyboardType=\"number-pad\"\n            onChangeText={(text) => handleInputChange('month', text)}\n            placeholder=\"MM\"\n            editable={!disabled}\n          />\n          <Text style={styles.separator}>/</Text>\n          <TextInput\n            style={styles.numberInput}\n            value={inputs.day}\n            maxLength={2}\n            keyboardType=\"number-pad\"\n            onChangeText={(text) => handleInputChange('day', text)}\n            placeholder=\"DD\"\n            editable={!disabled}\n          />\n          <Text style={styles.separator}>/</Text>\n          <TextInput\n            style={styles.yearInput}\n            value={inputs.year}\n            maxLength={4}\n            keyboardType=\"number-pad\"\n            onChangeText={(text) => handleInputChange('year', text)}\n            placeholder=\"YYYY\"\n            editable={!disabled}\n          />\n          {screenWidth > 410 && (\n            <MaterialCommunityIcons \n              name=\"calendar\" \n              size={20} \n              color={theme.colors.text} \n              style={styles.icon} \n            />\n          )}\n        </Pressable>\n        \n        <Text style={styles.divider}>|</Text>\n        \n        {/* Time Inputs */}\n        <Pressable \n          style={styles.timeInputGroup}\n          onPress={() => !disabled && handleTimePress()}\n        >\n          <TextInput\n            style={styles.numberInput}\n            value={inputs.hours}\n            maxLength={2}\n            keyboardType=\"number-pad\"\n            onChangeText={(text) => handleInputChange('hours', text)}\n            placeholder=\"HH\"\n            editable={!disabled}\n          />\n          <Text style={styles.separator}>:</Text>\n          <TextInput\n            style={styles.numberInput}\n            value={inputs.minutes}\n            maxLength={2}\n            keyboardType=\"number-pad\"\n            onChangeText={(text) => handleInputChange('minutes', text)}\n            placeholder=\"MM\"\n            editable={!disabled}\n          />\n          \n          {/* AM/PM Toggle - only show if not military time */}\n          {!isMilitary && (\n            <Pressable\n              style={styles.periodButton}\n              onPress={() => !disabled && handleInputChange('period', inputs.period)}\n              disabled={disabled}\n            >\n              <Text style={styles.periodText}>{inputs.period}</Text>\n            </Pressable>\n          )}\n          {screenWidth > 410 && (\n            <MaterialCommunityIcons \n              name=\"clock-outline\" \n              size={20} \n              color={theme.colors.text} \n              style={styles.icon} \n            />\n          )}\n        </Pressable>\n      </View>\n\n      <Animated.View style={[\n        styles.pickerContainer,\n        { opacity: fadeAnim },\n        { display: (showCalendar || showTimeSelector) ? 'flex' : 'none' }\n      ]}>\n        {showCalendar && !disabled && (\n          <View style={styles.calendar}>\n            <View style={styles.calendarHeader}>\n              <Text style={styles.calendarHeaderText}>\n                {value.toLocaleString('default', { month: 'long' })} {value.getFullYear()}\n              </Text>\n            </View>\n            <View style={styles.calendarWeekDays}>\n              {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (\n                <Text key={day} style={styles.calendarWeekDay}>{day}</Text>\n              ))}\n            </View>\n            {/* Calendar grid */}\n            {Array.from({ length: 6 }).map((_, weekIndex) => (\n              <View key={`week-${weekIndex}`} style={styles.calendarWeek}>\n                {Array.from({ length: 7 }).map((__, dayIndex) => {\n                  const dayNumber = weekIndex * 7 + dayIndex - value.getDay() + 1;\n                  const isCurrentMonth = dayNumber > 0 && dayNumber <= new Date(value.getFullYear(), value.getMonth() + 1, 0).getDate();\n                  const isSelected = parseInt(inputs.day) === dayNumber;\n                  \n                  return (\n                    <Pressable\n                      key={`day-${dayIndex}`}\n                      style={[\n                        styles.calendarDay,\n                        isSelected && styles.selectedDay,\n                        !isCurrentMonth && styles.disabledDay\n                      ]}\n                      onPress={() => isCurrentMonth && handleDaySelect(dayNumber)}\n                    >\n                      {isCurrentMonth && (\n                        <Text style={[\n                          styles.calendarDayText,\n                          isSelected && styles.selectedDayText\n                        ]}>\n                          {dayNumber}\n                        </Text>\n                      )}\n                    </Pressable>\n                  );\n                })}\n              </View>\n            ))}\n          </View>\n        )}\n\n        {showTimeSelector && !disabled && (\n          <View style={styles.timeSelector}>\n            <View style={styles.timeSelectorColumn}>\n              <Text style={styles.timeSelectorLabel}>Hour</Text>\n              <ScrollView style={styles.timeSelectorScroll}>\n                {Array.from({ length: isMilitary ? 24 : 12 }, (_, i) => (\n                  <Pressable\n                    key={i}\n                    style={[\n                      styles.timeSelectorItem,\n                      parseInt(inputs.hours) === (isMilitary ? i : i + 1) && styles.selectedTime\n                    ]}\n                    onPress={() => {\n                      handleInputChange('hours', String(isMilitary ? i : i + 1).padStart(2, '0'));\n                    }}\n                  >\n                    <Text style={[\n                      styles.timeSelectorText,\n                      parseInt(inputs.hours) === (isMilitary ? i : i + 1) && styles.selectedTimeText\n                    ]}>\n                      {String(isMilitary ? i : i + 1).padStart(2, '0')}\n                    </Text>\n                  </Pressable>\n                ))}\n              </ScrollView>\n            </View>\n\n            <View style={styles.timeSelectorColumn}>\n              <Text style={styles.timeSelectorLabel}>Minute</Text>\n              <ScrollView style={styles.timeSelectorScroll}>\n                {Array.from({ length: 60 }, (_, i) => (\n                  <Pressable\n                    key={i}\n                    style={[\n                      styles.timeSelectorItem,\n                      parseInt(inputs.minutes) === i && styles.selectedTime\n                    ]}\n                    onPress={() => handleInputChange('minutes', String(i).padStart(2, '0'))}\n                  >\n                    <Text style={[\n                      styles.timeSelectorText,\n                      parseInt(inputs.minutes) === i && styles.selectedTimeText\n                    ]}>\n                      {String(i).padStart(2, '0')}\n                    </Text>\n                  </Pressable>\n                ))}\n              </ScrollView>\n            </View>\n\n            {!isMilitary && (\n              <View style={styles.timeSelectorColumn}>\n                <Text style={styles.timeSelectorLabel}>Period</Text>\n                <View style={styles.periodContainer}>\n                  <Pressable\n                    style={[\n                      styles.timeSelectorItem,\n                      inputs.period === 'AM' && styles.selectedTime\n                    ]}\n                    onPress={() => handleInputChange('period', 'AM')}\n                  >\n                    <Text style={[\n                      styles.timeSelectorText,\n                      inputs.period === 'AM' && styles.selectedTimeText\n                    ]}>\n                      AM\n                    </Text>\n                  </Pressable>\n                  <Pressable\n                    style={[\n                      styles.timeSelectorItem,\n                      inputs.period === 'PM' && styles.selectedTime\n                    ]}\n                    onPress={() => handleInputChange('period', 'PM')}\n                  >\n                    <Text style={[\n                      styles.timeSelectorText,\n                      inputs.period === 'PM' && styles.selectedTimeText\n                    ]}>\n                      PM\n                    </Text>\n                  </Pressable>\n                </View>\n              </View>\n            )}\n          </View>\n        )}\n      </Animated.View>\n\n      {error && <Text style={styles.errorText}>{error}</Text>}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    position: 'relative',\n  },\n  dateTimeContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.background,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    paddingHorizontal: 12,\n    height: 40,\n    width: '100%',\n    justifyContent: 'space-between',\n  },\n  dateInputGroup: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingHorizontal: 4,\n  },\n  timeInputGroup: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingHorizontal: 4,\n  },\n  numberInput: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    width: 24,\n    textAlign: 'center',\n    padding: 0,\n  },\n  yearInput: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    width: 42,\n    textAlign: 'center',\n    padding: 0,\n  },\n  separator: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    marginHorizontal: 2,\n  },\n  divider: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.border,\n    marginHorizontal: 8,\n  },\n  periodButton: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 4,\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    marginLeft: 8,\n  },\n  periodText: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    fontWeight: '500',\n  },\n  errorBorder: {\n    borderColor: theme.colors.error,\n  },\n  errorText: {\n    color: theme.colors.error,\n    fontSize: theme.fontSizes.small,\n    marginTop: 4,\n  },\n  disabled: {\n    backgroundColor: theme.colors.disabled,\n    opacity: 0.7,\n  },\n  icon: {\n    marginLeft: 8,\n  },\n  pickerContainer: {\n    position: 'absolute',\n    top: '100%',\n    left: 0,\n    right: 0,\n    zIndex: 1000,\n  },\n  calendar: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    marginTop: 4,\n    padding: 12,\n    elevation: 5,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n  },\n  calendarHeader: {\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  calendarHeaderText: {\n    fontSize: theme.fontSizes.medium,\n    fontWeight: '500',\n  },\n  calendarWeekDays: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: 8,\n  },\n  calendarWeekDay: {\n    width: 36,\n    textAlign: 'center',\n    fontSize: theme.fontSizes.small,\n    color: theme.colors.placeholder,\n  },\n  calendarWeek: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: 4,\n  },\n  calendarDay: {\n    width: 36,\n    height: 36,\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 18,\n  },\n  calendarDayText: {\n    fontSize: theme.fontSizes.medium,\n  },\n  selectedDay: {\n    backgroundColor: theme.colors.primary,\n  },\n  selectedDayText: {\n    color: theme.colors.surface,\n  },\n  timeSelector: {\n    flexDirection: 'row',\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    marginTop: 4,\n    padding: 12,\n    gap: 12,\n    elevation: 5,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n  },\n  timeSelectorColumn: {\n    flex: 1,\n    alignItems: 'center',\n  },\n  timeSelectorLabel: {\n    fontSize: theme.fontSizes.small,\n    color: theme.colors.placeholder,\n    marginBottom: 8,\n  },\n  timeSelectorScroll: {\n    height: 200,\n    width: '100%',\n  },\n  timeSelectorItem: {\n    padding: 12,\n    alignItems: 'center',\n    borderRadius: 4,\n    width: '100%',\n  },\n  timeSelectorText: {\n    fontSize: theme.fontSizes.medium,\n  },\n  selectedTime: {\n    backgroundColor: theme.colors.primary,\n  },\n  selectedTimeText: {\n    color: theme.colors.surface,\n  },\n  periodContainer: {\n    width: '100%',\n  },\n  disabledDay: {\n    opacity: 0.3,\n  },\n});\n\nexport default DateTimePicker; ","import React, { useState, useEffect, useContext, useRef, useCallback } from 'react';\nimport { View, Text, Modal, TextInput, TouchableOpacity, StyleSheet, ScrollView, Picker, ActivityIndicator, Platform, Animated, Alert } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport DateTimePicker from './DateTimePicker';\nimport { AuthContext } from '../context/AuthContext'\nimport { format, parse } from 'date-fns';\nimport { TIME_OPTIONS } from '../data/mockData';\nimport { validateDateTimeRange } from '../utils/dateTimeValidation';\nimport { Button } from 'react-native-paper';\nimport { API_BASE_URL } from '../config/config';\nimport ConfirmationModal from './ConfirmationModal';\nimport { getStorage } from '../context/AuthContext';\nimport { debounce } from 'lodash';\nimport { calculateOccurrenceCost } from '../data/calculations';\n\nconst ANIMAL_COUNT_OPTIONS = ['1', '2', '3', '4', '5'];\n\nconst WebScrollStyles = `\n  .modal-scroll-container {\n    max-height: 60vh;\n    overflow-y: scroll !important;\n    padding-right: 16px;\n    display: block;\n    position: relative;\n    scrollbar-width: auto;\n    scrollbar-color: rgba(0, 0, 0, 0.5) rgba(0, 0, 0, 0.1);\n  }\n\n  .modal-scroll-container::-webkit-scrollbar {\n    width: 10px;\n    background-color: #F5F5F5;\n    display: block;\n  }\n\n  .modal-scroll-container::-webkit-scrollbar-track {\n    border-radius: 10px;\n    background: rgba(0, 0, 0, 0.1);\n    border: 1px solid #ccc;\n  }\n\n  .modal-scroll-container::-webkit-scrollbar-thumb {\n    border-radius: 10px;\n    background: rgba(0, 0, 0, 0.5);\n    border: 1px solid #aaa;\n  }\n\n  .modal-scroll-container::-webkit-scrollbar-thumb:hover {\n    background: rgba(0, 0, 0, 0.7);\n  }\n`;\n\nconst ScrollableContent = ({ children }) => {\n  if (Platform.OS === 'web') {\n    return (\n      <>\n        <style>{WebScrollStyles}</style>\n        <div className=\"modal-scroll-container\">\n          {children}\n        </div>\n      </>\n    );\n  }\n  \n  return (\n    <ScrollView showsVerticalScrollIndicator={true} persistentScrollbar={true}>\n      {children}\n    </ScrollView>\n  );\n};\n\nconst AddOccurrenceModal = ({ \n  visible, \n  onClose, \n  onAdd, \n  defaultRates, \n  hideRates = false,\n  initialOccurrence = null,\n  isEditing = false,\n  modalTitle = 'Add New Occurrence',\n  isFromRequestBooking = false,\n  booking\n}) => {\n  const { is_DEBUG, screenWidth, timeSettings } = useContext(AuthContext);\n  const [showDeleteConfirmation, setShowDeleteConfirmation] = useState(false);\n  const [isAnyPickerActive, setIsAnyPickerActive] = useState(false);\n  const heightAnim = useRef(new Animated.Value(0)).current;\n  const [validationError, setValidationError] = useState(null);\n  const initialValues = useRef(null);\n  const [isCalculatingCost, setIsCalculatingCost] = useState(false);\n\n  const parseInitialDates = (initialOccurrence) => {\n    if (is_DEBUG) {\n      console.log('MBA1234 Parsing initial occurrence:', initialOccurrence);\n      console.log('MBA1234 Time settings:', timeSettings);\n    }\n\n    if (!initialOccurrence) {\n      const now = new Date();\n      const oneHourLater = new Date(now.getTime() + 60 * 60 * 1000);\n      return {\n        startDateTime: now,\n        endDateTime: oneHourLater,\n        isMilitary: timeSettings.use_military_time\n      };\n    }\n\n    try {\n      const { startDate, startTime, endDate, endTime } = initialOccurrence;\n      \n      // Use the user's time format preference from settings \n      const isMilitary = timeSettings.use_military_time;\n      \n      if (is_DEBUG) {\n        console.log('MBA1234 Time format detection:', {\n          startTime,\n          endTime,\n          isMilitary,\n          timeSettings\n        });\n      }\n\n      // Parse the date and time strings based on format\n      let startDateTime, endDateTime;\n      \n      if (isMilitary) {\n        startDateTime = parse(\n          `${startDate} ${startTime}`,\n          'yyyy-MM-dd HH:mm',\n          new Date()\n        );\n        endDateTime = parse(\n          `${endDate} ${endTime}`,\n          'yyyy-MM-dd HH:mm',\n          new Date()\n        );\n      } else {\n        startDateTime = parse(\n          `${startDate} ${startTime}`,\n          'yyyy-MM-dd hh:mm aa',\n          new Date()\n        );\n        endDateTime = parse(\n          `${endDate} ${endTime}`,\n          'yyyy-MM-dd hh:mm aa',\n          new Date()\n        );\n      }\n\n      if (is_DEBUG) {\n        console.log('MBA1234 Parsed dates:', {\n          startDateTime: startDateTime.toISOString(),\n          endDateTime: endDateTime.toISOString(),\n          isMilitary\n        });\n      }\n\n      return {\n        startDateTime,\n        endDateTime,\n        isMilitary\n      };\n    } catch (error) {\n      console.error('MBA1234 Error parsing dates:', error);\n      const now = new Date();\n      const oneHourLater = new Date(now.getTime() + 60 * 60 * 1000);\n      return {\n        startDateTime: now,\n        endDateTime: oneHourLater,\n        isMilitary: timeSettings.use_military_time\n      };\n    }\n  };\n\n  const initialDates = parseInitialDates(initialOccurrence);\n  \n  if (is_DEBUG) {\n    console.log('MBA565656 AddOccurrenceModal initializing with:', {\n      defaultRates,\n      initialOccurrence,\n      initialDates\n    });\n  }\n\n  const [occurrence, setOccurrence] = useState(() => {\n    const initialState = {\n      startDateTime: initialDates.startDateTime,\n      endDateTime: initialDates.endDateTime,\n      isMilitary: timeSettings.use_military_time,\n      rates: {\n        baseRate: '0',\n        additionalAnimalRate: '0',\n        appliesAfterAnimals: '1',\n        holidayRate: '0',\n        unit_of_time: 'Per Visit',\n        additionalRates: []\n      },\n      calculatedCost: '0'\n    };\n\n    // If we have an initial occurrence, use its rates\n    if (initialOccurrence?.rates) {\n      initialState.rates = initialOccurrence.rates;\n      initialState.calculatedCost = initialOccurrence.calculatedCost || '0';\n    }\n    // Otherwise if we have default rates, use those\n    else if (defaultRates) {\n      initialState.rates = {\n        baseRate: defaultRates.base_rate?.toString() || '0',\n        additionalAnimalRate: defaultRates.additional_animal_rate?.toString() || '0',\n        appliesAfterAnimals: defaultRates.applies_after?.toString() || '1',\n        holidayRate: defaultRates.holiday_rate?.toString() || '0',\n        unit_of_time: defaultRates.unit_of_time || 'Per Visit',\n        additionalRates: defaultRates.additional_rates?.map(rate => ({\n          name: rate.title,\n          description: rate.description || '',\n          amount: rate.amount\n        })) || []\n      };\n      initialState.calculatedCost = defaultRates.calculated_cost?.toString() || '0';\n    }\n\n    if (is_DEBUG) {\n      console.log('MBA565656 Initial state calculated:', initialState);\n    }\n\n    return initialState;\n  });\n\n  const [unit_of_time, setUnitOfTime] = useState(\n    initialOccurrence?.rates?.unit_of_time || \n    defaultRates?.unit_of_time || \n    'Per Visit'\n  );\n\n  // Clear validation error and set initial values when modal becomes visible\n  useEffect(() => {\n    if (visible) {\n      setValidationError(null);\n      // Store initial values when modal opens, including dates\n      initialValues.current = {\n        baseRate: occurrence.rates.baseRate,\n        additionalAnimalRate: occurrence.rates.additionalAnimalRate,\n        holidayRate: occurrence.rates.holidayRate,\n        unit_of_time: occurrence.rates.unit_of_time,\n        additionalRates: [...occurrence.rates.additionalRates],\n        startDateTime: new Date(occurrence.startDateTime),\n        endDateTime: new Date(occurrence.endDateTime)\n      };\n      if (is_DEBUG) {\n        console.log('MBA565656 Setting initial values:', initialValues.current);\n      }\n    }\n  }, [visible]); // Only depend on visible prop\n\n  const handlePickerStateChange = (isActive) => {\n    setIsAnyPickerActive(isActive);\n    if (is_DEBUG) {\n      console.log('MBA5678 Picker state changed:', {\n        isActive,\n        isFromRequestBooking,\n        currentModalHeight: isActive && isFromRequestBooking ? '65vh' : '80%'\n      });\n    }\n\n    // Animate to new height\n    Animated.timing(heightAnim, {\n      toValue: isActive && isFromRequestBooking ? 1 : 0,\n      duration: 300,\n      useNativeDriver: false,\n    }).start();\n  };\n\n  useEffect(() => {\n    if (is_DEBUG) {\n      console.log('MBA5678 Modal state:', {\n        isFromRequestBooking,\n        isAnyPickerActive,\n        visible\n      });\n    }\n  }, [isFromRequestBooking, isAnyPickerActive, visible]);\n\n  // Add effect to update rates when defaultRates changes\n  useEffect(() => {\n    if (!initialOccurrence && defaultRates) {\n      if (is_DEBUG) {\n        console.log('MBA565656 Updating rates from defaultRates:', {\n          defaultRates,\n          currentRates: occurrence.rates\n        });\n      }\n\n      const newRates = {\n        baseRate: defaultRates.base_rate?.toString() || '0',\n        additionalAnimalRate: defaultRates.additional_animal_rate?.toString() || '0',\n        appliesAfterAnimals: defaultRates.applies_after?.toString() || '1',\n        holidayRate: defaultRates.holiday_rate?.toString() || '0',\n        unit_of_time: defaultRates.unit_of_time || 'Per Visit',\n        additionalRates: defaultRates.additional_rates?.map(rate => ({\n          name: rate.title,\n          description: rate.description || '',\n          amount: rate.amount\n        })) || []\n      };\n\n      if (is_DEBUG) {\n        console.log('MBA565656 Setting new rates:', newRates);\n        console.log('MBA565656 Setting calculated cost:', defaultRates.calculated_cost);\n      }\n\n      setOccurrence(prev => {\n        const updated = {\n          ...prev,\n          rates: newRates,\n          calculatedCost: defaultRates.calculated_cost?.toString() || '0'\n        };\n        if (is_DEBUG) {\n          console.log('MBA565656 Updated occurrence state:', updated);\n        }\n        return updated;\n      });\n      \n      setUnitOfTime(defaultRates.unit_of_time || 'Per Visit');\n    }\n  }, [defaultRates, initialOccurrence]);\n\n  // Replace the debounced API call with frontend calculation\n  const debouncedCalculateCosts = useCallback(\n    debounce((occurrenceData) => {\n      if (!booking?.booking_id) return;\n\n      try {\n        setIsCalculatingCost(true);\n        \n        // Calculate cost using frontend function\n        const result = calculateOccurrenceCost(occurrenceData, booking.pets?.length || 0);\n\n        if (is_DEBUG) {\n          console.log('MBA565656 Cost calculation result:', result);\n        }\n\n        setOccurrence(prev => ({\n          ...prev,\n          calculatedCost: result.total_cost.toFixed(2)\n        }));\n      } catch (error) {\n        if (is_DEBUG) {\n          console.error('MBA565656 Error calculating costs:', error);\n        }\n      } finally {\n        setIsCalculatingCost(false);\n      }\n    }, 500),\n    [booking?.booking_id, booking?.pets?.length]\n  );\n\n  // Update the cost calculation effect\n  useEffect(() => {\n    // Only calculate costs if:\n    // 1. Modal is visible\n    // 2. We have initial values set\n    // 3. Have a valid booking ID\n    // 4. User has made actual changes to the form\n    if (visible && initialValues.current && booking?.booking_id) {\n      if (is_DEBUG) {\n        console.log('MBA565656 Checking for changes:', {\n          current: {\n            rates: occurrence.rates,\n            startDateTime: occurrence.startDateTime.toISOString(),\n            endDateTime: occurrence.endDateTime.toISOString()\n          },\n          initial: {\n            rates: initialValues.current,\n            startDateTime: initialValues.current.startDateTime.toISOString(),\n            endDateTime: initialValues.current.endDateTime.toISOString()\n          }\n        });\n      }\n\n      // Track if any changes were made that require recalculation\n      const timeDiffs = {\n        start: Math.abs(occurrence.startDateTime.getTime() - initialValues.current.startDateTime.getTime()),\n        end: Math.abs(occurrence.endDateTime.getTime() - initialValues.current.endDateTime.getTime())\n      };\n\n      const rateChanges = {\n        baseRate: occurrence.rates.baseRate !== initialValues.current.baseRate,\n        additionalAnimalRate: occurrence.rates.additionalAnimalRate !== initialValues.current.additionalAnimalRate,\n        holidayRate: occurrence.rates.holidayRate !== initialValues.current.holidayRate,\n        unit_of_time: occurrence.rates.unit_of_time !== initialValues.current.unit_of_time,\n        additionalRatesLength: occurrence.rates.additionalRates.length !== initialValues.current.additionalRates.length\n      };\n\n      const hasChanges = \n        rateChanges.baseRate ||\n        rateChanges.additionalAnimalRate ||\n        rateChanges.holidayRate ||\n        rateChanges.unit_of_time ||\n        rateChanges.additionalRatesLength ||\n        timeDiffs.start >= 1000 ||\n        timeDiffs.end >= 1000;\n\n      if (is_DEBUG) {\n        console.log('MBA565656 Change detection details:', {\n          timeDiffs,\n          rateChanges,\n          hasChanges\n        });\n      }\n\n      if (hasChanges) {\n        if (is_DEBUG) {\n          console.log('MBA565656 Changes detected, calculating costs:', {\n            current: {\n              rates: occurrence.rates,\n              startDateTime: occurrence.startDateTime.toISOString(),\n              endDateTime: occurrence.endDateTime.toISOString()\n            },\n            initial: {\n              rates: initialValues.current,\n              startDateTime: initialValues.current.startDateTime.toISOString(),\n              endDateTime: initialValues.current.endDateTime.toISOString()\n            },\n            timeDiffs,\n            rateChanges\n          });\n        }\n\n        const occurrenceData = {\n          start_date: format(occurrence.startDateTime, 'yyyy-MM-dd'),\n          end_date: format(occurrence.endDateTime, 'yyyy-MM-dd'),\n          start_time: format(occurrence.startDateTime, 'HH:mm'),\n          end_time: format(occurrence.endDateTime, 'HH:mm'),\n          rates: {\n            base_rate: occurrence.rates.baseRate,\n            additional_animal_rate: occurrence.rates.additionalAnimalRate,\n            applies_after: occurrence.rates.appliesAfterAnimals,\n            holiday_rate: occurrence.rates.holidayRate,\n            unit_of_time: occurrence.rates.unit_of_time,\n            additional_rates: occurrence.rates.additionalRates\n          }\n        };\n\n        if (is_DEBUG) {\n          console.log('MBA565656 Calling debouncedCalculateCosts with:', occurrenceData);\n        }\n\n        debouncedCalculateCosts(occurrenceData);\n      } else {\n        if (is_DEBUG) {\n          console.log('MBA565656 No changes detected, skipping calculation');\n        }\n      }\n    } else {\n      if (is_DEBUG) {\n        console.log('MBA565656 Skipping cost calculation:', {\n          visible,\n          hasInitialValues: !!initialValues.current,\n          hasBookingId: !!booking?.booking_id\n        });\n      }\n    }\n\n    // Cleanup function\n    return () => {\n      debouncedCalculateCosts.cancel();\n    };\n  }, [\n    visible,\n    occurrence.startDateTime,\n    occurrence.endDateTime,\n    occurrence.rates.baseRate,\n    occurrence.rates.additionalAnimalRate,\n    occurrence.rates.appliesAfterAnimals,\n    occurrence.rates.holidayRate,\n    occurrence.rates.unit_of_time,\n    occurrence.rates.additionalRates,\n    debouncedCalculateCosts,\n    booking?.booking_id\n  ]);\n\n  // Add effect to update unit_of_time when rates change\n  useEffect(() => {\n    if (is_DEBUG) {\n      console.log('MBA565656 Rates changed:', occurrence.rates);\n    }\n    setUnitOfTime(occurrence.rates.unit_of_time);\n  }, [occurrence.rates]);\n\n  // Add effect to log when modal becomes visible\n  useEffect(() => {\n    if (visible) {\n      if (is_DEBUG) {\n        console.log('MBA565656 Modal became visible:', {\n          defaultRates,\n          initialOccurrence,\n          currentRates: occurrence.rates\n        });\n      }\n    }\n  }, [visible]);\n\n  // Add effect to update military time preference when timeSettings changes\n  useEffect(() => {\n    if (is_DEBUG) {\n      console.log('MBA4321 Time settings changed:', timeSettings);\n    }\n    setOccurrence(prev => ({\n      ...prev,\n      isMilitary: timeSettings.use_military_time\n    }));\n  }, [timeSettings]);\n\n  // Add effect to update dates when initialOccurrence changes\n  useEffect(() => {\n    if (initialOccurrence) {\n      if (is_DEBUG) {\n        console.log('MBA4321 Initial occurrence rates:', initialOccurrence.rates);\n        console.log('MBA4321 Initial unit_of_time:', initialOccurrence.rates?.unit_of_time);\n      }\n      const dates = parseInitialDates(initialOccurrence);\n      // Use unit_of_time directly from the rates object without any transformation\n      const unit_of_time = initialOccurrence.rates?.unit_of_time;\n      if (is_DEBUG) {\n        console.log('MBA4321 Setting unit_of_time to:', unit_of_time);\n      }\n      setOccurrence(prev => ({\n        ...prev,\n        startDateTime: dates.startDateTime,\n        endDateTime: dates.endDateTime,\n        isMilitary: dates.isMilitary,\n        rates: {\n          ...initialOccurrence.rates,\n          unit_of_time: unit_of_time\n        }\n      }));\n      setUnitOfTime(unit_of_time);\n    }\n  }, [initialOccurrence]);\n\n  const handleStartDateTimeChange = (date) => {\n    if (is_DEBUG) {\n      console.log('MBA1234 Start datetime changed:', {\n        newDate: date?.toISOString(),\n        currentInitialValues: initialValues.current,\n        currentOccurrence: {\n          startDateTime: occurrence.startDateTime.toISOString(),\n          endDateTime: occurrence.endDateTime.toISOString()\n        }\n      });\n    }\n    if (date && !isNaN(date.getTime())) {\n      setOccurrence(prev => {\n        const updated = {\n          ...prev,\n          startDateTime: date\n        };\n        if (is_DEBUG) {\n          console.log('MBA1234 Updated occurrence:', {\n            startDateTime: updated.startDateTime.toISOString(),\n            endDateTime: updated.endDateTime.toISOString()\n          });\n        }\n        return updated;\n      });\n    }\n  };\n\n  const handleEndDateTimeChange = (date) => {\n    if (is_DEBUG) {\n      console.log('MBA1234 End datetime changed:', {\n        newDate: date?.toISOString(),\n        currentInitialValues: initialValues.current,\n        currentOccurrence: {\n          startDateTime: occurrence.startDateTime.toISOString(),\n          endDateTime: occurrence.endDateTime.toISOString()\n        }\n      });\n    }\n    if (date && !isNaN(date.getTime())) {\n      setOccurrence(prev => {\n        const updated = {\n          ...prev,\n          endDateTime: date\n        };\n        if (is_DEBUG) {\n          console.log('MBA1234 Updated occurrence:', {\n            startDateTime: updated.startDateTime.toISOString(),\n            endDateTime: updated.endDateTime.toISOString()\n          });\n        }\n        return updated;\n      });\n    }\n  };\n\n  const handleAdd = async () => {\n    try {\n      // Format dates in UTC for backend\n      const startDate = format(occurrence.startDateTime, 'yyyy-MM-dd');\n      const startTime = format(occurrence.startDateTime, 'HH:mm');\n      const endDate = format(occurrence.endDateTime, 'yyyy-MM-dd');\n      const endTime = format(occurrence.endDateTime, 'HH:mm');\n\n      if (is_DEBUG) {\n        console.log('MBA1234 Adding occurrence:', {\n          startDate,\n          startTime,\n          endDate,\n          endTime,\n          startDateTime: occurrence.startDateTime.toISOString(),\n          endDateTime: occurrence.endDateTime.toISOString()\n        });\n      }\n\n      const response = await onAdd({\n        startDate,\n        startTime,\n        endDate,\n        endTime,\n        rates: occurrence.rates\n      });\n\n      if (is_DEBUG) {\n        console.log('MBA1234 Response from onAdd:', response);\n      }\n\n      if (response?.status === 'success') {\n        if (is_DEBUG) {\n          console.log('MBA1234 Successfully added/updated occurrence');\n        }\n        resetForm();\n        onClose();\n        // Show success message using Alert\n        Alert.alert('Success', response.message);\n      } else {\n        // Show error message but don't close modal\n        setValidationError(response?.message || 'Failed to add event');\n      }\n    } catch (error) {\n      if (is_DEBUG) {\n        console.error('MBA1234 Error adding occurrence:', error);\n      }\n      setValidationError(error.message || 'An unexpected error occurred');\n    }\n  };\n\n  const [showAddRate, setShowAddRate] = useState(false);\n  const [newRate, setNewRate] = useState({ name: '', amount: '' });\n  \n  useEffect(() => {\n    if (is_DEBUG) {\n      console.log('MBA1234 Initial occurrence:', initialOccurrence);\n      console.log('MBA1234 Unit of time set to:', unit_of_time);\n    }\n  }, [unit_of_time, initialOccurrence]);\n\n  // Update occurrence when unit_of_time changes\n  useEffect(() => {\n    if (is_DEBUG) {\n      console.log('MBA4321 Unit of time changed:', {\n        newUnitOfTime: unit_of_time,\n        occurrenceRatesUnitOfTime: occurrence.rates.unit_of_time\n      });\n    }\n    setOccurrence(prev => ({\n      ...prev,\n      rates: {\n        ...prev.rates,\n        unit_of_time: unit_of_time\n      }\n    }));\n  }, [unit_of_time]);\n\n  const handleDeleteRate = (index) => {\n    setOccurrence(prev => ({\n      ...prev,\n      rates: {\n        ...prev.rates,\n        additionalRates: prev.rates.additionalRates.filter((_, i) => i !== index)\n      }\n    }));\n  };\n\n  const handleClose = () => {\n    resetForm();\n    onClose();\n  };\n\n  const handleSubmit = () => {\n    // Validate the date/time range\n    const validation = validateDateTimeRange(\n      format(occurrence.startDateTime, 'yyyy-MM-dd'),\n      format(occurrence.endDateTime, 'yyyy-MM-dd'),\n      format(occurrence.startDateTime, 'HH:mm'),\n      format(occurrence.endDateTime, 'HH:mm')\n    );\n\n    if (!validation.isValid) {\n      setValidationError(validation.error);\n      return;\n    }\n\n    setValidationError(null);\n    handleAdd();\n  };\n\n  const resetForm = () => {\n    setOccurrence({\n      startDateTime: new Date(),\n      endDateTime: new Date(new Date().setHours(new Date().getHours() + 1)),\n      isMilitary: timeSettings.use_military_time,\n      rates: {\n        baseRate: defaultRates?.base_rate?.toString() || '0',\n        additionalAnimalRate: defaultRates?.additional_animal_rate?.toString() || '0',\n        appliesAfterAnimals: defaultRates?.applies_after?.toString() || '1',\n        holidayRate: defaultRates?.holiday_rate?.toString() || '0',\n        unit_of_time: defaultRates?.unit_of_time || 'Per Visit',\n        additionalRates: defaultRates?.additional_rates?.map(rate => ({\n          name: rate.title,\n          description: rate.description || '',\n          amount: rate.amount\n        })) || []\n      },\n      calculatedCost: '0'\n    });\n    setUnitOfTime(defaultRates?.unit_of_time || 'Per Visit');\n    setShowAddRate(false);\n    setNewRate({ name: '', amount: '' });\n  };\n\n  const renderPickerItems = (options) => {\n    return options.map((option) => (\n      <Picker.Item \n        key={option} \n        label={option} \n        value={option}\n        style={styles.pickerItem}\n      />\n    ));\n  };\n\n  const handleDeleteClick = () => {\n    setShowDeleteConfirmation(true);\n  };\n\n  const handleDeleteConfirm = () => {\n    setShowDeleteConfirmation(false);\n    handleClose();\n  };\n\n  return (\n    <>\n      <Modal\n        visible={visible}\n        onRequestClose={handleClose}\n        animationType=\"slide\"\n        transparent={true}\n      >\n        <View style={styles.modalContainer}>\n          <Animated.View style={[\n            styles.modalContent,\n            isFromRequestBooking ? {\n              maxHeight: undefined,\n              height: heightAnim.interpolate({\n                inputRange: [0, 1],\n                outputRange: ['325px', '650px']\n              }),\n              transform: [{\n                translateY: heightAnim.interpolate({\n                  inputRange: [0, 1],\n                  outputRange: [0, -40]\n                })\n              }]\n            } : {\n              maxHeight: '80%'\n            }\n          ]}>\n            <View style={styles.modalHeader}>\n              <Text style={styles.modalTitle}>{modalTitle}</Text>\n              <TouchableOpacity onPress={handleClose}>\n                <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.text} />\n              </TouchableOpacity>\n            </View>\n\n            <ScrollView \n              style={styles.scrollView}\n              contentContainerStyle={[\n                styles.scrollViewContent,\n                isFromRequestBooking && isAnyPickerActive && { paddingBottom: 300 }\n              ]}\n            >\n              <View style={[styles.section, { zIndex: 10 }]}>\n                <Text style={styles.label}>Start Date & Time</Text>\n                <DateTimePicker\n                  value={occurrence.startDateTime}\n                  onChange={handleStartDateTimeChange}\n                  error={validationError?.startDateTime}\n                  isMilitary={occurrence.isMilitary}\n                  onPickerStateChange={handlePickerStateChange}\n                />\n              </View>\n\n              <View style={[styles.section, { zIndex: 9 }]}>\n                <Text style={styles.label}>End Date & Time</Text>\n                <DateTimePicker\n                  value={occurrence.endDateTime}\n                  onChange={handleEndDateTimeChange}\n                  error={validationError?.endDateTime}\n                  isMilitary={occurrence.isMilitary}\n                  onPickerStateChange={handlePickerStateChange}\n                />\n              </View>\n\n              {!hideRates && (\n                <>\n                  <View style={[styles.section, { zIndex: 8 }]}>\n                    <Text style={styles.label}>Base Rate</Text>\n                    <View style={styles.rateContainer}>\n                      <View style={styles.baseRateInput}>\n                        <TextInput\n                          style={styles.input}\n                          value={occurrence.rates.baseRate.toString()}\n                          onChangeText={(text) => setOccurrence(prev => ({\n                            ...prev,\n                            rates: {\n                              ...prev.rates,\n                              baseRate: text.replace(/[^0-9.]/g, '')\n                            }\n                          }))}\n                          keyboardType=\"decimal-pad\"\n                          placeholder=\"0.00\"\n                        />\n                      </View>\n                      <View style={styles.timeUnitInput}>\n                        <Text style={styles.label}>Per</Text>\n                        <Picker\n                          selectedValue={unit_of_time}\n                          onValueChange={(itemValue) => {\n                            if (is_DEBUG) {\n                              console.log('MBA4321 Picker value changed to:', itemValue);\n                            }\n                            setUnitOfTime(itemValue);\n                            setOccurrence(prev => ({\n                              ...prev,\n                              rates: {\n                                ...prev.rates,\n                                unit_of_time: itemValue\n                              }\n                            }));\n                          }}\n                          style={styles.picker}\n                        >\n                          {renderPickerItems(TIME_OPTIONS)}\n                        </Picker>\n                      </View>\n                    </View>\n                  </View>\n\n                  <View style={[styles.section, { zIndex: 7 }]}>\n                    <Text style={styles.label}>\n                      {screenWidth < 375 \n                        ? `+${occurrence.rates.appliesAfterAnimals} Pet Rate`\n                        : 'Additional Pet Rate'\n                      }\n                    </Text>\n                    <View style={styles.rateContainer}>\n                      <View style={styles.baseRateInput}>\n                        <TextInput\n                          style={styles.input}\n                          value={occurrence.rates.additionalAnimalRate.toString()}\n                          onChangeText={(text) => setOccurrence(prev => ({\n                            ...prev,\n                            rates: {\n                              ...prev.rates,\n                              additionalAnimalRate: text.replace(/[^0-9.]/g, '')\n                            }\n                          }))}\n                          keyboardType=\"decimal-pad\"\n                          placeholder=\"0.00\"\n                        />\n                      </View>\n                      <View style={styles.timeUnitInput}>\n                        <Text style={styles.label}>Applies After</Text>\n                        <Picker\n                          selectedValue={occurrence.rates.appliesAfterAnimals}\n                          onValueChange={(itemValue) => setOccurrence(prev => ({\n                            ...prev,\n                            rates: {\n                              ...prev.rates,\n                              appliesAfterAnimals: itemValue\n                            }\n                          }))}\n                          style={styles.picker}\n                        >\n                          {ANIMAL_COUNT_OPTIONS.map((option) => (\n                            <Picker.Item key={option} label={`${option} animal${option === '1' ? '' : 's'}`} value={option} />\n                          ))}\n                        </Picker>\n                      </View>\n                    </View>\n                  </View>\n\n                  <View style={[styles.section, { zIndex: 6 }]}>\n                    <Text style={styles.label}>Holiday Rate</Text>\n                    <View style={styles.rateContainer}>\n                      <View style={styles.baseRateInput}>\n                        <TextInput\n                          style={styles.input}\n                          value={occurrence.rates.holidayRate.toString()}\n                          onChangeText={(text) => setOccurrence(prev => ({\n                            ...prev,\n                            rates: {\n                              ...prev.rates,\n                              holidayRate: text.replace(/[^0-9.]/g, '')\n                            }\n                          }))}\n                          keyboardType=\"decimal-pad\"\n                          placeholder=\"0.00\"\n                        />\n                      </View>\n                    </View>\n                  </View>\n\n                  <View style={[styles.section, { zIndex: 5 }]}>\n                    <Text style={styles.label}>Additional Rates</Text>\n                    {occurrence.rates.additionalRates.map((rate, index) => (\n                      <View key={index} style={[styles.rateRow, {marginBottom: 10}]}>\n                        <TextInput\n                          style={[styles.input, styles.rateInput]}\n                          value={rate.name}\n                          editable={false}\n                        />\n                        <View style={[styles.rateAmountContainer]}>\n                          <TextInput\n                            style={[styles.input, styles.rateAmountInput]}\n                            value={rate.amount.toString()}\n                            editable={false}\n                          />\n                        </View>\n                        <TouchableOpacity onPress={() => handleDeleteRate(index)}>\n                          <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.error} />\n                        </TouchableOpacity>\n                      </View>\n                    ))}\n\n                    {showAddRate ? (\n                      <>\n                        <View style={styles.rateLabelContainer}>\n                          <Text style={styles.rateTitleLabel}>Rate Title</Text>\n                          <Text style={styles.rateAmountLabel}>Rate Amount</Text>\n                        </View>\n                        <View style={styles.rateRow}>\n                          <TextInput\n                            style={[styles.input, styles.rateInput]}\n                            value={newRate.name}\n                            onChangeText={(text) => setNewRate(prev => ({ ...prev, name: text }))}\n                            placeholder=\"Rate Title\"\n                          />\n                          <View style={[styles.rateAmountContainer]}>\n                            <TextInput\n                              style={[styles.input, styles.rateAmountInput]}\n                              value={newRate.amount}\n                              onChangeText={(text) => setNewRate(prev => ({ \n                                ...prev, \n                                amount: text.replace(/[^0-9.]/g, '') \n                              }))}\n                              keyboardType=\"decimal-pad\"\n                              placeholder=\"0.00\"\n                            />\n                          </View>\n                          <TouchableOpacity onPress={() => handleAddRate()}>\n                            <MaterialCommunityIcons name=\"plus\" size={24} color={theme.colors.primary} />\n                          </TouchableOpacity>\n                        </View>\n                      </>\n                    ) : (\n                      <TouchableOpacity \n                        style={styles.addRateButton}\n                        onPress={() => setShowAddRate(true)}\n                      >\n                        <Text style={styles.addRateButtonText}>Add custom rate</Text>\n                      </TouchableOpacity>\n                    )}\n                  </View>\n                \n\n                  <View style={styles.totalSection}>\n                    <Text style={styles.totalLabel}>Total:</Text>\n                    {isCalculatingCost ? (\n                      <View style={styles.loadingContainer}>\n                        <ActivityIndicator size=\"small\" color={theme.colors.primary} />\n                      </View>\n                    ) : (\n                      <Text style={styles.totalAmount}>${parseFloat(occurrence.calculatedCost).toFixed(2)}</Text>\n                    )}\n                  </View>\n\n                </>\n              )}\n            </ScrollView>\n\n            <View style={styles.buttonContainer}>\n              <Button \n                mode=\"outlined\" \n                onPress={handleDeleteClick}\n                style={[styles.button, { borderColor: theme.colors.error }]}\n                textColor={theme.colors.error}\n              >\n                Delete\n              </Button>\n              <Button \n                mode=\"contained\" \n                onPress={handleSubmit}\n                style={styles.button}\n              >\n                {isEditing ? 'Save Changes' : 'Add'}\n              </Button>\n            </View>\n            {validationError && (\n              <Text style={styles.errorMessage}>{validationError}</Text>\n            )}\n          </Animated.View>\n        </View>\n      </Modal>\n\n      <ConfirmationModal\n        visible={showDeleteConfirmation}\n        onClose={() => setShowDeleteConfirmation(false)}\n        onConfirm={handleDeleteConfirm}\n        actionText=\"delete this occurrence\"\n      />\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  modalContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n  },\n  modalContent: {\n    backgroundColor: theme.colors.background,\n    borderRadius: 8,\n    padding: 20,\n    width: '95%',\n    maxWidth: 500,\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 20,\n  },\n  modalTitle: {\n    fontSize: theme.fontSizes.largeLarge,\n    fontWeight: 'bold',\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  section: {\n    position: 'relative',\n    marginBottom: 16,\n  },\n  label: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    marginBottom: 2,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  inputContainer: {\n    position: 'relative',\n    zIndex: 200, // Higher than modal content\n    marginBottom: 16,\n  },\n  dollarSign: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    marginRight: 4,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  input: {\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 8,\n    padding: 8,\n    backgroundColor: theme.colors.background,\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    gap: 10,\n    marginTop: 16,\n  },\n  button: {\n    flex: 1,\n    paddingVertical: 6,\n  },\n  rateSection: {\n    // marginBottom: 10,\n  },\n  rateContainer: {\n    flexDirection: 'row',\n    alignItems: 'flex-end',\n    justifyContent: 'space-between',\n    gap: 12,\n  },\n  baseRateInput: {\n    flex: 1,\n  },\n  timeUnitInput: {\n    flex: 1,\n    marginTop: -32,\n  },\n  picker: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    height: 39,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  totalSection: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginTop: 20,\n    paddingTop: 20,\n    borderTopWidth: 1,\n    borderTopColor: theme.colors.border,\n  },\n  totalLabel: {\n    fontSize: theme.fontSizes.medium,\n    fontWeight: 'bold',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  totalAmount: {\n    fontSize: theme.fontSizes.mediumLarge,\n    fontWeight: 'bold',\n    color: theme.colors.primary,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  errorText: {\n    color: theme.colors.error,\n    fontSize: theme.fontSizes.small,\n    marginTop: 8,\n    marginBottom: 8,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  rateRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 10,\n    marginBottom: 10,\n    width: '100%',\n    flexWrap: 'nowrap',\n  },\n  rateInput: {\n    flex: 2,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 8,\n    height: 39,\n    padding: 12,\n    fontFamily: theme.fonts.regular.fontFamily,\n    minWidth: 0,\n  },\n  rateAmountContainer: {\n    flex: 1,\n    minWidth: 0,\n  },\n  rateAmountInput: {\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 8,\n    height: 39,\n    padding: 12,\n    fontFamily: theme.fonts.regular.fontFamily,\n    width: '100%',\n  },\n  addRateButton: {\n    padding: 10,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  addRateButtonText: {\n    color: theme.colors.primary,\n    fontSize: theme.fontSizes.medium,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  rateLabelContainer: {\n    flexDirection: 'row',\n    marginTop: 10,\n    marginBottom: 5,\n  },\n  rateTitleLabel: {\n    flex: 2,\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  rateAmountLabel: {\n    flex: 1,\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    marginLeft: 10,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  scrollView: {\n    flex: 1,\n  },\n  scrollViewContent: {\n    flexGrow: 1,\n  },\n  errorMessage: {\n    color: theme.colors.error,\n    fontSize: 14,\n    textAlign: 'center',\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginTop: 8,\n  },\n  loadingContainer: {\n    minWidth: 80,\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n});\n\nexport default AddOccurrenceModal;","import React, { useState, useEffect, useContext } from 'react';\nimport { View, StyleSheet, Modal, ScrollView, TouchableOpacity, ActivityIndicator } from 'react-native';\nimport { Button, Text, TextInput } from 'react-native-paper';\nimport { theme } from '../styles/theme';\nimport DatePicker from './DatePicker';\nimport TimePicker from './TimePicker';\nimport AddOccurrenceModal from './AddOccurrenceModal';\nimport { format } from 'date-fns';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { SERVICE_TYPE_SUGGESTIONS, mockPets } from '../data/mockData';\nimport ConfirmationModal from './ConfirmationModal';\nimport { validateDateTimeRange } from '../utils/dateTimeValidation';\nimport axios from 'axios';\nimport { API_BASE_URL } from '../config/config';\nimport { getStorage, AuthContext } from '../context/AuthContext';\n\nconst RequestBookingModal = ({ visible, onClose, onSubmit, conversationId }) => {\n  const [selectedService, setSelectedService] = useState('');\n  const { is_DEBUG } = useContext(AuthContext);\n  const [selectedPets, setSelectedPets] = useState([]);\n  const [showServiceDropdown, setShowServiceDropdown] = useState(false);\n  const [showPetDropdown, setShowPetDropdown] = useState(false);\n  const [showAddOccurrenceModal, setShowAddOccurrenceModal] = useState(false);\n  const [occurrences, setOccurrences] = useState([]);\n  const [selectedOccurrence, setSelectedOccurrence] = useState(null);\n  const [confirmationModal, setConfirmationModal] = useState({\n    visible: false,\n    actionText: '',\n    onConfirm: null,\n    isLoading: false\n  });\n  const [occurrenceErrors, setOccurrenceErrors] = useState({});\n  const [services, setServices] = useState([]);\n  const [pets, setPets] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    if (visible && conversationId) {\n      fetchPreRequestData();\n    } else if (!visible) {\n      // Reset states when modal is closed\n      setIsLoading(false);\n      setError(null);\n    }\n  }, [visible, conversationId]);\n\n  const fetchPreRequestData = async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n      if (is_DEBUG) {\n        console.log('Fetching prerequest data for conversation:', conversationId);\n      }\n      \n      const token = await getStorage('userToken');\n      const response = await axios.get(\n        `${API_BASE_URL}/api/messages/v1/prerequest_booking/${conversationId}/`,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        }\n      );\n      \n      if (is_DEBUG) {\n        console.log('Prerequest data response:', response.data);\n      }\n      \n      setServices(response.data.services);\n      setPets(response.data.pets);\n      if (is_DEBUG) {\n        console.log('Updated services:', response.data.services);\n        console.log('Updated pets:', response.data.pets);\n      }\n    } catch (err) {\n      if (is_DEBUG) {\n        console.error('Error fetching pre-request data:', err.response || err);\n      }\n      setError('Failed to load booking data. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const resetForm = () => {\n    setSelectedService('');\n    setSelectedPets([]);\n    setOccurrences([]);\n    setSelectedOccurrence(null);\n    setIsLoading(false);\n    setError(null);\n  };\n\n  const validateOccurrences = (occs) => {\n    const errors = {};\n    let isValid = true;\n\n    occs.forEach((occ, index) => {\n      const validation = validateDateTimeRange(\n        occ.startDate,\n        occ.endDate,\n        occ.startTime,\n        occ.endTime\n      );\n\n      if (!validation.isValid) {\n        errors[index] = validation.error;\n        isValid = false;\n      }\n    });\n\n    setOccurrenceErrors(errors);\n    return isValid;\n  };\n\n  const handleSubmit = () => {\n    if (occurrences.length === 0) return;\n\n    // Validate all occurrences before submitting\n    if (!validateOccurrences(occurrences)) {\n      return;\n    }\n\n    // Get the selected service object\n    const selectedServiceObj = services.find(s => s.service_name === selectedService);\n    if (!selectedServiceObj) {\n      setError('Please select a valid service');\n      return;\n    }\n\n    const bookingData = {\n      conversation_id: conversationId,\n      service_type: selectedServiceObj.service_id,\n      pets: selectedPets,\n      occurrences: occurrences.map(occ => ({\n        start_date: occ.startDate,\n        end_date: occ.endDate || occ.startDate,\n        start_time: occ.startTime,\n        end_time: occ.endTime\n      }))\n    };\n\n    if (is_DEBUG) {\n      console.log('Sending booking data:', JSON.stringify(bookingData, null, 2));\n    }\n\n    setIsLoading(true);\n    setError(null);\n    \n    onSubmit(bookingData)\n      .then(() => {\n        resetForm();\n        onClose();\n      })\n      .catch(err => {\n        const errorMessage = err.response?.data?.error || 'Failed to create booking request';\n        setError(errorMessage);\n      })\n      .finally(() => {\n        setIsLoading(false);\n      });\n  };\n\n  const handleDeleteOccurrence = async (occurrenceToDelete) => {\n    setConfirmationModal(prev => ({ ...prev, isLoading: true }));\n    \n    try {\n      setOccurrences(prev => prev.filter(occ => \n        occ.startDate !== occurrenceToDelete.startDate || \n        occ.startTime !== occurrenceToDelete.startTime\n      ));\n    } finally {\n      setConfirmationModal({ \n        visible: false, \n        actionText: '', \n        onConfirm: null, \n        isLoading: false \n      });\n    }\n  };\n\n  const confirmDeleteOccurrence = (occurrence) => {\n    setConfirmationModal({\n      visible: true,\n      actionText: 'delete this occurrence',\n      onConfirm: () => handleDeleteOccurrence(occurrence),\n      isLoading: false\n    });\n  };\n\n  const handleClose = () => {\n    resetForm();\n    onClose();\n  };\n\n  const handleOpenOccurrenceModal = () => {\n    setShowServiceDropdown(false);\n    setShowPetDropdown(false);\n    setShowAddOccurrenceModal(true);\n  };\n\n  const handleOccurrenceUpdate = (newOccurrence) => {\n    const { startDate, endDate, startTime, endTime } = newOccurrence;\n    \n    // Validate the new occurrence\n    const validation = validateDateTimeRange(startDate, endDate, startTime, endTime);\n    \n    if (!validation.isValid) {\n      // Show error in the AddOccurrenceModal\n      // You'll need to add error handling in the AddOccurrenceModal component\n      return false;\n    }\n\n    if (selectedOccurrence) {\n      setOccurrences(prev => prev.map(occ => \n        occ === selectedOccurrence ? \n        { startDate, endDate, startTime, endTime } : \n        occ\n      ));\n    } else {\n      setOccurrences(prev => [...prev, { startDate, endDate, startTime, endTime }]);\n    }\n    setSelectedOccurrence(null);\n    setShowAddOccurrenceModal(false);\n    return true;\n  };\n\n  const renderServiceDropdown = () => (\n    <View style={styles.dropdownContainer}>\n      <TouchableOpacity\n        style={styles.dropdownInput}\n        onPress={() => setShowServiceDropdown(!showServiceDropdown)}\n      >\n        <Text>{selectedService || 'Select Service Type'}</Text>\n        <MaterialCommunityIcons \n          name={showServiceDropdown ? \"chevron-up\" : \"chevron-down\"} \n          size={24} \n          color={theme.colors.text} \n        />\n      </TouchableOpacity>\n\n      {showServiceDropdown && (\n        <View style={styles.dropdownList}>\n          <ScrollView nestedScrollEnabled={true}>\n            {services.map((service) => (\n              <TouchableOpacity\n                key={service.service_id}\n                style={styles.dropdownItem}\n                onPress={() => {\n                  setSelectedService(service.service_name);\n                  setShowServiceDropdown(false);\n                }}\n              >\n                <Text style={[\n                  styles.dropdownText,\n                  selectedService === service.service_name && styles.selectedOption\n                ]}>\n                  {service.service_name}\n                </Text>\n              </TouchableOpacity>\n            ))}\n          </ScrollView>\n        </View>\n      )}\n    </View>\n  );\n\n  const renderPetSelector = () => (\n    <View style={{ zIndex: 2 }}>\n      {selectedPets.map((petId) => {\n        const pet = pets.find(p => p.pet_id === petId);\n        return (\n          <View key={petId} style={styles.petItem}>\n            <View style={styles.petInfo}>\n              <Text style={styles.petName}>{pet.name}</Text>\n              <Text style={styles.petDetails}>{pet.pet_type} • {pet.breed}</Text>\n            </View>\n            <TouchableOpacity\n              onPress={() => setSelectedPets(prev => prev.filter(id => id !== petId))}\n            >\n              <MaterialCommunityIcons \n                name=\"close\" \n                size={24} \n                color={theme.colors.error} \n              />\n            </TouchableOpacity>\n          </View>\n        );\n      })}\n      \n      <TouchableOpacity\n        style={styles.addPetButton}\n        onPress={() => setShowPetDropdown(!showPetDropdown)}\n      >\n        <MaterialCommunityIcons \n          name={showPetDropdown ? \"chevron-up\" : \"chevron-down\"} \n          size={20} \n          color={theme.colors.primary} \n        />\n        <Text style={styles.addPetText}>\n          {selectedPets.length === 0 ? 'Select Pets' : 'Add Pet'}\n        </Text>\n      </TouchableOpacity>\n      \n      {showPetDropdown && (\n        <View style={styles.dropdownList}>\n          <ScrollView nestedScrollEnabled={true} style={styles.petDropdown}>\n            {pets\n              .filter(pet => !selectedPets.includes(pet.pet_id))\n              .map((pet) => (\n                <TouchableOpacity\n                  key={pet.pet_id}\n                  style={styles.dropdownItem}\n                  onPress={() => {\n                    setSelectedPets(prev => [...prev, pet.pet_id]);\n                    setShowPetDropdown(false);\n                  }}\n                >\n                  <View>\n                    <Text style={styles.dropdownPetName}>{pet.name}</Text>\n                    <Text style={styles.dropdownPetDetails}>\n                      {pet.pet_type} • {pet.breed}\n                    </Text>\n                  </View>\n                </TouchableOpacity>\n              ))}\n          </ScrollView>\n        </View>\n      )}\n    </View>\n  );\n\n  const renderOccurrenceCard = (occ, index) => (\n    <View key={index}>\n      <TouchableOpacity \n        style={[\n          styles.occurrenceCard,\n          occurrenceErrors[index] && styles.occurrenceCardError\n        ]}\n      >\n        <View style={styles.occurrenceDetails}>\n          <Text style={styles.dateText}>\n            {occ.endDate && occ.startDate !== occ.endDate ? \n              `${occ.startDate} - ${occ.endDate}` :\n              occ.startDate\n            }\n          </Text>\n          <Text style={styles.timeText}>\n            {`${occ.startTime} - ${occ.endTime}`}\n          </Text>\n          {occurrenceErrors[index] && (\n            <Text style={styles.errorText}>{occurrenceErrors[index]}</Text>\n          )}\n        </View>\n        <View style={styles.occurrenceActions}>\n          <TouchableOpacity \n            style={styles.actionButton}\n            onPress={() => confirmDeleteOccurrence(occ)}\n          >\n            <MaterialCommunityIcons name=\"trash-can-outline\" size={20} color={theme.colors.error} />\n          </TouchableOpacity>\n          <TouchableOpacity \n            style={styles.actionButton}\n            onPress={() => {\n              setSelectedOccurrence(occ);\n              handleOpenOccurrenceModal();\n            }}\n          >\n            <MaterialCommunityIcons name=\"pencil\" size={20} color={theme.colors.primary} />\n          </TouchableOpacity>\n        </View>\n      </TouchableOpacity>\n    </View>\n  );\n\n  return (\n    <Modal\n      visible={visible}\n      onRequestClose={handleClose}\n      animationType=\"slide\"\n      transparent={true}\n    >\n      <View style={styles.modalContainer}>\n        <View style={styles.modalContent}>\n          <Text style={styles.modalTitle}>Request Booking</Text>\n          \n          {isLoading ? (\n            <View style={styles.loadingContainer}>\n              <ActivityIndicator size=\"large\" color={theme.colors.primary} />\n              <Text>Loading booking data...</Text>\n            </View>\n          ) : error ? (\n            <View style={styles.errorContainer}>\n              <Text style={styles.errorText}>{error}</Text>\n              <Button mode=\"contained\" onPress={fetchPreRequestData}>\n                Retry\n              </Button>\n            </View>\n          ) : (\n            <ScrollView style={styles.scrollView}>\n              {/* Service Selection */}\n              <Text style={styles.label}>Select Service</Text>\n              {renderServiceDropdown()}\n\n              {/* Pet Selection */}\n              <Text style={styles.label}>Select Pets</Text>\n              {renderPetSelector()}\n\n              {/* Date & Time Selection */}\n              <Text style={styles.label}>Select Date & Time</Text>\n              {occurrences.map((occ, index) => renderOccurrenceCard(occ, index))}\n\n              <TouchableOpacity\n                style={styles.addOccurrenceButton}\n                onPress={() => {\n                  setSelectedOccurrence(null);\n                  handleOpenOccurrenceModal();\n                }}\n              >\n                <MaterialCommunityIcons name=\"plus\" size={24} color={theme.colors.primary} />\n                <Text style={styles.addOccurrenceText}>Add Date & Time</Text>\n              </TouchableOpacity>\n            </ScrollView>\n          )}\n\n          <View style={styles.buttonContainer}>\n            <Button mode=\"outlined\" onPress={handleClose} style={styles.button}>\n              Cancel\n            </Button>\n            <Button \n              mode=\"contained\" \n              onPress={handleSubmit}\n              style={styles.button}\n              disabled={!selectedService || selectedPets.length === 0 || occurrences.length === 0 || isLoading}\n            >\n              Submit\n            </Button>\n          </View>\n        </View>\n      </View>\n\n      <AddOccurrenceModal\n        visible={showAddOccurrenceModal}\n        onClose={() => setShowAddOccurrenceModal(false)}\n        onAdd={handleOccurrenceUpdate}\n        hideRates={true}\n        initialOccurrence={selectedOccurrence}\n        modalTitle={selectedOccurrence ? 'Edit Occurrence' : 'Add New Occurrence'}\n        isFromRequestBooking={true}\n      />\n\n      <ConfirmationModal\n        visible={confirmationModal.visible}\n        actionText={confirmationModal.actionText}\n        onClose={() => {\n          if (!confirmationModal.isLoading) {\n            setConfirmationModal({ \n              visible: false, \n              actionText: '', \n              onConfirm: null, \n              isLoading: false \n            });\n          }\n        }}\n        onConfirm={confirmationModal.onConfirm}\n        isLoading={confirmationModal.isLoading}\n      />\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  modalContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n  },\n  modalContent: {\n    backgroundColor: theme.colors.background,\n    borderRadius: 8,\n    padding: 20,\n    width: '90%',\n    maxWidth: 500,\n    maxHeight: '80%',\n  },\n  modalTitle: {\n    fontSize: theme.fontSizes.largeLarge,\n    fontWeight: 'bold',\n    marginBottom: 20,\n    textAlign: 'center',\n  },\n  scrollView: {\n    maxHeight: '70%',\n  },\n  label: {\n    fontSize: theme.fontSizes.medium,\n    fontWeight: '500',\n    marginTop: 15,\n    marginBottom: 10,\n  },\n  serviceOptions: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 10,\n  },\n  serviceButton: {\n    marginBottom: 10,\n  },\n  petOptions: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 10,\n  },\n  petButton: {\n    marginBottom: 10,\n  },\n  dateContainer: {\n    gap: 10,\n  },\n  timeContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    gap: 10,\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 20,\n    gap: 10,\n  },\n  button: {\n    flex: 1,\n  },\n  timePickerWrapper: {\n    flex: 1,\n  },\n  dropdownContainer: {\n    position: 'relative',\n    marginBottom: 20,\n    zIndex: 3,\n  },\n  dropdownInput: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 8,\n    padding: 12,\n    backgroundColor: theme.colors.surface,\n  },\n  dropdownList: {\n    position: 'absolute',\n    top: '100%',\n    left: 0,\n    right: 0,\n    backgroundColor: theme.colors.surface,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 8,\n    maxHeight: 200,\n    zIndex: 1000,\n    elevation: 5,\n  },\n  dropdownItem: {\n    padding: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  dropdownText: {\n    color: theme.colors.text,\n  },\n  selectedOption: {\n    color: theme.colors.primary,\n    fontWeight: 'bold',\n  },\n  petItem: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingVertical: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  petInfo: {\n    flex: 1,\n  },\n  petName: {\n    fontSize: theme.fontSizes.medium,\n    fontWeight: '500',\n    marginBottom: 4,\n  },\n  petDetails: {\n    fontSize: theme.fontSizes.smallMedium,\n    color: theme.colors.placeholder,\n  },\n  addPetButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 12,\n    marginTop: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 8,\n    justifyContent: 'center',\n  },\n  addPetText: {\n    marginLeft: 8,\n    color: theme.colors.primary,\n    fontSize: theme.fontSizes.medium,\n  },\n  occurrenceCard: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 15,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    marginBottom: 10,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  occurrenceDetails: {\n    flex: 1,\n  },\n  dateText: {\n    fontSize: theme.fontSizes.medium,\n    fontWeight: '500',\n    marginBottom: 4,\n  },\n  timeText: {\n    fontSize: theme.fontSizes.smallMedium,\n    color: theme.colors.placeholder,\n  },\n  addOccurrenceButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 16,\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n    borderRadius: 8,\n    marginTop: 12,\n  },\n  addOccurrenceText: {\n    marginLeft: 8,\n    color: theme.colors.primary,\n    fontSize: theme.fontSizes.medium,\n  },\n  occurrenceActions: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 10,\n  },\n  actionButton: {\n    padding: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.error,\n    borderRadius: 4,\n  },\n  bookingRequestCard: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    padding: 16,\n    margin: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n  },\n  bookingRequestHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 12,\n    gap: 8,\n  },\n  bookingRequestTitle: {\n    fontSize: theme.fontSizes.mediumLarge,\n    fontWeight: 'bold',\n    color: theme.colors.primary,\n  },\n  bookingRequestDetails: {\n    gap: 8,\n  },\n  detailLabel: {\n    fontSize: theme.fontSizes.smallMedium,\n    fontWeight: '500',\n    color: theme.colors.placeholder,\n  },\n  detailText: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n  },\n  acceptButton: {\n    backgroundColor: theme.colors.primary,\n    padding: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n    marginTop: 16,\n  },\n  acceptButtonText: {\n    color: theme.colors.surface,\n    fontSize: theme.fontSizes.medium,\n    fontWeight: '500',\n  },\n  occurrenceCardError: {\n    borderColor: theme.colors.error,\n  },\n  errorText: {\n    color: theme.colors.error,\n    fontSize: theme.fontSizes.small,\n    marginTop: 4,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  errorContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n});\n\nexport default RequestBookingModal; ","import React, { useState, useContext, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  ScrollView,\n  ActivityIndicator,\n  Image,\n  Platform,\n  Alert,\n} from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../../styles/theme';\nimport { AuthContext, debugLog } from '../../context/AuthContext';\nimport { API_BASE_URL, getMediaUrl } from '../../config/config';\nimport { getBookingAvailableServices, getBookingAvailablePets } from '../../api/API';\nimport axios from 'axios';\nimport { navigateToFrom } from '../Navigation';\n\nconst ServiceAndPetsCard = ({ \n  bookingId, \n  onServiceSelect, \n  onPetSelect, \n  onBatchPetSelect,\n  selectedService, \n  selectedPets,\n  isLoading,\n  error,\n  onNext,\n  currentBookingId,\n  navigation,\n  onClose,\n  shouldFetchServices,\n  shouldFetchPets,\n  markServicesInitialized,\n  markPetsInitialized,\n  // New props for parent-managed data\n  availableServices: parentAvailableServices = [],\n  availablePets: parentAvailablePets = [],\n  onServicesData,\n  onPetsData\n}) => {\n  const { is_DEBUG } = useContext(AuthContext);\n  \n  if (is_DEBUG) {\n    console.log('MBA2ou09hv595: ServiceAndPetsCard component rendered/re-rendered', {\n      bookingId,\n      timestamp: new Date().toISOString()\n    });\n  }\n  // Use parent-provided data if available, otherwise fall back to local state\n  const [localAvailableServices, setLocalAvailableServices] = useState([]);\n  const [localAvailablePets, setLocalAvailablePets] = useState([]);\n  \n  // Use parent data if provided, otherwise use local state\n  const availableServices = parentAvailableServices.length > 0 ? parentAvailableServices : localAvailableServices;\n  const availablePets = parentAvailablePets.length > 0 ? parentAvailablePets : localAvailablePets;\n  \n  // Add debugging for state changes\n  useEffect(() => {\n    debugLog('MBA2ou09hv595', 'availableServices state changed', {\n      bookingId,\n      count: availableServices.length,\n      services: availableServices.map(s => ({ id: s.service_id, name: s.service_name })),\n      source: parentAvailableServices.length > 0 ? 'parent' : 'local'\n    });\n  }, [availableServices, parentAvailableServices]);\n  \n  useEffect(() => {\n    debugLog('MBA2ou09hv595', 'availablePets state changed', {\n      bookingId,\n      count: availablePets.length,\n      pets: availablePets.map(p => ({ id: p.pet_id, name: p.name })),\n      source: parentAvailablePets.length > 0 ? 'parent' : 'local'\n    });\n  }, [availablePets, parentAvailablePets]);\n  const [isLoadingServices, setIsLoadingServices] = useState(false);\n  const [isLoadingPets, setIsLoadingPets] = useState(false);\n  const [serviceError, setServiceError] = useState(null);\n  const [petsError, setPetsError] = useState(null);\n\n  useEffect(() => {\n    debugLog('MBA2ou09hv595', 'useEffect triggered', {\n      bookingId,\n      selectedService,\n      selectedPetsCount: selectedPets.length,\n      selectedPetIds: selectedPets.map(p => p.pet_id),\n      currentAvailableServicesCount: availableServices.length,\n      currentAvailablePetsCount: availablePets.length,\n      timestamp: new Date().toISOString()\n    });\n    \n    // Use parent-controlled initialization logic\n    if (shouldFetchServices && shouldFetchServices()) {\n      debugLog('MBA2ou09hv595', 'Parent says should fetch services', {\n        bookingId,\n        timestamp: new Date().toISOString()\n      });\n      fetchAvailableServices();\n    } else {\n      debugLog('MBA2ou09hv595', 'Parent says skip services fetch', {\n        bookingId,\n        timestamp: new Date().toISOString()\n      });\n    }\n\n    if (shouldFetchPets && shouldFetchPets()) {\n      debugLog('MBA2ou09hv595', 'Parent says should fetch pets', {\n        bookingId,\n        timestamp: new Date().toISOString()\n      });\n      fetchAvailablePets();\n    } else {\n      debugLog('MBA2ou09hv595', 'Parent says skip pets fetch', {\n        bookingId,\n        timestamp: new Date().toISOString()\n      });\n    }\n  }, [bookingId]);\n\n  const fetchAvailableServices = async () => {\n    try {\n      if (is_DEBUG) {\n        console.log('MBA2ou09hv595: fetchAvailableServices started', {\n          bookingId,\n          timestamp: new Date().toISOString()\n        });\n      }\n      setIsLoadingServices(true);\n      setServiceError(null);\n      const response = await getBookingAvailableServices(bookingId);\n      if (is_DEBUG) {\n        console.log('MBA2ou09hv595: fetchAvailableServices completed', {\n          bookingId,\n          servicesCount: response.services?.length,\n          timestamp: new Date().toISOString()\n        });\n      }\n      \n      debugLog('MBA2ou09hv595', 'Setting available services in state', {\n        bookingId,\n        services: response.services,\n        servicesCount: response.services?.length,\n        responseKeys: Object.keys(response),\n        timestamp: new Date().toISOString()\n      });\n      \n      // Safety check: only update if we actually have services data\n      if (response.services && Array.isArray(response.services)) {\n        // Use parent data handler if available, otherwise update local state\n        if (onServicesData) {\n          onServicesData(response.services, response.selected_service_id);\n        } else {\n          setLocalAvailableServices(response.services);\n        }\n      } else {\n        debugLog('MBA2ou09hv595', 'WARNING: Invalid services response', {\n          bookingId,\n          response,\n          responseType: typeof response,\n          servicesType: typeof response.services\n        });\n      }\n      \n      // Mark services as initialized\n      if (markServicesInitialized) {\n        markServicesInitialized();\n      }\n    } catch (error) {\n      if (is_DEBUG) {\n        console.error('MBA12345 Error fetching services:', error);\n      }\n      setServiceError('Failed to load available services');\n      \n      // Reset the in-progress flag on error so it can be retried\n      if (markServicesInitialized) {\n        // Call with error flag to reset progress without marking as initialized\n        markServicesInitialized(true); // true indicates error\n      }\n    } finally {\n      setIsLoadingServices(false);\n    }\n  };\n\n  const fetchAvailablePets = async () => {\n    try {\n      if (is_DEBUG) {\n        console.log('MBA2ou09hv595: fetchAvailablePets started', {\n          bookingId,\n          currentSelectedPets: selectedPets.map(p => ({ id: p.pet_id, name: p.name })),\n          timestamp: new Date().toISOString()\n        });\n      }\n      setIsLoadingPets(true);\n      setPetsError(null);\n      \n      const response = await getBookingAvailablePets(bookingId);\n      if (is_DEBUG) {\n        console.log('MBA2ou09hv595: fetchAvailablePets completed', {\n          bookingId,\n          petsCount: response.pets?.length,\n          selectedPetIds: response.selected_pet_ids,\n          timestamp: new Date().toISOString()\n        });\n      }\n      \n      debugLog('MBA2ou09hv595', 'Setting available pets in state', {\n        bookingId,\n        pets: response.pets,\n        petsCount: response.pets?.length,\n        responseKeys: Object.keys(response),\n        timestamp: new Date().toISOString()\n      });\n      \n      // Safety check: only update if we actually have pets data\n      if (response.pets && Array.isArray(response.pets)) {\n        // Use parent data handler if available, otherwise update local state\n        if (onPetsData) {\n          onPetsData(response.pets, response.selected_pet_ids);\n        } else {\n          setLocalAvailablePets(response.pets);\n        }\n      } else {\n        debugLog('MBA2ou09hv595', 'WARNING: Invalid pets response', {\n          bookingId,\n          response,\n          responseType: typeof response,\n          petsType: typeof response.pets\n        });\n      }\n      \n      // Mark pets as initialized\n      if (markPetsInitialized) {\n        markPetsInitialized();\n      }\n    } catch (error) {\n      if (is_DEBUG) {\n        console.error('MBAio4wo4nou: Error fetching pets:', error);\n      }\n      setPetsError('Failed to load available pets');\n      \n      // Reset the in-progress flag on error so it can be retried\n      if (markPetsInitialized) {\n        // Call with error flag to reset progress without marking as initialized\n        markPetsInitialized(true); // true indicates error\n      }\n    } finally {\n      if (is_DEBUG) {\n        console.log('MBAio4wo4nou: fetchAvailablePets completed');\n      }\n      setIsLoadingPets(false);\n    }\n  };\n\n  // TODO: change to animal type based icons\n  const getServiceIcon = (serviceName) => {\n    switch (serviceName.toLowerCase()) {\n      case 'dog walking':\n        return 'paw';\n      case 'house sitting':\n        return 'home';\n      case 'drop-in visits':\n        return 'food-variant';\n      case 'boarding':\n        return 'home-city';\n      default:\n        return 'paw';\n    }\n  };\n\n  const renderServiceCard = (service) => {\n    const isSelected = selectedService?.service_id === service.service_id;\n    \n    return (\n      <TouchableOpacity\n        key={service.service_id}\n        style={[\n          styles.serviceCard,\n          isSelected && styles.selectedServiceCard\n        ]}\n        onPress={() => onServiceSelect({\n          ...service,\n          isOvernightForced: service.is_overnight\n        })}\n      >\n        {/* TODO: change to animal type based icons */}\n        <MaterialCommunityIcons \n          name={getServiceIcon(service.service_name)}\n          size={24}\n          color={isSelected ? theme.colors.mainColors.main : theme.colors.text}\n        />\n        <Text style={[\n          styles.serviceText,\n          isSelected && styles.selectedServiceText\n        ]}>\n          {service.service_name}\n        </Text>\n        {isSelected && (\n          <MaterialCommunityIcons \n            name=\"check\" \n            size={24} \n            color={theme.colors.mainColors.main}\n            style={styles.serviceCheckIcon}\n          />\n        )}\n      </TouchableOpacity>\n    );\n  };\n\n  const renderPetCard = (pet) => {\n    const isSelected = selectedPets.some(selectedPet => selectedPet.pet_id === pet.pet_id);\n    \n    if (is_DEBUG) {\n      console.log(`MBAio4wo4nou: Rendering pet card for ${pet.name}`, {\n        petId: pet.pet_id,\n        isSelected,\n        selectedPetsCount: selectedPets.length\n      });\n    }\n    \n    return (\n      <TouchableOpacity\n        key={pet.pet_id}\n        style={[\n          styles.petCard,\n          isSelected && styles.selectedPetCard\n        ]}\n        onPress={() => {\n          if (is_DEBUG) {\n            console.log('MBAio4wo4nou: Pet card clicked:', { id: pet.pet_id, name: pet.name });\n          }\n          onPetSelect(pet);\n        }}\n      >\n        <View style={styles.petImageContainer}>\n          {pet.profile_photo ? (\n            <Image \n              source={{ uri: getMediaUrl(pet.profile_photo) }} \n              style={styles.petImage}\n              defaultSource={require('../../../assets/default-pet-image.png')}\n            />\n          ) : (\n            <View style={styles.defaultPetImage}>\n              <MaterialCommunityIcons \n                name=\"paw\" \n                size={24} \n                color={theme.colors.placeHolderText}\n              />\n            </View>\n          )}\n        </View>\n        <View style={styles.petInfo}>\n          <Text style={styles.petName}>{pet.name.toLowerCase().charAt(0).toUpperCase() + pet.name.toLowerCase().slice(1)}</Text>\n          <Text style={styles.petDetails}>\n            {pet.species ? pet.species.toLowerCase().charAt(0).toUpperCase() + pet.species.toLowerCase().slice(1) : 'No species'} • {pet.breed ? pet.breed.toLowerCase().charAt(0).toUpperCase() + pet.breed.toLowerCase().slice(1) : 'No breed'}\n          </Text>\n        </View>\n        {isSelected && (\n          <MaterialCommunityIcons \n            name=\"check\" \n            size={24} \n            color={theme.colors.mainColors.main}\n            style={styles.checkIcon}\n          />\n        )}\n      </TouchableOpacity>\n    );\n  };\n\n  const renderSelectedItems = () => {\n    if (!selectedService && selectedPets.length === 0) return null;\n\n    return (\n      <View style={styles.selectedItemsContainer}>\n        <Text style={styles.selectedItemsTitle}>Selected Service & Pets:</Text>\n        <View style={styles.selectedItemsContent}>\n          {selectedService && (\n            <TouchableOpacity \n              style={styles.selectedTag}\n              onPress={() => onServiceSelect(null)}\n            >\n              <Text style={styles.selectedTagText}>{selectedService.service_name}</Text>\n              <MaterialCommunityIcons name=\"close\" size={16} color={theme.colors.mainColors.main} />\n            </TouchableOpacity>\n          )}\n          {selectedPets.map(pet => (\n            <TouchableOpacity \n              key={pet.pet_id}\n              style={styles.selectedTag}\n              onPress={() => onPetSelect(pet)}\n            >\n              <Text style={styles.selectedTagText}>{pet.name}</Text>\n              <MaterialCommunityIcons name=\"close\" size={16} color={theme.colors.mainColors.main} />\n            </TouchableOpacity>\n          ))}\n        </View>\n      </View>\n    );\n  };\n\n  const handleNext = async () => {\n    if (is_DEBUG) {\n      console.log('MBA98765 handleNext:', {\n        selectedService,\n        selectedPets,\n        currentBookingId\n      });\n    }\n\n    if (!selectedService || selectedPets.length === 0) {\n      Alert.alert('Error', 'Please select both a service and at least one pet before proceeding.');\n      return;\n    }\n\n    try {\n      // Update the draft with selected service and pets\n      const response = await axios.patch(\n        `${API_BASE_URL}/api/booking_drafts/v1/${currentBookingId}/update/`,\n        {\n          service_id: selectedService.service_id,\n          pet_ids: selectedPets.map(pet => pet.pet_id)\n        }\n      );\n\n      if (is_DEBUG) {\n        console.log('MBA98765 Draft update response:', response.data);\n      }\n\n      // If successful, proceed to next step\n      onNext();\n    } catch (error) {\n      if (is_DEBUG) {\n        console.log('MBA98765 Error updating draft:', error);\n      }\n      Alert.alert('Error', 'Failed to update booking draft. Please try again.');\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color={theme.colors.mainColors.main} />\n      </View>\n    );\n  }\n\n  if (error) {\n    return (\n      <View style={styles.errorContainer}>\n        <Text style={styles.errorText}>{error}</Text>\n      </View>\n    );\n  }\n\n  // Debug render state\n  debugLog('MBA2ou09hv595', 'ServiceAndPetsCard rendering with state', {\n    bookingId,\n    availableServicesCount: availableServices.length,\n    availablePetsCount: availablePets.length,\n    isLoadingServices,\n    isLoadingPets,\n    serviceError,\n    petsError,\n    selectedServiceId: selectedService?.service_id,\n    selectedPetsCount: selectedPets.length,\n    timestamp: new Date().toISOString()\n  });\n\n  return (\n    <ScrollView style={styles.container}>\n      <View style={styles.section}>\n        <Text style={styles.sectionTitle}>Select Service</Text>\n        {serviceError ? (\n          <Text style={styles.errorText}>{serviceError}</Text>\n        ) : isLoadingServices ? (\n          <ActivityIndicator size=\"small\" color={theme.colors.mainColors.main} />\n        ) : availableServices.length > 0 ? (\n          <View style={styles.servicesGrid}>\n            {availableServices.map(service => renderServiceCard(service))}\n          </View>\n        ) : (\n          <View style={styles.noServicesContainer}>\n            <Text style={styles.errorText}>No services available. Please add services to create a booking.</Text>\n            <TouchableOpacity \n              style={styles.createServiceButton} \n              onPress={() => {\n                onClose();\n                navigateToFrom(navigation, 'ServiceManager', 'MessageHistory');\n              }}\n            >\n              <Text style={styles.createServiceButtonText}>Create Services</Text>\n            </TouchableOpacity>\n          </View>\n        )}\n      </View>\n\n      <View style={styles.section}>\n        <Text style={styles.sectionTitle}>Select Pets</Text>\n        {petsError ? (\n          <Text style={styles.errorText}>{petsError}</Text>\n        ) : isLoadingPets ? (\n          <ActivityIndicator size=\"small\" color={theme.colors.mainColors.main} />\n        ) : (\n          availablePets.length > 0 ? (\n            <View style={styles.petsContainer}>\n              {availablePets.map(pet => renderPetCard(pet))}\n            </View>\n          ) : (\n            <Text style={styles.errorText}>Please instruct client to add pets to their account so you can create a booking for their pets.</Text>\n          )\n        )}\n      </View>\n    </ScrollView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n  },\n  section: {\n    padding: 16,\n  },\n  sectionTitle: {\n    fontSize: Platform.OS === 'web' ? 18 : 14,\n    fontFamily: theme.fonts.header.fontFamily,\n    marginBottom: 16,\n    color: theme.colors.text,\n  },\n  servicesGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 12,\n    justifyContent: 'flex-start',\n    width: '100%',\n  },\n  serviceCard: {\n    width: '31%',\n    minWidth: 100,\n    maxWidth: 150,\n    aspectRatio: 1.2,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 12,\n    padding: 12,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    marginBottom: 8,\n  },\n  selectedServiceCard: {\n    backgroundColor: `${theme.colors.mainColors.main}10`,\n    borderColor: theme.colors.mainColors.main,\n  },\n  serviceText: {\n    marginTop: 8,\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    textAlign: 'center',\n    width: '100%',\n  },\n  selectedServiceText: {\n    color: theme.colors.mainColors.main,\n    fontWeight: '600',\n  },\n  petsContainer: {\n    gap: 12,\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'flex-start',\n  },\n  petCard: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.surface,\n    borderRadius: 12,\n    padding: 12,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    width: Platform.OS === 'web' ? 'calc(50% - 6px)' : '100%',\n    minWidth: Platform.OS === 'web' ? 250 : 'auto',\n    maxWidth: Platform.OS === 'web' ? 400 : '100%',\n  },\n  selectedPetCard: {\n    backgroundColor: `${theme.colors.mainColors.main}10`,\n    borderColor: theme.colors.mainColors.main,\n  },\n  petImageContainer: {\n    marginRight: 12,\n  },\n  petImage: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n  },\n  defaultPetImage: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    backgroundColor: theme.colors.surface,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  petInfo: {\n    flex: 1,\n  },\n  petName: {\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginBottom: 4,\n    color: theme.colors.text,\n  },\n  petDetails: {\n    fontSize: 14,\n    color: theme.colors.placeHolderText,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  checkIcon: {\n    marginLeft: 12,\n  },\n  selectedItemsContainer: {\n    backgroundColor: 'rgba(0, 0, 0, 0.03)',\n    padding: 16,\n    borderRadius: 8,\n  },\n  selectedItemsTitle: {\n    fontSize: Platform.OS === 'web' ? 14 : 10,\n    fontFamily: theme.fonts.header.fontFamily,\n    marginBottom: 16,\n    color: theme.colors.text,\n  },\n  selectedItemsContent: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 8,\n  },\n  selectedTag: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: `${theme.colors.mainColors.main}10`,\n    borderRadius: 20,\n    paddingVertical: 6,\n    paddingHorizontal: 12,\n    gap: 8,\n  },\n  selectedTagText: {\n    color: theme.colors.mainColors.main,\n    fontSize: 14,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  errorContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  errorText: {\n    color: theme.colors.error,\n    textAlign: 'center',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  serviceCheckIcon: {\n    position: 'absolute',\n    top: 8,\n    right: 8,\n  },\n  createServiceButton: {\n    backgroundColor: theme.colors.mainColors.main,\n    padding: 16,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  createServiceButtonText: {\n    color: theme.colors.surface,\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default ServiceAndPetsCard; ","import React, { useState, useContext, useEffect, useRef } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  ScrollView,\n  Dimensions,\n  Modal,\n  Platform,\n  Image,\n  Animated,\n} from 'react-native';\nimport { theme } from '../../styles/theme';\nimport { AuthContext, debugLog } from '../../context/AuthContext';\n\nconst DateSelectionCard = ({ \n  selectedDates = [], \n  onDateSelect,\n  bookingType = 'one-time', // 'one-time' or 'recurring'\n  dateRangeType = 'date-range', // 'date-range' or 'multiple-days'\n  initialDateRange = null,\n  isOvernightForced = false,\n}) => {\n  const { is_DEBUG, screenWidth } = useContext(AuthContext);\n  const isDesktop = screenWidth > 768;\n  const [currentMonth, setCurrentMonth] = useState(new Date());\n  const [selectedDatesList, setSelectedDatesList] = useState(selectedDates);\n  const [selectedBookingType, setSelectedBookingType] = useState(isOvernightForced ? 'one-time' : bookingType);\n  const [selectedDateRangeType, setSelectedDateRangeType] = useState('date-range');\n  const [rangeStartDate, setRangeStartDate] = useState(initialDateRange ? initialDateRange.startDate : null);\n  const [selectedDaysOfWeek, setSelectedDaysOfWeek] = useState([1, 3]); // Default to M,W\n  const [selectedFrequency, setSelectedFrequency] = useState('weekly'); // 'weekly', 'bi-weekly', 'monthly'\n  const [dateRangeEnd, setDateRangeEnd] = useState(initialDateRange ? initialDateRange.endDate : null);\n  const [showRecurringCalendar, setShowRecurringCalendar] = useState(false);\n  const [recurringStartDate, setRecurringStartDate] = useState(new Date());\n  const [recurringEndDate, setRecurringEndDate] = useState(() => {\n    const date = new Date();\n    date.setMonth(date.getMonth() + 1);\n    return date;\n  });\n  const [isSelectingStartDate, setIsSelectingStartDate] = useState(true);\n  const [showRecurringPreview, setShowRecurringPreview] = useState(false);\n  const [showRecurringDropdownCalendar, setShowRecurringDropdownCalendar] = useState(false);\n  const [tempRangeStart, setTempRangeStart] = useState(null);\n  const [tempRangeEnd, setTempRangeEnd] = useState(null);\n  const [datesFromRange, setDatesFromRange] = useState(false);\n  const [lastRangeSelection, setLastRangeSelection] = useState(null);\n\n  useEffect(() => {\n    debugLog('MBA54321 DateSelectionCard initialized with dates:', selectedDates);\n    debugLog('MBA54321 Current booking type:', bookingType);\n    debugLog('MBA54321 Current date range type:', dateRangeType);\n    debugLog('MBA54321 Initial date range:', initialDateRange);\n    debugLog('MBA54321 isOvernightForced:', isOvernightForced);\n    \n    // Set the booking type and date range type from props\n    setSelectedBookingType(isOvernightForced ? 'one-time' : bookingType);\n    \n    // For overnight services, ALWAYS force date-range selection type\n    // For non-overnight services, ALWAYS force multiple-days selection type\n    if (isOvernightForced) {\n      setSelectedDateRangeType('date-range');\n    } else {\n      // TODO: [NON-OVERNIGHT Date Range Feature] This is for date ranges for non-overnight services, uncomment after MVP launch\n      // // Check if the dates are non-consecutive to enforce multiple-days mode\n      // if (selectedDates && selectedDates.length > 1) {\n      //   const datesArray = selectedDates.map(dateItem => {\n      //     if (dateItem instanceof Date) {\n      //       return dateItem;\n      //     } else if (typeof dateItem === 'object' && dateItem.date) {\n      //       return new Date(dateItem.date);\n      //     } else {\n      //       return new Date(dateItem);\n      //     }\n      //   }).sort((a, b) => a - b);\n        \n      //   // Check if dates are consecutive\n      //   let areConsecutive = true;\n      //   for (let i = 1; i < datesArray.length; i++) {\n      //     const prevDate = new Date(datesArray[i-1]);\n      //     const currDate = new Date(datesArray[i]);\n      //     prevDate.setDate(prevDate.getDate() + 1);\n          \n      //     if (prevDate.getTime() !== currDate.getTime()) {\n      //       areConsecutive = false;\n      //       break;\n      //     }\n      //   }\n        \n      //   // Set appropriate date range type\n      //   if (!areConsecutive) {\n      setSelectedDateRangeType('multiple-days');\n      // TODO: [NON-OVERNIGHT Date Range Feature] This is for date ranges for non-overnight services, uncomment after MVP launch\n      //     debugLog('MBA54321 Non-consecutive dates detected, enforcing multiple-days mode');\n      //   } else {\n      //     setSelectedDateRangeType(dateRangeType);\n      //   }\n      // } else {\n      //   setSelectedDateRangeType(dateRangeType);\n      // }\n    }\n    \n    // Handle dates from draft that might be in a different format\n    if (selectedDates && selectedDates.length > 0) {\n      // Check if the dates are already Date objects or if they're objects with a date property\n      const datesArray = selectedDates.map(dateItem => {\n        if (dateItem instanceof Date) {\n          return dateItem; // Already a Date object\n        } else if (typeof dateItem === 'object' && dateItem.date) {\n          // It's a date object with a date property (from draft data)\n          // Format is typically { date: '2023-05-01', startTime: '09:00', endTime: '17:00' }\n          return new Date(dateItem.date);\n        } else {\n          // Unknown format, try to parse as date\n          return new Date(dateItem);\n        }\n      });\n      \n      setSelectedDatesList(datesArray);\n      \n      // If in date-range mode and dates are consecutive, set the range start and end dates\n      const areConsecutiveDates = checkIfConsecutiveDates(datesArray);\n      \n      if ((dateRangeType === 'date-range' || isOvernightForced) && datesArray.length > 0 && areConsecutiveDates) {\n        // Sort dates to get min and max\n        const sortedDates = [...datesArray].sort((a, b) => a - b);\n        setRangeStartDate(sortedDates[0]);\n        setDateRangeEnd(sortedDates[sortedDates.length - 1]);\n        setDatesFromRange(true);\n      } else if (datesArray.length > 0) {\n        // For non-consecutive dates, we'll stay in multiple-days mode\n        setDatesFromRange(false);\n      }\n      \n      // Notify parent component that we have valid dates\n      if (onDateSelect) {\n        // TODO: [NON-OVERNIGHT Date Range Feature] Add this back to the conditional below instead of just multiple days\n        // (!areConsecutiveDates ? 'multiple-days' : dateRangeType),\n        const dateData = {\n          type: bookingType,\n          dates: datesArray,\n          rangeType: isOvernightForced ? 'date-range' : 'multiple-days',\n          isValid: true\n        };\n        \n        // Add range data if in date-range mode and dates are consecutive\n        if ((dateRangeType === 'date-range' || isOvernightForced) && \n            datesArray.length > 0 && \n            areConsecutiveDates) {\n          const sortedDates = [...datesArray].sort((a, b) => a - b);\n          dateData.startDate = sortedDates[0];\n          dateData.endDate = sortedDates[sortedDates.length - 1];\n        }\n        \n        onDateSelect(dateData);\n      }\n    }\n  }, []);\n\n  // Helper function to check if an array of dates contains only consecutive dates\n  const checkIfConsecutiveDates = (datesArray) => {\n    if (!datesArray || datesArray.length <= 1) return true;\n    \n    // Sort the dates\n    const sortedDates = [...datesArray].sort((a, b) => a - b);\n    \n    // Check if each date is exactly one day after the previous\n    for (let i = 1; i < sortedDates.length; i++) {\n      const prevDate = new Date(sortedDates[i-1]);\n      const currDate = new Date(sortedDates[i]);\n      prevDate.setDate(prevDate.getDate() + 1);\n      \n      if (prevDate.getTime() !== currDate.getTime()) {\n        debugLog('MBA54321 Non-consecutive dates found:', {\n          prev: sortedDates[i-1].toISOString().split('T')[0],\n          current: sortedDates[i].toISOString().split('T')[0]\n        });\n        return false;\n      }\n    }\n    \n    return true;\n  };\n\n  // Initialize date range if provided separately via initialDateRange\n  useEffect(() => {\n    if (initialDateRange && initialDateRange.startDate && initialDateRange.endDate && !datesFromRange) {\n      // Check if we already have selectedDatesList populated\n      // If so, we need to determine if these are non-consecutive dates\n      if (selectedDatesList.length > 0 && !checkIfConsecutiveDates(selectedDatesList)) {\n        debugLog('MBA54321 Non-consecutive dates already loaded, not converting to range');\n        \n        // We already have non-consecutive dates, don't override with a range\n        if (onDateSelect) {\n          onDateSelect({\n            type: bookingType,\n            dates: selectedDatesList,\n            rangeType: 'multiple-days',\n            isValid: selectedDatesList.length > 0\n          });\n        }\n        return;\n      }\n      \n      const dateRange = [];\n      const currentDate = new Date(initialDateRange.startDate);\n      const endDate = new Date(initialDateRange.endDate);\n      \n      while (currentDate <= endDate) {\n        dateRange.push(new Date(currentDate));\n        currentDate.setDate(currentDate.getDate() + 1);\n      }\n      \n      setSelectedDatesList(dateRange);\n      setRangeStartDate(new Date(initialDateRange.startDate));\n      setDateRangeEnd(new Date(initialDateRange.endDate));\n      setDatesFromRange(true);\n\n      if (onDateSelect) {\n        onDateSelect({\n          type: bookingType,\n          dates: dateRange,\n          rangeType: 'date-range',\n          startDate: new Date(initialDateRange.startDate),\n          endDate: new Date(initialDateRange.endDate),\n          isValid: true\n        });\n      }\n    }\n  }, [initialDateRange, datesFromRange]);\n\n  const handleBookingTypeSelect = (type) => {\n    if (isOvernightForced) return; // Prevent booking type changes for overnight services\n    \n    if (is_DEBUG) {\n      console.log('MBA54321 Booking type selected:', type);\n    }\n    setSelectedBookingType(type);\n    // Clear selected dates when changing booking type\n    setSelectedDatesList([]);\n    setRangeStartDate(null);\n    setDateRangeEnd(null);\n    setDatesFromRange(false);\n  };\n\n  const handleDateRangeTypeSelect = (type) => {\n    if (is_DEBUG) {\n      console.log('MBA54321 Date range type selected:', type);\n      console.log('MBA54321 Current range data:', {\n        rangeStartDate,\n        dateRangeEnd,\n        selectedDatesList: selectedDatesList.length\n      });\n    }\n    \n    // Check if we're switching to date-range with non-consecutive dates\n    if (type === 'date-range' && selectedDatesList.length > 1 && !checkIfConsecutiveDates(selectedDatesList)) {\n      debugLog('MBA54321 Cannot switch to date-range with existing non-consecutive dates');\n      // The UI will handle this by clearing dates first, so we don't need additional handling here\n      return;\n    }\n    \n    setSelectedDateRangeType(type);\n    \n    if (type === 'date-range' && lastRangeSelection) {\n      // Only restore the last range selection when switching to date-range\n      // if those dates were actually consecutive\n      if (checkIfConsecutiveDates(lastRangeSelection.dates)) {\n        setRangeStartDate(lastRangeSelection.startDate);\n        setDateRangeEnd(lastRangeSelection.endDate);\n        setSelectedDatesList(lastRangeSelection.dates);\n        setDatesFromRange(true);\n        \n        if (onDateSelect) {\n          onDateSelect({\n            type: 'one-time',\n            dates: lastRangeSelection.dates,\n            rangeType: 'date-range',\n            startDate: lastRangeSelection.startDate,\n            endDate: lastRangeSelection.endDate,\n            isValid: true\n          });\n        }\n      } else {\n        // Current dates are not consecutive - keep in multiple-days mode and show warning\n        debugLog('MBA54321 Cannot switch to date-range with non-consecutive dates');\n        \n        // Revert the UI selection\n        setTimeout(() => {\n          setSelectedDateRangeType('multiple-days');\n        }, 100);\n        \n        // Keep the existing dates in multiple-days mode\n        if (onDateSelect) {\n          onDateSelect({\n            type: 'one-time',\n            dates: selectedDatesList,\n            rangeType: 'multiple-days',\n            isValid: selectedDatesList.length > 0\n          });\n        }\n      }\n    } else if (type === 'multiple-days') {\n      // Store the current range selection before switching to multiple-days\n      if (rangeStartDate && dateRangeEnd) {\n        setLastRangeSelection({\n          startDate: rangeStartDate,\n          endDate: dateRangeEnd,\n          dates: selectedDatesList\n        });\n      }\n      \n      // Keep the selected dates when switching to multiple-days\n      if (onDateSelect) {\n        onDateSelect({\n          type: 'one-time',\n          dates: selectedDatesList,\n          rangeType: 'multiple-days',\n          isValid: selectedDatesList.length > 0\n        });\n      }\n    }\n  };\n\n  const handleDayOfWeekSelect = (dayIndex) => {\n    if (is_DEBUG) {\n      console.log('MBA54321 Day of week toggled:', dayIndex);\n    }\n    \n    setSelectedDaysOfWeek(prev => {\n      if (prev.includes(dayIndex)) {\n        return prev.filter(day => day !== dayIndex);\n      } else {\n        return [...prev, dayIndex];\n      }\n    });\n  };\n\n  const handleFrequencySelect = (frequency) => {\n    if (is_DEBUG) {\n      console.log('MBA54321 Frequency selected:', frequency);\n    }\n    setSelectedFrequency(frequency);\n  };\n\n  const goToPreviousMonth = () => {\n    const prevMonth = new Date(currentMonth);\n    prevMonth.setMonth(prevMonth.getMonth() - 1);\n    setCurrentMonth(prevMonth);\n  };\n\n  const goToNextMonth = () => {\n    const nextMonth = new Date(currentMonth);\n    nextMonth.setMonth(nextMonth.getMonth() + 1);\n    setCurrentMonth(nextMonth);\n  };\n\n  const isDateSelected = (date) => {\n    return selectedDatesList.some(selectedDate => {\n      // Ensure selectedDate is a proper Date object\n      if (!(selectedDate instanceof Date)) {\n        // Try to convert selectedDate to a Date if it's not already one\n        if (typeof selectedDate === 'string') {\n          selectedDate = new Date(selectedDate);\n        } else if (selectedDate && typeof selectedDate.date === 'string') {\n          selectedDate = new Date(selectedDate.date);\n        } else {\n          // Return false if we can't convert to a Date\n          return false;\n        }\n      }\n      \n      // Now safe to call Date methods\n      return selectedDate.getDate() === date.getDate() && \n             selectedDate.getMonth() === date.getMonth() && \n             selectedDate.getFullYear() === date.getFullYear();\n    });\n  };\n\n  const isDateInRange = (date) => {\n    if (!rangeStartDate || !dateRangeEnd) return false;\n    \n    return date >= rangeStartDate && date <= dateRangeEnd;\n  };\n\n  const handleDateSelection = (date) => {\n    if (is_DEBUG) {\n      console.log('MBA54321 Date selected:', date);\n    }\n\n    if (isOvernightForced || selectedDateRangeType === 'date-range') {\n      handleDateRangeSelection(date);\n    } else {\n      // Multiple days selection\n      toggleDateSelection(date);\n    }\n  };\n\n  const handleDateRangeSelection = (date) => {\n    if (is_DEBUG) {\n      console.log('MBA19ynkiy34b handleDateRangeSelection - date:', date);\n      console.log('MBA19ynkiy34b handleDateRangeSelection - current state:', {\n        rangeStartDate,\n        dateRangeEnd,\n        selectedDatesList: selectedDatesList.length\n      });\n    }\n\n    // If we have non-consecutive dates but we're in date-range mode,\n    // we should clear them first\n    if (selectedDatesList.length > 1 && !checkIfConsecutiveDates(selectedDatesList)) {\n      debugLog('MBA19ynkiy34b handleDateRangeSelection - clearing non-consecutive dates for date range');\n      setSelectedDatesList([date]);\n      setRangeStartDate(date);\n      setDateRangeEnd(null);\n      setDatesFromRange(false);\n      \n      if (onDateSelect) {\n        onDateSelect({\n          type: 'one-time',\n          dates: [date],\n          rangeType: 'date-range',\n          startDate: date,\n          isValid: false\n        });\n      }\n      return;\n    }\n\n    // First check if we already have non-consecutive dates selected\n    if (selectedDatesList.length > 1 && !checkIfConsecutiveDates(selectedDatesList)) {\n      // We have non-consecutive dates, so we should be in multiple-days mode\n      if (selectedDateRangeType !== 'multiple-days') {\n        debugLog('MBA19ynkiy34b Non-consecutive dates exist, forcing multiple-days mode');\n        setSelectedDateRangeType('multiple-days');\n      }\n      \n      // Handle the date click as a toggle in multiple-days mode\n      toggleDateSelection(date);\n      return;\n    }\n\n    if (!rangeStartDate) {\n      setRangeStartDate(date);\n      setSelectedDatesList([date]);\n      setDateRangeEnd(null);\n      setLastRangeSelection(null); // Clear last range when starting new selection\n      if (is_DEBUG) console.log('MBA19ynkiy34b handleDateRangeSelection - first date selected');\n      if (onDateSelect) {\n        onDateSelect({\n          type: 'one-time',\n          dates: [date],\n          rangeType: 'date-range',\n          startDate: date,\n          isValid: false\n        });\n      }\n    } else if (!dateRangeEnd) {\n      let startDate = new Date(rangeStartDate);\n      let endDate = new Date(date);\n      \n      if (date < rangeStartDate) {\n        startDate = new Date(date);\n        endDate = new Date(rangeStartDate);\n      }\n      \n      setDateRangeEnd(endDate);\n      \n      const dateRange = [];\n      const currentDate = new Date(startDate);\n      \n      while (currentDate <= endDate) {\n        dateRange.push(new Date(currentDate));\n        currentDate.setDate(currentDate.getDate() + 1);\n      }\n      \n      setSelectedDatesList(dateRange);\n      // Store the new range selection\n      setLastRangeSelection({\n        startDate: startDate,\n        endDate: endDate,\n        dates: dateRange\n      });\n\n      if (onDateSelect) {\n        const data = {\n          type: 'one-time',\n          dates: dateRange,\n          rangeType: 'date-range',\n          startDate: startDate,\n          endDate: endDate,\n          isValid: true\n        };\n        if (is_DEBUG) console.log('MBA19ynkiy34b handleDateRangeSelection - complete range selected, sending data:', data);\n        onDateSelect(data);\n      }\n    } else {\n      setRangeStartDate(date);\n      setSelectedDatesList([date]);\n      setDateRangeEnd(null);\n      setLastRangeSelection(null); // Clear last range when starting new selection\n      if (is_DEBUG) console.log('MBA19ynkiy34b handleDateRangeSelection - resetting selection');\n      if (onDateSelect) {\n        onDateSelect({\n          type: 'one-time',\n          dates: [date],\n          rangeType: 'date-range',\n          startDate: date,\n          isValid: false\n        });\n      }\n    }\n  };\n\n  const toggleDateSelection = (date) => {\n    if (is_DEBUG) {\n      console.log('MBA19ynkiy34b toggleDateSelection - date:', date);\n      console.log('MBA19ynkiy34b toggleDateSelection - current selected dates:', selectedDatesList.length);\n    }\n\n    const isAlreadySelected = isDateSelected(date);\n    let newSelectedDates;\n    \n    if (isAlreadySelected) {\n      newSelectedDates = selectedDatesList.filter(selectedDate => {\n        // Ensure selectedDate is a proper Date object\n        if (!(selectedDate instanceof Date)) {\n          // Try to convert to date if needed\n          if (typeof selectedDate === 'string') {\n            selectedDate = new Date(selectedDate);\n          } else if (selectedDate && typeof selectedDate.date === 'string') {\n            selectedDate = new Date(selectedDate.date);\n          } else {\n            // Can't compare, so keep this entry\n            return true;\n          }\n        }\n        \n        return !(selectedDate.getDate() === date.getDate() && \n                 selectedDate.getMonth() === date.getMonth() && \n                 selectedDate.getFullYear() === date.getFullYear());\n      });\n    } else {\n      newSelectedDates = [...selectedDatesList, date].sort((a, b) => a - b);\n    }\n    \n    setSelectedDatesList(newSelectedDates);\n\n    if (onDateSelect) {\n      const data = {\n        type: 'one-time',\n        dates: newSelectedDates,\n        rangeType: 'multiple-days',\n        isValid: newSelectedDates.length > 0\n      };\n      if (is_DEBUG) {\n        console.log('MBA19ynkiy34b toggleDateSelection - sending data:', data);\n        console.log('MBA19ynkiy34b toggleDateSelection - newSelectedDates length:', newSelectedDates.length);\n      }\n      onDateSelect(data);\n    }\n  };\n\n  const handleRecurringDateSelect = (date) => {\n    if (is_DEBUG) {\n      console.log('MBA19ynkiy34b handleRecurringDateSelect - date:', date);\n      console.log('MBA19ynkiy34b handleRecurringDateSelect - current state:', {\n        tempRangeStart,\n        selectedDaysOfWeek: selectedDaysOfWeek.length,\n        frequency: selectedFrequency\n      });\n    }\n    \n    if (!tempRangeStart) {\n      setTempRangeStart(date);\n      setRecurringStartDate(date);\n      if (is_DEBUG) console.log('MBA19ynkiy34b handleRecurringDateSelect - first date selected');\n      if (onDateSelect) {\n        onDateSelect({\n          type: 'recurring',\n          startDate: date,\n          daysOfWeek: selectedDaysOfWeek,\n          frequency: selectedFrequency,\n          isValid: false\n        });\n      }\n    } else {\n      let startDate = tempRangeStart;\n      let endDate = date;\n      \n      if (date < tempRangeStart) {\n        startDate = date;\n        endDate = tempRangeStart;\n      }\n      \n      setRecurringStartDate(startDate);\n      setRecurringEndDate(endDate);\n      setTempRangeStart(null);\n      setTempRangeEnd(null);\n      setShowRecurringDropdownCalendar(false);\n\n      if (onDateSelect) {\n        const data = {\n          type: 'recurring',\n          daysOfWeek: selectedDaysOfWeek,\n          frequency: selectedFrequency,\n          startDate: startDate,\n          endDate: endDate,\n          isValid: selectedDaysOfWeek.length > 0\n        };\n        if (is_DEBUG) {\n          console.log('MBA19ynkiy34b handleRecurringDateSelect - complete selection, sending data:', data);\n          console.log('MBA19ynkiy34b handleRecurringDateSelect - selectedDaysOfWeek:', selectedDaysOfWeek);\n        }\n        onDateSelect(data);\n      }\n    }\n  };\n\n  const isDateInTempRange = (date) => {\n    if (!tempRangeStart || !date) return false;\n    // Only highlight the tempRangeStart date if no end date is selected yet\n    if (!tempRangeEnd) {\n      return date.getTime() === tempRangeStart.getTime();\n    }\n    // Otherwise highlight the range between start and end\n    return date >= tempRangeStart && date <= tempRangeEnd;\n  };\n\n  const openRecurringCalendar = (isStart) => {\n    setIsSelectingStartDate(isStart);\n    setShowRecurringCalendar(true);\n  };\n\n  const isDateSelectable = (date) => {\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n    \n    // Allow selection of dates from previous month that are visible\n    if (date.getMonth() < currentMonth.getMonth()) {\n      return date.getMonth() === ((currentMonth.getMonth() - 1 + 12) % 12) &&\n             date >= today;\n    }\n    \n    // Allow selection of dates from next month that are visible\n    if (date.getMonth() > currentMonth.getMonth()) {\n      return date.getMonth() === ((currentMonth.getMonth() + 1) % 12) &&\n             date >= today;\n    }\n    \n    return date >= today;\n  };\n\n  const getSelectedDaysText = () => {\n    const dayNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n    const selectedDays = selectedDaysOfWeek.map(dayIndex => dayNames[dayIndex]);\n    \n    if (selectedDays.length === 0) return 'No days selected';\n    \n    let daysText = '';\n    if (selectedDays.length === 1) {\n      daysText = selectedDays[0];\n    } else if (selectedDays.length === 2) {\n      daysText = `${selectedDays[0]} and ${selectedDays[1]}`;\n    } else {\n      const lastDay = selectedDays.pop();\n      daysText = `${selectedDays.join(', ')}, and ${lastDay}`;\n    }\n\n    switch (selectedFrequency) {\n      case 'bi-weekly':\n        return `every other ${daysText}`;\n      case 'monthly':\n        const weekNum = getWeekOfMonth(recurringStartDate);\n        return `the ${weekNum} ${daysText} of each month`;\n      default:\n        return `every ${daysText}`;\n    }\n  };\n\n  const getWeekOfMonth = (date) => {\n    const week = Math.ceil((date.getDate() + (date.getDay() === 0 ? 6 : date.getDay() - 1)) / 7);\n    const suffixes = ['first', 'second', 'third', 'fourth', 'last'];\n    return suffixes[Math.min(week - 1, 4)];\n  };\n\n  const renderCalendar = () => {\n    const monthStart = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), 1);\n    const monthEnd = new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1, 0);\n    const startDate = new Date(monthStart);\n    const endDate = new Date(monthEnd);\n    \n    startDate.setDate(startDate.getDate() - startDate.getDay());\n    endDate.setDate(endDate.getDate() + (6 - endDate.getDay()));\n    \n    const weeks = [];\n    let days = [];\n    let day = new Date(startDate);\n    \n    while (day <= endDate) {\n      for (let i = 0; i < 7; i++) {\n        days.push(new Date(day));\n        day.setDate(day.getDate() + 1);\n      }\n      weeks.push(days);\n      days = [];\n    }\n\n    const monthName = currentMonth.toLocaleString('default', { month: 'long' });\n    const year = currentMonth.getFullYear();\n\n    return (\n      <View style={styles.calendarContainer}>\n        <View style={styles.calendarHeader}>\n          <TouchableOpacity onPress={goToPreviousMonth} style={styles.calendarNavButton}>\n            <Text style={styles.calendarNavButtonText}>{'<'}</Text>\n          </TouchableOpacity>\n          <Text style={styles.calendarTitle}>{`${monthName} ${year}`}</Text>\n          <TouchableOpacity onPress={goToNextMonth} style={styles.calendarNavButton}>\n            <Text style={styles.calendarNavButtonText}>{'>'}</Text>\n          </TouchableOpacity>\n        </View>\n        \n        <View style={styles.weekdaysContainer}>\n          {['S', 'M', 'T', 'W', 'T', 'F', 'S'].map((day, index) => (\n            <Text key={`weekday-${index}`} style={styles.weekdayText}>{day}</Text>\n          ))}\n        </View>\n        \n        {weeks.map((week, weekIndex) => (\n          <View key={`week-${weekIndex}`} style={styles.weekRow}>\n            {week.map((date, dateIndex) => {\n              const isSelectable = isDateSelectable(date);\n              const isSelected = isDateSelected(date);\n              const isInRange = selectedDateRangeType === 'date-range' && isDateInRange(date);\n              const isInTempRange = showRecurringDropdownCalendar && isDateInTempRange(date);\n              \n              return (\n                <TouchableOpacity\n                  key={`date-${weekIndex}-${dateIndex}`}\n                  style={[\n                    styles.dateCell,\n                    !isSelectable && styles.otherMonthDate,\n                    isSelected && styles.selectedDate,\n                    isInRange && styles.dateInRange,\n                    isInTempRange && styles.dateInRange,\n                  ]}\n                  onPress={() => isSelectable && (showRecurringDropdownCalendar ? handleRecurringDateSelect(date) : handleDateSelection(date))}\n                  disabled={!isSelectable}\n                >\n                  <Text style={[\n                    styles.dateText,\n                    !isSelectable && styles.otherMonthDateText,\n                    (isSelected || isInRange || isInTempRange) && styles.selectedDateText,\n                  ]}>\n                    {date.getDate()}\n                  </Text>\n                </TouchableOpacity>\n              );\n            })}\n          </View>\n        ))}\n      </View>\n    );\n  };\n\n  const formatSelectedDate = (date) => {\n    const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    const month = monthNames[date.getMonth()];\n    const day = date.getDate();\n    const year = date.getFullYear();\n    return `${month} ${day}, ${year}`;\n  };\n\n  const clearDateRange = () => {\n    if (is_DEBUG) {\n      console.log('MBA54321 Clearing date range');\n    }\n    \n    setSelectedDatesList([]);\n    setRangeStartDate(null);\n    setDateRangeEnd(null);\n    setDatesFromRange(false);\n    setLastRangeSelection(null);\n\n    if (onDateSelect) {\n      onDateSelect({\n        type: 'one-time',\n        dates: [],\n        rangeType: selectedDateRangeType,\n        startDate: null,\n        endDate: null,\n        isValid: false\n      });\n    }\n  };\n\n  const renderSelectedDates = () => {\n    if (selectedDatesList.length === 0) {\n      return null;\n    }\n\n    // If we have a date range and we're in date-range mode\n    if (selectedDateRangeType === 'date-range' && (dateRangeEnd || (datesFromRange && initialDateRange))) {\n      const startDate = rangeStartDate || initialDateRange?.startDate || selectedDatesList[0];\n      const endDate = dateRangeEnd || initialDateRange?.endDate || selectedDatesList[selectedDatesList.length - 1];\n      \n      return (\n        <View style={styles.selectedDatesContainer}>\n          <Text style={styles.selectedDatesTitle}>Selected Range:</Text>\n          <View style={styles.dateRangeChip}>\n            <Text style={styles.dateRangeText}>\n              From {formatSelectedDate(startDate)} to {formatSelectedDate(endDate)}\n            </Text>\n            <TouchableOpacity \n              onPress={clearDateRange}\n              style={styles.removeRangeButton}\n            >\n              <Text style={styles.removeButtonText}>×</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      );\n    }\n\n    // For multiple days selection or when in multiple-days mode\n    return (\n      <View style={styles.selectedDatesContainer}>\n        <Text style={styles.selectedDatesTitle}>Selected Dates:</Text>\n        <View style={styles.selectedDatesList}>\n          {selectedDatesList.map((date, index) => (\n            <View key={`selected-date-${index}`} style={styles.selectedDateChip}>\n              <Text style={styles.selectedDateChipText}>{formatSelectedDate(date)}</Text>\n              <TouchableOpacity \n                onPress={() => toggleDateSelection(date)}\n                style={styles.removeButton}\n              >\n                <Text style={styles.removeButtonText}>×</Text>\n              </TouchableOpacity>\n            </View>\n          ))}\n        </View>\n      </View>\n    );\n  };\n\n  const renderRecurringDropdownCalendar = () => {\n    if (!showRecurringDropdownCalendar) return null;\n\n    return (\n      <View style={styles.dropdownCalendar}>\n        <View style={styles.dropdownCalendarContent}>\n          {renderCalendar()}\n          <TouchableOpacity\n            style={styles.dropdownCloseButton}\n            onPress={() => {\n              setShowRecurringDropdownCalendar(false);\n              setTempRangeStart(null);\n              setTempRangeEnd(null);\n            }}\n          >\n            <Text style={styles.dropdownCloseButtonText}>Cancel</Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    );\n  };\n\n  const renderDateRangeSection = () => {\n    return (\n      <View style={styles.dateRangeSection}>\n        <View style={styles.dateRangeRow}>\n          <TouchableOpacity \n            style={styles.dateRangeColumn}\n            onPress={() => setShowRecurringDropdownCalendar(true)}\n          >\n            <Text style={styles.dateRangeLabel}>From</Text>\n            <Text style={styles.dateRangeValue}>\n              {formatSelectedDate(recurringStartDate)}\n            </Text>\n          </TouchableOpacity>\n          <TouchableOpacity \n            style={styles.dateRangeColumn}\n            onPress={() => setShowRecurringDropdownCalendar(true)}\n          >\n            <Text style={styles.dateRangeLabel}>To</Text>\n            <Text style={styles.dateRangeValue}>\n              {formatSelectedDate(recurringEndDate)}\n            </Text>\n          </TouchableOpacity>\n        </View>\n        {renderRecurringDropdownCalendar()}\n      </View>\n    );\n  };\n\n  const renderRecurringOptions = () => {\n    if (selectedBookingType !== 'recurring') return null;\n\n    return (\n      <View style={styles.recurringOptionsContainer}>\n        <Text style={styles.sectionTitle}>Repeat on</Text>\n        <View style={styles.daysOfWeekContainer}>\n          {['M', 'T', 'W', 'T', 'F', 'S', 'S'].map((day, index) => {\n            // Adjust index to match JavaScript day of week (0=Sun, 1=Mon, etc.)\n            const dayIndex = index === 6 ? 0 : index + 1;\n            const isSelected = selectedDaysOfWeek.includes(dayIndex);\n            \n            return (\n              <TouchableOpacity\n                key={`day-${index}`}\n                style={[\n                  styles.dayOfWeekButton,\n                  isSelected && styles.selectedDayOfWeekButton\n                ]}\n                onPress={() => handleDayOfWeekSelect(dayIndex)}\n              >\n                <Text style={[\n                  styles.dayOfWeekText,\n                  isSelected && styles.selectedDayOfWeekText\n                ]}>{day}</Text>\n              </TouchableOpacity>\n            );\n          })}\n        </View>\n\n        {renderDateRangeSection()}\n\n        <Text style={styles.sectionTitle}>Frequency</Text>\n        <View style={styles.frequencyContainer}>\n          <TouchableOpacity\n            style={[\n              styles.frequencyButton,\n              selectedFrequency === 'weekly' && styles.selectedFrequencyButton\n            ]}\n            onPress={() => handleFrequencySelect('weekly')}\n          >\n            <Text style={[\n              styles.frequencyText,\n              selectedFrequency === 'weekly' && styles.selectedFrequencyText\n            ]}>Weekly</Text>\n          </TouchableOpacity>\n          <TouchableOpacity\n            style={[\n              styles.frequencyButton,\n              selectedFrequency === 'bi-weekly' && styles.selectedFrequencyButton\n            ]}\n            onPress={() => handleFrequencySelect('bi-weekly')}\n          >\n            <Text style={[\n              styles.frequencyText,\n              selectedFrequency === 'bi-weekly' && styles.selectedFrequencyText\n            ]}>Bi-weekly</Text>\n          </TouchableOpacity>\n          <TouchableOpacity\n            style={[\n              styles.frequencyButton,\n              selectedFrequency === 'monthly' && styles.selectedFrequencyButton\n            ]}\n            onPress={() => handleFrequencySelect('monthly')}\n          >\n            <Text style={[\n              styles.frequencyText,\n              selectedFrequency === 'monthly' && styles.selectedFrequencyText\n            ]}>Monthly</Text>\n          </TouchableOpacity>\n        </View>\n\n        <View style={styles.recurrencePatternContainer}>\n          <Text style={styles.recurrencePatternTitle}>Recurrence Pattern:</Text>\n          <Text style={styles.recurrencePatternText}>\n            {getSelectedDaysText()}\n          </Text>\n          <Text style={styles.recurrencePatternText}>\n            From {formatSelectedDate(recurringStartDate)} to {formatSelectedDate(recurringEndDate)}\n          </Text>\n          <TouchableOpacity\n            style={styles.previewButton}\n            onPress={() => setShowRecurringPreview(true)}\n          >\n            <Text style={styles.previewButtonText}>View on Calendar</Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    );\n  };\n\n  const RecurringCalendarPreview = () => {\n    const [previewMonth, setPreviewMonth] = useState(new Date(recurringStartDate));\n    \n    const getRecurringDates = () => {\n      if (!recurringStartDate || !recurringEndDate || selectedDaysOfWeek.length === 0) {\n        return new Set();\n      }\n\n      const dates = new Set();\n      const current = new Date(recurringStartDate);\n      const end = new Date(recurringEndDate);\n      \n      while (current <= end) {\n        if (selectedDaysOfWeek.includes(current.getDay())) {\n          if (selectedFrequency === 'weekly') {\n            dates.add(new Date(current).getTime());\n          } else if (selectedFrequency === 'bi-weekly') {\n            const weeks = Math.floor((current - recurringStartDate) / (7 * 24 * 60 * 60 * 1000));\n            if (weeks % 2 === 0) {\n              dates.add(new Date(current).getTime());\n            }\n          } else if (selectedFrequency === 'monthly') {\n            const startWeek = getWeekOfMonth(recurringStartDate);\n            const currentWeek = getWeekOfMonth(current);\n            if (startWeek === currentWeek) {\n              dates.add(new Date(current).getTime());\n            }\n          }\n        }\n        current.setDate(current.getDate() + 1);\n      }\n      return dates;\n    };\n\n    const goToPreviousMonth = () => {\n      const prevMonth = new Date(previewMonth);\n      prevMonth.setMonth(prevMonth.getMonth() - 1);\n      setPreviewMonth(prevMonth);\n    };\n\n    const goToNextMonth = () => {\n      const nextMonth = new Date(previewMonth);\n      nextMonth.setMonth(nextMonth.getMonth() + 1);\n      setPreviewMonth(nextMonth);\n    };\n\n    const renderPreviewCalendar = () => {\n      const monthStart = new Date(previewMonth.getFullYear(), previewMonth.getMonth(), 1);\n      const monthEnd = new Date(previewMonth.getFullYear(), previewMonth.getMonth() + 1, 0);\n      const startDate = new Date(monthStart);\n      const endDate = new Date(monthEnd);\n      \n      startDate.setDate(startDate.getDate() - startDate.getDay());\n      endDate.setDate(endDate.getDate() + (6 - endDate.getDay()));\n      \n      const weeks = [];\n      let days = [];\n      let day = new Date(startDate);\n      const recurringDates = getRecurringDates();\n      \n      while (day <= endDate) {\n        for (let i = 0; i < 7; i++) {\n          days.push(new Date(day));\n          day.setDate(day.getDate() + 1);\n        }\n        weeks.push(days);\n        days = [];\n      }\n\n      const monthName = previewMonth.toLocaleString('default', { month: 'long' });\n      const year = previewMonth.getFullYear();\n\n      return (\n        <View style={styles.previewCalendarContainer}>\n          <View style={styles.calendarHeader}>\n            <TouchableOpacity onPress={goToPreviousMonth} style={styles.calendarNavButton}>\n              <Text style={styles.calendarNavButtonText}>{'<'}</Text>\n            </TouchableOpacity>\n            <Text style={styles.calendarTitle}>{`${monthName} ${year}`}</Text>\n            <TouchableOpacity onPress={goToNextMonth} style={styles.calendarNavButton}>\n              <Text style={styles.calendarNavButtonText}>{'>'}</Text>\n            </TouchableOpacity>\n          </View>\n          \n          <View style={styles.weekdaysContainer}>\n            {['S', 'M', 'T', 'W', 'T', 'F', 'S'].map((day, index) => (\n              <Text key={`weekday-${index}`} style={styles.weekdayText}>{day}</Text>\n            ))}\n          </View>\n          \n          {weeks.map((week, weekIndex) => (\n            <View key={`week-${weekIndex}`} style={styles.weekRow}>\n              {week.map((date, dateIndex) => {\n                const isCurrentMonth = date.getMonth() === previewMonth.getMonth();\n                const isRecurring = recurringDates.has(date.getTime());\n                \n                return (\n                  <View\n                    key={`date-${weekIndex}-${dateIndex}`}\n                    style={[\n                      styles.previewDateCell,\n                      !isCurrentMonth && styles.otherMonthDate,\n                      isRecurring && styles.recurringDate,\n                    ]}\n                  >\n                    <Text style={[\n                      styles.dateText,\n                      !isCurrentMonth && styles.otherMonthDateText,\n                      isRecurring && styles.recurringDateText,\n                    ]}>\n                      {date.getDate()}\n                    </Text>\n                  </View>\n                );\n              })}\n            </View>\n          ))}\n        </View>\n      );\n    };\n\n    return (\n      <Modal\n        visible={showRecurringPreview}\n        transparent={true}\n        animationType=\"fade\"\n        onRequestClose={() => setShowRecurringPreview(false)}\n      >\n        <View style={styles.modalOverlay}>\n          <View style={[styles.modalContent, styles.previewModalContent]}>\n            <Text style={styles.modalTitle}>Recurring Dates Preview</Text>\n            {renderPreviewCalendar()}\n            <TouchableOpacity\n              style={styles.modalCloseButton}\n              onPress={() => setShowRecurringPreview(false)}\n            >\n              <Text style={styles.modalCloseButtonText}>Close</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </Modal>\n    );\n  };\n\n  // Remove the useEffect for date validation since we're handling it directly in the handlers\n  useEffect(() => {\n    if (is_DEBUG) {\n      console.log('MBA19ynkiy34b Component mounted with:', {\n        selectedDates,\n        bookingType,\n        dateRangeType\n      });\n    }\n  }, []);\n\n  return (\n    <ScrollView style={styles.container}>\n      {/* TODO: Add back recurring options once implemented after MVP */}\n      {isOvernightForced || selectedBookingType === 'one-time' ? (\n        <View style={styles.oneTimeOptionsContainer}>\n          <Text style={[styles.dateSelectionTitle, { fontSize: screenWidth > 768 ? 24 : 18 }]}>\n            {isOvernightForced \n              ? \"Select a date range\" \n              : \"Select one or more dates\"}\n          </Text>\n          \n          {renderCalendar()}\n          {renderSelectedDates()}\n        </View>\n      ) : renderRecurringOptions()}\n      \n      <RecurringCalendarPreview />\n    </ScrollView>\n  );\n};\n\nconst { width, height } = Dimensions.get('window');\nconst maxCalendarHeight = height * 0.4;\nconst isDesktopView = width > 480;\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n    padding: 12,\n    minHeight: isDesktopView ? 600 : 'auto',\n  },\n  bookingTypeContainer: {\n    flexDirection: 'row',\n    marginBottom: 12,\n    borderRadius: 8,\n    overflow: 'hidden',\n  },\n  bookingTypeButton: {\n    flex: 1,\n    paddingVertical: 12,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#e8e8e8', // Light gray for inactive buttons\n  },\n  selectedBookingTypeButton: {\n    backgroundColor: theme.colors.mainColors.main,\n  },\n  bookingTypeText: {\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n    color: theme.colors.text,\n  },\n  selectedBookingTypeText: {\n    color: theme.colors.surface,\n    fontWeight: '600',\n  },\n  dateRangeTypeContainer: {\n    flexDirection: 'row',\n    marginBottom: 12,\n    borderRadius: 8,\n    overflow: 'hidden',\n  },\n  dateRangeTypeButton: {\n    flex: 1,\n    paddingVertical: 12,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#e8e8e8', // Light gray for inactive buttons\n  },\n  selectedDateRangeTypeButton: {\n    backgroundColor: theme.colors.mainColors.main,\n  },\n  dateRangeTypeText: {\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n    color: theme.colors.text,\n  },\n  selectedDateRangeTypeText: {\n    color: theme.colors.surface,\n    fontWeight: '600',\n  },\n  calendarContainer: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    padding: 12,\n    marginBottom: 12,\n    maxHeight: isDesktopView ? (width > 700 ? 600 : 500) : maxCalendarHeight,\n    overflow: 'visible',\n    minHeight: isDesktopView ? (width > 700 ? 500 : 400) : 350,\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  calendarHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  calendarTitle: {\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n    color: theme.colors.text,\n  },\n  calendarNavButton: {\n    padding: 6,\n  },\n  calendarNavButtonText: {\n    fontSize: 18,\n    color: theme.colors.text,\n  },\n  weekdaysContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: isDesktopView ? 8 : 4,\n    paddingHorizontal: 4,\n  },\n  weekdayText: {\n    flex: 1,\n    textAlign: 'center',\n    fontSize: 12,\n    color: theme.colors.text,\n    opacity: 0.7,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  weekRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: isDesktopView ? 12 : 4,\n    minHeight: isDesktopView ? (width > 700 ? 70 : 50) : 40,\n    flex: 1,\n    paddingHorizontal: 4,\n  },\n  dateCell: {\n    flex: 1,\n    aspectRatio: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: 4,\n    padding: isDesktopView ? 4 : 2,\n    minHeight: isDesktopView ? (width > 700 ? 60 : 40) : 'auto',\n  },\n  dateText: {\n    fontSize: isDesktopView ? (width > 700 ? 16 : 14) : 14,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  otherMonthDate: {\n    opacity: 0.3,\n  },\n  otherMonthDateText: {\n    color: theme.colors.placeHolderText,\n  },\n  selectedDate: {\n    backgroundColor: theme.colors.mainColors.main,\n  },\n  dateInRange: {\n    backgroundColor: `${theme.colors.mainColors.main}80`, // 50% opacity\n  },\n  selectedDateText: {\n    color: theme.colors.surface,\n    fontWeight: '600',\n  },\n  selectedDatesContainer: {\n    marginTop: 12,\n  },\n  selectedDatesTitle: {\n    fontSize: 14,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n    marginBottom: 6,\n    color: theme.colors.text,\n  },\n  selectedDatesList: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 6,\n  },\n  selectedDateChip: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.backgroundContrast,\n    borderRadius: 16,\n    paddingVertical: 6,\n    paddingLeft: 10,\n    paddingRight: 6,\n    marginRight: 6,\n    marginBottom: 6,\n  },\n  selectedDateChipText: {\n    color: theme.colors.mainColors.main,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontSize: 12,\n    marginRight: 2,\n  },\n  removeButton: {\n    marginLeft: 4,\n    padding: 2,\n  },\n  removeButtonText: {\n    fontSize: 16,\n    color: theme.colors.mainColors.main,\n    fontWeight: 'bold',\n  },\n  dateRangeText: {\n    fontSize: 14,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginBottom: 8,\n  },\n  recurringOptionsContainer: {\n    marginTop: 8,\n  },\n  sectionTitle: {\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n    marginBottom: 8,\n    color: theme.colors.text,\n  },\n  daysOfWeekContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 16,\n  },\n  dayOfWeekButton: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#e8e8e8', // Light gray for inactive buttons\n  },\n  selectedDayOfWeekButton: {\n    backgroundColor: theme.colors.mainColors.main,\n  },\n  dayOfWeekText: {\n    fontSize: 14,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  selectedDayOfWeekText: {\n    color: theme.colors.surface,\n    fontWeight: '600',\n  },\n  dateRangeSection: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    padding: 12,\n    marginBottom: 16,\n    borderWidth: 1,\n    borderColor: theme.colors.modernBorder,\n  },\n  dateRangeRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n  },\n  dateRangeColumn: {\n    flex: 1,\n    backgroundColor: theme.colors.surface,\n    padding: 8,\n    borderRadius: 8,\n    // borderWidth: 1,\n    // borderColor: theme.colors.modernBorder,\n  },\n  dateRangeLabel: {\n    fontSize: 14,\n    color: theme.colors.text,\n    opacity: 0.7,\n    marginBottom: 4,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  dateRangeValue: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n  },\n  frequencyContainer: {\n    flexDirection: 'row',\n    marginBottom: 16,\n  },\n  frequencyButton: {\n    flex: 1,\n    paddingVertical: 10,\n    paddingHorizontal: 8,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: '#e8e8e8', // Light gray for inactive buttons\n    borderRadius: 8,\n    marginRight: 8,\n  },\n  selectedFrequencyButton: {\n    backgroundColor: theme.colors.mainColors.main,\n  },\n  frequencyText: {\n    fontSize: 14,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  selectedFrequencyText: {\n    color: theme.colors.surface,\n    fontWeight: '600',\n  },\n  recurrencePatternContainer: {\n    backgroundColor: theme.colors.backgroundContrast,\n    borderRadius: 8,\n    padding: 12,\n    marginBottom: 16,\n  },\n  recurrencePatternTitle: {\n    fontSize: 14,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n    marginBottom: 4,\n    color: theme.colors.text,\n  },\n  recurrencePatternText: {\n    fontSize: 14,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginBottom: 2,\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 12,\n    padding: 16,\n    width: '90%',\n    maxWidth: 400,\n  },\n  modalTitle: {\n    fontSize: 18,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n    marginBottom: 16,\n    textAlign: 'center',\n    color: theme.colors.text,\n  },\n  modalCloseButton: {\n    marginTop: 16,\n    paddingVertical: 12,\n    alignItems: 'center',\n    backgroundColor: theme.colors.backgroundContrast,\n    borderRadius: 8,\n  },\n  modalCloseButtonText: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  previewButton: {\n    marginTop: 8,\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    backgroundColor: theme.colors.mainColors.main,\n    borderRadius: 8,\n    alignSelf: 'flex-start',\n  },\n  previewButtonText: {\n    color: theme.colors.surface,\n    fontSize: 14,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  previewModalContent: {\n    maxHeight: '80%',\n  },\n  previewCalendarContainer: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    padding: 12,\n    marginVertical: 16,\n  },\n  recurringDate: {\n    backgroundColor: theme.colors.mainColors.main,\n  },\n  recurringDateText: {\n    color: theme.colors.surface,\n    fontWeight: '600',\n  },\n  previewDateCell: {\n    flex: 1,\n    aspectRatio: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderRadius: 4,\n    padding: 2,\n  },\n  dateRangeChip: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    backgroundColor: theme.colors.backgroundContrast,\n    borderRadius: 16,\n    paddingVertical: 8,\n    paddingLeft: 12,\n    paddingRight: 8,\n  },\n  removeRangeButton: {\n    marginLeft: 8,\n    padding: 4,\n  },\n  selectedDateChip: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.backgroundContrast,\n    borderRadius: 16,\n    paddingVertical: 6,\n    paddingLeft: 10,\n    paddingRight: 6,\n    marginRight: 6,\n    marginBottom: 6,\n  },\n  removeButton: {\n    marginLeft: 4,\n    padding: 2,\n  },\n  removeButtonText: {\n    fontSize: 16,\n    color: theme.colors.mainColors.main,\n    fontWeight: 'bold',\n  },\n  oneTimeOptionsContainer: {\n    marginTop: 8,\n  },\n  dateSelectionTitle: {\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n    marginBottom: 16,\n    paddingHorizontal: 4,\n  },\n});\n\nexport default DateSelectionCard; ","import React, { useState, useEffect, useRef } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, ScrollView, Alert } from 'react-native';\nimport { MaterialIcons } from '@expo/vector-icons';\nimport { theme } from '../../styles/theme';\nimport { debugLog } from '../../context/AuthContext';\n\nconst HOURS = Array.from({ length: 12 }, (_, i) => i === 0 ? 12 : i);\nconst MINUTES = Array.from({ length: 60 }, (_, i) => i).filter(m => m % 5 === 0);\nconst PERIODS = ['AM', 'PM'];\n\nconst TimePickerDropdown = ({\n  initialTime,\n  onTimeSelect,\n  isOpen,\n  onClose,\n  label = 'Time',\n  uniqueId = 'default',\n  showInlinePicker = false\n}) => {\n  // Create references for scrolling to right position\n  const hourScrollRef = useRef(null);\n  const minuteScrollRef = useRef(null);\n  const periodScrollRef = useRef(null);\n  \n  // Need to deep copy initialTime to prevent reference issues\n  const initTime = JSON.parse(JSON.stringify(initialTime || { hours: 9, minutes: 0 }));\n  \n  // Convert 24h to 12h format for UI\n  const init12Hour = () => {\n    const hours24 = initTime.hours;\n    \n    // Find the closest 5-minute interval\n    const minute = Math.round(initTime.minutes / 5) * 5;\n    \n    return {\n      hour: hours24 % 12 === 0 ? 12 : hours24 % 12,\n      minute: minute >= 60 ? 0 : minute, // Handle case where rounding gives 60\n      period: hours24 >= 12 ? 'PM' : 'AM'\n    };\n  };\n  \n  // State for the selected time\n  const [selectedTime, setSelectedTime] = useState(init12Hour());\n  \n  // Keep track of the last confirmed time\n  const [lastConfirmedTime, setLastConfirmedTime] = useState(init12Hour());\n  \n  // Add error state\n  const [timeError, setTimeError] = useState(null);\n  \n  // Reset the selected time when the initial time changes\n  useEffect(() => {\n    if (initialTime) {\n      const newTime = init12Hour();\n      setSelectedTime(newTime);\n      setLastConfirmedTime(newTime);\n      setTimeError(null);\n    }\n  }, [initialTime?.hours, initialTime?.minutes]);\n  \n  // Clear error after 5 seconds\n  useEffect(() => {\n    if (timeError) {\n      const timer = setTimeout(() => {\n        setTimeError(null);\n      }, 5000);\n      \n      return () => clearTimeout(timer);\n    }\n  }, [timeError]);\n  \n  // Scroll to the right positions when the picker is opened\n  useEffect(() => {\n    if (isOpen) {\n      setTimeout(() => {\n        scrollToSelections();\n      }, 50);\n    }\n  }, [isOpen, selectedTime]);\n\n  // Function to handle hour selection\n  const handleHourSelect = (hour) => {\n    setSelectedTime(prev => ({ ...prev, hour }));\n    setTimeError(null);\n  };\n\n  // Function to handle minute selection\n  const handleMinuteSelect = (minute) => {\n    setSelectedTime(prev => ({ ...prev, minute }));\n    setTimeError(null);\n  };\n\n  // Function to handle AM/PM selection\n  const handlePeriodSelect = (period) => {\n    setSelectedTime(prev => ({ ...prev, period }));\n    setTimeError(null);\n  };\n\n  // Convert 12h time to 24h and call the onTimeSelect callback\n  const triggerTimeChange = (time12h) => {\n    const { hour, minute, period } = time12h;\n    \n    // Convert to 24-hour format\n    let hours24 = hour;\n    if (period === 'PM' && hour !== 12) hours24 += 12;\n    if (period === 'AM' && hour === 12) hours24 = 0;\n    \n    const newTime = {\n      hours: hours24,\n      minutes: minute\n    };\n    \n    debugLog(`MBAoi9uv43d: TimePickerDropdown selected time (${uniqueId}):`, {\n      time12h, \n      time24h: newTime\n    });\n    \n    // Update the last confirmed time\n    setLastConfirmedTime(time12h);\n    \n    // Pass the new time up to the parent component\n    const isValid = onTimeSelect(newTime);\n    \n    // If time validation failed (parent returned false), show an error\n    if (isValid === false) {\n      // Show error alert\n      Alert.alert(\n        \"Invalid Time Selection\", \n        uniqueId.includes('start') ? \n          \"Start time cannot be later than end time.\" :\n          \"End time cannot be earlier than start time.\",\n        [{ text: \"OK\" }]\n      );\n      \n      // Set error message for visual indicator\n      setTimeError(uniqueId.includes('start') ? \n        \"Start time cannot be later than end time.\" :\n        \"End time cannot be earlier than start time.\"\n      );\n      \n      return false;\n    }\n    \n    // Only close the picker if validation passed\n    onClose();\n    return true;\n  };\n\n  // Handle confirm button press\n  const handleConfirm = () => {\n    triggerTimeChange(selectedTime);\n  };\n  \n  // Handle cancel button press\n  const handleCancel = () => {\n    // Reset the selected time to the last confirmed time\n    setSelectedTime(lastConfirmedTime);\n    setTimeError(null);\n    onClose();\n  };\n\n  // Scroll to the selected values\n  const scrollToSelections = () => {\n    if (hourScrollRef.current) {\n      const hourIndex = HOURS.indexOf(selectedTime.hour);\n      const hourOffset = hourIndex * 40;\n      hourScrollRef.current.scrollTo({ y: Math.max(0, hourOffset - 40), animated: true });\n    }\n    \n    if (minuteScrollRef.current) {\n      const minuteIndex = MINUTES.indexOf(selectedTime.minute);\n      const minuteOffset = minuteIndex * 40;\n      minuteScrollRef.current.scrollTo({ y: Math.max(0, minuteOffset - 40), animated: true });\n    }\n    \n    if (periodScrollRef.current) {\n      const periodIndex = PERIODS.indexOf(selectedTime.period);\n      const periodOffset = periodIndex * 40;\n      periodScrollRef.current.scrollTo({ y: Math.max(0, periodOffset - 20), animated: true });\n    }\n  };\n\n  // Format the time for display\n  const formatTimeDisplay = (hour, minute, period) => {\n    return `${hour}:${minute.toString().padStart(2, '0')} ${period}`;\n  };\n\n  // Render the dropdown content\n  const renderDropdownContent = () => (\n    <View>\n      <View style={styles.dropdownContent}>\n        {/* Hours */}\n        <ScrollView \n          ref={hourScrollRef} \n          style={styles.column}\n          showsVerticalScrollIndicator={false}\n        >\n          {HOURS.map((hour) => (\n            <TouchableOpacity\n              key={`hour-${hour}`}\n              style={[\n                styles.option,\n                selectedTime.hour === hour && styles.selectedOption\n              ]}\n              onPress={() => handleHourSelect(hour)}\n            >\n              <Text style={[\n                styles.optionText,\n                selectedTime.hour === hour && styles.selectedOptionText\n              ]}>\n                {hour}\n              </Text>\n            </TouchableOpacity>\n          ))}\n        </ScrollView>\n        \n        {/* Minutes */}\n        <ScrollView \n          ref={minuteScrollRef} \n          style={styles.column}\n          showsVerticalScrollIndicator={false}\n        >\n          {MINUTES.map((minute) => (\n            <TouchableOpacity\n              key={`minute-${minute}`}\n              style={[\n                styles.option,\n                selectedTime.minute === minute && styles.selectedOption\n              ]}\n              onPress={() => handleMinuteSelect(minute)}\n            >\n              <Text style={[\n                styles.optionText,\n                selectedTime.minute === minute && styles.selectedOptionText\n              ]}>\n                {minute.toString().padStart(2, '0')}\n              </Text>\n            </TouchableOpacity>\n          ))}\n        </ScrollView>\n        \n        {/* AM/PM */}\n        <ScrollView \n          ref={periodScrollRef} \n          style={styles.column}\n          showsVerticalScrollIndicator={false}\n        >\n          {PERIODS.map((period) => (\n            <TouchableOpacity\n              key={`period-${period}`}\n              style={[\n                styles.option,\n                selectedTime.period === period && styles.selectedOption\n              ]}\n              onPress={() => handlePeriodSelect(period)}\n            >\n              <Text style={[\n                styles.optionText,\n                selectedTime.period === period && styles.selectedOptionText\n              ]}>\n                {period}\n              </Text>\n            </TouchableOpacity>\n          ))}\n        </ScrollView>\n      </View>\n      \n      {/* Error message */}\n      {timeError && (\n        <View style={styles.errorContainer}>\n          <MaterialIcons name=\"error\" size={16} color={theme.colors.error || '#D32F2F'} />\n          <Text style={styles.errorText}>{timeError}</Text>\n        </View>\n      )}\n      \n      {/* Buttons row */}\n      <View style={styles.buttonRow}>\n        <TouchableOpacity \n          style={[styles.button, styles.cancelButton]}\n          onPress={handleCancel}\n        >\n          <Text style={styles.cancelButtonText}>Cancel</Text>\n        </TouchableOpacity>\n        <TouchableOpacity \n          style={[styles.button, styles.confirmButton]}\n          onPress={handleConfirm}\n        >\n          <Text style={styles.confirmButtonText}>Confirm</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n\n  // For inline mode (shown directly in the UI)\n  if (showInlinePicker) {\n    return (\n      <View style={styles.inlineContainer}>\n        {label && <Text style={styles.label}>{label}</Text>}\n        {renderDropdownContent()}\n      </View>\n    );\n  }\n\n  // For dropdown mode (shown when button is clicked)\n  return (\n    <>\n      <TouchableOpacity\n        style={styles.timeDisplay}\n        onPress={isOpen ? onClose : () => {}}\n      >\n        <MaterialIcons name=\"access-time\" size={18} color={theme.colors.mainColors.main} />\n        <Text style={styles.timeText}>\n          {formatTimeDisplay(selectedTime.hour, selectedTime.minute, selectedTime.period)}\n        </Text>\n        <MaterialIcons \n          name={isOpen ? \"keyboard-arrow-up\" : \"keyboard-arrow-down\"} \n          size={20} \n          color={theme.colors.text} \n        />\n      </TouchableOpacity>\n      \n      {isOpen && (\n        <View style={styles.dropdownContainer}>\n          {renderDropdownContent()}\n        </View>\n      )}\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  timeDisplay: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    backgroundColor: theme.colors.surface,\n    padding: 10,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.modernBorder,\n    marginVertical: 5,\n  },\n  timeText: {\n    flex: 1,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontSize: theme.fontSizes.medium,\n    marginLeft: 8,\n  },\n  dropdownContainer: {\n    position: 'absolute',\n    top: '100%',\n    left: 0,\n    right: 0,\n    backgroundColor: theme.colors.background,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.modernBorder,\n    marginTop: 4,\n    zIndex: 1000,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  inlineContainer: {\n    backgroundColor: theme.colors.background,\n    borderRadius: 8,\n    padding: 4,\n  },\n  label: {\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontSize: theme.fontSizes.small,\n    marginBottom: 8,\n  },\n  dropdownContent: {\n    flexDirection: 'row',\n    padding: 4,\n  },\n  column: {\n    flex: 1,\n    height: 160,\n  },\n  option: {\n    padding: 8,\n    alignItems: 'center',\n    height: 40,\n    justifyContent: 'center',\n  },\n  selectedOption: {\n    backgroundColor: `${theme.colors.mainColors.main}20`,\n    borderRadius: 4,\n  },\n  optionText: {\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontSize: theme.fontSizes.medium,\n  },\n  selectedOptionText: {\n    color: theme.colors.mainColors.main,\n    fontWeight: '600',\n  },\n  buttonRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 8,\n    paddingHorizontal: 4,\n  },\n  button: {\n    paddingVertical: 8,\n    paddingHorizontal: 16,\n    borderRadius: 6,\n    flex: 1,\n    marginHorizontal: 4,\n    alignItems: 'center',\n  },\n  confirmButton: {\n    backgroundColor: theme.colors.mainColors.main,\n  },\n  cancelButton: {\n    backgroundColor: theme.colors.modernBorder,\n  },\n  confirmButtonText: {\n    color: 'white',\n    fontFamily: theme.fonts.medium.fontFamily,\n    fontSize: theme.fontSizes.small,\n  },\n  cancelButtonText: {\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontSize: theme.fontSizes.small,\n  },\n  errorContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#FFEBEE',\n    padding: 8,\n    marginHorizontal: 4,\n    marginTop: 4,\n    borderRadius: 4,\n  },\n  errorText: {\n    color: theme.colors.error || '#D32F2F',\n    fontSize: theme.fontSizes.small,\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginLeft: 4,\n    flex: 1,\n  }\n});\n\nexport default TimePickerDropdown; ","import React, { useState, useEffect, useContext, useRef } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, TouchableWithoutFeedback, Modal } from 'react-native';\nimport { MaterialIcons } from '@expo/vector-icons';\nimport { theme } from '../../styles/theme';\nimport { AuthContext, debugLog } from '../../context/AuthContext';\nimport TimePickerDropdown from './TimePickerDropdown';\n\nconst NewTimeRangeSelector = ({\n  title,\n  onTimeSelect,\n  initialTimes = {},\n  is_overnight = false,\n  uniqueId = 'default',\n  dateRange = null,\n  selectedDates = [],\n  isIndividualDaySelector = false,\n}) => {\n  const { is_DEBUG } = useContext(AuthContext);\n  \n  // Create local state with deep copies to prevent reference issues\n  const [times, setTimes] = useState(() => {\n    const defaultTimes = {\n      startTime: { hours: 9, minutes: 0 },\n      endTime: { hours: 17, minutes: 0 },\n      isOvernightForced: initialTimes?.isOvernightForced || is_overnight || false\n    };\n    \n    // Deep copy initialTimes if provided\n    if (initialTimes) {\n      return {\n        startTime: initialTimes.startTime ? JSON.parse(JSON.stringify(initialTimes.startTime)) : defaultTimes.startTime,\n        endTime: initialTimes.endTime ? JSON.parse(JSON.stringify(initialTimes.endTime)) : defaultTimes.endTime,\n        isOvernightForced: initialTimes.isOvernightForced || is_overnight || false\n      };\n    }\n    \n    return defaultTimes;\n  });\n  \n  // Track which time picker is currently open\n  const [activeTimePicker, setActiveTimePicker] = useState(null);\n  \n  // Update times when initialTimes prop changes\n  useEffect(() => {\n    if (!initialTimes) return;\n    \n    debugLog(`MBAoi9uv43d: NewTimeRangeSelector (${uniqueId}) initialTimes update:`, initialTimes);\n    \n    // Create deep copies of the times\n    const updatedTimes = {\n      startTime: initialTimes.startTime ? JSON.parse(JSON.stringify(initialTimes.startTime)) : times.startTime,\n      endTime: initialTimes.endTime ? JSON.parse(JSON.stringify(initialTimes.endTime)) : times.endTime,\n      isOvernightForced: initialTimes.isOvernightForced || is_overnight || times.isOvernightForced\n    };\n    \n    setTimes(updatedTimes);\n  }, [\n    initialTimes?.startTime?.hours, \n    initialTimes?.startTime?.minutes, \n    initialTimes?.endTime?.hours, \n    initialTimes?.endTime?.minutes,\n    initialTimes?.isOvernightForced,\n    is_overnight\n  ]);\n  \n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = () => {\n      if (activeTimePicker) {\n        setActiveTimePicker(null);\n      }\n    };\n\n    return () => {\n      // Clean up listeners\n    };\n  }, [activeTimePicker]);\n  \n  // Handle start time change\n  const handleStartTimeChange = (newTime) => {\n    // Validate that start time is not after end time\n    // End time could be 00:00 (midnight) which is treated as end of day\n    // So we need a special check for that case\n    const isEndTimeMidnight = times.endTime.hours === 0 && times.endTime.minutes === 0;\n    const startTotalMinutes = (newTime.hours * 60) + newTime.minutes;\n    const endTotalMinutes = (times.endTime.hours * 60) + times.endTime.minutes;\n    \n    // Check if the time combination is valid\n    // Allow if end time is midnight (special case) or if start time is before end time\n    if (!(isEndTimeMidnight || startTotalMinutes < endTotalMinutes)) {\n      debugLog(`MBAoi9uv43d: NewTimeRangeSelector (${uniqueId}) invalid start time - would be after end time:`, {\n        attemptedStart: newTime,\n        currentEnd: times.endTime,\n        startMinutes: startTotalMinutes,\n        endMinutes: endTotalMinutes\n      });\n      \n      // Return false to trigger error handling in TimePickerDropdown\n      return false;\n    }\n    \n    // Time is valid, proceed with the update\n    const newTimes = {\n      ...times,\n      startTime: JSON.parse(JSON.stringify(newTime))\n    };\n    \n    setTimes(newTimes);\n    onTimeSelect(newTimes);\n    \n    debugLog(`MBAoi9uv43d: NewTimeRangeSelector (${uniqueId}) startTime changed:`, {\n      newTime,\n      updatedTimes: newTimes\n    });\n    \n    return true;\n  };\n  \n  // Handle end time change\n  const handleEndTimeChange = (newTime) => {\n    // Special case: if new end time is midnight (00:00), always allow it\n    const isNewEndTimeMidnight = newTime.hours === 0 && newTime.minutes === 0;\n    \n    // For all other times, validate that end time is after start time\n    const startTotalMinutes = (times.startTime.hours * 60) + times.startTime.minutes;\n    const endTotalMinutes = (newTime.hours * 60) + newTime.minutes;\n    \n    // Check if the time combination is valid\n    // Allow if end time is midnight (special case) or if end time is after start time\n    if (!(isNewEndTimeMidnight || endTotalMinutes > startTotalMinutes)) {\n      debugLog(`MBAoi9uv43d: NewTimeRangeSelector (${uniqueId}) invalid end time - would be before start time:`, {\n        currentStart: times.startTime,\n        attemptedEnd: newTime,\n        startMinutes: startTotalMinutes,\n        endMinutes: endTotalMinutes\n      });\n      \n      // Return false to trigger error handling in TimePickerDropdown\n      return false;\n    }\n    \n    // Time is valid, proceed with the update\n    const newTimes = {\n      ...times,\n      endTime: JSON.parse(JSON.stringify(newTime))\n    };\n    \n    setTimes(newTimes);\n    onTimeSelect(newTimes);\n    \n    debugLog(`MBAoi9uv43d: NewTimeRangeSelector (${uniqueId}) endTime changed:`, {\n      newTime,\n      updatedTimes: newTimes\n    });\n    \n    return true;\n  };\n  \n  // Format time for display (12-hour format)\n  const formatTimeDisplay = (time) => {\n    if (!time) return '';\n    \n    // Ensure time object has valid hours and minutes\n    const hours = typeof time.hours === 'number' ? time.hours : 0;\n    const minutes = typeof time.minutes === 'number' ? time.minutes : 0;\n    \n    // Validate ranges\n    const validHours = Math.max(0, Math.min(23, hours));\n    const validMinutes = Math.max(0, Math.min(59, minutes));\n    \n    const period = validHours >= 12 ? 'PM' : 'AM';\n    const hours12 = validHours % 12 === 0 ? 12 : validHours % 12;\n    \n    return `${hours12}:${validMinutes.toString().padStart(2, '0')} ${period}`;\n  };\n  \n  // Format a date for display\n  const formatDate = (date) => {\n    if (!date) return '';\n    \n    try {\n      const dateObj = new Date(date);\n      return dateObj.toLocaleDateString('en-US', { \n        month: 'short', \n        day: 'numeric', \n        year: 'numeric' \n      });\n    } catch (error) {\n      debugLog(`MBAoi9uv43d: Error formatting date: ${error.message}`);\n      return '';\n    }\n  };\n  \n  // Calculate duration between start and end times\n  const calculateDuration = () => {\n    const { isOvernightForced } = times;\n    \n    // If overnight service and we have date range or selected dates, calculate nights from date range\n    if ((isOvernightForced || is_overnight) && (dateRange || (selectedDates && selectedDates.length > 0))) {\n      let startDate, endDate;\n      \n      if (dateRange && dateRange.startDate && dateRange.endDate) {\n        // If we have a date range, use it\n        startDate = new Date(dateRange.startDate);\n        endDate = new Date(dateRange.endDate);\n      } else if (selectedDates && selectedDates.length >= 2) {\n        // If we have selected dates array, use first and last date\n        // Sort dates to ensure correct order\n        const sortedDates = [...selectedDates].sort((a, b) => new Date(a) - new Date(b));\n        startDate = new Date(sortedDates[0]);\n        endDate = new Date(sortedDates[sortedDates.length - 1]);\n      } else if (selectedDates && selectedDates.length === 1) {\n        // If only one date selected, it's same day\n        return \"Same day\";\n      } else {\n        // Fallback if no date information\n        return \"1 night\";\n      }\n      \n      // Calculate nights between dates\n      const diffTime = Math.abs(endDate - startDate);\n      \n      // For date ranges, use correct date math (without time component)\n      // This ensures dates like May 14-16 (3 days) result in 2 nights, not 1 night\n      let diffDays;\n      \n      // Normalize dates to remove time component\n      const normalizedStartDate = new Date(startDate.getFullYear(), startDate.getMonth(), startDate.getDate());\n      const normalizedEndDate = new Date(endDate.getFullYear(), endDate.getMonth(), endDate.getDate());\n      \n      // Calculate the actual number of calendar days between the dates (inclusive)\n      diffDays = Math.round(Math.abs(normalizedEndDate - normalizedStartDate) / (1000 * 60 * 60 * 24)) + 1;\n      \n      // The number of nights is always one less than the number of days\n      const nights = diffDays > 1 ? diffDays - 1 : 0;\n      \n      if (nights === 0) {\n        return \"Same day\";\n      } else if (nights === 1) {\n        return \"1 night\";\n      } else {\n        return `${nights} nights`;\n      }\n    }\n    \n    // For regular (non-overnight) services or when no date range is available\n    const { startTime, endTime } = times;\n    \n    // Convert times to minutes\n    const startMinutes = (startTime.hours * 60) + startTime.minutes;\n    let endMinutes = (endTime.hours * 60) + endTime.minutes;\n    \n    // Special case: midnight (00:00) as end time is treated as end of day\n    if (endTime.hours === 0 && endTime.minutes === 0) {\n      endMinutes = 24 * 60; // End of day\n    }\n    \n    // Calculate duration in minutes\n    let durationMinutes = endMinutes - startMinutes;\n    \n    // If end time is earlier than start time and not midnight, add 24 hours\n    if (durationMinutes < 0 && !(endTime.hours === 0 && endTime.minutes === 0)) {\n      durationMinutes += 24 * 60;\n    }\n    \n    // Convert to hours and minutes\n    const hours = Math.floor(durationMinutes / 60);\n    const minutes = durationMinutes % 60;\n    \n    // Format the duration string\n    let durationStr = '';\n    if (hours > 0) {\n      durationStr += `${hours} hour${hours !== 1 ? 's' : ''}`;\n    }\n    if (minutes > 0) {\n      if (durationStr.length > 0) durationStr += ' ';\n      durationStr += `${minutes} minute${minutes !== 1 ? 's' : ''}`;\n    }\n    \n    return durationStr || '0 minutes';\n  };\n  \n  // Get start date for display\n  const getStartDate = () => {\n    if (dateRange && dateRange.startDate) {\n      return dateRange.startDate;\n    } else if (selectedDates && selectedDates.length > 0) {\n      const sortedDates = [...selectedDates].sort((a, b) => new Date(a) - new Date(b));\n      return sortedDates[0];\n    }\n    return null;\n  };\n  \n  // Get end date for display\n  const getEndDate = () => {\n    if (dateRange && dateRange.endDate) {\n      return dateRange.endDate;\n    } else if (selectedDates && selectedDates.length > 0) {\n      const sortedDates = [...selectedDates].sort((a, b) => new Date(a) - new Date(b));\n      return sortedDates[sortedDates.length - 1];\n    }\n    return null;\n  };\n  \n  const startDate = getStartDate();\n  const endDate = getEndDate();\n  \n  return (\n    <View style={styles.container}>\n      {title && <Text style={styles.title}>{title}</Text>}\n      \n      {/* Time selection UI with dates */}\n      <View style={styles.timeSelectionContainer}>\n        {/* Start time picker with date */}\n        <View style={styles.timePickerContainer}>\n          {startDate && (isIndividualDaySelector || times.isOvernightForced || is_overnight) ? (\n            <Text style={styles.dateLabel}>{formatDate(startDate)}</Text>\n          ) : (\n            <Text style={styles.dateLabel}>Applies to all individual days</Text>\n          )}\n          <Text style={styles.timeLabel}>Start Time</Text>\n          <TouchableOpacity\n            style={styles.timeButton}\n            onPress={() => setActiveTimePicker(activeTimePicker === 'start' ? null : 'start')}\n          >\n            <View style={styles.timeButtonContent}>\n              <MaterialIcons name=\"access-time\" size={18} color={theme.colors.mainColors.main} />\n              <Text style={styles.timeText}>\n                {formatTimeDisplay(times.startTime)}\n              </Text>\n              <MaterialIcons \n                name={activeTimePicker === 'start' ? \"keyboard-arrow-up\" : \"keyboard-arrow-down\"} \n                size={20} \n                color={theme.colors.text} \n              />\n            </View>\n          </TouchableOpacity>\n        </View>\n        \n        {/* End time picker with date */}\n        <View style={styles.timePickerContainer}>\n          {endDate && (isIndividualDaySelector || times.isOvernightForced || is_overnight) ? (\n            <Text style={styles.dateLabel}>{formatDate(endDate)}</Text>\n          ) : (\n            <Text style={styles.dateLabel}>Applies to all individual days</Text>\n          )}\n          <Text style={styles.timeLabel}>End Time</Text>\n          <TouchableOpacity\n            style={styles.timeButton}\n            onPress={() => setActiveTimePicker(activeTimePicker === 'end' ? null : 'end')}\n          >\n            <View style={styles.timeButtonContent}>\n              <MaterialIcons name=\"access-time\" size={18} color={theme.colors.mainColors.main} />\n              <Text style={styles.timeText}>\n                {formatTimeDisplay(times.endTime)}\n              </Text>\n              <MaterialIcons \n                name={activeTimePicker === 'end' ? \"keyboard-arrow-up\" : \"keyboard-arrow-down\"} \n                size={20} \n                color={theme.colors.text} \n              />\n            </View>\n          </TouchableOpacity>\n        </View>\n      </View>\n      \n      {/* Duration display */}\n      <View style={styles.durationContainer}>\n        <MaterialIcons name=\"timelapse\" size={18} color={theme.colors.mainColors.main} />\n        <Text style={styles.durationText}>Duration: {calculateDuration()}</Text>\n      </View>\n      \n      {/* Modal for handling outside click to close the dropdowns */}\n      {activeTimePicker && (\n        <Modal\n          transparent={true}\n          animationType=\"none\"\n          visible={!!activeTimePicker}\n          onRequestClose={() => setActiveTimePicker(null)}\n        >\n          <TouchableWithoutFeedback onPress={() => setActiveTimePicker(null)}>\n            <View style={styles.modalOverlay}>\n              <TouchableWithoutFeedback>\n                <View style={[\n                  styles.modalContent,\n                  activeTimePicker === 'start' ? styles.startModalContent : styles.endModalContent\n                ]}>\n                  <TimePickerDropdown\n                    initialTime={activeTimePicker === 'start' ? times.startTime : times.endTime}\n                    onTimeSelect={activeTimePicker === 'start' ? handleStartTimeChange : handleEndTimeChange}\n                    isOpen={true}\n                    onClose={() => setActiveTimePicker(null)}\n                    uniqueId={`${uniqueId}-${activeTimePicker}`}\n                    showInlinePicker={true}\n                  />\n                </View>\n              </TouchableWithoutFeedback>\n            </View>\n          </TouchableWithoutFeedback>\n        </Modal>\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: theme.colors.background,\n    borderRadius: 8,\n    padding: 16,\n    marginBottom: 16,\n  },\n  title: {\n    fontSize: theme.fontSizes.medium,\n    fontFamily: theme.fonts.medium.fontFamily,\n    color: theme.colors.text,\n    marginBottom: 16,\n  },\n  timeSelectionContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 16,\n  },\n  timePickerContainer: {\n    flex: 1,\n    marginHorizontal: 4,\n    position: 'relative',\n    zIndex: 10,\n  },\n  dateLabel: {\n    fontSize: theme.fontSizes.small,\n    fontFamily: theme.fonts.medium.fontFamily,\n    color: theme.colors.textSecondary,\n    marginBottom: 4,\n  },\n  timeLabel: {\n    fontSize: theme.fontSizes.smallMedium,\n    fontFamily: theme.fonts.regular.fontFamily,\n    color: theme.colors.text,\n    marginBottom: 8,\n  },\n  timeButton: {\n    borderWidth: 1,\n    borderColor: theme.colors.modernBorder,\n    borderRadius: 8,\n    backgroundColor: theme.colors.surface,\n    position: 'relative',\n  },\n  timeButtonContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 12,\n  },\n  timeText: {\n    flex: 1,\n    fontSize: theme.fontSizes.medium,\n    fontFamily: theme.fonts.regular.fontFamily,\n    color: theme.colors.text,\n    marginLeft: 8,\n  },\n  durationContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginTop: 4,\n    padding: 12,\n    backgroundColor: theme.colors.bgColorModern,\n    borderRadius: 8,\n  },\n  durationText: {\n    fontSize: theme.fontSizes.medium,\n    fontFamily: theme.fonts.regular.fontFamily,\n    color: theme.colors.text,\n    marginLeft: 8,\n  },\n  // Modal styling for outside click handling\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    backgroundColor: theme.colors.background,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.modernBorder,\n    width: '80%',\n    padding: 8,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.2,\n    shadowRadius: 4,\n    elevation: 5,\n  },\n  startModalContent: {\n    alignSelf: 'flex-start',\n    marginLeft: '10%',\n  },\n  endModalContent: {\n    alignSelf: 'flex-end',\n    marginRight: '10%',\n  }\n});\n\nexport default NewTimeRangeSelector; ","import React, { useState, useEffect, useContext } from 'react';\nimport { View, Text, StyleSheet } from 'react-native';\nimport { theme } from '../../styles/theme';\nimport { AuthContext, debugLog } from '../../context/AuthContext';\nimport NewTimeRangeSelector from './NewTimeRangeSelector';\n\nconst DayTimeSelector = ({\n  date,\n  initialTimes = {},\n  onTimeChange,\n  is_overnight = false\n}) => {\n  const { is_DEBUG } = useContext(AuthContext);\n  \n  // Format the date for display\n  const formatDate = (date) => {\n    if (!date) return '';\n    \n    // Create a copy to prevent timezone issues\n    const dateObj = new Date(date);\n    const options = { weekday: 'short', month: 'short', day: 'numeric' };\n    return dateObj.toLocaleDateString('en-US', options);\n  };\n  \n  // Generate a unique ID for this date's time selector\n  const generateUniqueId = () => {\n    if (!date) return 'day-unknown';\n    \n    try {\n      // If date is a Date object, convert to ISO string and extract date part\n      if (date instanceof Date) {\n        return `day-${date.toISOString().split('T')[0]}`;\n      }\n      \n      // If date is already in YYYY-MM-DD format\n      if (typeof date === 'string' && date.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n        return `day-${date}`;\n      }\n      \n      // If date is in another format, try to convert it\n      const parsedDate = new Date(date);\n      if (!isNaN(parsedDate.getTime())) {\n        return `day-${parsedDate.toISOString().split('T')[0]}`;\n      }\n      \n      // Fallback\n      return `day-unknown-${Date.now()}`;\n    } catch (error) {\n      debugLog('MBAoi9uv43d: Error generating unique ID for date:', error);\n      return `day-unknown-${Date.now()}`;\n    }\n  };\n  \n  // Generate a stable date key for API\n  const generateDateKey = () => {\n    if (!date) return null;\n    \n    try {\n      // If date is a Date object, convert to YYYY-MM-DD\n      if (date instanceof Date) {\n        return date.toISOString().split('T')[0];\n      }\n      \n      // If date is already in YYYY-MM-DD format\n      if (typeof date === 'string' && date.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n        return date;\n      }\n      \n      // If date is in another format, try to convert it\n      const parsedDate = new Date(date);\n      if (!isNaN(parsedDate.getTime())) {\n        return parsedDate.toISOString().split('T')[0];\n      }\n      \n      // Couldn't parse date\n      debugLog('MBAoi9uv43d: Could not parse date:', date);\n      return null;\n    } catch (error) {\n      debugLog('MBAoi9uv43d: Error generating date key:', error);\n      return null;\n    }\n  };\n  \n  // Generate stable IDs\n  const uniqueId = generateUniqueId();\n  const dateKey = generateDateKey();\n  \n  // Handle time selection from the time range selector\n  const handleTimeSelect = (timesData) => {\n    if (!dateKey) {\n      debugLog('MBAoi9uv43d: Cannot handle time selection - invalid date key');\n      return;\n    }\n    \n    // Create a completely new times object to avoid reference issues\n    const newTimes = JSON.parse(JSON.stringify(timesData));\n    \n    debugLog(`MBAoi9uv43d: DayTimeSelector (${uniqueId}) time changed:`, {\n      dateKey,\n      timesData: newTimes\n    });\n    \n    // Pass the time data up to the parent component\n    onTimeChange(newTimes, dateKey);\n  };\n  \n  return (\n    <View style={styles.container}>\n      <Text style={styles.dateLabel}>{formatDate(date)}</Text>\n      \n      <NewTimeRangeSelector\n        onTimeSelect={handleTimeSelect}\n        initialTimes={initialTimes}\n        is_overnight={is_overnight}\n        uniqueId={uniqueId}\n        selectedDates={[date]}\n        isIndividualDaySelector={true}\n      />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    marginBottom: 16,\n    borderWidth: 1,\n    borderColor: theme.colors.modernBorder,\n    borderRadius: 8,\n    backgroundColor: theme.colors.surface,\n    overflow: 'visible',\n  },\n  dateLabel: {\n    fontSize: theme.fontSizes.medium,\n    fontFamily: theme.fonts.medium.fontFamily,\n    color: theme.colors.text,\n    backgroundColor: theme.colors.bgColorModern,\n    padding: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.modernBorder,\n  }\n});\n\nexport default DayTimeSelector; ","import React, { useState, useContext, useEffect, useRef } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, ScrollView, TouchableWithoutFeedback } from 'react-native';\nimport { MaterialIcons } from '@expo/vector-icons';\nimport { theme } from '../../styles/theme';\nimport NewTimeRangeSelector from './NewTimeRangeSelector';\nimport { AuthContext, debugLog } from '../../context/AuthContext';\nimport DayTimeSelector from './DayTimeSelector';\nimport { formatDateOnly, getUTCTimeString } from '../../utils/time_utils';\n\n// Helper function to parse time values from various formats\nconst parseTimeValue = (timeValue) => {\n  if (!timeValue) return null;\n  \n  // Handle string format 'HH:MM'\n  if (typeof timeValue === 'string' && timeValue.includes(':')) {\n    const [hours, minutes] = timeValue.split(':').map(part => parseInt(part, 10));\n    return { hours, minutes };\n  }\n  \n  // Handle object format directly\n  if (typeof timeValue === 'object' && timeValue !== null) {\n    // If it has hours/minutes properties directly\n    if (timeValue.hours !== undefined || timeValue.minutes !== undefined) {\n      return {\n        hours: timeValue.hours || 0,\n        minutes: timeValue.minutes || 0\n      };\n    }\n  }\n  \n  // Default fallback\n  return null;\n};\n\nconst TimeSelectionCard = ({ \n  onTimeSelect,\n  initialTimes = {},\n  dateRange = null,\n  selectedService = null,\n  isOvernightForced = false\n}) => {\n  const { is_DEBUG } = useContext(AuthContext);\n  \n  // Initialize showIndividualDays based on initialTimes.hasIndividualTimes\n  const [showIndividualDays, setShowIndividualDays] = useState(() => {\n    // For overnight services, never show individual days\n    if (selectedService?.is_overnight || isOvernightForced) {\n      return false;\n    }\n    \n    const shouldShowIndividual = initialTimes && initialTimes.hasIndividualTimes === true;\n    debugLog('MBAoi9uv43d: Initial showIndividualDays value:', shouldShowIndividual);\n    return shouldShowIndividual;\n  });\n  \n  const [individualTimeRanges, setIndividualTimeRanges] = useState({});\n  const [times, setTimes] = useState(() => {\n    // Safely initialize with default values if initialTimes is not properly formatted\n    try {\n      if (!initialTimes || typeof initialTimes !== 'object') {\n        debugLog('MBAoi9uv43d: Invalid initialTimes, using defaults:', initialTimes);\n        return {\n          startTime: { hours: 9, minutes: 0 },\n          endTime: { hours: 17, minutes: 0 },\n          isOvernightForced: false\n        };\n      }\n      return initialTimes;\n    } catch (error) {\n      debugLog('MBAoi9uv43d: Error initializing times:', error);\n      return {\n        startTime: { hours: 9, minutes: 0 },\n        endTime: { hours: 17, minutes: 0 },\n        isOvernightForced: false\n      };\n    }\n  });\n  \n  // Use a ref to track if this is the initial render\n  const isInitialRender = useRef(true);\n  \n  useEffect(() => {\n    debugLog('MBAoi9uv43d: TimeSelectionCard received initialTimes:', initialTimes);\n    \n    // Safely initialize with default values if initialTimes is not properly formatted\n    try {\n      if (!initialTimes || typeof initialTimes !== 'object') {\n        const defaultTimes = {\n          startTime: { hours: 9, minutes: 0 },\n          endTime: { hours: 17, minutes: 0 },\n          isOvernightForced: selectedService?.is_overnight || isOvernightForced || false\n        };\n        debugLog('MBAoi9uv43d: Using default times:', defaultTimes);\n        setTimes(defaultTimes);\n        setShowIndividualDays(false);\n        return;\n      }\n      \n      // Extract the hasIndividualTimes flag early\n      const hasIndividualTimesFlag = initialTimes.hasIndividualTimes === true;\n      debugLog('MBAoi9uv43d: hasIndividualTimes flag is', hasIndividualTimesFlag);\n      \n      // Only set the showIndividualDays based on initialTimes on the initial render\n      // This prevents it from overriding user's toggle action\n      if (isInitialRender.current) {\n        debugLog('MBAoi9uv43d: Initial render - setting showIndividualDays to', hasIndividualTimesFlag);\n        setShowIndividualDays(hasIndividualTimesFlag);\n        isInitialRender.current = false;\n      } else {\n        debugLog('MBAoi9uv43d: Not initial render - preserving showIndividualDays state');\n      }\n      \n      // Get formatted start time\n      const startTimeValue = parseTimeValue(initialTimes.startTime);\n      const endTimeValue = parseTimeValue(initialTimes.endTime);\n      \n      const formattedTimes = {\n        startTime: startTimeValue || { hours: 9, minutes: 0 },\n        endTime: endTimeValue || { hours: 17, minutes: 0 },\n        // CRITICAL FIX: prioritize selectedService.is_overnight over previous state\n        isOvernightForced: selectedService?.is_overnight || isOvernightForced || false\n      };\n      \n      debugLog('MBAoi9uv43d: CRITICAL FIX - Setting formatted times:', {\n        formattedTimes,\n        selectedServiceIsOvernight: selectedService?.is_overnight,\n        isOvernightForcedProp: isOvernightForced,\n        initialTimesIsOvernightForced: initialTimes.isOvernightForced,\n        message: 'isOvernightForced now prioritizes current service over previous state'\n      });\n      setTimes(formattedTimes);\n      \n      // Check if initialTimes already has individual times or if we have dates from draft\n      const hasDatesInDraft = initialTimes && Object.keys(initialTimes).some(key => key.match(/^\\d{4}-\\d{2}-\\d{2}$/));\n      \n      debugLog('MBAoi9uv43d: Time selection setup:', { \n        hasDatesInDraft,\n        hasIndividualTimesFlag,\n        hasDateRange: !!(dateRange && dateRange.startDate && dateRange.endDate),\n        hasDates: !!(initialTimes && initialTimes.dates && initialTimes.dates.length > 0)\n      });\n      \n      // Initialize individual time ranges if we have a date range or dates in draft\n      if ((dateRange && dateRange.startDate && dateRange.endDate) || hasDatesInDraft) {\n        const newTimeRanges = {};\n        \n        // If we have a dateRange, populate default times for all dates in the range\n        if (dateRange && dateRange.startDate && dateRange.endDate) {\n          const startDate = new Date(dateRange.startDate);\n          const endDate = new Date(dateRange.endDate);\n          \n          // Set default times for each date in the range\n          const current = new Date(startDate);\n          while (current <= endDate) {\n            const dateKey = current.toISOString().split('T')[0];\n            newTimeRanges[dateKey] = JSON.parse(JSON.stringify(formattedTimes));\n            current.setDate(current.getDate() + 1);\n          }\n        }\n        \n        // Also populate time ranges from multiple days selection if available\n        if (initialTimes.dates && initialTimes.dates.length > 0 && !dateRange) {\n          debugLog('MBAoi9uv43d: Creating time ranges from multiple days selection');\n          initialTimes.dates.forEach(dateObj => {\n            // Handle different date formats\n            let date;\n            if (typeof dateObj === 'string') {\n              date = new Date(dateObj);\n            } else if (dateObj && dateObj.date) {\n              date = new Date(dateObj.date);\n            } else {\n              date = new Date(dateObj);\n            }\n            \n            const dateKey = date.toISOString().split('T')[0];\n            if (!newTimeRanges[dateKey]) {\n              newTimeRanges[dateKey] = JSON.parse(JSON.stringify(formattedTimes));\n            }\n          });\n        }\n        \n        // Check if initialTimes has individual times for specific days\n        if (hasIndividualTimesFlag || hasDatesInDraft) {\n          Object.keys(initialTimes).forEach(key => {\n            // Check if the key is a date (format YYYY-MM-DD)\n            if (key.match(/^\\d{4}-\\d{2}-\\d{2}$/) && initialTimes[key]) {\n              const dayTime = initialTimes[key];\n              const parsedStartTime = parseTimeValue(dayTime.startTime);\n              const parsedEndTime = parseTimeValue(dayTime.endTime);\n              \n              if (parsedStartTime || parsedEndTime) {\n                newTimeRanges[key] = {\n                  startTime: parsedStartTime || { hours: 9, minutes: 0 },\n                  endTime: parsedEndTime || { hours: 17, minutes: 0 },\n                  // CRITICAL FIX: prioritize current service over previous state\n                  isOvernightForced: selectedService?.is_overnight || isOvernightForced || false\n                };\n              }\n            }\n          });\n        }\n        \n        // Also handle individualTimeRanges format from initialTimes\n        if (initialTimes.individualTimeRanges) {\n          Object.keys(initialTimes.individualTimeRanges).forEach(dateKey => {\n            if (dateKey.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n              const dayTime = initialTimes.individualTimeRanges[dateKey];\n              const parsedStartTime = parseTimeValue(dayTime.startTime);\n              const parsedEndTime = parseTimeValue(dayTime.endTime);\n              \n              if (parsedStartTime || parsedEndTime) {\n                newTimeRanges[dateKey] = {\n                  startTime: parsedStartTime || { hours: 9, minutes: 0 },\n                  endTime: parsedEndTime || { hours: 17, minutes: 0 },\n                  // CRITICAL FIX: prioritize current service over previous state\n                  isOvernightForced: selectedService?.is_overnight || isOvernightForced || false\n                };\n              }\n            }\n          });\n        }\n        \n        debugLog('MBAoi9uv43d: Setting individual time ranges:', newTimeRanges);\n        setIndividualTimeRanges(newTimeRanges);\n      }\n    } catch (error) {\n      debugLog('MBAoi9uv43d: Error processing initialTimes:', error);\n      // Set default times on error\n      setTimes({\n        startTime: { hours: 9, minutes: 0 },\n        endTime: { hours: 17, minutes: 0 },\n        isOvernightForced: selectedService?.is_overnight || isOvernightForced || false\n      });\n    }\n  }, [initialTimes, dateRange, selectedService]);\n  \n  const handleDefaultTimeSelect = (newTimes) => {\n    debugLog('MBAoi9uv43d: handleDefaultTimeSelect called with:', newTimes);\n    \n    // Create a new deep copy to avoid reference issues\n    const updatedTimes = JSON.parse(JSON.stringify(newTimes));\n    \n    // Update our local state\n    setTimes(updatedTimes);\n    \n    // If showing individual days, update each day's times\n    if (showIndividualDays) {\n      const updatedRanges = {};\n      \n      // Create deep copies for each date\n      Object.keys(individualTimeRanges).forEach(date => {\n        updatedRanges[date] = {\n          startTime: updatedTimes.startTime,\n          endTime: updatedTimes.endTime,\n          isOvernightForced: updatedTimes.isOvernightForced\n        };\n      });\n      \n      setIndividualTimeRanges(updatedRanges);\n      \n      // Send full object with individual day data\n      onTimeSelect({\n        ...updatedTimes,\n        ...updatedRanges,\n        hasIndividualTimes: true\n      });\n    } else {\n      // Just send the default times\n      onTimeSelect({\n        ...updatedTimes,\n        hasIndividualTimes: false\n      });\n    }\n  };\n\n  const handleIndividualDayTimeSelect = (timesData, dateKey) => {\n    debugLog('MBAoi9uv43d: Individual day time selection for card:', { dateKey, timesData });\n    \n    if (!dateKey) {\n      debugLog('MBAoi9uv43d: No dateKey provided, returning');\n      return;\n    }\n\n    // Create a completely fresh object for the updated ranges with no shared references\n    const updatedRanges = JSON.parse(JSON.stringify(individualTimeRanges));\n    \n    // Now set the new time data for this date key\n    updatedRanges[dateKey] = JSON.parse(JSON.stringify(timesData));\n    \n    debugLog('MBAoi9uv43d: TimeSelectionCard updating only date:', dateKey);\n    debugLog('MBAoi9uv43d: Current individualTimeRanges keys:', Object.keys(individualTimeRanges));\n    debugLog('MBAoi9uv43d: New updatedRanges keys:', Object.keys(updatedRanges));\n    \n    // Update local state with completely new object to break all references\n    setIndividualTimeRanges(updatedRanges);\n    \n    // Format time strings for API\n    const formattedRanges = {};\n    Object.keys(updatedRanges).forEach(date => {\n      const timeData = updatedRanges[date];\n      formattedRanges[date] = {\n        startTime: `${String(timeData.startTime.hours).padStart(2, '0')}:${String(timeData.startTime.minutes).padStart(2, '0')}`,\n        endTime: `${String(timeData.endTime.hours).padStart(2, '0')}:${String(timeData.endTime.minutes).padStart(2, '0')}`,\n        isOvernightForced: !!timeData.isOvernightForced\n      };\n    });\n    \n    // Create a completely new data object for the parent component\n    const updatedData = {\n      startTime: JSON.parse(JSON.stringify(times.startTime)),\n      endTime: JSON.parse(JSON.stringify(times.endTime)),\n      isOvernightForced: times.isOvernightForced,\n      hasIndividualTimes: true,\n      dates: initialTimes.dates ? [...initialTimes.dates] : [],\n      individualTimeRanges: formattedRanges\n    };\n    \n    // Add the specific date data\n    updatedData[dateKey] = formattedRanges[dateKey];\n    \n    debugLog('MBAoi9uv43d: TimeSelectionCard sending updated data to parent');\n    onTimeSelect(updatedData);\n  };\n\n  const handleToggleIndividualDays = () => {\n    debugLog('MBAoi9uv43d: TOGGLE button pressed');\n    debugLog('MBAoi9uv43d: Current showIndividualDays state:', showIndividualDays);\n    \n    if (showIndividualDays) {\n      // Currently showing individual days, switching to default time range\n      debugLog('MBAoi9uv43d: Switching FROM individual days TO default time range');\n      \n      // First, update the UI state\n      setShowIndividualDays(false);\n      \n      // Then send updated data to parent with hasIndividualTimes=false\n      // Include ONLY the essential time data, no date keys\n      const updatedData = {\n        startTime: times.startTime,\n        endTime: times.endTime,\n        isOvernightForced: times.isOvernightForced,\n        hasIndividualTimes: false,\n        // Keep the dates array for reference but don't include individual time ranges\n        dates: initialTimes.dates || []\n      };\n      \n      debugLog('MBAoi9uv43d: Sending default time data to parent:', updatedData);\n      onTimeSelect(updatedData);\n    } else {\n      // Currently showing default time range, switching to individual days\n      debugLog('MBAoi9uv43d: Switching FROM default time range TO individual days');\n      \n      // First update the UI state\n      setShowIndividualDays(true);\n      \n      // Create individual time ranges\n      let newTimeRanges = {};\n      \n      // Check if we have multiple individual dates from the booking data\n      const hasMultipleDays = initialTimes && initialTimes.dates && initialTimes.dates.length > 0;\n      \n      if (hasMultipleDays) {\n        // Get dates from initialTimes.dates for multiple-days selection\n        debugLog('MBAoi9uv43d: Creating time ranges for multiple individual dates');\n        \n        initialTimes.dates.forEach(dateObj => {\n          // Handle different date formats\n          let date;\n          if (typeof dateObj === 'string') {\n            date = new Date(dateObj);\n          } else if (dateObj && dateObj.date) {\n            date = new Date(dateObj.date);\n          } else {\n            date = new Date(dateObj);\n          }\n          \n          const dateKey = date.toISOString().split('T')[0];\n          \n          // Use current times values as default\n          newTimeRanges[dateKey] = {\n            startTime: JSON.parse(JSON.stringify(times.startTime)),\n            endTime: JSON.parse(JSON.stringify(times.endTime)),\n            isOvernightForced: times.isOvernightForced\n          };\n        });\n      } else if (dateRange && dateRange.startDate && dateRange.endDate) {\n        // Create ranges from dateRange\n        debugLog('MBAoi9uv43d: Creating time ranges from dateRange');\n        \n        const startDate = new Date(dateRange.startDate);\n        const endDate = new Date(dateRange.endDate);\n        const current = new Date(startDate);\n        \n        while (current <= endDate) {\n          const dateKey = current.toISOString().split('T')[0];\n          \n          // Use current times values as default, with deep copy\n          newTimeRanges[dateKey] = {\n            startTime: JSON.parse(JSON.stringify(times.startTime)),\n            endTime: JSON.parse(JSON.stringify(times.endTime)),\n            isOvernightForced: times.isOvernightForced\n          };\n          \n          // Move to next day\n          current.setDate(current.getDate() + 1);\n        }\n      } else if (Object.keys(individualTimeRanges).length > 0) {\n        // Use existing time ranges if we already have them\n        newTimeRanges = JSON.parse(JSON.stringify(individualTimeRanges));\n      }\n      \n      debugLog('MBAoi9uv43d: Setting individual time ranges:', newTimeRanges);\n      setIndividualTimeRanges(newTimeRanges);\n      \n      // Send full object with individual day data\n      onTimeSelect({\n        ...times,\n        ...newTimeRanges,\n        hasIndividualTimes: true\n      });\n    }\n  };\n\n  // Utility to get dates from dateRange or initialTimes\n  const getDates = () => {\n    let dates = [];\n    \n    // Check if we have multiple individual dates from the booking data\n    const hasMultipleDays = initialTimes && initialTimes.dates && initialTimes.dates.length > 0;\n    \n    if (hasMultipleDays) {\n      // Get dates from the initialTimes.dates for multiple-days selection\n      debugLog('MBAoi9uv43d: Using multiple individual dates from initialTimes:', initialTimes.dates);\n      dates = initialTimes.dates.map(dateObj => {\n        // Handle different date formats (string or object with date property)\n        if (typeof dateObj === 'string') {\n          return new Date(dateObj);\n        } else if (dateObj && dateObj.date) {\n          return new Date(dateObj.date);\n        } else {\n          return new Date(dateObj);\n        }\n      });\n    } else if (dateRange && dateRange.startDate && dateRange.endDate) {\n      // Generate array of dates between start and end for date range\n      debugLog('MBAoi9uv43d: Generating dates from dateRange:', dateRange);\n      const startDate = new Date(dateRange.startDate);\n      const endDate = new Date(dateRange.endDate);\n      const current = new Date(startDate);\n      \n      while (current <= endDate) {\n        dates.push(new Date(current));\n        current.setDate(current.getDate() + 1);\n      }\n    }\n    \n    return dates;\n  };\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.card}>\n        {/* Only show default time range selector when not showing individual days */}\n        {!showIndividualDays && (\n          <NewTimeRangeSelector\n            onTimeSelect={handleDefaultTimeSelect}\n            initialTimes={times}\n            is_overnight={selectedService?.is_overnight || times.isOvernightForced || isOvernightForced || false}\n            uniqueId=\"default-time-range\"\n            dateRange={dateRange}\n            selectedDates={initialTimes.dates || []}\n          />\n        )}\n\n        {/* Only show customize button if not an overnight service */}\n        {!selectedService?.is_overnight && !isOvernightForced && (\n          <View style={styles.customizeButtonContainer}>\n            <TouchableOpacity \n              style={styles.customizeButton}\n              onPress={handleToggleIndividualDays}\n              activeOpacity={0.7}\n            >\n              <MaterialIcons name=\"schedule\" size={20} color={theme.colors.mainColors.main} />\n              <Text style={styles.customizeButtonText}>\n                {showIndividualDays ? 'Set Default Time Range' : 'Customize Individual Day Schedules'}\n              </Text>\n            </TouchableOpacity>\n          </View>\n        )}\n\n        {/* Only show individual day schedules if not an overnight service and the toggle is on */}\n        {showIndividualDays && !selectedService?.is_overnight && !isOvernightForced && (\n          <View style={styles.individualDaysContainer}>\n            <Text style={styles.sectionHeader}>Individual Day Schedules</Text>\n            <ScrollView>\n              {getDates().map((date, index) => {\n                const dateKey = date.toISOString().split('T')[0];\n                \n                // Get existing time data for this date or use default with deep copying\n                let timeData;\n                \n                // Check if we have a specific time range for this date in initialTimes\n                if (initialTimes && initialTimes[dateKey]) {\n                  const parsedStartTime = parseTimeValue(initialTimes[dateKey].startTime);\n                  const parsedEndTime = parseTimeValue(initialTimes[dateKey].endTime);\n                  \n                  timeData = {\n                    startTime: parsedStartTime || JSON.parse(JSON.stringify(times.startTime)),\n                    endTime: parsedEndTime || JSON.parse(JSON.stringify(times.endTime)),\n                    // CRITICAL FIX: prioritize current service over previous state\n                    isOvernightForced: selectedService?.is_overnight || isOvernightForced || false\n                  };\n                  \n                  debugLog(`MBAoi9uv43d: Found specific time data for date ${dateKey} in initialTimes`);\n                } \n                // Otherwise check individualTimeRanges which is our local state\n                else if (individualTimeRanges && individualTimeRanges[dateKey]) {\n                  timeData = JSON.parse(JSON.stringify(individualTimeRanges[dateKey]));\n                  debugLog(`MBAoi9uv43d: Using time from individualTimeRanges for date ${dateKey}`);\n                } \n                // If nothing found, use default times\n                else {\n                  timeData = { \n                    startTime: JSON.parse(JSON.stringify(times.startTime)),\n                    endTime: JSON.parse(JSON.stringify(times.endTime)),\n                    isOvernightForced: times.isOvernightForced\n                  };\n                  debugLog(`MBAoi9uv43d: Using default times for date ${dateKey}`);\n                }\n                \n                return (\n                  <DayTimeSelector\n                    key={`day-${dateKey}`}\n                    date={date}\n                    initialTimes={timeData}\n                    onTimeChange={handleIndividualDayTimeSelect}\n                    is_overnight={selectedService?.is_overnight || false}\n                  />\n                );\n              })}\n            </ScrollView>\n          </View>\n        )}\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 16,\n  },\n  card: {\n    backgroundColor: theme.colors.background,\n    borderRadius: 12,\n  },\n  customizeButtonContainer: {\n    marginBottom: 24,\n    paddingHorizontal: 16,\n  },\n  customizeButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 8,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.mainColors.main,\n  },\n  customizeButtonText: {\n    color: theme.colors.mainColors.main,\n    fontSize: theme.fontSizes.medium,\n    fontFamily: theme.fonts.regular.fontFamily,\n    textAlign: 'center',\n  },\n  individualDaysContainer: {\n    gap: 12,\n    marginBottom: 16,\n  },\n  sectionHeader: {\n    fontSize: theme.fontSizes.medium,\n    fontFamily: theme.fonts.regular.fontFamily,\n    color: theme.colors.text,\n    marginBottom: 12,\n    paddingHorizontal: 16,\n  },\n});\n\nexport default TimeSelectionCard; ","import React, { useState, useContext, useEffect, useRef } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Modal,\n  SafeAreaView,\n  Platform,\n  ScrollView,\n  Dimensions,\n} from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { AuthContext, debugLog } from '../context/AuthContext';\nimport ServiceAndPetsCard from './bookingComponents/ServiceAndPetsCard';\nimport DateSelectionCard from './bookingComponents/DateSelectionCard';\nimport TimeSelectionCard from './bookingComponents/TimeSelectionCard';\nimport ReviewAndRatesCard from './bookingComponents/ReviewAndRatesCard';\nimport StepProgressIndicator from './common/StepProgressIndicator';\nimport TosRequiredModal from './modals/TosRequiredModal';\nimport { updateBookingDraftPetsAndServices, \n         updateBookingDraftTimeAndDate, \n         updateBookingDraftMultipleDays,\n         updateBookingDraftRecurring,\n         createBookingFromDraft,\n         getBookingDraftDatesAndTimes\n} from '../api/API';\nimport { convertToUTC, formatDateForAPI, formatTimeForAPI, parseOccurrencesForBookingSteps } from '../utils/time_utils';\n\nconst STEPS = {\n  SERVICES_AND_PETS: {\n    id: 0,\n    name: 'Services & Pets'\n  },\n  DATE_SELECTION: {\n    id: 1,\n    name: 'Date Selection'\n  },\n  TIME_SELECTION: {\n    id: 2,\n    name: 'Time Selection'\n  },\n  REVIEW_AND_RATES: {\n    id: 3,\n    name: 'Review & Rates'\n  }\n};\n\nconst BookingStepModal = ({ \n  visible, \n  onClose,\n  bookingId,\n  onComplete,\n  initialData = {},\n  navigation\n}) => {\n  debugLog('MBA2ou09hv595', 'BookingStepModal component rendered/re-rendered', {\n    visible,\n    bookingId,\n    timestamp: new Date().toISOString()\n  });\n  const { is_DEBUG, screenWidth, timeSettings } = useContext(AuthContext);\n  const isSmallScreen = screenWidth < 600;\n  const isDesktop = screenWidth > 768;\n  const [currentStep, setCurrentStep] = useState(STEPS.SERVICES_AND_PETS.id);\n  const [bookingData, setBookingData] = useState({\n    service: initialData?.service || null,\n    pets: initialData?.pets || [],\n    dates: initialData?.dates || [],\n    bookingType: initialData?.bookingType || 'one-time',\n    dateRangeType: initialData?.dateRangeType || 'date-range',\n    times: initialData?.times || {\n      startTime: '09:00',  // Default start time\n      endTime: '17:00',    // Default end time\n      isOvernightForced: false,\n      hasIndividualTimes: false  // Default to false\n    },\n    rates: initialData?.rates || {},\n    dateSelectionData: null,\n    dateRange: null,\n    hasFetchedDates: false, // Track whether dates have been fetched\n  });\n  const [error, setError] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [termsAgreed, setTermsAgreed] = useState(false);\n  const [showTermsModal, setShowTermsModal] = useState(false);\n  \n  // Function to check if user has already agreed to terms (matches ReviewAndRatesCard logic)\n  const getTosStatus = () => {\n    if (!bookingData) return undefined;\n    // For professionals creating a booking, they are the \"pro\" side\n    // For clients creating a booking, they are the \"client\" side\n    // Since BookingStepModal is used by professionals, check pro_agreed_tos\n    return bookingData.pro_agreed_tos;\n  };\n  \n  // Add persistent state for preventing duplicate API calls\n  const [hasInitializedServices, setHasInitializedServices] = useState(false);\n  const [hasInitializedPets, setHasInitializedPets] = useState(false);\n  const [lastInitializedBookingId, setLastInitializedBookingId] = useState(null);\n  \n  // Store fetched data at parent level to prevent loss during re-renders\n  const [availableServices, setAvailableServices] = useState([]);\n  const [availablePets, setAvailablePets] = useState([]);\n  \n  // Use refs to track initialization state without causing re-renders\n  const initializationRef = useRef({\n    lastBookingId: null,\n    servicesInitialized: false,\n    petsInitialized: false,\n    servicesInProgress: false,\n    petsInProgress: false\n  });\n\n  // Add effect to log initial data\n  useEffect(() => {\n    debugLog('MBA12345 Initial data received:', initialData);\n    debugLog('MBA12345 Initial booking data state:', bookingData);\n  }, [initialData]);\n\n  // New effect to fetch draft dates and times\n  useEffect(() => {\n    const fetchDraftDatesAndTimes = async () => {\n      if (!bookingId || !visible) return;\n      \n      // Only fetch if we haven't already loaded dates, or if they're empty\n      if (bookingData.hasFetchedDates) {\n        debugLog('MBA2j3kbr9hve4: Skipping fetch as hasFetchedDates is true');\n        return;\n      }\n      \n      try {\n        setIsLoading(true);\n        setError(null);\n        \n        debugLog('MBA2j3kbr9hve4: Fetching draft dates and times for booking ID:', bookingId);\n        const response = await getBookingDraftDatesAndTimes(bookingId);\n        debugLog('MBA2j3kbr9hve4: Received draft dates and times:', response);\n        \n        if (response) {\n          // Use our utility function to parse occurrences correctly with user's timezone\n          const userTimezone = timeSettings?.timezone || 'US/Mountain';\n          debugLog('MBA2j3kbr9hve4: Using timezone for parsing occurrences:', {\n            userTimezone,\n            timeSettings,\n            fallbackUsed: !timeSettings?.timezone\n          });\n          const parsedData = parseOccurrencesForBookingSteps(response.occurrences || [], userTimezone);\n          \n          debugLog('MBA2j3kbr9hve4: Parsed draft dates and times:', parsedData);\n          \n          // Check if this is an overnight service\n          // First check the service from the response \n          const serviceName = (response.service_details?.service_type || '').toLowerCase();\n          const isOvernightService = response.service_details?.is_overnight === true;\n          \n          debugLog('MBA2j3kbr9hve4: Is overnight service from response:', isOvernightService);\n          debugLog('MBA2j3kbr9hve4: Service name:', serviceName);\n          debugLog('MBA2j3kbr9hve4: Full service details from response:', response.service_details);\n\n          // Update bookingData with the service information to ensure we have the overnight status\n          let serviceData = null;\n          if (response.service_details) {\n            serviceData = {\n              ...response.service_details,\n              service_id: response.service_details.service_id,\n              service_name: response.service_details.service_type,\n              is_overnight: isOvernightService, // Using our improved overnight detection\n            };\n            debugLog('MBA2j3kbr9hve4: Setting service data with overnight status:', serviceData);\n          }\n          \n          // Check for occurrences to determine if this is an overnight booking\n          if (response.occurrences && response.occurrences.length > 0) {\n            // Check if we can determine if this is an overnight booking from the dates\n            const firstOcc = response.occurrences[0];\n            const lastOcc = response.occurrences[response.occurrences.length - 1];\n            \n            // If first and last occurrence have different dates, this might be an overnight range\n            if (firstOcc.start_date !== lastOcc.end_date) {\n              const startDate = new Date(firstOcc.start_date);\n              const endDate = new Date(lastOcc.end_date);\n              const daysDifference = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24));\n              \n              // If the difference is 1+ days, it's likely an overnight booking\n              if (daysDifference >= 1) {\n                debugLog('MBA2j3kbr9hve4: DETECTED OVERNIGHT from date range:', {\n                  startDate: firstOcc.start_date,\n                  endDate: lastOcc.end_date,\n                  daysDifference\n                });\n                \n                // Force overnight mode\n                if (serviceData) {\n                  serviceData.is_overnight = true;\n                }\n              }\n            }\n          }\n            \n          // Special check to handle a possible case where we have a multi-day date range\n          // with only start and end dates in individual occurrences (instead of all dates)\n          if (response.occurrences?.length === 2) {\n            try {\n              const occ1Date = new Date(response.occurrences[0].start_date);\n              const occ2Date = new Date(response.occurrences[1].start_date);\n              \n              // Check if they are more than 1 day apart\n              const daysBetween = Math.abs(Math.round((occ2Date - occ1Date) / (1000 * 60 * 60 * 24)));\n              \n              if (daysBetween > 1) {\n                debugLog('MBA2j3kbr9hve4: DETECTED POTENTIAL OVERNIGHT from date distance:', {\n                  date1: response.occurrences[0].start_date,\n                  date2: response.occurrences[1].start_date,\n                  daysBetween\n                });\n                \n                // Force overnight mode if we have more than 1 day between occurrences\n                if (serviceData) {\n                  serviceData.is_overnight = true;\n                }\n              }\n            } catch (err) {\n              debugLog('MBA2j3kbr9hve4: Error checking occ dates:', err);\n            }\n          }\n            \n          // Ensure we set a correct dateRangeType\n          // If we have detected an overnight service, force 'date-range' mode\n          let dateRangeType = response.date_range_type || 'date-range';\n          if (isOvernightService || (serviceData && serviceData.is_overnight)) {\n            dateRangeType = 'date-range';\n            debugLog('MBA2j3kbr9hve4: Forcing date-range type for overnight service');\n          } \n          // Otherwise, if we have non-consecutive dates, force multiple-days mode\n          else if (parsedData.dates && parsedData.dates.length > 1 && !parsedData.dateRange) {\n            dateRangeType = 'multiple-days';\n            debugLog('MBA2j3kbr9hve4: Non-consecutive dates detected, forcing multiple-days mode');\n          }\n            \n          // Determine final overnight status\n          const isOvernightForced = isOvernightService || (serviceData && serviceData.is_overnight);\n          \n          debugLog('MBA2j3kbr9hve4: Final overnight determination:', {\n            initialCheck: isOvernightService,\n            afterOccurrenceChecks: serviceData?.is_overnight,\n            finalIsOvernightForced: isOvernightForced\n          });\n          \n          setBookingData(prev => ({\n            ...prev,\n            dates: parsedData.dates || [],\n            dateRange: parsedData.dateRange,\n            times: {\n              ...(parsedData.defaultTimes || {}),\n              ...parsedData.individualTimes,\n              individualTimeRanges: parsedData.individualTimes || {},\n              allTimesAreTheSame: parsedData.allTimesAreTheSame,\n              hasIndividualTimes: !parsedData.allTimesAreTheSame,\n              isOvernightForced: isOvernightForced\n            },\n            dateRangeType: dateRangeType,\n            bookingType: response.booking_type || prev.bookingType || 'one-time',\n            hasFetchedDates: true, // Flag to prevent refetching\n            // Update service information with overnight status\n            service: serviceData || prev.service\n          }));\n        }\n      } catch (error) {\n        debugLog('MBA2j3kbr9hve4: Error fetching draft dates and times:', error);\n        // Only show an error if we're not already on step 1 (service selection)\n        // This prevents showing an error when we're editing an existing booking\n        // that might not have dates/times yet\n        if (currentStep > STEPS.SERVICES_AND_PETS.id) {\n          setError('Failed to load booking details. Please try again.');\n        } else {\n          // Log the error but don't show it to the user on the first step\n          debugLog('MBA2j3kbr9hve4: Suppressing error on first step:', error.message);\n        }\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    \n    fetchDraftDatesAndTimes();\n  }, [bookingId, visible, currentStep, bookingData.hasFetchedDates]);\n\n  // Effect to ensure dateRangeType is always 'date-range' for overnight services\n  useEffect(() => {\n    // CRITICAL FIX: Only check the service itself, not previous times state\n    if (bookingData.service?.is_overnight) {\n      debugLog('MBA2j3kbr9hve4: Detected overnight service, ensuring dateRangeType is date-range');\n      \n      // If we have an overnight service but dateRangeType is not date-range, update it\n      if (bookingData.dateRangeType !== 'date-range') {\n        debugLog('MBA2j3kbr9hve4: Updating dateRangeType from', bookingData.dateRangeType, 'to date-range');\n        \n        setBookingData(prev => ({\n          ...prev,\n          dateRangeType: 'date-range'\n        }));\n      }\n    }\n  }, [bookingData.service?.is_overnight]); // CRITICAL FIX: Only depend on service.is_overnight\n\n  const handleServiceSelect = (service) => {\n    debugLog('MBA12345 Selected service:', service);\n    \n    // Check if the service has an overnight property or name contains overnight-related terms\n    const serviceName = (service?.service_name || '').toLowerCase();\n    \n    // Determine if this is an overnight service from the is_overnight flag or name\n    const isOvernight = service?.is_overnight === true;\n    \n    debugLog('MBA2j3kbr9hve4: Service overnight status:', {\n      isOvernight,\n      serviceData: service,\n      serviceName\n    });\n    \n    setBookingData(prev => {\n      // CRITICAL FIX: Reset times state to clean defaults when service changes\n      // This prevents carrying over stale isOvernightForced values\n      const cleanDefaultTimes = {\n        startTime: '09:00',\n        endTime: '17:00',\n        isOvernightForced: isOvernight, // Only set based on current service\n        hasIndividualTimes: isOvernight ? false : (prev.times?.hasIndividualTimes || false) // Reset individual times for overnight\n      };\n      \n      debugLog('MBA2j3kbr9hve4: CRITICAL FIX - Reset times with clean defaults:', {\n        previousTimes: prev.times,\n        newCleanTimes: cleanDefaultTimes,\n        serviceIsOvernight: isOvernight\n      });\n      \n      // Also update the service object to ensure is_overnight is set correctly\n      const updatedService = {\n        ...service,\n        is_overnight: isOvernight\n      };\n      \n      return {\n        ...prev,\n        service: updatedService,\n        // CRITICAL FIX: Use clean default times to prevent stale state\n        times: cleanDefaultTimes,\n        // Force date-range selection mode for overnight services\n        dateRangeType: isOvernight ? 'date-range' : prev.dateRangeType\n      };\n    });\n  };\n\n  const handlePetSelect = (pet) => {\n    debugLog('MBA12345 Selected/deselected pet:', pet);\n    \n    const updatedPets = bookingData.pets.find(p => p.pet_id === pet.pet_id)\n      ? bookingData.pets.filter(p => p.pet_id !== pet.pet_id)\n      : [...bookingData.pets, pet];\n\n    setBookingData(prev => ({\n      ...prev,\n      pets: updatedPets\n    }));\n  };\n\n  // New batch pet selection function for auto-selection from server\n  const handleBatchPetSelect = (petsArray) => {\n    debugLog('MBA12345 Batch selecting pets:', petsArray.map(p => ({ id: p.pet_id, name: p.name })));\n    \n    setBookingData(prev => ({\n      ...prev,\n      pets: petsArray\n    }));\n  };\n\n  // Functions to manage initialization state at parent level\n  const shouldFetchServices = () => {\n    if (!bookingId) return false;\n    \n    const currentRef = initializationRef.current;\n    \n    // If this is a new bookingId, reset everything\n    if (bookingId !== currentRef.lastBookingId) {\n      currentRef.lastBookingId = bookingId;\n      currentRef.servicesInitialized = false;\n      currentRef.petsInitialized = false;\n      currentRef.servicesInProgress = false;\n      currentRef.petsInProgress = false;\n      \n      // Update state for UI consistency\n      setLastInitializedBookingId(bookingId);\n      setHasInitializedServices(false);\n      setHasInitializedPets(false);\n      \n      // Reset data when booking ID changes\n      setAvailableServices([]);\n      setAvailablePets([]);\n    }\n    \n    // Only fetch if not already initialized and not in progress\n    const shouldFetch = !currentRef.servicesInitialized && !currentRef.servicesInProgress;\n    \n    if (shouldFetch) {\n      currentRef.servicesInProgress = true;\n    }\n    \n    return shouldFetch;\n  };\n\n  const shouldFetchPets = () => {\n    if (!bookingId) return false;\n    \n    const currentRef = initializationRef.current;\n    \n    // Only fetch if not already initialized and not in progress\n    const shouldFetch = !currentRef.petsInitialized && !currentRef.petsInProgress;\n    \n    if (shouldFetch) {\n      currentRef.petsInProgress = true;\n    }\n    \n    return shouldFetch;\n  };\n\n  const markServicesInitialized = (isError = false) => {\n    debugLog('MBA2ou09hv595', 'Marking services as initialized', { bookingId, isError });\n    \n    if (isError) {\n      // On error, just reset the in-progress flag so it can be retried\n      initializationRef.current.servicesInProgress = false;\n    } else {\n      // On success, mark as initialized and reset in-progress flag\n      initializationRef.current.servicesInitialized = true;\n      initializationRef.current.servicesInProgress = false;\n      setHasInitializedServices(true);\n    }\n  };\n\n  const markPetsInitialized = (isError = false) => {\n    debugLog('MBA2ou09hv595', 'Marking pets as initialized', { bookingId, isError });\n    \n    if (isError) {\n      // On error, just reset the in-progress flag so it can be retried\n      initializationRef.current.petsInProgress = false;\n    } else {\n      // On success, mark as initialized and reset in-progress flag\n      initializationRef.current.petsInitialized = true;\n      initializationRef.current.petsInProgress = false;\n      setHasInitializedPets(true);\n    }\n  };\n\n  // Parent-level data handling functions\n  const handleServicesData = (services, selectedServiceId) => {\n    debugLog('MBA2ou09hv595', 'Parent handling services data', {\n      bookingId,\n      services,\n      servicesCount: services?.length,\n      selectedServiceId\n    });\n    \n    setAvailableServices(services || []);\n    \n    // Handle auto-selection at parent level\n    if (selectedServiceId && services) {\n      const currentSelectedId = bookingData.service?.service_id;\n      if (currentSelectedId !== selectedServiceId) {\n        const serviceToSelect = services.find(s => s.service_id === selectedServiceId);\n        if (serviceToSelect) {\n          debugLog('MBA2ou09hv595', 'Parent auto-selecting service', {\n            currentSelectedId,\n            selectedServiceId,\n            serviceToSelect: { id: serviceToSelect.service_id, name: serviceToSelect.service_name }\n          });\n          \n          handleServiceSelect({\n            ...serviceToSelect,\n            isOvernightForced: serviceToSelect.is_overnight\n          });\n        }\n      }\n    }\n  };\n\n  const handlePetsData = (pets, selectedPetIds) => {\n    debugLog('MBA2ou09hv595', 'Parent handling pets data', {\n      bookingId,\n      pets,\n      petsCount: pets?.length,\n      selectedPetIds\n    });\n    \n    setAvailablePets(pets || []);\n    \n    // Handle auto-selection at parent level\n    if (selectedPetIds && selectedPetIds.length > 0 && pets) {\n      const petsToSelect = pets.filter(p => p.is_selected === true);\n      if (petsToSelect.length > 0) {\n        debugLog('MBA2ou09hv595', 'Parent auto-selecting pets', {\n          petsToSelect: petsToSelect.map(p => ({ id: p.pet_id, name: p.name }))\n        });\n        \n        handleBatchPetSelect(petsToSelect);\n      }\n    }\n  };\n\n  const handleDateSelect = (dateData) => {\n    debugLog('MBA12345 Selected dates:', dateData);\n    debugLog('MBA2j3kbr9hve4: CRITICAL handleDateSelect rangeType:', {\n      rangeType: dateData.rangeType,\n      currentDateRangeType: bookingData.dateRangeType,\n      isServiceOvernight: bookingData.service?.is_overnight,\n      isTimesOvernightForced: bookingData.times?.isOvernightForced\n    });\n    \n    setBookingData(prev => {\n      // Preserve date range when switching to multiple-days\n      let newDateRange = prev.dateRange;\n      \n      // Update date range based on the selection type\n      if (dateData.rangeType === 'date-range' && dateData.startDate && dateData.endDate) {\n        newDateRange = {\n          startDate: dateData.startDate,\n          endDate: dateData.endDate\n        };\n      } else if (dateData.rangeType === 'multiple-days') {\n        // Keep the existing date range when in multiple-days mode\n        newDateRange = prev.dateRange;\n      } else if (!dateData.dates || dateData.dates.length === 0) {\n        // Clear date range if all dates are cleared\n        newDateRange = null;\n      }\n\n      return {\n        ...prev,\n        dates: dateData.dates || [],\n        dateSelectionData: dateData,\n        dateRange: newDateRange,\n        dateRangeType: dateData.rangeType || prev.dateRangeType\n      };\n    });\n  };\n\n  const handleBookingTypeChange = (bookingType) => {\n    debugLog('MBA12345 Booking type changed:', bookingType);\n    setBookingData(prev => ({\n      ...prev,\n      bookingType,\n      // Clear dates when changing booking type\n      dates: []\n    }));\n  };\n\n  const handleDateRangeTypeChange = (dateRangeType) => {\n    debugLog('MBA12345 Date range type changed:', dateRangeType);\n    setBookingData(prev => ({\n      ...prev,\n      dateRangeType\n    }));\n  };\n\n  const handleTimeSelect = (timeData) => {\n    debugLog('MBAoi1h34ghnvo: TimeSelectionCard sent time data:', timeData);\n\n    // CRITICAL FIX: Determine overnight status from current service, not timeData\n    const hasServiceOvernight = bookingData.service?.is_overnight === true;\n    \n    debugLog('MBAoi1h34ghnvo: CRITICAL FIX - Overnight status determination:', {\n      hasServiceOvernight,\n      timeDataIsOvernightForced: timeData.isOvernightForced,\n      message: 'Using service.is_overnight as source of truth'\n    });\n    \n    setBookingData(prev => {\n      // Check if we have individual day times\n      if (timeData.hasIndividualTimes) {\n        debugLog('MBAoi1h34ghnvo: Processing individual times');\n        \n        // Create a new times object that preserves all individual time changes\n        const individualTimes = {\n          ...prev.times,\n          hasIndividualTimes: true,\n          isOvernightForced: hasServiceOvernight, // CRITICAL FIX: Use service overnight status\n          dates: timeData.dates || prev.times.dates || [],\n          // Preserve the raw individualTimeRanges\n          individualTimeRanges: timeData.individualTimeRanges || {}\n        };\n\n        // Add all date-specific time changes\n        Object.keys(timeData).forEach(key => {\n          if (key.match(/^\\d{4}-\\d{2}-\\d{2}$/)) {\n            debugLog('MBAoi1h34ghnvo: Processing date key:', key, timeData[key]);\n            // Ensure we preserve the exact time data for each date\n            individualTimes[key] = {\n              startTime: timeData[key].startTime,\n              endTime: timeData[key].endTime,\n              isOvernightForced: timeData[key].isOvernightForced\n            };\n          }\n        });\n          \n        debugLog('MBAoi1h34ghnvo: Final individual times object:', individualTimes);\n        \n        return {\n          ...prev,\n          times: individualTimes\n        };\n      } else {\n        debugLog('MBAoi1h34ghnvo: Using default time range mode');\n        \n        // Create a new times object that preserves any existing values\n        const updatedTimes = {\n          ...prev.times,\n          startTime: timeData.startTime ? `${String(timeData.startTime.hours).padStart(2, '0')}:${String(timeData.startTime.minutes || 0).padStart(2, '0')}` : prev.times.startTime,\n          endTime: timeData.endTime ? `${String(timeData.endTime.hours).padStart(2, '0')}:${String(timeData.endTime.minutes || 0).padStart(2, '0')}` : prev.times.endTime,\n          isOvernightForced: hasServiceOvernight, // CRITICAL FIX: Use service overnight status\n          hasIndividualTimes: false,\n          dates: timeData.dates || prev.times.dates || []\n        };\n\n        debugLog('MBAoi1h34ghnvo: Updated default times:', updatedTimes);\n\n        return {\n          ...prev,\n          times: updatedTimes\n        };\n      }\n    });\n  };\n\n  const canProceedToNextStep = () => {\n    switch (currentStep) {\n      case STEPS.SERVICES_AND_PETS.id:\n        return bookingData.service && bookingData.pets.length > 0;\n      case STEPS.DATE_SELECTION.id:\n        // Check if we have valid dates, either from:\n        // 1. dateSelectionData that's been validated\n        // 2. dates array with entries\n        // 3. a valid dateRange with both startDate and endDate\n\n        // First check if dateSelectionData exists and is valid\n        if (bookingData.dateSelectionData && bookingData.dateSelectionData.isValid) {\n          return true;\n        }\n        \n        // Check if we have any dates in the array\n        if (bookingData.dates && bookingData.dates.length > 0) {\n          return true;\n        }\n        \n        // Check if we have a valid date range\n        if (bookingData.dateRange && bookingData.dateRange.startDate && bookingData.dateRange.endDate) {\n          return true;\n        }\n        \n        // No valid date configuration found\n        return false;\n      case STEPS.TIME_SELECTION.id:\n        // Always allow proceeding from time selection since we have default times\n        return true;\n      case STEPS.REVIEW_AND_RATES.id:\n        return true;\n      // Add validation for other steps as they are implemented\n      default:\n        return false;\n    }\n  };\n\n  const handleNext = async () => {\n    if (!canProceedToNextStep()) {\n      setError('Please complete all required fields before proceeding');\n      return;\n    }\n\n    setError(null);\n    \n    // Log what's happening when advancing to the next step\n    debugLog('MBA2j3kbr9hve4: Moving to next step:', {\n      currentStep,\n      nextStep: currentStep + 1,\n      hasValidDates: bookingData.dates && bookingData.dates.length > 0,\n      hasValidDateRange: bookingData.dateRange && bookingData.dateRange.startDate && bookingData.dateRange.endDate,\n      hasValidDateSelectionData: bookingData.dateSelectionData && bookingData.dateSelectionData.isValid,\n      dateRangeType: bookingData.dateRangeType,\n      bookingType: bookingData.bookingType\n    });\n    \n    if (currentStep < STEPS.REVIEW_AND_RATES.id) {\n      // If we're on the first step, update the draft with selected service and pets\n      if (currentStep === STEPS.SERVICES_AND_PETS.id) {\n        try {\n          debugLog('MBA2j3kbr9hve4: Updating booking draft with service and pets');\n          await updateBookingDraftPetsAndServices(bookingId, {\n            service_id: bookingData.service?.service_id,\n            pets: bookingData.pets\n          });\n          debugLog('MBA2j3kbr9hve4: Successfully updated booking draft with service and pets');\n          \n          // Reset hasFetchedDates to force fetching dates and times when moving to the dates step\n          setBookingData(prev => ({\n            ...prev,\n            hasFetchedDates: false\n          }));\n        } catch (error) {\n          debugLog('MBA2j3kbr9hve4: Error updating booking draft:', error);\n          setError('Failed to save service and pet selections');\n          return;\n        }\n      }\n      \n      // Handle time selection calculations before proceeding\n      if (currentStep === STEPS.TIME_SELECTION.id) {\n        try {\n          debugLog('MBA5asdt3f4321 Original booking data:', bookingData);\n\n          // Direct fix - if the service is overnight, always use the updateBookingDraftTimeAndDate endpoint\n          // regardless of the dateRangeType that might have been previously set\n          const isServiceOvernightFlag = bookingData.service?.is_overnight === true;\n          const isTimeOvernightFlag = bookingData.times?.isOvernightForced === true;\n          const isAnyOvernightFlag = isServiceOvernightFlag || isTimeOvernightFlag;\n          \n          debugLog('MBA5asdt3f4321 DIRECT OVERNIGHT CHECK AT START:', {\n            isServiceOvernightFlag,\n            isTimeOvernightFlag,\n            isAnyOvernightFlag,\n            dateRangeType: bookingData.dateRangeType\n          });\n          \n          // If any overnight flag is set, we'll bypass all the other checks and directly use the overnight endpoint\n          if (isAnyOvernightFlag && bookingData.dateRange) {\n            // Force overnight mode\n            debugLog('MBA53212co2v3nvoub5 DIRECT OVERRIDE: Forcing overnight mode for any overnight service');\n            \n            const startDate = formatDateForAPI(bookingData.dateRange.startDate);\n            const endDate = formatDateForAPI(bookingData.dateRange.endDate);\n            const startTime = formatTimeForAPI(bookingData.times.startTime);\n            const endTime = formatTimeForAPI(bookingData.times.endTime);\n            \n            debugLog('MBA53212co2v3nvoub5 DIRECT OVERRIDE: Using time-and-date endpoint with dates:', {\n              startDate,\n              endDate,\n              startTime,\n              endTime\n            });\n            \n            // Get user's timezone from context\n            const userTz = timeSettings?.timezone || 'US/Mountain';\n            debugLog('MBA53212co2v3nvoub5 Using user timezone for UTC conversion:', userTz);\n            \n            // Convert local times to UTC before sending to backend\n            const { date: utcStartDate, time: utcStartTime } = convertToUTC(\n              startDate,\n              startTime,\n              userTz\n            );\n\n            const { date: utcEndDate, time: utcEndTime } = convertToUTC(\n              endDate,\n              endTime,\n              userTz\n            );\n\n            // Call the API with UTC times and dates\n            const response = await updateBookingDraftTimeAndDate(\n              bookingId,\n              utcStartDate,\n              utcEndDate,\n              utcStartTime,\n              utcEndTime\n            );\n            \n            debugLog('MBA53212co2v3nvoub5 DIRECT OVERRIDE: Response from updateBookingDraftTimeAndDate:', response);\n            \n            // Update booking data with the response's draft_data\n            if (response?.draft_data) {\n              setBookingData(prev => ({\n                ...prev,\n                ...response.draft_data,\n                // Ensure we maintain overnight settings\n                times: {\n                  ...(response.draft_data.times || prev.times),\n                  isOvernightForced: true\n                },\n                service: {\n                  ...(response.draft_data.service || prev.service),\n                  is_overnight: true\n                },\n                // Force dateRangeType to date-range for overnight services\n                dateRangeType: 'date-range'\n              }));\n            }\n            \n            // Skip the rest of the checks - we've already made the API call\n            setCurrentStep(prev => prev + 1);\n            return;\n          }\n          \n          if (bookingData.dateRangeType === 'date-range') {\n            // Check if this is a non-overnight service with date range\n            const isServiceOvernight = bookingData.service?.is_overnight === true;\n            // Check time overnight status - but don't count 00:00 end time as overnight by itself\n            const isTimeOvernight = bookingData.times?.isOvernightForced === true && \n                                   !(bookingData.times.endTime === '00:00' && !isServiceOvernight);\n            \n            // Check if the date range spans multiple days - if it does, treat it as overnight\n            let isMultiDayRange = false;\n            if (bookingData.dateRange && bookingData.dateRange.startDate && bookingData.dateRange.endDate) {\n              try {\n                const startDate = new Date(bookingData.dateRange.startDate);\n                const endDate = new Date(bookingData.dateRange.endDate);\n                const daysDifference = Math.ceil((endDate - startDate) / (1000 * 60 * 60 * 24));\n                \n                // If more than 1 day difference, consider it multi-day\n                if (daysDifference > 1) {\n                  isMultiDayRange = true;\n                  debugLog('MBA53212co2v3nvoub5 DETECTED multi-day date range:', {\n                    startDate: bookingData.dateRange.startDate,\n                    endDate: bookingData.dateRange.endDate,\n                    daysDifference\n                  });\n                }\n              } catch (err) {\n                debugLog('MBA53212co2v3nvoub5 Error checking date range:', err);\n              }\n            }\n            \n            debugLog('MBA53212co2v3nvoub5 CRITICAL FIX - Checking overnight status:', {\n              dateRangeType: bookingData.dateRangeType,\n              serviceIsOvernight: isServiceOvernight,\n              timesIsOvernightForced: bookingData.times?.isOvernightForced,\n              endTime: bookingData.times?.endTime,\n              endTimeIsMidnight: bookingData.times?.endTime === '00:00',\n              // Special check for midnight end time\n              isMidnightEndTimeButNotForced: bookingData.times?.endTime === '00:00' && !isServiceOvernight,\n              isTimeOvernight: isTimeOvernight,\n              isMultiDayRange: isMultiDayRange,\n              willTreatAsOvernight: isServiceOvernight || isTimeOvernight,\n              message: 'Multi-day ranges no longer automatically force overnight mode',\n              service: bookingData.service,\n              times: bookingData.times\n            });\n            \n            // CRITICAL FIX: Only truly overnight services should be treated as overnight\n            // Multi-day date ranges for non-overnight services should NOT force overnight mode\n            if (isServiceOvernight || isTimeOvernight) {\n              // Only force overnight flag if the service itself is actually overnight\n              const updatedBookingData = {\n                ...bookingData,\n                service: {\n                  ...bookingData.service,\n                  is_overnight: isServiceOvernight || isTimeOvernight\n                },\n                times: {\n                  ...bookingData.times,\n                  isOvernightForced: isServiceOvernight || isTimeOvernight\n                }\n              };\n              \n              // Update state with the overnight mode for truly overnight services\n              setBookingData(updatedBookingData);\n              \n              // This is a truly overnight service with a date range, so we should call updateBookingDraftTimeAndDate\n              debugLog('MBA53212co2v3nvoub5 Using overnight endpoint for truly overnight service');\n              \n              const startDate = formatDateForAPI(bookingData.dateRange.startDate);\n              const endDate = formatDateForAPI(bookingData.dateRange.endDate);\n              const startTime = formatTimeForAPI(bookingData.times.startTime);\n              const endTime = formatTimeForAPI(bookingData.times.endTime);\n              \n              // Get user's timezone from context\n              const userTz = timeSettings?.timezone || 'US/Mountain';\n              debugLog('MBA53212co2v3nvoub5 Using user timezone for UTC conversion:', userTz);\n              \n              // Convert local times to UTC before sending to backend\n              const { date: utcStartDate, time: utcStartTime } = convertToUTC(\n                startDate,\n                startTime,\n                userTz\n              );\n\n              const { date: utcEndDate, time: utcEndTime } = convertToUTC(\n                endDate,\n                endTime,\n                userTz\n              );\n\n              // Call the API with UTC times and dates\n              const response = await updateBookingDraftTimeAndDate(\n                bookingId,\n                utcStartDate,\n                utcEndDate,\n                utcStartTime,\n                utcEndTime\n              );\n              \n              debugLog('MBA53212co2v3nvoub5 Received response from updateBookingDraftTimeAndDate (overnight override):', response);\n              \n              // Update booking data with the response's draft_data\n              if (response?.draft_data) {\n                setBookingData(prev => ({\n                  ...prev,\n                  ...response.draft_data,\n                  // CRITICAL FIX: Only maintain overnight settings if service is actually overnight\n                  times: {\n                    ...(response.draft_data.times || prev.times),\n                    isOvernightForced: isServiceOvernight || isTimeOvernight\n                  },\n                  service: {\n                    ...(response.draft_data.service || prev.service),\n                    is_overnight: isServiceOvernight || isTimeOvernight\n                  }\n                }));\n              }\n              \n              // Skip the rest of the checks since we've already made the API call\n              setCurrentStep(prev => prev + 1);\n              return;\n            }\n            \n            // CRITICAL FIX: Multi-day date ranges for non-overnight services should use multiple days endpoint\n            const isNonOvernightDateRange = \n              bookingData.dateRangeType === 'date-range' && \n              !isServiceOvernight &&\n              !isTimeOvernight;\n\n            debugLog('MBA53212co2v3nvoub5 CRITICAL FIX - Decision:', {\n              isNonOvernightDateRange: isNonOvernightDateRange,\n              isMultiDayRange: isMultiDayRange,\n              willUseEndpoint: isNonOvernightDateRange ? 'updateBookingDraftMultipleDays' : 'updateBookingDraftTimeAndDate',\n              message: 'Multi-day ranges for non-overnight services now use multiple days endpoint'\n            });\n\n            if (isNonOvernightDateRange) {\n              // CRITICAL FIX: For non-overnight date range services (including multi-day), create individual days\n              debugLog('MBA53212co2v3nvoub5 CRITICAL FIX - Handling non-overnight date range as individual occurrences:', {\n                isMultiDay: isMultiDayRange,\n                message: 'Multi-day ranges for non-overnight services handled correctly'\n              });\n              \n              // Create dates array from date range\n              const startDate = new Date(bookingData.dateRange.startDate);\n              const endDate = new Date(bookingData.dateRange.endDate);\n              const dates = [];\n              \n              // Generate all dates in the range\n              const currentDate = new Date(startDate);\n              while (currentDate <= endDate) {\n                dates.push(new Date(currentDate));\n                currentDate.setDate(currentDate.getDate() + 1);\n              }\n              \n              debugLog('MBA53212co2v3nvoub5 Generated dates from range:', dates.map(d => d.toISOString().split('T')[0]));\n              debugLog('MBA53212co2v3nvoub5 Time settings:', bookingData.times);\n              \n              // Format dates and determine times for each day\n              const formattedDates = dates.map(date => {\n                const dateKey = date.toISOString().split('T')[0];\n                debugLog('MBA53212co2v3nvoub5 Processing date:', dateKey);\n                \n                let dayTimes = bookingData.times;\n                \n                // If there are individual time settings for this day, use those\n                if (bookingData.times[dateKey] && bookingData.times.hasIndividualTimes) {\n                  dayTimes = bookingData.times[dateKey];\n                  debugLog('MBA53212co2v3nvoub5 Using individual times for date:', dateKey, dayTimes);\n                } else {\n                  debugLog('MBA53212co2v3nvoub5 Using default times for date:', dateKey, dayTimes);\n                }\n                \n                // Format the start time\n                let startTime;\n                if (typeof dayTimes.startTime === 'string') {\n                  startTime = dayTimes.startTime;\n                } else if (dayTimes.startTime?.hours !== undefined) {\n                  startTime = `${String(dayTimes.startTime.hours).padStart(2, '0')}:${String(dayTimes.startTime.minutes || 0).padStart(2, '0')}`;\n                } else {\n                  // Default time if missing\n                  startTime = '09:00';\n                }\n                \n                // Format the end time\n                let endTime;\n                if (typeof dayTimes.endTime === 'string') {\n                  endTime = dayTimes.endTime;\n                } else if (dayTimes.endTime?.hours !== undefined) {\n                  endTime = `${String(dayTimes.endTime.hours).padStart(2, '0')}:${String(dayTimes.endTime.minutes || 0).padStart(2, '0')}`;\n                } else {\n                  // Default time if missing\n                  endTime = '17:00';\n                }\n                \n                debugLog('MBA53212co2v3nvoub5 Formatted times for date:', dateKey, { startTime, endTime });\n                \n                // Format the date\n                const formattedDate = formatDateForAPI(date);\n                debugLog('MBA53212co2v3nvoub5 Formatted date:', formattedDate);\n                \n                // Determine if the end time might cross to the next day\n                // Check if end time is midnight or earlier than start time, indicating day boundary crossing\n                const needsNextDayDate = endTime === '00:00' || \n                                        (parseInt(endTime.split(':')[0], 10) < parseInt(startTime.split(':')[0], 10)) ||\n                                        (parseInt(endTime.split(':')[0], 10) === parseInt(startTime.split(':')[0], 10) && \n                                         parseInt(endTime.split(':')[1], 10) < parseInt(startTime.split(':')[1], 10));\n                \n                // Calculate end date - either same day or next day\n                const endDateObj = needsNextDayDate \n                  ? new Date(date.getTime() + 24*60*60*1000) // Next day if crossing midnight\n                  : new Date(date);\n                  \n                const formattedEndDate = formatDateForAPI(endDateObj);\n                \n                debugLog('MBA53212co2v3nvoub5 End date calculation:', {\n                  needsNextDayDate,\n                  startTime,\n                  endTime,\n                  originalDate: formattedDate,\n                  calculatedEndDate: formattedEndDate\n                });\n                \n                // IMPORTANT: Crossing midnight or having a different end date due to 00:00 end time\n                // should NOT force overnight mode - that should only be based on the service type\n                // We're just calculating the correct end date for API payload\n                \n                // Get user's timezone from context\n                const userTz = timeSettings?.timezone || 'US/Mountain';\n                debugLog('MBA53212co2v3nvoub5 Using user timezone for UTC conversion in map function:', userTz);\n                \n                // Convert local times to UTC for start time and date\n                const { date: utcStartDate, time: utcStartTime } = convertToUTC(\n                  formattedDate,\n                  startTime,\n                  userTz\n                );\n                \n                // Convert end time to UTC with potentially different end date\n                const { date: utcEndDate, time: utcEndTime } = convertToUTC(\n                  formattedEndDate,\n                  endTime,\n                  userTz\n                );\n                \n                debugLog('MBA53212co2v3nvoub5 Converted UTC times:', { \n                  utcStartDate, \n                  utcStartTime, \n                  utcEndDate, \n                  utcEndTime,\n                  isDifferentDates: utcStartDate !== utcEndDate\n                });\n                \n                // Return structured data with separate start and end dates\n                return {\n                  date: utcStartDate,\n                  startTime: utcStartTime,\n                  endDate: utcEndDate,  // Always include endDate\n                  endTime: utcEndTime\n                };\n              });\n              \n              debugLog('MBA53212co2v3nvoub5 - Converted UTC dates:', formattedDates);\n              \n              // Call the API for multiple individual days (even though they're from a date range)\n              const response = await updateBookingDraftMultipleDays(\n                bookingId,\n                {\n                  dates: formattedDates,\n                  times: {} // Empty times object since times are already included in each date\n                },\n                timeSettings\n              );\n              \n              debugLog('MBA53212co2v3nvoub5 Received response from updateBookingDraftMultipleDays:', response);\n              \n              if (response?.draft_data) {\n                setBookingData(prev => ({\n                  ...prev,\n                  ...response.draft_data\n                }));\n              }\n            } else {\n              // Handle date range selection for overnight services (existing logic)\n              const startDate = formatDateForAPI(bookingData.dateRange.startDate);\n              const endDate = formatDateForAPI(bookingData.dateRange.endDate);\n              const startTime = formatTimeForAPI(bookingData.times.startTime);\n              const endTime = formatTimeForAPI(bookingData.times.endTime);\n\n              debugLog('MBA53212co2v3nvoub5 Using update-time-and-date endpoint for OVERNIGHT service with dates:', {\n                startDate,\n                endDate,\n                startTime,\n                endTime,\n                service: {\n                  id: bookingData.service?.service_id,\n                  name: bookingData.service?.service_name,\n                  is_overnight: bookingData.service?.is_overnight\n                },\n                times: {\n                  isOvernightForced: bookingData.times?.isOvernightForced\n                }\n              });\n\n              // Convert local times to UTC before sending to backend\n              const { date: utcStartDate, time: utcStartTime } = convertToUTC(\n                startDate,\n                startTime,\n                userTz\n              );\n\n              const { date: utcEndDate, time: utcEndTime } = convertToUTC(\n                endDate,\n                endTime,\n                userTz\n              );\n\n              debugLog('MBA53212co2v3nvoub5 UTC dates and times:', {\n                utcStartDate,\n                utcStartTime,\n                utcEndDate,\n                utcEndTime\n              });\n\n              // Call the API with UTC times and dates\n              const response = await updateBookingDraftTimeAndDate(\n                bookingId,\n                utcStartDate,\n                utcEndDate,\n                utcStartTime,\n                utcEndTime\n              );\n\n              debugLog('MBA53212co2v3nvoub5 Received response from updateBookingDraftTimeAndDate:', response);\n\n              // Update booking data with the response's draft_data\n              if (response?.draft_data) {\n                setBookingData(prev => ({\n                  ...prev,\n                  ...response.draft_data\n                }));\n              } else {\n                debugLog('MBA53212co2v3nvoub5 No draft_data in response:', response);\n              }\n            }\n          } else if (bookingData.dateRangeType === 'multiple-days') {\n            // Handle multiple individual days\n            debugLog('MBA53212co2v3nvoub5 Multiple days selection:', {\n              dates: bookingData.dates,\n              times: bookingData.times\n            });\n\n            // Call the API for multiple individual days\n            const response = await updateBookingDraftMultipleDays(\n              bookingId,\n              {\n                dates: bookingData.dates,\n                times: bookingData.times\n              },\n              timeSettings\n            );\n\n            debugLog('MBA53212co2v3nvoub5 Received response from updateBookingDraftMultipleDays:', response);\n\n            if (response?.draft_data) {\n              setBookingData(prev => ({\n                ...prev,\n                ...response.draft_data\n              }));\n            }\n          } else if (bookingData.bookingType === 'recurring') {\n            // Handle recurring dates\n            debugLog('MBA53212co2v3nvoub5 Recurring dates selection:', {\n              startDate: bookingData.recurringStartDate,\n              endDate: bookingData.recurringEndDate,\n              daysOfWeek: bookingData.selectedDaysOfWeek,\n              frequency: bookingData.selectedFrequency,\n              times: bookingData.times\n            });\n\n            // Call the API for recurring dates\n            const response = await updateBookingDraftRecurring(\n              bookingId,\n              {\n                startDate: bookingData.recurringStartDate,\n                endDate: bookingData.recurringEndDate,\n                daysOfWeek: bookingData.selectedDaysOfWeek,\n                frequency: bookingData.selectedFrequency,\n                startTime: bookingData.times.startTime,\n                endTime: bookingData.times.endTime\n              }\n            );\n\n            debugLog('MBA53212co2v3nvoub5 Received response from updateBookingDraftRecurring:', response);\n\n            if (response?.draft_data) {\n              setBookingData(prev => ({\n                ...prev,\n                ...response.draft_data\n              }));\n            }\n          }\n        } catch (error) {\n          debugLog('MBA53212co2v3nvoub5 Error calculating booking totals:', error);\n          debugLog('MBA53212co2v3nvoub5 Error stack:', error.stack);\n          debugLog('MBA53212co2v3nvoub5 Error details:', {\n            message: error.message,\n            name: error.name,\n            response: error.response?.data\n          });\n          setError('Failed to calculate booking totals');\n          return;\n        }\n      }\n\n      setCurrentStep(prev => prev + 1);\n    } else {\n      // We're on the final step (REVIEW_AND_RATES), so create the booking\n      // First check if terms have been agreed to (using same logic as ReviewAndRatesCard)\n      const currentTosStatus = getTosStatus();\n      const hasAgreedToTerms = currentTosStatus === true || (currentTosStatus !== true && termsAgreed);\n      \n      debugLog('MBA54321: BookingStepModal TOS validation:', {\n        currentTosStatus,\n        termsAgreed,\n        hasAgreedToTerms,\n        bookingData: !!bookingData\n      });\n      \n      if (!hasAgreedToTerms) {\n        debugLog('MBA54321: Terms not agreed, showing TOS modal');\n        setShowTermsModal(true);\n        return;\n      }\n      \n      try {\n        setError(null);\n        \n        // Check if we have a conversation ID from the booking data\n        if (!bookingData.conversation_id) {\n          setError('Missing conversation information');\n          return;\n        }\n        \n        debugLog('MBA66777 Creating booking from draft with conversation ID:', bookingData.conversation_id);\n        \n        // Call the API to create a booking from the draft\n        const response = await createBookingFromDraft(bookingData.conversation_id, hasAgreedToTerms);\n        \n        debugLog('MBA66777 Booking created successfully:', response);\n        \n        // Create a booking message from the response data\n        // The booking data is in the message object of the response\n        const bookingMessageData = response.message || {};\n        const bookingId = response.booking_id;\n        \n        const bookingMessage = {\n          id: Date.now().toString(), // Temporary ID for UI purposes\n          type_of_message: 'send_approved_message',\n          metadata: {\n            booking_id: bookingId,\n            service_type: bookingMessageData.service_type || bookingData.service?.service_name,\n            occurrences: bookingMessageData.occurrences || [],\n            cost_summary: bookingMessageData.cost_summary || {\n              total_client_cost: bookingMessageData.occurrences?.[0]?.cost_summary?.total_client_cost,\n              total_sitter_payout: bookingMessageData.occurrences?.[0]?.cost_summary?.total_sitter_payout\n            }\n          },\n          content: 'Approval Request',\n          sent_by_other_user: false,\n          timestamp: new Date().toISOString()\n        };\n        \n        // Close the modal and pass the new booking data to the parent component\n        onComplete({\n          ...bookingData,\n          booking_id: bookingId,\n          status: 'Pending Client Approval',\n          message: bookingMessage // Include the new message to be added to the message list\n        });\n        \n        // Reset the modal to step 1 with initial state\n        // This ensures next time it's opened, it starts fresh\n        resetModal();\n        \n      } catch (error) {\n        debugLog('MBA66777 Error creating booking:', error);\n        setError('Failed to create booking. Please try again.');\n        \n        // Still try to close the modal in case the booking was actually created\n        // The backend handles duplicate bookings, so it's safe to let the user try again if needed\n        setTimeout(() => {\n          // Short timeout to let the user see the error\n          onComplete({\n            ...bookingData,\n            error: true,\n            errorMessage: error.message\n          });\n        }, 3000);\n      }\n    }\n  };\n\n  const handleBack = () => {\n    if (currentStep > STEPS.SERVICES_AND_PETS.id) {\n      setCurrentStep(prev => prev - 1);\n    } else {\n      // We're on the first step, so close the modal\n      handleClose();\n    }\n  };\n\n  const renderCurrentStep = () => {\n    switch (currentStep) {\n      case STEPS.SERVICES_AND_PETS.id:\n        debugLog('MBA2ou09hv595', 'BookingStepModal rendering ServiceAndPetsCard', {\n          bookingId,\n          currentStep,\n          selectedServiceId: bookingData.service?.service_id,\n          selectedPetsCount: bookingData.pets?.length,\n          timestamp: new Date().toISOString()\n        });\n        \n        return (\n          <ServiceAndPetsCard\n            key={`services-pets-${bookingId}`} // Add key to prevent unnecessary remounting\n            bookingId={bookingId}\n            onServiceSelect={handleServiceSelect}\n            onPetSelect={handlePetSelect}\n            onBatchPetSelect={handleBatchPetSelect}\n            selectedService={bookingData.service}\n            selectedPets={bookingData.pets}\n            navigation={navigation}\n            onClose={onClose}\n            shouldFetchServices={shouldFetchServices}\n            shouldFetchPets={shouldFetchPets}\n            markServicesInitialized={markServicesInitialized}\n            markPetsInitialized={markPetsInitialized}\n            // Pass data from parent to prevent loss during re-renders\n            availableServices={availableServices}\n            availablePets={availablePets}\n            onServicesData={handleServicesData}\n            onPetsData={handlePetsData}\n          />\n        );\n      case STEPS.DATE_SELECTION.id:\n        debugLog('MBA2j3kbr9hve4: Rendering date selection with:', { \n          dates: bookingData.dates, \n          dateRange: bookingData.dateRange,\n          bookingType: bookingData.bookingType,\n          dateRangeType: bookingData.dateRangeType,\n          hasFetchedDates: bookingData.hasFetchedDates\n        });\n        \n        const dateSelectionIsOvernightMode = bookingData.service?.is_overnight || false;\n        \n        debugLog('MBA2j3kbr9hve4: Date selection overnight status:', {\n          serviceIsOvernight: bookingData.service?.is_overnight,\n          timesIsOvernightForced: bookingData.times?.isOvernightForced,\n          combinedMode: dateSelectionIsOvernightMode\n        });\n        \n        return (\n          <DateSelectionCard\n            selectedDates={bookingData.dates || []}\n            onDateSelect={handleDateSelect}\n            bookingType={bookingData.bookingType || 'one-time'}\n            dateRangeType={bookingData.dateRangeType || 'date-range'}\n            initialDateRange={bookingData.dateRange || null}\n            isOvernightForced={dateSelectionIsOvernightMode}\n          />\n        );\n      case STEPS.TIME_SELECTION.id:\n        // Check if we have valid dates to display\n        if (!bookingData.dates || bookingData.dates.length === 0) {\n          return (\n            <View style={styles.errorContainer}>\n              <Text style={styles.errorText}>Please select dates first</Text>\n            </View>\n          );\n        }\n        \n        // Log current service and times state BEFORE preparing initialTimes \n        debugLog('MBA66777: CURRENT STATE Before rendering time selection:', { \n          service: {\n            id: bookingData.service?.service_id,\n            name: bookingData.service?.service_name,\n            is_overnight: bookingData.service?.is_overnight\n          },\n          times: {\n            isOvernightForced: bookingData.times?.isOvernightForced,\n            hasIndividualTimes: bookingData.times?.hasIndividualTimes\n          },\n          dateRange: bookingData.dateRange,\n          dateRangeType: bookingData.dateRangeType\n        });\n        \n        // Determine if overnight mode based ONLY on current service, not previous state\n        const currentServiceIsOvernight = bookingData.service?.is_overnight || false;\n        \n        debugLog('MBA66777: CRITICAL FIX - Overnight mode calculation:', {\n          serviceIsOvernight: bookingData.service?.is_overnight,\n          previousTimesIsOvernightForced: bookingData.times?.isOvernightForced,\n          calculatedCurrentServiceIsOvernight: currentServiceIsOvernight,\n          message: 'isOvernightForced now based ONLY on current service, not previous state'\n        });\n        \n        // Prepare initialTimes object with all necessary data\n        const initialTimes = {\n          ...bookingData.times,\n          // Always include dates for multiple-days selection\n          dates: bookingData.dates || [],\n          // Include occurrences if available\n          occurrences: bookingData.occurrences || [],\n          // Ensure hasIndividualTimes is preserved from bookingData.times, but reset if overnight service\n          hasIndividualTimes: currentServiceIsOvernight ? false : (bookingData.times?.hasIndividualTimes || false),\n          // CRITICAL FIX: isOvernightForced should ONLY depend on current service, not previous state\n          isOvernightForced: currentServiceIsOvernight\n        };\n        \n        const isOvernightMode = currentServiceIsOvernight;\n        \n        debugLog('MBA66777: Passing initialTimes to TimeSelectionCard:', {\n          hasIndividualTimes: initialTimes.hasIndividualTimes,\n          dateCount: initialTimes.dates?.length || 0,\n          isOvernightService: bookingData.service?.is_overnight,\n          isOvernightForced: bookingData.times?.isOvernightForced,\n          combinedOvernight: isOvernightMode\n        });\n        \n        return (\n          <TimeSelectionCard\n            onTimeSelect={handleTimeSelect}\n            initialTimes={initialTimes}\n            dateRange={bookingData.dateRange}\n            selectedService={{\n              ...bookingData.service,\n              is_overnight: isOvernightMode\n            }}\n            isOvernightForced={isOvernightMode}\n          />\n        );\n      case STEPS.REVIEW_AND_RATES.id:\n        return (\n          <ReviewAndRatesCard\n            bookingData={bookingData}\n            bookingId={bookingId}\n            onRatesUpdate={(updatedData) => {\n              debugLog('MBA2j3kbr9hve4: Rates updated:', updatedData);\n              setBookingData(prev => ({\n                ...prev,\n                occurrences: updatedData.occurrences,\n                cost_summary: updatedData.cost_summary\n              }));\n            }}\n            isProfessional={true}\n            fromApprovalModal={false}\n            onTermsAgreed={(agreed) => {\n              debugLog('MBA54321: BookingStepModal received onTermsAgreed:', agreed);\n              setTermsAgreed(agreed);\n            }}\n            onTosAgreementChange={(agreed) => {\n              debugLog('MBA54321: BookingStepModal received onTosAgreementChange:', agreed);\n              setTermsAgreed(agreed);\n            }}\n          />\n        );\n      default:\n        return null;\n    }\n  };\n\n  // Function to reset the modal state\n  const resetModal = () => {\n    debugLog('MBA2j3kbr9hve4: Resetting booking step modal state');\n    setCurrentStep(STEPS.SERVICES_AND_PETS.id);\n    setBookingData({\n      service: initialData?.service || null,\n      pets: initialData?.pets || [],\n      dates: initialData?.dates || [],\n      bookingType: initialData?.bookingType || 'one-time',\n      dateRangeType: initialData?.dateRangeType || 'date-range',\n      times: initialData?.times || {\n        startTime: '09:00',\n        endTime: '17:00',\n        isOvernightForced: false,\n        hasIndividualTimes: false\n      },\n      rates: initialData?.rates || {},\n      dateSelectionData: null,\n      dateRange: null,\n      hasFetchedDates: false, // Reset the fetch flag to ensure dates are refetched\n    });\n    setError(null);\n    setIsLoading(false);\n    // Only reset termsAgreed if user hasn't previously agreed to terms\n    const currentTosStatus = getTosStatus();\n    if (currentTosStatus !== true) {\n      setTermsAgreed(false);\n    }\n    setShowTermsModal(false);\n  };\n\n  // Function to handle cancellation of the modal\n  const handleClose = () => {\n    debugLog('MBA66777: Closing booking step modal and resetting state');\n    // Reset the modal state\n    resetModal();\n    // Call the onClose function passed as a prop\n    onClose();\n  };\n\n  // Add cleanup effect to ensure clean state when unmounting\n  useEffect(() => {\n    return () => {\n      debugLog('MBA2j3kbr9hve4: BookingStepModal unmounting, cleaning up state');\n      // This is a cleanup function that will run when the component unmounts\n      // We don't need to do anything here, just logging for debugging\n    };\n  }, []);\n\n  const formatDatesForAPI = (dateState) => {\n    if (!dateState || !dateState.dates || dateState.dates.length === 0) {\n      return { dates: [] };\n    }\n\n    // Format the dates for the API using the proper UTC conversion\n    const formattedDates = dateState.dates.map(date => {\n      const dateString = date.toISOString().split('T')[0];\n      \n      // Get time data for this specific date or fall back to default\n      let timeData = dateState.times;\n      \n      // Check if we have individual day schedules\n      if (dateState.times.hasIndividualTimes && dateState.times[dateString]) {\n        timeData = dateState.times[dateString];\n      }\n      \n      // Format start and end times\n      const formattedStartTime = formatTimeObj(timeData.startTime);\n      const formattedEndTime = formatTimeObj(timeData.endTime);\n      \n      // Handle midnight (00:00) as end of current day, not start of next day\n      // This ensures proper duration calculation and prevents negative durations\n      let endDate = dateString;\n      const isMidnightEnd = formattedEndTime === \"00:00\";\n      const isTimeBeforeStart = compareTimesAsMinutes(timeData.endTime, timeData.startTime) < 0;\n      \n      // If end time is midnight (00:00) or earlier than start time, use the next day as the end date\n      if (isMidnightEnd || isTimeBeforeStart) {\n        // Calculate the next day\n        const nextDay = new Date(date);\n        nextDay.setDate(nextDay.getDate() + 1);\n        endDate = nextDay.toISOString().split('T')[0];\n        \n        debugLog(\"MBA8810: Using next day for end date due to midnight/early morning end time:\", {\n          date: dateString,\n          startTime: formattedStartTime,\n          endTime: formattedEndTime,\n          endDate: endDate,\n          isMidnightEnd,\n          isTimeBeforeStart\n        });\n      }\n      \n      return {\n        date: dateString,\n        start_time: formattedStartTime,\n        end_time: formattedEndTime,\n        end_date: endDate, // Always include end_date for proper backend processing\n        is_overnight: timeData.isOvernightForced || dateState.service?.is_overnight || false\n      };\n    });\n\n    return { dates: formattedDates };\n  };\n\n  const formatTimeObj = (timeObj) => {\n    const hours = timeObj.hours.toString().padStart(2, '0');\n    const minutes = timeObj.minutes.toString().padStart(2, '0');\n    return `${hours}:${minutes}`;\n  };\n  \n  // Helper to compare two time objects by converting to minutes\n  const compareTimesAsMinutes = (time1, time2) => {\n    const time1Minutes = (time1.hours * 60) + time1.minutes;\n    const time2Minutes = (time2.hours * 60) + time2.minutes;\n    return time1Minutes - time2Minutes;\n  };\n\n  return (\n    <>\n      <Modal\n        visible={visible}\n        animationType=\"fade\"\n        onRequestClose={handleClose}\n        transparent={true}\n      >\n        <View style={styles.modalOverlay}>\n          <SafeAreaView style={styles.modalContent}>\n            <View style={styles.stepIndicatorContainer}>\n              <StepProgressIndicator\n                steps={Object.values(STEPS).map(step => step.name)}\n                currentStep={currentStep}\n              />\n            </View>\n            <ScrollView style={styles.scrollContent} contentContainerStyle={styles.scrollContentContainer}>\n              <View style={styles.content}>\n                {isLoading ? (\n                  <View style={styles.loadingContainer}>\n                    <Text style={styles.loadingText}>Loading booking information...</Text>\n                  </View>\n                ) : (\n                  renderCurrentStep()\n                )}\n              </View>\n              {error && (\n                <Text style={styles.errorText}>{error}</Text>\n              )}\n            </ScrollView>\n            <View style={styles.footer}>\n              {currentStep === STEPS.SERVICES_AND_PETS.id ? (\n                // Step 1: [Cancel] [Next]\n                <>\n                  <TouchableOpacity\n                    style={styles.cancelButton}\n                    onPress={handleClose}\n                  >\n                    <Text style={styles.cancelButtonText}>Cancel</Text>\n                  </TouchableOpacity>\n                  <TouchableOpacity\n                    style={[\n                      styles.nextButton,\n                      (!canProceedToNextStep() || isLoading) && styles.disabledButton\n                    ]}\n                    onPress={handleNext}\n                    disabled={!canProceedToNextStep() || isLoading}\n                  >\n                    <Text style={[\n                      styles.nextButtonText,\n                      (!canProceedToNextStep() || isLoading) && styles.disabledButtonText\n                    ]}>\n                      Next\n                    </Text>\n                  </TouchableOpacity>\n                </>\n              ) : (\n                // Steps 2-4: [Back] [Cancel][Next/Confirm]\n                <>\n                  <TouchableOpacity\n                    style={[styles.backButton, isSmallScreen && styles.smallScreenButton]}\n                    onPress={handleBack}\n                  >\n                    <Text style={styles.backButtonText}>Back</Text>\n                  </TouchableOpacity>\n                  <View style={styles.spacer} />\n                  <TouchableOpacity\n                    style={[styles.cancelButtonSmall, isSmallScreen && styles.smallScreenButton]}\n                    onPress={handleClose}\n                  >\n                    <Text style={styles.cancelButtonText}>Cancel</Text>\n                  </TouchableOpacity>\n                  <View style={isSmallScreen ? styles.smallMargin : null} />\n                  <TouchableOpacity\n                    style={[\n                      styles.nextButtonSmall, \n                      isSmallScreen && styles.smallScreenButton,\n                      (!canProceedToNextStep() || isLoading) && styles.disabledButton\n                    ]}\n                    onPress={handleNext}\n                    disabled={!canProceedToNextStep() || isLoading}\n                  >\n                    {currentStep === STEPS.REVIEW_AND_RATES.id && isSmallScreen ? (\n                      <View style={styles.confirmButtonColumn}>\n                        <Text style={[styles.nextButtonText, (!canProceedToNextStep() || isLoading) && styles.disabledButtonText]}>\n                          Request\n                        </Text>\n                        <Text style={[styles.nextButtonText, (!canProceedToNextStep() || isLoading) && styles.disabledButtonText]}>\n                          Booking\n                        </Text>\n                      </View>\n                    ) : (\n                      <Text style={[styles.nextButtonText, (!canProceedToNextStep() || isLoading) && styles.disabledButtonText]}>\n                        {currentStep === STEPS.REVIEW_AND_RATES.id ? 'Request Booking' : 'Next'}\n                      </Text>\n                    )}\n                  </TouchableOpacity>\n                </>\n              )}\n            </View>\n          </SafeAreaView>\n        </View>\n      </Modal>\n\n      {/* Terms of Service Modal */}\n      <TosRequiredModal\n        visible={showTermsModal}\n        onClose={() => setShowTermsModal(false)}\n        actionType=\"booking\"\n      />\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '100%',\n  },\n  modalContent: {\n    width: '95%',\n    maxWidth: Platform.OS === 'web' ? 600 : '100%',\n    maxHeight: '90%',\n    backgroundColor: theme.colors.background,\n    borderRadius: 12,\n    overflow: 'hidden',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  stepIndicatorContainer: {\n    width: '100%',\n    paddingVertical: 12,\n    backgroundColor: theme.colors.background,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.modernBorder,\n  },\n  scrollContent: {\n    flex: 1,\n  },\n  scrollContentContainer: {\n    flexGrow: 1,\n  },\n  content: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n  },\n  footer: {\n    flexDirection: 'row',\n    padding: 16,\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    backgroundColor: theme.colors.background,\n    borderTopWidth: 1,\n    borderTopColor: theme.colors.modernBorder,\n  },\n  spacer: {\n    width: 16,\n    flexGrow: 1,\n  },\n  smallMargin: {\n    width: 8,\n  },\n  backButton: {\n    minWidth: 100,\n    backgroundColor: theme.colors.surface,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  smallScreenButton: {\n    minWidth: 80,\n    paddingVertical: 8,\n    paddingHorizontal: 10,\n  },\n  backButtonText: {\n    color: theme.colors.text,\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  cancelButton: {\n    flex: 1,\n    backgroundColor: theme.colors.surface,\n    paddingVertical: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  cancelButtonSmall: {\n    minWidth: 100,\n    backgroundColor: theme.colors.surface,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  cancelButtonText: {\n    color: theme.colors.text,\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  nextButton: {\n    flex: 1,\n    backgroundColor: theme.colors.mainColors.main,\n    paddingVertical: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  nextButtonSmall: {\n    minWidth: 100,\n    backgroundColor: theme.colors.mainColors.main,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  disabledButton: {\n    backgroundColor: theme.colors.placeHolderText,\n  },\n  nextButtonText: {\n    color: theme.colors.surface,\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n  },\n  disabledButtonText: {\n    color: theme.colors.surface,\n  },\n  errorText: {\n    color: theme.colors.error,\n    textAlign: 'center',\n    marginBottom: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 16,\n  },\n  loadingText: {\n    color: theme.colors.text,\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  stepContent: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n  },\n  divider: {\n    height: 1,\n    backgroundColor: theme.colors.modernBorder,\n    marginVertical: 16,\n  },\n  errorContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 16,\n  },\n  confirmButtonColumn: {\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n\n});\n\nexport default BookingStepModal; ","import React, { useContext, useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { approveBooking, markBookingCompleted } from '../api/API';\nimport { formatDateTimeRangeFromUTC, convertTo24Hour } from '../utils/time_utils';\nimport { AuthContext, debugLog } from '../context/AuthContext';\nimport moment from 'moment-timezone';\nimport BookingApprovalModal from './BookingApprovalModal';\nimport Toast from './Toast';\n\n// A simplified version of checkDSTChange that only relies on moment-timezone\nconst checkDSTChange = (startDate, startTime, endDate, endTime, timezone) => {\n  try {\n    // Create UTC moments for start and end time\n    const startMoment = moment.utc(`${startDate}T${startTime}:00Z`).tz(timezone);\n    const endMoment = moment.utc(`${endDate}T${endTime}:00Z`).tz(timezone);\n    \n    // Check if the offset from UTC (in minutes) is different\n    return startMoment.utcOffset() !== endMoment.utcOffset();\n  } catch (error) {\n    debugLog('MBA9876DST Error checking DST change:', error);\n    return false;\n  }\n};\n\nconst BookingMessageCard = ({ \n  type,  // 'request', 'approval', 'request_changes', or 'booking_confirmed'\n  displayType, // Optional override for the display title (e.g., 'booking_update')\n  data,\n  isFromMe,\n  onPress,\n  isProfessional,\n  onApproveSuccess,\n  onApproveError,\n  onEditDraft,\n  bookingStatus, // Added to know if booking is confirmed\n  hasChangeRequest, // Boolean to indicate if this approval has a pending change request\n  isNewestMessage = false, // Flag to indicate if this is the newest message for this booking\n  messageCreatedAt, // Timestamp of when the message was created\n  hasNewerApprovalRequests = false, // Flag to indicate if this booking_confirmed message has newer approval requests\n  isAfterConfirmation = false, // Flag to indicate if this approval message comes after a booking confirmation\n  onMarkCompletedSuccess, // Callback when booking is marked as completed successfully\n  onMarkCompletedError, // Callback when marking booking as completed fails\n  isBookingCompleted = false // Flag to indicate if the booking has been completed\n}) => {\n  const { timeSettings } = useContext(AuthContext);\n  const userTimezone = timeSettings?.timezone || 'US/Mountain';\n  const [approvalModalVisible, setApprovalModalVisible] = useState(false);\n  const [safeInitialData, setSafeInitialData] = useState(null);\n  const [showAllDates, setShowAllDates] = useState(false); // New state for expanded/collapsed dates\n  const [isMarkingCompleted, setIsMarkingCompleted] = useState(false); // State for marking completed process\n  const [toastVisible, setToastVisible] = useState(false); // State for toast visibility\n  const [toastMessage, setToastMessage] = useState(''); // State for toast message\n  const [toastType, setToastType] = useState('error'); // State for toast type\n  \n  // Create safe data on component load\n  useEffect(() => {\n    // Ensure we have basic rate data for the initial load\n    const preparedData = {\n      ...data,\n      occurrences: data.occurrences?.map(occ => ({\n        ...occ,\n        rates: occ.rates || {\n          base_rate: 0,\n          additional_animal_rate: 0,\n          applies_after: 1,\n          holiday_rate: 0,\n          holiday_days: 0,\n          additional_rates: []\n        }\n      }))\n    };\n    setSafeInitialData(preparedData);\n  }, [data]);\n\n  const isConfirmed = bookingStatus === 'Confirmed';\n  const isChangeRequest = type === 'request_changes';\n  const isBookingConfirmed = type === 'booking_confirmed';\n  const shouldShowAsApproval = type === 'approval' || isChangeRequest;\n  \n  // Special flag for change requests that are for a confirmed booking\n  const isChangeRequestForConfirmedBooking = isChangeRequest && isConfirmed;\n  \n  // Determine if we should show the overlay based on message type and recency\n  // - Show \"Booking Completed\" if the booking is completed\n  // - Show \"Booking Confirmed\" on all earlier messages for confirmed bookings EXCEPT\n  //   for approval messages that come after a booking confirmation\n  // - Show \"Changes Requested\" on approval messages if there's a change request AND this isn't the newest message\n  // - Show \"Booking Updated\" on change request messages if they're not the newest message and there's a newer approval\n  // - Show \"Booking Updated\" on the booking_confirmed message if there's a newer approval request \n  //   for the same booking ID (NOT on the approval request itself)\n  // - Show \"Booking Updated\" on booking update messages if they have newer request changes\n  const shouldShowOverlay = \n    // Show \"Booking Completed\" if the booking is completed\n    isBookingCompleted ||\n    // Show \"Booking Confirmed\" on earlier messages, but NOT on approval messages that come after a confirmation\n    // AND not on request_changes messages that are the newest message\n    (isConfirmed && !isBookingConfirmed && type !== 'approval' && !isAfterConfirmation && !(isChangeRequest && isNewestMessage)) || \n    // Show \"Changes Requested\" on approval messages with pending changes that aren't newest\n    (type === 'approval' && hasChangeRequest && !isNewestMessage) ||\n    // Show \"Booking Updated\" on change request messages that aren't newest\n    (isChangeRequest && !isNewestMessage) ||\n    // Show \"Booking Updated\" on booking_confirmed messages with newer approval requests\n    (isBookingConfirmed && hasNewerApprovalRequests) ||\n    // Show \"Booking Updated\" on booking update messages (displayType === 'booking_update') with newer request changes\n    (displayType === 'booking_update' && hasChangeRequest && !isNewestMessage) ||\n    // Show \"Booking Updated\" on approval messages that come after confirmation but aren't the newest message\n    (type === 'approval' && isAfterConfirmation && !isNewestMessage);\n  \n  // What overlay text to show\n  const getOverlayText = () => {\n    // For completed bookings, show \"Booking Completed\"\n    if (isBookingCompleted) return 'Booking Completed';\n    \n    // For booking_confirmed messages with newer approval requests, show \"Booking Updated\"\n    if (isBookingConfirmed && hasNewerApprovalRequests) return 'Booking Updated';\n    \n    // For booking update messages with newer request changes, show \"Booking Updated\"\n    if (displayType === 'booking_update' && hasChangeRequest && !isNewestMessage) return 'Booking Updated';\n    \n    // For approval messages that come after a confirmation but aren't newest, show \"Booking Updated\"\n    if (type === 'approval' && isAfterConfirmation && !isNewestMessage) return 'Booking Updated';\n    \n    // For approval messages that come after a confirmation and are newest, don't show an overlay\n    if (type === 'approval' && isAfterConfirmation && isNewestMessage) return '';\n    \n    // For request changes messages that are the newest, don't show an overlay\n    if (isChangeRequest && isNewestMessage) return '';\n    \n    // For other messages when booking is confirmed, show \"Booking Confirmed\"\n    if (isConfirmed && !isBookingConfirmed && !isAfterConfirmation && !(isChangeRequest && isNewestMessage)) return 'Booking Confirmed';\n    \n    // For approval messages with change requests that aren't newest\n    if (type === 'approval' && hasChangeRequest && !isNewestMessage) {\n      return 'Changes Requested';\n    }\n    \n    // For change request messages that aren't newest\n    if (isChangeRequest && !isNewestMessage) {\n      return 'Booking Updated';\n    }\n    \n    return '';\n  };\n  \n  const overlayText = getOverlayText();\n  \n  // Log message state for debugging\n  debugLog('MBA4321: Message state for booking', data.booking_id, {\n    type,\n    displayType,\n    isFromMe,\n    isProfessional,\n    bookingStatus,\n    hasChangeRequest,\n    isNewestMessage,\n    isAfterConfirmation,\n    hasNewerApprovalRequests,\n    shouldShowOverlay,\n    overlayText,\n    messageCreatedAt: messageCreatedAt || 'N/A',\n    // Add detailed logic checks to help debug overlay decisions\n    overlayLogicChecks: {\n      isConfirmedButNotConfirmationMessage: isConfirmed && !isBookingConfirmed,\n      isChangeRequestAndNewestMessage: isChangeRequest && isNewestMessage,\n      isApprovalWithChangeRequest: type === 'approval' && hasChangeRequest && !isNewestMessage,\n      isBookingConfirmedWithNewerApprovals: isBookingConfirmed && hasNewerApprovalRequests\n    }\n  });\n\n  const getIcon = () => {\n    switch (type) {\n      case 'request':\n        return 'calendar-plus';\n      case 'approval':\n        return 'calendar-check';\n      case 'request_changes':\n        return 'calendar-edit';\n      case 'booking_confirmed':\n        return 'check-circle-outline';\n      default:\n        return 'calendar';\n    }\n  };\n\n  const getTitle = () => {\n    // If a display type is provided, use it to override the title\n    if (displayType === 'booking_update') {\n      return 'Booking Update';\n    }\n    \n    // For change requests that come after a booking update, adjust the display\n    if (type === 'request_changes' && isAfterConfirmation) {\n      return 'Update Change Request';\n    }\n    \n    switch (type) {\n      case 'request':\n        return 'Booking Request';\n      case 'approval':\n        return 'Approval Request';\n      case 'request_changes':\n        return 'Request Changes';\n      case 'booking_confirmed':\n        return 'Booking Confirmed';\n      default:\n        return 'Booking';\n    }\n  };\n\n  const getCardStyle = () => {\n    const baseStyle = [\n      styles.card,\n      isFromMe ? styles.sentCard : styles.receivedCard\n    ];\n\n    if (shouldShowAsApproval) {\n      baseStyle.push(styles.approvalCard);\n    }\n    \n    if (isBookingConfirmed) {\n      baseStyle.push(styles.confirmedCard);\n    }\n\n    return baseStyle;\n  };\n\n  const getHeaderStyle = () => {\n    if (isBookingConfirmed) {\n      return [styles.header, styles.confirmedHeader];\n    }\n    \n    return [\n      styles.header,\n      shouldShowAsApproval ? styles.approvalHeader : styles.requestHeader\n    ];\n  };\n\n  const handleApprove = async () => {\n    try {\n      const response = await approveBooking(data.booking_id);\n      \n      // Call the success callback if provided\n      if (onApproveSuccess) {\n        onApproveSuccess(response);\n      }\n    } catch (error) {\n      console.error('Error approving booking from message card:', error);\n      // Call the error callback if provided\n      if (onApproveError) {\n        onApproveError(error.response?.data?.error || 'Failed to approve booking');\n      }\n    }\n  };\n\n  const handleOpenApprovalModal = () => {\n    // Process initial data for any message type\n    if (!safeInitialData) {\n      // If safeInitialData isn't ready yet, create it now\n      const tempData = {\n        ...data,\n        occurrences: data.occurrences?.map(occ => ({\n          ...occ,\n          rates: occ.rates || {\n            base_rate: 0,\n            additional_animal_rate: 0,\n            applies_after: 1,\n            holiday_rate: 0,\n            holiday_days: 0,\n            additional_rates: []\n          }\n        })) || []\n      };\n      setSafeInitialData(tempData);\n    }\n    \n    debugLog('MBA9876 Opening approval modal with booking ID:', data.booking_id);\n    setApprovalModalVisible(true);\n  };\n\n  const handleApprovalSuccess = (response) => {\n    if (onApproveSuccess) {\n      onApproveSuccess(response);\n    }\n  };\n\n  const handleApprovalError = (error) => {\n    if (onApproveError) {\n      onApproveError(error);\n    }\n  };\n\n  const handleRequestChangesSuccess = (response) => {\n    debugLog('MBA9999 Change request submitted successfully:', response);\n    // Pass along the response to the parent component\n    if (onApproveSuccess) {\n      onApproveSuccess(response);\n    }\n  };\n\n  const handleRequestChangesError = (error) => {\n    debugLog('MBA9999 Error submitting change request:', error);\n    // Pass along the error to the parent component\n    if (onApproveError) {\n      onApproveError(error);\n    }\n  };\n\n  // Format a date/time range for an occurrence using the time_utils function\n  const formatOccurrenceDateRange = (occ) => {\n    // Check if we have direct UTC dates and times\n    if (occ.start_date && occ.end_date && occ.start_time && occ.end_time) {\n      // Format the date range\n      const formattedRange = formatDateTimeRangeFromUTC({\n        startDate: occ.start_date,\n        startTime: occ.start_time,\n        endDate: occ.end_date,\n        endTime: occ.end_time,\n        userTimezone: userTimezone,\n        includeTimes: true,\n        includeTimezone: true\n      });\n      \n      // Check for DST change between start and end times\n      const hasDSTChange = checkDSTChange(\n        occ.start_date,\n        occ.start_time,\n        occ.end_date,\n        occ.end_time,\n        userTimezone\n      );\n      \n      // Add DST change message if needed\n      if (hasDSTChange && !occ.dst_message) {\n        debugLog('MBA9876DST Detected DST change for occurrence:', {\n          start: `${occ.start_date} ${occ.start_time}`,\n          end: `${occ.end_date} ${occ.end_time}`,\n          timezone: userTimezone\n        });\n        \n        // Add DST message to the occurrence\n        occ.dst_message = \"Elapsed time may be different than expected due to Daylight Savings Time.\";\n      }\n      \n      return formattedRange;\n    }\n    \n    // Fallback to pre-formatted dates if available\n    if (occ.formatted_start && occ.formatted_end) {\n      return `${occ.formatted_start} to ${occ.formatted_end}`;\n    }\n    \n    // Last resort fallback\n    return 'Date information unavailable';\n  };\n\n  // Calculate duration for the occurrence if not provided\n  const getOccurrenceDuration = (occ) => {\n    if (occ.duration) {\n      return occ.duration;\n    }\n    \n    // Try to calculate the duration if we have the necessary data\n    if (occ.start_date && occ.end_date && occ.start_time && occ.end_time) {\n      try {\n        // Create moment objects for start and end times\n        const startMoment = moment.utc(`${occ.start_date}T${occ.start_time}:00Z`);\n        const endMoment = moment.utc(`${occ.end_date}T${occ.end_time}:00Z`);\n        \n        // Calculate the difference in hours and days\n        const hoursDiff = endMoment.diff(startMoment, 'hours');\n        const daysDiff = endMoment.diff(startMoment, 'days');\n        \n        // Format the duration nicely\n        if (daysDiff > 0) {\n          return `${daysDiff} ${daysDiff === 1 ? 'day' : 'days'}, ${hoursDiff % 24} ${hoursDiff % 24 === 1 ? 'hour' : 'hours'}`;\n        } else {\n          return `${hoursDiff} ${hoursDiff === 1 ? 'hour' : 'hours'}`;\n        }\n      } catch (error) {\n        debugLog('MBA9876DST Error calculating duration:', error);\n      }\n    }\n    \n    return 'N/A';\n  };\n\n  // Get the cost value based on user type (professional vs client)\n  const getCostValue = () => {\n    // First check if the cost_summary object exists\n    if (data.cost_summary) {\n      if (isProfessional) {\n        // Display pro payout for professionals\n        const amount = data.cost_summary.total_sitter_payout || '0.00';\n        return typeof amount === 'number' ? amount.toFixed(2) : parseFloat(amount).toFixed(2);\n      } else {\n        // Display client cost for clients\n        const amount = data.cost_summary.total_client_cost || '0.00';\n        return typeof amount === 'number' ? amount.toFixed(2) : parseFloat(amount).toFixed(2);\n      }\n    }\n    \n    // Fallback to direct properties (for backward compatibility)\n    if (isProfessional) {\n      const amount = data.total_sitter_payout || '0.00';\n      return typeof amount === 'number' ? amount.toFixed(2) : parseFloat(amount).toFixed(2);\n    } else {\n      const amount = data.total_owner_cost || '0.00';\n      return typeof amount === 'number' ? amount.toFixed(2) : parseFloat(amount).toFixed(2);\n    }\n  };\n\n  // Function to toggle dates expansion\n  const toggleDatesExpansion = () => {\n    setShowAllDates(!showAllDates);\n  };\n\n  // Handle marking booking as completed\n  const handleMarkCompleted = async () => {\n    try {\n      setIsMarkingCompleted(true);\n      debugLog('MBA8675309: Marking booking as completed:', data.booking_id);\n      \n      const response = await markBookingCompleted(data.booking_id);\n      \n      debugLog('MBA8675309: Booking marked as completed successfully:', response);\n      \n      // Call the success callback if provided\n      if (onMarkCompletedSuccess) {\n        onMarkCompletedSuccess(response);\n      }\n    } catch (error) {\n      debugLog('MBA8675309: Error marking booking as completed:', error);\n      \n      // Extract error message from response\n      let errorMessage = 'Failed to mark booking as completed';\n      if (error.response?.data?.error) {\n        errorMessage = error.response.data.error;\n      }\n      \n      // Show toast with error message\n      setToastMessage(errorMessage);\n      setToastType('error');\n      setToastVisible(true);\n      \n      // Call the error callback if provided\n      if (onMarkCompletedError) {\n        onMarkCompletedError(error);\n      }\n    } finally {\n      setIsMarkingCompleted(false);\n    }\n  };\n\n  // Determine if we need to show the \"Show More\" button\n  const occurrences = data.occurrences || [];\n  const hasMoreDates = occurrences.length > 3;\n  \n  // Get visible occurrences based on expanded state\n  const visibleOccurrences = showAllDates ? occurrences : occurrences.slice(0, 3);\n  \n  // Count how many more dates are hidden\n  const hiddenDatesCount = Math.max(0, occurrences.length - 3);\n\n  return (\n    <View style={getCardStyle()}>\n      {/* Green bar on left or right side based on sender */}\n      {shouldShowAsApproval && (\n        <View style={[\n          styles.colorBar, \n          isFromMe ? styles.colorBarLeft : styles.colorBarRight\n        ]} />\n      )}\n      \n      {/* Green border for confirmation message */}\n      {isBookingConfirmed && (\n        <View style={styles.confirmationBorder} />\n      )}\n      \n      <View style={styles.cardContent}>\n        <View style={getHeaderStyle()}>\n          <MaterialCommunityIcons \n            name={getIcon()} \n            size={24} \n            color={isChangeRequest ? theme.colors.warning : \n                   isBookingConfirmed ? theme.colors.success : theme.colors.primary}\n          />\n          <Text style={[\n            styles.title,\n            isChangeRequest ? styles.changeRequestTitle : \n            isBookingConfirmed ? styles.confirmedTitle :\n            shouldShowAsApproval ? styles.approvalTitle : styles.requestTitle\n          ]}>\n            {getTitle()}\n          </Text>\n        </View>\n\n        <View style={styles.content}>\n          {/* Booking confirmation message specific content */}\n          {isBookingConfirmed ? (\n            <>\n              {/* Card content is clickable to view details */}\n              <TouchableOpacity \n                style={styles.confirmationContainerClickable}\n                onPress={handleOpenApprovalModal}\n                activeOpacity={0.7}\n              >\n                <View style={styles.confirmationContainer}>\n                  <Text style={styles.confirmationText}>\n                    This booking has been confirmed and is ready to go!\n                  </Text>\n                </View>\n                \n                <View style={styles.infoSection}>\n                  <View style={styles.row}>\n                    <Text style={styles.label}>Booking ID:</Text>\n                    <Text style={styles.value}>{data.booking_id || 'N/A'}</Text>\n                  </View>\n                  \n                  <View style={styles.row}>\n                    <Text style={styles.label}>Service:</Text>\n                    <Text style={styles.value}>{data.service_type || 'N/A'}</Text>\n                  </View>\n\n                  <View style={styles.row}>\n                    <Text style={styles.label}>{isProfessional ? 'Your Payout:' : 'Total Cost:'}</Text>\n                    <Text style={styles.value}>\n                      ${isProfessional ? \n                        (data.cost_summary?.total_sitter_payout || '0.00') : \n                        (data.cost_summary?.total_client_cost || '0.00')}\n                    </Text>\n                  </View>\n                </View>\n              </TouchableOpacity>\n              \n              {/* Buttons are separate from the clickable card content */}\n              <View style={[styles.buttonContainer, isProfessional ? { flexDirection: 'column', gap: 8 } : {}]}>\n                {/* View Details button - always enabled */}\n                <TouchableOpacity\n                  style={[styles.detailsButton, { flex: 1, backgroundColor: theme.colors.surfaceContrast, borderColor: theme.colors.black, borderWidth: 1 }]}\n                  onPress={handleOpenApprovalModal}\n                >\n                  <Text style={[styles.detailsButtonText, { color: theme.colors.black, textColor: theme.colors.black }]}>View Details</Text>\n                </TouchableOpacity>\n                \n                {/* Edit Details button for professionals - disabled if booking is completed */}\n                {isProfessional && onEditDraft && (\n                  <TouchableOpacity \n                    style={[\n                      styles.editButton, \n                      { flex: 1 }\n                    ]}\n                    onPress={onEditDraft}\n                    disabled={isBookingCompleted}\n                  >\n                    <Text style={[\n                      styles.editButtonText\n                    ]}>\n                      Edit Details\n                    </Text>\n                  </TouchableOpacity>\n                )}\n                \n                {/* Mark as Completed button for professionals - disabled if booking is completed */}\n                {isProfessional && isBookingConfirmed && isConfirmed && (\n                  <TouchableOpacity \n                    style={[\n                      styles.completeButton, \n                      { flex: 1 },\n                      isMarkingCompleted ? styles.disabledButton : {}\n                    ]}\n                    onPress={handleMarkCompleted}\n                    disabled={isBookingCompleted || isMarkingCompleted}\n                  >\n                    <Text style={[\n                      styles.completeButtonText,\n                      isMarkingCompleted ? styles.disabledButtonText : {}\n                    ]}>\n                      {isMarkingCompleted ? 'Marking...' : 'Mark as Completed'}\n                    </Text>\n                  </TouchableOpacity>\n                )}\n              </View>\n            </>\n          ) : (\n            /* Original content for other message types */\n            <>\n              <View style={styles.infoSection}>\n                <View style={styles.row}>\n                  <Text style={styles.label}>Booking ID:</Text>\n                  <Text style={styles.value}>{data.booking_id || 'N/A'}</Text>\n                </View>\n                <View style={styles.row}>\n                  <Text style={styles.label}>Service:</Text>\n                  <Text style={styles.value}>{data.service_type || 'N/A'}</Text>\n                </View>\n\n                <View style={styles.row}>\n                  <Text style={styles.label}>{isProfessional ? 'Your Payout:' : 'Total Cost:'}</Text>\n                  <Text style={styles.value}>\n                    ${getCostValue()}\n                  </Text>\n                </View>\n              </View>\n\n              <View style={styles.datesSection}>\n                {type !== 'request_changes' ? (\n                  <View style={styles.datesSectionHeader}>\n                    <Text style={styles.label}>Dates:</Text>\n                    {hasMoreDates && (\n                      <Text style={styles.datesCount}>({occurrences.length} total)</Text>\n                    )}\n                  </View>\n                ) : (\n                  null\n                )}\n                {visibleOccurrences.map((occ, index) => {\n                  const isLastVisibleItem = index === visibleOccurrences.length - 1;\n                  const showBottomBorder = !(!showAllDates && isLastVisibleItem && hasMoreDates);\n                  \n                  return (\n                    <View \n                      key={index} \n                      style={[\n                        styles.occurrenceContainer,\n                        showBottomBorder ? null : { borderBottomWidth: 0 }\n                      ]}\n                    >\n                      <View style={styles.occurrenceItem}>\n                        <Text style={styles.dateTimeText}>\n                          {formatOccurrenceDateRange(occ)}\n                        </Text>\n                        <Text style={styles.durationText}>\n                          Event Duration: {getOccurrenceDuration(occ)} ({occ.timezone || userTimezone.split('/')[1] || userTimezone})\n                        </Text>\n                        {occ.dst_message ? (\n                          <Text style={styles.dstMessage}>\n                            {occ.dst_message}\n                          </Text>\n                        ) : null}\n                      </View>\n                    </View>\n                  );\n                })}\n\n                {/* Show more/less dates button */}\n                {hasMoreDates && (\n                  <TouchableOpacity \n                    style={styles.showMoreButton} \n                    onPress={toggleDatesExpansion}\n                  >\n                    <Text style={styles.showMoreText}>\n                      {showAllDates ? \"Show Fewer Dates\" : `Show ${hiddenDatesCount} More Date${hiddenDatesCount !== 1 ? 's' : ''}`}\n                    </Text>\n                    <MaterialCommunityIcons \n                      name={showAllDates ? \"chevron-up\" : \"chevron-down\"} \n                      size={18} \n                      color={theme.colors.primary} \n                    />\n                  </TouchableOpacity>\n                )}\n              </View>\n\n              {isChangeRequest && (\n                <View style={styles.changeMessageContainer}>\n                  <Text style={styles.changeMessageLabel}>Change Request Message:</Text>\n                  <Text style={styles.changeMessageText}>{data.content || 'No details provided'}</Text>\n                </View>\n              )}\n\n              <View style={styles.buttonContainer}>\n                {/* Review Details button - visible to both users */}\n                <TouchableOpacity \n                  style={[\n                    styles.detailsButton,\n                    { borderColor: theme.colors.black, borderWidth: 1 },\n                    // Only disable the button if it's a regular message with the Booking Confirmed overlay\n                    // Don't disable for isAfterConfirmation messages (booking updates) or displayType === 'booking_update'\n                    (isConfirmed && !isBookingConfirmed && !isAfterConfirmation && displayType !== 'booking_update') && styles.disabledButton\n                  ]}\n                  onPress={handleOpenApprovalModal}\n                  disabled={isConfirmed && !isBookingConfirmed && !isAfterConfirmation && displayType !== 'booking_update'}\n                >\n                  <Text style={styles.detailsButtonText}>\n                    {isBookingConfirmed ? \"View Details\" : \"Review Details\"}\n                  </Text>\n                </TouchableOpacity>\n                \n                {/* Approve button - only visible to clients for approval requests */}\n                {type === 'approval' && !isProfessional && !isConfirmed && !hasChangeRequest && (\n                  <TouchableOpacity \n                    style={styles.approveButton}\n                    onPress={handleApprove}\n                  >\n                    <Text style={styles.approveButtonText}>Approve</Text>\n                  </TouchableOpacity>\n                )}\n                \n                {/* Edit button - visible to pros for booking requests */}\n                {type === 'request' && isProfessional && onEditDraft && !isConfirmed && (\n                  <TouchableOpacity \n                    style={styles.editButton}\n                    onPress={onEditDraft}\n                  >\n                    <Text style={styles.editButtonText}>Edit Draft</Text>\n                  </TouchableOpacity>\n                )}\n                \n                {/* Edit Details button - visible to pros for change requests */}\n                {isChangeRequest && isProfessional && onEditDraft && (\n                  <TouchableOpacity \n                    style={styles.editButton}\n                    onPress={onEditDraft}\n                  >\n                    <Text style={styles.editButtonText}>Edit Details</Text>\n                  </TouchableOpacity>\n                )}\n              </View>\n            </>\n          )}\n        </View>\n      </View>\n\n      {/* Status Overlay - shown on confirmed bookings or approval messages with changes requested */}\n      {shouldShowOverlay && (\n        <View style={styles.statusOverlay}>\n          <Text style={styles.statusText}>\n            {overlayText}\n          </Text>\n        </View>\n      )}\n\n      {/* Approval Modal */}\n      <BookingApprovalModal\n        visible={approvalModalVisible}\n        onClose={() => setApprovalModalVisible(false)}\n        bookingId={data.booking_id}\n        onApproveSuccess={handleApprovalSuccess}\n        onApproveError={handleApprovalError}\n        onRequestChangesSuccess={handleRequestChangesSuccess}\n        onRequestChangesError={handleRequestChangesError}\n        initialData={safeInitialData}\n        isProfessional={isProfessional}\n        // Only set read-only mode for confirmed messages that aren't booking updates\n        isReadOnly={(isConfirmed || isBookingConfirmed) && displayType !== 'booking_update' && !isAfterConfirmation}\n        // Only hide buttons for confirmed messages that aren't booking updates\n        hideButtons={(isConfirmed || isBookingConfirmed) && displayType !== 'booking_update' && !isAfterConfirmation}\n        modalTitle={\n          displayType === 'booking_update' ? \"Booking Update\" :\n          isAfterConfirmation ? \"Booking Update\" :\n          isBookingConfirmed || isConfirmed ? \"Booking Details\" : \n          \"Booking Approval Request\"\n        }\n      />\n\n      {/* Toast component for error messages */}\n      <Toast \n        visible={toastVisible}\n        message={toastMessage}\n        type={toastType}\n        onDismiss={() => setToastVisible(false)}\n        duration={7000}\n      />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  card: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 12,\n    padding: 0, // Removed padding here as it's now on cardContent\n    margin: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    maxWidth: '80%',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n    overflow: 'hidden', // To ensure the green bar doesn't overflow\n    position: 'relative', // To position the green bar\n  },\n  sentCard: {\n    alignSelf: 'flex-end',\n    marginLeft: '20%',\n  },\n  receivedCard: {\n    alignSelf: 'flex-start',\n    marginRight: '20%',\n  },\n  approvalCard: {\n    borderColor: theme.colors.border, // Changed to regular border color\n    borderWidth: 1,\n  },\n  confirmedCard: {\n    borderColor: theme.colors.success,\n    borderWidth: 2,\n  },\n  colorBar: {\n    width: 4, // Width of the green vertical bar\n    backgroundColor: theme.colors.primary, // Green color\n    position: 'absolute',\n    top: 0,\n    bottom: 0,\n    zIndex: 1,\n  },\n  colorBarLeft: {\n    left: 0,\n  },\n  colorBarRight: {\n    right: 0,\n  },\n  cardContent: {\n    padding: 12, // Moved padding here from card\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8,\n    paddingBottom: 8,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n    gap: 8,\n  },\n  requestHeader: {\n    borderBottomColor: theme.colors.border + '40',\n  },\n  approvalHeader: {\n    borderBottomColor: theme.colors.border + '40',\n  },\n  confirmedHeader: {\n    borderBottomColor: theme.colors.success,\n  },\n  title: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  requestTitle: {\n    color: theme.colors.primary,\n  },\n  approvalTitle: {\n    color: theme.colors.primary, // Keep the approval request text the same color\n  },\n  changeRequestTitle: {\n    color: theme.colors.warning, // Orange color for change requests\n  },\n  content: {\n    gap: 8,\n  },\n  infoSection: {\n    gap: 4,\n    paddingBottom: 8,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border + '40',\n  },\n  row: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 8,\n  },\n  label: {\n    fontSize: 14,\n    fontWeight: '500',\n    color: theme.colors.text,\n    minWidth: 80,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  value: {\n    fontSize: 14,\n    color: theme.colors.text,\n    flex: 1,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  datesSection: {\n    gap: 4,\n  },\n  datesSectionHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  datesCount: {\n    fontSize: 14,\n    color: theme.colors.placeholder,\n    marginLeft: 8,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  occurrenceContainer: {\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border + '40',\n    paddingBottom: 8,\n    marginBottom: 4,\n  },\n  occurrenceItem: {\n    gap: 2,\n    marginLeft: 4,\n  },\n  dateTimeText: {\n    fontSize: 14,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontStyle: 'italic', // Italicized date text\n  },\n  durationText: {\n    fontSize: 14,\n    color: theme.colors.placeHolderText, // Changed to placeholder text color\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  dstMessage: {\n    fontSize: 12,\n    color: theme.colors.error,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 8,\n    gap: 8,\n  },\n  detailsButton: {\n    flex: 1,\n    padding: 8,\n    borderRadius: 8,\n    alignItems: 'center',\n    // backgroundColor: theme.colors.primary, // Changed to primary color\n  },\n  detailsButtonText: {\n    // color: 'white', // Changed text color to white for better contrast\n    fontSize: 14,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  approveButton: {\n    flex: 1,\n    padding: 8,\n    borderRadius: 8,\n    alignItems: 'center',\n    backgroundColor: theme.colors.primary,\n  },\n  approveButtonText: {\n    color: theme.colors.whiteText,\n    fontSize: 14,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  editButton: {\n    flex: 1,\n    padding: 8,\n    borderRadius: 8,\n    alignItems: 'center',\n    backgroundColor: theme.colors.surface,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  editButtonText: {\n    color: theme.colors.text,\n    fontSize: 14,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  disabledButton: {\n    backgroundColor: theme.colors.border,\n    opacity: 0.6,\n  },\n  disabledButtonText: {\n    color: theme.colors.placeHolderText,\n  },\n  statusOverlay: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    backgroundColor: 'rgba(0, 0, 0, 0.4)',\n    alignItems: 'center',\n    justifyContent: 'center',\n    zIndex: 2,\n  },\n  statusText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: 'bold',\n    padding: 8,\n    backgroundColor: 'rgba(0, 0, 0, 0.6)',\n    borderRadius: 4,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  changeMessageContainer: {\n    backgroundColor: theme.colors.background,\n    borderRadius: 8,\n    padding: 8,\n    marginTop: 4,\n    marginBottom: 4,\n    borderLeftWidth: 3,\n    borderLeftColor: theme.colors.warning,\n  },\n  changeMessageLabel: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: theme.colors.text,\n    marginBottom: 4,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  changeMessageText: {\n    fontSize: 14,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    // fontStyle: 'italic',\n  },\n  showMoreButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 8,\n    marginTop: 8,\n    marginBottom: 4,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.primary + '40',\n    paddingHorizontal: 12,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.1,\n    shadowRadius: 1,\n    elevation: 1,\n  },\n  showMoreText: {\n    fontSize: 14,\n    color: theme.colors.primary,\n    marginRight: 5,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  confirmationContainerClickable: {\n    flex: 1,\n    width: '100%',\n    borderRadius: 8,\n  },\n  confirmationContainer: {\n    backgroundColor: theme.colors.primary + '15', // Light green background\n    padding: 12,\n    borderRadius: 8,\n    marginBottom: 8,\n  },\n  confirmationText: {\n    fontSize: 14,\n    color: theme.colors.text,\n    textAlign: 'center',\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '500',\n  },\n  confirmedTitle: {\n    color: theme.colors.primary,\n  },\n  confirmationBorder: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    height: 4,\n    backgroundColor: theme.colors.primary,\n  },\n  completeButton: {\n    flex: 1,\n    padding: 8,\n    borderRadius: 8,\n    alignItems: 'center',\n    backgroundColor: theme.colors.primary,\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n  },\n  completeButtonText: {\n    color: 'white',\n    fontSize: 14,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default BookingMessageCard; ","import React from 'react';\nimport { View, Text, StyleSheet } from 'react-native';\nimport { Modal, Portal, Button } from 'react-native-paper';\nimport { theme } from '../styles/theme';\n\nconst DraftConfirmationModal = ({ visible, onClose, onContinueExisting, onCreateNew }) => {\n  return (\n    <Portal>\n      <Modal\n        visible={visible}\n        onDismiss={onClose}\n        contentContainerStyle={styles.modalContainer}\n      >\n        <View style={styles.content}>\n          <Text style={styles.title}>Existing Draft Found</Text>\n          <Text style={styles.description}>\n            Would you like to continue with the existing draft or start a new one?\n          </Text>\n          <View style={styles.buttonContainer}>\n            <Button\n              mode=\"outlined\"\n              onPress={onCreateNew}\n              style={styles.button}\n              textColor={theme.colors.error}\n            >\n              Create New\n            </Button>\n            <Button\n              mode=\"contained\"\n              onPress={onContinueExisting}\n              style={styles.button}\n            >\n              Continue Existing\n            </Button>\n          </View>\n        </View>\n      </Modal>\n    </Portal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  modalContainer: {\n    backgroundColor: theme.colors.surface,\n    padding: 20,\n    margin: 20,\n    borderRadius: 8,\n    maxWidth: 500,\n    alignSelf: 'center',\n  },\n  content: {\n    alignItems: 'center',\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginBottom: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  description: {\n    fontSize: 16,\n    marginBottom: 24,\n    textAlign: 'center',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    width: '100%',\n    gap: 16,\n  },\n  button: {\n    flex: 1,\n  },\n});\n\nexport default DraftConfirmationModal; ","import { useEffect, useCallback, useState, useRef } from 'react';\nimport websocketManager from '../utils/websocket';\nimport { getStorage, debugLog } from '../context/AuthContext';\nimport axios from 'axios';\nimport { API_BASE_URL } from '../config/config';\n\n/**\n * Custom hook to use WebSocket in React components\n * @param {string} messageType - Type of messages to subscribe to\n * @param {function} callback - Callback to handle received messages\n * @param {object} options - Additional options\n * @returns {object} WebSocket state and methods\n */\nconst useWebSocket = (messageType, callback, options = {}) => {\n  const { disabled = false, handlerId = Math.random().toString(36).substr(2, 9) } = options;\n  const [isConnected, setIsConnected] = useState(false);\n  const [connectionStatus, setConnectionStatus] = useState('disconnected');\n  const statusUpdateTimeRef = useRef(Date.now());\n  const handlerRegisteredRef = useRef(false);\n  const failedAttemptsRef = useRef(0);\n\n  // Initialize WebSocket connection\n  useEffect(() => {\n    if (disabled) return;\n\n    debugLog(`MBA3210: useWebSocket hook initializing for ${messageType}, handler ${handlerId}`);\n    let unregisterHandlers = [];\n    \n    const initialize = async () => {\n      try {\n        const token = await getStorage('userToken');\n        if (!token) {\n          debugLog('MBA3210: No token available for WebSocket connection');\n          return;\n        }\n        \n        // Initialize WebSocket connection\n        websocketManager.init(token);\n        \n        // Register handlers\n        if (messageType && !handlerRegisteredRef.current) {\n          // Register for specific message type\n          const unregister = websocketManager.registerHandler(\n            messageType, \n            callback, \n            `${handlerId}-${messageType}`\n          );\n          unregisterHandlers.push(unregister);\n          handlerRegisteredRef.current = true;\n          debugLog(`MBA3210: Registered handler for ${messageType}`);\n        }\n        \n        // Always register for connection status updates\n        const unregisterConn = websocketManager.registerHandler(\n          'connection',\n          (data) => {\n            const prevStatus = connectionStatus;\n            const prevConnected = isConnected;\n            statusUpdateTimeRef.current = Date.now();\n            \n            if (data.status === 'connected') {\n              debugLog('MBA3210: Setting connection status to connected');\n              setIsConnected(true);\n              setConnectionStatus('connected');\n              failedAttemptsRef.current = 0; // Reset failed attempts counter\n            } else {\n              debugLog('MBA3210: Setting connection status to disconnected');\n              setIsConnected(false);\n              setConnectionStatus('disconnected');\n            }\n            \n            debugLog(`MBA3210: Connection status changed in hook: ${prevStatus} -> ${data.status}`);\n            debugLog(`MBA3210: isConnected changed in hook: ${prevConnected} -> ${data.status === 'connected'}`);\n          },\n          `${handlerId}-connection`\n        );\n        unregisterHandlers.push(unregisterConn);\n        debugLog(`MBA3210: Registered connection status handler`);\n        \n        // Always register for user status updates (needed across components for online indicators)\n        const unregisterUserStatus = websocketManager.registerHandler(\n          'user_status_update',\n          (data) => {\n            // Call the callback if we're listening for user_status_update messages,\n            // or if the callback is meant to handle all message types\n            if (messageType === 'user_status_update' || messageType === '*') {\n              callback(data);\n            }\n            \n            debugLog(`MBA3210: Received user status update for user ${data.user_id}: ${data.is_online ? 'online' : 'offline'}`);\n          },\n          `${handlerId}-user_status_update`\n        );\n        unregisterHandlers.push(unregisterUserStatus);\n        debugLog(`MBA3210: Registered user status update handler`);\n        \n        // Check initial socket state\n        if (websocketManager.isConnected) {\n          debugLog('MBA3210: WebSocket manager reports connected on init, updating state');\n          setIsConnected(true);\n          setConnectionStatus('connected');\n        }\n        \n      } catch (error) {\n        debugLog(`MBA3210: Error initializing WebSocket in hook: ${error.message}`);\n      }\n    };\n    \n    initialize();\n    \n    // Check connection every second for the first 5 seconds\n    const initialConnectionCheck = setInterval(() => {\n      if (websocketManager.isConnected) {\n        debugLog('MBA3210: Initial connection check: WebSocket is connected');\n        setIsConnected(true);\n        setConnectionStatus('connected');\n        clearInterval(initialConnectionCheck);\n      } else {\n        debugLog('MBA3210: Initial connection check: WebSocket not connected yet');\n      }\n    }, 1000);\n    \n    // Clear the interval after 5 seconds if it hasn't been cleared already\n    const initialCheckTimeout = setTimeout(() => {\n      clearInterval(initialConnectionCheck);\n    }, 5000);\n    \n    // Cleanup handlers on unmount\n    return () => {\n      debugLog(`MBA3210: useWebSocket hook cleaning up for ${messageType}, handler ${handlerId}`);\n      unregisterHandlers.forEach(unregister => unregister());\n      clearInterval(initialConnectionCheck);\n      clearTimeout(initialCheckTimeout);\n      \n      handlerRegisteredRef.current = false;\n      \n      // We no longer disconnect WebSocket on unmount\n      // This allows the connection to persist when navigating between screens\n    };\n  }, [disabled, messageType, callback, handlerId]);\n  \n  // Add periodic check for connection status\n  useEffect(() => {\n    if (disabled) return;\n    \n    const checkStatus = setInterval(() => {\n      const now = Date.now();\n      const lastUpdate = statusUpdateTimeRef.current;\n      const secondsSinceUpdate = (now - lastUpdate) / 1000;\n      \n      // If it's been more than 30 seconds since we got a status update, check connection manually\n      if (secondsSinceUpdate > 30) {\n        debugLog(`MBA3210: [MY CONNECTION] No updates on MY OWN connection in ${secondsSinceUpdate.toFixed(0)} seconds, verifying status`);\n        \n        // Check actual connection state from the WebSocket manager\n        const actuallyConnected = websocketManager.isConnected;\n        \n        if (actuallyConnected !== isConnected) {\n          debugLog(`MBA3210: [MY CONNECTION] State mismatch detected - WebSocket manager: ${actuallyConnected}, hook state: ${isConnected}`);\n          \n          // Update our state to match reality\n          setIsConnected(actuallyConnected);\n          setConnectionStatus(actuallyConnected ? 'connected' : 'disconnected');\n        }\n        \n        // Try to send heartbeat if we think we're connected\n        if (isConnected) {\n          debugLog('MBA3210: [MY CONNECTION] Sending heartbeat to verify MY OWN connection');\n          websocketManager.send('heartbeat');\n        } else if (actuallyConnected) {\n          // Try to send heartbeat even if our state says we're not connected\n          // This helps ensure the backend knows we're still here\n          debugLog('MBA3210: [MY CONNECTION] Sending heartbeat despite disconnected state in hook');\n          websocketManager.send('heartbeat');\n        }\n        \n        // Reset the timer\n        statusUpdateTimeRef.current = now;\n      }\n    }, 15000); // Check every 15 seconds\n    \n    return () => clearInterval(checkStatus);\n  }, [disabled, isConnected]);\n\n  // Send a message through the WebSocket\n  const sendMessage = useCallback((type, data) => {\n    debugLog(`MBA3210: [MY CONNECTION] Attempting to send ${type} message through MY OWN WebSocket`);\n    \n    if (!isConnected) {\n      debugLog('MBA3210: [MY CONNECTION] Cannot send message, MY OWN WebSocket not connected, falling back to REST');\n      // Return a promise that resolves when the message is sent\n      return (async () => {\n        try {\n          const token = await getStorage('userToken');\n          if (!token) {\n            debugLog('MBA3210: [MY CONNECTION] No token available for REST message send');\n            return false;\n          }\n          \n          // Handle different message types\n          let endpoint = `${API_BASE_URL}/api/messages/v1/send_norm_message/`;\n          let payload = {\n            conversation_id: data.conversation_id,\n            content: data.content\n          };\n          \n          // Modify endpoint based on message type\n          if (type === 'request_booking') {\n            endpoint = `${API_BASE_URL}/api/messages/v1/send_request_booking/`;\n            // Add any additional booking request data\n            payload = {\n              ...payload,\n              ...data\n            };\n          }\n          \n          debugLog(`MBA3210: [MY CONNECTION] Sending message via REST API to ${endpoint} (fallback for failed WebSocket)`);\n          const response = await axios.post(endpoint, payload, {\n            headers: {\n              Authorization: `Bearer ${token}`,\n              'Content-Type': 'application/json'\n            }\n          });\n          \n          // Try WebSocket reconnection after sending message\n          setTimeout(() => {\n            if (websocketManager.reconnect) {\n              debugLog('MBA3210: [MY CONNECTION] Attempting reconnection after REST fallback');\n              websocketManager.reconnect();\n            }\n          }, 1000);\n          \n          return response.data;\n        } catch (error) {\n          debugLog(`MBA3210: [MY CONNECTION] Error sending message via REST fallback: ${error.message}`);\n          return false;\n        }\n      })();\n    }\n    \n    return websocketManager.send(type, data);\n  }, [isConnected]);\n\n  // Mark messages as read\n  const markMessagesAsRead = useCallback((conversationId, messageIds) => {\n    // Skip if no conversation or message IDs\n    if (!conversationId || !messageIds || messageIds.length === 0) {\n      debugLog('MBA3210: [MY CONNECTION] Skipping markMessagesAsRead - missing data');\n      return Promise.resolve(false);\n    }\n    \n    debugLog(`MBA3210: [MY CONNECTION] Marking messages as read for conversation ${conversationId}`);\n    \n    if (!isConnected) {\n      debugLog('MBA3210: [MY CONNECTION] Cannot mark messages as read through WebSocket, using REST API instead');\n      \n      // Return a promise that resolves when the messages are marked as read\n      return (async () => {\n        try {\n          const token = await getStorage('userToken');\n          if (!token) {\n            debugLog('MBA3210: [MY CONNECTION] No token available for REST mark as read');\n            return false;\n          }\n          \n          debugLog(`MBA3210: [MY CONNECTION] Sending mark_read via REST API for ${messageIds.length} messages (fallback)`);\n          const response = await axios.post(`${API_BASE_URL}/api/messages/v1/mark_read/`, {\n            conversation_id: conversationId,\n            message_ids: messageIds\n          }, {\n            headers: {\n              Authorization: `Bearer ${token}`,\n              'Content-Type': 'application/json'\n            }\n          });\n          \n          return response.data;\n        } catch (error) {\n          debugLog(`MBA3210: [MY CONNECTION] Error marking messages as read via REST fallback: ${error.message}`);\n          return false;\n        }\n      })();\n    }\n    \n    return websocketManager.markMessagesAsRead(conversationId, messageIds);\n  }, [isConnected]);\n\n  // Force a reconnection attempt\n  const reconnect = useCallback(() => {\n    debugLog('MBA3210: [MY CONNECTION] Hook requesting reconnection of MY OWN WebSocket');\n    \n    try {\n      // First reinitialize the connection\n      if (websocketManager.disconnect) {\n        debugLog('MBA3210: [MY CONNECTION] Disconnecting MY OWN existing WebSocket before reconnect');\n        websocketManager.disconnect();\n      }\n      \n      // Then attempt reconnection with a short delay\n      setTimeout(() => {\n        if (websocketManager.reconnect) {\n          debugLog('MBA3210: [MY CONNECTION] Calling websocketManager.reconnect() for MY OWN connection');\n          websocketManager.reconnect();\n        } else if (websocketManager.connect) {\n          debugLog('MBA3210: [MY CONNECTION] Calling websocketManager.connect() as fallback for MY OWN connection');\n          websocketManager.connect();\n        } else {\n          // If neither method exists, reinitialize the connection\n          debugLog('MBA3210: [MY CONNECTION] No reconnect method found, reinitializing MY OWN connection');\n          getStorage('userToken').then(token => {\n            if (token) {\n              websocketManager.init(token);\n            } else {\n              debugLog('MBA3210: [MY CONNECTION] No token available for WebSocket reconnection');\n            }\n          }).catch(error => {\n            debugLog(`MBA3210: [MY CONNECTION] Error getting token for reconnection: ${error.message}`);\n          });\n        }\n      }, 300);  // Short delay to ensure disconnect completes\n    } catch (error) {\n      debugLog(`MBA3210: [MY CONNECTION] Error during reconnection of MY OWN connection: ${error.message}`);\n    }\n  }, []);\n\n  // Explicitly disconnect the WebSocket\n  const disconnect = useCallback(() => {\n    if (disabled) return;\n    \n    debugLog(`MBA3210: useWebSocket hook explicitly disconnecting for ${messageType}, handler ${handlerId}`);\n    websocketManager.disconnect();\n    \n    // Update local state\n    setIsConnected(false);\n    setConnectionStatus('disconnected');\n    failedAttemptsRef.current = 0;\n  }, [disabled, messageType, handlerId]);\n\n  // Return WebSocket state and methods\n  return {\n    isConnected,\n    connectionStatus,\n    sendMessage,\n    markMessagesAsRead, \n    reconnect: websocketManager.reconnect ? websocketManager.reconnect.bind(websocketManager) : null,\n    disconnect,\n    simulateConnection: websocketManager.connect ? websocketManager.connect.bind(websocketManager) : null,\n    isUsingFallback: !isConnected\n  };\n};\n\nexport default useWebSocket; ","import { Platform, Alert } from 'react-native';\nimport { debugLog } from '../context/AuthContext';\n\n/**\n * Download and save an image to the device\n * Works across web, iOS, and Android platforms\n * \n * @param {string} imageUrl - The URL of the image to download\n * @param {string} filename - Optional filename for the downloaded image\n * @returns {Promise<Object>} - Result object with success status and file path\n */\nexport const downloadImage = async (imageUrl, filename = null) => {\n  try {\n    // Validate input\n    if (!imageUrl || typeof imageUrl !== 'string') {\n      throw new Error('Invalid image URL provided');\n    }\n\n    debugLog('MBA8765: Starting image download', {\n      imageUrl: imageUrl.substring(0, 50) + '...',\n      platform: Platform.OS,\n      filename\n    });\n\n    if (Platform.OS === 'web') {\n      return await downloadImageWeb(imageUrl, filename);\n    } else {\n      return await downloadImageNative(imageUrl, filename);\n    }\n  } catch (error) {\n    debugLog('MBA8765: Error downloading image:', error);\n    throw error;\n  }\n};\n\n/**\n * Check if the current browser is mobile\n * @returns {boolean} - Whether the browser is mobile\n */\nconst isMobileBrowser = () => {\n  if (typeof navigator === 'undefined') return false;\n  \n  const userAgent = navigator.userAgent.toLowerCase();\n  return /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(userAgent);\n};\n\n/**\n * Download image on web platform\n * @param {string} imageUrl - The URL of the image to download\n * @param {string} filename - Optional filename for the downloaded image\n * @returns {Promise<Object>} - Result object\n */\nconst downloadImageWeb = async (imageUrl, filename) => {\n  try {\n    // Generate filename if not provided\n    const downloadFilename = filename || generateFilename(imageUrl);\n    \n    debugLog('MBA8765: Attempting web download', {\n      imageUrl: imageUrl.substring(0, 50) + '...',\n      downloadFilename,\n      isMobile: isMobileBrowser()\n    });\n\n    // For mobile browsers, use direct download approach\n    if (isMobileBrowser()) {\n      debugLog('MBA8765: Using mobile browser download approach');\n      \n      // Create a temporary anchor element for direct download\n      const link = document.createElement('a');\n      link.href = imageUrl;\n      link.download = downloadFilename;\n      link.target = '_blank';\n      \n      // Set crossOrigin to handle CORS issues\n      link.crossOrigin = 'anonymous';\n      \n      // Append to document, click, and remove\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      \n      debugLog('MBA8765: Mobile browser download initiated', {\n        filename: downloadFilename,\n        url: imageUrl.substring(0, 50) + '...'\n      });\n      \n      return {\n        success: true,\n        platform: 'web',\n        filename: downloadFilename,\n        message: 'Download started (mobile)'\n      };\n    }\n\n    // For desktop browsers, use the fetch + blob approach\n    debugLog('MBA8765: Using desktop browser download approach');\n    \n    // First, try to fetch the image to handle CORS issues\n    const response = await fetch(imageUrl, {\n      method: 'GET',\n      mode: 'cors',\n      credentials: 'same-origin'\n    });\n\n    if (!response.ok) {\n      throw new Error(`Failed to fetch image: ${response.status} ${response.statusText}`);\n    }\n\n    // Convert the response to a blob\n    const blob = await response.blob();\n    \n    // Create a blob URL\n    const blobUrl = URL.createObjectURL(blob);\n    \n    // Create a temporary anchor element\n    const link = document.createElement('a');\n    link.href = blobUrl;\n    link.download = downloadFilename;\n    link.target = '_blank';\n    \n    // Append to document, click, and remove\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n    \n    // Clean up the blob URL\n    setTimeout(() => {\n      URL.revokeObjectURL(blobUrl);\n    }, 1000);\n    \n    debugLog('MBA8765: Desktop browser download initiated', {\n      filename: downloadFilename,\n      url: imageUrl.substring(0, 50) + '...',\n      blobSize: blob.size\n    });\n    \n    return {\n      success: true,\n      platform: 'web',\n      filename: downloadFilename,\n      message: 'Download started (desktop)'\n    };\n  } catch (error) {\n    debugLog('MBA8765: Error downloading image on web:', error);\n    \n    // Fallback to direct download if fetch fails\n    try {\n      debugLog('MBA8765: Trying fallback direct download');\n      \n      const downloadFilename = filename || generateFilename(imageUrl);\n      \n      // Create a temporary anchor element for direct download\n      const link = document.createElement('a');\n      link.href = imageUrl;\n      link.download = downloadFilename;\n      link.target = '_blank';\n      \n      // Set crossOrigin to handle CORS issues\n      link.crossOrigin = 'anonymous';\n      \n      // Append to document, click, and remove\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      \n      debugLog('MBA8765: Fallback download initiated on web', {\n        filename: downloadFilename,\n        url: imageUrl.substring(0, 50) + '...'\n      });\n      \n      return {\n        success: true,\n        platform: 'web',\n        filename: downloadFilename,\n        message: 'Download started (fallback)'\n      };\n    } catch (fallbackError) {\n      debugLog('MBA8765: Fallback download also failed:', fallbackError);\n      throw new Error('Failed to download image on web platform');\n    }\n  }\n};\n\n/**\n * Download image on native platforms (iOS/Android)\n * @param {string} imageUrl - The URL of the image to download\n * @param {string} filename - Optional filename for the downloaded image\n * @returns {Promise<Object>} - Result object\n */\nconst downloadImageNative = async (imageUrl, filename) => {\n  try {\n    // Generate filename if not provided\n    const downloadFilename = filename || generateFilename(imageUrl);\n    \n    // On native platforms, we can't directly download to file system\n    // without additional permissions and setup. Instead, we'll show\n    // the user how to save the image\n    \n    Alert.alert(\n      'Save Image',\n      'To save this image:\\n\\n1. Tap and hold the image\\n2. Select \"Save Image\" or \"Download\"\\n\\nOr open the image in your browser to save it.',\n      [\n        {\n          text: 'Open in Browser',\n          onPress: () => {\n            // Open the image URL in the device's default browser\n            const { Linking } = require('react-native');\n            Linking.openURL(imageUrl).catch(error => {\n              debugLog('MBA8765: Error opening URL in browser:', error);\n            });\n          }\n        },\n        {\n          text: 'Cancel',\n          style: 'cancel'\n        }\n      ]\n    );\n    \n    debugLog('MBA8765: Image download dialog shown on native platform', {\n      platform: Platform.OS,\n      filename: downloadFilename,\n      url: imageUrl.substring(0, 50) + '...'\n    });\n    \n    return {\n      success: true,\n      platform: Platform.OS,\n      filename: downloadFilename,\n      message: 'Download dialog shown'\n    };\n  } catch (error) {\n    debugLog('MBA8765: Error downloading image on native platform:', error);\n    throw new Error(`Failed to download image on ${Platform.OS} platform`);\n  }\n};\n\n/**\n * Generate a filename from an image URL\n * @param {string} imageUrl - The image URL\n * @returns {string} - Generated filename\n */\nconst generateFilename = (imageUrl) => {\n  try {\n    // Extract filename from URL\n    const urlParts = imageUrl.split('/');\n    const lastPart = urlParts[urlParts.length - 1];\n    \n    // Remove query parameters\n    const filename = lastPart.split('?')[0];\n    \n    // If filename has extension, use it\n    if (filename.includes('.')) {\n      return filename;\n    }\n    \n    // Otherwise, generate a filename with timestamp\n    const timestamp = new Date().getTime();\n    return `image_${timestamp}.jpg`;\n  } catch (error) {\n    // Fallback to timestamp-based filename\n    const timestamp = new Date().getTime();\n    return `image_${timestamp}.jpg`;\n  }\n};\n\n/**\n * Check if the platform supports direct file downloads\n * @returns {boolean} - Whether direct downloads are supported\n */\nexport const supportsDirectDownload = () => {\n  return Platform.OS === 'web';\n};\n\n/**\n * Get platform-specific download instructions\n * @returns {string} - Instructions for the current platform\n */\nexport const getDownloadInstructions = () => {\n  if (Platform.OS === 'web') {\n    return 'The image will be downloaded to your default downloads folder.';\n  } else if (Platform.OS === 'ios') {\n    return 'Tap and hold the image, then select \"Save Image\" to save it to your Photos.';\n  } else {\n    return 'Tap and hold the image, then select \"Save Image\" or \"Download\" to save it to your device.';\n  }\n};\n\n/**\n * Validate if a URL is a valid image URL\n * @param {string} url - The URL to validate\n * @returns {boolean} - Whether the URL is a valid image URL\n */\nexport const isValidImageUrl = (url) => {\n  if (!url || typeof url !== 'string') {\n    return false;\n  }\n  \n  // Check if it's a valid URL\n  try {\n    new URL(url);\n  } catch {\n    return false;\n  }\n  \n  // Check if it has an image extension\n  const imageExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.bmp', '.webp'];\n  const hasImageExtension = imageExtensions.some(ext => \n    url.toLowerCase().includes(ext)\n  );\n  \n  // If it has an image extension, it's valid\n  if (hasImageExtension) {\n    return true;\n  }\n  \n  // For URLs without extensions (like API endpoints), we'll be more lenient\n  // and assume they're valid if they're HTTP/HTTPS URLs\n  if (url.startsWith('http://') || url.startsWith('https://')) {\n    return true;\n  }\n  \n  return false;\n}; ","import React from 'react';\nimport { View, Modal, Image, TouchableOpacity, StyleSheet, SafeAreaView, StatusBar, Platform } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { debugLog } from '../../context/AuthContext';\nimport { getMediaUrl } from '../../config/config';\nimport { downloadImage, isValidImageUrl } from '../../utils/imageDownloadUtils';\nimport { useToast } from '../ToastProvider';\n\nconst ImageViewer = ({ visible, imageUrl, onClose }) => {\n  const showToast = useToast();\n  \n  // Process the image URL - add MEDIA_URL prefix if needed\n  const processedImageUrl = getMediaUrl(imageUrl);\n  \n  // Check if we should show the save button\n  const shouldShowSaveButton = () => {\n    if (Platform.OS === 'web') {\n      // Only show on desktop browsers, not mobile browsers\n      const isMobile = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase());\n      return !isMobile;\n    }\n    // Show on iOS and Android\n    return Platform.OS === 'ios' || Platform.OS === 'android';\n  };\n    \n  debugLog('MBA7654: Showing image viewer', {\n    visible,\n    originalUrl: imageUrl,\n    processedUrl: processedImageUrl,\n    platform: Platform.OS,\n    showSaveButton: shouldShowSaveButton()\n  });\n\n  // Handle save button press\n  const handleSaveImage = async () => {\n    try {\n      debugLog('MBA8765: Save button pressed', {\n        imageUrl: imageUrl.substring(0, 50) + '...',\n        processedImageUrl: processedImageUrl.substring(0, 50) + '...',\n        platform: Platform.OS\n      });\n\n      // Validate the processed image URL (the one with getMediaUrl applied)\n      if (!isValidImageUrl(processedImageUrl)) {\n        console.log('MBA8765: Invalid processed image URL detected');\n        showToast({\n          message: 'Invalid image URL. Cannot download this image.',\n          type: 'error',\n          duration: 4000\n        });\n        return;\n      }\n\n      console.log('MBA8765: About to call downloadImage with processed URL');\n      const result = await downloadImage(processedImageUrl);\n      \n      debugLog('MBA8765: Image download result:', result);\n      console.log('MBA8765: Download result:', result);\n      \n      // Show success toast based on platform\n      if (Platform.OS === 'web') {\n        showToast({\n          message: 'Image download started!',\n          type: 'success',\n          duration: 3000\n        });\n      } else {\n        showToast({\n          message: 'Image opened in browser. You can save it from there.',\n          type: 'info',\n          duration: 4000\n        });\n      }\n      \n    } catch (error) {\n      debugLog('MBA8765: Error saving image:', error);\n      console.log('MBA8765: Error in handleSaveImage:', error);\n      \n      showToast({\n        message: 'Failed to save image. Please try again.',\n        type: 'error',\n        duration: 4000\n      });\n    }\n  };\n\n  return (\n    <Modal\n      visible={visible}\n      transparent={true}\n      animationType=\"fade\"\n      onRequestClose={onClose}\n    >\n      <SafeAreaView style={styles.container}>\n        <StatusBar backgroundColor=\"#000\" barStyle=\"light-content\" />\n        \n        {/* Close button */}\n        <TouchableOpacity \n          style={styles.closeButton} \n          onPress={onClose}\n          activeOpacity={0.7}\n          testID=\"image-viewer-close-button\"\n        >\n          <MaterialCommunityIcons name=\"close\" size={24} color=\"#FFF\" />\n        </TouchableOpacity>\n        \n        {/* Save button - only show on supported platforms */}\n        {shouldShowSaveButton() && (\n          <TouchableOpacity \n            style={styles.saveButton} \n            onPress={handleSaveImage}\n            activeOpacity={0.7}\n            testID=\"image-viewer-save-button\"\n          >\n            <MaterialCommunityIcons name=\"download\" size={24} color=\"#FFF\" />\n          </TouchableOpacity>\n        )}\n        \n        {/* Image container - clickable to close */}\n        <TouchableOpacity \n          style={styles.imageContainer}\n          activeOpacity={1}\n          onPress={onClose}\n          testID=\"image-viewer-container\"\n        >\n          <Image\n            source={{ uri: processedImageUrl }}\n            style={styles.image}\n            resizeMode=\"contain\"\n            testID=\"image-viewer-image\"\n          />\n        </TouchableOpacity>\n      </SafeAreaView>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: 'rgba(0,0,0,0.9)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  imageContainer: {\n    flex: 1,\n    width: '100%',\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 1, // Lower z-index so buttons are on top\n  },\n  image: {\n    width: '100%',\n    height: '100%',\n    maxWidth: Platform.OS === 'web' ? '90vw' : undefined,\n    maxHeight: Platform.OS === 'web' ? '90vh' : undefined,\n  },\n  closeButton: {\n    position: 'absolute',\n    top: 20,\n    right: 20,\n    backgroundColor: 'rgba(0,0,0,0.5)',\n    borderRadius: 20,\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 20, // Higher z-index to be on top\n  },\n  saveButton: {\n    position: 'absolute',\n    bottom: 20,\n    right: 20,\n    backgroundColor: 'rgba(0,0,0,0.5)',\n    borderRadius: 20,\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 20, // Higher z-index to be on top\n  },\n});\n\nexport default ImageViewer; ","import React from 'react';\nimport { TouchableOpacity, Image, StyleSheet } from 'react-native';\nimport { getMediaUrl } from '../../config/config';\nimport { debugLog } from '../../context/AuthContext';\n\n/**\n * A clickable image component that handles properly formatting image URLs\n * and provides a consistent interface for image display in messages\n */\nconst ClickableImage = ({ \n  imageUrl, \n  onPress, \n  style = {},\n  resizeMode = 'cover',\n  testID\n}) => {\n  // Process the image URL to ensure it has the API base URL if needed\n  const processedImageUrl = getMediaUrl(imageUrl);\n\n  // Handle press with the unprocessed URL so the parent component can process it\n  const handlePress = () => {\n    onPress && onPress(imageUrl);\n  };\n\n  return (\n    <TouchableOpacity \n      onPress={handlePress}\n      activeOpacity={0.9}\n      style={[styles.container, style.container]}\n      testID={testID}\n    >\n      <Image\n        source={{ uri: processedImageUrl }}\n        style={[styles.image, style.image]}\n        resizeMode={resizeMode}\n      />\n    </TouchableOpacity>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    overflow: 'hidden',\n    borderRadius: 8,\n    // marginVertical: 4,\n  },\n  image: {\n    width: 250,\n    height: 250,\n    borderRadius: 8,\n  }\n});\n\nexport default ClickableImage; ","import React from 'react';\nimport { View, Text, StyleSheet } from 'react-native';\nimport { theme } from '../../styles/theme';\n\n/**\n * Renders a date separator between message groups\n */\nconst MessageDateSeparator = ({ date }) => {\n  return (\n    <View style={styles.container}>\n      <View style={styles.line} />\n      <View style={styles.dateContainer}>\n        <Text style={styles.dateText}>{date}</Text>\n      </View>\n      <View style={styles.line} />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginVertical: 16,\n    paddingHorizontal: 16,\n    width: '100%',\n  },\n  line: {\n    flex: 1,\n    height: 1,\n    backgroundColor: theme.colors.border,\n  },\n  dateContainer: {\n    paddingHorizontal: 12,\n  },\n  dateText: {\n    fontSize: 14,\n    color: theme.colors.placeholder,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default MessageDateSeparator; ","import moment from 'moment-timezone';\nimport { debugLog } from '../../context/AuthContext';\nimport { formatFromUTC, FORMAT_TYPES } from '../../utils/time_utils';\n\n// Cache for formatted dates to avoid repeated calculations\nconst formatCache = {\n  times: new Map(),\n  dates: new Map()\n};\n\n// Clear cache when it gets too large\nconst clearCacheIfNeeded = () => {\n  if (formatCache.times.size > 1000) {\n    formatCache.times.clear();\n  }\n  if (formatCache.dates.size > 100) {\n    formatCache.dates.clear();\n  }\n};\n\n/**\n * Formats a message timestamp to display in a message bubble\n * \n * @param {string} timestamp - The message timestamp in UTC format\n * @param {string} userTimezone - The user's timezone\n * @returns {string} - Formatted time (e.g., \"7:13 PM\")\n */\nexport const formatMessageTime = (timestamp, userTimezone) => {\n  try {\n    if (!timestamp) return '';\n    \n    // Use default timezone if userTimezone is null/undefined\n    const targetTimezone = userTimezone || 'US/Mountain';\n    \n    // Check cache first\n    const cacheKey = `${timestamp}:${targetTimezone}`;\n    if (formatCache.times.has(cacheKey)) {\n      return formatCache.times.get(cacheKey);\n    }\n    \n    // Extract date and time parts from timestamp\n    const dateTimeMatch = timestamp.match(/^(\\d{4}-\\d{2}-\\d{2})T(\\d{2}:\\d{2}):/);\n    \n    let result;\n    if (!dateTimeMatch) {\n      // Fallback for invalid format\n      result = moment(timestamp).format('h:mm A');\n    } else {\n      const [, dateStr, timeStr] = dateTimeMatch;\n      \n      // Use the formatFromUTC function to convert and format\n      result = formatFromUTC(dateStr, timeStr, targetTimezone, FORMAT_TYPES.TIME_ONLY);\n    }\n    \n    // Cache the result\n    formatCache.times.set(cacheKey, result);\n    clearCacheIfNeeded();\n    \n    return result;\n  } catch (error) {\n    debugLog('MBA2349: Error formatting message time:', error);\n    // Fallback in case of error\n    return moment(timestamp).format('h:mm A');\n  }\n};\n\n/**\n * Formats a date for display in message groups\n * \n * @param {string} timestamp - The message timestamp in UTC format\n * @param {string} userTimezone - The user's timezone\n * @returns {string} - Formatted date (e.g., \"June 9, 2025\" or \"Today\" or \"Yesterday\")\n */\nexport const formatMessageDate = (timestamp, userTimezone) => {\n  try {\n    if (!timestamp) return '';\n    \n    // Use default timezone if userTimezone is null/undefined\n    const targetTimezone = userTimezone || 'US/Mountain';\n    \n    // Check cache first\n    const cacheKey = `${timestamp}:${targetTimezone}`;\n    if (formatCache.dates.has(cacheKey)) {\n      return formatCache.dates.get(cacheKey);\n    }\n    \n    // Extract message ID from timestamp if possible (for debugging)\n    const messageIdMatch = timestamp.match(/(\\d+)\\.(\\d+)Z$/);\n    const extractedId = messageIdMatch ? messageIdMatch[1] : 'unknown';\n    \n    \n    // Parse the UTC timestamp properly\n    const utcMoment = moment.utc(timestamp);\n    // Convert to user's timezone\n    const messageDate = utcMoment.tz(targetTimezone);\n    \n    // IMPORTANT: For testing purposes, use a fixed \"today\" date of 2025-06-09 if we're processing test messages\n    // This simulates the app running on that date to match our testing data\n    const isTestMessage = timestamp.includes('2025-06-09') || \n                          timestamp.includes('2025-06-08') || \n                          timestamp.includes('2025-06-06');\n    \n    // Use a fixed \"today\" date of 2025-06-09 to match our test data\n    const now = isTestMessage ? \n                moment('2025-06-09T12:00:00').tz(targetTimezone) : \n                moment().tz(targetTimezone);\n  \n    \n    // Get today and yesterday in user's timezone\n    const today = moment(Date.now()).tz(targetTimezone).startOf('day');\n    const yesterday = moment(Date.now()).tz(targetTimezone).subtract(1, 'day').startOf('day');\n    const messageDateStartOfDay = messageDate.clone().startOf('day');\n    \n    // Check if the date is today, yesterday, or another date\n    let result;\n    \n    // For test messages, use the mock date; for real messages, use the actual current date\n    // This allows test messages to show \"Today\" on the test date while real messages \n    // use the actual current date for Today/Yesterday labels\n    const realToday = moment(Date.now()).tz(targetTimezone);\n    const realYesterday = realToday.clone().subtract(1, 'day');\n    \n    // Compare using YYYY-MM-DD format for consistency\n    const messageDateKey = messageDate.format('YYYY-MM-DD');\n    \n    // Either use the real date or the mock date based on whether this is a test message\n    const todayToUse = isTestMessage ? today : realToday.clone().startOf('day');\n    const yesterdayToUse = isTestMessage ? yesterday : realYesterday.clone().startOf('day');\n    const todayKey = todayToUse.format('YYYY-MM-DD');\n    const yesterdayKey = yesterdayToUse.format('YYYY-MM-DD');\n    \n    // Log the comparison for debugging\n    \n    // Determine the display format\n    if (messageDateKey === todayKey) {\n      result = 'Today';\n    } else if (messageDateKey === yesterdayKey) {\n      result = 'Yesterday';\n    } else {\n      // For other dates, just format as month and day (same year) or with year (different year)\n      const yearToCompare = isTestMessage ? today.year() : realToday.year();\n      if (messageDate.year() === yearToCompare) {\n        result = messageDate.format('MMMM D');\n      } else {\n        result = messageDate.format('MMMM D, YYYY');\n      }\n    }\n    \n    \n    // Cache the result\n    formatCache.dates.set(cacheKey, result);\n    clearCacheIfNeeded();\n    \n    return result;\n  } catch (error) {\n    debugLog('MBA2349: Error formatting message date:', error);\n    // Fallback in case of error\n    return moment(timestamp).format('MMMM D, YYYY');\n  }\n};\n\n/**\n * Groups messages by date in user's timezone\n * \n * @param {Array} messages - Array of message objects\n * @param {string} userTimezone - The user's timezone\n * @returns {Object} - Object with dates as keys and arrays of message IDs as values\n */\nexport const groupMessagesByDate = (messages, userTimezone) => {\n  try {\n    if (!messages || !Array.isArray(messages)) return {};\n    \n    // Use default timezone if userTimezone is null/undefined\n    const targetTimezone = userTimezone || 'US/Mountain';\n    \n    const groups = {};\n    \n    // Debug log for specific messages we're troubleshooting\n    ['169', '177', '85', '44'].forEach(id => {\n      const specificMessage = messages.find(m => m.message_id.toString() === id);\n      if (specificMessage) {\n        debugLog('MBA3oub497v4: Found specific test message', {\n          messageId: specificMessage.message_id,\n          content: specificMessage.content,\n          timestamp: specificMessage.timestamp,\n          type: specificMessage.type_of_message\n        });\n      }\n    });\n    \n    messages.forEach(message => {\n      if (!message.timestamp) return;\n      \n      // Specifically log important messages for debugging\n      if (['169', '177', '85', '44'].includes(message.message_id.toString())) {\n        debugLog('MBA3oub497v4: Processing important test message for grouping', {\n          messageId: message.message_id,\n          timestamp: message.timestamp,\n          userTimezone: targetTimezone,\n          content: message.content.substring(0, 20) // Show just the beginning of content\n        });\n      }\n      \n      // Properly parse UTC timestamp\n      const utcMoment = moment.utc(message.timestamp);\n      // Convert to user's timezone\n      const localMoment = utcMoment.tz(targetTimezone);\n      // Get the date key in user's timezone\n      const dateKey = localMoment.format('YYYY-MM-DD');\n      \n      // Add more detailed logging for the problematic messages\n      if (['169', '177', '85', '44'].includes(message.message_id.toString())) {\n        debugLog('MBA3oub497v4: Detailed timezone conversion for message', {\n          messageId: message.message_id,\n          timestamp: message.timestamp,\n          utcDate: utcMoment.format('YYYY-MM-DD'),\n          localDate: localMoment.format('YYYY-MM-DD'),\n          dateKey,\n          utcFullTime: utcMoment.format(),\n          localFullTime: localMoment.format(),\n          tzOffset: moment.tz(targetTimezone).utcOffset() / 60,\n          userTimezone: targetTimezone\n        });\n      }\n      \n      // Create the group if it doesn't exist\n      if (!groups[dateKey]) {\n        groups[dateKey] = [];\n      }\n      \n      // Add the message ID to the group\n      groups[dateKey].push(message.message_id);\n    });\n    \n    // Add detailed debugging for group structure\n    debugLog('MBA3oub497v4: Message groups result', {\n      totalGroups: Object.keys(groups).length,\n      dateKeys: Object.keys(groups),\n      totalMessageIds: Object.values(groups).flat().length,\n      groupContents: Object.entries(groups).reduce((acc, [date, ids]) => {\n        acc[date] = ids.map(id => {\n          const msg = messages.find(m => m.message_id === id);\n          return {\n            id,\n            content: msg ? msg.content.substring(0, 15) : 'unknown'\n          };\n        });\n        return acc;\n      }, {})\n    });\n    \n    return groups;\n  } catch (error) {\n    debugLog('MBA2349: Error grouping messages by date:', error);\n    return {};\n  }\n};\n\n/**\n * Determines if a message should show a timestamp\n * Based on rules:\n * - First message of a sequence should have a timestamp\n * - Messages sent more than 1 minute apart should have timestamps\n * \n * @param {Object} message - Current message object\n * @param {Object} prevMessage - Previous message object (chronologically later in inverted list)\n * @param {boolean} isFirstInGroup - Whether this is the first message in a visual group\n * @returns {boolean} - Whether to show a timestamp for this message\n */\nexport const shouldShowTimestamp = (message, prevMessage, isFirstInGroup) => {\n  // Always show timestamp on first message in a visual group\n  if (isFirstInGroup) return true;\n  \n  // If no previous message, show timestamp\n  if (!prevMessage) return true;\n  \n  // If different sender, show timestamp\n  if (message.sent_by_other_user !== prevMessage.sent_by_other_user) return true;\n  \n  // If message is of a different type, show timestamp\n  if (message.type_of_message !== prevMessage.type_of_message) return true;\n  \n  // If more than 1 minute apart, show timestamp\n  try {\n    const currentTime = new Date(message.timestamp || message.created_at);\n    const prevTime = new Date(prevMessage.timestamp || prevMessage.created_at);\n    \n    // Calculate time difference in minutes\n    const timeDiff = Math.abs(currentTime - prevTime) / (1000 * 60);\n    \n    // Special logic for image messages - always show timestamp\n    if (message.type_of_message === 'image_message' || \n        (message.metadata && message.metadata.is_attachment) ||\n        message.image_url || message.image_urls) {\n      return true;\n    }\n    \n    return timeDiff > 1;\n  } catch (error) {\n    // If there's an error parsing dates, default to showing timestamp\n    return true;\n  }\n}; ","/**\n * Contact Sanitization Utilities\n * \n * Shared functions for detecting and sanitizing contact details (phone numbers, emails)\n * in messages and conversation previews.\n * \n * Used by: ConversationList.js, MessageList.js\n */\n\n/**\n * Sanitizes contact details in message content by replacing phone numbers and emails\n * with placeholder text.\n * \n * @param {string} content - The message content to sanitize\n * @returns {string} - The sanitized content with contact details replaced\n */\nexport const sanitizeContactDetails = (content) => {\n  if (!content) return content;\n  \n  let sanitizedContent = content;\n  \n  // Phone number patterns (various formats)\n  const phonePatterns = [\n    /\\b\\d{3}[-.\\s]?\\d{3}[-.\\s]?\\d{4}\\b/g, // 123-456-7890, 123.456.7890, 123 456 7890\n    /\\b\\(\\d{3}\\)\\s?\\d{3}[-.\\s]?\\d{4}\\b/g, // (123) 456-7890, (123)456-7890\n    /\\b\\+\\d{1,3}[-.\\s]?\\d{3}[-.\\s]?\\d{3}[-.\\s]?\\d{4}\\b/g, // +1-123-456-7890\n    /\\b\\d{10,11}\\b/g, // 1234567890 or 11234567890\n  ];\n  \n  // Email pattern\n  const emailPattern = /\\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Z|a-z]{2,}\\b/g;\n  \n  // Replace phone numbers with [PHONE NUMBER]\n  phonePatterns.forEach(pattern => {\n    sanitizedContent = sanitizedContent.replace(pattern, '[PHONE NUMBER]');\n  });\n  \n  // Replace email addresses with [EMAIL ADDRESS]\n  sanitizedContent = sanitizedContent.replace(emailPattern, '[EMAIL ADDRESS]');\n  \n  return sanitizedContent;\n};\n\n/**\n * Checks if content contains contact details (phone numbers or emails).\n * \n * @param {string} content - The content to check\n * @returns {boolean} - True if contact details are found, false otherwise\n */\nexport const containsContactDetails = (content) => {\n  if (!content) return false;\n  \n  const phonePatterns = [\n    /\\b\\d{3}[-.\\s]?\\d{3}[-.\\s]?\\d{4}\\b/, // 123-456-7890, 123.456.7890, 123 456 7890\n    /\\b\\(\\d{3}\\)\\s?\\d{3}[-.\\s]?\\d{4}\\b/, // (123) 456-7890, (123)456-7890\n    /\\b\\+\\d{1,3}[-.\\s]?\\d{3}[-.\\s]?\\d{3}[-.\\s]?\\d{4}\\b/, // +1-123-456-7890\n    /\\b\\d{10,11}\\b/, // 1234567890 or 11234567890\n  ];\n  \n  const emailPattern = /\\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Z|a-z]{2,}\\b/;\n  \n  // Check for email first\n  if (emailPattern.test(content)) return true;\n  \n  // Check for phone numbers\n  return phonePatterns.some(pattern => pattern.test(content));\n}; ","import React, { useRef, useCallback, forwardRef, useState, useMemo, useEffect } from 'react';\nimport { FlatList, ActivityIndicator, Platform, View, Text } from 'react-native';\nimport { debugLog } from '../../context/AuthContext';\nimport MessageDateSeparator from './MessageDateSeparator';\nimport { formatMessageDate, groupMessagesByDate } from './messageTimeUtils';\nimport moment from 'moment-timezone';\nimport { sanitizeContactDetails, containsContactDetails } from '../../data/contactSanitization';\n\n// Component for the contact warning\nconst ContactWarning = ({ styles, theme }) => (\n  <View style={{\n    marginTop: 4,\n    marginBottom: 8,\n    paddingHorizontal: 8,\n    paddingVertical: 6,\n    backgroundColor: theme.colors.warning + '20',\n    borderRadius: 8,\n    borderLeftWidth: 3,\n    borderLeftColor: theme.colors.warning,\n  }}>\n    <Text style={{\n      fontSize: 12,\n      color: theme.colors.warning,\n      fontFamily: 'System',\n      fontWeight: '500',\n    }}>\n      ⚠️ Warning: You may not provide contact details for off-platform communication. Violations may result in account suspension.\n    </Text>\n  </View>\n);\n\nconst MessageList = forwardRef(({ \n  messages, \n  renderMessage, \n  hasMore, \n  isLoadingMore,\n  onLoadMore,\n  styles,\n  theme,\n  className,\n  userTimezone,\n  onScrollStart\n}, ref) => {\n  const flatListRef = useRef(null);\n  const isUserScrollingRef = useRef(false);\n  const isLoadingMoreRef = useRef(false);\n  const previousMessageCount = useRef(messages.length);\n  const initialRenderRef = useRef(true);\n  const preventInitialPaginationRef = useRef(true);\n  const scrollPositionRef = useRef(0);\n  const lastPaginationTimeRef = useRef(0);\n  const PAGINATION_COOLDOWN = 1000; // Reduced from 2000 to 1000 for more responsive pagination\n  \n  // Scroll start detection state\n  const scrollStartHandlerRef = useRef(null);\n  const hasScrollStartedRef = useRef(false);\n  const scrollStartTimeoutRef = useRef(null);\n  \n  // Register the scroll start handler from MessageInput\n  useEffect(() => {\n    if (onScrollStart && typeof onScrollStart === 'function') {\n      // onScrollStart should be a function that accepts a handler\n      onScrollStart((handler) => {\n        scrollStartHandlerRef.current = handler;\n        debugLog('MBA8765: Registered scroll start handler for keyboard dismissal');\n      });\n    }\n    \n    // Cleanup function\n    return () => {\n      if (scrollStartTimeoutRef.current) {\n        clearTimeout(scrollStartTimeoutRef.current);\n        scrollStartTimeoutRef.current = null;\n      }\n    };\n  }, [onScrollStart]);\n  \n  // Group messages by date\n  const messagesByDate = useMemo(() => {\n    return groupMessagesByDate(messages, userTimezone);\n  }, [messages, userTimezone]);\n  \n  // Track which indices we've already triggered pagination for\n  const paginatedIndicesRef = useRef(new Set());\n  \n  // Add a visibility flag to track if we're near pagination boundaries\n  const isNearPaginationBoundaryRef = useRef(false);\n  \n  // Reset pagination indices when the message array changes significantly\n  React.useEffect(() => {\n    if (messages.length > previousMessageCount.current + 10) {\n      debugLog('MBA9876: Message array significantly changed, resetting pagination indices', {\n        prevCount: previousMessageCount.current,\n        newCount: messages.length,\n        difference: messages.length - previousMessageCount.current\n      });\n      paginatedIndicesRef.current = new Set();\n    }\n    \n    previousMessageCount.current = messages.length;\n  }, [messages.length]);\n  \n  // Actually trigger the pagination\n  const triggerPagination = useCallback((triggerIndex, forceTrigger = false) => {\n    const now = Date.now();\n    const timeSinceLastPagination = now - lastPaginationTimeRef.current;\n    \n    // Skip if we don't meet base conditions\n    if (!hasMore || isLoadingMore || isLoadingMoreRef.current || \n        (!isUserScrollingRef.current && !forceTrigger) || initialRenderRef.current) {\n      debugLog('MBA9876: Skipping pagination - basic conditions not met', {\n        hasMore,\n        isLoadingMore,\n        isLoadingMoreRef: isLoadingMoreRef.current,\n        isUserScrolling: isUserScrollingRef.current,\n        forceTrigger,\n        initialRender: initialRenderRef.current\n      });\n      return false;\n    }\n    \n    // Skip if on cooldown, unless we're forcing the trigger\n    if (timeSinceLastPagination < PAGINATION_COOLDOWN && !forceTrigger) {\n      debugLog('MBA9876: Pagination on cooldown', {\n        timeSinceLastPagination,\n        cooldown: PAGINATION_COOLDOWN\n      });\n      return false;\n    }\n    \n    // Skip if we've already paginated at this index, unless we're forcing the trigger\n    if (paginatedIndicesRef.current.has(triggerIndex) && !forceTrigger) {\n      debugLog('MBA9876: Already paginated at index', {\n        triggerIndex,\n        paginatedIndices: Array.from(paginatedIndicesRef.current)\n      });\n      return false;\n    }\n    \n    debugLog('MBA9876: Triggering pagination', {\n      triggerIndex,\n      messageCount: messages.length,\n      timeSinceLastPagination,\n      hasMore,\n      isLoadingMore,\n      forceTrigger\n    });\n    \n    // Mark this index as paginated\n    paginatedIndicesRef.current.add(triggerIndex);\n    \n    // Set states\n    isLoadingMoreRef.current = true;\n    lastPaginationTimeRef.current = now;\n    \n    // Trigger the actual pagination\n    onLoadMore();\n    \n    // Reset loading state after delay\n    setTimeout(() => {\n      isLoadingMoreRef.current = false;\n    }, PAGINATION_COOLDOWN);\n    \n    return true;\n  }, [hasMore, isLoadingMore, onLoadMore, messages.length]);\n  \n  // Very aggressively check for top messages becoming visible\n  const onViewableItemsChangedRef = useRef(({ viewableItems, changed }) => {\n    if (!viewableItems || viewableItems.length === 0) {\n      return;\n    }\n    \n    // Now we also handle cases when user isn't scrolling but needs to load more\n    if (initialRenderRef.current) {\n      return;\n    }\n    \n    // Check the first batch of 20 messages\n    const FIRST_BATCH_SIZE = 20;\n    if (messages.length <= FIRST_BATCH_SIZE) {\n      return; // Not enough messages for pagination yet\n    }\n    \n    // Check if we can see the very last message in the list (oldest message)\n    // This is the most reliable trigger for pagination\n    const isLastMessageVisible = viewableItems.some(item => item.index === messages.length - 1);\n    \n    // Force pagination if we can see the last message and haven't paginated yet\n    if (isLastMessageVisible && hasMore && !isLoadingMore && !isLoadingMoreRef.current && \n        !paginatedIndicesRef.current.has(messages.length - 1)) {\n      debugLog('MBA9876: Last message (oldest) is visible - forcing pagination', {\n        lastMessageIndex: messages.length - 1,\n        viewableItemsCount: viewableItems.length\n      });\n      \n      // Trigger pagination immediately at the end of the list\n      triggerPagination(messages.length - 1, true);\n      return;\n    }\n    \n    // Track the oldest index we can see\n    let oldestVisibleIndex = -1;\n    viewableItems.forEach(item => {\n      if (item.index > oldestVisibleIndex) {\n        oldestVisibleIndex = item.index;\n      }\n    });\n    \n    // Also look for newly visible items that might be close to batch boundaries\n    let newestChangedItem = -1;\n    if (changed && changed.length > 0) {\n      changed.forEach(change => {\n        if (change.isViewable && change.index > newestChangedItem) {\n          newestChangedItem = change.index;\n        }\n      });\n    }\n    \n    // Use the changed item index if it's newer than our current oldest\n    if (newestChangedItem > oldestVisibleIndex) {\n      oldestVisibleIndex = newestChangedItem;\n    }\n    \n    debugLog('MBA9876: Viewing oldest index', {\n      oldestVisibleIndex,\n      messagesLength: messages.length,\n      viewableItemsCount: viewableItems.length,\n      newestChangedItem\n    });\n    \n    // More aggressive pagination boundary detection\n    // If we're seeing messages close to a batch boundary, set the flag\n    const BATCH_SIZE = 20;\n    const batchNumber = Math.floor(oldestVisibleIndex / BATCH_SIZE) + 1;\n    const batchEndIndex = (batchNumber * BATCH_SIZE) - 1;\n    const distanceToBatchBoundary = batchEndIndex - oldestVisibleIndex;\n    \n    // Check if we're near a pagination boundary (within 5 items)\n    isNearPaginationBoundaryRef.current = (distanceToBatchBoundary >= 0 && distanceToBatchBoundary <= 5);\n    \n    // Also check if we're within 3 items of the end of the list - another pagination trigger\n    const isNearEndOfList = (messages.length - oldestVisibleIndex) <= 3;\n    if (isNearEndOfList) {\n      isNearPaginationBoundaryRef.current = true;\n    }\n    \n    debugLog('MBA9876: Pagination boundary check', {\n      oldestVisibleIndex,\n      batchNumber,\n      batchEndIndex,\n      distanceToBatchBoundary,\n      isNearBoundary: isNearPaginationBoundaryRef.current,\n      isNearEndOfList\n    });\n    \n    // If we're within a few items of the end, force pagination\n    if (isNearEndOfList && hasMore && !isLoadingMore && !isLoadingMoreRef.current && \n        !paginatedIndicesRef.current.has(messages.length - 1)) {\n      debugLog('MBA9876: Very close to end of list - forcing pagination', {\n        distanceFromEnd: messages.length - oldestVisibleIndex\n      });\n      \n      triggerPagination(messages.length - 1, true);\n      return;\n    }\n    \n    // Calculate specific trigger points based on the batches (aggressively)\n    // Each batch is 20 messages from the backend\n    const triggerPoints = [];\n    \n    // Start from the first batch boundary (19) and add each subsequent batch boundary\n    for (let i = 1; i < 10; i++) {  // Support up to 10 pages\n      const batchEndIndex = (i * 20) - 1;  // End of each batch (19, 39, 59, etc)\n      \n      // Add more trigger points for more reliable detection\n      triggerPoints.push(batchEndIndex - 6);  // Further away from boundary\n      triggerPoints.push(batchEndIndex - 4);  // Trigger a bit before the boundary\n      triggerPoints.push(batchEndIndex - 2);  // Another trigger point\n      triggerPoints.push(batchEndIndex - 1);  // Just before boundary\n      triggerPoints.push(batchEndIndex);      // The exact boundary\n      triggerPoints.push(batchEndIndex + 1);  // Just after boundary for safety\n      triggerPoints.push(batchEndIndex + 2);  // Another safety point\n    }\n    \n    // Check if we're at or past any trigger point - use a wider range\n    const matchingTriggerPoints = triggerPoints.filter(point => \n      oldestVisibleIndex >= point && \n      oldestVisibleIndex <= point + 4 && // Increased range for better detection\n      point < messages.length - 3 // Make sure we're not too close to the end\n    );\n    \n    if (matchingTriggerPoints.length > 0) {\n      const triggerPoint = matchingTriggerPoints[0];\n      debugLog('MBA9876: Found matching trigger point', {\n        triggerPoint,\n        oldestVisibleIndex,\n        alreadyPaginated: paginatedIndicesRef.current.has(triggerPoint)\n      });\n      \n      // Only trigger if we haven't paginated at this point already\n      if (!paginatedIndicesRef.current.has(triggerPoint)) {\n        // If we're scrolling or very close to boundary, force the trigger\n        const forceTrigger = isUserScrollingRef.current || \n                            (Math.abs(oldestVisibleIndex - triggerPoint) <= 1);\n        triggerPagination(triggerPoint, forceTrigger);\n      }\n    }\n  });\n  \n  // Enhanced end reached handler for more reliable pagination at list boundaries\n  const handleEndReached = useCallback(() => {\n    // Always allow pagination when we reach the end of the list, even if initial load\n    // but still respect loading states\n    if (!hasMore || isLoadingMore || isLoadingMoreRef.current) {\n      debugLog('MBA9876: End reached but skipping pagination - conditions not met', {\n        hasMore,\n        isLoadingMore,\n        isLoadingMoreRef: isLoadingMoreRef.current,\n        messagesLength: messages.length\n      });\n      return;\n    }\n    \n    // For web, try to get the FlatList scroll metrics directly\n    // This provides a much more reliable way to detect if we're at the end\n    if (Platform.OS === 'web' && flatListRef.current) {\n      try {\n        // Access the scroll node directly to get precise measurements\n        const node = flatListRef.current;\n        if (node && typeof node.getScrollableNode === 'function') {\n          const scrollNode = node.getScrollableNode();\n          if (scrollNode) {\n            const { scrollHeight, clientHeight, scrollTop } = scrollNode;\n            const distanceFromBottom = scrollHeight - (clientHeight + scrollTop);\n            \n            debugLog('MBA9876: End reached - DOM scroll metrics', {\n              scrollHeight,\n              clientHeight,\n              scrollTop,\n              distanceFromBottom,\n              messagesLength: messages.length\n            });\n            \n            // If we're very close to the bottom (oldest messages in inverted list)\n            // Force pagination regardless of other conditions\n            if (distanceFromBottom < 200) {\n              const endIndex = messages.length - 1;\n              \n              debugLog('MBA9876: End reached - close to oldest messages, forcing pagination', {\n                distanceFromBottom,\n                endIndex\n              });\n              \n              // Force trigger pagination at the end of the list\n              setTimeout(() => {\n                triggerPagination(endIndex, true);\n              }, 50);\n              return;\n            }\n          }\n        }\n      } catch (error) {\n        // Fallback to regular pagination if DOM access fails\n        debugLog('MBA9876: Error accessing DOM node in handleEndReached', {\n          error: error.message\n        });\n      }\n    }\n    \n    debugLog('MBA9876: End reached', {\n      messagesLength: messages.length,\n      scrollPosition: scrollPositionRef.current,\n      preventInitialPagination: preventInitialPaginationRef.current\n    });\n    \n    // For inverted lists, this actually means we're at the oldest messages\n    // Allow pagination even on initial load if we're truly at the end\n    if (messages.length > 0) {\n      const endIndex = messages.length - 1;\n      \n      // Check if we have already paginated at several endpoints\n      const hasPaginatedAtEnd = paginatedIndicesRef.current.has(endIndex);\n      const hasPaginatedNearEnd = Array.from(paginatedIndicesRef.current).some(\n        index => index > endIndex - 5 && index <= endIndex\n      );\n      \n      // Force pagination at the end of the list, overriding most restrictions\n      if (!hasPaginatedAtEnd) {\n        debugLog('MBA9876: Forcing pagination at the very end of the list');\n        triggerPagination(endIndex, true);\n      } else if (!hasPaginatedNearEnd) {\n        // Try the next best index if we've already paginated at the end\n        const nextBestIndex = messages.length - 5;\n        if (nextBestIndex > 0 && !paginatedIndicesRef.current.has(nextBestIndex)) {\n          debugLog('MBA9876: Trying alternative pagination index near end', {\n            nextBestIndex\n          });\n          triggerPagination(nextBestIndex, true);\n        }\n      } else {\n        // We've already tried endpoints, try batch boundaries\n        const BATCH_SIZE = 20;\n        const batchEndIndex = Math.floor(messages.length / BATCH_SIZE) * BATCH_SIZE - 1;\n        \n        if (batchEndIndex > 0 && !paginatedIndicesRef.current.has(batchEndIndex)) {\n          debugLog('MBA9876: Trying batch boundary after exhausting end indices', {\n            batchEndIndex\n          });\n          triggerPagination(batchEndIndex, true);\n        }\n      }\n    }\n  }, [hasMore, isLoadingMore, triggerPagination, messages.length]);\n  \n  // Enhanced scroll handler that better detects when we're at pagination boundaries\n  const handleScroll = useCallback((event) => {\n    const currentScrollY = event.nativeEvent.contentOffset.y;\n    const previousScrollY = scrollPositionRef.current;\n    \n    // Store current scroll position\n    scrollPositionRef.current = currentScrollY;\n    \n    // Detect scroll start for keyboard dismissal on mobile browsers with smart logic\n    if (!hasScrollStartedRef.current && scrollStartHandlerRef.current) {\n      const { layoutMeasurement, contentOffset, contentSize } = event.nativeEvent;\n      const scrollDirection = currentScrollY > previousScrollY ? 'up' : 'down';\n      const isAtTop = currentScrollY <= 10; // Very close to top\n      const canScrollUp = contentSize.height > layoutMeasurement.height && currentScrollY < (contentSize.height - layoutMeasurement.height - 10);\n      \n      // Only trigger keyboard dismissal if:\n      // 1. Scrolling up (toward older messages) AND\n      // 2. Not already at the top AND\n      // 3. There's actually content to scroll to\n      if (scrollDirection === 'up' && !isAtTop && canScrollUp) {\n        debugLog('MBA8765: Scroll started upward with room to scroll, triggering keyboard dismissal', {\n          scrollDirection,\n          isAtTop,\n          canScrollUp,\n          currentScrollY,\n          previousScrollY,\n          contentHeight: contentSize.height,\n          visibleHeight: layoutMeasurement.height\n        });\n        hasScrollStartedRef.current = true;\n        scrollStartHandlerRef.current();\n        \n        // Reset the scroll started flag after a delay\n        if (scrollStartTimeoutRef.current) {\n          clearTimeout(scrollStartTimeoutRef.current);\n        }\n        scrollStartTimeoutRef.current = setTimeout(() => {\n          hasScrollStartedRef.current = false;\n        }, 1000);\n      } else {\n        debugLog('MBA8765: Scroll detected but not dismissing keyboard', {\n          scrollDirection,\n          isAtTop,\n          canScrollUp,\n          reason: scrollDirection === 'down' ? 'scrolling down' : \n                  isAtTop ? 'already at top' : \n                  !canScrollUp ? 'no room to scroll' : 'unknown'\n        });\n      }\n    }\n    \n    // Get the full scroll metrics for better pagination detection\n    const { layoutMeasurement, contentOffset, contentSize } = event.nativeEvent;\n    \n    // For inverted lists, being near the content bottom means we're seeing oldest messages\n    // This calculation tells us how close we are to the oldest messages\n    const distanceFromOldestMessages = \n      contentSize.height - (layoutMeasurement.height + contentOffset.y);\n    \n    // Check if we're very close to the oldest messages (near bottom of inverted list)\n    // This is a critical check for pagination that works independent of other checks\n    if (hasMore && !isLoadingMore && !isLoadingMoreRef.current && distanceFromOldestMessages < 150) {\n      debugLog('MBA9876: Very close to oldest messages - checking for pagination', {\n        distanceFromOldestMessages,\n        contentHeight: contentSize.height,\n        visibleHeight: layoutMeasurement.height,\n        scrollY: contentOffset.y\n      });\n      \n      // Find the most appropriate batch boundary to paginate\n      const BATCH_SIZE = 20;\n      const currentBatchNumber = Math.floor(messages.length / BATCH_SIZE);\n      \n      // Try to find an unpaginated batch boundary, starting from the oldest\n      let targetIndex = -1;\n      \n      // First try the exact batch boundary\n      const exactBatchIndex = (currentBatchNumber * BATCH_SIZE) - 1;\n      if (exactBatchIndex > 0 && exactBatchIndex < messages.length && \n          !paginatedIndicesRef.current.has(exactBatchIndex)) {\n        targetIndex = exactBatchIndex;\n      }\n      \n      // If no exact batch boundary, try the end of the list\n      if (targetIndex === -1 && !paginatedIndicesRef.current.has(messages.length - 1)) {\n        targetIndex = messages.length - 1;\n      }\n      \n      // If we found a valid index, trigger pagination\n      if (targetIndex !== -1) {\n        debugLog('MBA9876: Triggering pagination at oldest message boundary', {\n          targetIndex,\n          messagesLength: messages.length,\n          currentBatch: currentBatchNumber\n        });\n        triggerPagination(targetIndex, true); // Force trigger\n        \n        // Early return to avoid duplicating pagination requests\n        return;\n      }\n    }\n    \n    // Consider user as scrolling when they've scrolled a bit from the top\n    if (event.nativeEvent.contentOffset.y > 20) { // Reduced from 30 to be more sensitive\n      if (!isUserScrollingRef.current) {\n        debugLog('MBA9876: User started scrolling', {\n          scrollY: event.nativeEvent.contentOffset.y\n        });\n        isUserScrollingRef.current = true;\n        preventInitialPaginationRef.current = false;\n      }\n      \n      // Check if we're very close to the end of the scroll content\n      // This helps catch cases where the user scrolls very fast\n      if (hasMore && !isLoadingMore && !isLoadingMoreRef.current) {\n        // If we're close to the end and near a pagination boundary, trigger pagination\n        if (distanceFromOldestMessages < 100 && isNearPaginationBoundaryRef.current) {\n          debugLog('MBA9876: Close to end of content during scroll', {\n            distanceFromOldestMessages,\n            isNearPaginationBoundary: isNearPaginationBoundaryRef.current\n          });\n          \n          // For fast scrolls, we may need to trigger pagination on multiple batch boundaries\n          // Try to find a batch boundary we haven't paginated for yet\n          const BATCH_SIZE = 20;\n          let foundUnpaginatedBoundary = false;\n          \n          // Look through the last few batch boundaries\n          for (let i = 1; i <= 3; i++) {\n            if (messages.length > i * BATCH_SIZE) {\n              const batchEndIndex = messages.length - (i * BATCH_SIZE) + (i-1);\n              if (!paginatedIndicesRef.current.has(batchEndIndex)) {\n                debugLog('MBA9876: Found unpaginated batch boundary during fast scroll', {\n                  batchEndIndex\n                });\n                triggerPagination(batchEndIndex, true);\n                foundUnpaginatedBoundary = true;\n                break;\n              }\n            }\n          }\n          \n          // If no unpaginated batch boundary was found, try the end of the list\n          if (!foundUnpaginatedBoundary) {\n            const endIndex = messages.length - 1;\n            if (!paginatedIndicesRef.current.has(endIndex)) {\n              triggerPagination(endIndex, true);\n            }\n          }\n        }\n      }\n    }\n  }, [hasMore, isLoadingMore, triggerPagination, messages.length]);\n  \n  // Config for viewability - more sensitive to detect items earlier\n  const viewabilityConfigRef = useRef({\n    itemVisiblePercentThreshold: 5,  // Reduced from 10 to be more sensitive\n    minimumViewTime: 20             // Reduced from 50 to be more sensitive\n  });\n  \n  // Stable handlers as refs\n  const onScrollBeginDragRef = useRef(() => {\n    isUserScrollingRef.current = true;\n    preventInitialPaginationRef.current = false;\n    \n    // Reset scroll start detection when user begins dragging\n    hasScrollStartedRef.current = false;\n    if (scrollStartTimeoutRef.current) {\n      clearTimeout(scrollStartTimeoutRef.current);\n      scrollStartTimeoutRef.current = null;\n    }\n    \n    debugLog('MBA9876: Scroll drag began');\n  });\n  \n  // Enhanced momentum scroll end handler for more reliable pagination\n  const onMomentumScrollEndRef = useRef(() => {\n    // If no messages or can't load more, don't proceed\n    if (messages.length === 0 || !hasMore || isLoadingMore || isLoadingMoreRef.current) {\n      return;\n    }\n    \n    debugLog('MBA9876: Momentum scroll ended', {\n      scrollPosition: scrollPositionRef.current,\n      messagesLength: messages.length\n    });\n    \n    // Get current DOM metrics to check if we're near the oldest messages\n    // This is for web only since we can directly access the DOM\n    if (Platform.OS === 'web' && flatListRef.current) {\n      try {\n        // Try to get the underlying DOM node for direct measurement\n        // This is a more reliable way to detect scroll position\n        const node = flatListRef.current;\n        if (node && typeof node.getScrollableNode === 'function') {\n          const scrollNode = node.getScrollableNode();\n          if (scrollNode) {\n            const { scrollHeight, clientHeight, scrollTop } = scrollNode;\n            const distanceFromBottom = scrollHeight - (clientHeight + scrollTop);\n            \n            // If we're very close to the bottom (oldest messages), force pagination\n            if (distanceFromBottom < 200 && !initialRenderRef.current) {\n              debugLog('MBA9876: Momentum ended very close to oldest messages - forcing pagination', {\n                distanceFromBottom,\n                scrollHeight,\n                clientHeight,\n                scrollTop\n              });\n              \n              // Find oldest message batch boundary not yet paginated\n              const BATCH_SIZE = 20;\n              const currentBatchNumber = Math.floor(messages.length / BATCH_SIZE);\n              const exactBatchIndex = (currentBatchNumber * BATCH_SIZE) - 1;\n              \n              if (exactBatchIndex > 0 && \n                  exactBatchIndex < messages.length && \n                  !paginatedIndicesRef.current.has(exactBatchIndex)) {\n                setTimeout(() => {\n                  triggerPagination(exactBatchIndex, true);\n                }, 50);\n                return;\n              } else {\n                // If we couldn't find a specific batch boundary, try the end of the list\n                const endIndex = messages.length - 1;\n                if (!paginatedIndicesRef.current.has(endIndex)) {\n                  setTimeout(() => {\n                    triggerPagination(endIndex, true);\n                  }, 50);\n                  return;\n                }\n              }\n            }\n          }\n        }\n      } catch (error) {\n        // Fallback to standard logic if DOM access fails\n        debugLog('MBA9876: Error accessing DOM node, falling back to standard logic', {\n          error: error.message\n        });\n      }\n    }\n    \n    // Special handling: when scroll momentum ends, check if we're near a batch boundary\n    // This helps catch cases where scrolling is too fast and the viewability events miss\n    const BATCH_SIZE = 20;\n    \n    // For fast scrolls, we need more aggressive pagination checks\n    // Check multiple batch boundaries when momentum ends\n    let shouldTriggerPagination = false;\n    let triggerIndex = -1;\n    \n    // Calculate batch boundaries - check more boundaries for fast scrolls\n    for (let i = 1; i < Math.min(10, Math.ceil(messages.length / BATCH_SIZE)); i++) {\n      const batchEndIndex = (i * BATCH_SIZE) - 1;  // End of each batch (19, 39, 59, etc)\n      \n      // Try to detect if we should trigger pagination at this boundary\n      // For momentum end, we're less restrictive to ensure we catch fast scrolls\n      if (batchEndIndex < messages.length - 3) {\n        // If we haven't paginated at this index yet, consider triggering\n        if (!paginatedIndicesRef.current.has(batchEndIndex)) {\n          shouldTriggerPagination = true;\n          triggerIndex = batchEndIndex;\n          \n          debugLog('MBA9876: Identified potential pagination point at momentum end', {\n            batchEndIndex,\n            scrollPosition: scrollPositionRef.current\n          });\n          \n          // Prefer earlier batch boundaries (older messages) for pagination\n          break;\n        }\n      }\n    }\n    \n    // If we should trigger pagination and we're likely scrolled up enough\n    if (shouldTriggerPagination && scrollPositionRef.current > 50 && triggerIndex > 0) {\n      debugLog('MBA9876: Momentum ended, triggering backup pagination at batch boundary', {\n        triggerIndex,\n        scrollPosition: scrollPositionRef.current\n      });\n      \n      // Use timeout to let the scroll settle, then force the trigger\n      setTimeout(() => {\n        if (triggerPagination) {\n          triggerPagination(triggerIndex, true);\n        }\n      }, 50);\n    }\n  });\n  \n  const keyExtractor = useCallback((item, index) => {\n    if (item.message_id) {\n      return `message-${item.message_id}`;\n    }\n    \n    const timestamp = item.timestamp || item.created_at || Date.now();\n    const senderHash = item.sent_by_other_user ? 'other' : 'self';\n    const contentHash = item.content ? item.content.substring(0, 10) : 'empty';\n    return `message-${timestamp}-${senderHash}-${contentHash}-${index}`;\n  }, []);\n  \n  // Calculate extra padding for mobile - much more for web to ensure message visibility\n  // Reduce padding on iOS to avoid grey space issues\n  const extraPadding = Platform.OS === 'web' ? \n    (Platform.isPad || (Platform.OS === 'web' && /iPad|iPhone|iPod/.test(navigator.userAgent))) ? 5 : 5 \n    : 50;\n  \n  // Scroll to the top of the inverted list when messages change\n  React.useEffect(() => {\n    // Reset initial render flag after first render\n    if (initialRenderRef.current) {\n      initialRenderRef.current = false;\n      // Always scroll to latest on initial render\n      if (flatListRef.current && Platform.OS === 'web') {\n        setTimeout(() => {\n          try {\n            flatListRef.current.scrollToOffset({ offset: 0, animated: false });\n            debugLog('MBA9876: Initial render - scrolled to latest message');\n          } catch (error) {\n            debugLog('MBA9876: Error during initial scroll', error);\n          }\n        }, 100);\n      }\n      return;\n    }\n    \n    // Skip auto-scrolling if this is a pagination load\n    const isPaginationLoad = messages.length > previousMessageCount.current && \n                             messages.length !== previousMessageCount.current + 1;\n    \n    debugLog('MBA9876: Messages changed, checking scroll conditions', {\n      isUserScrolling: isUserScrollingRef.current,\n      isLoadingMore: isLoadingMoreRef.current,\n      isPaginationLoad,\n      previousCount: previousMessageCount.current,\n      newCount: messages.length\n    });\n    \n    // Only auto-scroll if:\n    // 1. User is not manually scrolling\n    // 2. We're not loading more messages through pagination\n    // 3. This appears to be a new message (length increased by exactly 1)\n    if (flatListRef.current && Platform.OS === 'web' && \n        !isUserScrollingRef.current && \n        !isLoadingMoreRef.current && \n        !isPaginationLoad && \n        messages.length === previousMessageCount.current + 1) {\n      \n      setTimeout(() => {\n        try {\n          // For inverted list, scrollToOffset with 0 shows the most recent message\n          flatListRef.current.scrollToOffset({ offset: 0, animated: false });\n          debugLog('MBA9876: New message detected - scrolled to latest message');\n        } catch (error) {\n          debugLog('MBA9876: Error scrolling FlatList', error);\n        }\n      }, 100);\n    } else {\n      debugLog('MBA9876: Skipping auto-scroll', {\n        reason: isUserScrollingRef.current ? 'user scrolling' : \n                isLoadingMoreRef.current ? 'loading more messages' : \n                isPaginationLoad ? 'pagination in progress' : \n                'not a new message'\n      });\n    }\n  }, [messages]);\n  \n  // Reset the scrolling flag when appropriate\n  React.useEffect(() => {\n    // If a single new message was added (not pagination), reset the user scrolling flag\n    // This allows auto-scroll to work for new messages after the user has been idle\n    if (messages.length === previousMessageCount.current + 1 && \n        !isLoadingMoreRef.current) {\n      \n      debugLog('MBA9876: Single new message detected, resetting scroll flags');\n      isUserScrollingRef.current = false;\n    }\n  }, [messages.length]);\n  \n  // iOS keyboard-specific fix for gray space\n  React.useEffect(() => {\n    if (Platform.OS === 'web') {\n      const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n      \n      if (isIOS) {\n        debugLog('MBA9876: Setting up iOS-specific keyboard fixes');\n        \n        // Create iOS-specific styles\n        const styleTag = document.createElement('style');\n        styleTag.id = 'ios-keyboard-fixes';\n        styleTag.innerHTML = `\n          /* iOS keyboard fixes */\n          body.ios-keyboard-open {\n            position: fixed;\n            width: 100%;\n            height: 100%;\n            overflow: hidden;\n          }\n          \n          .message-input-container.ios-keyboard-open {\n            position: absolute !important;\n            bottom: 0 !important;\n            left: 0 !important;\n            right: 0 !important;\n            background-color: white !important;\n            z-index: 100 !important;\n          }\n          \n          .message-container.ios-keyboard-open {\n            height: calc(100% - 60px) !important;\n            margin-bottom: 60px !important;\n            overflow-y: auto !important;\n          }\n          \n          .messagesContainer {\n            -webkit-overflow-scrolling: touch !important;\n          }\n        `;\n        document.head.appendChild(styleTag);\n        \n        // Function to handle keyboard showing\n        const handleFocusIn = (e) => {\n          if (e.target && (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA')) {\n            debugLog('MBA9876: iOS input focused');\n            \n            // Add classes for keyboard open state\n            document.body.classList.add('ios-keyboard-open');\n            \n            const inputContainer = document.querySelector('.message-input-container');\n            if (inputContainer) {\n              inputContainer.classList.add('ios-keyboard-open');\n            }\n            \n            const messageContainer = document.querySelector('.message-container');\n            if (messageContainer) {\n              messageContainer.classList.add('ios-keyboard-open');\n            }\n            \n            // Scroll the input into view\n            setTimeout(() => {\n              if (e.target) {\n                e.target.scrollIntoView(false);\n              }\n            }, 300);\n          }\n        };\n        \n        // Function to handle keyboard hiding\n        const handleFocusOut = (e) => {\n          // Only handle if we're not focusing on another input element\n          if (!e.relatedTarget || (e.relatedTarget.tagName !== 'INPUT' && e.relatedTarget.tagName !== 'TEXTAREA')) {\n            debugLog('MBA9876: iOS input blurred');\n            \n            // Remove classes for keyboard open state\n            document.body.classList.remove('ios-keyboard-open');\n            \n            const inputContainer = document.querySelector('.message-input-container');\n            if (inputContainer) {\n              inputContainer.classList.remove('ios-keyboard-open');\n            }\n            \n            const messageContainer = document.querySelector('.message-container');\n            if (messageContainer) {\n              messageContainer.classList.remove('ios-keyboard-open');\n            }\n            \n            // Fix scroll position\n            window.scrollTo(0, 0);\n          }\n        };\n        \n        // Add event listeners\n        document.addEventListener('focusin', handleFocusIn);\n        document.addEventListener('focusout', handleFocusOut);\n        \n        // Handle page visibility changes (helps with background/foreground transitions)\n        document.addEventListener('visibilitychange', () => {\n          if (document.visibilityState === 'visible') {\n            // When page becomes visible again, reset any keyboard-related classes\n            document.body.classList.remove('ios-keyboard-open');\n            \n            const inputContainer = document.querySelector('.message-input-container');\n            if (inputContainer) {\n              inputContainer.classList.remove('ios-keyboard-open');\n            }\n            \n            const messageContainer = document.querySelector('.message-container');\n            if (messageContainer) {\n              messageContainer.classList.remove('ios-keyboard-open');\n            }\n            \n            // Force scroll to top\n            window.scrollTo(0, 0);\n          }\n        });\n        \n        return () => {\n          // Clean up\n          document.removeEventListener('focusin', handleFocusIn);\n          document.removeEventListener('focusout', handleFocusOut);\n          \n          const styleElement = document.getElementById('ios-keyboard-fixes');\n          if (styleElement) {\n            styleElement.remove();\n          }\n        };\n      }\n    }\n  }, []);\n  \n  // Expose the scrollToTop method to parent components if needed\n  React.useImperativeHandle(ref, () => ({\n    scrollToTop: () => {\n      if (flatListRef.current) {\n        flatListRef.current.scrollToOffset({ offset: 0, animated: true });\n      }\n    }\n  }), []);\n  \n  // Create message groups by date\n  const messageGroups = useMemo(() => {\n    const groups = groupMessagesByDate(messages, userTimezone);\n    return groups;\n  }, [messages, userTimezone]);\n\n  // Function to get the date key from a timestamp\n  const getDateKey = useCallback((timestamp) => {\n    if (!timestamp) return null;\n    try {\n      // Properly parse the UTC timestamp first\n      const utcMoment = moment.utc(timestamp);\n      // Then convert to user's timezone\n      const localMoment = utcMoment.tz(userTimezone);\n      // Format as YYYY-MM-DD for date key\n      const dateKey = localMoment.format('YYYY-MM-DD');\n      \n      \n      return dateKey;\n    } catch (error) {\n      debugLog('MBA2349fh04h: Error getting date key', { error: error.message, timestamp });\n      return null;\n    }\n  }, [userTimezone]);\n\n  // Function to determine if a message should show a date separator\n  const shouldShowDateSeparator = useCallback((item, index) => {\n    if (!item || !item.timestamp) {\n      return false;\n    }\n    \n    // For the oldest message (last in array, top of visual list), always show date\n    if (index === messages.length - 1) {\n      return true;\n    }\n    \n    // Get the date key for current message with proper UTC to local conversion\n    const currentDateKey = getDateKey(item.timestamp);\n    if (!currentDateKey) return false;\n    \n    // For other messages, we need to check if the NEXT message (older in inverted list)\n    // has a different date - this is what determines if we need a separator\n    if (index < messages.length - 1) {\n      const nextMessage = messages[index + 1];\n      if (!nextMessage || !nextMessage.timestamp) return false;\n      \n      // Get the next message's date key with proper UTC to local conversion\n      const nextDateKey = getDateKey(nextMessage.timestamp);\n      if (!nextDateKey) return false;\n      \n      // Add detailed debug logging for important test messages\n      if (['169', '177', '85', '44'].includes(item.message_id?.toString()) || \n          ['169', '177', '85', '44'].includes(nextMessage.message_id?.toString())) {\n        // Parse the UTC timestamps properly\n        const currentUtcMoment = moment.utc(item.timestamp);\n        const nextUtcMoment = moment.utc(nextMessage.timestamp);\n        // Convert to user's timezone\n        const currentLocalMoment = currentUtcMoment.tz(userTimezone);\n        const nextLocalMoment = nextUtcMoment.tz(userTimezone);\n        \n        debugLog('MBA3oub497v4: Comparing date keys for date separator', {\n          currentId: item.message_id,\n          currentContent: item.content?.substring(0, 15),\n          nextId: nextMessage.message_id,\n          nextContent: nextMessage.content?.substring(0, 15),\n          currentTimestamp: item.timestamp,\n          nextTimestamp: nextMessage.timestamp,\n          currentUtcDate: currentUtcMoment.format('YYYY-MM-DD'),\n          currentLocalDate: currentLocalMoment.format('YYYY-MM-DD'),\n          nextUtcDate: nextUtcMoment.format('YYYY-MM-DD'),\n          nextLocalDate: nextLocalMoment.format('YYYY-MM-DD'),\n          currentDateKey,\n          nextDateKey,\n          shouldShowSeparator: currentDateKey !== nextDateKey\n        });\n      }\n      \n      // Only show date separator when the date actually changes between messages\n      // In an inverted list, the next message is the older one\n      return currentDateKey !== nextDateKey;\n    }\n    \n    return false;\n  }, [messages, getDateKey, userTimezone]);\n\n  // Enhanced renderItem function that adds date separators and contact warnings\n  const renderItemWithDateSeparator = useCallback(({ item, index }) => {\n    const isOldestMessage = index === messages.length - 1;\n    \n    // Debug message timestamps with proper timezone conversion\n    if (['169', '177', '85', '44'].includes(item.message_id?.toString())) {\n      // Parse the UTC timestamp properly\n      const utcMoment = moment.utc(item.timestamp);\n      // Convert to user's timezone\n      const localMoment = utcMoment.tz(userTimezone);\n      \n      debugLog('MBA3oub497v4: Message render with proper timezone', {\n        messageId: item.message_id,\n        content: item.content?.substring(0, 15),\n        timestamp: item.timestamp,\n        utcDate: utcMoment.format('YYYY-MM-DD'),\n        localDate: localMoment.format('YYYY-MM-DD'),\n        localTime: localMoment.format('h:mm A'),\n        userTimezone\n      });\n    }\n    \n    // Check if this message needs a date separator\n    const needsDateSeparator = shouldShowDateSeparator(item, index);\n    let formattedDate = null;\n    \n    if (needsDateSeparator && item.timestamp) {\n      // Parse the UTC timestamp properly\n      const utcMoment = moment.utc(item.timestamp);\n      // Convert to user's timezone\n      const localMoment = utcMoment.tz(userTimezone);\n      \n      // Add special debug for important messages\n      if (['169', '177', '85', '44'].includes(item.message_id?.toString())) {\n        debugLog('MBA3oub497v4: Formatting date for important message', {\n          messageId: item.message_id,\n          content: item.content?.substring(0, 15),\n          timestamp: item.timestamp,\n          utcDate: utcMoment.format('YYYY-MM-DD'),\n          localDate: localMoment.format('YYYY-MM-DD'),\n          needsDateSeparator\n        });\n      }\n      \n      // Get the properly formatted date for display\n      formattedDate = formatMessageDate(item.timestamp, userTimezone);\n      \n      // For the important test messages, add extra logging of the formatted date\n      if (['169', '177', '85', '44'].includes(item.message_id?.toString())) {\n        debugLog('MBA3oub497v4: Formatted date for display', {\n          messageId: item.message_id,\n          content: item.content?.substring(0, 15),\n          formattedDate,\n          timestamp: item.timestamp,\n          localDate: localMoment.format('YYYY-MM-DD')\n        });\n      }\n      \n      // Double-check the \"Today\" label accuracy with proper timezone conversion\n      if (formattedDate === 'Today') {\n        // Check if this is a test message (from 2025) or a real message\n        const isTestMessage = item.timestamp && (\n          item.timestamp.includes('2025-06-09') || \n          item.timestamp.includes('2025-06-08') || \n          item.timestamp.includes('2025-06-06')\n        );\n        \n        // Use appropriate date for comparison - fixed date for test messages, real date for others\n        const actualToday = isTestMessage \n          ? moment('2025-06-09').tz(userTimezone) \n          : moment().tz(userTimezone);\n        \n        const todayKey = actualToday.format('YYYY-MM-DD');\n        const messageKey = getDateKey(item.timestamp);\n        \n        // Compare the dates to ensure Today is shown correctly\n        debugLog('MBA3oub497v4: Today label check', {\n          messageId: item.message_id,\n          messageKey,\n          todayKey,\n          isTestMessage,\n          isActuallyToday: messageKey === todayKey,\n          formattedDate\n        });\n        \n        // If the message is not actually from the appropriate today, use the proper date format\n        if (messageKey !== todayKey) {\n          formattedDate = localMoment.format('MMMM D, YYYY');\n          \n          debugLog('MBA3oub497v4: Corrected Today label', {\n            messageId: item.message_id,\n            formattedDate,\n            messageKey,\n            todayKey,\n            isTestMessage,\n            timestamp: item.timestamp,\n            userTimezone\n          });\n        }\n      }\n    }\n    \n    // Check if this is a normal message that needs contact sanitization (for all users)\n    // Normal messages can have type_of_message === 'normal_message' or no type_of_message at all\n    // Exclude image messages and other special message types\n    const isNormalMessage = (!item.type_of_message || item.type_of_message === 'normal_message') && \n                           item.content && \n                           item.content.trim().length > 0 &&\n                           !item.image_url &&\n                           !item.image_urls &&\n                           !(item.metadata && item.metadata.image_urls) &&\n                           !(item.metadata && item.metadata.is_attachment);\n    \n    // Check if this is an image message that needs contact sanitization (for all users)\n    const isImageMessage = item.type_of_message === 'image_message' && \n                          item.content && item.content.trim().length > 0;\n    \n    // Sanitize content for ALL users if contact details are present\n    const shouldSanitizeContent = (isNormalMessage || isImageMessage) && containsContactDetails(item.content);\n    \n    // Only show warning to the SENDER if they sent a message with contact details\n    const shouldShowContactWarning = !item.sent_by_other_user && shouldSanitizeContent;\n\n    // Sanitize content if needed\n    let sanitizedItem = item;\n    if (shouldSanitizeContent) {\n      const sanitizedContent = sanitizeContactDetails(item.content);\n      if (sanitizedContent !== item.content) {\n        sanitizedItem = {\n          ...item,\n          content: sanitizedContent\n        };\n        debugLog('MBA9876: Sanitized contact details in message', {\n          messageId: item.message_id,\n          originalLength: item.content.length,\n          sanitizedLength: sanitizedContent.length\n        });\n      }\n              debugLog('MBA9876: Sanitizing contact details in message', {\n          messageId: item.message_id,\n          content: item.content?.substring(0, 50),\n          shouldSanitizeContent,\n          shouldShowContactWarning\n        });\n    }\n    \n    // Render the message content with sanitized content if needed\n    const renderedMessage = renderMessage({ item: sanitizedItem, index });\n    \n    // For special message types, add final date verification\n    if (item.type_of_message === 'send_approved_message') {\n      debugLog('MBA3oub497v4: Final date display for approval request', {\n        messageId: item.message_id,\n        needsDateSeparator,\n        formattedDate,\n        isOldestMessage\n      });\n    }\n    \n    // For hidden messages that don't render content\n    if (!renderedMessage) {\n      return needsDateSeparator && formattedDate ? (\n        <View>\n          <MessageDateSeparator date={formattedDate} />\n        </View>\n      ) : null;\n    }\n    \n    // For all messages with date separators\n    if (needsDateSeparator) {\n      // Extra debug logging for specific test messages\n      if (['169', '177', '85', '44'].includes(item.message_id?.toString())) {\n        debugLog('MBA3oub497v4: Rendering message with date separator', {\n          messageId: item.message_id,\n          content: item.content?.substring(0, 15),\n          formattedDate,\n          isOldestMessage,\n          needsDateSeparator,\n          userTimezone\n        });\n      }\n      \n      if (isOldestMessage) {\n        // For oldest message, date goes ABOVE\n        return (\n          <View>\n            {formattedDate && <MessageDateSeparator date={formattedDate} />}\n            {renderedMessage}\n            {shouldShowContactWarning && <ContactWarning styles={styles} theme={theme} />}\n          </View>\n        );\n      } else {\n        // For messages that start a new date, date goes ABOVE\n        return (\n          <View>\n            {formattedDate && <MessageDateSeparator date={formattedDate} />}\n            {renderedMessage}\n            {shouldShowContactWarning && <ContactWarning styles={styles} theme={theme} />}\n          </View>\n        );\n      }\n    } else {\n      // For messages without date separators, just render the message\n      if (['169', '177', '85', '44'].includes(item.message_id?.toString())) {\n        debugLog('MBA3oub497v4: Rendering message without date separator', {\n          messageId: item.message_id,\n          content: item.content?.substring(0, 15),\n          needsDateSeparator,\n          userTimezone\n        });\n      }\n      \n      return (\n        <View>\n          {renderedMessage}\n          {shouldShowContactWarning && <ContactWarning styles={styles} theme={theme} />}\n        </View>\n      );\n    }\n  }, [renderMessage, shouldShowDateSeparator, userTimezone, getDateKey, messages.length, styles, theme]);\n\n  return (\n    <FlatList\n      ref={flatListRef}\n      data={messages}\n      renderItem={renderItemWithDateSeparator}\n      keyExtractor={keyExtractor}\n      style={[styles.messageList, { minHeight: '100%' }]}\n      onEndReached={handleEndReached}\n      onEndReachedThreshold={0.5} // Increased to 0.5 to trigger pagination earlier\n      scrollEventThrottle={8} // More frequent scroll events for better detection\n      onScroll={handleScroll}\n      onViewableItemsChanged={onViewableItemsChangedRef.current}\n      viewabilityConfig={viewabilityConfigRef.current}\n      onScrollBeginDrag={onScrollBeginDragRef.current}\n      onMomentumScrollEnd={onMomentumScrollEndRef.current}\n      inverted={true}\n      maintainVisibleContentPosition={{\n        minIndexForVisible: 0,\n        autoscrollToTopThreshold: 10\n      }}\n      contentContainerStyle={{\n        flexGrow: 1,\n        justifyContent: 'flex-end',\n        paddingTop: extraPadding, // Much larger padding for web\n      }}\n      ListFooterComponent={isLoadingMore && (\n        <ActivityIndicator \n          size=\"small\" \n          color={theme.colors.primary}\n          style={styles.loadingMore}\n        />\n      )}\n      initialNumToRender={20}\n      maxToRenderPerBatch={10}\n      windowSize={15}\n      removeClippedSubviews={false}\n      className={className || \"message-list-component\"}\n    />\n  );\n});\n\nexport default MessageList; ","import React from 'react';\nimport { View, Image } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../../styles/theme';\nimport { getMediaUrl } from '../../config/config';\n\n/**\n * ProfilePhoto component for displaying user profile pictures consistently\n * \n * @param {Object} props - Component props\n * @param {string} props.profilePicture - URL of the profile picture\n * @param {Object} props.style - Style object to override default styles\n * @param {number} props.size - Size of the profile photo (defaults to 40)\n * @param {string} props.fallbackIconName - Name of the MaterialCommunityIcons icon to use as fallback (defaults to \"account\")\n * @param {number} props.fallbackIconSize - Size of the fallback icon (defaults to 24)\n * @param {string} props.testID - Test ID for testing (optional)\n */\nconst ProfilePhoto = ({ \n  profilePicture, \n  style = {}, \n  size = 40, \n  fallbackIconName = \"account\",\n  fallbackIconSize = 24,\n  testID\n}) => {\n  // Calculate styles based on size\n  const containerStyle = {\n    width: size,\n    height: size,\n    borderRadius: size / 2,\n    ...style\n  };\n  \n  // If profile picture is provided, render it\n  if (profilePicture) {\n    return (\n      <Image\n        source={{ uri: getMediaUrl(profilePicture) }}\n        style={containerStyle}\n        testID={testID}\n      />\n    );\n  }\n  \n  // Otherwise render fallback icon\n  return (\n    <View style={{\n      ...containerStyle,\n      backgroundColor: theme.colors.background,\n      justifyContent: 'center',\n      alignItems: 'center',\n    }}\n    testID={testID || 'profile-photo-fallback'}\n    >\n      <MaterialCommunityIcons \n        name={fallbackIconName} \n        size={fallbackIconSize} \n        color={theme.colors.primary} \n      />\n    </View>\n  );\n};\n\nexport default ProfilePhoto; ","import React, { useEffect } from 'react';\nimport { View, Text, TouchableOpacity, TextInput } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { debugLog } from '../../context/AuthContext';\nimport { theme } from '../../styles/theme';\nimport ProfilePhoto from './ProfilePhoto';\nimport { sanitizeContactDetails, containsContactDetails } from '../../data/contactSanitization';\n\nconst ConversationList = ({\n  conversations,\n  selectedConversation,\n  onSelectConversation,\n  searchQuery,\n  onSearchChange,\n  styles,\n  CURRENT_USER_ID,\n  getConversationUnreadCount,\n  markConversationAsRead\n}) => {\n  // Add logging on initial render to check what props we're receiving\n  useEffect(() => {\n    debugLog('MBA2o3uihf48hv: ConversationList component mounted', {\n      conversationsCount: conversations?.length || 0,\n      selectedConversation,\n      hasGetConversationUnreadCount: !!getConversationUnreadCount,\n      hasMarkConversationAsRead: !!markConversationAsRead\n    });\n\n    // Log unread counts for each conversation\n    if (getConversationUnreadCount && conversations?.length > 0) {\n      const conversationUnreadCounts = conversations.map(conv => ({\n        conversationId: conv.conversation_id,\n        unreadCount: getConversationUnreadCount(String(conv.conversation_id))\n      }));\n      \n      debugLog('MBA2o3uihf48hv: Current conversation unread counts', {\n        conversationUnreadCounts\n      });\n    }\n  }, [conversations, selectedConversation, getConversationUnreadCount, markConversationAsRead]);\n\n  return (\n    <View style={styles.conversationListContainer}>\n      <View style={styles.searchContainer}>\n        <View style={styles.searchInputContainer}>\n          <MaterialCommunityIcons \n            name=\"magnify\" \n            size={20} \n            color={theme.colors.placeholder}\n            style={styles.searchIcon}\n          />\n          <TextInput\n            style={styles.searchInput}\n            placeholder=\"Search conversations...\"\n            placeholderTextColor={theme.colors.placeholder}\n            value={searchQuery}\n            onChangeText={onSearchChange}\n          />\n          {searchQuery.length > 0 && (\n            <TouchableOpacity \n              style={styles.clearButton}\n              onPress={() => onSearchChange('')}\n            >\n              <MaterialCommunityIcons \n                name=\"close-circle\" \n                size={16} \n                color={theme.colors.placeholder}\n              />\n            </TouchableOpacity>\n          )}\n        </View>\n      </View>\n\n      {conversations.map((conv) => {\n        const otherParticipantName = conv.participant1_id === CURRENT_USER_ID ? \n          conv.participant2_name : conv.participant1_name;\n        \n        const isSelected = String(conv.conversation_id) === String(selectedConversation);\n        const unreadCount = getConversationUnreadCount ? \n          getConversationUnreadCount(String(conv.conversation_id)) : 0;\n        \n        // Log details about each conversation's unread state for debugging\n        if (unreadCount > 0) {\n          debugLog(`MBA2o3uihf48hv: Conversation ${conv.conversation_id} has ${unreadCount} unread messages`, {\n            conversationId: conv.conversation_id,\n            unreadCount,\n            isSelected,\n            convUnreadFlag: conv.unread,\n            name: otherParticipantName\n          });\n        }\n        \n        return (\n          <TouchableOpacity\n            key={conv.conversation_id}\n            style={[\n              styles.conversationItem,\n              isSelected && styles.selectedConversation\n            ]}\n            onPress={() => {\n              debugLog(`MBA2o3uihf48hv: Conversation ${conv.conversation_id} clicked`, {\n                previouslySelected: isSelected,\n                unreadCount,\n                willCallMarkAsRead: markConversationAsRead && unreadCount > 0\n              });\n              \n              // Set the selected conversation in the global variable immediately\n              if (typeof window !== 'undefined') {\n                window.selectedConversationId = conv.conversation_id;\n              }\n              \n              // First mark as read if needed, before changing selection\n              if (markConversationAsRead && unreadCount > 0) {\n                debugLog(`MBA2o3uihf48hv: Marking conversation ${conv.conversation_id} as read when clicked`, {\n                  unreadCount\n                });\n                \n                try {\n                  // Call markConversationAsRead first to clear notifications\n                  markConversationAsRead(conv.conversation_id);\n                  \n                  // Send explicit command to parent to reset message refs\n                  debugLog(`MBA2o3uihf48hv: Forcing message state reset for conversation`, {\n                    conversationId: conv.conversation_id,\n                    hasUnread: unreadCount > 0\n                  });\n                  \n                  // Use a custom data attribute to tell MessageHistory to force refresh\n                  onSelectConversation(conv.conversation_id, { forceRefresh: true });\n                } catch (error) {\n                  debugLog(`MBA2o3uihf48hv: Error marking conversation as read`, {\n                    error: error.message\n                  });\n                  // Still select the conversation even if marking as read fails\n                  onSelectConversation(conv.conversation_id, { forceRefresh: true });\n                }\n              } else {\n                // If no unread messages, just update selection\n                // Still pass forceRefresh: true to ensure messages are loaded\n                onSelectConversation(conv.conversation_id, { forceRefresh: true });\n              }\n            }}\n          >\n            <ProfilePhoto \n              profilePicture={conv.profile_picture}\n              style={styles.conversationProfilePhoto}\n            />\n            \n            <View style={styles.conversationContent}>\n              <View style={styles.conversationHeader}>\n                <View style={{ flexDirection: 'row', alignItems: 'center', flex: 1 }}>\n                  <Text style={styles.conversationName}>\n                    {otherParticipantName || conv.name || conv.other_user_name || 'Unknown'}\n                  </Text>\n                </View>\n                \n                <Text style={styles.conversationTime}>\n                  {new Date(conv.last_message_time).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}\n                </Text>\n              </View>\n              \n              <View style={styles.conversationLastMessageContainer}>\n                <Text \n                  style={[\n                    styles.conversationLastMessage,\n                    isSelected && styles.activeConversationText,\n                    (conv.unread || unreadCount > 0) && !isSelected && styles.unreadMessage\n                  ]} \n                  numberOfLines={1}\n                >\n                  {containsContactDetails(conv.last_message)\n                    ? sanitizeContactDetails(conv.last_message)\n                    : conv.last_message}\n                </Text>\n                {/* Make sure unread indicator is shown when unreadCount > 0 */}\n                {unreadCount > 0 && !isSelected && (\n                  <View style={styles.unreadBadge}>\n                    <Text style={styles.unreadBadgeText}>{unreadCount}</Text>\n                  </View>\n                )}\n              </View>\n              \n              {conv.bookingStatus && (\n                <View style={[\n                  styles.bookingStatusContainer,\n                  styles[`booking${conv.bookingStatus}Status`] || styles.bookingPendingStatus\n                ]}>\n                  <Text style={styles.bookingStatus}>\n                    {conv.bookingStatus}\n                  </Text>\n                </View>\n              )}\n            </View>\n          </TouchableOpacity>\n        );\n      })}\n    </View>\n  );\n};\n\nexport default ConversationList; ","import React, { useState, useRef, useCallback, useEffect } from 'react';\nimport { View, TextInput, TouchableOpacity, Text, Platform, Image, ActivityIndicator, Alert, ScrollView } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../../styles/theme';\nimport * as ImagePicker from 'expo-image-picker';\nimport { uploadAndSendImageMessage } from '../../api/API';\nimport { debugLog } from '../../context/AuthContext';\nimport { validateMessage, sanitizeInput } from '../../validation/validation';\n\nconst MessageInput = React.forwardRef(({ \n  onSendMessage, \n  onShowDropdown,\n  showDropdown,\n  styles,\n  screenWidth,\n  selectedConversation,\n  onScrollStart // New prop to handle scroll start events\n}, ref) => {\n  const [messageContent, setMessageContent] = useState('');\n  const [selectedImages, setSelectedImages] = useState([]);\n  const [isUploading, setIsUploading] = useState(false);\n  const textInputRef = useRef(null);\n  const defaultHeight = 40; // Define constant for default height\n\n  // Function to dismiss keyboard - can be called from parent\n  const dismissKeyboard = useCallback(() => {\n    if (Platform.OS === 'web') {\n      // On web, blur the active element if it's an input\n      if (document.activeElement && \n          (document.activeElement.tagName === 'INPUT' || \n           document.activeElement.tagName === 'TEXTAREA')) {\n        debugLog('MBA8765: Dismissing keyboard by blurring active element');\n        document.activeElement.blur();\n      }\n      \n      // Also blur our specific input ref if it exists\n      if (textInputRef.current) {\n        textInputRef.current.blur();\n      }\n    } else {\n      // On native platforms, blur the ref\n      if (textInputRef.current) {\n        textInputRef.current.blur();\n      }\n    }\n  }, []);\n\n  // Handle scroll start event to dismiss keyboard on mobile browsers with delay\n  useEffect(() => {\n    if (onScrollStart && Platform.OS === 'web') {\n      let scrollTimeout = null;\n      \n      // Set up the scroll start handler with delay\n      const handleScrollStart = () => {\n        // Only dismiss keyboard on mobile browsers (viewport width <= 900)\n        if (screenWidth <= 900) {\n          // Clear any existing timeout\n          if (scrollTimeout) {\n            clearTimeout(scrollTimeout);\n          }\n          \n          // Add a small delay before dismissing keyboard\n          scrollTimeout = setTimeout(() => {\n            debugLog('MBA8765: Scroll started on mobile browser, dismissing keyboard after delay');\n            dismissKeyboard();\n          }, 100);\n        }\n      };\n\n      // Call the onScrollStart prop with our handler\n      onScrollStart(handleScrollStart);\n      \n      // Cleanup timeout on unmount\n      return () => {\n        if (scrollTimeout) {\n          clearTimeout(scrollTimeout);\n        }\n      };\n    }\n  }, [onScrollStart, screenWidth, dismissKeyboard]);\n\n  // Expose dismissKeyboard function to parent component\n  React.useImperativeHandle(ref, () => ({\n    dismissKeyboard\n  }), [dismissKeyboard]);\n\n  const resetInputHeight = useCallback(() => {\n    if (Platform.OS === 'web' && textInputRef.current) {\n      textInputRef.current.style.height = 'auto';\n      textInputRef.current.style.height = `${defaultHeight}px`; // Reset to default height\n    }\n  }, []);\n\n  // Set initial height when component mounts\n  useEffect(() => {\n    if (Platform.OS === 'web' && textInputRef.current) {\n      textInputRef.current.style.height = `${defaultHeight}px`;\n    }\n  }, []);\n\n  // Function to handle image selection\n  const pickImage = useCallback(async () => {\n    try {\n      // Close the dropdown\n      onShowDropdown(false);\n      \n      // Request permissions\n      if (Platform.OS !== 'web') {\n        const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n        if (status !== 'granted') {\n          debugLog('MBA5678: Permission to access media library was denied');\n          return;\n        }\n      }\n      \n      // Launch image picker with allowsMultipleSelection enabled\n      const result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: false, // Disable editing to support multiple selection\n        aspect: [4, 3],\n        quality: 0.8,\n        base64: Platform.OS === 'web',\n        allowsMultipleSelection: true, // Enable multiple image selection\n      });\n      \n      if (!result.canceled && result.assets && result.assets.length > 0) {\n        debugLog('MBA5678: Images selected:', {\n          count: result.assets.length,\n          details: result.assets.map(asset => ({\n            uri: asset.uri,\n            type: asset.type,\n            fileName: asset.fileName,\n            fileSize: asset.fileSize\n          }))\n        });\n        \n        // Add the selected images to our existing array\n        setSelectedImages(prevImages => [...prevImages, ...result.assets]);\n      }\n    } catch (error) {\n      debugLog('MBA5678: Error picking images:', error);\n    }\n  }, [onShowDropdown]);\n  \n  // This function is no longer needed as we're using the direct uploadAndSendImageMessage\n  // Keeping as a reference\n  /*\n  const uploadImages = useCallback(async (images, conversationId) => {\n    if (!images || !images.length || !conversationId) return [];\n    \n    try {\n      setIsUploading(true);\n      \n      const uploadPromises = images.map(async (image) => {\n        let imageData;\n        if (Platform.OS === 'web') {\n          // For web, use the base64 data directly\n          imageData = image.base64 ? `data:image/jpeg;base64,${image.base64}` : image.uri;\n        } else {\n          // For native, use the file URI\n          imageData = {\n            uri: image.uri,\n            type: 'image/jpeg',\n            name: image.fileName || 'photo.jpg'\n          };\n        }\n        \n        // Upload the image to the server\n        const response = await uploadMessageImage(conversationId, imageData);\n        \n        debugLog('MBA5678: Image uploaded successfully:', response);\n        \n        return response.message_id;\n      });\n      \n      // Wait for all uploads to complete\n      const messageIds = await Promise.all(uploadPromises);\n      \n      debugLog('MBA5678: All images uploaded successfully:', messageIds);\n      \n      setIsUploading(false);\n      return messageIds;\n    } catch (error) {\n      setIsUploading(false);\n      debugLog('MBA5678: Error uploading images:', error);\n      return [];\n    }\n  }, []);\n  */\n  \n  // Function to clear all selected images\n  const clearAllImages = useCallback(() => {\n    setSelectedImages([]);\n  }, []);\n\n  // Function to remove a single image\n  const removeImage = useCallback((index) => {\n    setSelectedImages(prevImages => prevImages.filter((_, i) => i !== index));\n  }, []);\n\n  const handleSend = useCallback(async () => {\n    try {\n      // Prevent multiple simultaneous send operations\n      if (isUploading) {\n        debugLog('MBA5511: Send operation already in progress, ignoring duplicate click');\n        return;\n      }\n      \n      // Only continue if we have images or text to send\n      if (selectedImages.length === 0 && !messageContent.trim()) {\n        return;\n      }\n      \n      // Validate and sanitize message content if there's text\n      let validatedMessage = '';\n      if (messageContent.trim()) {\n        const validation = validateMessage(messageContent, { \n          maxLength: 5000, \n          allowEmpty: selectedImages.length > 0 // Allow empty if we have images\n        });\n        \n        if (!validation.isValid) {\n          debugLog('MBA5511: Message validation failed:', validation.message);\n          Alert.alert('Invalid Message', validation.message);\n          return;\n        }\n        \n        validatedMessage = validation.sanitizedInput;\n        debugLog('MBA5511: Message validated and sanitized', {\n          original: messageContent,\n          sanitized: validatedMessage,\n          lengthDiff: messageContent.length - validatedMessage.length\n        });\n      }\n      \n      setIsUploading(true);\n      debugLog('MBA5511: Message sending started - showing loading indicator');\n      \n      // Send normal text message if there are no images\n      if (selectedImages.length === 0 && validatedMessage) {\n        await onSendMessage(validatedMessage, []);\n      } \n      // Send image message with or without caption\n      else if (selectedImages.length > 0 && selectedConversation) {\n        try {\n          // Check image sizes before attempting to upload\n          const totalSize = selectedImages.reduce((sum, img) => {\n            // For base64 images, estimate size\n            if (img.base64) {\n              // base64 size is roughly 4/3 of the raw data\n              return sum + (img.base64.length * 0.75);\n            }\n            // For files with size property\n            else if (img.size) {\n              return sum + img.size;\n            }\n            // Default estimation\n            return sum + 1000000; // Assume 1MB if unknown\n          }, 0);\n          \n          debugLog('MBA5511: Total estimated image size before compression:', {\n            totalSizeBytes: totalSize,\n            totalSizeMB: (totalSize / (1024 * 1024)).toFixed(2) + 'MB',\n            imageCount: selectedImages.length\n          });\n          \n          // Warn if total size is large\n          if (totalSize > 4 * 1024 * 1024) { // 4MB warning threshold\n            debugLog('MBA5511: Large image upload detected, compression will be applied');\n          }\n          \n          // Use the direct uploadAndSend function that handles everything in one call\n          // and returns a ready-to-display message object\n          const messageObject = await uploadAndSendImageMessage(\n            selectedConversation, \n            selectedImages, \n            validatedMessage // Use the validated and sanitized message\n          );\n          \n          // Add the message to the message list immediately\n          // Pass true as the fourth parameter to indicate this message is already sent\n          // and doesn't need another API call\n          onSendMessage(messageObject.content, [], messageObject, true);\n          \n          debugLog('MBA5511: Image message sent and added to UI:', {\n            messageId: messageObject.message_id,\n            imageCount: selectedImages.length,\n            hasCaption: !!validatedMessage,\n            captionText: validatedMessage,\n            messageObjectContent: messageObject.content\n          });\n        } catch (error) {\n          debugLog('MBA5511: Failed to send image message', error);\n          \n          // More descriptive error message based on the error\n          let errorMessage = 'Failed to upload images. Please try again.';\n          \n          if (error.message && error.message.includes('Network Error')) {\n            errorMessage = 'Network error occurred. Please check your connection and try again.';\n          }\n          \n          if (error.response) {\n            // Server responded with an error\n            if (error.response.status === 413) {\n              errorMessage = 'The image is too large to upload. Please select a smaller image or use fewer images.';\n            } else if (error.response.data && error.response.data.error) {\n              errorMessage = error.response.data.error;\n            }\n          }\n          \n          Alert.alert('Error', errorMessage);\n          setIsUploading(false);\n          return;\n        }\n      }\n      \n      // Reset all states\n      setMessageContent('');\n      setSelectedImages([]);\n      setIsUploading(false);\n      debugLog('MBA5511: Message sending complete - hiding loading indicator');\n      \n      if (textInputRef.current) {\n        textInputRef.current.clear();\n        resetInputHeight(); // Reset height after sending\n        \n        // Keep focus on the input after sending\n        setTimeout(() => {\n          if (textInputRef.current) {\n            debugLog('MBA9876: Refocusing input after send');\n            textInputRef.current.focus();\n          }\n        }, 0);\n      }\n    } catch (error) {\n      setIsUploading(false);\n      debugLog('MBA5511: Error in handleSend, loading indicator stopped:', error);\n    }\n  }, [messageContent, onSendMessage, resetInputHeight, selectedImages, selectedConversation, isUploading]);\n\n  const adjustHeight = useCallback(() => {\n    if (Platform.OS === 'web' && textInputRef.current) {\n      // Only adjust height if content requires more space than default\n      // Add a 10px buffer to prevent premature expansion\n      const scrollHeight = textInputRef.current.scrollHeight;      \n      if (scrollHeight > defaultHeight + 10) {\n        const newHeight = Math.min(scrollHeight, 120);\n        textInputRef.current.style.height = `${newHeight}px`;\n      } else {\n        textInputRef.current.style.height = `${defaultHeight}px`;\n      }\n    }\n  }, []);\n\n  const handleChange = useCallback((text) => {\n    // Don't apply real-time sanitization during typing - this interferes with user experience\n    // Sanitization will happen at send time in handleSend function\n    \n    // Only block extremely dangerous content in real-time\n    const hasScriptTags = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi.test(text);\n    const hasSqlInjection = /\\b(SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|EXEC|UNION|SCRIPT|JAVASCRIPT|VBSCRIPT)\\b/gi.test(text);\n    \n    if (hasScriptTags || hasSqlInjection) {\n      debugLog('MBA5511: Dangerous content detected and blocked in real-time:', text);\n      return; // Don't update the input if it contains dangerous content\n    }\n    \n    // Allow normal typing with spaces, punctuation, etc.\n    setMessageContent(text);\n    if (Platform.OS === 'web') {\n      adjustHeight();\n    }\n  }, [adjustHeight]);\n\n  const handleKeyPress = useCallback((e) => {\n    if (Platform.OS === 'web' && e.nativeEvent.key === 'Enter' && !e.nativeEvent.shiftKey) {\n      e.preventDefault();\n      // Only send if not currently uploading\n      if (!isUploading) {\n        handleSend();\n      }\n    }\n  }, [handleSend, isUploading]);\n\n  return (\n    <View style={styles.inputSection} className=\"message-input-container\">\n      <View style={styles.inputContainerOuter}>\n        {/* Selected images preview - ABOVE the input and buttons */}\n        {selectedImages.length > 0 && (\n          <View style={styles.selectedImagesWrapper}>\n            <ScrollView \n              horizontal={true} \n              style={styles.selectedImagesScrollView}\n              contentContainerStyle={styles.selectedImagesContainer}\n            >\n              {selectedImages.map((image, index) => (\n                <View key={`${image.uri}-${index}`} style={styles.selectedImageContainer}>\n                  <Image \n                    source={{ uri: image.uri }} \n                    style={styles.selectedImagePreview} \n                  />\n                  <TouchableOpacity \n                    style={styles.removeImageButton}\n                    onPress={() => removeImage(index)}\n                  >\n                    <MaterialCommunityIcons \n                      name=\"close-circle\" \n                      size={20} \n                      color={theme.colors.error} \n                    />\n                  </TouchableOpacity>\n                </View>\n              ))}\n            </ScrollView>\n            {isUploading && (\n              <View style={styles.uploadingOverlay}>\n                <ActivityIndicator size=\"small\" color={theme.colors.primary} />\n              </View>\n            )}\n          </View>\n        )}\n        \n        <View style={styles.inputContainer}>\n          <View style={styles.attachButtonContainer}>\n            <TouchableOpacity \n              style={styles.attachButton}\n              onPress={() => onShowDropdown(!showDropdown)}\n            >\n              <MaterialCommunityIcons \n                name={showDropdown ? \"close\" : \"plus\"} \n                size={24} \n                color={theme.colors.primary} \n              />\n            </TouchableOpacity>\n            {showDropdown && (\n              <View style={styles.dropdownMenu}>\n                <TouchableOpacity \n                  style={styles.dropdownItem}\n                  onPress={pickImage}\n                >\n                  <MaterialCommunityIcons \n                    name=\"image\" \n                    size={20} \n                    color={theme.colors.primary} \n                  />\n                  <Text style={[styles.dropdownText, { color: theme.colors.text }]}>\n                    Add Images\n                  </Text>\n                </TouchableOpacity>\n              </View>\n            )}\n                    </View>\n          \n          <View style={styles.inputInnerContainer}>\n            <TextInput\n              ref={textInputRef}\n              style={[\n                styles.textInput,\n                Platform.OS === 'web' && { \n                  maxHeight: 120,\n                  minHeight: defaultHeight,\n                  fontSize: 22 // Increased font size\n                }\n              ]}\n              placeholder={selectedImages.length > 0 ? \"Add a caption...\" : \"Type a Message...\"}\n              placeholderTextColor={theme.colors.placeholder}\n              value={messageContent}\n              onChangeText={handleChange}\n              multiline={true}\n              onKeyPress={Platform.OS === 'web' ? handleKeyPress : undefined}\n            />\n            \n            <TouchableOpacity \n              style={[\n                styles.sendButton,\n                messageContent.trim() || selectedImages.length > 0 ? \n                  {...styles.sendButtonActive, backgroundColor: theme.colors.primary} : \n                  styles.sendButtonInactive\n              ]}\n              onPress={handleSend}\n              disabled={!messageContent.trim() && selectedImages.length === 0 || isUploading}\n            >\n              {isUploading ? (\n                <ActivityIndicator \n                  size=\"small\" \n                  color={theme.colors.surfaceContrast || 'white'} \n                />\n              ) : (\n                <MaterialCommunityIcons \n                  name=\"send\" \n                  size={20} \n                  color={(messageContent.trim() || selectedImages.length > 0) ? (theme.colors.surfaceContrast || 'white') : theme.colors.surfaceContrast}\n                />\n              )}\n            </TouchableOpacity>\n          </View>\n        </View>\n      </View>\n    </View>\n  );\n});\n\nexport default MessageInput; ","import React, { useState, useRef, useEffect } from 'react';\nimport { View, Text, TouchableOpacity, Image, Platform } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../../styles/theme';\nimport ProfilePhoto from './ProfilePhoto';\n\nconst MessageHeader = ({\n  selectedConversationData,\n  hasDraft,\n  draftData,\n  onEditDraft,\n  onBackPress,\n  styles,\n  isMobile = false,\n  onCreateBooking,\n  onViewPets\n}) => {\n  const [showDropdown, setShowDropdown] = useState(false);\n  const dropdownRef = useRef(null);\n  const buttonRef = useRef(null);\n  \n  // Only show dropdown button for professionals\n  const showDropdownButton = selectedConversationData?.is_professional;\n  \n  // Handle outside clicks to close dropdown\n  useEffect(() => {\n    if (Platform.OS === 'web' && showDropdown) {\n      const handleClickOutside = (event) => {\n        // Check if click is outside both the dropdown and the button that opens it\n        if (\n          dropdownRef.current && \n          !dropdownRef.current.contains(event.target) &&\n          buttonRef.current &&\n          !buttonRef.current.contains(event.target)\n        ) {\n          setShowDropdown(false);\n        }\n      };\n      \n      // Add event listener\n      document.addEventListener('mousedown', handleClickOutside);\n      \n      // Clean up\n      return () => {\n        document.removeEventListener('mousedown', handleClickOutside);\n      };\n    }\n  }, [showDropdown]);\n  \n  if (isMobile) {\n    return (\n      <View style={[\n        styles.mobileHeader,\n        { backgroundColor: theme.colors.surfaceContrast }\n      ]}>\n        <View style={styles.mobileHeaderContent}>\n          <TouchableOpacity \n            style={styles.backArrow}\n            onPress={onBackPress}\n          >\n            <MaterialCommunityIcons \n              name=\"arrow-left\" \n              size={24} \n              color={theme.colors.primary} \n            />\n          </TouchableOpacity>\n          \n          <View style={styles.mobileHeaderNameContainer}>\n            {/* Profile picture circle centered above the name */}\n            <View style={[styles.mobileProfilePhotoContainer, { alignSelf: 'center' }]}>\n              <ProfilePhoto \n                profilePicture={selectedConversationData?.profile_picture}\n                size={60}\n                fallbackIconSize={30}\n                style={styles.mobileProfilePhoto}\n              />\n            </View>\n            <Text style={[styles.mobileHeaderName, { textAlign: 'center', fontSize: 16 }]}>\n              {selectedConversationData?.name || selectedConversationData?.other_user_name}\n            </Text>\n          </View>\n          \n          {/* Add dropdown button for mobile */}\n          {showDropdownButton && (\n            <TouchableOpacity \n              ref={buttonRef}\n              style={[styles.backArrow, { right: 16, left: 'auto' }]}\n              onPress={() => setShowDropdown(!showDropdown)}\n            >\n              <MaterialCommunityIcons \n                name={showDropdown ? \"chevron-up\" : \"chevron-down\"} \n                size={24} \n                color={theme.colors.primary} \n              />\n            </TouchableOpacity>\n          )}\n          \n          {/* Add dropdown menu for mobile */}\n          {showDropdown && showDropdownButton && (\n            <View \n              ref={dropdownRef}\n              style={[styles.headerDropdownMenu, { top: '100%', width: '90%', alignSelf: 'center', right: 16 }]}\n            >\n              <TouchableOpacity \n                style={styles.headerDropdownItem}\n                onPress={() => {\n                  setShowDropdown(false);\n                  onCreateBooking && onCreateBooking();\n                }}\n              >\n                <MaterialCommunityIcons \n                  name=\"calendar-plus\" \n                  size={20} \n                  color={theme.colors.primary} \n                />\n                <Text style={styles.headerDropdownText}>\n                  Create Booking\n                </Text>\n              </TouchableOpacity>\n              \n              <TouchableOpacity \n                style={styles.headerDropdownItem}\n                onPress={() => {\n                  setShowDropdown(false);\n                  onViewPets && onViewPets();\n                }}\n              >\n                <MaterialCommunityIcons \n                  name=\"paw\" \n                  size={20} \n                  color={theme.colors.primary} \n                />\n                <Text style={styles.headerDropdownText}>\n                  View Profile\n                </Text>\n              </TouchableOpacity>\n              \n              {/* Add Edit Draft to dropdown */}\n              {hasDraft && draftData?.draft_id && (\n                <TouchableOpacity \n                  style={styles.headerDropdownItem}\n                  onPress={() => {\n                    setShowDropdown(false);\n                    onEditDraft && onEditDraft(draftData.draft_id);\n                  }}\n                >\n                  <MaterialCommunityIcons \n                    name=\"pencil\" \n                    size={20} \n                    color={theme.colors.primary} \n                  />\n                  <Text style={styles.headerDropdownText}>\n                    Edit Draft\n                  </Text>\n                </TouchableOpacity>\n              )}\n            </View>\n          )}\n        </View>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.messageHeader}>\n      <View style={styles.messageHeaderContent}>\n        <ProfilePhoto \n          profilePicture={selectedConversationData?.profile_picture} \n          style={styles.profilePhoto}\n        />\n        <Text style={styles.messageHeaderName}>\n          {selectedConversationData?.other_user_name}\n        </Text>\n        \n        {/* Add dropdown button for desktop */}\n        {showDropdownButton && (\n          <TouchableOpacity \n            ref={buttonRef}\n            style={{ marginLeft: 'auto' }}\n            onPress={() => setShowDropdown(!showDropdown)}\n          >\n            {/* <Text style={styles.headerDropdownButtonText}>Options</Text> */}\n            <MaterialCommunityIcons \n              name={showDropdown ? \"chevron-up\" : \"chevron-down\"} \n              size={20} \n              color={theme.colors.primary} \n            />\n          </TouchableOpacity>\n        )}\n        \n        {/* Add dropdown menu for desktop */}\n        {showDropdown && showDropdownButton && (\n          <View \n            ref={dropdownRef}\n            style={styles.headerDropdownMenu}\n          >\n            <TouchableOpacity \n              style={styles.headerDropdownItem}\n              onPress={() => {\n                setShowDropdown(false);\n                onCreateBooking && onCreateBooking();\n              }}\n            >\n              <MaterialCommunityIcons \n                name=\"calendar-plus\" \n                size={20} \n                color={theme.colors.primary} \n              />\n              <Text style={styles.headerDropdownText}>\n                Create Booking\n              </Text>\n            </TouchableOpacity>\n            \n            <TouchableOpacity \n              style={styles.headerDropdownItem}\n              onPress={() => {\n                setShowDropdown(false);\n                onViewPets && onViewPets();\n              }}\n            >\n              <MaterialCommunityIcons \n                name=\"paw\" \n                size={20} \n                color={theme.colors.primary} \n              />\n              <Text style={styles.headerDropdownText}>\n                View Profile\n              </Text>\n            </TouchableOpacity>\n            \n            {/* Add Edit Draft to dropdown */}\n            {hasDraft && draftData?.draft_id && (\n              <TouchableOpacity \n                style={styles.headerDropdownItem}\n                onPress={() => {\n                  setShowDropdown(false);\n                  onEditDraft && onEditDraft(draftData.draft_id);\n                }}\n              >\n                <MaterialCommunityIcons \n                  name=\"pencil\" \n                  size={20} \n                  color={theme.colors.primary} \n                />\n                <Text style={styles.headerDropdownText}>\n                  Edit Draft\n                </Text>\n              </TouchableOpacity>\n            )}\n          </View>\n        )}\n      </View>\n    </View>\n  );\n};\n\nexport default MessageHeader; ","import React from 'react';\nimport { View, Text, Modal, TouchableOpacity, ScrollView, StyleSheet, ActivityIndicator, Image } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { formatFromUTC } from '../utils/time_utils';\nimport { debugLog } from '../context/AuthContext';\nimport { getMediaUrl } from '../config/config';\n\nconst ReviewsModal = ({ visible, onClose, reviews, averageRating, reviewCount, userName, forProfessional }) => {\n  // Format date for display\n  const formatReviewDate = (dateString) => {\n    try {\n      // formatFromUTC expects (dateStr, timeStr, userTimezone, formatType)\n      // For date-only formatting, we pass null for timeStr and use a default timezone\n      return formatFromUTC(dateString, null, 'US/Mountain');\n    } catch (error) {\n      debugLog('MBA6789', 'Error formatting review date:', error);\n      return dateString;\n    }\n  };\n\n  // Render stars based on rating\n  const renderStars = (rating) => {\n    const stars = [];\n    for (let i = 1; i <= 5; i++) {\n      stars.push(\n        <MaterialCommunityIcons\n          key={i}\n          name={i <= rating ? \"star\" : \"star-outline\"}\n          size={16}\n          color={theme.colors.warning}\n          style={styles.starIcon}\n        />\n      );\n    }\n    return <View style={styles.starsContainer}>{stars}</View>;\n  };\n\n  // Render profile picture or default icon\n  const renderProfilePicture = (profilePicture) => {\n    if (profilePicture) {\n      const imageUrl = getMediaUrl(profilePicture);\n      return (\n        <Image \n          source={{ uri: imageUrl }} \n          style={styles.profileImage} \n          resizeMode=\"cover\"\n        />\n      );\n    } else {\n      return (\n        <View style={styles.defaultProfileImage}>\n          <MaterialCommunityIcons \n            name=\"account\" \n            size={32} \n            color={theme.colors.surface} \n          />\n        </View>\n      );\n    }\n  };\n\n  return (\n    <Modal\n      visible={visible}\n      onRequestClose={onClose}\n      animationType=\"slide\"\n      transparent={true}\n    >\n      <View style={styles.modalOverlay}>\n        <View style={styles.modalContainer}>\n          {/* Header */}\n          <View style={styles.header}>\n            <View style={styles.headerContent}>\n              <Text style={styles.headerTitle}>Reviews for {userName}</Text>\n              <View style={styles.ratingContainer}>\n                <MaterialCommunityIcons name=\"star\" size={20} color={theme.colors.warning} />\n                <Text style={styles.ratingText}>{averageRating.toFixed(2)}</Text>\n                <Text style={styles.reviewCountText}>({reviewCount} {reviewCount === 1 ? 'Review' : 'Reviews'})</Text>\n              </View>\n            </View>\n            <TouchableOpacity onPress={onClose} style={styles.closeButton}>\n              <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.text} />\n            </TouchableOpacity>\n          </View>\n\n          {/* Reviews List */}\n          {reviews.length === 0 ? (\n            <View style={styles.emptyStateContainer}>\n              <MaterialCommunityIcons name=\"star-outline\" size={60} color={theme.colors.placeholder} />\n              <Text style={styles.emptyStateText}>No reviews yet</Text>\n            </View>\n          ) : (\n            <ScrollView style={styles.reviewsList} contentContainerStyle={styles.reviewsContent}>\n              {[...reviews].sort((a, b) => b.rating - a.rating).map((review) => (\n                <View key={review.id} style={styles.reviewCard}>\n                  <View style={styles.reviewUserInfo}>\n                    <View style={styles.profileContainer}>\n                      {renderProfilePicture(review.reviewer_profile_picture)}\n                    </View>\n                    <View style={styles.reviewUserDetails}>\n                      <View style={styles.nameAndStarsRow}>\n                        <Text style={styles.reviewerName}>{forProfessional ? review.client_name : review.professional_name || 'Anonymous'}</Text>\n                        {renderStars(review.rating)}\n                      </View>\n                      <View style={styles.serviceRow}>\n                        <MaterialCommunityIcons name=\"briefcase-outline\" size={14} color={theme.colors.textSecondary} style={styles.calendarIcon} />\n                        <Text style={styles.serviceName}>{review.service_name || 'No Service Found'}</Text>\n                        <Text style={styles.serviceName}>•</Text>\n                        <MaterialCommunityIcons name=\"calendar\" size={14} color={theme.colors.textSecondary} style={styles.calendarIcon} />\n                        <Text style={styles.serviceInfoText}>\n                          {review.last_occurrence_end_date || review.created_at}\n                        </Text>\n                      </View>\n                      <Text style={styles.reviewText}>{review.review_text || 'No comments provided.'}</Text>\n                    </View>\n                  </View>\n                </View>\n              ))}\n            </ScrollView>\n          )}\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  modalContainer: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 12,\n    width: '90%',\n    maxWidth: 600,\n    maxHeight: '90%',\n    overflow: 'hidden',\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 20,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  headerContent: {\n    flex: 1,\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n    marginBottom: 8,\n  },\n  ratingContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  ratingText: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginLeft: 4,\n    marginRight: 8,\n  },\n  reviewCountText: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n  },\n  closeButton: {\n    padding: 8,\n  },\n  reviewsList: {\n    flex: 1,\n  },\n  reviewsContent: {\n    padding: 16,\n  },\n  reviewCard: {\n    padding: 16,\n    backgroundColor: theme.colors.background,\n    borderRadius: 8,\n    marginBottom: 12,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  reviewUserInfo: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n  },\n  profileContainer: {\n    marginRight: 16,\n  },\n  profileImage: {\n    width: 80,\n    height: 80,\n    borderRadius: 40,\n  },\n  defaultProfileImage: {\n    width: 80,\n    height: 80,\n    borderRadius: 40,\n    backgroundColor: theme.colors.primary,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  reviewUserDetails: {\n    flex: 1,\n    justifyContent: 'center',\n  },\n  nameAndStarsRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginBottom: 8,\n  },\n  reviewerName: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: theme.colors.text,\n    marginRight: 8,\n  },\n  starsContainer: {\n    flexDirection: 'row',\n  },\n  starIcon: {\n    marginRight: 2,\n  },\n  serviceRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flexWrap: 'wrap',\n  },\n  serviceName: {\n    fontSize: 14,\n    color: theme.colors.primary,\n    fontWeight: '500',\n    marginRight: 8,\n  },\n  calendarIcon: {\n    marginRight: 4,\n  },\n  serviceInfoText: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n  },\n  reviewText: {\n    fontSize: 14,\n    color: theme.colors.text,\n    lineHeight: 20,\n    marginTop: 8,\n  },\n  emptyStateContainer: {\n    padding: 40,\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  emptyStateText: {\n    fontSize: 16,\n    color: theme.colors.textSecondary,\n    marginTop: 16,\n  },\n});\n\nexport default ReviewsModal; ","import React, { useState, useEffect, useContext } from 'react';\nimport { View, Text, Modal, TouchableOpacity, ScrollView, StyleSheet, ActivityIndicator, Dimensions, Alert, Image } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { getClientPets, getUserReviews } from '../api/API';\nimport { getMediaUrl } from '../config/config';\nimport { AuthContext, debugLog, is_professional } from '../context/AuthContext';\nimport ReviewsModal from './ReviewsModal';\n\nconst ClientPetsModal = ({ visible, onClose, conversation, otherUserName, onCreateBooking, otherUserProfilePhoto }) => {\n  const [pets, setPets] = useState([]);\n  const [reviews, setReviews] = useState([]);\n  const [averageRating, setAverageRating] = useState(0);\n  const [reviewCount, setReviewCount] = useState(0);\n  const [selectedPet, setSelectedPet] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [mobileView, setMobileView] = useState('pets'); // 'pets' or 'details'\n  const [showReviewsModal, setShowReviewsModal] = useState(false);\n  const { userRole } = useContext(AuthContext);\n  \n  const { width: screenWidth } = Dimensions.get('window');\n  const isMobile = screenWidth <= 768;\n  const isSmallMobile = screenWidth <= 600;\n\n  useEffect(() => {\n    if (visible && conversation?.id) {\n      debugLog('MBA3456', 'ClientPetsModal became visible with conversation ID:', conversation.id);\n      fetchPets();\n      fetchReviews();\n    }\n  }, [visible, conversation?.id]);\n\n  const fetchPets = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      debugLog('MBA3456', 'Fetching pets for conversation:', conversation.id);\n      const petsData = await getClientPets(conversation.id);\n      debugLog('MBA3456', 'Successfully fetched pets:', petsData.length);\n      setPets(petsData);\n      if (petsData.length > 0) {\n        setSelectedPet(petsData[0]);\n      }\n    } catch (err) {\n      debugLog('MBA3456', 'Error fetching client pets:', err.response?.data || err.message);\n      setError('Failed to load pets');\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const fetchReviews = async () => {\n    try {\n      debugLog('MBA387c439h', 'Fetching reviews for conversation:', conversation.id);\n      // We need to pass true if the current user is a professional, false if they're a client\n      const isProfessional = userRole === 'professional';\n      debugLog('MBA387c439h', 'Current user isProfessional:', isProfessional);\n      \n      const reviewsData = await getUserReviews(conversation.id, null, isProfessional);\n      debugLog('MBA387c439h', 'Successfully fetched reviews:', reviewsData);\n      setReviews(reviewsData.reviews || []);\n      setAverageRating(reviewsData.average_rating || 0);\n      setReviewCount(reviewsData.review_count || 0);\n    } catch (err) {\n      debugLog('MBA387c439h', 'Error fetching user reviews:', err.response?.data || err.message);\n      // Don't set error state here to avoid blocking pet display\n    }\n  };\n\n  const handleClose = () => {\n    setSelectedPet(null);\n    setPets([]);\n    setReviews([]);\n    setAverageRating(0);\n    setReviewCount(0);\n    setError(null);\n    setMobileView('pets');\n    onClose();\n  };\n\n  const handlePetSelect = (pet) => {\n    setSelectedPet(pet);\n    if (isMobile) {\n      setMobileView('details');\n    }\n  };\n\n  const handleBackToPets = () => {\n    setMobileView('pets');\n  };\n\n  const handleCreateBooking = () => {\n    // Close the modal\n    handleClose();\n    // Call the provided callback\n    onCreateBooking && onCreateBooking();\n  };\n\n  const handleOpenReviewsModal = () => {\n    setShowReviewsModal(true);\n  };\n\n  const handleCloseReviewsModal = () => {\n    setShowReviewsModal(false);\n  };\n\n  const renderPetDetails = (pet) => (\n    <>\n      <View style={styles.petImageContainer}>\n        {pet.profile_photo ? (\n          <Image source={{ uri: getMediaUrl(pet.profile_photo) }} style={styles.petImage} />\n        ) : (\n          <View style={styles.petImagePlaceholder}>\n            <MaterialCommunityIcons name=\"paw\" size={50} color={theme.colors.placeholder} />\n          </View>\n        )}\n      </View>\n      \n      {/* Basic Information - Always show this section */}\n      <View style={styles.detailsSection}>\n        <Text style={styles.sectionHeader}>Basic Information</Text>\n        \n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Type</Text>\n          <Text style={styles.detailText}>{pet.species.charAt(0).toUpperCase() + pet.species.slice(1).toLowerCase() || 'Not specified'}</Text>\n        </View>\n\n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Breed</Text>\n          <Text style={styles.detailText}>{pet.breed.charAt(0).toUpperCase() + pet.breed.slice(1).toLowerCase() || 'Not specified'}</Text>\n        </View>\n\n        \n\n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Age</Text>\n          <Text style={styles.detailText}>{pet.age || 'Not specified'}</Text>\n        </View>\n\n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Weight</Text>\n          <Text style={styles.detailText}>{pet.weight ? `${pet.weight} lbs` : 'Not specified'}</Text>\n        </View>\n\n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Sex</Text>\n          <Text style={styles.detailText}>{pet.sex || 'Not specified'}</Text>\n        </View>\n\n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Birthday</Text>\n          <Text style={styles.detailText}>\n            {pet.birthday ? new Date(pet.birthday).toLocaleDateString() : 'Not specified'}\n          </Text>\n        </View>\n\n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Adoption Date</Text>\n          <Text style={styles.detailText}>\n            {pet.adoption_date ? new Date(pet.adoption_date).toLocaleDateString() : 'Not specified'}\n          </Text>\n        </View>\n\n      </View>\n\n      {/* Care Information - Always show this section */}\n      <View style={styles.detailsSection}>\n        <Text style={styles.sectionHeader}>Care Instructions</Text>\n        \n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Feeding Schedule</Text>\n          <Text style={styles.detailText}>{pet.feeding_schedule || 'Not provided'}</Text>\n        </View>\n\n        {/* Show potty break schedule for all pets, with \"Not applicable\" for non-dogs */}\n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Potty Break Schedule</Text>\n          <Text style={styles.detailText}>\n            {pet.is_dog \n              ? (pet.potty_break_schedule || 'Not provided') \n              : 'Not applicable for this pet type'}\n          </Text>\n        </View>\n\n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Special Care Instructions</Text>\n          <Text style={styles.detailText}>{pet.special_care_instructions || 'None provided'}</Text>\n        </View>\n      </View>\n\n      {/* Behavioral Information - Always show this section */}\n      <View style={styles.detailsSection}>\n        <Text style={styles.sectionHeader}>Behavioral Information</Text>\n        \n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Energy Level</Text>\n          <Text style={styles.detailText}>{pet.energy_level || 'Not specified'}</Text>\n        </View>\n\n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Can be Left Alone</Text>\n          <Text style={styles.detailText}>\n            {pet.can_be_left_alone === true ? 'Yes' : \n             pet.can_be_left_alone === false ? 'No' : 'Not specified'}\n          </Text>\n        </View>\n\n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Friendly with Children</Text>\n          <Text style={styles.detailText}>\n            {pet.friendly_with_children === true ? 'Yes' : \n             pet.friendly_with_children === false ? 'No' : 'Not specified'}\n          </Text>\n        </View>\n\n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Friendly with Cats</Text>\n          <Text style={styles.detailText}>\n            {pet.friendly_with_cats === true ? 'Yes' : \n             pet.friendly_with_cats === false ? 'No' : 'Not specified'}\n          </Text>\n        </View>\n\n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Friendly with Dogs</Text>\n          <Text style={styles.detailText}>\n            {pet.friendly_with_dogs === true ? 'Yes' : \n             pet.friendly_with_dogs === false ? 'No' : 'Not specified'}\n          </Text>\n        </View>\n      </View>\n\n      {/* Medical Information - Always show this section */}\n      <View style={styles.detailsSection}>\n        <Text style={styles.sectionHeader}>Medical Information</Text>\n        \n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Spayed/Neutered</Text>\n          <Text style={styles.detailText}>\n            {pet.spayed_neutered === true ? 'Yes' : \n             pet.spayed_neutered === false ? 'No' : 'Not specified'}\n          </Text>\n        </View>\n\n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>House Trained</Text>\n          <Text style={styles.detailText}>\n            {pet.house_trained === true ? 'Yes' : \n             pet.house_trained === false ? 'No' : 'Not specified'}\n          </Text>\n        </View>\n\n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Microchipped</Text>\n          <Text style={styles.detailText}>\n            {pet.microchipped === true ? 'Yes' : \n             pet.microchipped === false ? 'No' : 'Not specified'}\n          </Text>\n        </View>\n\n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Medications</Text>\n          <Text style={styles.detailText}>\n            {pet.medications || 'No medications listed'}\n          </Text>\n        </View>\n\n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Medication Notes</Text>\n          <Text style={styles.detailText}>{pet.medication_notes || 'None provided'}</Text>\n        </View>\n      </View>\n\n      {/* Veterinary Information - Always show this section */}\n      <View style={styles.detailsSection}>\n        <Text style={styles.sectionHeader}>Veterinary Information</Text>\n        \n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Veterinarian</Text>\n          <Text style={styles.detailText}>{pet.vet_name || 'Not provided'}</Text>\n        </View>\n\n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Vet Phone</Text>\n          <Text style={styles.detailText}>{pet.vet_phone || 'Not provided'}</Text>\n        </View>\n\n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Vet Address</Text>\n          <Text style={styles.detailText}>{pet.vet_address || 'Not provided'}</Text>\n        </View>\n\n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Insurance Provider</Text>\n          <Text style={styles.detailText}>{pet.insurance_provider || 'Not provided'}</Text>\n        </View>\n      </View>\n    </>\n  );\n\n  const renderEmptyState = () => (\n    <View style={styles.emptyStateContainer}>\n      <MaterialCommunityIcons name=\"paw\" size={60} color={theme.colors.placeholder} />\n      <Text style={styles.emptyStateTitle}>No Pets Found</Text>\n      <Text style={styles.emptyStateText}>\n        This client doesn't have any pets registered yet. They will need to add pets to create a booking.\n      </Text>\n    </View>\n  );\n\n  return (\n    <>\n      <Modal\n        visible={visible}\n        onRequestClose={handleClose}\n        animationType=\"slide\"\n        transparent={true}\n      >\n        <View style={styles.modalOverlay}>\n          <View style={[styles.modalContainer, isSmallMobile && styles.modalContainerSmallMobile]}>\n            {/* Header */}\n            <View style={styles.header}>\n              <View style={styles.headerLeft}>\n                {otherUserProfilePhoto ? (\n                  <Image source={{ uri: getMediaUrl(otherUserProfilePhoto) }} style={styles.clientProfilePhoto} />\n                ) : (\n                  <View style={styles.clientProfilePhotoPlaceholder}>\n                    <MaterialCommunityIcons name=\"account\" size={24} color={theme.colors.placeholder} />\n                  </View>\n                )}\n                <View style={styles.headerTextContainer}>\n                  <Text style={styles.clientName}>{otherUserName || 'Client'}</Text>\n                  <View style={styles.clientSubtitleContainer}>\n                    {reviewCount > 0 ? (\n                      <TouchableOpacity \n                        style={styles.reviewBadge}\n                        onPress={handleOpenReviewsModal}\n                      >\n                        <MaterialCommunityIcons name=\"star\" size={16} color={theme.colors.warning} />\n                        <Text style={styles.reviewBadgeText}>{averageRating} • {reviewCount} {reviewCount === 1 ? 'Review' : 'Reviews'}</Text>\n                      </TouchableOpacity>\n                    ) : (\n                      <Text style={styles.reviewBadgeText}>No reviews yet</Text>\n                    )}\n                  </View>\n                </View>\n              </View>\n              <TouchableOpacity onPress={handleClose} style={styles.closeButton}>\n                <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.text} />\n              </TouchableOpacity>\n            </View>\n\n            {loading ? (\n              <View style={styles.loadingContainer}>\n                <ActivityIndicator size=\"large\" color={theme.colors.primary} />\n                <Text style={styles.loadingText}>Loading pets...</Text>\n              </View>\n            ) : error ? (\n              <View style={styles.errorContainer}>\n                <Text style={styles.errorText}>{error}</Text>\n                <TouchableOpacity style={styles.retryButton} onPress={fetchPets}>\n                  <Text style={styles.retryText}>Retry</Text>\n                </TouchableOpacity>\n              </View>\n            ) : pets.length === 0 ? (\n              renderEmptyState()\n            ) : (\n              <View style={[styles.content, isMobile && styles.contentMobile]}>\n                {/* Mobile: Pets List View */}\n                {isMobile && mobileView === 'pets' && (\n                  <View style={styles.mobilePetsView}>\n                    <Text style={styles.sectionTitle}>Pets</Text>\n                    <ScrollView style={styles.petsScrollView}>\n                      {pets.map((pet) => (\n                        <TouchableOpacity\n                          key={pet.pet_id}\n                          style={styles.mobilePetItem}\n                          onPress={() => handlePetSelect(pet)}\n                        >\n                          <View style={styles.mobilePetContent}>\n                            <View style={styles.petListImageContainer}>\n                              {pet.profile_photo ? (\n                                <Image source={{ uri: getMediaUrl(pet.profile_photo) }} style={styles.petListImage} />\n                              ) : (\n                                <View style={styles.petListImagePlaceholder}>\n                                  <MaterialCommunityIcons name=\"paw\" size={16} color={theme.colors.placeholder} />\n                                </View>\n                              )}\n                            </View>\n                            <View style={styles.petTextContainer}>\n                              <Text style={styles.mobilePetName}>\n                                {pet.name.charAt(0).toUpperCase() + pet.name.slice(1).toLowerCase()}\n                              </Text>\n                              <Text style={styles.mobilePetType}>\n                                {pet.species.charAt(0).toUpperCase() + pet.species.slice(1).toLowerCase()}\n                              </Text>\n                            </View>\n                          </View>\n                          <MaterialCommunityIcons \n                            name=\"chevron-right\" \n                            size={24} \n                            color={theme.colors.textSecondary} \n                          />\n                        </TouchableOpacity>\n                      ))}\n                    </ScrollView>\n                  </View>\n                )}\n\n                {/* Mobile: Pet Details View */}\n                {isMobile && mobileView === 'details' && selectedPet && (\n                  <View style={styles.mobileDetailsView}>\n                    <View style={styles.mobileDetailsHeader}>\n                      <TouchableOpacity \n                        style={styles.backButton}\n                        onPress={handleBackToPets}\n                      >\n                        <MaterialCommunityIcons \n                          name=\"arrow-left\" \n                          size={24} \n                          color={theme.colors.primary} \n                        />\n                      </TouchableOpacity>\n                      <Text style={styles.mobileDetailsTitle}>{selectedPet.name.charAt(0).toUpperCase() + selectedPet.name.slice(1).toLowerCase()}</Text>\n                    </View>\n                    <ScrollView style={styles.mobileDetailsScrollView}>\n                      {renderPetDetails(selectedPet)}\n                    </ScrollView>\n                  </View>\n                )}\n\n                {/* Desktop: Two-panel layout */}\n                {!isMobile && (\n                  <>\n                    {/* Pets List (Left Side) */}\n                    <View style={styles.petsList}>\n                      <Text style={styles.sectionTitle}>Pets</Text>\n                      <ScrollView style={styles.petsScrollView}>\n                        {pets.map((pet) => (\n                          <TouchableOpacity\n                            key={pet.pet_id}\n                            style={[\n                              styles.petItem,\n                              selectedPet?.pet_id === pet.pet_id && styles.petItemSelected\n                            ]}\n                            onPress={() => handlePetSelect(pet)}\n                          >\n                            <View style={styles.petItemContent}>\n                              <View style={styles.petListImageContainer}>\n                                {pet.profile_photo ? (\n                                  <Image source={{ uri: getMediaUrl(pet.profile_photo) }} style={styles.petListImage} />\n                                ) : (\n                                  <View style={styles.petListImagePlaceholder}>\n                                    <MaterialCommunityIcons name=\"paw\" size={16} color={theme.colors.placeholder} />\n                                  </View>\n                                )}\n                              </View>\n                              <View style={styles.petTextContainer}>\n                                <Text style={[\n                                  styles.petName,\n                                  selectedPet?.pet_id === pet.pet_id && styles.petNameSelected\n                                ]}>\n                                  {pet.name.charAt(0).toUpperCase() + pet.name.slice(1).toLowerCase()}\n                                </Text>\n                                <Text style={[\n                                  styles.petType,\n                                  selectedPet?.pet_id === pet.pet_id && styles.petTypeSelected\n                                ]}>\n                                  {pet.species.charAt(0).toUpperCase() + pet.species.slice(1).toLowerCase()}\n                                </Text>\n                              </View>\n                            </View>\n                          </TouchableOpacity>\n                        ))}\n                      </ScrollView>\n                    </View>\n\n                    {/* Pet Details (Right Side) */}\n                    <View style={styles.petDetails}>\n                      {selectedPet ? (\n                        <ScrollView style={styles.detailsScrollView}>\n                          <Text style={styles.detailsTitle}>{selectedPet.name.charAt(0).toUpperCase() + selectedPet.name.slice(1).toLowerCase()}</Text>\n                          {renderPetDetails(selectedPet)}\n                        </ScrollView>\n                      ) : (\n                        <View style={styles.noSelectionContainer}>\n                          <Text style={styles.noSelectionText}>Select a pet to view details</Text>\n                        </View>\n                      )}\n                    </View>\n                  </>\n                )}\n              </View>\n            )}\n\n            {/* Create Booking Button */}\n            {!loading && !error && (\n              <View style={styles.footer}>\n                <TouchableOpacity \n                  style={styles.createBookingButton}\n                  onPress={handleCreateBooking}\n                >\n                  <Text style={styles.createBookingButtonText}>Create Booking</Text>\n                </TouchableOpacity>\n              </View>\n            )}\n          </View>\n        </View>\n      </Modal>\n      \n      {/* Reviews Modal - Outside the main modal to prevent nesting issues */}\n      <ReviewsModal\n        visible={showReviewsModal}\n        onClose={handleCloseReviewsModal}\n        reviews={reviews}\n        averageRating={averageRating}\n        reviewCount={reviewCount}\n        userName={otherUserName}\n        forProfessional={false}\n      />\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  petListImageContainer: {\n    marginRight: 12,\n  },\n  petListImage: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n  },\n  petListImagePlaceholder: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    backgroundColor: theme.colors.background,\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  petItemContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  petTextContainer: {\n    flex: 1,\n  },\n  modalContainer: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 12,\n    width: '90%',\n    maxWidth: 800,\n    maxHeight: '80%',\n    overflow: 'hidden',\n  },\n  modalContainerSmallMobile: {\n    width: 'calc(100% - 10px)',\n    height: 'calc(100% - 10px)',\n    maxWidth: 'none',\n    maxHeight: 'none',\n    borderRadius: 8,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 20,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  headerLeft: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  headerTextContainer: {\n    flex: 1,\n  },\n  clientProfilePhoto: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    marginRight: 15,\n  },\n  clientProfilePhotoPlaceholder: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    backgroundColor: theme.colors.background,\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    marginRight: 15,\n  },\n  clientName: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  clientSubtitleContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginTop: 4,\n  },\n  clientSubtitle: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n  },\n  reviewBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.background,\n    paddingVertical: 2,\n    borderRadius: 12,\n  },\n  reviewBadgeText: {\n    fontSize: 16,\n    color: theme.colors.text,\n    marginLeft: 4,\n    fontWeight: '500',\n  },\n  closeButton: {\n    padding: 8,\n  },\n  loadingContainer: {\n    padding: 40,\n    alignItems: 'center',\n  },\n  loadingText: {\n    marginTop: 16,\n    color: theme.colors.textSecondary,\n  },\n  errorContainer: {\n    padding: 40,\n    alignItems: 'center',\n  },\n  errorText: {\n    color: theme.colors.error,\n    textAlign: 'center',\n    marginBottom: 16,\n  },\n  retryButton: {\n    backgroundColor: theme.colors.primary,\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n    borderRadius: 8,\n  },\n  retryText: {\n    color: theme.colors.whiteText,\n    fontWeight: '500',\n  },\n  content: {\n    flexDirection: 'row',\n    flex: 1,\n  },\n  contentMobile: {\n    flexDirection: 'column',\n  },\n  // Mobile styles\n  mobilePetsView: {\n    flex: 1,\n    padding: 20,\n  },\n  mobilePetItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  mobilePetContent: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  mobilePetName: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: theme.colors.text,\n    marginBottom: 4,\n  },\n  mobilePetType: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n  },\n  mobileDetailsView: {\n    flex: 1,\n  },\n  mobileDetailsHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 20,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  backButton: {\n    padding: 8,\n    marginRight: 12,\n  },\n  mobileDetailsTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.text,\n    flex: 1,\n  },\n  mobileDetailsScrollView: {\n    flex: 1,\n    padding: 20,\n  },\n  // Desktop styles\n  petsList: {\n    width: '40%',\n    borderRightWidth: 1,\n    borderRightColor: theme.colors.border,\n    padding: 20,\n  },\n  sectionTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 16,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  petsScrollView: {\n    flex: 1,\n  },\n  petItem: {\n    padding: 12,\n    borderRadius: 8,\n    marginBottom: 8,\n    backgroundColor: theme.colors.background,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  petItemSelected: {\n    backgroundColor: theme.colors.primary,\n    borderColor: theme.colors.primary,\n  },\n  petName: {\n    fontSize: 14,\n    fontWeight: '500',\n    color: theme.colors.text,\n    marginBottom: 4,\n  },\n  petNameSelected: {\n    color: theme.colors.whiteText,\n  },\n  petType: {\n    fontSize: 12,\n    color: theme.colors.textSecondary,\n  },\n  petTypeSelected: {\n    color: theme.colors.whiteText,\n  },\n  petDetails: {\n    flex: 1,\n    padding: 20,\n  },\n  detailsScrollView: {\n    flex: 1,\n  },\n  detailsTitle: {\n    fontSize: 24,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 20,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  detailSection: {\n    marginBottom: 20,\n  },\n  detailLabel: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 8,\n  },\n  detailText: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n    lineHeight: 20,\n  },\n  detailsSection: {\n    marginBottom: 24,\n  },\n  sectionHeader: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 16,\n    fontFamily: theme.fonts.header.fontFamily,\n    paddingBottom: 8,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border + '40', // 40% opacity\n  },\n  petImageContainer: {\n    alignItems: 'center',\n    marginBottom: 20,\n  },\n  petImage: {\n    width: 150,\n    height: 150,\n    borderRadius: 75,\n  },\n  petImagePlaceholder: {\n    width: 150,\n    height: 150,\n    borderRadius: 75,\n    backgroundColor: theme.colors.background,\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  noSelectionContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  noSelectionText: {\n    color: theme.colors.textSecondary,\n    fontSize: 16,\n  },\n  footer: {\n    padding: 20,\n    borderTopWidth: 1,\n    borderTopColor: theme.colors.border,\n  },\n  createBookingButton: {\n    backgroundColor: theme.colors.primary,\n    paddingVertical: 16,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  createBookingButtonText: {\n    color: theme.colors.whiteText,\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  emptyStateContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 30,\n  },\n  emptyStateTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginTop: 16,\n    marginBottom: 8,\n  },\n  emptyStateText: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n    textAlign: 'center',\n    lineHeight: 20,\n  },\n  reviewSection: {\n    marginBottom: 20,\n  },\n  reviewSummary: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  ratingContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginRight: 8,\n  },\n  ratingText: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.text,\n  },\n  reviewCountText: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n  },\n  reviewsScrollView: {\n    flex: 1,\n  },\n  reviewCard: {\n    padding: 12,\n    borderRadius: 8,\n    marginRight: 8,\n    backgroundColor: theme.colors.background,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  reviewHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  reviewerName: {\n    fontSize: 14,\n    fontWeight: '500',\n    color: theme.colors.text,\n  },\n  reviewRating: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 4,\n  },\n  reviewText: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n  },\n  reviewDate: {\n    fontSize: 12,\n    color: theme.colors.textSecondary,\n  },\n});\n\nexport default ClientPetsModal; ","import React from 'react';\nimport { View, Text } from 'react-native';\nimport { formatMessageTime } from './messageTimeUtils';\n\n/**\n * Component to display a message timestamp\n * \n * @param {Object} props - Component props\n * @param {Object} props.message - Message object with timestamp\n * @param {boolean} props.isFromMe - Whether message is from current user\n * @param {Object} props.styles - Styles object from MessageHistory\n * @param {string} props.userTimezone - User's timezone\n * @param {boolean} props.show - Whether to show the timestamp\n */\nconst MessageTimestamp = ({ message, isFromMe, styles, userTimezone, show }) => {\n  if (!show || !message || !message.timestamp) return null;\n  \n  const formattedTime = formatMessageTime(message.timestamp, userTimezone);\n  \n  return (\n    <View style={[\n      styles.messageTimestampContainer,\n      isFromMe ? styles.sentMessageTimestamp : styles.receivedMessageTimestamp,\n      // Add compact style for image messages\n      message.type_of_message === 'image_message' || \n      message.image_url || \n      message.image_urls || \n      (message.metadata && message.metadata.image_urls) ? \n        { marginBottom: 0, marginTop: 20 } : null\n    ]}>\n      <Text style={styles.messageTimestampText}>{formattedTime}</Text>\n    </View>\n  );\n};\n\nexport default MessageTimestamp; ","import React, { useState } from 'react';\nimport { \n  View, \n  Text, \n  Modal, \n  StyleSheet, \n  TouchableOpacity, \n  TextInput,\n  TouchableWithoutFeedback,\n  Keyboard,\n  Platform,\n  KeyboardAvoidingView\n} from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { debugLog } from '../context/AuthContext';\nimport Toast from './Toast';\n\nconst ReviewModal = ({ \n  visible, \n  onClose, \n  isProfessional,\n  bookingId,\n  onSubmitReview\n}) => {\n  const [rating, setRating] = useState(0);\n  const [reviewText, setReviewText] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [toast, setToast] = useState({\n    visible: false,\n    message: '',\n    type: 'success'\n  });\n\n  // Reset state when modal opens\n  React.useEffect(() => {\n    if (visible) {\n      setRating(0);\n      setReviewText('');\n      setIsSubmitting(false);\n      setToast({ visible: false, message: '', type: 'success' });\n    }\n  }, [visible]);\n\n  const handleSubmitReview = async () => {\n    if (rating === 0) {\n      // Show toast for rating required\n      setToast({\n        visible: true,\n        message: 'Please select a star rating',\n        type: 'error'\n      });\n      return;\n    }\n\n    setIsSubmitting(true);\n    try {\n      if (onSubmitReview) {\n        await onSubmitReview({\n          bookingId,\n          rating,\n          reviewText,\n          isProfessional\n        });\n      }\n      \n      // Show success toast and close modal immediately\n      setToast({\n        visible: true,\n        message: 'Review submitted successfully!',\n        type: 'success'\n      });\n      \n      // Close modal immediately\n      onClose();\n    } catch (error) {\n      debugLog('MBA8675309: Error submitting review:', error);\n      setToast({\n        visible: true,\n        message: 'Failed to submit review. Please try again.',\n        type: 'error'\n      });\n      setIsSubmitting(false);\n    }\n  };\n\n  const renderStars = () => {\n    const stars = [];\n    for (let i = 1; i <= 5; i++) {\n      stars.push(\n        <TouchableOpacity\n          key={i}\n          onPress={() => setRating(i)}\n          style={styles.starContainer}\n        >\n          <MaterialCommunityIcons\n            name={i <= rating ? 'star' : 'star-outline'}\n            size={40}\n            color={i <= rating ? '#FFD700' : theme.colors.border}\n          />\n        </TouchableOpacity>\n      );\n    }\n    return stars;\n  };\n\n  return (\n    <>\n      <Modal\n        visible={visible}\n        transparent={true}\n        animationType=\"fade\"\n        onRequestClose={onClose}\n      >\n        <KeyboardAvoidingView \n          behavior={Platform.OS === 'ios' ? 'padding' : 'height'}\n          style={{ flex: 1 }}\n        >\n          <TouchableOpacity \n            activeOpacity={1}\n            style={styles.modalOverlay}\n            onPress={() => {\n              Keyboard.dismiss();\n              onClose();\n            }}\n          >\n            <TouchableOpacity \n              activeOpacity={1}\n              style={styles.modalContainer}\n              onPress={(e) => {\n                // Prevent touch events from bubbling to parent\n                e.stopPropagation();\n              }}\n            >\n              {/* Header with close button */}\n              <View style={styles.header}>\n                <Text style={styles.headerText}>\n                  {isProfessional ? 'Please Review Your Client' : 'Please Rate Your Experience'}\n                </Text>\n                <TouchableOpacity onPress={onClose} style={styles.closeButton}>\n                  <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.text} />\n                </TouchableOpacity>\n              </View>\n              \n              {/* Star Rating */}\n              <View style={styles.ratingContainer}>\n                <Text style={styles.ratingLabel}>Your Rating</Text>\n                <View style={styles.starsRow}>\n                  {renderStars()}\n                </View>\n              </View>\n              \n              {/* Review Text */}\n              <View style={styles.reviewTextContainer}>\n                <Text style={styles.reviewTextLabel}>Your Review</Text>\n                <TextInput\n                  style={styles.reviewTextInput}\n                  placeholder=\"Write your review here...\"\n                  placeholderTextColor={theme.colors.placeHolderText}\n                  multiline={true}\n                  numberOfLines={Platform.OS === 'ios' ? null : 4}\n                  minHeight={Platform.OS === 'ios' ? 80 : null}\n                  textAlignVertical=\"top\"\n                  value={reviewText}\n                  onChangeText={setReviewText}\n                />\n              </View>\n              \n              {/* Notice */}\n              <View style={styles.noticeContainer}>\n                <Text style={styles.noticeText}>\n                  Note: Your review won't be visible until the other user posts their review or 14 days after the booking.\n                </Text>\n              </View>\n              \n              {/* Action Buttons */}\n              <View style={styles.actionButtons}>\n                <TouchableOpacity \n                  style={styles.cancelButton} \n                  onPress={onClose}\n                  disabled={isSubmitting}\n                >\n                  <Text style={styles.cancelButtonText}>Cancel</Text>\n                </TouchableOpacity>\n                \n                <TouchableOpacity \n                  style={[\n                    styles.submitButton,\n                    (rating === 0 || isSubmitting) ? styles.disabledButton : {}\n                  ]} \n                  onPress={handleSubmitReview}\n                  disabled={rating === 0 || isSubmitting}\n                >\n                  <Text style={styles.submitButtonText}>\n                    {isSubmitting ? 'Posting...' : 'Post Review'}\n                  </Text>\n                </TouchableOpacity>\n              </View>\n            </TouchableOpacity>\n          </TouchableOpacity>\n        </KeyboardAvoidingView>\n      </Modal>\n      \n      {/* Toast notification */}\n      <Toast\n        visible={toast.visible}\n        message={toast.message}\n        type={toast.type}\n        onDismiss={() => setToast({ ...toast, visible: false })}\n        duration={3000}\n      />\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n  },\n  modalContainer: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 12,\n    width: '100%',\n    maxWidth: 500,\n    padding: 20,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 20,\n    paddingBottom: 10,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  headerText: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  closeButton: {\n    padding: 5,\n  },\n  ratingContainer: {\n    marginBottom: 20,\n  },\n  ratingLabel: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: theme.colors.text,\n    marginBottom: 10,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  starsRow: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  starContainer: {\n    padding: 5,\n  },\n  reviewTextContainer: {\n    marginBottom: 20,\n  },\n  reviewTextLabel: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: theme.colors.text,\n    marginBottom: 10,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  reviewTextInput: {\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 8,\n    padding: 10,\n    fontSize: 16,\n    color: theme.colors.text,\n    backgroundColor: theme.colors.background,\n    fontFamily: theme.fonts.regular.fontFamily,\n    minHeight: 100,\n  },\n  noticeContainer: {\n    backgroundColor: theme.colors.error + '15',\n    borderRadius: 8,\n    padding: 10,\n    marginBottom: 20,\n    borderLeftWidth: 3,\n    borderLeftColor: theme.colors.error,\n  },\n  noticeText: {\n    fontSize: 14,\n    color: theme.colors.error,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  actionButtons: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  cancelButton: {\n    paddingVertical: 12,\n    paddingHorizontal: 20,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    backgroundColor: theme.colors.surface,\n  },\n  cancelButtonText: {\n    color: theme.colors.text,\n    fontSize: 16,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  submitButton: {\n    paddingVertical: 12,\n    paddingHorizontal: 20,\n    borderRadius: 8,\n    backgroundColor: theme.colors.primary,\n  },\n  submitButtonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  disabledButton: {\n    opacity: 0.5,\n  },\n});\n\nexport default ReviewModal; ","import React, { useState } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity } from 'react-native';\nimport { theme } from '../styles/theme';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { debugLog } from '../context/AuthContext';\nimport BookingApprovalModal from './BookingApprovalModal';\nimport ReviewModal from './ReviewModal';\nimport { submitBookingReview } from '../api/API';\n\n/**\n * A card component for review requests that spans the full width of the message list\n */\nconst ReviewRequestCard = ({ \n  data, \n  isProfessional,\n  onPress\n}) => {\n  // Log the data for debugging\n  debugLog('MBA8675309: ReviewRequestCard data:', data);\n  \n  // State for the approval modal\n  const [approvalModalVisible, setApprovalModalVisible] = useState(false);\n  const [safeInitialData, setSafeInitialData] = useState(null);\n  \n  // State for the review modal\n  const [reviewModalVisible, setReviewModalVisible] = useState(false);\n\n  // Determine the message content based on the user role\n  const getReviewMessage = () => {\n    if (isProfessional) {\n      return \"Please review your client\";\n    } else {\n      return \"Please review your experience\";\n    }\n  };\n  \n  // Handle opening the approval modal\n  const handleOpenApprovalModal = () => {\n    // Ensure we have basic data for the modal\n    const preparedData = {\n      ...data,\n      occurrences: data.occurrences?.map(occ => ({\n        ...occ,\n        rates: occ.rates || {\n          base_rate: 0,\n          additional_animal_rate: 0,\n          applies_after: 1,\n          holiday_rate: 0,\n          holiday_days: 0,\n          additional_rates: []\n        }\n      })) || []\n    };\n    setSafeInitialData(preparedData);\n    setApprovalModalVisible(true);\n  };\n  \n  // Handle opening the review modal\n  const handleOpenReviewModal = () => {\n    setReviewModalVisible(true);\n  };\n  \n  // Handle submitting a review\n  const handleSubmitReview = async (reviewData) => {\n    try {\n      const response = await submitBookingReview(reviewData);\n      debugLog('MBA8675309: Review submitted successfully:', response);\n\n      \n      // If there's a callback from the parent component\n      if (onPress) {\n        onPress('reviewSubmitted', response);\n      }\n      \n      return response;\n    } catch (error) {\n      debugLog('MBA8675309: Error submitting review:', error);\n      throw error;\n    }\n  };\n\n  return (\n    <View style={styles.container}>\n      {/* Booking Completed Banner */}\n      <View style={styles.completedBanner}>\n        <MaterialCommunityIcons \n          name=\"check-circle\" \n          size={24} \n          color={theme.colors.success} \n        />\n        <Text style={styles.completedText}>Booking Completed</Text>\n      </View>\n      \n      {/* Review Request Card */}\n      <View style={styles.card}>\n        <View style={styles.header}>\n          <MaterialCommunityIcons \n            name=\"star-outline\" \n            size={24} \n            color={theme.colors.primary} \n          />\n          <Text style={styles.title}>{getReviewMessage()}</Text>\n        </View>\n        \n        <View style={styles.content}>\n          <View style={styles.infoSection}>\n            <View style={styles.row}>\n              <Text style={styles.label}>Booking ID:</Text>\n              <Text style={styles.value}>{data.booking_id || 'N/A'}</Text>\n            </View>\n            \n            <View style={styles.row}>\n              <Text style={styles.label}>Service:</Text>\n              <Text style={styles.value}>{data.service_type || 'N/A'}</Text>\n            </View>\n          </View>\n          \n          <View style={styles.buttonContainer}>\n            <TouchableOpacity \n              style={styles.detailsButton}\n              onPress={handleOpenApprovalModal}\n            >\n              <Text style={styles.detailsButtonText}>View Booking Details</Text>\n            </TouchableOpacity>\n            \n            <TouchableOpacity \n              style={styles.reviewButton}\n              onPress={handleOpenReviewModal}\n            >\n              <Text style={styles.reviewButtonText}>Leave a Review</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </View>\n      \n      {/* Approval Modal */}\n      <BookingApprovalModal\n        visible={approvalModalVisible}\n        onClose={() => setApprovalModalVisible(false)}\n        bookingId={data.booking_id}\n        initialData={safeInitialData}\n        isProfessional={isProfessional}\n        isReadOnly={true}  // Always read-only for completed bookings\n        hideButtons={true}  // Hide approval buttons\n        modalTitle=\"Booking Details\"\n      />\n      \n      {/* Review Modal */}\n      <ReviewModal\n        visible={reviewModalVisible}\n        onClose={() => setReviewModalVisible(false)}\n        isProfessional={isProfessional}\n        bookingId={data.booking_id}\n        onSubmitReview={handleSubmitReview}\n      />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    width: '100%',\n    paddingHorizontal: 16,\n    marginVertical: 8,\n  },\n  completedBanner: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: theme.colors.success + '15', // Light green background\n    borderRadius: 8,\n    padding: 12,\n    marginBottom: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.success,\n    gap: 8,\n  },\n  completedText: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: theme.colors.success,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  card: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 12,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n    overflow: 'hidden',\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n    backgroundColor: theme.colors.background,\n    gap: 8,\n  },\n  title: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  content: {\n    padding: 16,\n  },\n  infoSection: {\n    marginBottom: 16,\n  },\n  row: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  label: {\n    fontSize: 14,\n    fontWeight: '500',\n    color: theme.colors.text,\n    minWidth: 80,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  value: {\n    fontSize: 14,\n    color: theme.colors.text,\n    flex: 1,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    gap: 10,\n    marginTop: 10,\n  },\n  detailsButton: {\n    flex: 1,\n    backgroundColor: '#6b705c', // Olive green color to match the screenshot\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  detailsButtonText: {\n    color: 'white',\n    fontSize: 14,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  reviewButton: {\n    flex: 1,\n    backgroundColor: '#6b705c', // Olive green color to match the screenshot\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  reviewButtonText: {\n    color: 'white',\n    fontSize: 14,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default ReviewRequestCard; ","import React, { useState, useCallback, useRef, useEffect, useContext, useMemo, useLayoutEffect } from 'react';\nimport { View, StyleSheet, Platform, SafeAreaView, StatusBar, Text, TouchableOpacity, Dimensions, Alert, ActivityIndicator, Image, TextInput, BackHandler } from 'react-native';\nimport * as ImagePicker from 'expo-image-picker';\nimport { useTheme, Button } from 'react-native-paper';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { AuthContext, getStorage, setStorage, debugLog } from '../context/AuthContext';\nimport RequestBookingModal from '../components/RequestBookingModal';\nimport BookingStepModal from '../components/BookingStepModal';\nimport { CURRENT_USER_ID } from '../data/mockData';\nimport { useNavigation, useFocusEffect } from '@react-navigation/native';\nimport { API_BASE_URL } from '../config/config';\nimport axios from 'axios';\nimport BookingMessageCard from '../components/BookingMessageCard';\nimport { formatOccurrenceFromUTC } from '../utils/time_utils';\nimport DraftConfirmationModal from '../components/DraftConfirmationModal';\nimport useWebSocket from '../hooks/useWebSocket';\nimport MessageNotificationContext from '../context/MessageNotificationContext';\nimport { getConversationMessages, createDraftFromBooking, getConversations, sendDebugLog } from '../api/API';\nimport { navigateToFrom } from '../components/Navigation';\nimport { applyViewportFix } from '../utils/viewport-fix';\nimport ImageViewer from '../components/Messages/ImageViewer';\nimport { useImageViewer } from '../components/Messages/useImageViewer';\nimport ClickableImage from '../components/Messages/ClickableImage';\n\n// Import our new components\nimport MessageList from '../components/Messages/MessageList';\nimport ConversationList from '../components/Messages/ConversationList';\nimport MessageInput from '../components/Messages/MessageInput';\nimport MessageHeader from '../components/Messages/MessageHeader';\nimport { useMessageLogic } from '../components/Messages/useMessageLogic';\nimport { createMessageStyles } from '../components/Messages/styles';\nimport ClientPetsModal from '../components/ClientPetsModal';\nimport { formatMessageTime, shouldShowTimestamp } from '../components/Messages/messageTimeUtils';\nimport MessageTimestamp from '../components/Messages/MessageTimestamp';\nimport ReviewRequestCard from '../components/ReviewRequestCard';\n\nconst MessageHistory = ({ navigation, route }) => {\n  // IMPORTANT: React hooks rules require that hooks are called in the same order\n  // on every render. Never put hooks inside conditional blocks or early returns.\n  // Always declare all hooks at the top level of the component.\n  \n  const { colors } = useTheme();\n  const { screenWidth, isCollapsed, isSignedIn, loading } = useContext(AuthContext);\n  const styles = createMessageStyles(screenWidth, isCollapsed);\n  \n  // Helper function to safely get initial width\n  const getInitialWidth = () => {\n    if (Platform.OS === 'web' && typeof window !== 'undefined') {\n      return window.innerWidth;\n    }\n    return screenWidth; // Fall back to context screenWidth\n  };\n  \n  // Add loading states\n  const [isLoadingConversations, setIsLoadingConversations] = useState(true);\n  const [isLoadingMessages, setIsLoadingMessages] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isSearchFocused, setIsSearchFocused] = useState(false);\n  \n  const [selectedConversation, setSelectedConversation] = useState(null);\n  const [selectedConversationData, setSelectedConversationData] = useState(null);\n  \n  // Add image viewer state\n  const { \n    isImageViewerVisible, \n    selectedImageUrl, \n    handleImagePress, \n    closeImageViewer \n  } = useImageViewer();\n  \n  // Move these state declarations before the useEffect that uses them\n  const [messages, setMessages] = useState([]);\n  const [isSending, setIsSending] = useState(false);\n  const [showRequestModal, setShowRequestModal] = useState(false);\n  const [showDropdown, setShowDropdown] = useState(false);\n  const { is_DEBUG, is_prototype, isApprovedProfessional, userRole, timeSettings } = useContext(AuthContext);\n  const [conversations, setConversations] = useState([]);\n  const [filteredConversations, setFilteredConversations] = useState([]);\n  \n  // Track whether we're intentionally deselecting\n  const isIntentionallyDeselecting = useRef(false);\n  \n  // Add state for keyboard visibility\n  const [isKeyboardVisible, setIsKeyboardVisible] = useState(false);\n  const keyboardHeightRef = useRef(0);\n  \n  // All other state declarations\n  const [hasMore, setHasMore] = useState(true);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [isLoadingMore, setIsLoadingMore] = useState(false);\n  const prevScreenWidthRef = useRef(screenWidth);\n  const hasLoadedInitialDataRef = useRef(false);\n  const [isInitialLoad, setIsInitialLoad] = useState(true);\n  const initialLoadRef = useRef(true);\n  const [showBookingStepModal, setShowBookingStepModal] = useState(false);\n  const [currentBookingId, setCurrentBookingId] = useState(null);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [hasDraft, setHasDraft] = useState(false);\n  const [draftData, setDraftData] = useState(null);\n  const [showDraftConfirmModal, setShowDraftConfirmModal] = useState(false);\n  const [wsConnectionStatus, setWsConnectionStatus] = useState('disconnected');\n  const { resetNotifications, updateRoute, markConversationAsRead, getConversationUnreadCount } = useContext(MessageNotificationContext);\n  const [showClientPetsModal, setShowClientPetsModal] = useState(false);\n\n  // Add a ref to track if we're handling route params\n  const isHandlingRouteParamsRef = useRef(false);\n\n  // Add a ref to track if messages have been fetched for the current conversation\n  const hasLoadedMessagesRef = useRef(false);\n\n  // Add a ref to track if we need to open booking creation\n  const shouldOpenBookingCreationRef = useRef(false);\n  \n  // Add a ref for the markMessagesAsRead function that will come from the useWebSocket hook\n  const markMessagesAsReadRef = useRef(null);\n\n  // Add a ref to track the last viewed conversation to avoid redundant API calls\n  const lastViewedConversationRef = useRef(null);\n\n  // Add these refs at the top level of the component, near other ref declarations\n  const isLoadingMoreRef = useRef(false);\n  const processedPagesRef = useRef(new Set());\n  const messageIdsRef = useRef(new Set());\n\n  // Add viewport height detection for mobile browsers - using ref instead of state\n  const actualViewportHeightRef = useRef(null);\n  const inputContainerHeightRef = useRef(0);\n  const isAndroidChromeRef = useRef(false);\n  \n  // No viewport fix needed, we're using pure flexbox\n\n  // Add a ref to track if conversations fetch is already in progress\n  const isFetchingConversationsRef = useRef(false);\n\n  // Add a ref to track if messages fetch is already in progress for specific conversations\n  const isFetchingMessagesRef = useRef(new Set());\n  \n  // Ref to store the keyboard dismissal handler from MessageInput\n  const keyboardDismissHandlerRef = useRef(null);\n\n  // Add re-render tracking - MOVED HERE after all state declarations\n  const renderCountRef = useRef(0);\n  renderCountRef.current++;\n  \n  debugLog('MBA9876: [COMPONENT] MessageHistory render #' + renderCountRef.current, {\n    timestamp: Date.now(),\n    selectedConversation,\n    isSignedIn,\n    loading,\n    screenWidth,\n    routeParams: route.params\n  });\n\n  // Add code to attach keyboard detection event for better handling in MessageHistory component root\n  useEffect(() => {\n    if (Platform.OS === 'web' && isAndroidChromeRef.current) {\n      // Setup a global keyboard visibility tracker\n      const detectKeyboard = () => {\n        // Use visualViewport API to detect keyboard\n        if (window.visualViewport) {\n          const keyboardHeight = window.innerHeight - window.visualViewport.height;\n          const keyboardVisible = keyboardHeight > 100;\n          \n          // Log keyboard visibility changes\n          debugLog('MBA9876: [KEYBOARD] Global keyboard visibility check', {\n            keyboardHeight,\n            keyboardVisible,\n            visualViewportHeight: window.visualViewport.height,\n            innerHeight: window.innerHeight\n          });\n          \n          // Apply CSS classes to document for keyboard visibility\n          if (keyboardVisible) {\n            document.documentElement.classList.add('keyboard-visible');\n            // Force bottom positioning for input container\n            setTimeout(() => {\n              window.scrollTo(0, document.body.scrollHeight);\n            }, 50);\n          } else {\n            document.documentElement.classList.remove('keyboard-visible');\n          }\n        }\n      };\n      \n      // Add visualViewport event listener\n      if (window.visualViewport) {\n        window.visualViewport.addEventListener('resize', detectKeyboard);\n        \n        // Run initial detection\n        detectKeyboard();\n        \n        return () => {\n          window.visualViewport.removeEventListener('resize', detectKeyboard);\n          document.documentElement.classList.remove('keyboard-visible');\n        };\n      }\n    }\n  }, []);\n\n  // Simple cleanup on sign out\n  useEffect(() => {\n    if (!isSignedIn) {\n      debugLog('MBA9999: User signed out, resetting MessageHistory state');\n      setConversations([]);\n      setMessages([]);\n      setSelectedConversation(null);\n      setSelectedConversationData(null);\n      setHasDraft(false);\n      setDraftData(null);\n      hasLoadedMessagesRef.current = false;\n      lastViewedConversationRef.current = null;\n      processedPagesRef.current.clear();\n      messageIdsRef.current.clear();\n      initialLoadRef.current = true;\n      setIsInitialLoad(true);\n      \n      // Clear fetch tracking refs\n      isFetchingConversationsRef.current = false;\n      isFetchingMessagesRef.current.clear();\n    }\n  }, [isSignedIn]);\n  \n  // Handle role changes by refreshing conversations and clearing selection\n  useEffect(() => {\n    if (isSignedIn) {\n      debugLog('MBA9999: User role changed, refreshing conversations', { userRole });\n      \n      // Clear the current selection\n      setSelectedConversation(null);\n      setSelectedConversationData(null);\n      setMessages([]);\n      hasLoadedMessagesRef.current = false;\n      lastViewedConversationRef.current = null;\n      \n      debugLog('MBA24u45vn: Refetching conversations for the new role');\n      // Refetch conversations for the new role\n      fetchConversations();\n    }\n  }, [userRole, isSignedIn]);\n\n  useEffect(() => {\n    debugLog('MBA9876: [VIEWPORT] useEffect running', {\n      timestamp: Date.now(),\n      screenWidth,\n      isWebMobile: Platform.OS === 'web' && screenWidth <= 900\n    });\n    \n    if (Platform.OS === 'web' && screenWidth <= 900) {\n      // Detect Android Chrome once at initialization\n      if (typeof navigator !== 'undefined') {\n        isAndroidChromeRef.current = /Chrome/i.test(navigator.userAgent) && \n                                     /Android/i.test(navigator.userAgent);\n        \n        debugLog('MBA9876: [BROWSER] Browser detection', {\n          userAgent: navigator.userAgent,\n          isAndroidChrome: isAndroidChromeRef.current\n        });\n\n        // Add mobile-only CSS for Android Chrome\n        if (isAndroidChromeRef.current) {\n          // Create a style tag for our Android Chrome specific CSS\n          const styleTag = document.createElement('style');\n          styleTag.id = 'android-chrome-fixes';\n          styleTag.innerHTML = `\n            /* Android Chrome keyboard fixes */\n            body.keyboard-open {\n              height: 100% !important;\n              overflow: hidden !important;\n              position: fixed !important;\n              width: 100% !important;\n            }\n            \n            .message-input-container {\n              background-color: white;\n            }\n            \n            .message-input-container.keyboard-open {\n              position: fixed !important;\n              bottom: 0 !important;\n              left: 0 !important;\n              right: 0 !important;\n              z-index: 1000 !important;\n              margin-bottom: 0 !important;\n              padding-bottom: 0 !important;\n              transform: translateZ(0) !important;\n            }\n            \n            .message-container.keyboard-open {\n              padding-bottom: 60px !important;\n              height: calc(100vh - 60px) !important;\n              overflow-y: auto !important;\n            }\n            \n            textarea:focus {\n              /* Prevent browser from zooming on focus */\n              font-size: 16px !important;\n            }\n          `;\n          document.head.appendChild(styleTag);\n          \n          // Clean up the style tag when component unmounts\n          return () => {\n            const existingStyle = document.getElementById('android-chrome-fixes');\n            if (existingStyle) {\n              existingStyle.remove();\n            }\n          };\n        }\n      }\n    \n      const updateViewportHeight = () => {\n        // Get the actual viewport height (works better than 100vh on mobile)\n        const vh = window.innerHeight * 0.01;\n        document.documentElement.style.setProperty('--vh', `${vh}px`);\n        const newHeight = window.innerHeight;\n        \n        debugLog('MBA9876: [VIEWPORT] updateViewportHeight called', {\n          timestamp: Date.now(),\n          newHeight,\n          previousHeight: actualViewportHeightRef.current,\n          vh,\n          currentActiveElement: document.activeElement?.tagName\n        });\n        \n        actualViewportHeightRef.current = newHeight;\n      };\n\n      // Mobile keyboard handling - completely revised approach\n      const handleResize = () => {\n        debugLog('MBA9876: [VIEWPORT] handleResize called', {\n          timestamp: Date.now(),\n          innerHeight: window.innerHeight,\n          activeElement: document.activeElement?.tagName,\n          visualViewport: window.visualViewport?.height,\n          documentHeight: document.documentElement.clientHeight,\n          screenHeight: window.screen.height\n        });\n        \n        updateViewportHeight();\n        \n        // Use visualViewport API if available (better for Android Chrome)\n        if (window.visualViewport) {\n          // For Android Chrome, calculate keyboard height differently\n          let keyboardHeight;\n          \n          if (isAndroidChromeRef.current) {\n            // For Android Chrome, use the difference between window.innerHeight and visualViewport.height\n            // This is more reliable than using screen.height on Android\n            keyboardHeight = window.innerHeight - window.visualViewport.height;\n            \n            // On some Android devices, we need to account for URL bar\n            if (document.documentElement.clientHeight > window.innerHeight) {\n              // Adjust for URL bar height\n              const urlBarHeight = document.documentElement.clientHeight - window.innerHeight;\n              keyboardHeight = Math.max(0, keyboardHeight - urlBarHeight);\n            }\n          } else {\n            // For other browsers, use the original calculation\n            keyboardHeight = window.screen.height - window.visualViewport.height;\n          }\n          \n          // Only consider keyboard open if height is significant\n          keyboardHeightRef.current = keyboardHeight > 100 ? keyboardHeight : 0;\n          \n          debugLog('MBA9876: [KEYBOARD] Detected keyboard height:', {\n            keyboardHeight: keyboardHeightRef.current,\n            screenHeight: window.screen.height,\n            visualViewportHeight: window.visualViewport.height,\n            innerHeight: window.innerHeight,\n            clientHeight: document.documentElement.clientHeight,\n            isKeyboardOpen: keyboardHeight > 100,\n            isAndroidChrome: isAndroidChromeRef.current\n          });\n          \n          // Apply direct style to input container if we have a keyboard\n          const inputContainer = document.querySelector('.message-input-container');\n          if (inputContainer) {\n            if (keyboardHeight > 100) {\n              // Keyboard is open - stick input to keyboard\n              inputContainer.style.position = 'fixed';\n              inputContainer.style.bottom = '0px';\n              inputContainer.style.left = '0px';\n              inputContainer.style.right = '0px';\n              inputContainer.style.zIndex = '1000';\n              \n              // Explicitly prevent any margin that might create space\n              inputContainer.style.marginBottom = '0px';\n              \n              // Force the browser to recalculate layout\n              inputContainer.style.transform = 'translateZ(0)';\n              \n              // Save the height for message container calculations\n              inputContainerHeightRef.current = inputContainer.offsetHeight;\n              \n              // Adjust the message container to make room for fixed input\n              const messageContainer = document.querySelector('.message-container');\n              if (messageContainer) {\n                messageContainer.style.paddingBottom = `${inputContainerHeightRef.current}px`;\n              }\n              \n              // For Android Chrome, we need additional handling\n              if (isAndroidChromeRef.current) {\n                // Prevent entire page from scrolling\n                document.body.style.overflow = 'hidden';\n                document.documentElement.style.overflow = 'hidden';\n                \n                // Add a small delay to ensure proper positioning after keyboard is fully visible\n                setTimeout(() => {\n                  // For Chrome on Android, we need to force the input into view\n                  if (document.activeElement && document.activeElement.tagName === 'TEXTAREA') {\n                    // Scroll to bottom of page to ensure input is visible\n                    window.scrollTo(0, document.body.scrollHeight);\n                    \n                    // If input is still not visible enough, scroll it into view\n                    const inputRect = document.activeElement.getBoundingClientRect();\n                    const viewportHeight = window.visualViewport.height;\n                    \n                    if (inputRect.bottom > viewportHeight) {\n                      document.activeElement.scrollIntoView(false);\n                    }\n                    \n                    debugLog('MBA9876: [KEYBOARD] Android Chrome positioning adjustment', {\n                      inputBottom: inputRect.bottom,\n                      viewportHeight: viewportHeight,\n                      needsExtraScroll: inputRect.bottom > viewportHeight\n                    });\n                  }\n                }, 100);\n              }\n              \n              debugLog('MBA9876: [KEYBOARD] Fixed input to bottom with keyboard open', {\n                inputHeight: inputContainerHeightRef.current,\n                browser: navigator.userAgent\n              });\n            } else {\n              // Keyboard is closed - reset positioning\n              inputContainer.style.position = '';\n              inputContainer.style.bottom = '';\n              inputContainer.style.left = '';\n              inputContainer.style.right = '';\n              inputContainer.style.zIndex = '';\n              inputContainer.style.marginBottom = '';\n              inputContainer.style.transform = '';\n              \n              // Reset message container padding\n              const messageContainer = document.querySelector('.message-container');\n              if (messageContainer) {\n                messageContainer.style.paddingBottom = '';\n              }\n              \n              // Reset body overflow for Android Chrome\n              if (isAndroidChromeRef.current) {\n                document.body.style.overflow = '';\n                document.documentElement.style.overflow = '';\n              }\n              \n              debugLog('MBA9876: [KEYBOARD] Reset input positioning with keyboard closed');\n            }\n          }\n        }\n        \n        // Fix for mobile Chrome keyboard issues\n        if (document.activeElement && document.activeElement.tagName === 'TEXTAREA') {\n          debugLog('MBA9876: [VIEWPORT] Found active textarea, scheduling scroll', {\n            timestamp: Date.now()\n          });\n          \n          // Small delay to allow keyboard to settle\n          setTimeout(() => {\n            debugLog('MBA9876: [VIEWPORT] Executing scrollIntoView', {\n              timestamp: Date.now(),\n              stillActive: document.activeElement?.tagName === 'TEXTAREA'\n            });\n            \n            if (document.activeElement && document.activeElement.tagName === 'TEXTAREA') {\n              // For Android Chrome, use a different scrolling approach\n              if (isAndroidChromeRef.current) {\n                window.scrollTo(0, document.body.scrollHeight);\n              } else {\n                document.activeElement.scrollIntoView({ \n                  behavior: 'smooth', \n                  block: 'center' \n                });\n              }\n            }\n          }, 100);\n        }\n      };\n\n      updateViewportHeight();\n      \n      // Use visualViewport API for more accurate keyboard detection on Android\n      if (window.visualViewport) {\n        window.visualViewport.addEventListener('resize', handleResize);\n        window.visualViewport.addEventListener('scroll', handleResize);\n      } else {\n        // Fallback to window resize events\n        window.addEventListener('resize', handleResize);\n      }\n      \n      window.addEventListener('orientationchange', updateViewportHeight);\n      \n      // Android Chrome gray space fix\n      const handleFocusOut = () => {\n        debugLog('MBA9876: [VIEWPORT] handleFocusOut called - fixing gray space', {\n          timestamp: Date.now()\n        });\n        \n        // Fix gray space on Android Chrome when keyboard closes\n        setTimeout(() => {\n          window.scrollTo(0, 0);\n          \n          // Reset any fixed positioning on input\n          const inputContainer = document.querySelector('.message-input-container');\n          if (inputContainer) {\n            inputContainer.style.position = '';\n            inputContainer.style.bottom = '';\n            \n            // Reset message container padding\n            const messageContainer = document.querySelector('.message-container');\n            if (messageContainer) {\n              messageContainer.style.paddingBottom = '';\n            }\n          }\n          \n          debugLog('MBA9876: [VIEWPORT] Gray space fix - scrolled to top');\n        }, 150);\n      };\n      \n      window.addEventListener('focusout', handleFocusOut);\n\n      return () => {\n        if (window.visualViewport) {\n          window.visualViewport.removeEventListener('resize', handleResize);\n          window.visualViewport.removeEventListener('scroll', handleResize);\n        } else {\n          window.removeEventListener('resize', handleResize);\n        }\n        window.removeEventListener('orientationchange', updateViewportHeight);\n        window.removeEventListener('focusout', handleFocusOut);\n      };\n    }\n  }, [screenWidth]);\n\n  // Outside the renderMessage callback, add a function to group messages by booking ID\n  const groupMessagesByBookingId = (messages) => {\n    const bookingMessages = {};\n    \n    // First pass: collect messages by booking ID\n    messages.forEach(message => {\n      if (message.metadata && message.metadata.booking_id) {\n        const bookingId = message.metadata.booking_id;\n        if (!bookingMessages[bookingId]) {\n          bookingMessages[bookingId] = [];\n        }\n        bookingMessages[bookingId].push({\n          messageId: message.message_id,\n          type: message.type_of_message,\n          timestamp: new Date(message.created_at || message.timestamp),\n          message: message\n        });\n      }\n    });\n    \n    // Second pass: sort messages by timestamp (newest first)\n    Object.keys(bookingMessages).forEach(bookingId => {\n      bookingMessages[bookingId].sort((a, b) => b.timestamp - a.timestamp);\n    });\n    \n    return bookingMessages;\n  };\n\n  // WebSocket message handler defined as a memoized callback\n  const handleWebSocketMessage = useCallback((data) => {\n    debugLog('MBA9876: WebSocket message received:', {\n      type: data.type,\n      conversationId: data.conversation_id,\n      messageId: data.message_id,\n      selectedConversation,\n      currentMessageCount: messages.length\n    });\n    \n    try {\n      // Validate message data\n      if (!data || (!data.message_id && !data.conversation_id && !data.type)) {\n        debugLog('MBA2349f87g9qbh2nfv9cg: Invalid message data received');\n        return;\n      }\n      \n      // Handle user status updates\n      if (data.type === 'user_status_update' && data.user_id) {\n        debugLog('MBA2349f87g9qbh2nfv9cg: [OTHER USER STATUS] Received online status update for user ID:', data.user_id);\n        \n        // Normalize the user_id to string for comparison\n        const statusUserId = String(data.user_id);\n        const isOnline = !!data.is_online;\n        \n        debugLog(`MBA2349f87g9qbh2nfv9cg: [OTHER USER STATUS] Processing status change for user ${statusUserId}, online=${isOnline}`);\n        \n        // Update the conversations list with the new online status\n        setConversations(prevConversations => {\n          // Log the current conversations for debugging\n          debugLog(`MBA2349f87g9qbh2nfv9cg: [OTHER USER STATUS] Checking ${prevConversations.length} conversations for user ${statusUserId}`);\n          \n          // Apply the update\n          const updatedConversations = prevConversations.map(conv => {\n            // Normalize participant IDs to strings for comparison\n            const participant1Id = conv.participant1_id ? String(conv.participant1_id) : '';\n            const participant2Id = conv.participant2_id ? String(conv.participant2_id) : '';\n            \n            // Check if this conversation involves the user whose status changed\n            const matchesUser = (statusUserId === participant1Id || statusUserId === participant2Id);\n            \n            if (matchesUser) {\n              debugLog(`MBA2349f87g9qbh2nfv9cg: [OTHER USER STATUS] Found match in conversation ${conv.conversation_id}, setting other_participant_online=${isOnline}`);\n              \n              // Update this conversation with the new online status\n              return {\n                ...conv,\n                other_participant_online: isOnline\n              };\n            }\n            return conv;\n          });\n          \n          // Check if any conversations were updated\n          const updatedCount = updatedConversations.filter(\n            (conv, i) => conv.other_participant_online !== prevConversations[i].other_participant_online\n          ).length;\n          \n          debugLog(`MBA2349f87g9qbh2nfv9cg: [OTHER USER STATUS] Updated ${updatedCount} conversations with new status for user ${statusUserId}`);\n          \n          return updatedConversations;\n        });\n        \n        // Also update the selected conversation if it's affected\n        if (selectedConversationData) {\n          // Normalize participant IDs to strings\n          const selectedParticipant1Id = selectedConversationData.participant1_id \n            ? String(selectedConversationData.participant1_id) \n            : '';\n          const selectedParticipant2Id = selectedConversationData.participant2_id \n            ? String(selectedConversationData.participant2_id) \n            : '';\n          \n          // Check if selected conversation involves this user\n          if (statusUserId === selectedParticipant1Id || statusUserId === selectedParticipant2Id) {\n            debugLog(`MBA2349f87g9qbh2nfv9cg: [OTHER USER STATUS] Updating selected conversation with online status: ${isOnline} for user ${statusUserId}`);\n            \n            setSelectedConversationData(prev => ({\n              ...prev,\n              other_participant_online: isOnline\n            }));\n          }\n        }\n        \n        return;\n      }\n      \n      // If this message is for our current conversation\n      if (selectedConversation && data.conversation_id && \n          String(data.conversation_id) === String(selectedConversation)) {\n        \n        debugLog('MBA2349f87g9qbh2nfv9cg: Message is for current conversation, adding to list');\n        \n        // Add the new message to the list (at the beginning since FlatList is inverted)\n        setMessages(prevMessages => {\n          debugLog('MBA2349f87g9qbh2nfv9cg: Before adding WebSocket message:', {\n            currentMessageCount: prevMessages.length,\n            newMessageId: data.message_id,\n            newMessageContent: data.content?.substring(0, 50)\n          });\n          \n          // Check if message already exists to avoid duplicates - be more thorough\n          const messageExists = prevMessages.some(msg => {\n            // Check by ID if available (most reliable)\n            if (msg.message_id && data.message_id && \n                String(msg.message_id) === String(data.message_id)) {\n              debugLog('MBA2349f87g9qbh2nfv9cg: Duplicate detected by ID');\n              return true;\n            }\n            \n            // Also check for messages with the same content, timestamp and sender\n            // to catch duplicates that might have different/temporary IDs\n            if (msg.content === data.content && \n                msg.sent_by_other_user === data.sent_by_other_user) {\n              \n              // If the timestamp exists, compare with some tolerance\n              if (msg.timestamp && data.timestamp) {\n                const timeDiff = Math.abs(\n                  new Date(msg.timestamp).getTime() - \n                  new Date(data.timestamp).getTime()\n                );\n                \n                // 5 seconds tolerance (messages sent close to each other)\n                if (timeDiff < 5000) {\n                  debugLog('MBA2349f87g9qbh2nfv9cg: Duplicate detected by content+timestamp');\n                  return true;\n                }\n              } else {\n                // If no timestamp, just assume it's the same message\n                debugLog('MBA2349f87g9qbh2nfv9cg: Duplicate detected by content+sender');\n                return true;\n              }\n            }\n            \n            // Check for optimistic messages that match\n            if (msg._isOptimistic && \n                msg.content === data.content && \n                !data.sent_by_other_user) {\n              debugLog('MBA2349f87g9qbh2nfv9cg: Found matching optimistic message, replacing');\n              return true;\n            }\n            \n            return false;\n          });\n          \n          if (messageExists) {\n            debugLog('MBA2349f87g9qbh2nfv9cg: Message already exists in the list, skipping');\n            \n            // For optimistic messages that now have a real ID, update them\n            if (data.message_id) {\n              const updatedMessages = prevMessages.map(msg => {\n                if (msg._isOptimistic && \n                    msg.content === data.content && \n                    !data.sent_by_other_user) {\n                  // Replace the optimistic message with the real one\n                  return { ...data, _wasOptimistic: true };\n                }\n                return msg;\n              });\n              \n              debugLog('MBA2349f87g9qbh2nfv9cg: Updated optimistic message with real data');\n              return updatedMessages;\n            }\n            \n            return prevMessages;\n          }\n          \n          debugLog('MBA2349f87g9qbh2nfv9cg: Adding new message to list:', {\n            messageId: data.message_id,\n            messageLength: prevMessages.length,\n            newMessageLength: prevMessages.length + 1\n          });\n          \n          const updatedMessages = [data, ...prevMessages];\n          \n          debugLog('MBA2349f87g9qbh2nfv9cg: Messages array updated via WebSocket:', {\n            oldLength: prevMessages.length,\n            newLength: updatedMessages.length,\n            addedMessageId: data.message_id\n          });\n          \n          return updatedMessages;\n        });\n        \n        // Mark the message as read if we're viewing this conversation\n        if (data.message_id && markMessagesAsReadRef.current && data.sent_by_other_user) {\n          debugLog('MBA2349f87g9qbh2nfv9cg: Marking message as read:', data.message_id);\n          markMessagesAsReadRef.current(selectedConversation, [data.message_id]);\n        }\n      } else if (data.conversation_id) {\n        // Update the conversation list for unread messages in other conversations\n        debugLog('MBA2349f87g9qbh2nfv9cg: Message is for another conversation, updating conversation list');\n        setConversations(prevConversations => \n          prevConversations.map(conv => \n            String(conv.conversation_id) === String(data.conversation_id)\n              ? {\n                  ...conv,\n                  last_message: data.content,\n                  last_message_time: data.timestamp,\n                  unread: true\n                }\n              : conv\n          )\n        );\n      }\n    } catch (error) {\n      debugLog('MBA2349f87g9qbh2nfv9cg: Error handling WebSocket message:', error);\n    }\n  }, [selectedConversation]);\n\n  // Initialize WebSocket with the message handler\n  const { isConnected, connectionStatus, markMessagesAsRead, reconnect, disconnect, simulateConnection, isUsingFallback } = useWebSocket(\n    'message', \n    handleWebSocketMessage,\n    { handlerId: 'message-history' }\n  );\n  \n  // Update our ref when markMessagesAsRead changes\n  useEffect(() => {\n    markMessagesAsReadRef.current = markMessagesAsRead;\n  }, [markMessagesAsRead]);\n  \n\n  // Add a function to manually force reconnection\n  const handleForceReconnect = useCallback(() => {\n    debugLog('MBA2349f87g9qbh2nfv9cg: [CONNECTION] User manually requested WebSocket reconnection');\n    if (typeof reconnect === 'function') {\n      reconnect();\n    }\n  }, [reconnect, selectedConversationData]);\n  \n  // Add a function to simulate connection for testing\n  // const handleSimulateConnection = useCallback(() => {\n  //   debugLog('MBA2349f87g9qbh2nfv9cg: User requested simulated connection');\n  //   if (typeof simulateConnection === 'function') {\n  //     simulateConnection();\n  //   }\n  // }, [simulateConnection]);\n  \n  // Update connection status UI and log more detailed information\n  useEffect(() => {\n    setWsConnectionStatus(connectionStatus);\n    \n    // Add more debug logs to check actual WebSocket readyState\n    if (window && window.WebSocket) {\n      debugLog(`MBA3456: [MY CONNECTION] WebSocket connection status changed to ${connectionStatus}`, {\n        isConnected,\n        isUsingFallback,\n        userRole\n      });\n    }\n    \n    // Only log status changes but don't trigger fetches here - that's handled in the mount effect\n    if ((connectionStatus === 'connected' && isConnected) || isUsingFallback) {\n      debugLog('MBA3456: [MY CONNECTION] Connection fully verified as connected or using fallback', {\n        userRole,\n        selectedConversation: selectedConversation ? `ID: ${selectedConversation}` : 'none'\n      });\n    } else {\n      debugLog('MBA3456: [MY CONNECTION] Connection not fully verified, status and state mismatch', {\n        connectionStatus,\n        isConnected,\n        userRole\n      });\n    }\n  }, [connectionStatus, isConnected, isUsingFallback, userRole]);\n  \n  // Force reconnection on component mount to ensure connection\n  useEffect(() => {\n    // Short delay to allow other initializations to complete\n    const timer = setTimeout(() => {\n      debugLog('MBA2349f87g9qbh2nfv9cg: [MY CONNECTION] Forcing reconnection on component mount');\n      if (typeof reconnect === 'function') {\n        reconnect();\n      }\n    }, 1000);\n    \n    return () => clearTimeout(timer);\n  }, [reconnect]);\n  \n    // Add a ref to track if initialization is in progress\n  const isInitializingRef = useRef(false);\n  \n  // Add a ref to track the last window width to detect resize events\n  const lastWindowWidthRef = useRef(typeof window !== 'undefined' ? window.innerWidth : 0);\n  \n  // Track the last execution time to avoid excessive initialization\n  const lastInitTimeRef = useRef(0);\n  \n  // Keep track of the currently selected conversation to preserve during resizes\n  const lastSelectedConversationRef = useRef(null);\n  \n  // Add a ref to track screen focus to detect returning to screen\n  const isScreenFocusedRef = useRef(true);\n  const lastFocusRefreshTimeRef = useRef(0);\n  \n  // Use useFocusEffect to detect when screen comes into focus\n  useFocusEffect(\n    useCallback(() => {\n      debugLog('MBA24u45vn: MessageHistory screen focused');\n      isScreenFocusedRef.current = true;\n      \n      // If we're returning to the screen and have existing conversations, refresh them\n      // Skip if this is initial load (initialLoadRef.current = true) or if we have no conversations yet\n      // Also throttle to prevent excessive API calls\n      const now = Date.now();\n      const minTimeBetweenRefresh = 2000; // 2 seconds minimum between focus refreshes\n      \n      if (!initialLoadRef.current && \n          conversations.length > 0 && \n          isSignedIn && \n          (now - lastFocusRefreshTimeRef.current > minTimeBetweenRefresh)) {\n        debugLog('MBA24u45vn: Returning to MessageHistory screen, refreshing conversations');\n        lastFocusRefreshTimeRef.current = now;\n        fetchConversations();\n      } else {\n        debugLog('MBA24u45vn: Screen focused but not refreshing conversations', {\n          isInitialLoad: initialLoadRef.current,\n          hasConversations: conversations.length > 0,\n          conversationsCount: conversations.length,\n          isSignedIn,\n          timeSinceLastRefresh: now - lastFocusRefreshTimeRef.current,\n          minTimeBetweenRefresh\n        });\n      }\n\n      return () => {\n        debugLog('MBA24u45vn: MessageHistory screen blurred');\n        isScreenFocusedRef.current = false;\n      };\n    }, [conversations.length, isSignedIn])\n  );\n  \n  // Effect to preserve selected conversation during resizes\n  useEffect(() => {\n    // Store current selection when it changes\n    if (selectedConversation) {\n      lastSelectedConversationRef.current = {\n        conversationId: selectedConversation,\n        conversationData: selectedConversationData\n      };\n    }\n  }, [selectedConversation, selectedConversationData]);\n  \n  // MAIN INITIALIZATION - Keep only one, safer initialization effect  \n  useEffect(() => {\n    // Check if this is likely a resize event\n    const currentWindowWidth = typeof window !== 'undefined' ? window.innerWidth : 0;\n    const isResizeEvent = lastWindowWidthRef.current !== 0 && \n                          lastWindowWidthRef.current !== currentWindowWidth;\n    \n    // Update the window width reference for next time\n    if (typeof window !== 'undefined') {\n      lastWindowWidthRef.current = window.innerWidth;\n    }\n    \n    // For resize events, just ensure we preserve the selected conversation\n    if (isResizeEvent) {\n      debugLog('MBA24u45vn', 'Detected resize event, preserving conversation', {\n        oldWidth: lastWindowWidthRef.current,\n        newWidth: currentWindowWidth,\n        hasSelectedConversation: !!selectedConversation,\n        hasStoredConversation: !!lastSelectedConversationRef.current\n      });\n      \n      // If we've lost our selected conversation but have one stored, restore it\n      if (!selectedConversation && lastSelectedConversationRef.current?.conversationId) {\n        debugLog('MBA24u45vn', 'Restoring conversation after resize', {\n          conversationId: lastSelectedConversationRef.current.conversationId\n        });\n        \n        // Set the flag to indicate this is a resize-triggered selection change\n        if (typeof isResizeTriggeredSelectionRef !== 'undefined') {\n          isResizeTriggeredSelectionRef.current = true;\n          debugLog('MBA24u45vn', 'Marked selection as resize-triggered to prevent redundant fetches');\n        }\n        \n        setSelectedConversation(lastSelectedConversationRef.current.conversationId);\n        if (lastSelectedConversationRef.current.conversationData) {\n          setSelectedConversationData(lastSelectedConversationRef.current.conversationData);\n        }\n      }\n      \n      // Skip full initialization for resize events\n      return;\n    }\n    \n    // Prevent running multiple initializations in a short time period\n    const now = Date.now();\n    const minTimeBetweenInits = 1000; // 1 second minimum between initializations\n    \n    if (now - lastInitTimeRef.current < minTimeBetweenInits) {\n      debugLog('MBA24u45vn', 'Initialization throttled - too frequent', {\n        timeSinceLastInit: now - lastInitTimeRef.current,\n        minRequiredTime: minTimeBetweenInits\n      });\n      return;\n    }\n    \n    // Only run if not signed in (cleaning up) or first time signed in (initializing)\n    if (!isSignedIn || loading) {\n      debugLog('MBA1111 MessageHistory: User not signed in, skipping initialization');\n      return;\n    }\n\n    // More robust check: Allow initialization only if we truly need it\n    // Either first time (initialLoadRef.current = true) OR user just signed in but has no conversations\n    const isFirstTime = initialLoadRef.current;\n    const hasNoConversationsAfterSignIn = !initialLoadRef.current && conversations.length === 0;\n    const needsInitialization = isFirstTime || hasNoConversationsAfterSignIn;\n    \n    // Skip if we're already initialized\n    if (!needsInitialization) {\n      return;\n    }\n    \n    // Skip if initialization is already in progress\n    if (isInitializingRef.current) {\n      debugLog('MBA24u45vn', 'Initialization already in progress, skipping duplicate call');\n      return;\n    }\n    \n    // Update the last initialization time\n    lastInitTimeRef.current = now;\n\n    debugLog('MBA1111 MessageHistory: Starting initialization for signed in user');\n    \n    const initializeData = async () => {\n      // Mark initialization as in progress\n      isInitializingRef.current = true;\n    try {\n      // Mark as initialized IMMEDIATELY to prevent race conditions\n      initialLoadRef.current = false;\n      \n      // Add debug logging for route params in initializeData\n      if (route.params?.conversationId) {\n        debugLog('MBA24u45vn', 'Processing route params in initializeData', {\n          conversationId: route.params.conversationId,\n          otherUserName: route.params.otherUserName,\n          currentTime: Date.now()\n        });\n      }\n      \n      // Only reset states if we don't already have conversations loaded\n      if (conversations.length === 0) {\n        setConversations([]);\n        setMessages([]);\n        setSelectedConversation(null);\n        setSelectedConversationData(null);\n        setIsLoadingConversations(true);\n        setIsLoadingMessages(false);\n        setCurrentPage(1);\n        setHasMore(true);\n        lastViewedConversationRef.current = null;\n      }\n\n                // Handle URL parameters on web\n        if (Platform.OS === 'web') {\n          const currentUrl = new URL(window.location.href);\n          \n          // Check for selectedConversation parameter (this is the main one we care about for reloads)\n          const rawSelectedConversationId = currentUrl.searchParams.get('selectedConversation');\n          const selectedConversationId = (rawSelectedConversationId && rawSelectedConversationId !== 'null') \n                                         ? rawSelectedConversationId : null;\n          \n          // Also check conversationId for compatibility\n          const rawUrlConversationId = currentUrl.searchParams.get('conversationId');\n          const urlConversationId = (rawUrlConversationId && rawUrlConversationId !== 'null') \n                                    ? rawUrlConversationId : null;\n          \n          // Use selectedConversation first, then fall back to conversationId\n          const conversationToLoad = selectedConversationId || urlConversationId;\n          \n          debugLog('MBA24u45vn', 'Checking URL parameters on initialization', {\n            url: window.location.href,\n            rawSelectedConversationId,\n            selectedConversationId,\n            rawUrlConversationId,\n            urlConversationId,\n            conversationToLoad,\n            hasSelectedConversation: !!selectedConversation,\n            timestamp: Date.now()\n          });\n          \n                     // If we have a valid conversation ID from URL, process it (don't clear URL params yet)\n           if (conversationToLoad) {\n             debugLog('MBA24u45vn', 'Processing valid conversation ID from URL', {\n               conversationId: conversationToLoad,\n               source: selectedConversationId ? 'selectedConversation' : 'conversationId',\n               timestamp: Date.now()\n             });\n             \n             debugLog('MBA24u45vn: Fetching conversations for URL conversation ID');\n             \n             // Fetch conversations and wait for the result\n             const conversationsData = await fetchConversations();\n             \n             // Make sure we have data before proceeding\n             if (conversationsData && Array.isArray(conversationsData) && conversationsData.length > 0) {\n               // Find the conversation in the data\n               const conversation = conversationsData.find(c => c.conversation_id === conversationToLoad);\n               \n               if (conversation) {\n                 debugLog('MBA24u45vn', 'Found conversation from URL in data', {\n                   conversation_id: conversation.conversation_id,\n                   other_user_name: conversation.other_user_name,\n                   has_profile_pic: !!conversation.profile_picture\n                 });\n                 \n                 // Set the selected conversation\n                 setSelectedConversation(conversationToLoad);\n                 setSelectedConversationData(conversation);\n                 \n                 // Set global variable for Navigation component\n                 if (typeof window !== 'undefined') {\n                   window.selectedConversationId = conversationToLoad;\n                 }\n                 \n                 // Update URL to maintain selectedConversation parameter, but clean up other params\n                 const cleanUrl = new URL(window.location.href);\n                 const paramsToKeep = ['selectedConversation'];\n                 const paramsToRemove = [...cleanUrl.searchParams.keys()].filter(key => !paramsToKeep.includes(key));\n                 \n                 paramsToRemove.forEach(key => {\n                   cleanUrl.searchParams.delete(key);\n                 });\n                 \n                 // Ensure selectedConversation is set correctly\n                 cleanUrl.searchParams.set('selectedConversation', conversationToLoad);\n                 \n                 window.history.replaceState({}, '', cleanUrl.toString());\n                 debugLog('MBA24u45vn', 'Updated URL to preserve selectedConversation', {\n                   newUrl: cleanUrl.toString()\n                 });\n                 \n                 // Fetch messages for this conversation\n                 fetchMessages(conversationToLoad);\n                 \n                 return;\n               } else {\n                 debugLog('MBA24u45vn', 'Conversation from URL NOT found in conversations data', {\n                   conversationId: conversationToLoad,\n                   conversationsCount: conversationsData.length,\n                   availableIds: conversationsData.map(c => c.conversation_id)\n                 });\n                 \n                 // Clear invalid conversation parameters only if we have conversation data but conversation not found\n                 const cleanUrl = new URL(window.location.href);\n                 cleanUrl.searchParams.delete('selectedConversation');\n                 cleanUrl.searchParams.delete('conversationId');\n                 window.history.replaceState({}, '', cleanUrl.toString());\n                 debugLog('MBA24u45vn', 'Cleared invalid conversation parameters from URL');\n               }\n             } else {\n               debugLog('MBA24u45vn', 'No conversations data available yet, keeping URL parameters', {\n                 conversationId: conversationToLoad,\n                 conversationsData: conversationsData ? 'empty array' : 'null/undefined'\n               });\n               \n               // Don't clear URL parameters if we don't have conversation data yet\n               // Let the normal initialization proceed and handle this later\n               // Set the conversation ID anyway in case the data loads later\n               setSelectedConversation(conversationToLoad);\n               \n               // Set global variable for Navigation component\n               if (typeof window !== 'undefined') {\n                 window.selectedConversationId = conversationToLoad;\n               }\n               \n               // Clean up other URL parameters but keep selectedConversation\n               const cleanUrl = new URL(window.location.href);\n               const paramsToKeep = ['selectedConversation'];\n               const paramsToRemove = [...cleanUrl.searchParams.keys()].filter(key => !paramsToKeep.includes(key));\n               \n               paramsToRemove.forEach(key => {\n                 cleanUrl.searchParams.delete(key);\n               });\n               \n               window.history.replaceState({}, '', cleanUrl.toString());\n               debugLog('MBA24u45vn', 'Cleaned up other URL parameters but preserved selectedConversation');\n               \n               return;\n             }\n           } else {\n             // No valid conversation parameters, clean up URL\n             const cleanUrl = new URL(window.location.href);\n             const hasAnyParams = cleanUrl.searchParams.toString().length > 0;\n             \n             if (hasAnyParams) {\n               // Only clear params if we're not coming from another screen with valid params\n               const isNavigatingFromOtherScreen = urlConversationId || rawUrlConversationId;\n               \n               if (!isNavigatingFromOtherScreen) {\n                 [...cleanUrl.searchParams.keys()].forEach(key => {\n                   cleanUrl.searchParams.delete(key);\n                 });\n                 \n                 window.history.replaceState({}, '', cleanUrl.toString());\n                 debugLog('MBA24u45vn', 'Cleared all URL parameters - no valid conversation found');\n               }\n             }\n           }\n        }\n\n        // If we have route params on initial load, handle them here\n        if (route.params?.conversationId) {\n          isHandlingRouteParamsRef.current = true;\n          \n          // Check if we should open booking creation (coming from Connections)\n          if (route.params.isProfessional === true) {\n            shouldOpenBookingCreationRef.current = true;\n            debugLog('MBA9999: Will open booking creation after data loads');\n          }\n          \n          debugLog('MBA24u45vn: Fetching conversations from initializeData in route.params?.conversationId');\n          const conversationsData = await fetchConversations();\n          setSelectedConversation(route.params.conversationId);\n          \n          navigation.setParams({ \n            messageId: null, \n            conversationId: null,\n            otherUserName: null,\n            isProfessional: null,\n            clientId: null\n          });\n          return;\n        }\n\n        // If conversations are already loaded but we're not coming from route params,\n        // and this is not an initial load, refresh the conversations to get latest data\n        if (conversations.length > 0 && !initialLoadRef.current) {\n          debugLog('MBA24u45vn: Refreshing existing conversations on re-initialization');\n          const conversationsData = await fetchConversations();\n          \n          // Auto-select conversation on desktop if needed\n          if (Platform.OS === 'web' && screenWidth > 900 && conversationsData?.length > 0 && !selectedConversation) {\n            setSelectedConversation(conversationsData[0].conversation_id);\n            setSelectedConversationData(conversationsData[0]);\n          }\n          return;\n        }\n\n        // Normal initialization - fetch conversations once\n        debugLog('MBA24u45vn About to fetch conversations for normal initialization');\n        const conversationsData = await fetchConversations();\n        \n        // Filter conversations by role\n        const filteredByRole = conversationsData.filter(conv => {\n          if (userRole === 'professional') {\n            return conv.is_professional === true;\n          } else if (userRole === 'petOwner') {\n            return conv.is_professional === false;\n          }\n          return true;\n        });\n        \n        if (Platform.OS === 'web' && screenWidth > 900 && filteredByRole.length > 0) {\n          // Sort conversations by last message time to find the most recent\n          const sortedConversations = [...filteredByRole].sort((a, b) => {\n            const timeA = a.last_message_time ? new Date(a.last_message_time).getTime() : 0;\n            const timeB = b.last_message_time ? new Date(b.last_message_time).getTime() : 0;\n            return timeB - timeA; // Sort descending (newest first)\n          });\n          \n          debugLog('MBA3456: Auto-selecting most recent conversation on initialization', {\n            conversation_id: sortedConversations[0].conversation_id,\n            role: userRole\n          });\n          \n          setSelectedConversation(sortedConversations[0].conversation_id);\n          setSelectedConversationData(sortedConversations[0]);\n        }\n      } catch (error) {\n        console.error('Error in initialization:', error);\n        // Reset initialization flag on error so it can be retried\n        initialLoadRef.current = true;\n      } finally {\n        setIsInitialLoad(false);\n        isHandlingRouteParamsRef.current = false;\n        // Reset initialization in progress flag\n        isInitializingRef.current = false;\n      }\n    };\n\n    initializeData();\n\n    return () => {\n      debugLog('MBA9999: Component unmounting - cleaning up');\n      \n      // Reset everything for future component mount\n      setConversations([]);\n      setMessages([]);\n      setSelectedConversation(null);\n      setSelectedConversationData(null);\n      initialLoadRef.current = true;\n      setIsInitialLoad(true);\n      isHandlingRouteParamsRef.current = false;\n      hasLoadedMessagesRef.current = false;\n      shouldOpenBookingCreationRef.current = false;\n      lastViewedConversationRef.current = null;\n      \n      // Clear fetch tracking refs\n      isFetchingConversationsRef.current = false;\n      isFetchingMessagesRef.current.clear();\n      \n      // Clear the global selected conversation tracking and URL params\n      if (typeof window !== 'undefined') {\n        window.selectedConversationId = null;\n        \n        // Clear URL params\n        const currentUrl = new URL(window.location.href);\n        if (currentUrl.searchParams.has('selectedConversation') || currentUrl.searchParams.has('conversationId')) {\n          currentUrl.searchParams.delete('selectedConversation');\n          currentUrl.searchParams.delete('conversationId');\n          window.history.replaceState({}, '', currentUrl.toString());\n          debugLog('MBA4477: Cleared URL params on component unmount');\n        }\n      }\n      \n      // Clear navigation params\n      if (navigation && navigation.setParams) {\n        navigation.setParams({ selectedConversation: undefined });\n        debugLog('MBA4477: Cleared navigation params on component unmount');\n      }\n    };\n  }, [isSignedIn, loading, userRole, screenWidth]); // Added userRole, screenWidth to dependencies\n  \n  // Effect to trigger booking creation once conversation data is loaded\n  useEffect(() => {\n    // Only run if we should open booking creation, have conversation data, and messages are loaded\n    if (shouldOpenBookingCreationRef.current && selectedConversationData && hasLoadedMessagesRef.current && isSignedIn) {\n      if (is_DEBUG) {\n        console.log('MBA98765 Conversation data and messages loaded, triggering booking creation', {\n          conversationId: selectedConversationData.conversation_id,\n          isProfessional: selectedConversationData.is_professional,\n          hasDraft: hasDraft,\n          draftData: draftData ? 'exists' : 'none'\n        });\n      }\n      \n      // Reset the flag to prevent re-triggering\n      shouldOpenBookingCreationRef.current = false;\n      \n      // Add a small delay to ensure everything is properly loaded\n      setTimeout(() => {\n        handleCreateBooking();\n      }, 300);\n    }\n  }, [selectedConversationData, hasLoadedMessagesRef.current, hasDraft, draftData, isSignedIn]);\n\n  // Ref to track the last time we fetched conversations\n  const lastConversationFetchTimeRef = useRef(0);\n  \n  // Ref to track if a resize event triggered this selection change\n  const isResizeTriggeredSelectionRef = useRef(false);\n  \n  // Effect to update selected conversation data when conversations are loaded\n  useEffect(() => {\n    if (!selectedConversation || !isSignedIn) {\n      debugLog('MBA98765 Skipping conversation data update - no conversation or not signed in');\n      return;\n    }\n\n    // If this is a resize-triggered selection change, don't trigger another fetch\n    if (isResizeTriggeredSelectionRef.current) {\n      debugLog('MBA24u45vn: Skipping fetch for resize-triggered selection change', {\n        conversationId: selectedConversation\n      });\n      isResizeTriggeredSelectionRef.current = false;\n    }\n\n    const conversation = conversations.find(c => c.conversation_id === selectedConversation);\n    if (conversation) {\n      debugLog('MBA98765 Updating selected conversation data:', {\n        conversation_id: conversation.conversation_id,\n        is_professional: conversation.is_professional,\n        other_user_name: conversation.other_user_name\n      });\n      setSelectedConversationData(conversation);\n    } else {\n      debugLog('MBA98765 Selected conversation not found in conversations list');\n      \n      // Throttle fetch operations on conversation change\n      const now = Date.now();\n      const minTimeBetweenFetches = 1000; // 1 second minimum between fetches\n      \n      if (now - lastConversationFetchTimeRef.current < minTimeBetweenFetches) {\n        debugLog('MBA24u45vn: Throttled conversation fetch - too frequent', {\n          timeSinceLastFetch: now - lastConversationFetchTimeRef.current,\n          conversationId: selectedConversation\n        });\n        return;\n      }\n      \n      // Update the last fetch time\n      lastConversationFetchTimeRef.current = now;\n      \n      // If we have a selected conversation but it's not in the list,\n      // we should fetch conversations again\n      debugLog('MBA24u45vn: Fetching conversations from useEffect in selectedConversation');\n      fetchConversations();\n    }\n  }, [selectedConversation, conversations, isSignedIn]);\n\n  // Effect to fetch messages when conversation is selected\n  useEffect(() => {\n    if (!selectedConversation || !isSignedIn) {\n      debugLog('MBA98765 Skipping message fetch - no conversation selected or not signed in');\n      return;\n    }\n\n    // Only fetch if we haven't loaded messages for this conversation yet\n    if (!hasLoadedMessagesRef.current || lastViewedConversationRef.current !== selectedConversation) {\n      debugLog('MBA98765 Fetching messages for conversation:', selectedConversation);\n      fetchMessages(selectedConversation, 1);\n      hasLoadedMessagesRef.current = true;\n      lastViewedConversationRef.current = selectedConversation;\n    }\n  }, [selectedConversation, isSignedIn]);\n\n  // Modify existing screen width effect to be safer\n  useEffect(() => {\n    if (!isSignedIn) return; // Don't do anything if not signed in\n    \n    // Only track width changes for actual threshold crossings\n    const prevWidth = prevScreenWidthRef.current;\n    const hasWidthCrossedThreshold = \n      (prevWidth <= 900 && screenWidth > 900) || \n      (prevWidth > 900 && screenWidth <= 900);\n\n    // Skip the effect if we haven't crossed the threshold\n    if (!hasWidthCrossedThreshold) {\n      // Still update the reference for next check\n      prevScreenWidthRef.current = screenWidth;\n      return;\n    }\n\n    if (is_DEBUG) {\n      console.log('MBA98765 Screen width threshold crossed:', {\n        prev: prevWidth,\n        current: screenWidth,\n        crossedFrom: prevWidth <= 900 ? 'mobile' : 'desktop',\n        crossedTo: screenWidth <= 900 ? 'mobile' : 'desktop'\n      });\n    }\n\n    // Update reference\n    prevScreenWidthRef.current = screenWidth;\n\n    // Only auto-select a conversation when crossing from mobile to desktop\n    if (prevWidth <= 900 && screenWidth > 900 && conversations.length > 0 && !selectedConversation) {\n      if (is_DEBUG) {\n        console.log('MBA98765 Auto-selecting first conversation when crossing to desktop');\n      }\n      setSelectedConversation(conversations[0].conversation_id);\n    }\n  }, [screenWidth, isSignedIn]);\n\n  // Add a ref outside of any effect to track previous screen width\n  const prevFilterScreenWidthRef = useRef(getInitialWidth());\n  \n  // Add effect to filter conversations based on user role\n  useEffect(() => {\n    if (!conversations || conversations.length === 0) return;\n    \n    const isDesktopView = screenWidth > 900;\n    const wasPreviouslyDesktopView = prevFilterScreenWidthRef.current > 900;\n    \n    // Only log when there's an actual change to filter (not on every resize)\n    const shouldDetailLog = conversations.length < 20;  // Limit detailed logging for performance\n    \n    if (shouldDetailLog) {\n      debugLog('MBA3456: Filtering conversations by role', {\n        currentRole: userRole,\n        totalConversations: conversations.length,\n        screenWidth: screenWidth,\n        isDesktopView\n      });\n    }\n    \n    // Filter conversations based on the role from context\n    const filteredByRole = conversations.filter(conv => {\n      // For professional role, show only conversations where is_professional is true\n      if (userRole === 'professional') {\n        return conv.is_professional === true;\n      }\n      // For pet owner role, show only conversations where is_professional is false\n      else if (userRole === 'petOwner' || userRole === 'owner') {\n        return conv.is_professional === false;\n      }\n      // If no role specified, show all conversations (fallback)\n      return true;\n    });\n    \n    if (shouldDetailLog) {\n      debugLog('MBA3456: Filtered conversations result', {\n        originalCount: conversations.length,\n        filteredCount: filteredByRole.length,\n        currentRole: userRole\n      });\n    }\n    \n    // Update the filteredConversations state\n    setFilteredConversations(filteredByRole);\n    \n    // Only run auto-select logic when:\n    // 1. We're in desktop view\n    // 2. AND either we just crossed from mobile to desktop OR we need to select an initial conversation\n    const justCrossedToDesktop = isDesktopView && !wasPreviouslyDesktopView;\n    const needsInitialSelection = isDesktopView && !selectedConversation;\n    \n    if (Platform.OS === 'web' && (justCrossedToDesktop || needsInitialSelection)) {\n      // If we have filtered conversations, ensure one is selected\n      if (filteredByRole.length > 0) {\n        // Check if the currently selected conversation is in the filtered list\n        const isSelectedConversationInFiltered = selectedConversation && \n          filteredByRole.some(conv => conv.conversation_id === selectedConversation);\n        \n        if (!isSelectedConversationInFiltered) {\n          // Sort conversations by last message time to find the most recent\n          const sortedConversations = [...filteredByRole].sort((a, b) => {\n            const timeA = a.last_message_time ? new Date(a.last_message_time).getTime() : 0;\n            const timeB = b.last_message_time ? new Date(b.last_message_time).getTime() : 0;\n            return timeB - timeA; // Sort descending (newest first)\n          });\n          \n          // Select the most recent conversation\n          if (sortedConversations.length > 0) {\n            debugLog('MBA3456: Auto-selecting most recent conversation after role filter', {\n              conversation_id: sortedConversations[0].conversation_id,\n              justCrossedToDesktop,\n              needsInitialSelection\n            });\n            setSelectedConversation(sortedConversations[0].conversation_id);\n            setSelectedConversationData(sortedConversations[0]);\n          }\n        }\n      } else {\n        // No conversations for this role, clear selection\n        setSelectedConversation(null);\n        setSelectedConversationData(null);\n      }\n    }\n    \n    // Update the screenWidth reference for next comparison\n    prevFilterScreenWidthRef.current = screenWidth;\n    \n  }, [conversations, userRole, selectedConversation, screenWidth]);\n\n  // Update the existing useEffect for search query to work with the filtered conversations\n  useEffect(() => {\n    if (!conversations || conversations.length === 0) {\n      return;\n    }\n    \n    // First filter by role regardless of search query\n    const roleFiltered = conversations.filter(conv => {\n      if (userRole === 'professional') {\n        return conv.is_professional === true;\n      } else if (userRole === 'petOwner') {\n        return conv.is_professional === false;\n      }\n      return true; // fallback\n    });\n    \n    // Then apply search filter if needed\n    if (searchQuery.trim() === '') {\n      // No search query, just use the role-filtered list\n      setFilteredConversations(roleFiltered);\n    } else {\n      // Apply search filter on top of role filter\n      const lowercaseQuery = searchQuery.trim().toLowerCase();\n      const searchFiltered = roleFiltered.filter(conv => {\n        const matchesSearch = conv.other_user_name && \n          conv.other_user_name.toLowerCase().includes(lowercaseQuery);\n        return matchesSearch;\n      });\n      \n      setFilteredConversations(searchFiltered);\n      \n      debugLog('MBA3456: Search filtered conversations', {\n        roleFilteredCount: roleFiltered.length,\n        searchFilteredCount: searchFiltered.length,\n        searchQuery: searchQuery.trim()\n      });\n    }\n  }, [searchQuery, conversations, userRole]);\n\n  // Effect to validate preserved selectedConversation from URL once conversations are loaded\n  useEffect(() => {\n    // Only run this effect if:\n    // 1. We have conversations loaded\n    // 2. We have a selected conversation \n    // 3. We're signed in\n    // 4. We're on web platform\n    if (Platform.OS === 'web' && conversations.length > 0 && selectedConversation && isSignedIn) {\n      // Check if the current selectedConversation is actually in the loaded conversations\n      const conversationExists = conversations.find(c => c.conversation_id === selectedConversation);\n      \n      if (conversationExists) {\n        debugLog('MBA24u45vn', 'Validated preserved selectedConversation from URL', {\n          conversationId: selectedConversation,\n          conversationName: conversationExists.other_user_name,\n          isFound: true\n        });\n        \n        // Ensure the conversation data is set\n        if (!selectedConversationData) {\n          setSelectedConversationData(conversationExists);\n        }\n        \n        // Ensure messages are loaded for this conversation\n        if (!hasLoadedMessagesRef.current || lastViewedConversationRef.current !== selectedConversation) {\n          debugLog('MBA24u45vn', 'Loading messages for validated preserved conversation');\n          fetchMessages(selectedConversation, 1);\n          hasLoadedMessagesRef.current = true;\n          lastViewedConversationRef.current = selectedConversation;\n        }\n      } else {\n        debugLog('MBA24u45vn', 'Preserved selectedConversation not found in loaded conversations', {\n          conversationId: selectedConversation,\n          totalConversations: conversations.length,\n          availableIds: conversations.map(c => c.conversation_id)\n        });\n        \n        // Clear invalid conversation from URL and state\n        if (typeof window !== 'undefined') {\n          const currentUrl = new URL(window.location.href);\n          if (currentUrl.searchParams.has('selectedConversation')) {\n            currentUrl.searchParams.delete('selectedConversation');\n            window.history.replaceState({}, '', currentUrl.toString());\n            debugLog('MBA24u45vn', 'Cleared invalid selectedConversation from URL');\n          }\n          window.selectedConversationId = null;\n        }\n        \n        // Clear selected conversation state\n        setSelectedConversation(null);\n        setSelectedConversationData(null);\n      }\n    }\n  }, [conversations, selectedConversation, isSignedIn, selectedConversationData]);\n\n    // Fetch conversations \n  const fetchConversations = async () => {\n    // Get stack trace to see where this is being called from\n    const stackTrace = new Error().stack;\n    \n    // Get current state for debug logging\n    const currentRoute = navigation.getState()?.routes?.[navigation.getState()?.index];\n    const routeName = currentRoute?.name;\n    const screenParams = currentRoute?.params;\n    \n    debugLog('MBA24u45vn', 'fetchConversations called', {\n      stack: stackTrace.split('\\n')[2],\n      selectedConversation,\n      hasExistingConversations: conversations.length > 0,\n      routeName,\n      screenParams: JSON.stringify(screenParams),\n      routeParams: route.params ? JSON.stringify(route.params) : 'none',\n      timestamp: Date.now()\n    });\n\n    // Prevent duplicate fetches\n    if (isFetchingConversationsRef.current) {\n      debugLog('MBA24u45vn', 'Conversations fetch already in progress, skipping duplicate call', {\n        caller: stackTrace.split('\\n')[2],\n        currentlySelected: selectedConversation\n      });\n      return conversations; // Return existing conversations if available\n    }\n\n    try {\n      isFetchingConversationsRef.current = true;\n      setIsLoadingConversations(true);\n      debugLog('MBA24u45vn', 'Making API call to fetch conversations', {\n        userRole,\n        isSignedIn,\n        selectedConversation,\n        current_url: typeof window !== 'undefined' ? window.location.href : 'not-web',\n        caller: stackTrace.split('\\n')[2]\n      });\n      \n      const data = await getConversations();\n      \n      // Check if there's a new conversation from route params that we should look for\n      if (route.params?.conversationId) {\n        const newConversation = data.find(c => c.conversation_id === route.params.conversationId);\n        debugLog('MBA24u45vn', 'Checking for new conversation in API response', {\n          conversationId: route.params.conversationId,\n          found: !!newConversation,\n          total_conversations: data.length\n        });\n      }\n      \n      if (data && Array.isArray(data)) {\n        debugLog('MBA24u45vn', 'Conversations API response received', {\n          count: data.length,\n          userRole,\n          route_params: route.params ? JSON.stringify(route.params) : 'none',\n          current_url: typeof window !== 'undefined' ? window.location.href : 'not-web',\n          conversations: data.map(c => ({\n            conversation_id: c.conversation_id,\n            is_professional: c.is_professional,\n            other_user_name: c.other_user_name,\n            has_profile_pic: !!c.profile_picture\n          }))\n        });\n        \n        // Check if route params contains a conversation ID we should be selecting\n        if (route.params?.conversationId) {\n          const matchingConversation = data.find(c => c.conversation_id === route.params.conversationId);\n          \n          if (matchingConversation) {\n            debugLog('MBA24u45vn', 'Found conversation in API response matching route params', {\n              conversation_id: matchingConversation.conversation_id,\n              other_user_name: matchingConversation.other_user_name,\n              has_profile_pic: !!matchingConversation.profile_picture,\n              is_selected: selectedConversation === matchingConversation.conversation_id\n            });\n          } else {\n            debugLog('MBA24u45vn', 'Conversation from route params NOT found in API response', {\n              conversation_id: route.params.conversationId,\n              total_conversations: data.length\n            });\n          }\n        }\n        \n        // Store the full list of conversations\n        setConversations(data);\n        \n        // Filter conversations by user role immediately\n        const filteredByRole = data.filter(conv => {\n          if (userRole === 'professional') {\n            return conv.is_professional === true;\n          } else if (userRole === 'petOwner' || userRole === 'owner') {\n            return conv.is_professional === false;\n          }\n          return true; // fallback\n        });\n        \n        debugLog('MBA3456: Filtered conversations by role:', {\n          originalCount: data.length,\n          filteredCount: filteredByRole.length,\n          userRole,\n          filteredConversations: filteredByRole.map(c => ({\n            id: c.conversation_id,\n            is_professional: c.is_professional,\n            name: c.other_user_name\n          }))\n        });\n        \n                  // Update filtered conversations with role-filtered data\n        setFilteredConversations(filteredByRole);\n        \n        // If we have a selected conversation, make sure it's still valid for the current role\n        if (selectedConversation) {\n          const conversation = filteredByRole.find(c => c.conversation_id === selectedConversation);\n          if (conversation) {\n            // Conversation is valid for current role, update data\n            setSelectedConversationData(conversation);\n          } else {\n            // Conversation is not valid for current role, clear selection\n            setSelectedConversation(null);\n            setSelectedConversationData(null);\n            debugLog('MBA3456: Clearing selected conversation - not valid for current role', {\n              selectedConversation,\n              userRole\n            });\n          }\n        }\n        \n        // Return the data for chaining\n        return data;\n      } else {\n        debugLog('MBA3456: Invalid conversations data structure:', data);\n        return [];\n      }\n    } catch (error) {\n      debugLog('MBA3456: Error fetching conversations:', error);\n      return [];\n    } finally {\n      setIsLoadingConversations(false);\n      isFetchingConversationsRef.current = false;\n    }\n  };\n\n  // Fetch messages \n  const fetchMessages = async (conversationId, page = 1) => {\n    if (!conversationId) {\n      debugLog('MBA24u45vn', 'No conversation ID provided for message fetch');\n      return;\n    }\n    \n    debugLog('MBA24u45vn', 'fetchMessages called', {\n      conversationId,\n      page,\n      stack: new Error().stack.split('\\n')[2],\n      routeParams: route.params ? JSON.stringify(route.params) : 'none',\n      url: typeof window !== 'undefined' ? window.location.href : 'not-web',\n      selectedConversation,\n      hasConversationData: !!selectedConversationData,\n      timestamp: Date.now()\n    });\n\n    // First check if this conversation is valid for the current role\n    // Skip validation if we don't have any conversations yet - this could be a brand new conversation\n    if (conversations.length > 0) {\n      const isValidForRole = conversations.some(conv => {\n        const matchesId = conv.conversation_id === conversationId;\n        \n        let matchesRole = false;\n        if (userRole === 'professional') {\n          matchesRole = conv.is_professional === true;\n        } else if (userRole === 'petOwner' || userRole === 'owner') {\n          matchesRole = conv.is_professional === false;\n        }\n        \n        debugLog('MBA3456: Validating conversation for role', {\n          conversationId,\n          userRole,\n          conversation_is_professional: conv.is_professional,\n          matchesId,\n          matchesRole,\n          valid: matchesId && matchesRole\n        });\n        \n        return matchesId && matchesRole;\n      });\n      \n      if (!isValidForRole) {\n        debugLog('MBA3456: Attempted to fetch messages for conversation not valid for current role', {\n          conversationId,\n          userRole,\n          // This might be a new conversation, so we'll check if it's in route params\n          fromRouteParams: route.params?.conversationId === conversationId,\n          allConversations: conversations.map(c => ({\n            id: c.conversation_id,\n            is_professional: c.is_professional\n          }))\n        });\n        \n        // If this is coming from route params, it might be a new conversation\n        // We'll try to fetch messages anyway\n        if (route.params?.conversationId === conversationId) {\n          debugLog('MBA3456: Conversation from route params, attempting to fetch messages anyway');\n        } else {\n          // Clear messages and selection for invalid conversations\n          setMessages([]);\n          setSelectedConversation(null);\n          setSelectedConversationData(null);\n          return;\n        }\n      }\n    } else {\n      debugLog('MBA3456: No conversations in state yet, skipping role validation');\n    }\n\n    // Create a unique key for this fetch operation\n    const fetchKey = `${conversationId}-${page}`;\n    \n    // Prevent duplicate fetches for the same conversation and page\n    if (isFetchingMessagesRef.current.has(fetchKey)) {\n      debugLog('MBA98765 Messages fetch already in progress for conversation:', conversationId, 'page:', page, '- skipping duplicate call');\n      return;\n    }\n\n    try {\n      isFetchingMessagesRef.current.add(fetchKey);\n      debugLog('MBA98765 Fetching messages for conversation:', conversationId, 'page:', page);\n      \n      // Only clear messages for the first page (initial load)\n      // For pagination, we'll append the new messages\n      if (page === 1) {\n        setMessages([]);\n        setHasDraft(false);\n        setDraftData(null);\n        processedPagesRef.current.clear();\n        messageIdsRef.current.clear();\n        // Reset pagination state\n        setCurrentPage(1);\n        // Don't set hasMore to true here - wait for API response\n      }\n\n      // Set loading state\n      if (page > 1) {\n        setIsLoadingMore(true);\n        isLoadingMoreRef.current = true;\n      } else {\n        setIsLoadingMessages(true);\n      }\n\n      const data = await getConversationMessages(conversationId, page);\n      \n      // Check for auth issues in response\n      if (!data) {\n        debugLog('MBA1111 fetchMessages: No data returned, possible auth issue');\n        return;\n      }\n\n      if (data && Array.isArray(data.messages)) {\n        const newMessages = data.messages;\n        debugLog('MBA24u45vn', 'Messages API response received', {\n          conversationId,\n          page,\n          count: newMessages.length,\n          has_more: !!data.has_more,\n          has_draft: !!data.has_draft,\n          isPagination: page > 1,\n          url: typeof window !== 'undefined' ? window.location.href : 'not-web',\n          timestamp: Date.now()\n        });\n\n        // Check for draft data in the response\n        if (data.has_draft) {\n          setHasDraft(true);\n          setDraftData(data.draft_data);\n          debugLog('MBA98765 Draft data found:', data.draft_data);\n        }\n\n        // For first page, just set the messages\n        // For pagination, append to existing messages\n        if (page === 1) {\n          setMessages(newMessages);\n        } else {\n          setMessages(prevMessages => {\n            // Track existing message IDs to avoid duplicates\n            const existingIds = new Set(prevMessages.map(m => m.message_id));\n            \n            // Filter out duplicates from new messages\n            const uniqueNewMessages = newMessages.filter(\n              msg => !existingIds.has(msg.message_id)\n            );\n            \n            // Create combined array with all unique messages\n            const combinedMessages = [...prevMessages, ...uniqueNewMessages];\n            \n            debugLog('MBA98765 Combined messages for pagination:', {\n              previous: prevMessages.length,\n              newUnique: uniqueNewMessages.length,\n              combined: combinedMessages.length\n            });\n            \n            return combinedMessages;\n          });\n        }\n\n        // Update pagination state\n        setHasMore(!!data.has_more);\n        setCurrentPage(page);\n        processedPagesRef.current.add(page);\n\n        // Track message IDs to avoid duplicates\n        newMessages.forEach(msg => {\n          if (msg.message_id) {\n            messageIdsRef.current.add(msg.message_id);\n          }\n        });\n\n        debugLog('MBA98765 Message fetch completed for conversation:', conversationId);\n      } else {\n        debugLog('MBA98765 Invalid message data structure:', data);\n      }\n    } catch (error) {\n      console.error('Error fetching messages:', error);\n      debugLog('MBA98765 Error in fetchMessages:', error);\n    } finally {\n      // Reset loading states\n      setIsLoadingMore(false);\n      setIsLoadingMessages(false);\n      \n      // Add a small delay before resetting the loading ref to prevent immediate re-fetch\n      setTimeout(() => {\n        isLoadingMoreRef.current = false;\n      }, 500);\n      \n      isFetchingMessagesRef.current.delete(fetchKey);\n    }\n  };\n\n  // Function to send a message\n  const SendNormalMessage = async (messageContent, imageMessageIds = [], messageObject = null) => {\n    try {\n      debugLog('MBA2u3f89fbno4: [API] SendNormalMessage called', {\n        messageContentLength: messageContent?.length,\n        messageContentPreview: messageContent?.substring(0, 50),\n        selectedConversation,\n        hasSelectedConversation: !!selectedConversation,\n        selectedConversationType: typeof selectedConversation,\n        hasImageMessageIds: imageMessageIds && imageMessageIds.length > 0,\n        imageMessageIds,\n        imageCount: imageMessageIds?.length || 0,\n        hasMessageObject: !!messageObject,\n        isImageMessage: messageObject?.type_of_message === 'image_message',\n        currentMessageCount: messages.length,\n        timestamp: Date.now()\n      });\n\n      if (!selectedConversation) {\n        throw new Error('No conversation selected');\n      }\n\n      // If we have a pre-created message object from an image upload, use it directly\n      if (messageObject) {\n        debugLog('MBA5511: Using pre-created message object:', {\n          messageId: messageObject.message_id,\n          type: messageObject.type_of_message,\n          hasImageUrls: !!messageObject.image_urls && messageObject.image_urls.length > 0,\n          imageCount: messageObject.image_urls?.length || 0\n        });\n        \n        // Add new message to the beginning of the list since FlatList is inverted\n        setMessages(prevMessages => {\n          debugLog('MBA5511: Adding message object directly to list', {\n            beforeLength: prevMessages.length,\n            afterLength: prevMessages.length + 1,\n            newMessageId: messageObject.message_id\n          });\n          \n          return [messageObject, ...prevMessages];\n        });\n        \n        // Update conversation's last message\n        setConversations(prev => prev.map(conv => \n          conv.conversation_id === selectedConversation \n            ? {\n                ...conv,\n                last_message: messageObject.content || 'Image message',\n                last_message_time: messageObject.timestamp\n              }\n            : conv\n        ));\n        \n        return messageObject;\n      }\n\n      // Normal message flow (text only or with separate image IDs)\n      // Allow empty content if we have images\n      if ((!imageMessageIds || imageMessageIds.length === 0) && (!messageContent || !messageContent.trim())) {\n        throw new Error('Message content is empty and no images provided');\n      }\n      \n      // Log that we're sending either text or images or both\n      debugLog('MBA2u3f89fbno4: [API] Sending message with content and/or images', {\n        hasContent: !!messageContent && messageContent.trim().length > 0,\n        hasImages: imageMessageIds && imageMessageIds.length > 0,\n        imageCount: imageMessageIds?.length || 0\n      });\n      \n      const token = await getStorage('userToken');\n      \n      const requestData = {\n        conversation_id: selectedConversation,\n        content: messageContent ? messageContent.trim() : ''\n      };\n      \n      // Add the image message IDs if available\n      if (imageMessageIds && imageMessageIds.length > 0) {\n        requestData.image_message_ids = imageMessageIds;\n      }\n      \n      debugLog('MBA2u3f89fbno4: [API] About to send API request', {\n        requestData,\n        apiUrl: `${API_BASE_URL}/api/messages/v1/send_norm_message/`,\n        hasToken: !!token,\n        timestamp: Date.now()\n      });\n      \n      const response = await axios.post(`${API_BASE_URL}/api/messages/v1/send_norm_message/`, requestData, {\n        headers: { \n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      });\n\n      debugLog('MBA2u3f89fbno4: [API] Message sent successfully', {\n        messageId: response.data.message_id,\n        timestamp: response.data.timestamp,\n        responseStatus: response.status,\n        responseData: response.data\n      });\n\n      // Add new message to the beginning of the list since FlatList is inverted\n      setMessages(prevMessages => {\n        debugLog('MBA2u3f89fbno4: [API] Adding sent message to list', {\n          beforeLength: prevMessages.length,\n          afterLength: prevMessages.length + 1,\n          newMessageId: response.data.message_id\n        });\n        \n        return [response.data, ...prevMessages];\n      });\n\n      // Update conversation's last message\n      setConversations(prev => prev.map(conv => \n        conv.conversation_id === selectedConversation \n          ? {\n              ...conv,\n              last_message: messageContent,\n              last_message_time: response.data.timestamp\n            }\n          : conv\n      ));\n\n      debugLog('MBA2u3f89fbno4: [API] SendNormalMessage completed successfully');\n      return response.data;\n    } catch (error) {\n      debugLog('MBA2u3f89fbno4: [API] Error in SendNormalMessage', {\n        errorMessage: error.message,\n        errorResponse: error.response?.data,\n        errorStatus: error.response?.status,\n        requestedConversationId: selectedConversation,\n        requestedMessageContent: messageContent?.substring(0, 50),\n        timestamp: Date.now()\n      });\n      \n      console.error('Error sending message:', error);\n      throw error;\n    }\n  };\n\n  // Update the handleCreateBooking function\n  const handleCreateBooking = async () => {\n    if (is_DEBUG) {\n      console.log('MBA98765 handleCreateBooking:', {\n        selectedConversationData,\n        selectedConversation,\n        isProfessional: selectedConversationData?.is_professional,\n        hasDraft,\n        draftData\n      });\n    }\n    \n    if (!selectedConversationData) {\n      debugLog('MBA24u45vn: No conversation data found, Fetching conversations from handleCreateBooking');\n      await fetchConversations();\n      const updatedConversation = conversations.find(conv => conv.conversation_id === selectedConversation);\n      if (!updatedConversation) {\n        console.log('MBA98765 Still no conversation data after refresh');\n        return;\n      }\n      setSelectedConversationData(updatedConversation);\n      debugLog('MBA24u45vn: Conversation data found in handleCreateBooking', {\n        updatedConversation\n      });\n    }\n\n    // Check if current user is the professional by checking their role in the conversation\n    const isProfessional = selectedConversationData.is_professional === true;\n    \n    if (is_DEBUG) {\n      console.log('MBA98765 Is Professional?', isProfessional);\n    }\n\n    setShowDropdown(false); // Close dropdown first to prevent any UI issues\n\n    if (isProfessional) {\n      if (is_DEBUG) {\n        console.log('MBA98765 User is professional - checking for existing draft', { hasDraft, draftData });\n      }\n\n      if (hasDraft && draftData) {\n        // Show the draft confirmation modal\n        setShowDraftConfirmModal(true);\n      } else {\n        // No existing draft, create new one\n        await createNewDraft();\n      }\n    } else {\n      console.log('MBA98765 User is owner - showing request modal');\n      setShowRequestModal(true);\n    }\n  };\n\n  // Helper function to create a new draft\n  const createNewDraft = async () => {\n    try {\n      const token = await getStorage('userToken');\n      const response = await axios.post(\n        `${API_BASE_URL}/api/bookings/v1/create/`,\n        {\n          conversation_id: selectedConversation\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        }\n      );\n\n      if (is_DEBUG) {\n        console.log('MBA98765 Create draft response:', response.data);\n      }\n\n      // Refresh messages to update draft status\n      await fetchMessages(selectedConversation, 1);\n\n      // Open BookingStepModal with new draft\n      if (response.data.draft_id) {\n        setCurrentBookingId(response.data.draft_id);\n        setTimeout(() => {\n          setShowBookingStepModal(true);\n        }, 100);\n      }\n    } catch (error) {\n      console.error('Error creating draft:', error);\n      Alert.alert('Error', 'Unable to create draft. Please try again.');\n    }\n  };\n\n  // Add the handleContinueExisting function\n  const handleContinueExisting = () => {\n    if (is_DEBUG) {\n      console.log('MBA98765 handleContinueExisting:', {\n        draftData,\n        showDraftConfirmModal,\n        showBookingStepModal\n      });\n    }\n\n    setShowDraftConfirmModal(false);\n    \n    // Use draft_id instead of booking_id\n    if (draftData?.draft_id) {\n      setCurrentBookingId(draftData.draft_id);\n      // Add a small delay to ensure modal state is updated\n      setTimeout(() => {\n        if (is_DEBUG) {\n          console.log('MBA98765 Opening BookingStepModal with draft:', draftData.draft_id);\n        }\n        setShowBookingStepModal(true);\n      }, 100);\n    } else {\n      console.error('MBA98765 No draft_id found in draftData:', draftData);\n    }\n  };\n\n  // Add the handleCreateNew function\n  const handleCreateNew = async () => {\n    setShowDraftConfirmModal(false);\n    await createNewDraft();\n  };\n\n  // Update loadMoreMessages to check current state before loading\n  const loadMoreMessages = useCallback(() => {\n    debugLog('MBA2349f87g9qbh2nfv9cg: loadMoreMessages called', {\n      hasMore,\n      isLoadingMore,\n      isLoadingMoreRef: isLoadingMoreRef.current,\n      currentPage,\n      selectedConversation,\n      messagesLength: messages.length\n    });\n    \n    // Add a safety check to ensure we have a conversation selected\n    if (!selectedConversation) {\n      debugLog('MBA2349f87g9qbh2nfv9cg: No conversation selected, cannot load more messages');\n      return;\n    }\n    \n    // More reliable condition checking with better logging\n    const isAlreadyLoading = isLoadingMoreRef.current || isLoadingMore;\n    const nextPageAlreadyProcessed = processedPagesRef.current.has(currentPage + 1);\n    \n    // Only load more messages if:\n    // 1. There are more messages to load\n    // 2. We're not already loading (both state and ref)\n    // 3. We have a selected conversation\n    // 4. The next page hasn't already been processed\n    if (hasMore && \n        !isAlreadyLoading && \n        !nextPageAlreadyProcessed) {\n      \n      debugLog(`MBA2349f87g9qbh2nfv9cg: Starting pagination load for page ${currentPage + 1}`, {\n        hasMore,\n        isAlreadyLoading,\n        nextPageAlreadyProcessed,\n        currentPage\n      });\n      \n      // Set loading state before fetch to prevent multiple triggers\n      isLoadingMoreRef.current = true;\n      setIsLoadingMore(true);\n      \n      // Fetch the next page of messages\n      fetchMessages(selectedConversation, currentPage + 1);\n      \n      // Extra protection against rapid pagination requests\n      // This acts as a backup to prevent request spam\n      setTimeout(() => {\n        // Reset loading flags if they're still set after 5 seconds\n        // This helps recover from cases where the loadingMore state gets stuck\n        if (isLoadingMoreRef.current) {\n          debugLog('MBA2349f87g9qbh2nfv9cg: Resetting stuck loading state after timeout');\n          isLoadingMoreRef.current = false;\n          setIsLoadingMore(false);\n        }\n      }, 5000);\n      \n      return true;\n    } else {\n      debugLog('MBA2349f87g9qbh2nfv9cg: Not loading more messages - conditions not met', {\n        hasMore,\n        isLoadingMoreRefCurrent: isLoadingMoreRef.current,\n        isLoadingMore,\n        selectedConversation: !!selectedConversation,\n        nextPageProcessed: nextPageAlreadyProcessed,\n        reasonText: !hasMore ? 'no more messages' : \n                   isAlreadyLoading ? 'already loading messages' :\n                   nextPageAlreadyProcessed ? 'page already processed' : 'unknown'\n      });\n      return false;\n    }\n  }, [hasMore, currentPage, selectedConversation, messages.length, isLoadingMore]);\n\n  const renderMessage = useCallback(({ item, index }) => {\n    // Create a map to keep track of which bookings have change requests and latest message timestamps\n    const bookingMessages = groupMessagesByBookingId(messages);\n    \n    // Track bookings that have been confirmed\n    const confirmedBookingIds = messages\n      .filter(m => m.type_of_message === 'booking_confirmed')\n      .map(m => m.metadata?.booking_id)\n      .filter(Boolean);\n      \n    // Track bookings that have been completed\n    const completedBookingIds = messages\n      .filter(m => \n        (m.type_of_message === 'booking_confirmed' && m.metadata?.is_review_request) ||\n        (m.type_of_message === 'request_review')\n      )\n      .map(m => m.metadata?.booking_id)\n      .filter(Boolean);\n      \n    // Check if the current message's booking has been completed\n    const isBookingCompleted = item.metadata?.booking_id && \n      completedBookingIds.includes(item.metadata.booking_id);\n      \n    // Handle review request messages - check for both request_review and booking_confirmed with review metadata\n    if (item.type_of_message === 'request_review' || \n        (item.type_of_message === 'booking_confirmed' && \n         (item.metadata?.is_review_request || item.metadata?.client_review || item.metadata?.professional_review))) {\n      debugLog('MBA8675309: Rendering review request message:', {\n        messageId: item.message_id,\n        content: item.content,\n        metadata: item.metadata,\n        bookingId: item.metadata?.booking_id,\n        isProfessional: selectedConversationData?.is_professional,\n        sender: item.sender\n      });\n      \n      // For review request messages, we don't show a timestamp since it spans the full width\n      return (\n        <View style={styles.fullWidthMessage}>\n          <ReviewRequestCard\n            data={{\n              ...item.metadata,\n              booking_id: item.metadata?.booking_id,\n              service_type: item.metadata?.service_type,\n            }}\n            isProfessional={selectedConversationData?.is_professional}\n            onPress={(action) => {\n              // Only handle the leave review action since view details now opens the modal directly\n              if (action === 'leaveReview') {\n                // Handle review action\n                Alert.alert('Review', 'Review functionality will be implemented soon');\n              }\n            }}\n          />\n        </View>\n      );\n    }\n    \n    // Get previous message (newer in the timeline since the list is inverted)\n    const prevMessage = index < messages.length - 1 ? messages[index + 1] : null;\n    \n    // Check if we should show timestamp for this message\n    const showTimestamp = shouldShowTimestamp(item, prevMessage, index === 0);\n    \n    // Format the message time if we have a timestamp\n    const formattedTime = item.timestamp ? \n      formatMessageTime(item.timestamp, timeSettings?.timezone || 'America/Denver') : '';\n      \n    // Add extra debug logging for booking-related messages\n    if (item.type_of_message === 'send_approved_message' || \n        item.type_of_message === 'request_changes' || \n        item.type_of_message === 'initial_booking_request' ||\n        item.type_of_message === 'booking_confirmed') {\n      debugLog('MBA6677: Booking message timestamp details', {\n        messageId: item.message_id,\n        messageType: item.type_of_message,\n        timestamp: item.timestamp,\n        formattedTime,\n        timezone: timeSettings?.timezone || 'America/Denver'\n      });\n    }\n      \n    // Check if the message has images in various formats\n    const hasImages = item.image_urls && item.image_urls.length > 0;\n    // For backwards compatibility with older messages that might have a single image_url\n    const hasLegacyImage = !hasImages && item.image_url && item.image_url.length > 0;\n    // Check if this is an image_message type message\n    const isImageMessage = item.type_of_message === 'image_message';\n    // If it's an image message but we don't have any detected images yet, force hasLegacyImage to true\n    // This is needed for single image messages without a separate image_urls array\n    const forceHasImage = isImageMessage && !hasImages && !hasLegacyImage && item.image_url;\n    \n    // Find approval requests for already confirmed bookings\n    const bookingsWithUpdates = {};\n    \n    // For each confirmed booking, check if there are newer approval requests\n    confirmedBookingIds.forEach(bookingId => {\n      const messagesForBooking = messages.filter(m => \n        m.metadata?.booking_id === bookingId\n      ).sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));\n      \n      // Find the confirmation message for this booking\n      const confirmationMessage = messagesForBooking.find(m => \n        m.type_of_message === 'booking_confirmed'\n      );\n      \n      // Find any newer approval request messages for this booking\n      if (confirmationMessage) {\n        const confirmationTime = new Date(confirmationMessage.timestamp);\n        const newerApprovalRequests = messagesForBooking.filter(m => \n          m.type_of_message === 'send_approved_message' && \n          new Date(m.timestamp) > confirmationTime\n        );\n        \n        // If we found newer approval requests, mark this booking as having updates\n        if (newerApprovalRequests.length > 0) {\n          bookingsWithUpdates[bookingId] = true;\n          debugLog('MBA6428: Detected booking update for confirmed booking:', {\n            bookingId,\n            confirmationTime,\n            newerApprovalRequests: newerApprovalRequests.map(m => m.message_id)\n          });\n        }\n      }\n    });\n    \n    const hasChangeRequest = item.metadata?.booking_id && \n      messages.some(m => \n        m.type_of_message === 'request_changes' && \n        m.metadata?.booking_id === item.metadata.booking_id\n      );\n    \n    // Determine if booking is confirmed\n    const bookingIsConfirmed = item.metadata?.booking_id && \n      confirmedBookingIds.includes(item.metadata.booking_id);\n      \n    // Check if this confirmed booking has newer approval requests\n    const hasNewerApprovalRequests = item.metadata?.booking_id && \n      bookingsWithUpdates[item.metadata.booking_id];\n    \n    // Determine if this is the newest message for this booking\n    let isNewestMessage = false;\n    let messageCreatedAt = new Date(item.created_at || item.timestamp);\n    \n    if (item.metadata?.booking_id && bookingMessages[item.metadata.booking_id]) {\n      const bookingMessagesList = bookingMessages[item.metadata.booking_id];\n      \n      // Check if this is the newest message for this booking\n      isNewestMessage = bookingMessagesList.length > 0 && \n        bookingMessagesList[0].messageId === item.message_id;\n      \n      debugLog(`MBA7321: Message ${item.message_id} for booking ${item.metadata.booking_id} isNewestMessage: ${isNewestMessage}`);\n    }\n\n    if (item.type_of_message === 'initial_booking_request' || item.type_of_message === 'send_approved_message') {\n      const isFromMe = !item.sent_by_other_user;\n\n      // Determine if this booking has an associated change request\n      const bookingId = item.metadata?.booking_id;\n      const hasAssociatedChangeRequest = bookingId && messages.some(m => \n        m.type_of_message === 'request_changes' && \n        m.metadata?.booking_id === bookingId\n      );\n\n      // Check if this is an approval request message\n      const isApprovalMessage = item.type_of_message === 'send_approved_message';\n      \n      // Get booking status from metadata\n      const bookingStatus = bookingIsConfirmed ? \"Confirmed\" : item.metadata?.booking_status;\n      \n      // For approval requests: determine if this is for an already confirmed booking\n      // by checking if there's a booking_confirmed message with an earlier timestamp\n      const isUpdateToConfirmedBooking = isApprovalMessage && bookingIsConfirmed && bookingId && \n        messages.some(m => \n          m.type_of_message === 'booking_confirmed' && \n          m.metadata?.booking_id === bookingId &&\n          new Date(m.timestamp) < new Date(item.timestamp)\n        );\n      \n      // Check if there are newer request changes messages for this booking update\n      const hasNewerRequestChanges = isUpdateToConfirmedBooking && bookingId &&\n        messages.some(m =>\n          m.type_of_message === 'request_changes' &&\n          m.metadata?.booking_id === bookingId &&\n          new Date(m.timestamp) > new Date(item.timestamp)\n        );\n      \n      // Log info if this is an update to a confirmed booking\n      if (isUpdateToConfirmedBooking) {\n        debugLog('MBA6428: Detected approval request for already confirmed booking:', {\n          messageId: item.message_id,\n          bookingId,\n          isApprovalMessage,\n          bookingIsConfirmed,\n          isUpdateToConfirmedBooking,\n          hasNewerRequestChanges\n        });\n      }\n      \n      // Check if the pro should be able to edit the draft\n      const showEditDraft = selectedConversationData?.is_professional && \n        (item.type_of_message === 'initial_booking_request' || \n         (item.type_of_message === 'send_approved_message' && hasAssociatedChangeRequest));\n\n      // This is for logging purposes\n      if (showEditDraft) {\n        debugLog('MBA6428: Showing edit draft button for message:', {\n          messageId: item.message_id,\n          bookingId: bookingId,\n          type: item.type_of_message\n        });\n      }\n\n      // Get total owner cost\n      let totalOwnerCost = '0.00';\n      try {\n        if (item.metadata.cost_summary && item.metadata.cost_summary.total_client_cost) {\n          totalOwnerCost = item.metadata.cost_summary.total_client_cost;\n        }\n      } catch (error) {\n        console.error('Error parsing total cost:', error);\n      }\n\n      return (\n        <View>\n          <MessageTimestamp \n            message={item}\n            isFromMe={isFromMe}\n            styles={styles}\n            userTimezone={timeSettings?.timezone || 'America/Denver'}\n            show={showTimestamp}\n          />\n          <BookingMessageCard\n            type={item.type_of_message === 'initial_booking_request' ? 'request' : 'approval'}\n            displayType={isUpdateToConfirmedBooking ? 'booking_update' : undefined}\n            data={{\n              ...item.metadata,\n              booking_id: item.metadata.booking_id,\n              service_type: item.metadata.service_type,\n              total_owner_cost: totalOwnerCost,\n              occurrences: item.metadata.occurrences || []\n            }}\n            isFromMe={isFromMe}\n            onPress={() => {\n              // Navigate to booking details if we have a booking_id\n              if (item.metadata.booking_id) {\n                navigation.navigate('BookingDetails', { \n                  bookingId: item.metadata.booking_id,\n                  from: 'MessageHistory'\n                });\n              }\n            }}\n            isProfessional={selectedConversationData?.is_professional}\n            onApproveSuccess={(response) => {\n              // Update the messages list to reflect the approval\n              // You would typically update the booking status here\n              if (response && response.status) {\n                Alert.alert('Success', 'Booking approved successfully');\n                // Refresh messages to update the UI\n                debugLog(`MBA2349f87g9qbh2nfv9cg: Refreshing messages after approval success`);\n                fetchMessages(selectedConversation, 1);\n              }\n            }}\n            onApproveError={(error) => {\n              Alert.alert('Error', error || 'Failed to approve booking');\n            }}\n            onEditDraft={showEditDraft ? () => {\n              debugLog('MBA6428: Edit Draft button clicked, calling handleEditDraft with bookingId:', bookingId);\n              handleEditDraft(bookingId);\n            } : undefined}\n            bookingStatus={bookingStatus}\n            hasChangeRequest={hasAssociatedChangeRequest || hasNewerRequestChanges}\n            isNewestMessage={isNewestMessage}\n            messageCreatedAt={messageCreatedAt}\n            isAfterConfirmation={isUpdateToConfirmedBooking}\n            isBookingCompleted={isBookingCompleted}\n          />\n        </View>\n      );\n    }\n\n    if (item.type_of_message === 'request_changes') {\n      const isFromMe = !item.sent_by_other_user;\n      \n      // Get booking details from metadata\n      const bookingId = item.metadata?.booking_id;\n      const serviceType = item.metadata?.service_type;\n      const bookingStatus = bookingIsConfirmed ? \"Confirmed\" : item.metadata?.booking_status;\n      \n      // For a request_changes message, it should be considered the newest if:\n      // 1. It's the most recent message for this booking (already calculated)\n      // 2. OR there are no newer approval requests for this booking after this request_changes message\n      let isNewestChangeRequest = isNewestMessage;\n      \n      if (!isNewestChangeRequest && item.type_of_message === 'request_changes' && bookingId) {\n        // Check if there are any newer approval messages\n        const hasNewerApprovalMessages = messages.some(m => \n          m.type_of_message === 'send_approved_message' && \n          m.metadata?.booking_id === bookingId &&\n          new Date(m.timestamp) > new Date(item.timestamp)\n        );\n        \n        // If there are no newer approval messages, this can be treated as the newest message\n        isNewestChangeRequest = !hasNewerApprovalMessages;\n        \n        debugLog('MBA4321: Checking if request_changes is effectively newest:', {\n          messageId: item.message_id,\n          originalIsNewest: isNewestMessage,\n          hasNewerApprovals: hasNewerApprovalMessages,\n          effectivelyNewest: isNewestChangeRequest\n        });\n      }\n      \n      // Check if this change request is related to a booking update\n      // (i.e., an approval that came after a booking confirmation)\n      const isRelatedToUpdate = bookingIsConfirmed && bookingId &&\n        messages.some(m => \n          (m.type_of_message === 'send_approved_message' || m.type_of_message === 'booking_confirmed') &&\n          m.metadata?.booking_id === bookingId\n        );\n      \n      // Log for debugging\n      debugLog('MBA4321: Rendering change request message:', {\n        bookingId,\n        isFromMe,\n        content: item.content,\n        metadata: item.metadata,\n        isNewestMessage,\n        isNewestChangeRequest,\n        isConfirmed: bookingIsConfirmed,\n        isRelatedToUpdate,\n        hasOlderBookingConfirmedMessage: messages.some(m => \n          m.type_of_message === 'booking_confirmed' && \n          m.metadata?.booking_id === bookingId &&\n          new Date(m.timestamp) < new Date(item.timestamp)\n        ),\n        hasOlderApprovalMessage: messages.some(m => \n          m.type_of_message === 'send_approved_message' && \n          m.metadata?.booking_id === bookingId &&\n          new Date(m.timestamp) < new Date(item.timestamp)\n        )\n      });\n      \n      return (\n        <View>\n          <MessageTimestamp \n            message={item}\n            isFromMe={isFromMe}\n            styles={styles}\n            userTimezone={timeSettings?.timezone || 'America/Denver'}\n            show={showTimestamp}\n          />\n          <BookingMessageCard\n            type=\"request_changes\"\n            data={{\n              ...item.metadata,\n              booking_id: bookingId,\n              service_type: serviceType,\n              cost_summary: item.metadata?.cost_summary || {},\n              occurrences: item.metadata?.occurrences || [],\n              content: item.content // Include the message content for display\n            }}\n            isFromMe={isFromMe}\n            onPress={() => {\n              // Navigate to booking details if we have a booking_id\n              if (bookingId) {\n                navigation.navigate('BookingDetails', { \n                  bookingId: bookingId,\n                  from: 'MessageHistory'\n                });\n              }\n            }}\n            isProfessional={selectedConversationData?.is_professional}\n            onApproveSuccess={(response) => {\n              if (response && response.status) {\n                Alert.alert('Success', 'Changes handled successfully');\n                debugLog(`MBA2349f87g9qbh2nfv9cg: Refreshing messages after change approval`);\n                fetchMessages(selectedConversation, 1);\n              }\n            }}\n            onApproveError={(error) => {\n              Alert.alert('Error', error || 'Failed to process changes');\n            }}\n            onEditDraft={selectedConversationData?.is_professional ? () => {\n              handleEditDraft(bookingId);\n            } : undefined}\n            bookingStatus={bookingStatus}\n            hasChangeRequest={false} // Change requests don't have change requests themselves\n            isNewestMessage={isNewestChangeRequest} // Use enhanced newest message check\n            messageCreatedAt={messageCreatedAt}\n            isAfterConfirmation={isRelatedToUpdate} // Flag for change requests after an update\n            isBookingCompleted={isBookingCompleted}\n          />\n        </View>\n      );\n    }\n\n    // Handle booking confirmation messages\n    if (item.type_of_message === 'booking_confirmed') {\n      const isFromMe = !item.sent_by_other_user;\n      \n      // Get booking details from metadata\n      const bookingId = item.metadata?.booking_id;\n      const serviceType = item.metadata?.service_type;\n      \n      // Get cost info from metadata\n      let totalCost = '0.00';\n      let payout = '0.00';\n      try {\n        if (item.metadata.cost_summary) {\n          totalCost = item.metadata.cost_summary.total_client_cost || '0.00';\n          payout = item.metadata.cost_summary.total_sitter_payout || '0.00';\n        }\n      } catch (error) {\n        console.error('Error parsing cost data:', error);\n      }\n      \n      debugLog('MBA6428: Rendering booking confirmation message:', {\n        bookingId,\n        isFromMe,\n        metadata: item.metadata,\n        totalCost,\n        payout,\n        hasNewerApprovalRequests\n      });\n      \n      return (\n        <View>\n          <MessageTimestamp \n            message={item}\n            isFromMe={isFromMe}\n            styles={styles}\n            userTimezone={timeSettings?.timezone || 'America/Denver'}\n            show={showTimestamp}\n          />\n          <BookingMessageCard\n            type=\"booking_confirmed\"\n            data={{\n              booking_id: bookingId,\n              service_type: serviceType,\n              cost_summary: {\n                total_client_cost: totalCost,\n                total_sitter_payout: payout\n              }\n            }}\n            isFromMe={isFromMe}\n            onPress={() => {\n              // Navigate to booking details if we have a booking_id\n              if (bookingId) {\n                navigation.navigate('BookingDetails', { \n                  bookingId: bookingId,\n                  from: 'MessageHistory'\n                });\n              }\n            }}\n            isProfessional={selectedConversationData?.is_professional}\n            bookingStatus=\"Confirmed\"\n            isNewestMessage={isNewestMessage}\n            messageCreatedAt={messageCreatedAt}\n            onEditDraft={selectedConversationData?.is_professional ? () => {\n              debugLog('MBA6428: Edit Draft button clicked for confirmed booking with bookingId:', bookingId);\n              handleEditDraft(bookingId);\n            } : undefined}\n            hasNewerApprovalRequests={hasNewerApprovalRequests}\n            isBookingCompleted={isBookingCompleted}\n            onMarkCompletedSuccess={(response) => {\n              debugLog('MBA8675309: Booking marked as completed successfully:', response);\n              Alert.alert('Success', 'Booking marked as completed successfully');\n              // Refresh messages to update the UI\n              fetchMessages(selectedConversation, 1);\n            }}\n            onMarkCompletedError={(error) => {\n              debugLog('MBA8675309: Error marking booking as completed:', error);\n              Alert.alert('Error', error || 'Failed to mark booking as completed');\n            }}\n          />\n        </View>\n      );\n    }\n\n    // Check if this is an attachment message (temporary image container)\n    const isAttachmentMessage = item.metadata && item.metadata.is_attachment === true;\n    \n    // Skip rendering attachment messages - they should not be displayed directly\n    // They're only containers for images that get referenced in actual image messages\n    if (isAttachmentMessage) {\n      debugLog('MBA9999: Skipping attachment message (container only):', {\n        messageId: item.message_id,\n        hasImageUrl: !!item.image_url,\n        imageUrl: item.image_url,\n        type: item.type_of_message\n      });\n      return null;\n    }\n    \n    // Handle image messages or normal messages with images\n    if (isImageMessage || hasImages || hasLegacyImage || forceHasImage) {\n      const isFromMe = !item.sent_by_other_user;\n      \n      // For images, first render the caption (if exists) and then the images\n      debugLog('MBA4567: Rendering message with images and possibly caption:', {\n        messageId: item.message_id,\n        hasCaption: item.content && item.content.trim().length > 0,\n        captionText: item.content,\n        isFromMe\n      });\n      return (\n        <View>\n          <MessageTimestamp \n            message={item}\n            isFromMe={isFromMe}\n            styles={styles}\n            userTimezone={timeSettings?.timezone || 'America/Denver'}\n            show={showTimestamp}\n          />\n          \n          {/* Image Container */}\n          <View style={isFromMe ? styles.sentMessageContainer : styles.receivedMessageContainer}>\n            <View style={[\n              styles.messageCard, \n              // Don't use colored background for image messages\n              { backgroundColor: 'transparent', shadowColor: 'transparent' }\n            ]}>\n              <View style={styles.messageContent}>\n                {/* Handle images from image_urls in the message itself */}\n                {hasImages && (\n                  <View style={{\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    // marginVertical: 8,\n                    width: '100%',\n                  }}>\n                    {item.image_urls.map((imageUrl, index) => (\n                      <ClickableImage\n                        key={`${imageUrl}-${index}`}\n                        imageUrl={imageUrl}\n                        onPress={handleImagePress}\n                        style={{\n                          image: {\n                            width: 250,\n                            height: 250,\n                            borderRadius: 8,\n                            // marginVertical: 4,\n                          }\n                        }}\n                      />\n                    ))}\n                  </View>\n                )}\n                \n                {/* Handle images from metadata.image_urls */}\n                {!hasImages && item.metadata && item.metadata.image_urls && item.metadata.image_urls.length > 0 && (\n                  <View style={{\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    marginVertical: 8,\n                    width: '100%',\n                  }}>\n                    {item.metadata.image_urls.map((imageUrl, index) => (\n                      <ClickableImage\n                        key={`${imageUrl}-${index}`}\n                        imageUrl={imageUrl}\n                        onPress={handleImagePress}\n                        style={{\n                          image: {\n                            width: 250,\n                            height: 250,\n                            borderRadius: 8,\n                            marginVertical: 4,\n                          }\n                        }}\n                      />\n                    ))}\n                  </View>\n                )}\n                \n                {/* Handle single image directly attached to the message */}\n                {item.image && item.image.url && (\n                  <View style={{\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    marginVertical: 8,\n                    width: '100%',\n                  }}>\n                    <ClickableImage\n                      imageUrl={item.image.url}\n                      onPress={handleImagePress}\n                      style={{\n                        image: {\n                          width: 250,\n                          height: 250,\n                          borderRadius: 8,\n                          marginVertical: 4,\n                        }\n                      }}\n                    />\n                  </View>\n                )}\n                \n                {/* Handle legacy single image for backward compatibility */}\n                {(hasLegacyImage || forceHasImage) && (\n                  <View style={{\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    marginVertical: 8,\n                    width: '100%',\n                  }}>\n                    <ClickableImage\n                      imageUrl={item.image_url}\n                      onPress={handleImagePress}\n                      style={{\n                        image: {\n                          width: 250,\n                          height: 250,\n                          borderRadius: 8,\n                          marginVertical: 4,\n                        }\n                      }}\n                    />\n                  </View>\n                )}\n                \n                {/* Handle attachment messages with image_url */}\n                {isAttachmentMessage && item.image_url && (\n                  <View style={{\n                    flexDirection: 'column',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    marginVertical: 8,\n                    width: '100%',\n                  }}>\n                    <ClickableImage\n                      imageUrl={item.image_url}\n                      onPress={handleImagePress}\n                      style={{\n                        image: {\n                          width: 250,\n                          height: 250,\n                          borderRadius: 8,\n                          marginVertical: 4,\n                        }\n                      }}\n                    />\n                  </View>\n                )}\n              </View>\n            </View>\n          </View>\n          \n          {/* Render caption AFTER the images if it exists */}\n          {item.content && item.content.trim().length > 0 && (\n            <View style={[\n              isFromMe ? styles.sentMessageContainer : styles.receivedMessageContainer\n            ]}>\n              <View style={[\n                styles.messageCard, \n                isFromMe ? styles.sentMessage : styles.receivedMessage\n              ]}>\n                <View style={styles.messageContent}>\n                  <Text style={[\n                    styles.messageText,\n                    isFromMe ? styles.sentMessageText : styles.receivedMessageText\n                  ]}>\n                    {item.content}\n                  </Text>\n                </View>\n              </View>\n            </View>\n          )}\n        </View>\n      );\n    }\n    \n    // Handle normal text messages\n    const isFromMe = !item.sent_by_other_user;\n    return (\n      <View>\n        <MessageTimestamp \n          message={item}\n          isFromMe={isFromMe}\n          styles={styles}\n          userTimezone={timeSettings?.timezone || 'America/Denver'}\n          show={showTimestamp}\n        />\n        <View style={isFromMe ? styles.sentMessageContainer : styles.receivedMessageContainer}>\n          <View style={[\n            styles.messageCard, \n            isFromMe ? styles.sentMessage : styles.receivedMessage\n          ]}>\n            <View style={styles.messageContent}>\n              <Text style={[\n                styles.messageText,\n                isFromMe ? styles.sentMessageText : styles.receivedMessageText\n              ]}>\n                {item.content}\n              </Text>\n            </View>\n          </View>\n        </View>\n      </View>\n    );\n  }, [navigation, selectedConversationData, timeSettings, hasDraft, draftData, selectedConversation, fetchMessages, messages, handleImagePress]);\n\n  const handleBookingRequest = async (modalData) => {\n    try {\n      debugLog('MBA2349f87g9qbh2nfv9cg: handleBookingRequest called', {\n        conversationId: modalData.conversation_id,\n        currentMessageCount: messages.length\n      });\n      \n      const token = await getStorage('userToken');\n      \n      // First, create the booking request\n      const bookingRequestResponse = await axios.post(\n        `${API_BASE_URL}/api/bookings/v1/request_booking/`,\n        modalData,\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        }\n      );\n\n      debugLog('MBA2349f87g9qbh2nfv9cg: Booking request created', {\n        bookingId: bookingRequestResponse.data.booking_id\n      });\n\n      // Then, send the booking request message with the booking ID\n      const messageResponse = await axios.post(\n        `${API_BASE_URL}/api/messages/v1/send_request_booking/`,\n        {\n          ...modalData,\n          booking_id: bookingRequestResponse.data.booking_id\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n            'Content-Type': 'application/json'\n          }\n        }\n      );\n\n      debugLog('MBA2349f87g9qbh2nfv9cg: Booking message sent', {\n        messageId: messageResponse.data.message_id,\n        bookingId: bookingRequestResponse.data.booking_id\n      });\n\n      // Add the new message to the messages list\n      setMessages(prevMessages => {\n        debugLog('MBA2349f87g9qbh2nfv9cg: Adding booking request message to list', {\n          beforeLength: prevMessages.length,\n          afterLength: prevMessages.length + 1,\n          messageId: messageResponse.data.message_id\n        });\n        \n        return [messageResponse.data, ...prevMessages];\n      });\n\n      setShowRequestModal(false);\n      debugLog('MBA2349f87g9qbh2nfv9cg: handleBookingRequest completed successfully');\n    } catch (error) {\n      debugLog('MBA2349f87g9qbh2nfv9cg: Error in handleBookingRequest:', error);\n      console.error('Error creating booking:', error);\n      Alert.alert(\n        'Error',\n        'Unable to create booking. Please try again.',\n        [{ text: 'OK' }]\n      );\n    }\n  };\n\n  // Add search functionality\n  const handleSearch = (text) => {\n    setSearchQuery(text);\n  };\n\n  // Add a useEffect to filter conversations when searchQuery changes\n  useEffect(() => {\n    if (!searchQuery) {\n      // When search is empty, show all conversations\n      setFilteredConversations(conversations);\n    } else {\n      // Filter conversations based on search text\n      const filtered = conversations.filter(conv => {\n        const otherParticipantName = conv.participant1_id === CURRENT_USER_ID ? \n          conv.participant2_name : conv.participant1_name;\n        const searchName = otherParticipantName || conv.name || conv.other_user_name || '';\n        \n        return searchName.toLowerCase().includes(searchQuery.toLowerCase()) ||\n              (conv.last_message && conv.last_message.toLowerCase().includes(searchQuery.toLowerCase()));\n      });\n      setFilteredConversations(filtered);\n    }\n    \n    debugLog('MBA5557: Filtering conversations based on search', { \n      searchQuery, \n      totalConversations: conversations.length,\n      filteredCount: filteredConversations.length \n    });\n  }, [searchQuery, conversations]);\n\n  // Conversation list component\n  const renderConversationList = () => {\n    // Final double check at render time\n    const renderedConversations = userRole === 'professional'\n      ? filteredConversations.filter(c => c.is_professional === true)\n      : userRole === 'petOwner' || userRole === 'owner'\n        ? filteredConversations.filter(c => c.is_professional === false) \n        : filteredConversations;\n    \n    // Add debug logging right at render time\n    debugLog('MBA24u45vn', 'Rendering conversation list', {\n      filteredConversationsCount: filteredConversations.length,\n      safeConversationsCount: renderedConversations.length,\n      conversationsCount: conversations.length,\n      currentRole: userRole,\n      selectedConversation,\n      url: typeof window !== 'undefined' ? window.location.href : 'not-web',\n      routeParams: route.params ? JSON.stringify(route.params) : 'none',\n      timestamp: Date.now(),\n      filteredConversations: renderedConversations.map(c => ({\n        id: c.conversation_id,\n        is_professional: c.is_professional,\n        name: c.other_user_name,\n        has_profile_pic: !!c.profile_picture\n      }))\n    });\n    \n    return (\n      <ConversationList\n        conversations={renderedConversations}\n        selectedConversation={selectedConversation}\n              onSelectConversation={(convId) => {\n                  // Only log on initial selection, not re-selections\n        if (convId !== selectedConversation) {\n          debugLog('MBA24u45vn', 'Conversation selected from list', {\n            conversationId: convId,\n            previousConversation: selectedConversation,\n            url: typeof window !== 'undefined' ? window.location.href : 'not-web',\n            timestamp: Date.now()\n          });\n          \n          // Fetch messages for this conversation\n          fetchMessages(convId);\n          \n          // Make sure to update navigation params directly to ensure Navigation component detects change\n          if (Platform.OS === 'web' && typeof window !== 'undefined') {\n            window.selectedConversationId = convId;\n            \n            // Update URL to include selectedConversation parameter (this is what we check on reload)\n            const currentUrl = new URL(window.location.href);\n            currentUrl.searchParams.set('selectedConversation', convId);\n            window.history.replaceState({}, '', currentUrl.toString());\n          }\n          \n          // Update navigation params directly\n          navigation.setParams({ selectedConversation: convId });\n        }\n        setSelectedConversation(convId);\n      }}\n        searchQuery={searchQuery}\n        onSearchChange={setSearchQuery}\n        styles={styles}\n        CURRENT_USER_ID={CURRENT_USER_ID}\n        getConversationUnreadCount={getConversationUnreadCount}\n        markConversationAsRead={markConversationAsRead}\n      />\n    );\n  };\n\n  // Update message header to include profile photo and edit draft button\n  const renderMessageHeader = () => (\n    <View style={styles.messageHeader}>\n      <MessageHeader\n        selectedConversationData={selectedConversationData}\n        hasDraft={hasDraft}\n        draftData={draftData}\n        onEditDraft={(draftId) => {\n          if (draftId) {\n            handleOpenExistingDraft(draftId);\n          }\n        }}\n        styles={styles}\n        onCreateBooking={handleCreateBooking}\n        onViewPets={handleViewPets}\n      />\n    </View>\n  );\n\n  // Update renderMessageSection to use simplified flexbox layout\n  const renderMessageSection = () => {\n    if (!selectedConversation) {\n      return null;\n    }\n\n    return (\n      <View style={styles.mainSection}>\n        {screenWidth > 900 && renderMessageHeader()}\n        {/* Messages */}\n        <View style={styles.messageSection} className=\"message-container\">\n          <View \n            style={styles.messagesContainer} \n            className=\"messagesContainer\"\n          >\n            {isLoadingMessages ? (\n              <View style={styles.loadingContainer}>\n                <ActivityIndicator size=\"large\" color={theme.colors.primary} />\n                <Text style={styles.loadingText}>Loading messages...</Text>\n              </View>\n            ) : messages.length === 0 ? (\n              <Text style={styles.emptyText}>\n                No messages yet, start the conversation!\n              </Text>\n            ) : (\n              <MessageList\n                messages={messages}\n                renderMessage={renderMessage}\n                hasMore={hasMore}\n                isLoadingMore={isLoadingMore}\n                onLoadMore={loadMoreMessages}\n                styles={styles}\n                theme={theme}\n                className=\"message-list-component\"\n                userTimezone={timeSettings?.timezone || 'America/Denver'}\n                onScrollStart={(handlerSetter) => {\n                  // MessageList will call this with a function that accepts the actual handler\n                  handlerSetter(() => {\n                    // This is the handler that will be called when scrolling starts\n                    if (keyboardDismissHandlerRef.current) {\n                      debugLog('MBA8765: Scroll detected, calling keyboard dismiss handler');\n                      keyboardDismissHandlerRef.current();\n                    }\n                  });\n                }}\n              />\n            )}\n          </View>\n        </View>\n\n        {/* Input Section - Simplified to use flexbox positioning */}\n        <MessageInput \n          onScrollStart={(handler) => {\n            // Store the keyboard dismiss handler from MessageInput\n            keyboardDismissHandlerRef.current = handler;\n            debugLog('MBA8765: Registered keyboard dismiss handler from MessageInput');\n          }}\n          onSendMessage={async (messageContent, imageMessageIds, messageObject, alreadySent) => {\n            try {\n              // Prevent multiple simultaneous send operations\n              if (isSending) {\n                debugLog('MBA5511: Send operation already in progress in parent, ignoring duplicate call');\n                return;\n              }\n              \n              setIsSending(true);\n              \n              // If the message was already sent directly through uploadAndSendImageMessage\n              if (alreadySent && messageObject) {\n                debugLog('MBA5511: Message already sent directly:', {\n                  messageId: messageObject.message_id,\n                  messageType: messageObject.type_of_message\n                });\n                \n                // Add message to UI without making another API call\n                setMessages(prevMessages => [messageObject, ...prevMessages]);\n                \n                // Update conversation's last message\n                setConversations(prev => prev.map(conv => \n                  conv.conversation_id === selectedConversation \n                    ? {\n                        ...conv,\n                        last_message: messageObject.content || 'Image message',\n                        last_message_time: messageObject.timestamp\n                      }\n                    : conv\n                ));\n              } \n              // Otherwise, send normally through SendNormalMessage\n              else {\n                // Add the image message IDs to the request if available\n                if (imageMessageIds && imageMessageIds.length > 0) {\n                  debugLog('MBA5678: Sending message with images:', {\n                    messageContent,\n                    imageMessageIds,\n                    imageCount: imageMessageIds.length\n                  });\n                }\n                await SendNormalMessage(messageContent, imageMessageIds, messageObject);\n              }\n              \n              setIsSending(false);\n            } catch (error) {\n              debugLog('MBA5678: Error sending message:', error);\n              setIsSending(false);\n            }\n          }}\n          onShowDropdown={(show) => setShowDropdown(show)}\n          showDropdown={showDropdown}\n          styles={styles}\n          screenWidth={screenWidth}\n          selectedConversation={selectedConversation}\n        />\n      </View>\n    );\n  };\n\n  // Update the back button handler to better clear URL parameters\n  const handleBack = () => {\n    // Only log if there's actually a conversation selected\n    if (selectedConversation) {\n      debugLog('MBA24u45vn', 'Back button pressed', {\n        selectedConversation,\n        hasConversationData: !!selectedConversationData,\n        url: typeof window !== 'undefined' ? window.location.href : 'not-web',\n        timestamp: Date.now()\n      });\n    }\n    \n    // Set flag to indicate we're intentionally deselecting (to prevent URL param reloading)\n    isIntentionallyDeselecting.current = true;\n    \n    // First clear the URL parameter to prevent it from being re-read\n    navigation.setParams({ selectedConversation: undefined });\n    \n    // Also update URL directly to ensure Navigation component sees the change\n    if (Platform.OS === 'web' && typeof window !== 'undefined') {\n      const currentUrl = new URL(window.location.href);\n      currentUrl.searchParams.delete('selectedConversation');\n      currentUrl.searchParams.delete('conversationId'); // Also clear this for compatibility\n      window.history.replaceState({}, '', currentUrl.toString());\n      \n      // Clear global context variable used by Navigation\n      window.selectedConversationId = null;\n      \n      debugLog('MBA24u45vn', 'Cleared URL parameters in handleBack', {\n        oldValue: selectedConversation,\n        url_after: currentUrl.toString(),\n        timestamp: Date.now()\n      });\n    }\n    \n    // Clear the selected conversation state immediately\n    setSelectedConversation(null);\n    \n    // Clear conversation data and messages\n    setSelectedConversationData(null);\n    setMessages([]);\n    \n    // Fetch conversations to update the list after going back\n    debugLog('MBA24u45vn: Fetching conversations from handleBack');\n    fetchConversations();\n    \n    // Add a timeout to reset the flag as a safety mechanism\n    setTimeout(() => {\n      if (isIntentionallyDeselecting.current) {\n        isIntentionallyDeselecting.current = false;\n      }\n    }, 500);\n  };\n  \n  // Use static counter to reduce logging frequency\n  const renderMobileHeader = () => {\n    // We don't need to log mobile header rendering at all\n    // This function is called very frequently and doesn't need logging\n    \n    return (\n      <View style={[\n        styles.mobileHeader,\n        { \n          backgroundColor: theme.colors.surfaceContrast,  // Updated to use surfaceContrast\n          marginTop: selectedConversation && screenWidth <= 900 ? 0 : undefined\n        }\n      ]}>\n        <MessageHeader\n          selectedConversationData={selectedConversationData}\n          hasDraft={hasDraft}\n          draftData={draftData}\n          onEditDraft={(draftId) => {\n            if (draftId) {\n              handleOpenExistingDraft(draftId);\n            }\n          }}\n          onBackPress={handleBack} // Use our new handleBack function\n          styles={styles}\n          isMobile={true}\n          onCreateBooking={handleCreateBooking}\n          onViewPets={handleViewPets}\n        />\n      </View>\n    );\n  };\n\n  // Update renderEmptyState to remove prototype references\n  const renderEmptyState = () => (\n    <View style={{\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center',\n      padding: 20,\n    }}>\n      <MaterialCommunityIcons \n        name=\"message-text-outline\" \n        color={theme.colors.placeholder}\n        style={{ marginBottom: 16 }}\n      />\n      <Text style={{\n        fontSize: 20,\n        fontWeight: 'bold',\n        color: theme.colors.text,\n        marginBottom: 8,\n        textAlign: 'center'\n      }}>\n        No Messages Yet\n      </Text>\n      <Text style={{\n        fontSize: 16,\n        color: theme.colors.placeholder,\n        marginBottom: 24,\n        textAlign: 'center'\n      }}>\n        {userRole === 'professional' ? \n          'Create services to start getting bookings and messages from owners' :\n          'Search professionals to find services and start messaging'}\n      </Text>\n      <Button\n        mode=\"contained\"\n        onPress={() => navigateToFrom(navigation, userRole === 'professional' ? 'ServiceManager' : 'SearchProfessionalsListing', 'MessageHistory')}\n        style={{ borderRadius: 8 }}\n      >\n        {userRole === 'professional' ? 'Create Services' : 'Find Professionals'}\n      </Button>\n    </View>\n  );\n\n  const handleEditDraft = async (bookingId) => {\n    debugLog('MBA6428: handleEditDraft called with booking ID:', bookingId);\n    \n    if (!bookingId) {\n      debugLog('MBA6428: Error - No booking ID provided');\n      Alert.alert('Error', 'Missing booking information. Please try again.');\n      return;\n    }\n    \n    try {\n      setIsLoading(true);\n      debugLog('MBA6428: Calling createDraftFromBooking API with booking ID:', bookingId);\n      \n      // Call our new API function to create a draft from the booking\n      const response = await createDraftFromBooking(bookingId);\n      \n      // Check for error in response\n      if (response.error) {\n        debugLog('MBA6428: Error returned from createDraftFromBooking:', response);\n        Alert.alert('Error', response.message || 'Failed to create draft from booking. Please try again.');\n        return;\n      }\n      \n      if (response && response.draft_id) {\n        debugLog('MBA6428: Draft created successfully:', response);\n        \n        // Update local state with the new draft info\n        setHasDraft(true);\n        setDraftData(response.draft_data);\n        \n        // Use the returned draft_id for opening the booking step modal\n        setCurrentBookingId(response.draft_id);\n        \n        // Close any open modal and open the booking step modal\n        setShowDraftConfirmModal(false);\n        \n        // Add a small delay to ensure modal state is updated\n        setTimeout(() => {\n          debugLog('MBA6428: Opening BookingStepModal with draft:', response.draft_id);\n          setShowBookingStepModal(true);\n        }, 100);\n      } else {\n        debugLog('MBA6428: Error - Invalid response from createDraftFromBooking:', response);\n        Alert.alert('Error', 'Failed to create draft from booking. Please try again.');\n      }\n    } catch (error) {\n      debugLog('MBA6428: Error creating draft from booking:', error);\n      Alert.alert('Error', 'Failed to create draft from booking. Please try again.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // New function for opening an existing draft directly\n  const handleOpenExistingDraft = (draftId) => {\n    debugLog('MBA6428: handleOpenExistingDraft called with draft ID:', draftId);\n    \n    if (!draftId) {\n      debugLog('MBA6428: Error - No draft ID provided');\n      Alert.alert('Error', 'Missing draft information. Please try again.');\n      return;\n    }\n    \n    try {\n      // Set the current booking ID to the provided draft ID\n      setCurrentBookingId(draftId);\n      \n      // Close any open modal and open the booking step modal\n      setShowDraftConfirmModal(false);\n      \n      // Add a small delay to ensure modal state is updated\n      setTimeout(() => {\n        debugLog('MBA6428: Opening BookingStepModal with existing draft:', draftId);\n        setShowBookingStepModal(true);\n      }, 100);\n    } catch (error) {\n      debugLog('MBA6428: Error opening booking modal with draft:', error);\n      Alert.alert('Error', 'Failed to open booking draft. Please try again.');\n    }\n  };\n\n  // Add polling for online status of the other participant\n  useEffect(() => {\n    if (!selectedConversationData || !selectedConversation) {\n      return; // No conversation selected, nothing to poll\n    }\n    \n    const otherUserName = selectedConversationData.other_user_name || 'Unknown user';\n    debugLog(`MBA3210: [OTHER USER STATUS] Setting up polling for \"${otherUserName}\" online status`);\n    \n    \n    return () => {\n      debugLog(`MBA3210: [OTHER USER STATUS] Cleaning up polling interval for \"${otherUserName}\"`);\n      // clearInterval(statusPollingInterval);\n    };\n  }, [selectedConversationData, selectedConversation]);\n\n  useEffect(() => {\n    // Clean up on component unmount\n    return () => {\n      debugLog('MBA3210: MessageHistory unmounting, cleaning up websocket references');\n      // No need to explicitly disconnect here - the hook will handle it\n    };\n  }, []);\n\n  // Replace the existing beforeunload effect that disconnects the WebSocket\n  useEffect(() => {\n    // When a user signs out or navigates away, make sure to disconnect\n    const handleBeforeUnload = () => {\n      debugLog('MBA3210: Page unloading, but keeping websocket alive for session restore');\n      // Deliberately NOT disconnecting websocket on page unload\n      // This was causing message loss when refreshing or switching tabs\n    };\n\n    if (typeof window !== 'undefined') {\n      window.addEventListener('beforeunload', handleBeforeUnload);\n    }\n\n    return () => {\n      if (typeof window !== 'undefined') {\n        window.removeEventListener('beforeunload', handleBeforeUnload);\n      }\n    };\n  }, []);\n\n  // Add a useEffect to reset notifications when component mounts\n  useEffect(() => {\n    // Only reset notifications once when the component mounts\n    updateRoute && updateRoute('MessageHistory');\n    \n    // No need to reset all notifications, individual conversations will be marked as read when selected\n    \n    // Return cleanup function\n    return () => {\n      // If needed, add cleanup code here\n    };\n  }, []); // Empty dependency array to run only once on mount\n\n  // Add a useEffect to handle route updates and message notification resets when component mounts\n  useEffect(() => {\n    // Tell the notification context we're on the Messages screen\n    if (updateRoute) {\n      debugLog('MBA4321: Updating route in MessageNotificationContext to MessageHistory');\n      updateRoute('MessageHistory');\n      \n      // Important: DO NOT call resetNotifications() here\n      // That was causing all notifications to be cleared when opening MessageHistory\n      // Instead, we only mark the selected conversation as read when it's selected\n    }\n    \n    // Return cleanup function\n    return () => {\n      debugLog('MBA4321: Cleaning up message notification tracking for MessageHistory');\n    };\n  }, [updateRoute]);\n  \n  // Add an effect to mark the current conversation as read when selected\n  useEffect(() => {\n    if (selectedConversation && markConversationAsRead) {\n      debugLog(`MBA4321: Marking conversation ${selectedConversation} as read`);\n      markConversationAsRead(selectedConversation);\n    }\n  }, [selectedConversation, markConversationAsRead]);\n\n  // When component initializes, ensure we properly handle any route parameters\n  // that specify a conversation to open, but don't reset all notifications\n  useEffect(() => {\n    if (!initialLoadRef.current) return; // Skip if not initial load\n    \n    const initializeData = async () => {\n      try {\n        // Reset states\n        setConversations([]);\n        setMessages([]);\n        setSelectedConversation(null);\n        setSelectedConversationData(null);\n        setIsLoadingConversations(true);\n        setIsLoadingMessages(false);\n        setCurrentPage(1);\n        setHasMore(true);\n        lastViewedConversationRef.current = null;\n        \n        // Handle parameters first\n        let initialConversationId = null;\n        \n        // First check URL parameters on web\n        if (Platform.OS === 'web') {\n          const currentUrl = new URL(window.location.href);\n          \n          // Check both possible parameter names\n          let urlConversationId = currentUrl.searchParams.get('selectedConversation');\n          \n          // If not found, try the alternate parameter name\n          if (!urlConversationId) {\n            urlConversationId = currentUrl.searchParams.get('conversationId');\n          }\n          \n          if (urlConversationId) {\n            initialConversationId = urlConversationId;\n            debugLog(`MBA4321: Using conversation ID ${urlConversationId} from URL parameters`);\n            \n            // Clean up URL parameters to be consistent\n            currentUrl.searchParams.delete('conversationId');\n            currentUrl.searchParams.delete('selectedConversation');\n            \n            // Set to the standard parameter name\n            currentUrl.searchParams.set('selectedConversation', urlConversationId);\n            window.history.replaceState({}, '', currentUrl.toString());\n          }\n        }\n        \n        // Next check route params if no URL param was found\n        if (!initialConversationId && route.params?.conversationId) {\n          initialConversationId = route.params.conversationId;\n          debugLog(`MBA4321: Using conversation ID ${initialConversationId} from route parameters`);\n          \n          // Check if we should open booking creation (coming from Services)\n          if (route.params.isProfessional === true) {\n            shouldOpenBookingCreationRef.current = true;\n          }\n        }\n        \n        debugLog('MBA24u45vn: Fetching conversations from initializeData');\n        // Fetch conversations\n        const conversationsData = await fetchConversations();\n        \n        // Set initial selected conversation - either from params or first one\n        if (initialConversationId) {\n          setSelectedConversation(initialConversationId);\n          debugLog(`MBA4321: Setting initially selected conversation to ${initialConversationId}`);\n        } else if (Platform.OS === 'web' && screenWidth > 900 && conversationsData?.length > 0) {\n          setSelectedConversation(conversationsData[0].conversation_id);\n          debugLog(`MBA4321: Auto-selecting first conversation ${conversationsData[0].conversation_id} on desktop`);\n        }\n        \n        // Important: We DON'T mark all conversations as read here\n        // Only the selected conversation will be marked as read when it's selected\n      } catch (error) {\n        console.error('Error initializing MessageHistory:', error);\n      } finally {\n        initialLoadRef.current = false;\n        setIsInitialLoad(false);\n      }\n    };\n    \n    initializeData();\n    \n    return () => {\n      debugLog('MBA4321: Cleaning up MessageHistory component');\n      lastViewedConversationRef.current = null;\n      \n      // Clear the global selected conversation tracking\n      if (typeof window !== 'undefined') {\n        window.selectedConversationId = null;\n      }\n      \n      // IMPORTANT: We no longer disconnect the WebSocket here\n      // This allows the connection to persist when navigating away from this screen\n    };\n  }, []);\n  \n  // Handle web-specific URL parameters on page reload\n  useEffect(() => {\n    if (Platform.OS === 'web' && typeof window !== 'undefined') {\n      // When the page reloads, we need to clear the conversation parameters\n      if (window.performance) {\n        // This checks specifically for reload events (not initial page load)\n        const navigationEntry = window.performance.getEntriesByType('navigation')[0];\n        if (navigationEntry && navigationEntry.type === 'reload') {\n          debugLog('MBA3210: Page reload detected, clearing conversation parameters from URL');\n          \n          // Clear all possible URL parameters - handle both parameter names\n          const currentUrl = new URL(window.location.href);\n          \n          // Check for selectedConversation param\n          if (currentUrl.searchParams.has('selectedConversation')) {\n            currentUrl.searchParams.delete('selectedConversation');\n            debugLog('MBA3210: Removed selectedConversation parameter from URL');\n          }\n          \n          // Also check for conversationId param\n          if (currentUrl.searchParams.has('conversationId')) {\n            currentUrl.searchParams.delete('conversationId');\n            debugLog('MBA3210: Removed conversationId parameter from URL');\n          }\n          \n          // And check for isMobile param if needed\n          if (currentUrl.searchParams.has('isMobile')) {\n            currentUrl.searchParams.delete('isMobile');\n            debugLog('MBA3210: Removed isMobile parameter from URL');\n          }\n          \n          // Update the URL without refreshing the page\n          window.history.replaceState({}, '', currentUrl.toString());\n          debugLog('MBA3210: Updated URL:', currentUrl.toString());\n          \n          // Reset the selected conversation state\n          setSelectedConversation(null);\n          setSelectedConversationData(null);\n          \n          // Clear global tracking variable\n          window.selectedConversationId = null;\n          \n          // Update navigation params directly\n          if (navigation && navigation.setParams) {\n            navigation.setParams({ \n              selectedConversation: null,\n              conversationId: null,\n              isMobile: null\n            });\n          }\n        }\n      }\n      \n      // Keep the WebSocket alive on page unload\n      const handleBeforeUnload = () => {\n        debugLog('MBA3210: Page unloading, but keeping websocket alive for session restore');\n        // No longer disconnect WebSocket on page unload\n      };\n      \n      window.addEventListener('beforeunload', handleBeforeUnload);\n      \n      return () => {\n        window.removeEventListener('beforeunload', handleBeforeUnload);\n      };\n    }\n  }, [navigation]);\n\n  // Clear processed messages cache when switching conversations\n  useEffect(() => {\n    if (selectedConversation) {\n      debugLog('MBA2349f87g9qbh2nfv9cg: Clearing processed messages cache for new conversation', {\n        conversationId: selectedConversation,\n        previousCacheSize: processedPagesRef.current.size,\n        previousMessageIdsSize: messageIdsRef.current.size\n      });\n      \n      // Reset our tracking refs when switching conversations\n      processedPagesRef.current.clear();\n      messageIdsRef.current.clear();\n      isLoadingMoreRef.current = false;\n      \n      debugLog('MBA2349f87g9qbh2nfv9cg: Cache cleared for conversation switch', {\n        processedPagesSize: processedPagesRef.current.size,\n        messageIdsSize: messageIdsRef.current.size,\n        isLoadingMoreRef: isLoadingMoreRef.current\n      });\n    }\n  }, [selectedConversation]);\n\n  // Add state change tracking for debugging\n  useEffect(() => {\n    debugLog('MBA2u3f89fbno4: [STATE] selectedConversation changed', {\n      newValue: selectedConversation,\n      timestamp: Date.now()\n    });\n    \n    // Update URL params and navigation state when selectedConversation changes\n    if (Platform.OS === 'web' && typeof window !== 'undefined') {\n      // Update the URL with the selected conversation\n      const currentUrl = new URL(window.location.href);\n      \n      if (selectedConversation) {\n        // First clear any existing conversation parameters for consistency\n        if (currentUrl.searchParams.has('conversationId')) {\n          currentUrl.searchParams.delete('conversationId');\n        }\n        \n        // Set the selectedConversation parameter (match the parameter name used in the URL)\n        currentUrl.searchParams.set('selectedConversation', selectedConversation);\n        \n        // Store selectedConversation in global context for Navigation component\n        window.selectedConversationId = selectedConversation;\n        \n        debugLog('MBA4477: Updated URL with selectedConversation', {\n          selectedConversation,\n          newUrl: currentUrl.toString()\n        });\n      } else {\n        // Remove both possible parameter names if no conversation is selected\n        if (currentUrl.searchParams.has('conversationId')) {\n          currentUrl.searchParams.delete('conversationId');\n        }\n        if (currentUrl.searchParams.has('selectedConversation')) {\n          currentUrl.searchParams.delete('selectedConversation');\n        }\n        \n        // Clear global context\n        window.selectedConversationId = null;\n        \n        debugLog('MBA4477: Cleared conversation parameters from URL');\n      }\n      \n      // Update the URL without refreshing the page\n      window.history.replaceState({}, '', currentUrl.toString());\n      \n      // Also update the navigation params directly\n      if (navigation && navigation.setParams) {\n        navigation.setParams({ selectedConversation });\n        \n        debugLog('MBA4477: Updated navigation params with selectedConversation', {\n          selectedConversation\n        });\n      }\n    }\n  }, [selectedConversation, navigation]);\n\n  useEffect(() => {\n    debugLog('MBA2u3f89fbno4: [STATE] isSignedIn changed', {\n      newValue: isSignedIn,\n      timestamp: Date.now()\n    });\n  }, [isSignedIn]);\n\n  useEffect(() => {\n    debugLog('MBA2u3f89fbno4: [STATE] loading changed', {\n      newValue: loading,\n      timestamp: Date.now()\n    });\n  }, [loading]);\n\n  useEffect(() => {\n    debugLog('MBA2u3f89fbno4: [STATE] screenWidth changed', {\n      newValue: screenWidth,\n      timestamp: Date.now()\n    });\n  }, [screenWidth]);\n\n  // Add a function to handle View Profile button click\n  const handleViewPets = () => {\n    debugLog('MBA3456', 'View Profile button clicked', {\n      conversation_id: selectedConversationData?.conversation_id,\n      other_user_name: selectedConversationData?.other_user_name\n    });\n    \n    setShowClientPetsModal(true);\n  };\n\n  // Add a special effect specifically for Android Chrome keyboard handling\n  useEffect(() => {\n    if (Platform.OS === 'web' && screenWidth <= 900 && isAndroidChromeRef.current) {\n      debugLog('MBA9876: [ANDROID] Setting up Android Chrome-specific keyboard handler');\n      \n      // Helper function to detect keyboard visibility more reliably on Android Chrome\n      const checkAndroidKeyboard = () => {\n        // If input is focused, keyboard is likely open\n        const isInputFocused = document.activeElement && \n                              (document.activeElement.tagName === 'TEXTAREA' || \n                               document.activeElement.tagName === 'INPUT');\n        \n        // Visual viewport height change is a good indicator\n        const viewportHeightReduced = window.visualViewport && \n                                     window.innerHeight - window.visualViewport.height > 100;\n        \n        const keyboardIsLikelyOpen = isInputFocused && viewportHeightReduced;\n        \n        debugLog('MBA9876: [ANDROID] Android keyboard check', {\n          isInputFocused,\n          activeElement: document.activeElement?.tagName,\n          viewportHeightReduced,\n          innerHeight: window.innerHeight,\n          visualViewportHeight: window.visualViewport?.height,\n          keyboardIsLikelyOpen\n        });\n        \n        if (keyboardIsLikelyOpen) {\n          // Force input into view on Android Chrome\n          const inputContainer = document.querySelector('.message-input-container');\n          if (inputContainer) {\n            // Make sure input container is fixed to bottom\n            inputContainer.style.position = 'fixed';\n            inputContainer.style.bottom = '0px';\n            inputContainer.style.left = '0px';\n            inputContainer.style.right = '0px';\n            inputContainer.style.zIndex = '1000';\n            \n            // Explicitly ensure no margin\n            inputContainer.style.marginBottom = '0px';\n            \n            // Force visual viewport to bottom\n            setTimeout(() => {\n              window.scrollTo(0, document.body.scrollHeight);\n            }, 50);\n          }\n        }\n      };\n      \n      // Create event listeners specifically for Android Chrome\n      const handleAndroidFocus = () => {\n        debugLog('MBA9876: [ANDROID] Focus event on Android Chrome');\n        \n        // Add repeated checks for the keyboard\n        const checkInterval = setInterval(checkAndroidKeyboard, 100);\n        \n        // Stop checking after 1 second\n        setTimeout(() => {\n          clearInterval(checkInterval);\n        }, 1000);\n        \n        // Do an immediate check\n        checkAndroidKeyboard();\n      };\n      \n      document.addEventListener('focusin', handleAndroidFocus);\n      \n      return () => {\n        document.removeEventListener('focusin', handleAndroidFocus);\n      };\n    }\n  }, [screenWidth]);\n\n  // Function to ensure the latest message is visible - update to be more thorough\n  const ensureLatestMessageVisible = () => {\n    // Only run on web\n    if (Platform.OS === 'web') {\n      // Add a significant bottom padding to the FlatList content container\n      setTimeout(() => {\n        // Try different selectors to find the FlatList content container\n        const selectors = [\n          '.messagesContainer .message-list-component > div > div',\n          '.messagesContainer .message-list-component > div',\n          '.messagesContainer div[data-interactable=\"true\"]',\n          '.messagesContainer > *',\n        ];\n        \n        let targetFound = false;\n        \n        // Try each selector until we find a match\n        for (const selector of selectors) {\n          const elements = document.querySelectorAll(selector);\n          if (elements && elements.length > 0) {\n            // Apply padding to ensure messages are visible\n            elements.forEach(el => {\n              // Use cssText to ensure !important works properly\n              el.style.cssText += '; padding-top: 300px !important; margin-top: 300px !important;';\n              targetFound = true;\n              debugLog('MBA9876: Added padding to element', {\n                selector,\n                element: el.tagName,\n                childCount: el.childElementCount\n              });\n            });\n            \n            // If we found a target with this selector, stop trying others\n            if (targetFound) break;\n          }\n        }\n        \n        // If we couldn't find any suitable container, try a more direct approach but don't log warning\n        // This reduces console spam while still trying to fix the issue\n        if (!targetFound) {\n          // Try applying padding to the message container directly\n          const messageContainer = document.querySelector('.messagesContainer');\n          if (messageContainer) {\n            messageContainer.style.cssText += '; padding-bottom: 300px !important;';\n          }\n        }\n        \n        // Also try to force scroll to top of inverted list to show latest message\n        const messageList = document.querySelector('.messagesContainer');\n        if (messageList) {\n          messageList.scrollTop = 0;\n          debugLog('MBA9876: Forced scroll to top of message list');\n        }\n      }, 100); // Decreased timeout for faster response\n    }\n  };\n\n  // Add an interval to keep checking and fixing the padding\n  useEffect(() => {\n    if (Platform.OS !== 'web' || !selectedConversation) return;\n    \n    // Run immediately\n    ensureLatestMessageVisible();\n    \n    // Set up an interval to continuously check and fix\n    const intervalId = setInterval(ensureLatestMessageVisible, 500);\n    \n    // Clean up interval on unmount\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, [selectedConversation, messages]);\n\n  // Add this useEffect after the existing ones to directly fix message visibility after sending\n  useEffect(() => {\n    // Only run this on web\n    if (Platform.OS !== 'web' || !selectedConversation) return;\n    \n    // Function to directly fix message visibility with a direct approach\n    const fixMessageVisibility = () => {\n      // Target the FlatList directly\n      const flatList = document.querySelector('.messagesContainer .message-list-component');\n      if (!flatList) return;\n      \n      // Force scroll to top (latest message) for inverted list\n      flatList.scrollTop = 0;\n      \n      // Get the content container - this is what we need to add padding to\n      const contentContainer = flatList.querySelector('div > div');\n      if (contentContainer) {\n        // Check current padding before applying\n        const computedStyle = window.getComputedStyle(contentContainer);\n        const currentPaddingTop = parseInt(computedStyle.paddingTop) || 0;\n        \n        // Only apply if needed\n        if (currentPaddingTop < 300) {\n          // Add a very large padding to ensure latest message is visible\n          contentContainer.style.paddingTop = '300px';\n          // Also try margin in case padding is being overridden\n          contentContainer.style.marginTop = '300px';\n          \n          debugLog('MBA9876: Applied direct padding fix to FlatList content container', {\n            element: 'content container',\n            paddingApplied: '300px',\n            marginApplied: '300px'\n          });\n        }\n      }\n      \n      // Also try to apply padding to all direct children\n      const directChildren = flatList.querySelectorAll(':scope > div');\n      directChildren.forEach(child => {\n        // Check current padding\n        const computedStyle = window.getComputedStyle(child);\n        const currentPaddingTop = parseInt(computedStyle.paddingTop) || 0;\n        \n        // Only apply if needed\n        if (currentPaddingTop < 300) {\n          child.style.paddingTop = '300px';\n          child.style.marginTop = '300px';\n          \n          debugLog('MBA9876: Applied padding to direct child', {\n            child: child.className || child.tagName,\n            paddingApplied: '300px',\n            marginApplied: '300px'\n          });\n        }\n      });\n    };\n    \n    // Run the fix whenever messages change (new message sent or received)\n    if (messages.length > 0) {\n      // Run immediately\n      fixMessageVisibility();\n      \n      // And after a short delay to ensure the DOM has updated\n      setTimeout(fixMessageVisibility, 100);\n      setTimeout(fixMessageVisibility, 500);\n    }\n  }, [messages, selectedConversation]);\n\n  // Add a specific WebInput focus handler to fix message visibility when keyboard opens\n  // Improved input focus handler for cross-browser compatibility\n  const handleInputFocus = () => {\n    if (Platform.OS === 'web') {\n      // On mobile browsers, when keyboard opens, force scroll to show latest message\n      setTimeout(() => {\n        // Scroll the message list to show the latest messages (top for inverted list)\n        const messageList = document.querySelector('.messagesContainer');\n        if (messageList) {\n          messageList.scrollTop = 0;\n          debugLog('MBA9876: Forced scroll on input focus to show latest messages');\n        }\n        \n        // For iOS Safari, we need additional handling to avoid the gray space\n        // This ensures content doesn't shift weirdly when the keyboard opens\n        if (isKeyboardVisible) {\n          // Force window scroll to ensure input is visible\n          window.scrollTo(0, 0);\n          \n          // Fix for iOS browsers - scroll input into view\n          const inputContainer = document.querySelector('.message-input-container');\n          if (inputContainer) {\n            // Make sure the input stays visible by forcing a reflow\n            inputContainer.style.transform = 'translateZ(0)';\n            \n            debugLog('MBA9876: Applied iOS input visibility fix');\n          }\n        }\n      }, 150);\n    }\n  };\n\n  // Add an effect to ensure keyboard handling works properly on iOS\n  useEffect(() => {\n    if (Platform.OS !== 'web') return;\n    \n    // Helper function to make adjustments when keyboard is visible\n    const adjustForKeyboard = () => {\n      // Only run if we have a selected conversation\n      if (!selectedConversation) return;\n      \n      if (isKeyboardVisible) {\n        // When keyboard is visible, ensure the input is visible\n        const inputContainer = document.querySelector('.message-input-container');\n        if (inputContainer) {\n          // Ensure the input stays in view\n          inputContainer.style.position = 'fixed';\n          inputContainer.style.bottom = '0';\n          inputContainer.style.left = '0';\n          inputContainer.style.right = '0';\n          inputContainer.style.zIndex = '1000';\n          \n          // On iOS, use hardware acceleration to prevent rendering issues\n          inputContainer.style.transform = 'translateZ(0)';\n          \n          // Ensure messages have enough padding to not be hidden behind the input\n          const messageContainer = document.querySelector('.messagesContainer');\n          if (messageContainer) {\n            messageContainer.style.paddingBottom = '80px';\n          }\n          \n          debugLog('MBA9876: [KEYBOARD] Applied keyboard adjustments');\n        }\n        \n        // Force scroll if textarea is focused\n        if (document.activeElement && document.activeElement.tagName === 'TEXTAREA') {\n          const messageList = document.querySelector('.messagesContainer');\n          if (messageList) {\n            // For inverted list, scroll to top to see latest messages\n            messageList.scrollTop = 0;\n          }\n        }\n      }\n    };\n    \n    // Add event listeners for iOS keyboard detection\n    window.addEventListener('focusin', adjustForKeyboard);\n    \n    // Run once on mount\n    adjustForKeyboard();\n    \n    // Clear the handlers on unmount\n    return () => {\n      window.removeEventListener('focusin', adjustForKeyboard);\n    };\n  }, [selectedConversation, isKeyboardVisible]);\n\n  // Add iOS-specific style adjustments\n  useLayoutEffect(() => {\n    if (Platform.OS !== 'web') return;\n    \n    // Create a style element with cross-browser compatible styles\n    const styleEl = document.createElement('style');\n    styleEl.id = 'ios-message-fix-style';\n    styleEl.innerHTML = `\n      /* Ensure proper message container height and scrolling */\n      .messagesContainer {\n        -webkit-overflow-scrolling: touch;\n        padding-bottom: 80px !important;\n      }\n      \n      /* Fix for inverted FlatList in Safari */\n      .message-list-component {\n        padding-bottom: 0 !important;\n        transform: translateZ(0);\n      }\n      \n      /* Make sure there's enough space at the bottom to not cut off messages */\n      .message-list-component > div > div {\n        padding-bottom: 100px !important;\n      }\n      \n      /* Fix for iOS keyboard issues */\n      .message-input-container {\n        transform: translateZ(0);\n        z-index: 1000;\n      }\n    `;\n    \n    // Add the style to the document head\n    document.head.appendChild(styleEl);\n    \n    debugLog('MBA9876: Added iOS-compatible style fixes', {\n      styleId: 'ios-message-fix-style'\n    });\n    \n    // Clean up function\n    return () => {\n      const existingStyle = document.getElementById('ios-message-fix-style');\n      if (existingStyle) {\n        existingStyle.remove();\n      }\n    };\n  }, []);\n  \n  // Add focused cleanup effect for iOS layout issues\n  useLayoutEffect(() => {\n    if (Platform.OS !== 'web' || !selectedConversation) return;\n    \n    // Simple function to ensure message list has proper padding\n    const ensureMessageListPadding = () => {\n      const messageList = document.querySelector('.messagesContainer');\n      if (messageList) {\n        // Ensure the message container has enough padding at the bottom\n        // to accommodate for the fixed input bar\n        if (parseInt(messageList.style.paddingBottom || '0') < 80) {\n          messageList.style.paddingBottom = '80px';\n        }\n        \n        // Make sure iOS properly renders the scroll container\n        messageList.style.WebkitOverflowScrolling = 'touch';\n        \n        debugLog('MBA9876: [iOS] Ensured message list has proper padding');\n      }\n    };\n    \n    // Run immediately\n    ensureMessageListPadding();\n    \n    // And also after a short delay to account for async rendering\n    const timeoutId = setTimeout(ensureMessageListPadding, 500);\n    \n    // Clean up function\n    return () => {\n      clearTimeout(timeoutId);\n    };\n  }, [selectedConversation]);\n  \n  // Add a lightweight effect to ensure iOS scrolling works properly\n  useEffect(() => {\n    if (Platform.OS !== 'web' || !selectedConversation) return;\n    \n    // This timeout ensures the message container can scroll properly\n    // by adding the -webkit-overflow-scrolling property\n    const timeoutId = setTimeout(() => {\n      // Apply iOS-specific scrolling property\n      const messageContainer = document.querySelector('.messagesContainer');\n      if (messageContainer) {\n        messageContainer.style.WebkitOverflowScrolling = 'touch';\n        debugLog('MBA9876: [iOS] Applied smooth scrolling to message container');\n      }\n      \n      // Make sure input stays in place on iOS\n      const inputContainer = document.querySelector('.message-input-container');\n      if (inputContainer) {\n        // Force hardware acceleration to avoid rendering issues\n        inputContainer.style.transform = 'translateZ(0)';\n        debugLog('MBA9876: [iOS] Applied hardware acceleration to input container');\n      }\n    }, 250);\n    \n    return () => {\n      clearTimeout(timeoutId);\n    };\n  }, [selectedConversation]);\n\n  // Add a loading overlay component at the bottom of the return statement, before any modals\n  // Final sanity check right before rendering\n  debugLog('MBA3456: FINAL CHECK before rendering UI', {\n    conversationsTotal: conversations.length,\n    filteredTotal: filteredConversations.length,\n    role: userRole,\n    originalConversations: conversations.map(c => ({\n      id: c.conversation_id,\n      is_professional: c.is_professional\n    })),\n    filteredConversations: filteredConversations.map(c => ({\n      id: c.conversation_id,\n      is_professional: c.is_professional\n    }))\n  });\n  \n  // Ensure no inappropriate conversations are showing - redundant safety check\n  const safeFilteredConversations = userRole === 'professional'\n    ? filteredConversations.filter(c => c.is_professional === true)\n    : userRole === 'petOwner' || userRole === 'owner'\n      ? filteredConversations.filter(c => c.is_professional === false) \n      : filteredConversations;\n  \n  // Refs for resize handling\n  const resizeTimeoutRef = useRef(null);\n  \n  // Track previous width for threshold crossing detection\n  const lastWidthRef = useRef(getInitialWidth());\n  \n  // Add effect to handle screen width changes with debouncing to prevent excessive re-renders\n  useEffect(() => {\n    // Only run on web platform\n    if (Platform.OS !== 'web' || typeof window === 'undefined') {\n      return;\n    }\n    \n    const handleScreenWidthChange = () => {\n      // Clear any existing timeout\n      if (resizeTimeoutRef.current) {\n        clearTimeout(resizeTimeoutRef.current);\n      }\n      \n      // Set a new timeout to debounce the navigation param update\n      resizeTimeoutRef.current = setTimeout(() => {\n        // Only update if we have a selected conversation\n        if (selectedConversation && typeof window !== 'undefined') {\n          const currentWidth = window.innerWidth;\n          const lastWidth = lastWidthRef.current;\n          const isMobile = currentWidth <= 900;\n          const wasMobile = lastWidth <= 900;\n          \n          // Only update if crossing the mobile/desktop threshold to avoid unnecessary API calls\n          if (isMobile !== wasMobile) {\n            // Update the navigation params to ensure Navigation component detects the change\n            navigation.setParams({ \n              selectedConversation: selectedConversation,\n              isMobile: isMobile\n            });\n            \n            debugLog('MBA4477: Updated navigation params after crossing width threshold', {\n              selectedConversation,\n              previousWidth: lastWidth,\n              currentWidth,\n              isMobile\n            });\n            \n            // Update the last width reference\n            lastWidthRef.current = currentWidth;\n          }\n        }\n      }, 500); // 500ms debounce (increased from 200ms)\n    };\n    \n    // Add resize event listener\n    window.addEventListener('resize', handleScreenWidthChange);\n    \n    // Cleanup\n    return () => {\n      window.removeEventListener('resize', handleScreenWidthChange);\n      \n      if (resizeTimeoutRef.current) {\n        clearTimeout(resizeTimeoutRef.current);\n      }\n    };\n  }, [selectedConversation, navigation]);\n  \n  // Direct solution for Brave/DuckDuckGo overlay issues\n  useEffect(() => {\n    if (Platform.OS !== 'web') return;\n    \n    // Brave/DuckDuckGo mobile detection attempt\n    const userAgent = navigator.userAgent.toLowerCase();\n    const isBrave = userAgent.includes('brave') || (navigator.brave && navigator.brave.isBrave && navigator.brave.isBrave.name === 'isBrave');\n    const isDuckDuckGo = userAgent.includes('duckduckgo');\n    const isMobile = userAgent.includes('iphone') || userAgent.includes('ipad') || userAgent.includes('mobile');\n\n    // Create a more aggressive CSS fix\n    const styleEl = document.createElement('style');\n    styleEl.id = 'brave-duckduckgo-fix';\n    styleEl.innerHTML = `\n      /* Target CSS fix specifically for mobile */\n      @media (max-width: 900px) {\n        /* Fix input container with !important flags to override browser styles */\n        .message-input-container, .inputSection {\n          background-color: #FFFFFF !important;\n          background: #FFFFFF !important;\n          border-top: 1px solid #ECECEC !important;\n          position: relative !important;\n          z-index: 999 !important;\n          bottom: 0 !important;\n          left: 0 !important;\n          right: 0 !important;\n          margin: 0 !important;\n          padding: 8px !important;\n        }\n        \n        /* Aggressively remove any translucent overlays */\n        .messagesContainer::after,\n        .inputSection::after,\n        .message-input-container::after,\n        .messagesContainer::before,\n        .inputSection::before,\n        .message-input-container::before,\n        .mainSection::after,\n        .mainSection::before {\n          display: none !important;\n          opacity: 0 !important;\n          content: none !important;\n          visibility: hidden !important;\n        }\n        \n        /* Force white background on containers */\n        html, body, #root, .mainSection, .messageSection, .messagesContainer {\n          background-color: #FFFFFF !important;\n        }\n        \n        /* Ensure message input stays on top */\n        .message-input-container textarea,\n        .message-input-container input {\n          position: relative !important;\n          z-index: 1000 !important;\n          opacity: 1 !important;\n          visibility: visible !important;\n        }\n      }\n    `;\n    \n    // Add style to document\n    document.head.appendChild(styleEl);\n    \n    // For Brave/DuckDuckGo on mobile, add extra fix\n    if ((isBrave || isDuckDuckGo || true) && isMobile) {\n      // Wait for DOM to be fully loaded\n      setTimeout(() => {\n        // Direct DOM fix\n        const fixGreySpace = () => {\n          // Fix input container\n          const inputContainer = document.querySelector('.message-input-container');\n          if (inputContainer) {\n            // Make sure input is visible\n            inputContainer.style.backgroundColor = '#FFFFFF';\n            inputContainer.style.position = 'relative';\n            inputContainer.style.zIndex = '999';\n            inputContainer.style.borderTop = '1px solid #ECECEC';\n            \n            // Fix parent containers\n            const inputSection = document.querySelector('.inputSection');\n            if (inputSection) {\n              inputSection.style.backgroundColor = '#FFFFFF';\n              inputSection.style.position = 'relative';\n              inputSection.style.zIndex = '998';\n            }\n          }\n          \n          // Fix message container\n          const messageContainer = document.querySelector('.messagesContainer');\n          if (messageContainer) {\n            messageContainer.style.backgroundColor = '#FFFFFF';\n          }\n        };\n        \n        // Run fix\n        fixGreySpace();\n        \n        // Run again after slight delay\n        setTimeout(fixGreySpace, 100);\n        \n        // Run on resize or orientation change\n        window.addEventListener('resize', fixGreySpace);\n        window.addEventListener('orientationchange', fixGreySpace);\n        \n        // Run on input focus (when keyboard appears)\n        document.addEventListener('focusin', (e) => {\n          if (e.target.tagName === 'TEXTAREA' || e.target.tagName === 'INPUT') {\n            setTimeout(fixGreySpace, 100);\n          }\n        });\n      }, 500);\n      \n      // Return cleanup function\n      return () => {\n        window.removeEventListener('resize', () => {});\n        window.removeEventListener('orientationchange', () => {});\n        document.removeEventListener('focusin', () => {});\n        \n        const existingStyle = document.getElementById('brave-duckduckgo-fix');\n        if (existingStyle) {\n          existingStyle.remove();\n        }\n      };\n    } else {\n      // Clean up for non-mobile browsers\n      return () => {\n        const existingStyle = document.getElementById('brave-duckduckgo-fix');\n        if (existingStyle) {\n          existingStyle.remove();\n        }\n      };\n    }\n  }, []);\n  \n  // A ref to track if we've already processed a specific navigation timestamp\n  const processedNavigationTimestampsRef = useRef(new Set());\n  \n  // Just after useState declarations, add one debug log for route params\n  useEffect(() => {\n    if (route.params?.conversationId) {\n      debugLog('MBA24u45vn', 'Route params detected', {\n        conversationId: route.params.conversationId,\n        otherUserName: route.params.otherUserName,\n        timestamp: route.params._timestamp,\n        has_fullConversationData: !!route.params.fullConversationData\n      });\n      \n      // Only process this useEffect if:\n      // 1. We have a recent timestamp (likely from ProfessionalServicesModal)\n      // 2. We have fullConversationData (confirms it's from ProfessionalServicesModal)\n      // 3. We haven't already processed this exact timestamp\n      // 4. This isn't a screen resize event\n      const hasRecentTimestamp = route.params._timestamp && \n                               (Date.now() - route.params._timestamp < 10000);\n      const isFromProfessionalModal = !!route.params.fullConversationData;\n      const hasProcessedThisTimestamp = route.params._timestamp && \n                                      processedNavigationTimestampsRef.current.has(route.params._timestamp);\n      \n      // Check if this is a screen resize event\n      // Screen resize typically changes isMobile param but keeps the same timestamp\n      const isScreenResizeEvent = route.params.isMobile !== undefined && \n                                !hasRecentTimestamp;\n      \n      debugLog('MBA24u45vn', 'Checking if we should fetch based on navigation source', {\n        hasRecentTimestamp,\n        isFromProfessionalModal,\n        hasProcessedThisTimestamp,\n        isScreenResizeEvent,\n        currentTimestamp: Date.now(),\n        navigationTimestamp: route.params._timestamp,\n        isMobile: route.params.isMobile\n      });\n      \n      // Only trigger fetch for new navigations from ProfessionalServicesModal\n      // Skip if this is a screen resize event\n      if (hasRecentTimestamp && isFromProfessionalModal && !hasProcessedThisTimestamp && \n          !isScreenResizeEvent && !isFetchingConversationsRef.current) {\n        debugLog('MBA24u45vn', 'Triggering fetch based on navigation from ProfessionalServicesModal', {\n          conversationId: route.params.conversationId,\n          currentConversation: selectedConversation,\n          timestamp: Date.now()\n        });\n        \n        // Mark this timestamp as processed to prevent duplicate processing\n        if (route.params._timestamp) {\n          processedNavigationTimestampsRef.current.add(route.params._timestamp);\n          \n          // Clean up old timestamps to prevent memory leaks\n          setTimeout(() => {\n            processedNavigationTimestampsRef.current.delete(route.params._timestamp);\n          }, 10000);\n        }\n        \n        // Set the selected conversation first\n        setSelectedConversation(route.params.conversationId);\n        \n        // Fetch conversations to update the list\n        fetchConversations().then(data => {\n          if (data && Array.isArray(data)) {\n            debugLog('MBA24u45vn', 'Conversations fetched from ProfessionalServicesModal navigation', {\n              conversationCount: data.length,\n              conversationId: route.params.conversationId,\n              found: !!data.find(c => c.conversation_id === route.params.conversationId)\n            });\n            \n            // Fetch messages for this conversation\n            fetchMessages(route.params.conversationId);\n          }\n        });\n      }\n    }\n  }, [route.params]);\n  \n  return (\n    <View style={[\n      styles.container,\n      screenWidth <= 900 && selectedConversation && styles.mobileContainer,\n      { marginLeft: screenWidth > 900 ? (isCollapsed ? 70 : 250) : 0 },\n    ]}>\n      {isLoadingConversations ? (\n        <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n          <ActivityIndicator size=\"large\" color={theme.colors.primary} />\n          <Text style={{ marginTop: 16, color: theme.colors.placeholder }}>Loading conversations...</Text>\n        </View>\n      ) : safeFilteredConversations.length > 0 ? (\n        <View style={styles.contentContainer}>\n          {screenWidth <= 900 ? (\n            selectedConversation ? (\n              <View style={styles.mobileMessageView}>\n                {renderMobileHeader()}\n                {renderMessageSection()}\n              </View>\n            ) : (\n              renderConversationList()\n            )\n          ) : (\n            <>\n              {renderConversationList()}\n              {renderMessageSection()}\n            </>\n          )}\n        </View>\n      ) : (\n        renderEmptyState()\n      )}\n      \n      {/* Loading overlay for draft creation */}\n      {isLoading && (\n        <View style={{\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          backgroundColor: 'rgba(0,0,0,0.4)',\n          justifyContent: 'center',\n          alignItems: 'center',\n          zIndex: 1000\n        }}>\n          <View style={{\n            backgroundColor: theme.colors.surface,\n            borderRadius: 12,\n            padding: 24,\n            alignItems: 'center',\n            shadowColor: '#000',\n            shadowOffset: { width: 0, height: 2 },\n            shadowOpacity: 0.25,\n            shadowRadius: 3.84,\n            elevation: 5,\n          }}>\n            <ActivityIndicator size=\"large\" color={theme.colors.primary} />\n            <Text style={{ marginTop: 16, color: theme.colors.text, fontFamily: theme.fonts.regular.fontFamily }}>\n              Creating draft from booking...\n            </Text>\n          </View>\n        </View>\n      )}\n      \n      {/* <RequestBookingModal\n        visible={showRequestModal}\n        onClose={() => setShowRequestModal(false)}\n        onSubmit={handleBookingRequest}\n        conversationId={selectedConversation}\n      /> */}\n\n      <BookingStepModal\n        visible={showBookingStepModal}\n        onClose={() => {\n          setShowBookingStepModal(false);\n          setCurrentBookingId(null);\n          \n          // Refresh message data when modal is closed to get latest draft status\n          if (selectedConversation) {\n            debugLog('MBA2349f87g9qbh2nfv9cg: Refreshing message data after closing BookingStepModal');\n            fetchMessages(selectedConversation, 1);\n          }\n        }}\n        navigation={navigation}\n        bookingId={currentBookingId}\n        onComplete={(bookingData) => {\n          debugLog('MBA6428: Booking completed:', bookingData);\n          debugLog('MBA6428: New booking message:', bookingData.message);\n          debugLog('MBA6428: Message metadata:', bookingData.message?.metadata);\n          debugLog('MBA6428: Is this an update?', bookingData.isUpdate);\n          \n          // Handle error case\n          if (bookingData.error) {\n            Alert.alert(\n              'Error',\n              bookingData.errorMessage || 'Failed to process booking. Please try again.'\n            );\n            \n            // Close the modal and clean up\n            setShowBookingStepModal(false);\n            setCurrentBookingId(null);\n            \n            // Refresh message data to get latest draft status\n            if (selectedConversation) {\n              debugLog('MBA2349f87g9qbh2nfv9cg: Refreshing message data after booking error');\n              fetchMessages(selectedConversation, 1);\n            }\n            \n            return;\n          }\n          \n          // Add the new booking message to the messages list\n          if (bookingData.message) {\n            debugLog('MBA2349f87g9qbh2nfv9cg: Adding booking completion message to list', {\n              messageId: bookingData.message.message_id,\n              currentMessageCount: messages.length\n            });\n            \n            setMessages(prevMessages => {\n              const updatedMessages = [bookingData.message, ...prevMessages];\n              debugLog('MBA2349f87g9qbh2nfv9cg: Booking message added to list', {\n                oldLength: prevMessages.length,\n                newLength: updatedMessages.length\n              });\n              return updatedMessages;\n            });\n            \n            // Update conversation's last message with appropriate text\n            const lastMessageText = bookingData.isUpdate \n              ? \"Updated Booking Request\" \n              : \"Approval Request\";\n              \n            setConversations(prev => prev.map(conv => \n              conv.conversation_id === selectedConversation \n                ? {\n                    ...conv,\n                    last_message: lastMessageText,\n                    last_message_time: bookingData.message.timestamp\n                  }\n                : conv\n            ));\n          }\n          \n          // Update draft state since the draft is deleted after booking creation\n          setHasDraft(false);\n          setDraftData(null);\n          \n          // Close the modal and clean up\n          setShowBookingStepModal(false);\n          setCurrentBookingId(null);\n          \n          // Refresh message data to get latest draft status\n          if (selectedConversation) {\n            debugLog('MBA2349f87g9qbh2nfv9cg: Refreshing message data after successful booking completion');\n            fetchMessages(selectedConversation, 1);\n          }\n\n          // Show success message to the user\n          const successMessage = bookingData.isUpdate\n            ? \"Booking update request sent successfully!\"\n            : \"Booking request sent successfully!\";\n          \n          Alert.alert(\"Success\", successMessage);\n        }}\n      />\n\n      <ClientPetsModal\n        visible={showClientPetsModal}\n        onClose={() => setShowClientPetsModal(false)}\n        conversation={{\n          id: selectedConversationData?.conversation_id\n        }}\n        otherUserProfilePhoto={selectedConversationData?.profile_picture}\n        otherUserName={selectedConversationData?.other_user_name}\n        onCreateBooking={handleCreateBooking}\n      />\n\n      <DraftConfirmationModal\n        visible={showDraftConfirmModal}\n        onClose={() => setShowDraftConfirmModal(false)}\n        onContinueExisting={handleContinueExisting}\n        onCreateNew={handleCreateNew}\n      />\n      \n      {/* Image Viewer Modal */}\n      <ImageViewer\n        visible={isImageViewerVisible}\n        imageUrl={selectedImageUrl}\n        onClose={closeImageViewer}\n      />\n    </View>\n  );\n};\n\nexport default MessageHistory;\n\n","import { StyleSheet, Platform } from 'react-native';\nimport { theme } from '../../styles/theme';\n\nexport const createMessageStyles = (screenWidth, isCollapsed = false) => StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n    paddingTop: 0,\n    paddingRight: 0,\n    paddingLeft: 0,\n    height: '100%',\n    overflow: 'hidden',\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    ...(Platform.OS === 'web' && screenWidth <= 900 ? {\n      display: 'flex',\n      flexDirection: 'column',\n    } : {}),\n  },\n  headerContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: theme.colors.primary,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  filterButton: {\n    marginLeft: 'auto',\n  },\n  contentContainer: {\n    flex: 1,\n    flexDirection: 'row',\n    justifyContent: 'center',\n    maxWidth: screenWidth > 900 ? '100%' : 900,\n    alignSelf: 'center',\n    width: '100%',\n    overflow: 'hidden',\n    height: '100%',\n    display: 'flex',\n    marginTop: 0,\n    paddingTop: 0,\n  },\n  mainSection: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    maxWidth: Platform.OS === 'web' ? \n      (screenWidth <= 900 ? '100%' : '70%') : \n      '100%',\n    alignSelf: screenWidth <= 900 ? 'stretch' : 'flex-start',\n    width: screenWidth <= 900 ? '100%' : 'auto',\n    height: '100%',\n    marginTop: 0,\n    paddingTop: 0,\n  },\n  conversationListContainer: {\n    width: screenWidth <= 900 ? '100%' : '30%',\n    maxWidth: screenWidth < 900 ? '' : 600,\n    backgroundColor: theme.colors.surfaceContrast,\n    overflow: 'auto',\n  },\n  conversationItem: {\n    padding: 16,\n    maxWidth: screenWidth < 900 ? '' : 600,\n    width: '100%',\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  conversationProfilePhoto: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    marginRight: 12,\n  },\n  conversationProfilePhotoFallback: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    marginRight: 12,\n    backgroundColor: theme.colors.background,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  conversationContent: {\n    flex: 1,\n  },\n  selectedConversation: {\n    backgroundColor: theme.colors.primary + '20',\n    borderLeftWidth: 3,\n    borderLeftColor: theme.colors.primary,\n  },\n  conversationName: {\n    fontSize: 16,\n    fontFamily: theme.fonts.header.fontFamily,\n    flex: 1,\n  },\n  messageSection: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    overflow: 'hidden',\n    paddingHorizontal: 5,\n    backgroundColor: theme.colors.surface,\n    paddingBottom: 0,\n    position: 'relative',\n  },\n  messageHeader: {\n    padding: 12,\n    backgroundColor: theme.colors.surfaceContrast,\n    width: '100%',\n    flexDirection: 'row',\n    alignItems: 'center',\n    zIndex: 1,\n    ...(Platform.OS === 'web' && screenWidth <= 900 ? {\n      position: 'sticky',\n      top: 0,\n    } : {}),\n  },\n  profilePhoto: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    marginRight: 12,\n  },\n  messageHeaderName: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  // Mobile header profile photo styles\n  mobileProfilePhotoContainer: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginBottom: 8,\n  },\n  mobileProfilePhoto: {\n    width: 60,\n    height: 60,\n    borderRadius: 30,\n  },\n  mobileProfilePhotoFallback: {\n    width: 60,\n    height: 60,\n    borderRadius: 30,\n    backgroundColor: theme.colors.background,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  messagesContainer: {\n    flex: 1,\n    overflow: 'auto',\n    width: '100%',\n    ...(Platform.OS === 'web' && screenWidth <= 900 ? {\n      WebkitOverflowScrolling: 'touch', // Smooth scrolling for iOS\n    } : {}),\n  },\n  messageList: {\n    width: '100%',\n    paddingBottom: 16,\n  },\n  fullWidthMessage: {\n    width: '100%',\n    alignSelf: 'center',\n    paddingHorizontal: 8,\n  },\n  textInput: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n    borderRadius: 20,\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    marginRight: 8,\n    marginLeft: 8,\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  sendButton: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 8,\n    paddingHorizontal: 0,\n    paddingVertical: 0,\n  },\n  sendButtonMobile: {\n    width: 32,\n    height: 32,\n    borderRadius: 16,\n    paddingHorizontal: 0,\n    paddingVertical: 0,\n    marginHorizontal: 0,\n    minWidth: 0,\n  },\n  sendButtonActive: {\n    backgroundColor: theme.colors.primary,\n  },\n  sendButtonInactive: {\n    backgroundColor: theme.colors.border,\n  },\n  webInput: {\n    flex: 1,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 20,\n    paddingHorizontal: 20,\n    paddingVertical: 8,\n    marginHorizontal: 8,\n    fontSize: 18,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    maxHeight: 120,\n    minHeight: 20,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  input: {\n    flex: 1,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 20,\n    paddingHorizontal: 20,\n    paddingVertical: 8,\n    marginHorizontal: 8,\n    fontSize: 18,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    minHeight: 20,\n  },\n  inputSection: {\n    width: '100%',\n    padding: 8,\n    backgroundColor: theme.colors.surfaceContrast,\n    zIndex: 10,\n    ...(Platform.OS === 'web' && screenWidth <= 900 ? {\n      position: 'relative', // Changed from fixed to relative\n      bottom: 0,\n      left: 0,\n      right: 0,\n      paddingTop: 8,\n      paddingBottom: 8,\n      shadowColor: '#000',\n      shadowOffset: { width: 0, height: -1 },\n      shadowOpacity: 0.1,\n      shadowRadius: 3,\n      elevation: 3,\n    } : {}),\n  },\n  inputContainerOuter: {\n    width: '100%',\n    flexDirection: 'column',\n  },\n  inputContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    width: '100%',\n  },\n  attachButtonContainer: {\n    marginRight: 8,\n  },\n  attachButton: {\n    padding: 8,\n    backgroundColor: theme.colors.surfaceContrast,\n    borderRadius: 20,\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  inputInnerContainer: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.surfaceContrast,\n    borderRadius: 20,\n    marginRight: 0,\n  },\n  dropdownMenu: {\n    position: 'absolute',\n    bottom: '100%',\n    left: 0,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: -2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5,\n    marginBottom: 8,\n    minWidth: 150,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  dropdownItem: {\n    padding: 12,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  dropdownText: {\n    color: theme.colors.text,\n    fontSize: 14,\n    marginLeft: 8,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  messageCard: {\n    // marginVertical: 4,\n    maxWidth: screenWidth > 900 ? '40%' : '75%',\n    borderRadius: 12,\n    overflow: 'hidden',\n  },\n  messageContent: {\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n  },\n  sentMessage: {\n    alignSelf: 'flex-end',\n    backgroundColor: theme.colors.primary,\n  },\n  receivedMessage: {\n    alignSelf: 'flex-start',\n    backgroundColor: theme.colors.receivedMessage,\n  },\n  messageText: {\n    fontSize: 20,\n    lineHeight: 20,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  sentMessageContainer: {\n    alignItems: 'flex-end',\n    // marginBottom: 4,\n  },\n  receivedMessageContainer: {\n    alignItems: 'flex-start',\n    marginBottom: 4,\n  },\n  sentMessageText: {\n    color: theme.colors.whiteText,\n  },\n  receivedMessageText: {\n    color: theme.colors.text,\n  },\n  // Timestamp styles\n  messageTimestampContainer: {\n    paddingHorizontal: 4,\n    marginBottom: 2,\n    marginTop: 8,\n  },\n  sentMessageTimestamp: {\n    alignSelf: 'flex-end',\n    marginRight: 4,\n    marginBottom: 2,\n  },\n  receivedMessageTimestamp: {\n    alignSelf: 'flex-start',\n    marginLeft: 4,\n    marginBottom: 2,\n  },\n  messageTimestampText: {\n    fontSize: 12,\n    color: theme.colors.placeholder,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  searchContainer: {\n    padding: 16,\n    backgroundColor: theme.colors.surfaceContrast,\n  },\n  searchInputContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.surface,\n    borderRadius: 20,\n    paddingHorizontal: 12,\n    marginVertical: 6,\n    height: 40,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  searchIcon: {\n    marginRight: 8,\n  },\n  clearButton: {\n    padding: 4,\n  },\n  searchInput: {\n    flex: 1,\n    height: '100%',\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    ...(Platform.OS === 'web' && {\n      WebkitTapHighlightColor: 'transparent',\n      WebkitAppearance: 'none',\n    }),\n  },\n  conversationHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 6,\n    width: '100%',\n  },\n  conversationTime: {\n    fontSize: 12,\n    color: theme.colors.placeholder,\n  },\n  conversationLastMessageContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    width: '100%',\n    marginBottom: 6,\n  },\n  conversationLastMessage: {\n    fontSize: 14,\n    color: theme.colors.placeholder,\n    flex: 1,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  unreadMessage: {\n    color: theme.colors.text,\n    fontWeight: 'bold',\n  },\n  bookingStatusContainer: {\n    backgroundColor: theme.colors.primary + '20',\n    padding: 4,\n    borderRadius: 4,\n    alignSelf: 'flex-start',\n    marginTop: 2,\n  },\n  bookingStatus: {\n    fontSize: 12,\n    color: theme.colors.primary,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  activeConversationText: {\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  unreadBadge: {\n    backgroundColor: theme.colors.error,\n    borderRadius: 10,\n    minWidth: 18,\n    height: 18,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 4,\n    marginLeft: 8,\n    alignSelf: 'flex-start',\n  },\n  unreadBadgeText: {\n    color: 'white',\n    fontSize: 11,\n    fontWeight: 'bold',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  mobileHeader: {\n    width: '100%',\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n    position: 'sticky',\n    top: 0,\n    zIndex: 10,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.1,\n    shadowRadius: 2,\n    elevation: 3,\n    backgroundColor: theme.colors.surfaceContrast,\n    marginTop: 0,\n    paddingTop: 0,\n  },\n  mobileHeaderContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    position: 'relative',\n    paddingVertical: 16,\n    paddingHorizontal: 8,\n    width: '100%',\n    minHeight: 60,\n  },\n  mobileHeaderName: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: theme.colors.text,\n    textAlign: 'center',\n    fontFamily: theme.fonts.header.fontFamily,\n    flexWrap: 'wrap',\n  },\n  mobileHeaderNameContainer: {\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    flexWrap: 'wrap',\n    paddingHorizontal: 30, // Add padding to prevent overlap with back button\n  },\n  backArrow: {\n    position: 'absolute',\n    left: 16,\n    zIndex: 10,\n    padding: 8,\n  },\n  editDraftButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.surface,\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 16,\n    marginLeft: 'auto',\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n  },\n  editDraftText: {\n    marginLeft: 4,\n    color: theme.colors.primary,\n    fontSize: 14,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  mobileEditDraftButton: {\n    marginRight: 10,\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 12,\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n    backgroundColor: theme.colors.surface,\n    minWidth: 55,\n    alignSelf: 'flex-start',\n  },\n  messageHeaderContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  headerDropdownMenu: {\n    position: 'absolute',\n    top: '100%',\n    right: 16,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5,\n    marginTop: 4,\n    minWidth: 180,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    zIndex: 1000,\n  },\n  headerDropdownItem: {\n    padding: 12,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  headerDropdownText: {\n    color: theme.colors.text,\n    fontSize: 14,\n    marginLeft: 8,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  createBookingContainer: {\n    position: 'absolute',\n    top: 8,\n    left: 0,\n    right: 0,\n    paddingHorizontal: 16,\n    alignItems: 'center',\n    zIndex: 10,\n    pointerEvents: 'box-none',\n  },\n  createBookingHangingButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.surface,\n    paddingHorizontal: screenWidth <= 600 ? 12 : 16,\n    paddingVertical: screenWidth <= 600 ? 8 : 10,\n    borderRadius: 20,\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n    elevation: 3,\n    width: '50%',\n    justifyContent: 'center',\n  },\n  createBookingHangingText: {\n    marginLeft: 8,\n    color: theme.colors.primary,\n    fontSize: screenWidth <= 600 ? 14 : 16,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    marginTop: 12,\n    color: theme.colors.placeholder,\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  emptyText: {\n    padding: 16,\n    color: theme.colors.placeholder,\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n    textAlign: 'center',\n  },\n  loadingMore: {\n    padding: 16,\n  },\n  mobileMessageView: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n    marginTop: 0,\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n  },\n  mobileContainer: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n  },\n      // Image handling styles for MessageInput\n    selectedImagesWrapper: {\n      width: '100%',\n      marginBottom: 8,\n      marginTop: 4,\n      borderBottomWidth: 1,\n      borderBottomColor: '#ECECEC',\n      paddingBottom: 8,\n    },\n    selectedImagesScrollView: {\n      width: '100%',\n      maxHeight: 100,\n    },\n    selectedImagesContainer: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      paddingVertical: 4,\n    },\n    selectedImageContainer: {\n      position: 'relative',\n      marginRight: 8,\n      borderRadius: 8,\n      overflow: 'hidden',\n      borderWidth: 1,\n      borderColor: '#ECECEC',\n    },\n    selectedImagePreview: {\n      width: 80,\n      height: 80,\n      borderRadius: 8,\n    },\n    removeImageButton: {\n      position: 'absolute',\n      top: 4,\n      right: 4,\n      backgroundColor: 'rgba(255, 255, 255, 0.8)',\n      borderRadius: 12,\n      width: 24,\n      height: 24,\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n    uploadingOverlay: {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      backgroundColor: 'rgba(0, 0, 0, 0.3)',\n      alignItems: 'center',\n      justifyContent: 'center',\n    },\n  // Styles for message images in MessageList\n  messageImage: {\n    width: 250,\n    height: 250,\n    borderRadius: 8,\n    // marginVertical: 4,\n    resizeMode: 'cover',\n  },\n  messageImagesContainer: {\n    width: '100%',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginVertical: 8,\n  },\n}); ","import { useState } from 'react';\nimport { debugLog } from '../../context/AuthContext';\n\n/**\n * Custom hook to manage image viewer state and handlers\n */\nexport const useImageViewer = () => {\n  const [isImageViewerVisible, setIsImageViewerVisible] = useState(false);\n  const [selectedImageUrl, setSelectedImageUrl] = useState(null);\n\n  /**\n   * Handle image click to open the fullscreen viewer\n   * @param {string} imageUrl - URL of the image to display\n   */\n  const handleImagePress = (imageUrl) => {\n    debugLog('MBA7654: Image pressed', { imageUrl });\n    \n    if (!imageUrl) {\n      debugLog('MBA7654: No image URL provided, cannot open viewer');\n      return;\n    }\n    \n    setSelectedImageUrl(imageUrl);\n    setIsImageViewerVisible(true);\n  };\n\n  /**\n   * Close the image viewer\n   */\n  const closeImageViewer = () => {\n    debugLog('MBA7654: Closing image viewer');\n    setIsImageViewerVisible(false);\n  };\n\n  return {\n    isImageViewerVisible,\n    selectedImageUrl,\n    handleImagePress,\n    closeImageViewer\n  };\n}; ","// WebSocket utilities - centralized, type-safe WebSocket logic\nimport { useEffect, useCallback, useState, useRef } from 'react';\nimport { Platform } from 'react-native';\nimport { getStorage, debugLog } from '../../context/AuthContext';\nimport type { WebSocketMessage } from './types';\n\ninterface WebSocketManager {\n  isConnected: boolean;\n  connect: (token: string) => void;\n  disconnect: () => void;\n  sendMessage: (message: any) => void;\n  registerHandler: (type: string, callback: (data: any) => void, id: string) => () => void;\n  unregisterHandler: (type: string, id: string) => void;\n}\n\nclass WebSocketManagerImpl implements WebSocketManager {\n  private socket: WebSocket | null = null;\n  private handlers: Map<string, Map<string, (data: any) => void>> = new Map();\n  private reconnectAttempts = 0;\n  private maxReconnectAttempts = 5;\n  private reconnectDelay = 1000;\n  private heartbeatInterval: any = null;\n  public isConnected = false;\n\n  connect(token: string): void {\n    try {\n      if (this.socket && (this.socket.readyState === WebSocket.CONNECTING || this.socket.readyState === WebSocket.OPEN)) {\n        debugLog('WebSocketUtils: Already connected or connecting');\n        return;\n      }\n\n      debugLog('WebSocketUtils: Connecting to WebSocket');\n      \n      // Platform-specific WebSocket URL construction\n      let wsUrl: string;\n      \n      if (Platform.OS === 'web') {\n        // Web platform\n        const protocol = window?.location?.protocol === 'https:' ? 'wss:' : 'ws:';\n        const host = window?.location?.host || 'localhost:8081';\n        wsUrl = `${protocol}//${host}/ws/?token=${token}`;\n      } else {\n        // Mobile platforms - use development server\n        wsUrl = `ws://10.0.0.169:8000/ws/?token=${token}`;\n      }\n      \n      this.socket = new WebSocket(wsUrl);\n\n      this.socket.onopen = () => {\n        debugLog('WebSocketUtils: Connected to WebSocket');\n        this.isConnected = true;\n        this.reconnectAttempts = 0;\n        this.startHeartbeat();\n      };\n\n      this.socket.onmessage = (event) => {\n        try {\n          const message: WebSocketMessage = JSON.parse(event.data);\n          this.handleMessage(message);\n        } catch (error) {\n          debugLog('WebSocketUtils: Error parsing message:', error);\n        }\n      };\n\n      this.socket.onclose = () => {\n        debugLog('WebSocketUtils: WebSocket closed');\n        this.isConnected = false;\n        this.stopHeartbeat();\n        this.attemptReconnect(token);\n      };\n\n      this.socket.onerror = (error) => {\n        debugLog('WebSocketUtils: WebSocket error:', error);\n        this.isConnected = false;\n      };\n\n    } catch (error) {\n      debugLog('WebSocketUtils: Error connecting to WebSocket:', error);\n    }\n  }\n\n  disconnect(): void {\n    debugLog('WebSocketUtils: Disconnecting from WebSocket');\n    this.isConnected = false;\n    this.stopHeartbeat();\n    \n    if (this.socket) {\n      this.socket.close();\n      this.socket = null;\n    }\n    \n    this.handlers.clear();\n  }\n\n  sendMessage(message: any): void {\n    if (this.socket && this.socket.readyState === WebSocket.OPEN) {\n      this.socket.send(JSON.stringify(message));\n    } else {\n      debugLog('WebSocketUtils: Cannot send message - WebSocket not connected');\n    }\n  }\n\n  registerHandler(type: string, callback: (data: any) => void, id: string): () => void {\n    if (!this.handlers.has(type)) {\n      this.handlers.set(type, new Map());\n    }\n    \n    this.handlers.get(type)!.set(id, callback);\n    debugLog('WebSocketUtils: Registered handler', { type, id });\n    \n    // Return unregister function\n    return () => this.unregisterHandler(type, id);\n  }\n\n  unregisterHandler(type: string, id: string): void {\n    const typeHandlers = this.handlers.get(type);\n    if (typeHandlers) {\n      typeHandlers.delete(id);\n      if (typeHandlers.size === 0) {\n        this.handlers.delete(type);\n      }\n    }\n    debugLog('WebSocketUtils: Unregistered handler', { type, id });\n  }\n\n  private handleMessage(message: WebSocketMessage): void {\n    const { type, data } = message;\n    const typeHandlers = this.handlers.get(type);\n    \n    if (typeHandlers) {\n      typeHandlers.forEach((callback) => {\n        try {\n          callback(data);\n        } catch (error) {\n          debugLog('WebSocketUtils: Error in message handler:', error);\n        }\n      });\n    }\n  }\n\n  private attemptReconnect(token: string): void {\n    if (this.reconnectAttempts < this.maxReconnectAttempts) {\n      this.reconnectAttempts++;\n      const delay = this.reconnectDelay * Math.pow(2, this.reconnectAttempts - 1);\n      \n      debugLog('WebSocketUtils: Attempting reconnect', {\n        attempt: this.reconnectAttempts,\n        delay\n      });\n      \n      setTimeout(() => {\n        this.connect(token);\n      }, delay);\n    } else {\n      debugLog('WebSocketUtils: Max reconnection attempts reached');\n    }\n  }\n\n  private startHeartbeat(): void {\n    this.heartbeatInterval = setInterval(() => {\n      if (this.socket && this.socket.readyState === WebSocket.OPEN) {\n        this.sendMessage({ type: 'ping' });\n      }\n    }, 30000); // Send ping every 30 seconds\n  }\n\n  private stopHeartbeat(): void {\n    if (this.heartbeatInterval) {\n      clearInterval(this.heartbeatInterval);\n      this.heartbeatInterval = null;\n    }\n  }\n}\n\n// Singleton WebSocket manager\nconst websocketManager = new WebSocketManagerImpl();\n\n/**\n * Custom hook for using WebSocket in React components\n */\nexport const useWebSocket = (options: {\n  onMessage?: (type: string, data: any) => void;\n  messageTypes?: string[];\n  autoConnect?: boolean;\n} = {}) => {\n  const { onMessage, messageTypes = [], autoConnect = true } = options;\n  const [isConnected, setIsConnected] = useState(websocketManager.isConnected);\n  const handlerIdRef = useRef(Math.random().toString(36).substr(2, 9));\n  const unregisterFunctionsRef = useRef<(() => void)[]>([]);\n\n  // Initialize connection\n  useEffect(() => {\n    if (autoConnect) {\n      const initConnection = async () => {\n        try {\n          const token = await getStorage('userToken');\n          if (token) {\n            websocketManager.connect(token);\n          }\n        } catch (error) {\n          debugLog('useWebSocket: Error getting token:', error);\n        }\n      };\n      \n      initConnection();\n    }\n\n    return () => {\n      // Clean up handlers on unmount\n      unregisterFunctionsRef.current.forEach(unregister => unregister());\n    };\n  }, [autoConnect]);\n\n  // Register message handlers\n  useEffect(() => {\n    if (onMessage) {\n      const handlerId = handlerIdRef.current;\n      \n      if (messageTypes.length > 0) {\n        // Register for specific message types\n        messageTypes.forEach(type => {\n          const unregister = websocketManager.registerHandler(\n            type,\n            (data) => onMessage(type, data),\n            `${handlerId}-${type}`\n          );\n          unregisterFunctionsRef.current.push(unregister);\n        });\n      } else {\n        // Register for all message types (if needed)\n        const unregister = websocketManager.registerHandler(\n          '*',\n          (data) => onMessage('*', data),\n          `${handlerId}-all`\n        );\n        unregisterFunctionsRef.current.push(unregister);\n      }\n    }\n  }, [onMessage, messageTypes]);\n\n  // Monitor connection status\n  useEffect(() => {\n    const checkConnection = () => {\n      setIsConnected(websocketManager.isConnected);\n    };\n\n    const interval = setInterval(checkConnection, 1000);\n    return () => clearInterval(interval);\n  }, []);\n\n  const sendMessage = useCallback((message: any) => {\n    websocketManager.sendMessage(message);\n  }, []);\n\n  const registerHandler = useCallback((type: string, callback: (data: any) => void, id?: string) => {\n    const handlerId = id || `${handlerIdRef.current}-${type}-${Date.now()}`;\n    return websocketManager.registerHandler(type, callback, handlerId);\n  }, []);\n\n  const disconnect = useCallback(() => {\n    websocketManager.disconnect();\n  }, []);\n\n  return {\n    isConnected,\n    sendMessage,\n    registerHandler,\n    disconnect\n  };\n};\n\nexport default websocketManager;","// Mobile message time utilities - handles timestamps and date separation for mobile messaging\nimport { debugLog } from '../../context/AuthContext';\n\n// Cache for formatted dates to avoid repeated calculations\nconst formatCache = {\n  times: new Map(),\n  dates: new Map()\n};\n\n// Clear cache when it gets too large\nconst clearCacheIfNeeded = () => {\n  if (formatCache.times.size > 1000) {\n    formatCache.times.clear();\n  }\n  if (formatCache.dates.size > 100) {\n    formatCache.dates.clear();\n  }\n};\n\n/**\n * Formats a message timestamp to display in a message bubble\n * \n * @param {string} timestamp - The message timestamp in UTC format\n * @param {string} userTimezone - The user's timezone (optional, defaults to local)\n * @returns {string} - Formatted time (e.g., \"7:13 PM\")\n */\nexport const formatMessageTime = (timestamp: string, userTimezone?: string): string => {\n  try {\n    if (!timestamp) return '';\n    \n    // Use default timezone if userTimezone is null/undefined\n    const targetTimezone = userTimezone || 'US/Mountain';\n    \n    // Check cache first\n    const cacheKey = `${timestamp}:${targetTimezone}`;\n    if (formatCache.times.has(cacheKey)) {\n      return formatCache.times.get(cacheKey) || '';\n    }\n    \n    clearCacheIfNeeded();\n    \n    // Simple date formatting without external dependencies\n    let result: string;\n    try {\n      const date = new Date(timestamp);\n      if (isNaN(date.getTime())) {\n        return '';\n      }\n      result = date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit', hour12: true });\n    } catch (error) {\n      debugLog('MobileTimeUtils: Error parsing timestamp:', error);\n      return '';\n    }\n    \n    // Cache the result\n    formatCache.times.set(cacheKey, result);\n    return result;\n  } catch (error) {\n    debugLog('MobileTimeUtils: Error formatting message time:', error);\n    return '';\n  }\n};\n\n/**\n * Determines if a timestamp should be shown for a message\n * based on the time difference from the previous message\n * \n * @param {string} currentTimestamp - Current message timestamp\n * @param {string|null} previousTimestamp - Previous message timestamp\n * @param {number} thresholdMinutes - Minutes threshold for showing timestamp (default 30)\n * @returns {boolean} - Whether to show the timestamp\n */\nexport const shouldShowTimestamp = (\n  currentTimestamp: string, \n  previousTimestamp: string | null, \n  thresholdMinutes: number = 30\n): boolean => {\n  try {\n    if (!currentTimestamp) return false;\n    if (!previousTimestamp) return true; // Always show for first message\n    \n    const current = new Date(currentTimestamp);\n    const previous = new Date(previousTimestamp);\n    \n    if (isNaN(current.getTime()) || isNaN(previous.getTime())) {\n      return true; // Show if we can't parse dates\n    }\n    \n    const diffMinutes = (current.getTime() - previous.getTime()) / (1000 * 60);\n    return diffMinutes >= thresholdMinutes;\n  } catch (error) {\n    debugLog('MobileTimeUtils: Error checking timestamp visibility:', error);\n    return true; // Show on error to be safe\n  }\n};\n\n/**\n * Determines if a date separator should be shown between messages\n * \n * @param {string} currentTimestamp - Current message timestamp\n * @param {string|null} previousTimestamp - Previous message timestamp\n * @returns {boolean} - Whether to show a date separator\n */\nexport const shouldShowDateSeparator = (\n  currentTimestamp: string, \n  previousTimestamp: string | null\n): boolean => {\n  try {\n    if (!currentTimestamp) return false;\n    if (!previousTimestamp) return true; // Always show for first message\n    \n    const current = new Date(currentTimestamp);\n    const previous = new Date(previousTimestamp);\n    \n    if (isNaN(current.getTime()) || isNaN(previous.getTime())) {\n      return true; // Show if we can't parse dates\n    }\n    \n    // Show separator if messages are on different days\n    const currentDay = current.toDateString();\n    const previousDay = previous.toDateString();\n    return currentDay !== previousDay;\n  } catch (error) {\n    debugLog('MobileTimeUtils: Error checking date separator visibility:', error);\n    return false; // Don't show on error\n  }\n};\n\n/**\n * Formats a date for use in date separators\n * \n * @param {string} timestamp - The message timestamp\n * @param {string} userTimezone - The user's timezone (optional)\n * @returns {string} - Formatted date (e.g., \"Today\", \"Yesterday\", \"Jan 5\")\n */\nexport const formatDateSeparator = (timestamp: string, userTimezone?: string): string => {\n  try {\n    if (!timestamp) return '';\n    \n    // Check cache first\n    const cacheKey = `date:${timestamp}:${userTimezone || 'local'}`;\n    if (formatCache.dates.has(cacheKey)) {\n      return formatCache.dates.get(cacheKey) || '';\n    }\n    \n    clearCacheIfNeeded();\n    \n    const messageDate = new Date(timestamp);\n    \n    if (isNaN(messageDate.getTime())) {\n      return '';\n    }\n    \n    const now = new Date();\n    const yesterday = new Date(now);\n    yesterday.setDate(yesterday.getDate() - 1);\n    \n    let result: string;\n    \n    // Check if it's today\n    if (messageDate.toDateString() === now.toDateString()) {\n      result = 'Today';\n    } else if (messageDate.toDateString() === yesterday.toDateString()) {\n      result = 'Yesterday';\n    } else if (messageDate.getFullYear() === now.getFullYear()) {\n      // Same year: show \"Jan 5\"\n      result = messageDate.toLocaleDateString([], { month: 'short', day: 'numeric' });\n    } else {\n      // Different year: show \"Jan 5, 2023\"\n      result = messageDate.toLocaleDateString([], { month: 'short', day: 'numeric', year: 'numeric' });\n    }\n    \n    // Cache the result\n    formatCache.dates.set(cacheKey, result);\n    return result;\n  } catch (error) {\n    debugLog('MobileTimeUtils: Error formatting date separator:', error);\n    return '';\n  }\n};\n\n/**\n * Processes messages to determine which ones should show timestamps and date separators\n * \n * @param {Array} messages - Array of message objects with timestamp property\n * @param {string} userTimezone - The user's timezone (optional)\n * @returns {Array} - Messages with added showTimestamp and showDateSeparator properties\n */\nexport const processMessagesForDisplay = (messages: any[], userTimezone?: string): any[] => {\n  if (!Array.isArray(messages) || messages.length === 0) {\n    return [];\n  }\n  \n  return messages.map((message, index) => {\n    const previousMessage = index > 0 ? messages[index - 1] : null;\n    const currentTimestamp = message.timestamp;\n    const previousTimestamp = previousMessage?.timestamp || null;\n    \n    return {\n      ...message,\n      showTimestamp: shouldShowTimestamp(currentTimestamp, previousTimestamp),\n      showDateSeparator: shouldShowDateSeparator(currentTimestamp, previousTimestamp),\n      formattedTime: formatMessageTime(currentTimestamp, userTimezone),\n      formattedDate: shouldShowDateSeparator(currentTimestamp, previousTimestamp) \n        ? formatDateSeparator(currentTimestamp, userTimezone) \n        : null\n    };\n  });\n};","import React from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../../../styles/theme';\nimport { getUnreadCountForRole } from '../../../utils/messages';\n\nconst MobileConversationItem = ({ conversation, onPress, userRole }) => {\n  const formatTimestamp = (timestamp) => {\n    if (!timestamp) return '';\n    \n    try {\n      const date = new Date(timestamp);\n      const now = new Date();\n      const diffInHours = (now - date) / (1000 * 60 * 60);\n      \n      if (diffInHours < 24) {\n        // Show time for today\n        return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n      } else if (diffInHours < 168) {\n        // Show day of week for this week\n        return date.toLocaleDateString([], { weekday: 'short' });\n      } else {\n        // Show date for older messages\n        return date.toLocaleDateString([], { month: 'short', day: 'numeric' });\n      }\n    } catch (error) {\n      return '';\n    }\n  };\n\n  const unreadCount = getUnreadCountForRole(conversation, userRole);\n  const hasUnread = unreadCount > 0;\n\n  return (\n    <TouchableOpacity\n      style={[\n        styles.container,\n        hasUnread && styles.unreadContainer\n      ]}\n      onPress={onPress}\n      activeOpacity={0.7}\n    >\n      {/* Avatar */}\n      <View style={styles.avatarContainer}>\n        <View style={[styles.avatar, hasUnread && styles.unreadAvatar]}>\n          <MaterialCommunityIcons \n            name=\"account\" \n            size={24} \n            color={hasUnread ? theme.colors.whiteText : theme.colors.primary} \n          />\n        </View>\n        {hasUnread && (\n          <View style={styles.unreadDot}>\n            <Text style={styles.unreadDotText}>{unreadCount > 99 ? '99+' : unreadCount}</Text>\n          </View>\n        )}\n      </View>\n\n      {/* Content */}\n      <View style={styles.content}>\n        <View style={styles.header}>\n          <Text style={[\n            styles.name,\n            hasUnread && styles.unreadName\n          ]}>\n            {conversation.other_user_name || 'Unknown User'}\n          </Text>\n          <Text style={styles.timestamp}>\n            {formatTimestamp(conversation.last_message_timestamp)}\n          </Text>\n        </View>\n        \n        <View style={styles.messageRow}>\n          <Text \n            style={[\n              styles.lastMessage,\n              hasUnread && styles.unreadMessage\n            ]}\n            numberOfLines={2}\n          >\n            {conversation.last_message || 'No messages yet'}\n          </Text>\n        </View>\n\n        {/* Status indicators */}\n        <View style={styles.statusRow}>\n          {conversation.has_active_booking && (\n            <View style={styles.statusBadge}>\n              <MaterialCommunityIcons name=\"calendar-check\" size={12} color={theme.colors.success} />\n              <Text style={styles.statusText}>Active Booking</Text>\n            </View>\n          )}\n          {conversation.has_draft && (\n            <View style={[styles.statusBadge, styles.draftBadge]}>\n              <MaterialCommunityIcons name=\"pencil\" size={12} color={theme.colors.warning} />\n              <Text style={styles.statusText}>Draft</Text>\n            </View>\n          )}\n        </View>\n      </View>\n\n      {/* Arrow indicator */}\n      <MaterialCommunityIcons \n        name=\"chevron-right\" \n        size={20} \n        color={theme.colors.placeHolderText} \n      />\n    </TouchableOpacity>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 16,\n    backgroundColor: theme.colors.surfaceContrast,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  unreadContainer: {\n    backgroundColor: theme.colors.surfaceContrast,\n  },\n  avatarContainer: {\n    position: 'relative',\n    marginRight: 12,\n  },\n  avatar: {\n    width: 48,\n    height: 48,\n    borderRadius: 24,\n    backgroundColor: theme.colors.primaryLight,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 2,\n    borderColor: theme.colors.border,\n  },\n  unreadAvatar: {\n    backgroundColor: theme.colors.primary,\n    borderColor: theme.colors.primary,\n  },\n  unreadDot: {\n    position: 'absolute',\n    top: -4,\n    right: -4,\n    backgroundColor: theme.colors.error,\n    borderRadius: 10,\n    minWidth: 20,\n    height: 20,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 2,\n    borderColor: theme.colors.surface,\n  },\n  unreadDotText: {\n    color: theme.colors.whiteText,\n    fontSize: 10,\n    fontWeight: 'bold',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  content: {\n    flex: 1,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 4,\n  },\n  name: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    flex: 1,\n  },\n  unreadName: {\n    fontWeight: 'bold',\n    color: theme.colors.primary,\n  },\n  timestamp: {\n    fontSize: 12,\n    color: theme.colors.placeHolderText,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  messageRow: {\n    marginBottom: 4,\n  },\n  lastMessage: {\n    fontSize: 14,\n    color: theme.colors.placeHolderText,\n    fontFamily: theme.fonts.regular.fontFamily,\n    lineHeight: 18,\n  },\n  unreadMessage: {\n    color: theme.colors.text,\n    fontWeight: '500',\n  },\n  statusRow: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n  statusBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n    paddingHorizontal: 6,\n    paddingVertical: 2,\n    borderRadius: 10,\n    backgroundColor: theme.colors.successLight,\n  },\n  draftBadge: {\n    backgroundColor: theme.colors.warningLight,\n  },\n  statusText: {\n    fontSize: 10,\n    color: theme.colors.text,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default MobileConversationItem;","// Mobile Conversation List - Shows all conversations with nav bar visible\nimport React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  FlatList,\n  TextInput,\n  ActivityIndicator,\n  RefreshControl,\n  SafeAreaView\n} from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../../../styles/theme';\nimport { filterConversations, getUnreadCountForRole } from '../../../utils/messages';\nimport MobileConversationItem from './MobileConversationItem';\n\nconst MobileConversationList = ({\n  conversations,\n  userRole,\n  loading,\n  refreshing,\n  onRefresh,\n  onConversationSelect,\n  navigation\n}) => {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filteredConversations, setFilteredConversations] = useState([]);\n\n  // Filter conversations based on search\n  useEffect(() => {\n    const filtered = filterConversations(conversations, searchQuery);\n    setFilteredConversations(filtered);\n  }, [conversations, searchQuery]);\n\n  // Calculate total unread count\n  const totalUnreadCount = conversations.reduce((total, conversation) => {\n    return total + getUnreadCountForRole(conversation, userRole);\n  }, 0);\n\n  const renderConversationItem = ({ item }) => (\n    <MobileConversationItem\n      conversation={item}\n      userRole={userRole}\n      onPress={() => onConversationSelect(item)}\n    />\n  );\n\n  const renderEmptyState = () => (\n    <View style={styles.emptyContainer}>\n      <MaterialCommunityIcons \n        name=\"message-outline\" \n        size={64} \n        color={theme.colors.placeHolderText} \n      />\n      <Text style={styles.emptyTitle}>\n        {searchQuery.trim() ? 'No conversations found' : 'No Messages Yet'}\n      </Text>\n      <Text style={styles.emptySubtitle}>\n        {searchQuery.trim() \n          ? 'Try adjusting your search terms'\n          : 'Start a conversation to see messages here'\n        }\n      </Text>\n    </View>\n  );\n\n  const renderLoadingState = () => (\n    <View style={styles.loadingContainer}>\n      <ActivityIndicator size=\"large\" color={theme.colors.primary} />\n      <Text style={styles.loadingText}>Loading conversations...</Text>\n    </View>\n  );\n\n  return (\n    <SafeAreaView style={styles.container}>\n      {/* Header */}\n      <View style={styles.header}>\n        <Text style={styles.headerTitle}>Messages</Text>\n        {totalUnreadCount > 0 && (\n          <View style={styles.unreadBadge}>\n            <Text style={styles.unreadText}>\n              {totalUnreadCount > 99 ? '99+' : totalUnreadCount}\n            </Text>\n          </View>\n        )}\n      </View>\n\n      {/* Search Bar */}\n      <View style={styles.searchContainer}>\n        <MaterialCommunityIcons \n          name=\"magnify\" \n          size={20} \n          color={theme.colors.placeHolderText} \n        />\n        <TextInput\n          style={styles.searchInput}\n          placeholder=\"Search conversations...\"\n          value={searchQuery}\n          onChangeText={setSearchQuery}\n          placeholderTextColor={theme.colors.placeHolderText}\n        />\n        {searchQuery.length > 0 && (\n          <MaterialCommunityIcons \n            name=\"close-circle\" \n            size={20} \n            color={theme.colors.placeHolderText}\n            onPress={() => setSearchQuery('')}\n          />\n        )}\n      </View>\n\n      {/* Conversations List */}\n      {loading ? (\n        renderLoadingState()\n      ) : filteredConversations.length === 0 ? (\n        renderEmptyState()\n      ) : (\n        <FlatList\n          data={filteredConversations}\n          renderItem={renderConversationItem}\n          keyExtractor={(item) => item.conversation_id.toString()}\n          refreshControl={\n            <RefreshControl \n              refreshing={refreshing} \n              onRefresh={onRefresh}\n              colors={[theme.colors.primary]}\n              tintColor={theme.colors.primary}\n            />\n          }\n          style={styles.conversationsList}\n          showsVerticalScrollIndicator={false}\n          ItemSeparatorComponent={() => <View style={styles.separator} />}\n        />\n      )}\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.colors.surfaceContrast,\n  },\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 20,\n    paddingVertical: 16,\n    backgroundColor: theme.colors.surfaceContrast,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  headerTitle: {\n    fontSize: 28,\n    fontWeight: 'bold',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  unreadBadge: {\n    backgroundColor: theme.colors.primary,\n    borderRadius: 12,\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    minWidth: 24,\n    alignItems: 'center',\n  },\n  unreadText: {\n    color: theme.colors.whiteText,\n    fontSize: 12,\n    fontWeight: 'bold',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  searchContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.backgroundContrast,\n    marginHorizontal: 16,\n    marginVertical: 12,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderRadius: 25,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  searchInput: {\n    flex: 1,\n    marginLeft: 12,\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  conversationsList: {\n    flex: 1,\n  },\n  separator: {\n    height: 1,\n    backgroundColor: theme.colors.border,\n    marginLeft: 76, // Align with conversation content\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 32,\n  },\n  emptyTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginTop: 16,\n    textAlign: 'center',\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  emptySubtitle: {\n    fontSize: 16,\n    color: theme.colors.placeHolderText,\n    marginTop: 8,\n    textAlign: 'center',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 32,\n  },\n  loadingText: {\n    marginTop: 16,\n    fontSize: 16,\n    color: theme.colors.placeHolderText,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default MobileConversationList;","// Mobile Message Header - Fixed header with dropdown actions\nimport React, { useState } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  Modal,\n  Alert\n} from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../../../styles/theme';\nimport { debugLog } from '../../../context/AuthContext';\nimport ClientPetsModal from '../../ClientPetsModal';\nimport BookingStepModal from '../../BookingStepModal';\n\nconst MobileMessageHeader = ({\n  conversation,\n  userRole,\n  onBack,\n  isConnected,\n  navigation\n}) => {\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [showClientModal, setShowClientModal] = useState(false);\n  const [showBookingModal, setShowBookingModal] = useState(false);\n  const [bookingMode, setBookingMode] = useState('create'); // 'create' or 'edit'\n\n  const handleDropdownAction = (action) => {\n    setShowDropdown(false);\n    \n    switch (action) {\n      case 'view_profile':\n        debugLog('MobileMessageHeader: View profile action');\n        setShowClientModal(true);\n        break;\n      case 'create_booking':\n        debugLog('MobileMessageHeader: Create booking action');\n        setBookingMode('create');\n        setShowBookingModal(true);\n        break;\n      case 'edit_booking':\n        debugLog('MobileMessageHeader: Edit booking action');\n        setBookingMode('edit');\n        setShowBookingModal(true);\n        break;\n      case 'call':\n        debugLog('MobileMessageHeader: Call action (stubbed)');\n        Alert.alert('Call Feature', 'Calling functionality will be available soon!');\n        break;\n      case 'video_call':\n        debugLog('MobileMessageHeader: Video call action (stubbed)');\n        Alert.alert('Video Call Feature', 'Video calling functionality will be available soon!');\n        break;\n      default:\n        debugLog('MobileMessageHeader: Unknown action:', action);\n    }\n  };\n\n  const dropdownActions = [\n    {\n      id: 'view_profile',\n      title: 'View Profile & Pets',\n      icon: 'account-circle',\n      color: theme.colors.primary\n    },\n    {\n      id: 'create_booking',\n      title: 'Create Booking',\n      icon: 'calendar-plus',\n      color: theme.colors.success\n    },\n    ...(conversation.has_active_booking ? [{\n      id: 'edit_booking',\n      title: 'Edit Booking',\n      icon: 'calendar-edit',\n      color: theme.colors.warning\n    }] : []),\n    {\n      id: 'call',\n      title: 'Voice Call',\n      icon: 'phone',\n      color: theme.colors.primary\n    },\n    {\n      id: 'video_call',\n      title: 'Video Call',\n      icon: 'video',\n      color: theme.colors.primary\n    }\n  ];\n\n  const renderDropdownModal = () => (\n    <Modal\n      visible={showDropdown}\n      transparent\n      animationType=\"fade\"\n      onRequestClose={() => setShowDropdown(false)}\n    >\n      <TouchableOpacity \n        style={styles.dropdownOverlay}\n        activeOpacity={1}\n        onPress={() => setShowDropdown(false)}\n      >\n        <View style={styles.dropdownContainer}>\n          <View style={styles.dropdownHeader}>\n            <Text style={styles.dropdownTitle}>Actions</Text>\n            <TouchableOpacity \n              onPress={() => setShowDropdown(false)}\n              style={styles.dropdownCloseButton}\n            >\n              <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.text} />\n            </TouchableOpacity>\n          </View>\n          \n          {dropdownActions.map((action) => (\n            <TouchableOpacity\n              key={action.id}\n              style={styles.dropdownAction}\n              onPress={() => handleDropdownAction(action.id)}\n            >\n              <MaterialCommunityIcons \n                name={action.icon} \n                size={24} \n                color={action.color} \n              />\n              <Text style={styles.dropdownActionText}>{action.title}</Text>\n            </TouchableOpacity>\n          ))}\n        </View>\n      </TouchableOpacity>\n    </Modal>\n  );\n\n  return (\n    <>\n      <View style={styles.header}>\n        {/* Back Button */}\n        <TouchableOpacity onPress={onBack} style={styles.backButton}>\n          <MaterialCommunityIcons name=\"arrow-left\" size={24} color={theme.colors.primary} />\n        </TouchableOpacity>\n\n        {/* Conversation Info */}\n        <View style={styles.conversationInfo}>\n          <Text style={styles.conversationName} numberOfLines={1}>\n            {conversation.other_user_name}\n          </Text>\n          <Text style={styles.connectionStatus}>\n            {isConnected ? 'Online' : 'Connecting...'}\n            {conversation.has_active_booking && ' • Active Booking'}\n          </Text>\n        </View>\n\n        {/* Actions Dropdown */}\n        <TouchableOpacity \n          onPress={() => setShowDropdown(true)}\n          style={styles.actionsButton}\n        >\n          <MaterialCommunityIcons name=\"dots-vertical\" size={24} color={theme.colors.primary} />\n        </TouchableOpacity>\n      </View>\n\n      {/* Dropdown Modal */}\n      {renderDropdownModal()}\n\n      {/* Client Profile Modal */}\n      {showClientModal && (\n        <ClientPetsModal\n          visible={showClientModal}\n          onClose={() => setShowClientModal(false)}\n          conversation={{ id: conversation.conversation_id }}\n          otherUserName={conversation.other_user_name}\n          userRole={userRole}\n        />\n      )}\n\n      {/* Booking Modal */}\n      {showBookingModal && (\n        <BookingStepModal\n          visible={showBookingModal}\n          onClose={() => setShowBookingModal(false)}\n          conversationId={conversation.conversation_id}\n          recipientId={conversation.other_user_id}\n          userRole={userRole}\n          mode={bookingMode}\n          existingBookingId={conversation.active_booking_id}\n        />\n      )}\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: theme.colors.surfaceContrast,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n    // Shadow for iOS\n    // shadowColor: '#000',\n    // shadowOffset: { width: 0, height: 2 },\n    // shadowOpacity: 0.1,\n    // shadowRadius: 4,\n    // Elevation for Android\n    elevation: 4,\n  },\n  backButton: {\n    padding: 8,\n    marginRight: 8,\n  },\n  conversationInfo: {\n    flex: 1,\n    marginRight: 12,\n  },\n  conversationName: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  connectionStatus: {\n    fontSize: 12,\n    color: theme.colors.placeHolderText,\n    marginTop: 2,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  actionsButton: {\n    padding: 8,\n  },\n  dropdownOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  dropdownContainer: {\n    backgroundColor: theme.colors.surfaceContrast,\n    borderRadius: 12,\n    width: '80%',\n    maxWidth: 300,\n    paddingVertical: 16,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 4 },\n    shadowOpacity: 0.3,\n    shadowRadius: 8,\n    elevation: 8,\n  },\n  dropdownHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 20,\n    paddingBottom: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  dropdownTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  dropdownCloseButton: {\n    padding: 4,\n  },\n  dropdownAction: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingHorizontal: 20,\n    paddingVertical: 12,\n    gap: 16,\n  },\n  dropdownActionText: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    flex: 1,\n  },\n});\n\nexport default MobileMessageHeader;","// Mobile Message Input - Fixed input at bottom with image support\nimport React, { useState, useRef } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TextInput,\n  TouchableOpacity,\n  Alert,\n  Platform,\n  Image\n} from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport * as ImagePicker from 'expo-image-picker';\nimport { theme } from '../../../styles/theme';\nimport { debugLog } from '../../../context/AuthContext';\n\nconst MobileMessageInput = ({\n  onSendMessage,\n  conversation,\n  userRole\n}) => {\n  const [messageText, setMessageText] = useState('');\n  const [selectedImages, setSelectedImages] = useState([]);\n  const [sending, setSending] = useState(false);\n  \n  const textInputRef = useRef(null);\n\n  const handleSend = async () => {\n    if ((!messageText.trim() && selectedImages.length === 0) || sending) {\n      return;\n    }\n\n    try {\n      setSending(true);\n      debugLog('MobileMessageInput: Sending message', {\n        text: messageText,\n        images: selectedImages.length,\n        conversationId: conversation.conversation_id\n      });\n\n      await onSendMessage(messageText.trim(), selectedImages);\n      \n      // Clear input after successful send\n      setMessageText('');\n      setSelectedImages([]);\n      textInputRef.current?.blur();\n    } catch (error) {\n      debugLog('MobileMessageInput: Error sending message:', error);\n      Alert.alert('Error', 'Failed to send message');\n    } finally {\n      setSending(false);\n    }\n  };\n\n  const handleImagePicker = () => {\n    if (Platform.OS === 'ios' && Platform.OS !== 'web') {\n      // Use ActionSheetIOS only on native iOS\n      const { ActionSheetIOS } = require('react-native');\n      ActionSheetIOS.showActionSheetWithOptions(\n        {\n          options: ['Cancel', 'Take Photo', 'Choose from Library'],\n          cancelButtonIndex: 0,\n        },\n        (buttonIndex) => {\n          if (buttonIndex === 1) {\n            openCamera();\n          } else if (buttonIndex === 2) {\n            openImageLibrary();\n          }\n        }\n      );\n    } else {\n      // Android and Web - show alert\n      Alert.alert(\n        'Select Image',\n        'Choose how you want to add an image',\n        [\n          { text: 'Cancel', style: 'cancel' },\n          { text: 'Take Photo', onPress: openCamera },\n          { text: 'Choose from Library', onPress: openImageLibrary }\n        ]\n      );\n    }\n  };\n\n  const openCamera = async () => {\n    try {\n      const { status } = await ImagePicker.requestCameraPermissionsAsync();\n      if (status !== 'granted') {\n        Alert.alert('Permission needed', 'Camera permission is required to take photos');\n        return;\n      }\n\n      const result = await ImagePicker.launchCameraAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: [4, 3],\n        quality: 0.8,\n      });\n\n      if (!result.canceled && result.assets?.[0]) {\n        addImage(result.assets[0].uri);\n      }\n    } catch (error) {\n      debugLog('MobileMessageInput: Camera error:', error);\n      Alert.alert('Error', 'Failed to open camera');\n    }\n  };\n\n  const openImageLibrary = async () => {\n    try {\n      const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n      if (status !== 'granted') {\n        Alert.alert('Permission needed', 'Photo library permission is required to select images');\n        return;\n      }\n\n      const result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsEditing: true,\n        aspect: [4, 3],\n        quality: 0.8,\n        allowsMultipleSelection: false, // For simplicity, one image at a time\n      });\n\n      if (!result.canceled && result.assets?.[0]) {\n        addImage(result.assets[0].uri);\n      }\n    } catch (error) {\n      debugLog('MobileMessageInput: Image picker error:', error);\n      Alert.alert('Error', 'Failed to select image');\n    }\n  };\n\n  const addImage = (imageUri) => {\n    if (selectedImages.length >= 3) {\n      Alert.alert('Limit reached', 'You can only send up to 3 images at once');\n      return;\n    }\n    setSelectedImages(prev => [...prev, imageUri]);\n  };\n\n  const removeImage = (index) => {\n    setSelectedImages(prev => prev.filter((_, i) => i !== index));\n  };\n\n  const canSend = (messageText.trim().length > 0 || selectedImages.length > 0) && !sending;\n\n  return (\n    <View style={styles.container}>\n      {/* Image Preview */}\n      {selectedImages.length > 0 && (\n        <View style={styles.imagePreviewContainer}>\n          {selectedImages.map((imageUri, index) => (\n            <View key={index} style={styles.imagePreview}>\n              <Image\n                source={{ uri: imageUri }}\n                style={styles.previewImage}\n                resizeMode=\"cover\"\n              />\n              <TouchableOpacity\n                onPress={() => removeImage(index)}\n                style={styles.removeImageButton}\n              >\n                <MaterialCommunityIcons name=\"close-circle\" size={20} color={theme.colors.whiteText} />\n              </TouchableOpacity>\n            </View>\n          ))}\n        </View>\n      )}\n\n      {/* Input Row */}\n      <View style={styles.inputRow}>\n        {/* Image Button */}\n        <TouchableOpacity\n          onPress={handleImagePicker}\n          style={styles.imageButton}\n          disabled={sending}\n        >\n          <MaterialCommunityIcons \n            name=\"camera\" \n            size={24} \n            color={sending ? theme.colors.placeHolderText : theme.colors.primary} \n          />\n        </TouchableOpacity>\n\n        {/* Text Input */}\n        <View style={styles.textInputContainer}>\n          <TextInput\n            ref={textInputRef}\n            style={styles.textInput}\n            placeholder=\"Type a message...\"\n            placeholderTextColor={theme.colors.placeHolderText}\n            value={messageText}\n            onChangeText={setMessageText}\n            multiline\n            maxLength={2000}\n            editable={!sending}\n            blurOnSubmit={false}\n            returnKeyType=\"default\"\n          />\n        </View>\n\n        {/* Send Button */}\n        <TouchableOpacity\n          onPress={handleSend}\n          style={[\n            styles.sendButton,\n            canSend ? styles.sendButtonActive : styles.sendButtonInactive\n          ]}\n          disabled={!canSend}\n        >\n          <MaterialCommunityIcons \n            name={sending ? \"loading\" : \"send\"} \n            size={20} \n            color={canSend ? theme.colors.whiteText : theme.colors.placeHolderText}\n          />\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: theme.colors.surfaceContrast,\n    borderTopWidth: 1,\n    borderTopColor: theme.colors.border,\n    paddingBottom: 8,\n  },\n  imagePreviewContainer: {\n    flexDirection: 'row',\n    paddingHorizontal: 16,\n    paddingTop: 12,\n    gap: 12,\n  },\n  imagePreview: {\n    position: 'relative',\n    width: 60,\n    height: 60,\n    borderRadius: 8,\n    overflow: 'hidden',\n    marginRight: 8,\n  },\n  previewImage: {\n    width: '100%',\n    height: '100%',\n  },\n  removeImageButton: {\n    position: 'absolute',\n    top: -5,\n    right: -5,\n    backgroundColor: 'rgba(0,0,0,0.6)',\n    borderRadius: 10,\n    width: 20,\n    height: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  inputRow: {\n    flexDirection: 'row',\n    alignItems: 'flex-end',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    gap: 12,\n  },\n  imageButton: {\n    padding: 8,\n    borderRadius: 20,\n    backgroundColor: theme.colors.backgroundContrast,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  textInputContainer: {\n    flex: 1,\n    backgroundColor: theme.colors.backgroundContrast,\n    borderRadius: 20,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    paddingHorizontal: 16,\n    paddingVertical: 8,\n    maxHeight: 100,\n  },\n  textInput: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    textAlignVertical: 'top',\n    minHeight: 20,\n  },\n  sendButton: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  sendButtonActive: {\n    backgroundColor: theme.colors.primary,\n  },\n  sendButtonInactive: {\n    backgroundColor: theme.colors.backgroundContrast,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n});\n\nexport default MobileMessageInput;","import React from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Image } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../../../styles/theme';\nimport { debugLog } from '../../../context/AuthContext';\nimport BookingMessageCard from '../../BookingMessageCard';\n\nconst MobileMessageBubble = ({ message, isOwn, userRole, showTimestamp, onBookingPress }) => {\n  // Safety check for message\n  if (!message) {\n    debugLog('MobileMessageBubble: Received null/undefined message');\n    return <View style={{ height: 1 }} />;\n  }\n  const formatTimestamp = (timestamp) => {\n    if (!timestamp) return '';\n    \n    try {\n      const date = new Date(timestamp);\n      return date.toLocaleTimeString([], { \n        hour: '2-digit', \n        minute: '2-digit',\n        hour12: true \n      });\n    } catch (error) {\n      return '';\n    }\n  };\n\n  const isBookingMessage = message.message_type === 'booking_request' || \n                          message.message_type === 'booking_response' ||\n                          message.booking_data;\n  \n  const isImageMessage = message.message_type === 'image' || \n                         message.image_url || \n                         (message.image_urls && message.image_urls.length > 0);\n\n  const renderBookingContent = () => {\n    if (!isBookingMessage) return null;\n\n    // For booking messages, always use BookingMessageCard component\n    // Create booking data if not available\n    const bookingData = message.booking_data || {\n      booking_id: message.id,\n      service_type: 'Service Request',\n      occurrences: [],\n      cost_summary: {\n        total_client_cost: '0.00',\n        total_sitter_payout: '0.00'\n      }\n    };\n\n    return (\n      <BookingMessageCard\n        type={message.message_type}\n        data={bookingData}\n        isFromMe={isOwn}\n        onPress={() => onBookingPress?.(message)}\n        isProfessional={userRole === 'professional'}\n        bookingStatus={undefined}\n        hasChangeRequest={false}\n        isNewestMessage={false}\n        messageCreatedAt={message.timestamp}\n        hasNewerApprovalRequests={false}\n        isAfterConfirmation={false}\n        isBookingCompleted={false}\n      />\n    );\n  };\n\n  const renderImageContent = () => {\n    if (!isImageMessage) return null;\n\n    // Get images from either image_urls array or single image_url\n    const images = message.image_urls || (message.image_url ? [message.image_url] : []);\n    \n    if (images.length === 0) return null;\n\n    return (\n      <View style={styles.imageMessageContainer}>\n        {/* Images without background/border */}\n        {images.map((imageUrl, index) => (\n          <TouchableOpacity\n            key={index}\n            style={styles.imageWrapper}\n            onPress={() => {\n              // TODO: Open image viewer\n              debugLog('Image pressed:', imageUrl);\n            }}\n          >\n            <Image\n              source={{ uri: imageUrl }}\n              style={styles.messageImage}\n              resizeMode=\"cover\"\n            />\n          </TouchableOpacity>\n        ))}\n        \n        {/* Caption in separate bubble below images */}\n        {message.message && message.message.trim() && (\n          <View style={[\n            styles.captionBubble,\n            isOwn ? styles.ownBubble : styles.otherBubble\n          ]}>\n            <Text style={[\n              styles.messageText,\n              isOwn ? styles.ownMessageText : styles.otherMessageText\n            ]}>\n              {message.message.trim()}\n            </Text>\n          </View>\n        )}\n      </View>\n    );\n  };\n\n  const renderRegularMessage = () => {\n    if (isBookingMessage || isImageMessage) return null;\n\n    return (\n      <Text style={[\n        styles.messageText,\n        isOwn ? styles.ownMessageText : styles.otherMessageText\n      ]}>\n        {message.message}\n      </Text>\n    );\n  };\n\n  // Handle image messages separately - no bubble wrapper\n  if (isImageMessage) {\n    return (\n      <View style={[\n        styles.container,\n        isOwn ? styles.ownContainer : styles.otherContainer\n      ]}>\n        {renderImageContent()}\n        \n        {/* Timestamp for image messages */}\n        {showTimestamp && (\n          <View style={[styles.imageTimestamp, isOwn ? styles.ownImageTimestamp : styles.otherImageTimestamp]}>\n            <Text style={[\n              styles.timestamp,\n              isOwn ? styles.ownTimestamp : styles.otherTimestamp\n            ]}>\n              {formatTimestamp(message.timestamp)}\n            </Text>\n            {isOwn && (\n              <View style={styles.statusIcons}>\n                {message.is_read ? (\n                  <MaterialCommunityIcons \n                    name=\"check-all\" \n                    size={16} \n                    color={theme.colors.success} \n                  />\n                ) : (\n                  <MaterialCommunityIcons \n                    name=\"check\" \n                    size={16} \n                    color={theme.colors.textSecondary} \n                  />\n                )}\n              </View>\n            )}\n          </View>\n        )}\n      </View>\n    );\n  }\n\n  // Handle booking messages separately - no bubble wrapper\n  if (isBookingMessage) {\n    return (\n      <View style={[\n        styles.container,\n        isOwn ? styles.ownContainer : styles.otherContainer\n      ]}>\n        {renderBookingContent()}\n        \n        {/* Timestamp for booking messages */}\n        {showTimestamp && (\n          <View style={[styles.imageTimestamp, isOwn ? styles.ownImageTimestamp : styles.otherImageTimestamp]}>\n            <Text style={[\n              styles.timestamp,\n              isOwn ? styles.ownTimestamp : styles.otherTimestamp\n            ]}>\n              {formatTimestamp(message.timestamp)}\n            </Text>\n            {isOwn && (\n              <View style={styles.statusIcons}>\n                {message.is_read ? (\n                  <MaterialCommunityIcons \n                    name=\"check-all\" \n                    size={16} \n                    color={theme.colors.success} \n                  />\n                ) : (\n                  <MaterialCommunityIcons \n                    name=\"check\" \n                    size={16} \n                    color={theme.colors.textSecondary} \n                  />\n                )}\n              </View>\n            )}\n          </View>\n        )}\n      </View>\n    );\n  }\n\n  // Regular text messages\n  return (\n    <View style={[\n      styles.container,\n      isOwn ? styles.ownContainer : styles.otherContainer\n    ]}>\n      <View style={[\n        styles.bubble,\n        isOwn ? styles.ownBubble : styles.otherBubble\n      ]}>\n        {renderRegularMessage()}\n        \n        {/* Message metadata */}\n        {showTimestamp && (\n          <View style={styles.metadata}>\n            <Text style={[\n              styles.timestamp,\n              isOwn ? styles.ownTimestamp : styles.otherTimestamp\n            ]}>\n              {formatTimestamp(message.timestamp)}\n            </Text>\n          \n            {isOwn && (\n              <View style={styles.statusIcons}>\n                {message.is_read ? (\n                  <MaterialCommunityIcons \n                    name=\"check-all\" \n                    size={16} \n                    color={theme.colors.success} \n                  />\n                ) : (\n                  <MaterialCommunityIcons \n                    name=\"check\" \n                    size={16} \n                    color={theme.colors.textSecondary} \n                  />\n                )}\n              </View>\n            )}\n          </View>\n        )}\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    marginVertical: 4,\n    paddingHorizontal: 8,\n  },\n  ownContainer: {\n    alignItems: 'flex-end',\n  },\n  otherContainer: {\n    alignItems: 'flex-start',\n  },\n  bubble: {\n    maxWidth: '80%',\n    borderRadius: 18,\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.1,\n    shadowRadius: 2,\n    elevation: 2,\n  },\n  ownBubble: {\n    backgroundColor: theme.colors.primary,\n    borderBottomRightRadius: 4,\n  },\n  otherBubble: {\n    backgroundColor: theme.colors.surfaceContrast,\n    borderBottomLeftRadius: 4,\n  },\n  messageText: {\n    fontSize: 16,\n    lineHeight: 20,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  ownMessageText: {\n    color: theme.colors.whiteText,\n  },\n  otherMessageText: {\n    color: theme.colors.text,\n  },\n  metadata: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginTop: 4,\n    gap: 8,\n  },\n  timestamp: {\n    fontSize: 11,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  ownTimestamp: {\n    color: theme.colors.whiteText,\n    opacity: 0.8,\n  },\n  otherTimestamp: {\n    color: theme.colors.placeHolderText,\n  },\n  statusIcons: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  imageMessageContainer: {\n    alignItems: 'flex-end', // Will be overridden by container alignment\n  },\n  imageWrapper: {\n    marginBottom: 4,\n    borderRadius: 8,\n    overflow: 'hidden',\n  },\n  messageImage: {\n    width: 200,\n    height: 150,\n    borderRadius: 8,\n  },\n  captionBubble: {\n    maxWidth: '80%',\n    borderRadius: 18,\n    paddingHorizontal: 12,\n    paddingVertical: 8,\n    marginTop: 4,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 1 },\n    shadowOpacity: 0.1,\n    shadowRadius: 2,\n    elevation: 2,\n  },\n  imageTimestamp: {\n    marginTop: 4,\n    alignItems: 'center',\n  },\n  ownImageTimestamp: {\n    alignItems: 'flex-end',\n  },\n  otherImageTimestamp: {\n    alignItems: 'flex-start',\n  },\n});\n\nexport default MobileMessageBubble;","// Mobile Message List - Signal-like interface with fixed header/input, hidden nav bar\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\nimport {\n  View,\n  StyleSheet,\n  FlatList,\n  KeyboardAvoidingView,\n  Platform,\n  SafeAreaView,\n  Alert,\n  ActivityIndicator,\n  Text\n} from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport { useFocusEffect } from '@react-navigation/native';\nimport { theme } from '../../../styles/theme';\nimport { debugLog } from '../../../context/AuthContext';\nimport { \n  fetchMessagesWithLogic, \n  sendMessageWithOptimisticUI,\n  useWebSocket \n} from '../../../utils/messages';\nimport MobileMessageHeader from './MobileMessageHeader';\nimport MobileMessageInput from './MobileMessageInput';\nimport MobileMessageBubble from './MobileMessageBubble';\n\nconst MobileMessageList = ({\n  conversation,\n  userRole,\n  user,\n  onBack,\n  onConversationUpdate,\n  navigation\n}) => {\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [hasMoreMessages, setHasMoreMessages] = useState(false);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n\n  // Refs\n  const flatListRef = useRef(null);\n  const isMountedRef = useRef(true);\n  const previousMessageCountRef = useRef(0);\n  const isUserScrollingRef = useRef(false);\n  const paginationCooldownRef = useRef(false);\n  const scrollPositionRef = useRef(0);\n  const contentSizeRef = useRef({ width: 0, height: 0 });\n  const layoutMeasurementRef = useRef({ width: 0, height: 0 });\n  const pendingScrollRestoreRef = useRef(null);\n\n  // WebSocket for real-time messages\n  const { isConnected, registerHandler } = useWebSocket({\n    messageTypes: ['new_message', 'message_update', 'conversation_update'],\n    autoConnect: true\n  });\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, []);\n\n  // Navigation hiding is now handled by route parameters in MobileMessageHistory\n  // The Navigation.js component will automatically hide when selectedConversation is set\n\n  // Load messages when conversation changes\n  useEffect(() => {\n    if (conversation) {\n      loadMessages(true);\n    }\n  }, [conversation]);\n\n  // Register WebSocket handlers\n  useEffect(() => {\n    if (isConnected && conversation) {\n      const unregisterMessage = registerHandler('new_message', handleNewMessage, 'mobile-message-list');\n      const unregisterUpdate = registerHandler('message_update', handleMessageUpdate, 'mobile-message-update');\n      \n      return () => {\n        unregisterMessage();\n        unregisterUpdate();\n      };\n    }\n  }, [isConnected, conversation]);\n\n  const loadMessages = async (reset = false, page = 1) => {\n    try {\n      if (reset) {\n        setLoading(true);\n        setCurrentPage(1);\n      } else {\n        setLoadingMore(true);\n      }\n\n      debugLog('MobileMessageList: Loading messages', {\n        conversationId: conversation.conversation_id,\n        page,\n        reset,\n        currentMessageCount: messages.length,\n        hasMoreMessages,\n        loadingMore\n      });\n\n      const { messages: newMessages, hasMore } = await fetchMessagesWithLogic(\n        conversation.conversation_id,\n        { page, limit: 50 }\n      );\n      \n      debugLog('MobileMessageList: Messages after fetch', {\n        first3Messages: newMessages.slice(0, 3).map(m => ({ id: m.id, message: m.message?.substring(0, 20) })),\n        last3Messages: newMessages.slice(-3).map(m => ({ id: m.id, message: m.message?.substring(0, 20) })),\n        totalCount: newMessages.length\n      });\n\n      if (isMountedRef.current) {\n        if (reset) {\n          debugLog('MobileMessageList: Setting messages (reset)', {\n            messagesBeforeSet: [],\n            newMessagesFirst3: newMessages.slice(0, 3).map(m => ({ id: m.id, message: m.message?.substring(0, 20) })),\n            newMessagesLast3: newMessages.slice(-3).map(m => ({ id: m.id, message: m.message?.substring(0, 20) }))\n          });\n          setMessages(newMessages);\n          setCurrentPage(2);\n          // For inverted list, scroll to top shows newest messages\n          setTimeout(() => {\n            flatListRef.current?.scrollToOffset({ offset: 0, animated: false });\n          }, 200);\n        } else {\n          debugLog('MobileMessageList: Adding messages (pagination)', {\n            existingMessagesFirst3: messages.slice(0, 3).map(m => ({ id: m.id, message: m.message?.substring(0, 20) })),\n            newMessagesFirst3: newMessages.slice(0, 3).map(m => ({ id: m.id, message: m.message?.substring(0, 20) })),\n            existingCount: messages.length,\n            newCount: newMessages.length\n          });\n          // Add older messages at the end for inverted pagination\n          setMessages(prev => [...prev, ...newMessages]);\n          setCurrentPage(prev => prev + 1);\n        }\n        setHasMoreMessages(hasMore);\n        debugLog('MobileMessageList: hasMoreMessages set to:', hasMore);\n        \n        debugLog('MobileMessageList: Messages loaded successfully', {\n          newMessagesCount: newMessages.length,\n          totalMessagesCount: reset ? newMessages.length : messages.length + newMessages.length,\n          hasMore,\n          page,\n          reset\n        });\n      }\n    } catch (error) {\n      debugLog('MobileMessageList: Error loading messages:', error);\n      Alert.alert('Error', 'Failed to load messages');\n    } finally {\n      if (isMountedRef.current) {\n        setLoading(false);\n        setLoadingMore(false);\n      }\n    }\n  };\n\n  const handleLoadMore = () => {\n    // Only allow pagination if user has scrolled AND we meet the other conditions\n    if (hasMoreMessages && !loadingMore && !loading && !paginationCooldownRef.current) {\n      debugLog('MobileMessageList: Loading more messages', {\n        currentPage,\n        hasMoreMessages,\n        loadingMore,\n        isUserScrolling: isUserScrollingRef.current\n      });\n      \n      \n      // Set cooldown to prevent rapid-fire pagination\n      paginationCooldownRef.current = true;\n      setTimeout(() => {\n        paginationCooldownRef.current = false;\n      }, 2000);\n      \n      loadMessages(false, currentPage);\n    }\n  };\n\n  const handleNewMessage = (messageData) => {\n    if (messageData.conversation_id === conversation.conversation_id) {\n      setMessages(prev => [messageData, ...prev]);\n      onConversationUpdate?.();\n      \n      // Scroll to bottom\n      setTimeout(() => {\n        flatListRef.current?.scrollToEnd({ animated: true });\n      }, 100);\n    }\n  };\n\n  const handleMessageUpdate = (messageData) => {\n    setMessages(prev => \n      prev.map(msg => \n        msg.id === messageData.id ? { ...msg, ...messageData } : msg\n      )\n    );\n  };\n\n  const handleSendMessage = async (messageText, images = []) => {\n    if (!messageText?.trim() && images.length === 0) return;\n\n    await sendMessageWithOptimisticUI(\n      conversation.conversation_id,\n      user.id,\n      messageText,\n      images,\n      '',\n      // onOptimisticAdd\n      (optimisticMessage) => {\n        setMessages(prev => [optimisticMessage, ...prev]);\n        setTimeout(() => {\n          flatListRef.current?.scrollToEnd({ animated: true });\n        }, 100);\n      },\n      // onOptimisticRemove\n      (tempId) => {\n        setMessages(prev => prev.filter(msg => msg.id !== tempId));\n      },\n      // onSuccess\n      (realMessage) => {\n        setMessages(prev => [realMessage, ...prev]);\n        onConversationUpdate?.();\n        setTimeout(() => {\n          flatListRef.current?.scrollToEnd({ animated: true });\n        }, 100);\n      },\n      // onError\n      (error) => {\n        debugLog('MobileMessageList: Error sending message:', error);\n        Alert.alert('Error', 'Failed to send message');\n      }\n    );\n  };\n\n  const renderMessageItem = ({ item, index }) => {\n    // Safety check for item\n    if (!item) {\n      debugLog('MobileMessageList: Received null/undefined item at index:', index);\n      return <View />;\n    }\n\n    try {\n      return (\n        <View key={item.id || index}>\n          {/* Date separator */}\n          {item.showDateSeparator && item.formattedDate && (\n            <View style={styles.dateSeparator}>\n              <Text style={styles.dateSeparatorText}>{item.formattedDate}</Text>\n            </View>\n          )}\n          \n          {/* Message bubble */}\n          <MobileMessageBubble\n            message={item}\n            isOwn={!item.sent_by_other_user}\n            userRole={userRole}\n            showTimestamp={item.showTimestamp}\n          />\n        </View>\n      );\n    } catch (error) {\n      debugLog('MobileMessageList: Error rendering message item:', error);\n      return <View style={{ height: 1 }} />;\n    }\n  };\n\n\n  const keyExtractor = (item, index) => {\n    return item.id ? item.id.toString() : `temp-${index}`;\n  };\n\n  const renderLoadingHeader = () => {\n    debugLog('MobileMessageList: Rendering loading header', {\n      loadingMore,\n      hasMoreMessages,\n      shouldShow: loadingMore && hasMoreMessages,\n      messagesCount: messages.length\n    });\n    \n    if (!hasMoreMessages) return null;\n    \n    return (\n      <View style={styles.loadingContainer}>\n        {loadingMore ? (\n          <>\n            <ActivityIndicator size=\"small\" color={theme.colors.primary} />\n            <Text style={styles.loadingText}>Loading more messages...</Text>\n          </>\n        ) : (\n          <Text style={styles.loadingText}>Scroll up to load older messages</Text>\n        )}\n      </View>\n    );\n  };\n\n  const insets = useSafeAreaInsets();\n  \n  return (\n    <View style={[styles.container, { paddingTop: insets.top }]}>\n      {/* Fixed Header */}\n      <MobileMessageHeader\n        conversation={conversation}\n        userRole={userRole}\n        onBack={onBack}\n        isConnected={isConnected}\n        navigation={navigation}\n      />\n\n      {/* Messages List */}\n      <KeyboardAvoidingView \n        style={styles.messagesContainer}\n        behavior={Platform.OS === 'ios' ? 'height' : 'height'}\n        keyboardVerticalOffset={0}\n      >\n        <FlatList\n          ref={flatListRef}\n          data={messages}\n          renderItem={renderMessageItem}\n          keyExtractor={keyExtractor}\n          ListFooterComponent={renderLoadingHeader}\n          style={styles.messagesList}\n          contentContainerStyle={styles.messagesContent}\n          showsVerticalScrollIndicator={false}\n          onScroll={(event) => {\n            const { contentOffset, contentSize, layoutMeasurement } = event.nativeEvent;\n            const distanceFromTop = contentOffset.y;\n            \n            // Store current scroll metrics for pagination calculations\n            scrollPositionRef.current = distanceFromTop;\n            contentSizeRef.current = contentSize;\n            layoutMeasurementRef.current = layoutMeasurement;\n            \n            // For inverted list, check distance from bottom to trigger pagination\n            const distanceFromBottom = contentSize.height - (layoutMeasurement.height + distanceFromTop);\n            const isNearBottom = distanceFromBottom <= 100;\n            \n            // Log scroll tracking for debugging\n            if (distanceFromBottom <= 100 || distanceFromBottom % 500 === 0) {\n              debugLog('MobileMessageList: Scroll tracking (inverted)', {\n                distanceFromTop,\n                distanceFromBottom,\n                isNearBottom,\n                hasMoreMessages,\n                loadingMore,\n                messagesCount: messages.length,\n                isUserScrolling: isUserScrollingRef.current,\n                contentHeight: contentSize.height,\n                viewportHeight: layoutMeasurement.height\n              });\n            }\n            \n            // For inverted list, trigger pagination when scrolling to bottom (where older messages are loaded)\n            if (isNearBottom && hasMoreMessages && !loadingMore && !loading && !paginationCooldownRef.current && isUserScrollingRef.current) {\n              debugLog('MobileMessageList: Triggering pagination - near bottom (older messages)', {\n                scrollPosition: distanceFromTop,\n                distanceFromBottom,\n                messagesCount: messages.length,\n                isNearBottom,\n                isUserScrolling: isUserScrollingRef.current\n              });\n              handleLoadMore();\n            }\n          }}\n          onScrollBeginDrag={() => {\n            isUserScrollingRef.current = true;\n            debugLog('MobileMessageList: User started scrolling');\n          }}\n          onMomentumScrollEnd={() => {\n            // Reset scrolling flag immediately when momentum ends\n            isUserScrollingRef.current = false;\n            debugLog('MobileMessageList: User stopped scrolling');\n          }}\n          onContentSizeChange={(width, height) => {\n            contentSizeRef.current = { width, height };\n            \n            // For inverted list, scroll to top on initial load (shows newest messages)\n            if (messages.length > 0 && currentPage === 2 && !loadingMore) {\n              setTimeout(() => {\n                flatListRef.current?.scrollToOffset({ offset: 0, animated: false });\n              }, 50);\n            }\n          }}\n          scrollEventThrottle={16}\n          removeClippedSubviews={false}\n          maxToRenderPerBatch={10}\n          windowSize={15}\n          initialNumToRender={20}\n          inverted={true}\n          maintainVisibleContentPosition={{\n            minIndexForVisible: 0,\n            autoscrollToTopThreshold: 10\n          }}\n        />\n\n        {/* Fixed Input */}\n        <MobileMessageInput\n          onSendMessage={handleSendMessage}\n          conversation={conversation}\n          userRole={userRole}\n        />\n      </KeyboardAvoidingView>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.colors.surfaceContrast,\n  },\n  messagesContainer: {\n    flex: 1,\n  },\n  messagesList: {\n    flex: 1,\n  },\n  messagesContent: {\n    paddingHorizontal: 16,\n    paddingTop: 8,\n    paddingBottom: 16, // Reduced padding\n  },\n  dateSeparator: {\n    alignItems: 'center',\n    marginVertical: 16,\n  },\n  dateSeparatorText: {\n    fontSize: 12,\n    color: theme.colors.placeHolderText,\n    backgroundColor: theme.colors.surface,\n    paddingHorizontal: 12,\n    paddingVertical: 4,\n    borderRadius: 12,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  loadingContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 16,\n    gap: 8,\n  },\n  loadingText: {\n    fontSize: 14,\n    color: theme.colors.placeHolderText,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default MobileMessageList;","// Mobile Message History Controller - Signal-like messaging interface\nimport React, { useState, useEffect, useContext, useRef, useCallback } from 'react';\nimport { View, StyleSheet, Platform, StatusBar, BackHandler } from 'react-native';\nimport { useFocusEffect } from '@react-navigation/native';\nimport { AuthContext, debugLog } from '../../../context/AuthContext';\nimport MessageNotificationContext from '../../../context/MessageNotificationContext';\nimport { fetchConversationsWithLogic } from '../../../utils/messages';\nimport MobileConversationList from './MobileConversationList';\nimport MobileMessageList from './MobileMessageList';\nimport { theme } from '../../../styles/theme';\n\nconst MobileMessageHistory = ({ navigation, route }) => {\n  const { isSignedIn, userRole, user } = useContext(AuthContext);\n  const { updateRoute } = useContext(MessageNotificationContext);\n\n  // State management\n  const [conversations, setConversations] = useState([]);\n  const [selectedConversation, setSelectedConversation] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [refreshing, setRefreshing] = useState(false);\n\n  // Refs\n  const isMountedRef = useRef(true);\n\n  // Update notification context\n  useEffect(() => {\n    updateRoute('MessageHistory');\n    return () => updateRoute('Dashboard');\n  }, [updateRoute]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      isMountedRef.current = false;\n    };\n  }, []);\n\n  // Handle hardware back button on Android\n  useFocusEffect(\n    useCallback(() => {\n      const onBackPress = () => {\n        if (selectedConversation) {\n          setSelectedConversation(null);\n          // Clear navigation route parameters to show navigation again\n          navigation.setParams({\n            selectedConversation: null\n          });\n          return true; // Prevent default behavior\n        }\n        return false; // Let default behavior happen\n      };\n\n      if (Platform.OS === 'android') {\n        const subscription = BackHandler.addEventListener('hardwareBackPress', onBackPress);\n        return () => subscription.remove();\n      }\n    }, [selectedConversation])\n  );\n\n  // Load conversations on mount and role change\n  useFocusEffect(\n    useCallback(() => {\n      if (isSignedIn) {\n        loadConversations();\n        \n        // Check for route params to select specific conversation\n        const conversationId = route?.params?.conversationId || route?.params?.selectedConversation;\n        if (conversationId && conversations.length > 0) {\n          selectConversationById(parseInt(conversationId));\n        }\n      }\n    }, [isSignedIn, userRole, route?.params])\n  );\n\n  const loadConversations = async (isRefresh = false) => {\n    try {\n      if (isRefresh) {\n        setRefreshing(true);\n      } else {\n        setLoading(true);\n      }\n\n      debugLog('MobileMessageHistory: Loading conversations');\n      \n      const { conversations: data } = await fetchConversationsWithLogic(userRole);\n      \n      if (isMountedRef.current) {\n        setConversations(data);\n        debugLog('MobileMessageHistory: Conversations loaded', { count: data.length });\n      }\n    } catch (error) {\n      debugLog('MobileMessageHistory: Error loading conversations:', error);\n    } finally {\n      if (isMountedRef.current) {\n        setLoading(false);\n        setRefreshing(false);\n      }\n    }\n  };\n\n  const selectConversationById = (conversationId) => {\n    const conversation = conversations.find(c => c.conversation_id === conversationId);\n    if (conversation) {\n      setSelectedConversation(conversation);\n    }\n  };\n\n  const handleConversationSelect = (conversation) => {\n    debugLog('MobileMessageHistory: Conversation selected', {\n      conversationId: conversation.conversation_id,\n      otherUser: conversation.other_user_name,\n      settingParam: conversation.conversation_id\n    });\n    setSelectedConversation(conversation);\n    \n    // Update navigation route parameters to trigger navigation hiding\n    try {\n      navigation.setParams({\n        selectedConversation: conversation.conversation_id\n      });\n    } catch (error) {\n      debugLog('MobileMessageHistory: Error setting navigation params:', error);\n    }\n    \n    debugLog('MobileMessageHistory: Route params set', {\n      params: route?.params,\n      selectedConversation: conversation.conversation_id\n    });\n  };\n\n  const handleBackToList = () => {\n    debugLog('MobileMessageHistory: Back to conversation list');\n    setSelectedConversation(null);\n    \n    // Clear navigation route parameters to show navigation again\n    navigation.setParams({\n      selectedConversation: null\n    });\n  };\n\n  const handleConversationUpdate = () => {\n    // Reload conversations when a conversation is updated\n    loadConversations();\n  };\n\n  // Set status bar style based on current view\n  useEffect(() => {\n    if (Platform.OS === 'ios') {\n      StatusBar.setBarStyle(selectedConversation ? 'light-content' : 'dark-content', true);\n    }\n  }, [selectedConversation]);\n\n  if (!isSignedIn) {\n    return null; // Let the app handle sign-in flow\n  }\n\n  return (\n    <View style={styles.container}>\n      {selectedConversation ? (\n        <MobileMessageList\n          conversation={selectedConversation}\n          userRole={userRole}\n          user={user}\n          onBack={handleBackToList}\n          onConversationUpdate={handleConversationUpdate}\n          navigation={navigation}\n        />\n      ) : (\n        <MobileConversationList\n          conversations={conversations}\n          userRole={userRole}\n          loading={loading}\n          refreshing={refreshing}\n          onRefresh={() => loadConversations(true)}\n          onConversationSelect={handleConversationSelect}\n          navigation={navigation}\n        />\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.colors.surfaceContrast,\n  },\n});\n\nexport default MobileMessageHistory;","import { Platform } from 'react-native';\nimport MessageHistory from '../../screens/MessageHistory'; // Original web version\nimport MobileMessageHistory from './mobile/MobileMessageHistory'; // New mobile version\n\nconst MessageHistoryWrapper = (props) => {\n  // Use original MessageHistory for web, new MobileMessageHistory for mobile\n  if (Platform.OS === 'web') {\n    return MessageHistory(props);\n  } else {\n    return MobileMessageHistory(props);\n  }\n};\n\nexport default MessageHistoryWrapper;","import React, { useContext, useState, useEffect } from 'react';\nimport { View, StyleSheet, Platform, SafeAreaView, Text, TouchableOpacity, StatusBar } from 'react-native';\nimport { List, Divider } from 'react-native-paper';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport BackHeader from '../components/BackHeader';\nimport CrossPlatformView from '../components/CrossPlatformView';\nimport { AuthContext } from '../context/AuthContext';\n\nconst Settings = ({ navigation }) => {\n  const { screenWidth, isCollapsed, is_DEBUG } = useContext(AuthContext);\n  const [isMobile, setIsMobile] = useState(screenWidth <= 900);\n  const styles = createStyles(screenWidth, isCollapsed);\n\n  useEffect(() => {\n    const updateLayout = () => {\n      setIsMobile(screenWidth <= 900);\n    };\n    updateLayout();\n  }, [screenWidth]);\n\n  const settingsItems = [\n    { title: 'Change Password', icon: 'lock-reset', route: 'ChangePassword' },\n    { title: 'Notification Preferences', icon: 'bell-outline', route: 'NotificationPreferences' },\n    { title: 'Privacy Settings', icon: 'shield-account', route: 'PrivacySettings' },\n    { title: 'Language', icon: 'translate', route: 'LanguageSettings' },\n    { title: 'Display & Accessibility', icon: 'palette', route: 'DisplaySettings' },\n    { title: 'Data Usage', icon: 'chart-bar', route: 'DataUsage' },\n    { title: 'About', icon: 'information-outline', route: 'About' },\n  ];\n\n  const renderSettingsItems = () => {\n    return settingsItems.map((item, index) => (\n      <React.Fragment key={index}>\n        <List.Item\n          title={item.title}\n          titleStyle={styles.listItemTitle}\n          left={props => \n            Platform.OS === 'web' \n              ? <MaterialCommunityIcons \n                  name={item.icon} \n                  size={screenWidth <= 900 ? 20 : 24} \n                  color={theme.colors.primary} \n                />\n              : <List.Icon {...props} icon={item.icon} />\n          }\n          onPress={() => navigation.navigate(item.route)}\n          style={[\n            styles.webListItem,\n            { paddingHorizontal: screenWidth <= 900 ? 8 : 16 }\n          ]}\n        />\n        {index < settingsItems.length - 1 && <Divider />}\n      </React.Fragment>\n    ));\n  };\n\n  return (\n    <View style={styles.mainContainer}>\n      <SafeAreaView style={styles.container}>\n        <View style={styles.content}>\n          {isMobile && (\n            <BackHeader \n              title=\"Settings\" \n              onBackPress={() => navigation.navigate('More')} \n            />\n          )}\n          <View style={styles.webContent}>\n            <List.Section style={styles.listSection}>\n              {renderSettingsItems()}\n            </List.Section>\n          </View>\n        </View>\n      </SafeAreaView>\n    </View>\n  );\n};\n\nconst createStyles = (screenWidth, isCollapsed) => StyleSheet.create({\n  mainContainer: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n    height: '100vh',\n    overflow: 'hidden',\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    marginLeft: screenWidth > 900 ? (isCollapsed ? 70 : 250) : 0,\n    transition: 'margin-left 0.3s ease',\n  },\n  container: {\n    flex: 1,\n  },\n  content: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n    paddingTop: Platform.OS === 'android' ? StatusBar.currentHeight : 0,\n  },\n  listSection: {\n    backgroundColor: theme.colors.surface,\n  },\n  webContent: {\n    width: '100%',\n    maxWidth: screenWidth > 900 ? 800 : 600,\n    alignSelf: 'center',\n    padding: screenWidth <= 900 ? 10 : 16,\n  },\n  webListItem: {\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n    paddingVertical: screenWidth <= 900 ? 8 : 12,\n  },\n  listItemTitle: {\n    fontSize: screenWidth <= 900 ? theme.fontSizes.medium : theme.fontSizes.large,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  warningContainer: {\n    backgroundColor: '#FFF3CD',\n    padding: theme.spacing.small,\n    marginHorizontal: theme.spacing.small,\n    marginTop: theme.spacing.small,\n    borderRadius: 4,\n  },\n  warningText: {\n    color: '#856404',\n    textAlign: 'center',\n  },\n});\n\nexport default Settings;\n","import React, { useContext } from 'react';\nimport { View, Text, StyleSheet, ScrollView, Platform } from 'react-native';\nimport { theme } from '../styles/theme';\nimport BackHeader from '../components/BackHeader';\nimport CrossPlatformView from '../components/CrossPlatformView';\nimport { useNavigation } from '@react-navigation/native';\nimport { AuthContext } from '../context/AuthContext';\nimport { handleBack } from '../components/Navigation';\n\nconst appName = 'Zen Exotics';\n\nconst privacy_policy_info = [\n  {sectionTitle: \"Information We Collect\", \n    paragraph: \"When you use {appName}, we collect several types of information to ensure the best experience for both professionals and pet owners. This includes:\", \n    listItems: {listItem: \"Personal Information: Name, email, phone number, address, and service preferences.\",\n                listItem: \"Payment Information: Card type, expiration date, and the last four digits of your payment card. Complete payment details are managed by third-party processors, and we do not store full card numbers.\",\n                listItem: \"Health Data: Medical information about your pets (e.g., medical history, medications, vaccinations, behavioral traits). By using this service, you consent to our use of this health data as we deem necessary for analytics, research, marketing, or any other purpose related to improving our services.\",\n                listItem: \"Device Data: We collect information about your device, including IP address, browser type, operating system, and other usage data.\",\n                listItem: \"Location Data: With your permission, we collect location information to match professionals and owners more effectively. Disabling location services may limit certain app features.\",\n                listItem: \"Payment Information: Card type, expiration date, and the last four digits of your payment card. Complete payment details are managed by third-party processors, and we do not store full card numbers.\",\n                listItem: \"Payment Information: Card type, expiration date, and the last four digits of your payment card. Complete payment details are managed by third-party processors, and we do not store full card numbers.\",\n                listItem: \"Payment Information: Card type, expiration date, and the last four digits of your payment card. Complete payment details are managed by third-party processors, and we do not store full card numbers.\",\n                listItem: \"Payment Information: Card type, expiration date, and the last four digits of your payment card. Complete payment details are managed by third-party processors, and we do not store full card numbers.\",\n                listItem: \"Payment Information: Card type, expiration date, and the last four digits of your payment card. Complete payment details are managed by third-party processors, and we do not store full card numbers.\",\n                listItem: \"Payment Information: Card type, expiration date, and the last four digits of your payment card. Complete payment details are managed by third-party processors, and we do not store full card numbers.\",\n                listItem: \"Payment Information: Card type, expiration date, and the last four digits of your payment card. Complete payment details are managed by third-party processors, and we do not store full card numbers.\",\n                listItem: \"Payment Information: Card type, expiration date, and the last four digits of your payment card. Complete payment details are managed by third-party processors, and we do not store full card numbers.\",\n    }},\n  {}\n];\n\nconst PrivacyPolicy = () => {\n  const navigation = useNavigation();\n\n  return (\n    <CrossPlatformView fullWidthHeader={true}>\n      <BackHeader \n        title=\"Privacy Policy\" \n        onBackPress={() => handleBack(navigation)} \n      />\n      <ScrollView \n        style={styles.container}\n        contentContainerStyle={styles.contentContainer}\n      >\n        <Text style={styles.title}>Privacy Policy for {appName}</Text>\n        <Text style={styles.date}>Effective Date: 10/21/2024</Text>\n        \n        <Text style={styles.paragraph}>\n          By accessing or using {appName}, you agree to the practices described in this Privacy Policy. If you do not agree with these terms, please discontinue the use of our services immediately.\n        </Text>\n\n        <Text style={styles.sectionTitle}>Information We Collect</Text>\n        <Text style={styles.paragraph}>\n          When you use {appName}, we collect several types of information to ensure the best experience for both professionals and pet owners. This includes:\n        </Text>\n        <Text style={styles.listItem}>• Personal Information: Name, email, phone number, address, and service preferences.</Text>\n        <Text style={styles.listItem}>• Payment Information: Card type, expiration date, and the last four digits of your payment card. Complete payment details are managed by third-party processors, and we do not store full card numbers.</Text>\n        <Text style={styles.listItem}>• Health Data: Medical information about your pets (e.g., medical history, medications, vaccinations, behavioral traits). By using this service, you consent to our use of this health data as we deem necessary for analytics, research, marketing, or any other purpose related to improving our services.</Text>\n        <Text style={styles.listItem}>• Device Data: We collect information about your device, including IP address, browser type, operating system, and other usage data.</Text>\n        <Text style={styles.listItem}>• Location Data: With your permission, we collect location information to match professionals and owners more effectively. Disabling location services may limit certain app features.</Text>\n        <Text style={styles.listItem}>• Cookies and Tracking: We use cookies and tracking technologies to improve user experience and monitor traffic patterns. You can disable cookies in your browser settings.</Text>\n\n        <Text style={styles.sectionTitle}>How We Use Your Data</Text>\n        <Text style={styles.paragraph}>We use the data we collect to:</Text>\n        <Text style={styles.listItem}>• Facilitate bookings and transactions between professionals and owners.</Text>\n        <Text style={styles.listItem}>• Verify professional eligibility through background checks.</Text>\n        <Text style={styles.listItem}>• Provide customer support and resolve disputes between users.</Text>\n        <Text style={styles.listItem}>• Improve app functionality through analytics and feedback.</Text>\n        <Text style={styles.listItem}>• Manage communications between professionals and owners.</Text>\n        <Text style={styles.listItem}>• Use health data for internal analysis and marketing purposes. We retain control over how this data is used.</Text>\n\n        <Text style={styles.sectionTitle}>Sharing of Information</Text>\n        <Text style={styles.paragraph}>We may share your data in the following ways:</Text>\n        <Text style={styles.listItem}>• With Other Users: For bookings, we share relevant information between professionals and pet owners.</Text>\n        <Text style={styles.listItem}>• With Third-Party Providers: Payment processors, analytics providers, and background check services may access limited information to perform their services.</Text>\n        <Text style={styles.listItem}>• Legal and Compliance Purposes: We may disclose information if required by law or to protect the safety and security of our users.</Text>\n        <Text style={styles.listItem}>• Business Transfers: In case of a merger, sale, or acquisition, your data may be transferred to a new owner.</Text>\n        <Text style={styles.listItem}>• Aggregated Data: We may share non-identifiable, aggregated data for research or business purposes.</Text>\n\n        <Text style={styles.sectionTitle}>Your Rights and Choices</Text>\n        <Text style={styles.listItem}>• Account Management: You can update or delete your account information through the app settings.</Text>\n        <Text style={styles.listItem}>• Health Data Access: You may review the health data associated with your pets but agree that we control its use.</Text>\n        <Text style={styles.listItem}>• Location Services: Manage your location preferences through your device settings.</Text>\n        <Text style={styles.listItem}>• Cookie Preferences: You can opt out of personalized ads and tracking through your browser settings.</Text>\n\n        <Text style={styles.sectionTitle}>Security and Data Retention</Text>\n        <Text style={styles.paragraph}>\n          We implement reasonable security measures to protect your data, though no system is entirely secure. We retain your data as long as needed for operational purposes or as required by law.\n        </Text>\n\n        <Text style={styles.sectionTitle}>International Data Transfers</Text>\n        <Text style={styles.paragraph}>\n          Your data may be processed or stored in countries outside your own. By using the app, you agree to these transfers, even if those countries have different data protection laws.\n        </Text>\n\n        <Text style={styles.sectionTitle}>Changes to This Privacy Policy</Text>\n        <Text style={styles.paragraph}>\n          We may update this policy from time to time to reflect changes in our practices or services. We will notify you of significant changes through the app or via email. Continued use of the app constitutes acceptance of the revised policy.\n        </Text>\n\n        <Text style={styles.sectionTitle}>Contact Us</Text>\n        <Text style={styles.paragraph}>\n          If you have questions or concerns about this policy, please contact us:\n        </Text>\n        <Text style={styles.listItem}>Email: zam.hh.llc@gmail.com</Text>\n        <Text style={styles.listItem}>Phone: 7195106341</Text>\n      </ScrollView>\n    </CrossPlatformView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 20,\n    width: '100%',\n    maxWidth: 800,\n    alignSelf: 'center',\n  },\n  contentContainer: {\n    paddingBottom: Platform.OS === 'web' ? 16 : 80,\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 10,\n    color: theme.colors.primary,\n  },\n  date: {\n    fontSize: 16,\n    marginBottom: 20,\n    color: theme.colors.text,\n  },\n  sectionTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginTop: 20,\n    marginBottom: 10,\n    color: theme.colors.primary,\n  },\n  paragraph: {\n    fontSize: 16,\n    marginBottom: 10,\n    color: theme.colors.text,\n  },\n  listItem: {\n    fontSize: 16,\n    marginBottom: 5,\n    marginLeft: 10,\n    color: theme.colors.text,\n  },\n});\n\nexport default PrivacyPolicy;\n","import React from 'react';\nimport { View, Text, StyleSheet } from 'react-native';\nimport { theme } from '../styles/theme';\n\nconst ProfessionalSettings = () => {\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Professional Settings</Text>\n      <Text>Manage your professional profile and preferences here.</Text>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 20,\n    backgroundColor: theme.colors.background,\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 20,\n    color: theme.colors.primary,\n  },\n});\n\nexport default ProfessionalSettings;","import React, { useContext } from 'react';\nimport { View, Text, StyleSheet, ScrollView } from 'react-native';\nimport { theme } from '../styles/theme';\nimport BackHeader from '../components/BackHeader';\nimport CrossPlatformView from '../components/CrossPlatformView';\nimport { useNavigation } from '@react-navigation/native';\nimport { handleBack } from '../components/Navigation';\nimport { AuthContext } from '../context/AuthContext';\n\nconst appName = 'Zen Exotics';\n\nconst TermsOfService = () => {\n  const navigation = useNavigation();\n\n  return (\n    <CrossPlatformView fullWidthHeader={true}>\n      <BackHeader \n        title=\"Terms of Service\" \n        onBackPress={() => handleBack(navigation)} \n      />\n      <Text>Terms of Service coming soon. Right now we are in prototype mode, so no data is saved except for email/name if you choose to contact us through this platform, then it is saved for marketing purposes.</Text>\n      \n      <ScrollView \n        style={styles.container}\n        contentContainerStyle={styles.contentContainer}\n      >\n        <Text style={styles.title}>Terms of Service for {appName}</Text>\n\n        <Text style={styles.date}>Effective Date: 10/21/2024</Text>\n        \n        <Text style={styles.paragraph}>\n          Welcome to {appName}! By using our platform, mobile application, or any services offered through our platform (collectively, \"the Service\"), you agree to be bound by these Terms of Service (\"Terms\"). If you do not agree to these Terms, you must discontinue use of the Service immediately.\n        </Text>\n\n        <Text style={styles.sectionTitle}>1. Description of Service</Text>\n        <Text style={styles.paragraph}>\n          {appName} provides an online platform for connecting pet owners with professionals specializing in exotic animals, as well as dogs and cats. Users can book services, communicate with professionals, and manage pet-related services, including payments and reviews.\n        </Text>\n\n        <Text style={styles.sectionTitle}>2. User Accounts</Text>\n        <Text style={styles.paragraph}>\n          To use certain features of the Service, you must create an account. You are responsible for keeping your account information accurate and secure.\n        </Text>\n        <Text style={styles.listItem}>• Eligibility: Users must be at least 18 years old to create an account.</Text>\n        <Text style={styles.listItem}>• Account Security: You are responsible for all activities under your account. Notify us immediately if you suspect unauthorized use.</Text>\n        <Text style={styles.listItem}>• Account Termination: We reserve the right to suspend or terminate accounts at our sole discretion for violations of these Terms.</Text>\n\n        <Text style={styles.sectionTitle}>3. User Conduct and Acceptable Use</Text>\n        <Text style={styles.paragraph}>By using the Service, you agree:</Text>\n        <Text style={styles.listItem}>• To provide accurate and complete information.</Text>\n        <Text style={styles.listItem}>• Not to engage in fraudulent or unlawful activities.</Text>\n        <Text style={styles.listItem}>• Not to use the Service for spam, harassment, or abusive behavior toward other users.</Text>\n        <Text style={styles.listItem}>• To comply with all local, national, and international laws applicable to your activities on the platform.</Text>\n        <Text style={styles.paragraph}>Failure to comply with these rules may result in account suspension or termination.</Text>\n\n        <Text style={styles.sectionTitle}>4. Pet and Health Information</Text>\n        <Text style={styles.paragraph}>\n          You acknowledge that the Service involves the collection and sharing of health-related data for pets. By using the Service, you agree to provide accurate medical information for your animals and grant us permission to use and share this data as outlined in our Privacy Policy.\n        </Text>\n\n        <Text style={styles.sectionTitle}>5. Payment Terms</Text>\n        <Text style={styles.paragraph}>\n          All transactions between pet owners and professionals must be processed through the platform's payment system, powered by Stripe. You agree to the following:\n        </Text>\n        <Text style={styles.listItem}>• Booking Fees: You will be charged the agreed-upon amount at the time of booking.</Text>\n        <Text style={styles.listItem}>• Cancellations and Refunds: Cancellations are subject to our cancellation policy, which may result in partial or no refunds.</Text>\n        <Text style={styles.listItem}>• Payouts to Professionals: Professionals must provide accurate payment information and comply with local tax regulations.</Text>\n\n        <Text style={styles.sectionTitle}>6. Liability and Disclaimer of Warranties</Text>\n        <Text style={styles.paragraph}>\n          You acknowledge that {appName} does not guarantee the quality or safety of services provided by professionals. Our platform only facilitates connections between users.\n        </Text>\n        <Text style={styles.listItem}>• We are not liable for any injury, damage, or loss caused during the provision of pet care services.</Text>\n        <Text style={styles.listItem}>• The Service is provided \"as is\" and \"as available\" without warranties of any kind, express or implied.</Text>\n\n        <Text style={styles.sectionTitle}>7. Dispute Resolution Between Users</Text>\n        <Text style={styles.paragraph}>\n          Disputes between users (e.g., pet owners and professionals) must first be addressed directly between the parties. If no resolution is reached, {appName} may mediate but is not responsible for the outcome.\n        </Text>\n\n        <Text style={styles.sectionTitle}>8. Limitation of Liability</Text>\n        <Text style={styles.paragraph}>In no event shall {appName}, its affiliates, officers, employees, or partners be liable for:</Text>\n        <Text style={styles.listItem}>• Indirect, incidental, or consequential damages arising from the use of the Service.</Text>\n        <Text style={styles.listItem}>• Any claims exceeding the amount you paid through the Service within the last six months.</Text>\n\n        <Text style={styles.sectionTitle}>9. Termination and Suspension</Text>\n        <Text style={styles.paragraph}>We reserve the right to suspend or terminate access to the Service at any time without notice if:</Text>\n        <Text style={styles.listItem}>• You breach these Terms.</Text>\n        <Text style={styles.listItem}>• Your actions jeopardize the safety or security of the platform or other users.</Text>\n\n        <Text style={styles.sectionTitle}>10. Modifications to the Service and Terms</Text>\n        <Text style={styles.paragraph}>\n          We may modify these Terms or the Service at any time. Significant changes will be communicated via email or in-app notifications. Continued use of the Service after changes constitutes acceptance of the revised Terms.\n        </Text>\n\n        <Text style={styles.sectionTitle}>11. Intellectual Property Rights</Text>\n        <Text style={styles.paragraph}>\n          All content, trademarks, and logos on the platform are owned by or licensed to {appName}. You may not copy, modify, or distribute content without express permission.\n        </Text>\n\n        <Text style={styles.sectionTitle}>12. Governing Law and Dispute Resolution</Text>\n        <Text style={styles.paragraph}>\n          These Terms are governed by the laws of El Paso County, Colorado, without regard to conflict of law principles.\n        </Text>\n        <Text style={styles.listItem}>• Arbitration Clause: All disputes arising under these Terms shall be resolved through binding arbitration in Colorado Springs, Colorado.</Text>\n        <Text style={styles.listItem}>• Class Action Waiver: You agree to waive your right to participate in class action lawsuits.</Text>\n\n        <Text style={styles.sectionTitle}>13. Indemnification</Text>\n        <Text style={styles.paragraph}>\n          You agree to indemnify and hold harmless {appName}, its affiliates, officers, and employees from any claims, damages, or liabilities arising from your use of the Service or breach of these Terms.\n        </Text>\n\n        <Text style={styles.sectionTitle}>14. Third-Party Links and Services</Text>\n        <Text style={styles.paragraph}>\n          The platform may contain links to third-party websites or services. {appName} is not responsible for the content or actions of those third parties.\n        </Text>\n\n        <Text style={styles.sectionTitle}>15. Contact Us</Text>\n        <Text style={styles.paragraph}>\n          If you have questions about these Terms, please contact us:\n        </Text>\n        <Text style={styles.listItem}>Email: zam.hh.llc@gmail.com</Text>\n        <Text style={styles.listItem}>Phone: 7195106341</Text>\n\n        <Text style={styles.sectionTitle}>Acknowledgment of Agreement</Text>\n        <Text style={styles.paragraph}>\n          By accessing or using {appName}, you acknowledge that you have read, understood, and agreed to these Terms of Service.\n        </Text>\n      </ScrollView>\n    </CrossPlatformView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 20,\n  },\n  contentContainer: {\n    paddingBottom: 80,\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 10,\n    color: theme.colors.primary,\n  },\n  date: {\n    fontSize: 16,\n    marginBottom: 20,\n    color: theme.colors.text,\n  },\n  sectionTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginTop: 20,\n    marginBottom: 10,\n    color: theme.colors.primary,\n  },\n  paragraph: {\n    fontSize: 16,\n    marginBottom: 10,\n    color: theme.colors.text,\n  },\n  listItem: {\n    fontSize: 16,\n    marginBottom: 5,\n    marginLeft: 10,\n    color: theme.colors.text,\n  },\n  testSection: {\n    marginBottom: 20,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    padding: 10,\n    borderRadius: 4,\n  },\n});\n\nexport default TermsOfService;\n","import React from 'react';\nimport { View, Text, StyleSheet, ScrollView } from 'react-native';\nimport { theme } from '../styles/theme';\n\nconst HelpFAQ = () => {\n  return (\n    <ScrollView style={styles.container}>\n      <Text style={styles.title}>Help / FAQ</Text>\n      <Text>Frequently asked questions and help topics go here...</Text>\n    </ScrollView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 20,\n    backgroundColor: theme.colors.background,\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 20,\n    color: theme.colors.primary,\n  },\n});\n\nexport default HelpFAQ;","import React, { useState, useContext } from 'react';\nimport { View, Text, StyleSheet, TextInput, TouchableOpacity, Platform, Dimensions } from 'react-native';\nimport { theme } from '../styles/theme';\nimport CrossPlatformView from '../components/CrossPlatformView';\nimport { useNavigation, useRoute } from '@react-navigation/native';\nimport axios from 'axios';\nimport { API_BASE_URL } from '../config/config';\nimport { AuthContext, debugLog } from '../context/AuthContext';\n// Conditionally import formspree only on web\nlet useFormspree, ValidationError;\nif (Platform.OS === 'web') {\n  const formspree = require('@formspree/react');\n  useFormspree = formspree.useForm;\n  ValidationError = formspree.ValidationError;\n} else {\n  // Mock implementations for mobile\n  useFormspree = () => [{}, () => {}];\n  ValidationError = () => null;\n}\nimport { validateEmail, validateName, validateMessage, sanitizeInput } from '../validation/validation';\n\nconst ContactUs = () => {\n  const navigation = useNavigation();\n  const route = useRoute();\n  const { screenWidth, isCollapsed } = useContext(AuthContext);\n  const [state, handleFormspreeSubmit] = useFormspree ? useFormspree(\"mkgobpro\") : [{}, () => {}];\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [message, setMessage] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [successMessage, setSuccessMessage] = useState('');\n  \n  // Validation error states\n  const [nameError, setNameError] = useState('');\n  const [emailError, setEmailError] = useState('');\n  const [messageError, setMessageError] = useState('');\n\n  // Calculate responsive widths\n  const isMobile = screenWidth < 900;\n  const contentWidth = isMobile ? '90%' : '600px';\n  const maxContentWidth = isMobile ? '100%' : '800px';\n  \n  // Check if this is accessed from \"Become Professional\" navigation\n  const isBecomeProfessional = route.params?.source === 'becomeProfessional';\n  \n  debugLog('MBA1234: ContactUs screen loaded with params:', {\n    params: route.params,\n    isBecomeProfessional\n  });\n\n  // Enhanced input handlers with real-time sanitization\n  const handleNameChange = (text) => {\n    const sanitizedText = sanitizeInput(text, 'name');\n    \n    const removalPercentage = text.length > 0 ? ((text.length - sanitizedText.length) / text.length) * 100 : 0;\n    \n    if (removalPercentage > 30 && text.length > 3) {\n      debugLog('MBA1234: Potentially malicious name input detected in ContactUs:', {\n        original: text,\n        sanitized: sanitizedText,\n        removalPercentage\n      });\n      return;\n    }\n    \n    setName(sanitizedText);\n    setNameError('');\n    setSuccessMessage('');\n  };\n\n  const handleEmailChange = (text) => {\n    const sanitizedText = sanitizeInput(text, 'email');\n    \n    const removalPercentage = text.length > 0 ? ((text.length - sanitizedText.length) / text.length) * 100 : 0;\n    \n    if (removalPercentage > 20 && text.length > 5) {\n      debugLog('MBA1234: Potentially malicious email input detected in ContactUs:', {\n        original: text,\n        sanitized: sanitizedText,\n        removalPercentage\n      });\n      return;\n    }\n    \n    setEmail(sanitizedText);\n    setEmailError('');\n    setSuccessMessage('');\n  };\n\n  const handleMessageChange = (text) => {\n    const sanitizedText = sanitizeInput(text, 'message', { maxLength: 2000 });\n    \n    const removalPercentage = text.length > 0 ? ((text.length - sanitizedText.length) / text.length) * 100 : 0;\n    \n    if (removalPercentage > 30 && text.length > 10) {\n      debugLog('MBA1234: Potentially malicious message input detected in ContactUs:', {\n        original: text,\n        sanitized: sanitizedText,\n        removalPercentage\n      });\n      return;\n    }\n    \n    setMessage(sanitizedText);\n    setMessageError('');\n    setSuccessMessage('');\n  };\n\n  const validateForm = () => {\n    let isValid = true;\n    \n    // Validate name\n    const nameValidation = validateName(name);\n    setNameError(nameValidation.message);\n    if (!nameValidation.isValid) isValid = false;\n    \n    // Validate email\n    const emailValidation = validateEmail(email);\n    setEmailError(emailValidation.message);\n    if (!emailValidation.isValid) isValid = false;\n    \n    // Validate message\n    const messageValidation = validateMessage(message, { \n      maxLength: 2000, \n      minLength: 10,\n      allowEmpty: false \n    });\n    setMessageError(messageValidation.message);\n    if (!messageValidation.isValid) isValid = false;\n    \n    return isValid;\n  };\n\n  const handleSubmit = async () => {\n    // Validate form before proceeding\n    if (!validateForm()) {\n      return;\n    }\n\n    setIsSubmitting(true);\n    setSuccessMessage('');\n    \n    try {\n      // Sanitize all inputs before sending to backend\n      const sanitizedName = sanitizeInput(name, 'name');\n      const sanitizedEmail = sanitizeInput(email, 'email');\n      const sanitizedMessage = sanitizeInput(message, 'message', { maxLength: 2000 });\n      \n      debugLog('MBA1234: Contact form submission with sanitized inputs', {\n        originalName: name,\n        sanitizedName,\n        originalEmail: email,\n        sanitizedEmail,\n        originalMessage: message,\n        sanitizedMessage\n      });\n      \n      const response = await axios.post(`${API_BASE_URL}/api/users/v1/contact/`, {\n        name: sanitizedName,\n        email: sanitizedEmail,\n        message: sanitizedMessage\n      });\n\n      if (response.status === 200) {\n        setSuccessMessage('Your message has been sent successfully!');\n        setName('');\n        setEmail('');\n        setMessage('');\n        setNameError('');\n        setEmailError('');\n        setMessageError('');\n      } else {\n        throw new Error('Failed to send message');\n      }\n    } catch (error) {\n      debugLog('MBA1234: Error sending contact form:', error);\n      \n      let errorMessage = 'Failed to send message. Please try again later.';\n      if (error.response && error.response.data && error.response.data.error) {\n        errorMessage = error.response.data.error;\n      }\n      \n      setSuccessMessage(errorMessage);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Show success message from either Formspree or backend\n  if (state.succeeded) {\n    return (\n      <CrossPlatformView \n        fullWidthHeader={false} \n        contentWidth={maxContentWidth}\n        style={!isMobile && Platform.OS === 'web' ? {\n          marginLeft: isCollapsed ? '70px' : '250px',\n          width: `calc(100% - ${isCollapsed ? '70px' : '250px'})`,\n          transition: 'margin-left 0.3s ease, width 0.3s ease'\n        } : {}}\n      >\n        <View style={styles.container}>\n          <View style={[styles.contentWrapper, { width: contentWidth }]}>\n            <Text style={[styles.title, { color: theme.colors.primary }]}>\n              {isBecomeProfessional ? 'Application Received!' : 'Thanks for reaching out!'}\n            </Text>\n            <Text style={styles.successMessage}>\n              {isBecomeProfessional \n                ? 'We\\'ve received your professional application and will get back to you with next steps soon.'\n                : 'We\\'ll get back to you soon.'\n              }\n            </Text>\n          </View>\n        </View>\n      </CrossPlatformView>\n    );\n  }\n\n  return (\n    <CrossPlatformView \n      fullWidthHeader={false}\n      contentWidth={maxContentWidth}\n      style={!isMobile && Platform.OS === 'web' ? {\n        marginLeft: isCollapsed ? '70px' : '250px',\n        width: `calc(100% - ${isCollapsed ? '70px' : '250px'})`,\n        transition: 'margin-left 0.3s ease, width 0.3s ease'\n      } : {}}\n    >\n      <View style={styles.container}>\n        <View style={[styles.contentWrapper, { width: contentWidth }]}>\n          <Text style={styles.title}>\n            {isBecomeProfessional ? 'Become a Professional' : 'Contact Us'}\n          </Text>\n          <Text style={styles.subtitle}>\n            {isBecomeProfessional \n              ? 'Learn how to join our network of pet care professionals' \n              : 'Get in touch with our support team'\n            }\n          </Text>\n          \n          {/* Become Professional Information Section */}\n          {isBecomeProfessional && (\n            <View style={styles.infoSection}>\n              <Text style={styles.infoTitle}>How to Become a Professional</Text>\n              \n              <View style={styles.stepContainer}>\n                <View style={styles.stepHeader}>\n                  <View style={styles.stepNumber}>\n                    <Text style={styles.stepNumberText}>1</Text>\n                  </View>\n                  <Text style={styles.stepTitle}>Contact Us</Text>\n                </View>\n                <Text style={styles.stepDescription}>\n                  Fill out the contact form below with your email and express your desire to become a professional. \n                  Tell us about your experience with pet care and what services you'd like to offer.\n                </Text>\n              </View>\n              \n              <View style={styles.stepContainer}>\n                <View style={styles.stepHeader}>\n                  <View style={styles.stepNumber}>\n                    <Text style={styles.stepNumberText}>2</Text>\n                  </View>\n                  <Text style={styles.stepTitle}>Application Process</Text>\n                </View>\n                <Text style={styles.stepDescription}>\n                  We'll reply with all the information and documents we need, including:\n                </Text>\n                <View style={styles.bulletPoints}>\n                  <Text style={styles.bulletPoint}>• Background check link (optional, but provides a verification badge)</Text>\n                  <Text style={styles.bulletPoint}>• Insurance documentation you can provide (optional, but provides a verification badge)</Text>\n                  <Text style={styles.bulletPoint}>• Information about your experience and qualifications (can be included in the below message)</Text>\n                  <Text style={styles.bulletPoint}>• Details about the services you want to offer (can be included in the below message)</Text>\n                </View>\n              </View>\n              \n              <View style={styles.stepContainer}>\n                <View style={styles.stepHeader}>\n                  <View style={styles.stepNumber}>\n                    <Text style={styles.stepNumberText}>3</Text>\n                  </View>\n                  <Text style={styles.stepTitle}>Approval & Activation</Text>\n                </View>\n                <Text style={styles.stepDescription}>\n                  Once we review your application and documentation, we'll approve your account and activate \n                  your professional status. You'll then be able to create services, manage bookings, and be contacted \n                  by pet owners in your area.\n                </Text>\n              </View>\n              \n              <View style={styles.ctaContainer}>\n                <Text style={styles.ctaText}>\n                  Ready to get started? Fill out the form below and mention that you want to become a professional!\n                </Text>\n              </View>\n            </View>\n          )}\n          \n          <TextInput\n            style={[styles.input, nameError ? styles.errorInput : null]}\n            placeholder=\"Your Name\"\n            value={name}\n            onChangeText={handleNameChange}\n            name=\"name\"\n          />\n          {nameError ? <Text style={styles.errorText}>{nameError}</Text> : null}\n          \n          <TextInput\n            style={[styles.input, emailError ? styles.errorInput : null]}\n            placeholder=\"Your Email\"\n            value={email}\n            onChangeText={handleEmailChange}\n            keyboardType=\"email-address\"\n            name=\"email\"\n            autoCapitalize=\"none\"\n          />\n          {emailError ? <Text style={styles.errorText}>{emailError}</Text> : null}\n          \n          <TextInput\n            style={[styles.input, styles.messageInput, messageError ? styles.errorInput : null]}\n            placeholder={isBecomeProfessional \n              ? \"Tell us about your interest in becoming a professional, your experience with pets, and what services you'd like to offer (minimum 10 characters)\"\n              : \"Your Message (minimum 10 characters)\"\n            }\n            value={message}\n            onChangeText={handleMessageChange}\n            multiline\n            name=\"message\"\n          />\n          {messageError ? <Text style={styles.errorText}>{messageError}</Text> : null}\n          \n          {successMessage ? (\n            <Text style={[styles.successMessage, successMessage.includes('Failed') && styles.errorMessage]}>\n              {successMessage}\n            </Text>\n          ) : null}\n          \n          <TouchableOpacity\n            style={[styles.submitButton, isSubmitting && styles.disabledButton]}\n            onPress={handleSubmit}\n            disabled={isSubmitting}\n          >\n            <Text style={styles.submitButtonText}>\n              {isSubmitting ? 'Sending...' : 'Send Message'}\n            </Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    </CrossPlatformView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    width: '100%',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 20,\n    minHeight: '80vh',\n  },\n  contentWrapper: {\n    padding: 20,\n    alignItems: 'center',\n    backgroundColor: 'white',\n    borderRadius: 10,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n    maxWidth: '100%',\n  },\n  title: {\n    fontSize: theme.fontSizes.largeLarge,\n    fontWeight: 'bold',\n    marginBottom: 10,\n    color: theme.colors.primary,\n    fontFamily: theme.fonts.header.fontFamily,\n    textAlign: 'center',\n  },\n  subtitle: {\n    fontSize: theme.fontSizes.medium,\n    marginBottom: 20,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    textAlign: 'center',\n  },\n  input: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 5,\n    borderColor: theme.colors.border,\n    borderWidth: 1,\n    padding: 15,\n    marginBottom: 15,\n    fontSize: theme.fontSizes.medium,\n    width: '100%',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  messageInput: {\n    height: 120,\n    textAlignVertical: 'top',\n  },\n  button: {\n    backgroundColor: theme.colors.primary,\n    padding: 15,\n    borderRadius: 5,\n    alignItems: 'center',\n    width: '100%',\n    marginTop: 10,\n  },\n  buttonText: {\n    color: theme.colors.whiteText,\n    fontSize: theme.fontSizes.mediumLarge,\n    fontWeight: 'bold',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  successMessage: {\n    color: theme.colors.success,\n    textAlign: 'center',\n    marginBottom: 10,\n    fontSize: theme.fontSizes.medium,\n    fontFamily: theme.fonts.regular.fontFamily,\n    width: '100%',\n  },\n  disabledButton: {\n    opacity: 0.7,\n  },\n  errorInput: {\n    borderColor: theme.colors.error,\n    borderWidth: 1,\n  },\n  errorText: {\n    color: theme.colors.error,\n    textAlign: 'center',\n    marginBottom: 10,\n    fontSize: theme.fontSizes.medium,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  submitButton: {\n    backgroundColor: theme.colors.primary,\n    padding: 15,\n    borderRadius: 5,\n    alignItems: 'center',\n    width: '100%',\n    marginTop: 10,\n  },\n  submitButtonText: {\n    color: theme.colors.whiteText,\n    fontSize: theme.fontSizes.mediumLarge,\n    fontWeight: 'bold',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  errorMessage: {\n    color: theme.colors.error,\n  },\n  infoSection: {\n    backgroundColor: '#F0F9E5',\n    borderRadius: 10,\n    padding: 20,\n    marginBottom: 25,\n    borderWidth: 1,\n    borderColor: theme.colors.primary + '20',\n  },\n  infoTitle: {\n    fontSize: theme.fontSizes.large,\n    fontWeight: 'bold',\n    color: theme.colors.primary,\n    fontFamily: theme.fonts.header.fontFamily,\n    textAlign: 'center',\n    marginBottom: 20,\n  },\n  stepContainer: {\n    marginBottom: 20,\n  },\n  stepHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  stepNumber: {\n    width: 30,\n    height: 30,\n    borderRadius: 15,\n    backgroundColor: theme.colors.primary,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 12,\n  },\n  stepNumberText: {\n    color: theme.colors.whiteText,\n    fontSize: theme.fontSizes.medium,\n    fontWeight: 'bold',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  stepTitle: {\n    fontSize: theme.fontSizes.mediumLarge,\n    fontWeight: 'bold',\n    color: theme.colors.primary,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  stepDescription: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    lineHeight: 22,\n    marginLeft: 42,\n  },\n  bulletPoints: {\n    marginLeft: 42,\n    marginTop: 8,\n  },\n  bulletPoint: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    lineHeight: 20,\n    marginBottom: 4,\n  },\n  ctaContainer: {\n    backgroundColor: theme.colors.primary + '10',\n    borderRadius: 8,\n    padding: 15,\n    marginTop: 10,\n    borderLeftWidth: 4,\n    borderLeftColor: theme.colors.primary,\n  },\n  ctaText: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n    textAlign: 'center',\n    lineHeight: 20,\n  },\n});\n\nexport default ContactUs;\n","import React, { useState, useRef, useEffect, forwardRef, memo } from 'react';\nimport { View, TextInput, StyleSheet, Platform } from 'react-native';\nimport { IconButton, useTheme } from 'react-native-paper';\nimport { MaterialIcons } from '@expo/vector-icons';\n\nconst SearchBar = forwardRef(({ placeholder, onChangeText, initialValue = '', style }, ref) => {\n  const { colors } = useTheme();\n  const [value, setValue] = useState(initialValue);\n  const inputRef = useRef(null);\n\n  useEffect(() => {\n    if (initialValue !== value) {\n      setValue(initialValue);\n    }\n  }, [initialValue]);\n\n  const handleChangeText = (text) => {\n    if (text !== value) {\n      setValue(text);\n      onChangeText(text);\n    }\n  };\n\n  return (\n    <View style={[styles.container, style, { backgroundColor: colors.surface }]}>\n      <IconButton\n        icon={() => <MaterialIcons name=\"search\" size={24} color={colors.primary} />}\n        onPress={() => inputRef.current?.focus()}\n      />\n      <TextInput\n        ref={inputRef}\n        style={[styles.input, { color: colors.text }]}\n        placeholder={placeholder}\n        placeholderTextColor={colors.placeholder}\n        value={value}\n        onChangeText={handleChangeText}\n        autoFocus={true}\n        keyboardType=\"default\"\n        returnKeyType=\"search\"\n        blurOnSubmit={false}\n      />\n    </View>\n  );\n});\n\nconst styles = StyleSheet.create({\n  container: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderRadius: 25, // Make it circular\n    elevation: 2,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 2,\n  },\n  input: {\n    flex: 1,\n    fontSize: 16,\n    paddingVertical: 8,\n    paddingRight: 8,\n  },\n});\n\nexport default memo(SearchBar);\n","import React, { useState, useEffect, useCallback, useMemo } from 'react';\nimport { View, StyleSheet, FlatList, TouchableOpacity, Platform, SafeAreaView, StatusBar, TouchableWithoutFeedback } from 'react-native';\nimport { Chip, Card, Title, Paragraph, Button, Portal, Modal, useTheme } from 'react-native-paper';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport SearchBar from '../components/SearchBar';\nimport { mockOwners } from '../data/mockData';\n\nconst Owners = ({ navigation }) => {\n  const { colors } = useTheme();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedFilters, setSelectedFilters] = useState([]);\n  const [tempFilters, setTempFilters] = useState([]);\n  const [isFilterModalVisible, setIsFilterModalVisible] = useState(false);\n  const [owners, setOwners] = useState([]);\n\n  useEffect(() => {\n    fetchOwners();\n  }, []);\n\n  const fetchOwners = async () => {\n    try {\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      setOwners(mockOwners);\n    } catch (error) {\n      console.error('Error fetching owners:', error);\n    }\n  };\n\n  const filters = [\n    { label: 'Dog Sitting', value: 'Dog' },\n    { label: 'Cat Sitting', value: 'Cat' },\n    { label: 'Exotic Sitting', value: 'Exotic' },\n    { label: 'Last Week', value: 'week' },\n    { label: 'Last Month', value: 'month' },\n    { label: 'Last Year', value: 'year' },\n  ];\n\n  const toggleFilter = useCallback((filter) => {\n    setTempFilters(prevFilters =>\n      prevFilters.includes(filter)\n        ? prevFilters.filter(f => f !== filter)\n        : [...prevFilters, filter]\n    );\n  }, []);\n\n  const applyFilters = useCallback(() => {\n    setSelectedFilters(tempFilters);\n    setIsFilterModalVisible(false);\n  }, [tempFilters]);\n\n  const filteredOwners = useMemo(() => {\n    return owners.filter(owner => {\n      const matchesSearch = owner.name.toLowerCase().includes(searchQuery.toLowerCase());\n      const matchesFilters = selectedFilters.length === 0 || selectedFilters.every(filter => {\n        if (['Dog', 'Cat', 'Exotic'].includes(filter)) {\n          return owner.pet_types.includes(filter);\n        }\n        const lastBookingDate = new Date(owner.last_booking);\n        const currentDate = new Date();\n        switch (filter) {\n          case 'week':\n            const weekAgo = new Date();\n            weekAgo.setDate(currentDate.getDate() - 7);\n            return lastBookingDate >= weekAgo;\n          case 'month':\n            const monthAgo = new Date();\n            monthAgo.setMonth(currentDate.getMonth() - 1);\n            return lastBookingDate >= monthAgo;\n          case 'year':\n            const yearAgo = new Date();\n            yearAgo.setFullYear(currentDate.getFullYear() - 1);\n            return lastBookingDate >= yearAgo;\n          default:\n            return true;\n        }\n      });\n      return matchesSearch && matchesFilters;\n    });\n  }, [owners, searchQuery, selectedFilters]);\n\n  const renderOwner = useCallback(({ item }) => (\n    <TouchableOpacity onPress={() => navigation.navigate('OwnerHistory', { ownerId: item.id })}>\n      <Card style={styles.ownerCard}>\n        <Card.Content>\n          <Title>{item.name}</Title>\n          <Paragraph>Last booking: {item.last_booking}</Paragraph>\n          <View style={styles.petTypes}>\n            {item.pet_types.map(pet => (\n              <Chip key={pet} style={styles.petChip}>{pet}</Chip>\n            ))}\n          </View>\n        </Card.Content>\n      </Card>\n    </TouchableOpacity>\n  ), [navigation]);\n\n  const handleSearchChange = useCallback((query) => {\n    setSearchQuery(query);\n  }, []);\n\n  return Platform.OS === 'web' ? (\n    <View style={styles.container}>\n      <View style={styles.searchAndFilterContainer}>\n        <TouchableWithoutFeedback onPress={() => {}}>\n          <SearchBar\n            placeholder=\"Search owners\"\n            onChangeText={handleSearchChange}\n            initialValue={searchQuery}\n            style={styles.searchBar}\n          />\n        </TouchableWithoutFeedback>\n        <Button \n          mode=\"outlined\" \n          onPress={() => {\n            setTempFilters(selectedFilters);\n            setIsFilterModalVisible(true);\n          }}\n          style={styles.filterButton}\n        >\n          Filters\n        </Button>\n      </View>\n      {filteredOwners.length > 0 ? (\n        <FlatList\n          data={filteredOwners}\n          renderItem={renderOwner}\n          keyExtractor={item => item.id}\n          contentContainerStyle={styles.ownerList}\n          keyboardShouldPersistTaps=\"handled\"\n          removeClippedSubviews={false}\n        />\n      ) : (\n        <View style={styles.noOwnersContainer}>\n          <Paragraph>No owners match your search or filters.</Paragraph>\n        </View>\n      )}\n      <Portal>\n        <Modal visible={isFilterModalVisible} onDismiss={() => setIsFilterModalVisible(false)} contentContainerStyle={styles.modalContainer}>\n          <TouchableOpacity onPress={() => setIsFilterModalVisible(false)} style={styles.closeIcon}>\n            <MaterialCommunityIcons name=\"close\" size={24} color=\"black\" />\n          </TouchableOpacity>\n          <Title style={styles.modalTitle}>Filters</Title>\n          <View style={styles.filtersContainer}>\n            {filters.map(filter => (\n              <Chip\n                key={filter.value}\n                style={styles.filterChip}\n                selected={tempFilters.includes(filter.value)}\n                onPress={() => toggleFilter(filter.value)}\n                icon={tempFilters.includes(filter.value) ? ({size, color}) => (\n                  <MaterialCommunityIcons name=\"check\" size={size} color={color} />\n                ) : undefined}\n              >\n                {filter.label}\n              </Chip>\n            ))}\n          </View>\n          <Button mode=\"contained\" onPress={applyFilters} style={styles.applyButton}>\n            Apply Filters\n          </Button>\n        </Modal>\n      </Portal>\n    </View>\n  ) : (\n    <SafeAreaView style={[styles.container, styles.androidSafeArea]}>\n      <View style={styles.searchAndFilterContainer}>\n        <TouchableWithoutFeedback onPress={() => {}}>\n          <SearchBar\n            placeholder=\"Search owners\"\n            onChangeText={handleSearchChange}\n            initialValue={searchQuery}\n            style={styles.searchBar}\n          />\n        </TouchableWithoutFeedback>\n        <Button \n          mode=\"outlined\" \n          onPress={() => {\n            setTempFilters(selectedFilters);\n            setIsFilterModalVisible(true);\n          }}\n          style={styles.filterButton}\n        >\n          Filters\n        </Button>\n      </View>\n      {filteredOwners.length > 0 ? (\n        <FlatList\n          data={filteredOwners}\n          renderItem={renderOwner}\n          keyExtractor={item => item.id}\n          contentContainerStyle={styles.ownerList}\n          keyboardShouldPersistTaps=\"handled\"\n          removeClippedSubviews={false}\n        />\n      ) : (\n        <View style={styles.noOwnersContainer}>\n          <Paragraph>No owners match your search or filters.</Paragraph>\n        </View>\n      )}\n      <Portal>\n        <Modal visible={isFilterModalVisible} onDismiss={() => setIsFilterModalVisible(false)} contentContainerStyle={styles.modalContainer}>\n          <TouchableOpacity onPress={() => setIsFilterModalVisible(false)} style={styles.closeIcon}>\n            <MaterialCommunityIcons name=\"close\" size={24} color=\"black\" />\n          </TouchableOpacity>\n          <Title style={styles.modalTitle}>Filters</Title>\n          <View style={styles.filtersContainer}>\n            {filters.map(filter => (\n              <Chip\n                key={filter.value}\n                style={styles.filterChip}\n                selected={tempFilters.includes(filter.value)}\n                onPress={() => toggleFilter(filter.value)}\n                icon={tempFilters.includes(filter.value) ? ({size, color}) => (\n                  <MaterialCommunityIcons name=\"check\" size={size} color={color} />\n                ) : undefined}\n              >\n                {filter.label}\n              </Chip>\n            ))}\n          </View>\n          <Button mode=\"contained\" onPress={applyFilters} style={styles.applyButton}>\n            Apply Filters\n          </Button>\n        </Modal>\n      </Portal>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n  },\n  androidSafeArea: {\n    paddingTop: Platform.OS === 'android' ? StatusBar.currentHeight : 0,\n  },\n  searchAndFilterContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    margin: 16,\n    maxWidth: 600,\n    alignSelf: 'center',\n    width: '100%',\n  },\n  searchBar: {\n    flex: 1,\n    marginRight: 8,\n    marginLeft: Platform.OS === 'web' ? 0 : 8,\n  },\n  filterButton: {\n    minWidth: 80,\n    marginRight: Platform.OS === 'web' ? 0 : 8,\n  },\n  ownerList: {\n    padding: 16,\n  },\n  ownerCard: {\n    marginBottom: 16,\n    maxWidth: 600,\n    alignSelf: 'center',\n    width: '100%',\n  },\n  petTypes: {\n    flexDirection: 'row',\n    marginTop: 8,\n  },\n  petChip: {\n    marginRight: 8,\n  },\n  noOwnersContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContainer: {\n    backgroundColor: 'white',\n    padding: 20,\n    margin: 20,\n    borderRadius: 5,\n    maxWidth: 600,\n    alignSelf: 'center',\n    width: '90%',\n  },\n  modalTitle: {\n    marginBottom: 10,\n  },\n  filtersContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    marginBottom: 20,\n  },\n  filterChip: {\n    margin: 4,\n  },\n  applyButton: {\n    marginTop: 10,\n  },\n  closeButton: {\n    marginTop: 10,\n    alignSelf: 'flex-end',\n  },\n  closeIcon: {\n    position: 'absolute',\n    top: 10,\n    right: 10,\n    zIndex: 1,\n  },\n});\n\nexport default Owners;\n","import React, { useState, useEffect } from 'react';\nimport {\n  Modal,\n  View,\n  Text,\n  TouchableOpacity,\n  StyleSheet,\n  ScrollView,\n  Switch,\n} from 'react-native';\nimport DateTimePicker from '@react-native-community/datetimepicker';\nimport DatePicker from './DatePicker';\nimport { theme } from '../styles/theme';\nimport { MaterialIcons } from '@expo/vector-icons';\n\nexport const CostCalculationModal = ({\n  visible,\n  onClose,\n  serviceName,\n  additionalRates = [],\n  professionalName = \"Professional\",\n  onContactPress,\n}) => {\n  const [startDate, setStartDate] = useState(new Date());\n  const [endDate, setEndDate] = useState(new Date());\n  const [additionalAnimals, setAdditionalAnimals] = useState(0);\n  const [isHolidayRate, setIsHolidayRate] = useState(false);\n  const [selectedRates, setSelectedRates] = useState({});\n  const [totalCost, setTotalCost] = useState(0);\n  const [platformFees, setPlatformFees] = useState(0);\n\n  const BASE_RATE = 20;\n  const ADDITIONAL_ANIMAL_RATE = 10;\n  const HOLIDAY_RATE = 40;\n  const PLATFORM_FEE_PERCENTAGE = 0.10;\n\n  const calculateTotalCost = () => {\n    // Start with either holiday rate or base rate\n    let subtotal = isHolidayRate ? HOLIDAY_RATE : BASE_RATE;\n    \n    // Add additional animal costs\n    subtotal += additionalAnimals * ADDITIONAL_ANIMAL_RATE;\n    \n    // Add any selected additional rates\n    Object.entries(selectedRates).forEach(([_, rate]) => {\n      if (rate.selected) {\n        subtotal += rate.amount;\n      }\n    });\n\n    setTotalCost(subtotal);\n    setPlatformFees(subtotal * PLATFORM_FEE_PERCENTAGE);\n  };\n\n  useEffect(() => {\n    // Initialize selectedRates object\n    const ratesObj = {};\n    additionalRates.forEach(rate => {\n      ratesObj[rate.title] = { ...rate, selected: false };\n    });\n    setSelectedRates(ratesObj);\n  }, [additionalRates]);\n\n  useEffect(() => {\n    calculateTotalCost();\n  }, [additionalAnimals, isHolidayRate, selectedRates]);\n\n  return (\n    <Modal\n      visible={visible}\n      animationType=\"slide\"\n      transparent={true}\n      onRequestClose={onClose}\n    >\n      <View style={styles.modalContainer}>\n        <View style={styles.modalContent}>\n          <TouchableOpacity \n            style={styles.closeIcon} \n            onPress={onClose}\n          >\n            <MaterialIcons name=\"close\" size={24} color={theme.colors.text} />\n          </TouchableOpacity>\n\n          <Text style={styles.modalTitle}>{serviceName}</Text>\n          \n          <ScrollView \n            style={styles.scrollContent} \n            showsVerticalScrollIndicator={true}\n            persistentScrollbar={true}\n          >\n            {/* Date Selection\n            <View style={styles.dateSection}>\n              <View style={styles.dateColumn}>\n                <Text style={styles.dateLabel}>Start Date:</Text>\n                <DatePicker\n                  value={startDate}\n                  mode=\"date\"\n                  onChange={(event, date) => {\n                    if (date) setStartDate(date);\n                  }}\n                />\n              </View>\n              \n              <View style={styles.dateColumn}>\n                <Text style={styles.dateLabel}>End Date:</Text>\n                <DatePicker\n                  value={endDate}\n                  mode=\"date\"\n                  onChange={(event, date) => {\n                    if (date) setEndDate(date);\n                  }}\n                />\n              </View>\n            </View> */}\n\n            {/* Base Rate */}\n            <View style={styles.rateItem}>\n              <Text>Base Rate</Text>\n              <Text>${BASE_RATE}</Text>\n            </View>\n\n            {/* Additional Animals */}\n            <View style={styles.rateItem}>\n              <Text>Additional Animals (${ADDITIONAL_ANIMAL_RATE} each)</Text>\n              <View style={styles.counterContainer}>\n                <TouchableOpacity \n                  onPress={() => setAdditionalAnimals(Math.max(0, additionalAnimals - 1))}\n                  style={styles.counterButton}\n                >\n                  <MaterialIcons name=\"remove\" size={24} color={theme.colors.primary} />\n                </TouchableOpacity>\n                <Text style={styles.counterText}>{additionalAnimals}</Text>\n                <TouchableOpacity \n                  onPress={() => setAdditionalAnimals(additionalAnimals + 1)}\n                  style={styles.counterButton}\n                >\n                  <MaterialIcons name=\"add\" size={24} color={theme.colors.primary} />\n                </TouchableOpacity>\n              </View>\n            </View>\n\n            {/* Holiday Rate */}\n            <View style={styles.rateItem}>\n              <Text>Holiday Rate (${HOLIDAY_RATE})</Text>\n              <Switch\n                value={isHolidayRate}\n                onValueChange={setIsHolidayRate}\n                trackColor={{ false: \"#767577\", true: theme.colors.primary }}\n              />\n            </View>\n\n            {/* Additional Rates */}\n            {Object.entries(selectedRates).map(([title, rate]) => (\n              <View key={title} style={styles.rateItem}>\n                <Text>{title} (${rate.amount})</Text>\n                <Switch\n                  value={rate.selected}\n                  onValueChange={(value) => {\n                    setSelectedRates({\n                      ...selectedRates,\n                      [title]: { ...rate, selected: value },\n                    });\n                  }}\n                  trackColor={{ false: \"#767577\", true: theme.colors.primary }}\n                />\n              </View>\n            ))}\n\n            {/* Total and Fees */}\n            <View style={styles.totalSection}>\n              <View style={styles.totalItem}>\n                <Text style={styles.totalLabel}>Subtotal:</Text>\n                <Text style={styles.totalAmount}>${totalCost}</Text>\n              </View>\n              <View style={styles.totalItem}>\n                <Text style={styles.totalLabel}>Service Fees (10%):</Text>\n                <Text style={styles.totalAmount}>${platformFees.toFixed(2)}</Text>\n              </View>\n              <View style={[styles.totalItem, styles.finalTotal]}>\n                <Text style={[styles.totalLabel, styles.finalTotalText]}>Total Cost:</Text>\n                <Text style={[styles.totalAmount, styles.finalTotalText]}>${(totalCost + platformFees).toFixed(2)}</Text>\n              </View>\n            </View>\n          </ScrollView>\n\n          <TouchableOpacity \n            style={styles.contactButton} \n            onPress={onContactPress}\n          >\n            <Text style={styles.contactButtonText}>Contact {professionalName}</Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\nconst styles = StyleSheet.create({\n  modalContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n  },\n  modalContent: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 12,\n    padding: 20,\n    paddingRight: 15,\n    width: '90%',\n    maxHeight: '43%',\n    maxWidth: 400,\n  },\n  scrollContent: {\n    flexGrow: 0,\n    marginBottom: 10,\n    paddingRight: 12,\n    marginRight: -7,\n  },\n  modalTitle: {\n    fontSize: theme.fontSizes.large,\n    fontWeight: 'bold',\n    marginBottom: 15,\n    textAlign: 'center',\n    marginTop: 5,\n    paddingHorizontal: 30,\n  },\n  dateSection: {\n    marginBottom: 20,\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    gap: 16,\n  },\n  dateColumn: {\n    flex: 1,\n  },\n  dateLabel: {\n    marginBottom: 8,\n    fontSize: theme.fontSizes.smallMedium,\n    color: theme.colors.text,\n  },\n  rateItem: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 15,\n  },\n  counterContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  counterButton: {\n    padding: 5,\n  },\n  counterText: {\n    marginHorizontal: 10,\n    fontSize: theme.fontSizes.medium,\n  },\n  totalSection: {\n    marginTop: 20,\n    borderTopWidth: 1,\n    borderTopColor: theme.colors.border,\n    paddingTop: 15,\n  },\n  totalItem: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 10,\n  },\n  finalTotal: {\n    borderTopWidth: 1,\n    borderTopColor: theme.colors.border,\n    paddingTop: 10,\n    marginTop: 5,\n  },\n  totalLabel: {\n    fontSize: theme.fontSizes.medium,\n    fontWeight: '600',\n  },\n  totalAmount: {\n    fontSize: theme.fontSizes.medium,\n    fontWeight: 'bold',\n  },\n  finalTotalText: {\n    fontSize: theme.fontSizes.mediumLarge,\n    fontWeight: 'bold',\n    color: theme.colors.primary,\n  },\n  closeButton: {\n    backgroundColor: theme.colors.primary,\n    padding: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n    marginTop: 10,\n  },\n  closeButtonText: {\n    color: theme.colors.surface,\n    fontSize: theme.fontSizes.medium,\n    fontWeight: '600',\n  },\n  closeIcon: {\n    position: 'absolute',\n    right: 15,\n    top: 15,\n    zIndex: 1,\n    padding: 5,\n  },\n  contactButton: {\n    backgroundColor: theme.colors.primary,\n    padding: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n    marginTop: 10,\n  },\n  contactButtonText: {\n    color: theme.colors.surface,\n    fontSize: theme.fontSizes.medium,\n    fontWeight: '600',\n  },\n});\n","import React, { useState } from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet } from 'react-native';\nimport { MaterialCommunityIcons, MaterialIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { CostCalculationModal } from './CostCalculationModal';\nimport { mockConversations, mockMessages, createNewConversation } from '../data/mockData';\n\nexport const ServiceCard = ({ \n  service, \n  onHeartPress, \n  isFavorite, \n  professionalName,\n  professionalId,\n  navigation\n}) => {\n  const [isModalVisible, setIsModalVisible] = useState(false);\n\n  const handleContactPress = () => {\n    // Check if conversation already exists\n    const existingConversation = mockConversations.find(\n      conv => conv.professionalId === professionalId\n    );\n\n    if (existingConversation) {\n      navigation.replace('MessageHistory', {\n        selectedConversation: existingConversation.id,\n        professionalName: professionalName,\n        professionalId: professionalId\n      });\n    } else {\n      // Create new conversation using the helper function\n      const newConversation = createNewConversation(\n        professionalId,\n        professionalName,\n        'current_user_id', // Replace with actual current user ID\n        'Me' // Current user name\n      );\n\n      // Add new conversation to mockConversations\n      mockConversations.unshift(newConversation);\n\n      // Initialize empty messages array for this conversation\n      mockMessages[newConversation.id] = [];\n\n      // Navigate directly to MessageHistory\n      navigation.replace('MessageHistory', {\n        selectedConversation: newConversation.id,\n        professionalName: professionalName,\n        professionalId: professionalId\n      });\n    }\n    setIsModalVisible(false);\n  };\n\n  return (\n    <View style={styles.serviceCard}>\n      {/* <TouchableOpacity \n        style={styles.heartButton}\n        onPress={() => onHeartPress(service.id)}\n      >\n        <MaterialIcons \n          name={isFavorite ? \"favorite\" : \"favorite-border\"} \n          size={24} \n          color={theme.colors.primary} \n        />\n      </TouchableOpacity> */}\n      \n      <View style={styles.contentContainer}>\n        <MaterialCommunityIcons name={service.icon} size={30} color={theme.colors.primary} />\n        <Text numberOfLines={2} style={styles.serviceName}>{service.name}</Text>\n        <Text style={styles.startingPrice}>Starting at ${service.startingPrice}</Text>\n        <View style={styles.animalTypeContainer}>\n          {service.animalTypes.map((type, index) => (\n            <Text key={index} style={styles.animalType}>{type}</Text>\n          ))}\n        </View>\n      </View>\n\n      <TouchableOpacity \n        style={styles.calculateButton}\n        onPress={() => setIsModalVisible(true)}\n      >\n        <Text style={styles.calculateButtonText}>Calculate Cost</Text>\n      </TouchableOpacity>\n\n      <CostCalculationModal\n        visible={isModalVisible}\n        onClose={() => setIsModalVisible(false)}\n        serviceName={service.name}\n        additionalRates={service.additionalRates || []}\n        professionalName={professionalName}\n        professionalId={professionalId}\n        onContactPress={handleContactPress}\n      />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  serviceCard: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 12,\n    padding: 12,\n    marginRight: 12,\n    width: 280,\n    height: 220,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n    position: 'relative',\n    justifyContent: 'space-between',\n  },\n  heartButton: {\n    position: 'absolute',\n    right: 8,\n    top: 8,\n    zIndex: 1,\n  },\n  serviceName: {\n    fontSize: theme.fontSizes.mediumLarge,\n    fontWeight: '600',\n    marginTop: 8,\n    marginBottom: 6,\n    fontFamily: theme.fonts.header.fontFamily,\n    flexShrink: 1,\n  },\n  startingPrice: {\n    fontSize: theme.fontSizes.medium + 2,\n    color: theme.colors.secondary,\n    marginBottom: 6,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  animalTypeContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 4,\n    marginBottom: 8,\n  },\n  animalType: {\n    fontSize: theme.fontSizes.small + 2,\n    color: theme.colors.secondary,\n    backgroundColor: theme.colors.background,\n    borderRadius: 8,\n    paddingHorizontal: 6,\n    paddingVertical: 2,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  calculateButton: {\n    backgroundColor: theme.colors.primary,\n    padding: 10,\n    borderRadius: 8,\n    alignItems: 'center',\n    marginTop: 'auto',\n  },\n  calculateButtonText: {\n    color: theme.colors.surface,\n    fontSize: theme.fontSizes.medium,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  contentContainer: {\n    flex: 1,\n  },\n});\n\nexport default ServiceCard;","import React, { useState, useEffect, useContext } from 'react';\nimport { View, Text, StyleSheet, ScrollView, Image, TouchableOpacity, Platform, useWindowDimensions, Modal } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport BackHeader from '../components/BackHeader';\nimport CrossPlatformView from '../components/CrossPlatformView';\nimport * as ImagePicker from 'expo-image-picker';\nimport { useNavigation } from '@react-navigation/native';\nimport { AuthContext } from '../context/AuthContext';\nimport { Calendar } from 'react-native-calendars';\nimport { mockPets } from '../data/mockData';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { SCREEN_WIDTH } from '../context/AuthContext';\nimport ServiceCard from '../components/ServiceCard';\nimport { mockServicesForCards } from '../data/mockData';\nimport { mockConversations, mockMessages } from '../data/mockData';\nimport platformNavigation from '../utils/platformNavigation';\n// Conditionally import WebMap component\nconst WebMap = Platform.OS === 'web' ? require('react-leaflet').MapContainer : null;\n\n// Mock API function to fetch profile data\nconst fetchProfileData = () => {\n  return new Promise((resolve) => {\n    setTimeout(() => {\n      resolve({\n        // profilePhoto: 'https://example.com/profile-photo.jpg',\n        bio: \"Hi! I'm an experienced pet professional who loves all animals. I have 5 years of experience caring for dogs, cats, and exotic pets.\",\n        petPhotos: [\n          // 'https://example.com/pet-photo-1.jpg',\n          // 'https://example.com/pet-photo-2.jpg',\n        ],\n        services: ['Dog Boarding', 'Dog Walking', 'Drop-In Visits', 'House Sitting'],\n        rates: {\n          boarding: '35',\n          daycare: '25',\n          houseSitting: '40',\n          dropInVisits: '20',\n          dogWalking: '15'\n        },\n        name: 'John Doe',\n        location: 'New York, NY'\n      });\n    }, 1000);\n  });\n};\n\nconst mockReviews = [\n  {\n    id: 1,\n    name: 'Noah M.',\n    service: 'Fish Tank Cleaning',\n    date: 'Dec 02, 2024',\n    rating: 5,\n    text: 'Dina was fantastic with our dog! Sent lots of photos and clearly made sure she was comfortable. Will definitely use again!',\n    photo: 'https://via.placeholder.com/50'\n  },\n  {\n    id: 2,\n    name: 'Kaily J.',\n    service: 'Ferrier',\n    date: 'Nov 26, 2024',\n    rating: 4,\n    text: 'Dina always takes such good care of Elijah. He was having tummy problems today and she kept me updated all day on how he was doing.',\n    photo: 'https://via.placeholder.com/50'\n  },\n  {\n    id: 3,\n    name: 'Nadia U.',\n    service: 'Reptile Boarding & Habitat Maintenance',\n    date: 'Nov 19, 2024',\n    rating: 5,\n    text: 'She took such great care of our puppy! Sent pictures and videos the whole time, her backyard was super nice and clean ❤️ my puppy was definitely in great hands! Bonus her dogs were so sweet with our puppy.',\n    photo: 'https://via.placeholder.com/50'\n  },\n  {\n    id: 4,\n    name: 'Vanessa G.',\n    service: 'Bird Feeding',\n    date: 'Nov 19, 2024',\n    rating: 5,\n    text: 'Dina was great! She communicated through the whole stay and sent plenty of videos and photos. 10/10',\n    photo: 'https://via.placeholder.com/50'\n  }\n];\n\nconst useResponsiveLayout = () => {\n  const { width } = useWindowDimensions();\n  const [isWideScreen, setIsWideScreen] = useState(true);\n\n  useEffect(() => {\n    setIsWideScreen(Platform.OS === 'web' && width >= 900);\n  }, [width]);\n\n  return isWideScreen;\n};\n\n// Move this outside the component and add platform safety\nif (Platform.OS === 'web' && typeof document !== 'undefined') {\n  try {\n    const style = document.createElement('style');\n    style.textContent = `\n      .services-scroll::-webkit-scrollbar {\n        -webkit-appearance: none;\n      }\n\n      .services-scroll::-webkit-scrollbar:vertical {\n        width: 11px;\n      }\n\n      .services-scroll::-webkit-scrollbar:horizontal {\n        height: 11px;\n      }\n\n      .services-scroll::-webkit-scrollbar-thumb {\n        border-radius: 8px;\n        border: 2px solid white;\n        background-color: rgba(0, 0, 0, .5);\n      }\n    `;\n    if (document.head) {\n      document.head.appendChild(style);\n    }\n  } catch (error) {\n    console.warn('MBA5511: Could not inject CSS styles:', error);\n  }\n}\n\n// Platform-aware storage helpers\nconst platformStorage = {\n  setItem: async (key, value) => {\n    try {\n      if (Platform.OS === 'web' && typeof sessionStorage !== 'undefined') {\n        sessionStorage.setItem(key, value);\n      } else {\n        await AsyncStorage.setItem(key, value);\n      }\n    } catch (error) {\n      console.warn('MBA5511: Storage setItem failed:', error);\n    }\n  },\n  \n  getItem: async (key) => {\n    try {\n      if (Platform.OS === 'web' && typeof sessionStorage !== 'undefined') {\n        return sessionStorage.getItem(key);\n      } else {\n        return await AsyncStorage.getItem(key);\n      }\n    } catch (error) {\n      console.warn('MBA5511: Storage getItem failed:', error);\n      return null;\n    }\n  },\n  \n  removeItem: async (key) => {\n    try {\n      if (Platform.OS === 'web' && typeof sessionStorage !== 'undefined') {\n        sessionStorage.removeItem(key);\n      } else {\n        await AsyncStorage.removeItem(key);\n      }\n    } catch (error) {\n      console.warn('MBA5511: Storage removeItem failed:', error);\n    }\n  }\n};\n\nconst ProfessionalProfile = ({ route, navigation }) => {\n  const { width: windowWidth } = useWindowDimensions();\n  const { screenWidth, isCollapsed, is_DEBUG } = useContext(AuthContext);\n  const [professionalData, setProfessionalData] = useState(null);\n  const [canGoBack, setCanGoBack] = useState(false);\n  const [bioModalVisible, setBioModalVisible] = useState(false);\n  const [reviewsModalVisible, setReviewsModalVisible] = useState(false);\n  const [specialistModalVisible, setSpecialistModalVisible] = useState(false);\n  const [favoriteServices, setFavoriteServices] = useState([]);\n  const [servicesModalVisible, setServicesModalVisible] = useState(false);\n  const [isMobile, setIsMobile] = useState(screenWidth <= 900);\n  const isWideScreen = useResponsiveLayout();\n\n  // Calculate marginLeft to account for sidebar on desktop\n  const marginLeft = screenWidth > 900 ? (isCollapsed ? 70 : 250) : 0;\n\n  // Debug component lifecycle\n  useEffect(() => {\n    if (is_DEBUG) {\n      console.log('MBA9999: ProfessionalProfile component mounted');\n    }\n    return () => {\n      if (is_DEBUG) {\n        console.log('MBA9999: ProfessionalProfile component unmounting');\n      }\n    };\n  }, []);\n\n  // Debug professional data changes\n  useEffect(() => {\n    if (is_DEBUG) {\n      console.log('MBA9999: Professional data changed:', professionalData ? professionalData.name : 'null');\n    }\n  }, [professionalData]);\n\n  useEffect(() => {\n    const updateLayout = () => {\n      setIsMobile(screenWidth <= 900);\n    };\n    updateLayout();\n  }, [screenWidth]);\n\n  useEffect(() => {\n    // Check if we can go back and if SearchProfessionalsListing exists in history\n    const state = navigation.getState();\n    const hasHistory = state.routes.some(route => route.name === 'SearchProfessionalsListing');\n    setCanGoBack(navigation.canGoBack() && hasHistory);\n  }, [navigation]);\n\n  const handleBack = async () => {\n    if (is_DEBUG) {\n      console.log('MBA9999: handleBack called, Platform:', Platform.OS);\n    }\n    \n    // Remove stored professional data\n    await platformStorage.removeItem('currentProfessional');\n    \n    if (is_DEBUG) {\n      console.log('MBA9999: Navigating back to SearchProfessionalsListing');\n    }\n    \n    // Use navigation.navigate for consistent behavior across platforms\n    navigation.navigate('SearchProfessionalsListing');\n  };\n\n  // Handle browser back button - REMOVED due to causing navigation issues\n  // The browser's native back button will work with React Navigation\n  // useEffect(() => {\n  //   if (Platform.OS === 'web') {\n  //     // Popstate handling removed - was causing automatic navigation\n  //   }\n  // }, []);\n\n  useEffect(() => {\n    const loadProfessionalData = async () => {\n      if (is_DEBUG) {\n        console.log('MBA9999: loadProfessionalData called', {\n          hasRouteParams: !!route?.params?.professional,\n          platform: Platform.OS\n        });\n      }\n      \n      if (route?.params?.professional) {\n        if (is_DEBUG) {\n          console.log('MBA9999: Setting professional data from route params:', route.params.professional.name);\n        }\n        setProfessionalData(route.params.professional);\n        // Store in platform-appropriate storage for persistence\n        await platformStorage.setItem('currentProfessional', JSON.stringify(route.params.professional));\n      } else {\n        // Try to get professional data from storage\n        const storedProfessional = await platformStorage.getItem('currentProfessional');\n        if (is_DEBUG) {\n          console.log('MBA9999: Checking storage for professional data:', !!storedProfessional);\n        }\n        \n        if (storedProfessional) {\n          try {\n            const parsedProfessional = JSON.parse(storedProfessional);\n            if (is_DEBUG) {\n              console.log('MBA9999: Setting professional data from storage:', parsedProfessional.name);\n            }\n            setProfessionalData(parsedProfessional);\n          } catch (error) {\n            console.error('MBA9999: Error parsing stored professional data:', error);\n            // Only redirect if we can't parse the data\n            navigation.replace('SearchProfessionalsListing');\n          }\n        } else {\n          if (is_DEBUG) {\n            console.log('MBA9999: No professional data found, redirecting to search');\n          }\n          // If no data, redirect back to search\n          navigation.replace('SearchProfessionalsListing');\n        }\n      }\n    };\n\n    loadProfessionalData();\n  }, [route?.params?.professional, navigation, is_DEBUG]);\n\n  const getContentWidth = () => {\n    if (Platform.OS === 'web') {\n      // Account for sidebar width on desktop\n      const availableWidth = screenWidth > 900 \n        ? windowWidth - (isCollapsed ? 70 : 250) \n        : windowWidth;\n      return Math.min(1000, availableWidth - 32); // 32px for padding\n    }\n    return windowWidth - 32; // 16px padding on each side\n  };\n\n  const toggleFavorite = (serviceId) => {\n    setFavoriteServices(prev => \n      prev.includes(serviceId) \n        ? prev.filter(id => id !== serviceId)\n        : [...prev, serviceId]\n    );\n  };\n\n  const renderServices = () => (\n    <View style={styles.servicesSection}>\n      <View style={styles.sectionHeader}>\n        <Text style={styles.sectionTitle}>Services</Text>\n        <TouchableOpacity \n          style={styles.seeAllButton}\n          onPress={() => setServicesModalVisible(true)}\n        >\n          <Text style={styles.seeAllButtonText}>See All</Text>\n        </TouchableOpacity>\n      </View>\n      <View style={styles.servicesWrapper}>\n        <ScrollView \n          horizontal\n          showsHorizontalScrollIndicator={true}\n          style={[\n            styles.servicesScroll,\n            Platform.OS === 'web' && { \n              className: 'services-scroll',\n              overflowX: 'scroll'\n            }\n          ]}\n          contentContainerStyle={styles.servicesScrollContent}\n          persistentScrollbar={true}\n        >\n          {mockServicesForCards.slice(0, 5).map(service => (\n            <ServiceCard \n              key={service.id}\n              service={service}\n              onHeartPress={toggleFavorite}\n              isFavorite={favoriteServices.includes(service.id)}\n              professionalName={professionalData.name}\n              professionalId={professionalData.id}\n              navigation={navigation}\n            />\n          ))}\n        </ScrollView>\n      </View>\n    </View>\n  );\n\n  if (!professionalData) {\n    return (\n      <CrossPlatformView fullWidthHeader={true}>\n        <BackHeader \n          title=\"Professional Profile\" \n          onBackPress={handleBack}\n        />\n        <View style={styles.centered}>\n          <Text>Loading...</Text>\n        </View>\n      </CrossPlatformView>\n    );\n  }\n\n  const renderProfilePhoto = () => {\n    if (professionalData.profilePicture) {\n      return <Image source={{ uri: professionalData.profilePicture }} style={styles.profilePhoto} />;\n    }\n    return (\n      <View style={[styles.profilePhoto, styles.profilePhotoPlaceholder]}>\n        <MaterialCommunityIcons name=\"account\" size={80} color={theme.colors.primary} />\n      </View>\n    );\n  };\n\n  const renderSpecialistExperience = () => (\n    <View style={styles.specialistSection}>\n      <Text style={styles.sectionTitle}>Specialist Experience</Text>\n      <TruncatedText text={professionalData?.bio || ''} />\n    </View>\n  );\n\n  const renderRatingStars = () => (\n    <View style={styles.ratingContainer}>\n      <MaterialCommunityIcons name=\"star\" size={24} color={theme.colors.primary} />\n      <Text style={styles.rating}>{professionalData.reviews}</Text>\n      <Text style={[styles.reviewCount, { marginLeft: 12 }]}>({professionalData.reviewCount || 50} reviews)</Text>\n    </View>\n  );\n\n  // Add new component for truncated text with Read More\n  const TruncatedText = ({ text, maxLines = 3 }) => (\n    <View>\n      <Text \n        numberOfLines={maxLines} \n        style={styles.specialistText}\n      >\n        {text}\n      </Text>\n      <TouchableOpacity \n        style={styles.readMoreButton}\n        onPress={() => setSpecialistModalVisible(true)}\n      >\n        <Text style={styles.readMoreText}>Read more</Text>\n      </TouchableOpacity>\n    </View>\n  );\n\n  const renderMap = () => {\n    if (Platform.OS === 'web' && WebMap) {\n      const { MapContainer, TileLayer, Marker } = require('react-leaflet');\n      return (\n        <View style={styles.mapContainer}>\n          <MapContainer\n            center={[38.8339, -104.8214]} // Default coordinates\n            zoom={13}\n            style={{ height: 400, width: '100%' }}\n          >\n            <TileLayer\n              url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n              attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n            />\n            <Marker position={[38.8339, -104.8214]} />\n          </MapContainer>\n        </View>\n      );\n    }\n    // For mobile, return null or a placeholder\n    return null;\n  };\n\n  const renderPets = () => {\n    if (!mockPets || mockPets.length === 0) return null;\n    \n    return (\n      <View style={styles.petsSection}>\n        <Text style={styles.sectionTitle}>Pets</Text>\n        {mockPets.map((pet, index) => (\n          <View key={pet.id} style={styles.petItem}>\n            <View style={styles.petPhoto}>\n              <MaterialCommunityIcons \n                name={pet.animal_type.toLowerCase() === 'dog' ? 'dog' : \n                      pet.animal_type.toLowerCase() === 'cat' ? 'cat' : 'snake'} \n                size={30} \n                color={theme.colors.primary} \n              />\n            </View>\n            <View style={styles.petInfo}>\n              <Text style={styles.petName}>{pet.name}</Text>\n              <Text style={styles.petBreed}>{pet.breed}</Text>\n              <Text style={styles.petDetails}>\n                {`${pet.weight} lbs, ${pet.age.years} years${pet.age.months ? ` ${pet.age.months} months` : ''}`}\n              </Text>\n            </View>\n          </View>\n        ))}\n      </View>\n    );\n  };\n\n  const styles2 = StyleSheet.create({\n    modalContent: {\n      backgroundColor: theme.colors.background,\n      padding: 24,\n      borderRadius: 12,\n      width: Platform.OS === 'web' ? \n        (screenWidth <= 650 ? '90%' : '60%') : \n        '90%',\n      maxWidth: 800,\n      maxHeight: '90%',\n    },\n  });\n\n  // Create services array from professionalData\n  const services = [\n    { name: 'Boarding', price: \"25\" },\n    { name: 'Doggy Day Care', price: \"30\" },\n    { name: 'House Sitting', price: \"40\" },\n    { name: 'Drop-In Visits', price: \"35\" },\n    { name: 'Dog Walking', price: \"45\" }\n  ];\n\n  const HomeFeature = ({ text }) => (\n    <View style={styles.featureBubble}>\n      <Text style={styles.featureText}>{text}</Text>\n    </View>\n  );\n\n  const renderReviews = () => (\n    <View style={styles.reviewsSection}>\n      <Text style={styles.sectionTitle}>Reviews</Text>\n      <View style={styles.reviewsGrid}>\n        {mockReviews.slice(0, 4).map(renderReview)}\n      </View>\n      <TouchableOpacity \n        style={styles.readMoreButton}\n        onPress={() => setReviewsModalVisible(true)}\n      >\n        <Text style={styles.readMoreText}>Read more reviews</Text>\n      </TouchableOpacity>\n    </View>\n  );\n\n  const renderReview = (review) => (\n    <View key={review.id} style={styles.reviewItem}>\n      <View style={styles.reviewHeader}>\n        <Image source={{ uri: review.photo }} style={styles.reviewerPhoto} />\n        <View style={styles.reviewerInfo}>\n          <Text style={styles.reviewerName}>{review.name}</Text>\n          <View style={styles.reviewMeta}>\n            <View style={styles.starContainer}>\n              {[...Array(5)].map((_, index) => (\n                <MaterialCommunityIcons\n                  key={index}\n                  name={index < review.rating ? \"star\" : \"star-outline\"}\n                  size={16}\n                  color={theme.colors.primary}\n                />\n              ))}\n            </View>\n            <View style={styles.serviceInfo}>\n              <MaterialCommunityIcons name=\"home\" size={16} color={theme.colors.secondary} />\n              <Text style={styles.serviceText}>{review.service} • {review.date}</Text>\n            </View>\n          </View>\n        </View>\n      </View>\n      <Text style={styles.reviewText}>{review.text}</Text>\n    </View>\n  );\n\n  const renderHomeSection = () => (\n    <View style={styles.homeSection}>\n      <Text style={styles.sectionTitle}>Home</Text>\n      <View style={styles.homeFeaturesGrid}>\n        <HomeFeature text=\"No children present\" />\n        <HomeFeature text=\"Has security system\" />\n        <HomeFeature text=\"Non-smoking household\" />\n        <HomeFeature text=\"Has 2 dogs\" />\n        <HomeFeature text=\"Dogs allowed on bed\" />\n        <HomeFeature text=\"Dogs allowed on furniture\" />\n        <HomeFeature text=\"Potty breaks every 0-2 hours\" />\n      </View>\n    </View>\n\n  );\n\n  const renderAboutSection = () => (\n    <View style={styles.aboutSection}>\n      <Text style={styles.sectionTitle}>About {professionalData.name}</Text>\n      <View style={styles.aboutSubsections}>\n        <View style={styles.communicationSection}>\n          <Text style={styles.subsectionTitle}>Communication</Text>\n          <Text>22 repeat pet parents</Text>\n          <Text>100% response rate</Text>\n          <Text>Usually responds in a few minutes</Text>\n          <Text>90% bookings with photo updates</Text>\n        </View>\n        <View style={styles.skillsSection}>\n          <Text style={styles.subsectionTitle}>Skills</Text>\n          <Text>3 years of experience</Text>\n        </View>\n      </View> \n    </View>\n  );\n\n  const renderAvailability = () => (\n    <View style={dynamicStyles.dynamicServicesBox}>\n      <View style={styles.calendarSection}>\n        <Text style={[styles.sectionTitle, { marginBottom: 0 }]}>Availability</Text>\n        <Calendar\n          style={styles.calendar}\n          theme={{\n            calendarBackground: theme.colors.surface,\n            selectedDayBackgroundColor: theme.colors.primary,\n            selectedDayTextColor: '#ffffff',\n            todayTextColor: theme.colors.primary,\n          }}\n        />\n      </View>\n    </View>\n  );\n\n  const renderGallery = () => {\n    return (\n      <View style={styles.gallerySection}>\n        <Text style={styles.sectionTitle}>53 Photos</Text>\n        <View style={styles.photoGrid}>\n          {[1, 2, 3, 4].map((_, index) => (\n            <Image \n              key={index}\n              source={{ uri: 'https://via.placeholder.com/150' }}\n              style={styles.galleryPhoto}\n                      />\n          ))}\n        </View>\n      </View>\n    );\n  };\n\n  const additionalStyles = StyleSheet.create({\n    servicesSection: {\n      marginBottom: 24,\n    },\n    sectionHeader: {\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      marginBottom: 16,\n    },\n    seeAllButton: {\n      borderWidth: 1,\n      borderColor: theme.colors.primary,\n      paddingHorizontal: 12,\n      paddingVertical: 6,\n      borderRadius: 8,\n      alignSelf: 'flex-start',\n      minWidth: 'auto',\n      width: 'auto',\n    },\n    seeAllButtonText: {\n      color: theme.colors.primary,\n      fontSize: 16,\n      fontWeight: '600',\n      textAlign: 'center',\n    },\n    servicesScroll: {\n      marginHorizontal: -24, // To counteract parent padding\n      paddingHorizontal: 24,\n    },\n    modalServicesGrid: {\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      gap: 16,\n      justifyContent: 'center',\n      padding: 16,\n    },\n  });\n\n  const handleContactPress = () => {\n    // Check if conversation already exists\n    const existingConversation = mockConversations.find(\n      conv => conv.professionalId === professionalData.id\n    );\n\n    if (existingConversation) {\n      // Use replace instead of navigate to avoid navigation stack issues\n      navigation.replace('MessageHistory', {\n        selectedConversation: existingConversation.id\n      });\n    } else {\n      // Create new conversation\n      const newConversation = {\n        id: `conv_${Date.now()}`,\n        name: professionalData.name,\n        professionalId: professionalData.id,\n        lastMessage: '',\n        timestamp: new Date().toISOString(),\n        unread: false,\n        bookingStatus: null\n      };\n\n      // Add new conversation to mockConversations\n      mockConversations.unshift(newConversation);\n\n      // Initialize empty messages array for this conversation\n      mockMessages[newConversation.id] = [];\n\n      // Use replace instead of navigate\n      navigation.replace('MessageHistory', {\n        selectedConversation: newConversation.id\n      });\n    }\n  };\n\n  // Create dynamic styles that account for sidebar\n  const createStyles = (screenWidth, isCollapsed) => StyleSheet.create({\n    mainContainer: {\n      flex: 1,\n      backgroundColor: theme.colors.background,\n      height: Platform.OS === 'web' ? '100vh' : '100%',\n      overflow: 'hidden',\n      position: Platform.OS === 'web' ? 'fixed' : 'relative',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      marginLeft: screenWidth > 900 ? (isCollapsed ? 70 : 250) : 0,\n      transition: Platform.OS === 'web' ? 'margin-left 0.3s ease' : undefined,\n    },\n    dynamicProfileSection: {\n      backgroundColor: theme.colors.surface,\n      borderRadius: 12,\n      padding: 16,\n      marginBottom: 16,\n      alignItems: 'center',\n      width: '100%',\n      display: windowWidth >= 600 ? 'flex' : 'block',\n    },\n    dynamicProfileSectionMobile: {\n      backgroundColor: theme.colors.surface,\n      borderRadius: 12,\n      padding: 16,\n      marginBottom: 16,\n      alignItems: 'center',\n      width: '100%',\n      maxWidth: 500,\n      alignSelf: 'center',\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n    },\n    dynamicServicesBox: {\n      backgroundColor: theme.colors.surface,\n      padding: 24,\n      paddingTop: 0,\n      borderRadius: 12,\n      marginTop: 24,\n      shadowColor: '#000',\n      shadowOffset: { width: 0, height: 2 },\n      shadowOpacity: 0.2,\n      shadowRadius: 4,\n      elevation: 3,\n      width: '100%',\n      maxWidth: Platform.OS === 'web' ? 600 : undefined,\n      alignSelf: 'center',\n    },\n  });\n\n  const dynamicStyles = createStyles(screenWidth, isCollapsed);\n\n  // Add this new function to render profile section based on screen size\n  const renderProfileSection = () => {\n    if (windowWidth >= 600) {\n      // Web version - original layout\n      return (\n        <View style={[styles.leftColumn, !isWideScreen && styles.leftColumnMobile]}>\n          <View style={[styles.profileSection, !isWideScreen && styles.profileSectionMobile]}>\n            {renderProfilePhoto()}\n            <Text style={styles.name}>{professionalData.name}</Text>\n            <Text style={styles.location}>{professionalData.location}</Text>\n            {renderRatingStars()}\n            <TouchableOpacity style={styles.contactButton} onPress={handleContactPress}>\n              <Text style={styles.contactButtonText}>Contact {professionalData.name}</Text>\n            </TouchableOpacity>\n          </View>\n          {isWideScreen && renderAvailability()}\n          {isWideScreen && renderMap()}\n          {isWideScreen && mockPets && mockPets.length > 0 && renderPets()}\n        </View>\n      );\n    } else {\n      // Mobile version - fixed layout\n      return (\n        <View style={[dynamicStyles.dynamicProfileSection, dynamicStyles.dynamicProfileSectionMobile]}>\n          {renderProfilePhoto()}\n          <Text style={styles.name}>{professionalData.name}</Text>\n          <Text style={styles.location}>{professionalData.location}</Text>\n          {renderRatingStars()}\n          <TouchableOpacity style={styles.contactButton} onPress={handleContactPress}>\n            <Text style={styles.contactButtonText}>Contact {professionalData.name}</Text>\n          </TouchableOpacity>\n        </View>\n      );\n    }\n  };\n\n  return (\n    <View style={dynamicStyles.mainContainer}>\n      <CrossPlatformView fullWidthHeader={true} contentWidth=\"1200px\">\n        <BackHeader \n          title=\"Professional Profile\" \n          onBackPress={handleBack}\n        />\n        <ScrollView contentContainerStyle={styles.scrollViewContent}>\n          <View style={[styles.content, { width: getContentWidth() }]}>\n            <View style={[styles.twoColumnLayout, !isWideScreen && styles.singleColumnLayout]}>\n              {renderProfileSection()}\n              <View style={styles.rightColumn}>\n                {/* TODO: Add back after MVP launch */}\n                {/* {renderGallery()} */}\n                {renderServices()}\n                {!isWideScreen && renderAvailability()}\n                {renderSpecialistExperience()}\n                {renderReviews()}\n                {renderHomeSection()}\n                {!isWideScreen && renderMap()}\n              </View>\n            </View>\n          </View>\n        </ScrollView>\n\n        {/* Bio Modal */}\n        <Modal\n          visible={bioModalVisible}\n          animationType=\"slide\"\n          transparent={true}\n          onRequestClose={() => setBioModalVisible(false)}\n        >\n          <View style={styles.modalContainer}>\n            <View style={styles2.modalContent}>\n              <Text style={styles.bioText}>{professionalData.bio}</Text>\n              <TouchableOpacity \n                style={styles.closeButton}\n                onPress={() => setBioModalVisible(false)}\n              >\n                <Text style={styles.closeButtonText}>Close</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </Modal>\n\n        {/* Reviews Modal */}\n        <Modal\n          visible={reviewsModalVisible}\n          animationType=\"slide\"\n          transparent={true}\n          onRequestClose={() => setReviewsModalVisible(false)}\n        >\n          <View style={styles.modalContainer}>\n            <View style={styles2.modalContent}>\n              <View style={styles.modalHeader}>\n                <Text style={styles.modalTitle}>All Reviews</Text>\n                <TouchableOpacity \n                  style={styles.modalCloseIcon}\n                  onPress={() => setReviewsModalVisible(false)}\n                >\n                  <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.text} />\n                </TouchableOpacity>\n              </View>\n              <ScrollView \n                style={styles.modalScroll}\n                contentContainerStyle={styles.modalScrollContent}\n              >\n                {mockReviews.map((review) => (\n                  <View key={review.id} style={styles.modalReviewItem}>\n                    {renderReview(review)}\n                  </View>\n                ))}\n              </ScrollView>\n            </View>\n          </View>\n        </Modal>\n\n        {/* Specialist Experience Modal */}\n        <Modal\n          visible={specialistModalVisible}\n          animationType=\"slide\"\n          transparent={true}\n          onRequestClose={() => setSpecialistModalVisible(false)}\n        >\n          <View style={styles.modalContainer}>\n            <View style={styles2.modalContent}>\n              <View style={styles.modalHeader}>\n                <Text style={styles.modalTitle}>Specialist Experience</Text>\n                <TouchableOpacity \n                  style={styles.modalCloseIcon}\n                  onPress={() => setSpecialistModalVisible(false)}\n                >\n                  <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.text} />\n                </TouchableOpacity>\n              </View>\n              <ScrollView \n                style={styles.modalScroll}\n                contentContainerStyle={styles.modalScrollContent}\n              >\n                <Text style={styles.bioText}>{professionalData?.bio}</Text>\n              </ScrollView>\n            </View>\n          </View>\n        </Modal>\n\n        {/* Services Modal */}\n        <Modal\n          visible={servicesModalVisible}\n          animationType=\"slide\"\n          transparent={true}\n          onRequestClose={() => setServicesModalVisible(false)}\n        >\n          <View style={styles.modalContainer}>\n            <View style={styles2.modalContent}>\n              <View style={styles.modalHeader}>\n                <Text style={styles.modalTitle}>All Services</Text>\n                <TouchableOpacity \n                  style={styles.modalCloseIcon}\n                  onPress={() => setServicesModalVisible(false)}\n                >\n                  <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.text} />\n                </TouchableOpacity>\n              </View>\n              <ScrollView \n                style={styles.modalScroll}\n                contentContainerStyle={styles.modalScrollContent}\n              >\n                <View style={styles.modalServicesGrid}>\n                  {mockServicesForCards.map(service => (\n                    <ServiceCard \n                      key={service.id}\n                      service={service}\n                      onHeartPress={toggleFavorite}\n                      isFavorite={favoriteServices.includes(service.id)}\n                      professionalName={professionalData.name}\n                      professionalId={professionalData.id}\n                      navigation={navigation}\n                    />\n                  ))}\n                </View>\n              </ScrollView>\n            </View>\n          </View>\n        </Modal>\n      </CrossPlatformView>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  scrollViewContent: {\n    flexGrow: 1,\n    paddingBottom: Platform.OS === 'web' ? 16 : 80,\n    height: Platform.OS === 'web' ? 'calc(100vh - 124px)' : '100%',\n    overflow: 'auto',\n  },\n  content: {\n    alignSelf: 'center',\n    padding: 24,\n  },\n  topSection: {\n    flexDirection: Platform.OS === 'web' ? 'row' : 'column',\n    gap: 24,\n    marginBottom: 24,\n  },\n  gallerySection: {\n    maxHeight: 400,\n    overflow: 'hidden',\n    marginBottom: 24,\n  },\n  photoGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 8,\n    maxHeight: 320,\n    overflow: 'auto',\n  },\n  bottomSection: {\n    flexDirection: Platform.OS === 'web' ? 'row' : 'column',\n    gap: 24,\n  },\n  servicesSection: {\n    flex: Platform.OS === 'web' ? 1 : undefined,\n    backgroundColor: theme.colors.background,\n    padding: 24,\n    borderRadius: 12,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n  },\n  aboutSection: {\n    maxHeight: 300,\n    overflow: 'auto',\n    marginBottom: 24,\n    padding: 16,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 12,\n  },\n  profileHeader: {\n    alignItems: Platform.OS === 'web' ? 'flex-start' : 'center',\n  },\n  profileInfo: {\n    alignItems: Platform.OS === 'web' ? 'flex-start' : 'center',\n  },\n  hostingSection: {\n    marginTop: 24,\n  },\n  hostTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginBottom: 12,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  weightRanges: {\n    gap: 8,\n  },\n  weightRange: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  galleryPhoto: {\n    width: Platform.OS === 'web' ? 100 : 50,\n    height: Platform.OS === 'web' ? 100 : 50,\n    borderRadius: 8,\n  },\n  centered: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  profilePhoto: {\n    width: 120,\n    height: 120,\n    borderRadius: 60,\n    marginBottom: 16,\n    alignSelf: 'center',\n  },\n  profilePhotoPlaceholder: {\n    backgroundColor: theme.colors.surface,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginBottom: 10,\n  },\n  name: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 4,\n    textAlign: 'center',\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  location: {\n    fontSize: 16,\n    color: theme.colors.secondary,\n    marginBottom: 8,\n    textAlign: 'center',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  section: {\n    padding: 20,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  sectionTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginBottom: 10,\n    color: theme.colors.primary,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  bioInput: {\n    backgroundColor: theme.colors.surface,\n  },\n  service: {\n    fontSize: 16,\n    marginBottom: 5,\n  },\n  rateItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 10,\n  },\n  rateLabel: {\n    flex: 1,\n    fontSize: 16,\n  },\n  rateInput: {\n    flex: 1,\n    backgroundColor: theme.colors.surface,\n  },\n  photoGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n  },\n  petPhoto: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    backgroundColor: theme.colors.surface,\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  addPhotoButton: {\n    width: 100,\n    height: 100,\n    margin: 5,\n    borderRadius: 10,\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  saveButton: {\n    margin: 20,\n  },\n  ratingContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    marginBottom: 16,\n  },\n  rating: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    marginLeft: 5,\n  },\n  reviewCount: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n    marginLeft: 4,\n  },\n  contactButton: {\n    backgroundColor: theme.colors.primary,\n    padding: 12,\n    borderRadius: 8,\n    alignSelf: 'center',\n  },\n  contactButtonText: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: theme.colors.surface,\n    textAlign: 'center',\n  },\n  statsContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    marginBottom: 20,\n  },\n  statItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginRight: 10,\n  },\n  statText: {\n    fontSize: 16,\n    marginLeft: 5,\n  },\n  bioText: {\n    fontSize: 18,\n    lineHeight: 28,\n    color: theme.colors.text,\n    overflow: 'hidden',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  serviceItem: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 10,\n  },\n  serviceText: {\n    fontSize: 8,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  servicePrice: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  skillsGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n  },\n  skillBadge: {\n    backgroundColor: theme.colors.surface,\n    padding: 10,\n    borderRadius: 5,\n    margin: 5,\n  },\n  skillText: {\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  photoGallery: {\n    flexDirection: 'row',\n  },\n  calculatorText: {\n    fontSize: 16,\n    color: theme.colors.secondary,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  additionalRatesButton: {\n    marginTop: 16,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 6,\n    backgroundColor: theme.colors.surface,\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.outline,\n  },\n  additionalRatesText: {\n    color: theme.colors.primary,\n    fontSize: 16,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  calendarSection: {\n    marginTop: 24,\n  },\n  readMoreButton: {\n    marginTop: 8,\n  },\n  readMoreText: {\n    color: theme.colors.primary,\n    fontSize: 16,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  reviewsSection: {\n    marginVertical: 32,\n    width: '100%',\n    backgroundColor: theme.colors.background,\n  },\n  reviewItem: {\n    marginBottom: 16,\n    backgroundColor: theme.colors.surface,\n    padding: 16,\n    borderRadius: 12,\n    maxWidth: Platform.OS === 'web' ? 600 : undefined,\n  },\n  servicesSection: {\n    backgroundColor: theme.colors.surface,\n    padding: 24,\n    borderRadius: 12,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n    marginBottom: 24,\n  },\n  mapContainer: {\n    height: 400,\n    width: '100%',\n    marginVertical: 24,\n  },\n  map: {\n    flex: 1,\n  },\n  petsSection: {\n    marginBottom: 24,\n    backgroundColor: theme.colors.surface,\n    padding: 16,\n    borderRadius: 12,\n  },\n  petItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 12,\n    padding: 12,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    backgroundColor: theme.colors.background,\n  },\n  petInfo: {\n    marginLeft: 12,\n    flex: 1,\n  },\n  petName: {\n    fontSize: 16,\n    fontWeight: '600',\n    marginBottom: 2,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  petBreed: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n    marginBottom: 2,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  petDetails: {\n    fontSize: 14,\n    color: theme.colors.secondary,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  modalContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n  },\n  aboutSubsections: {\n    flexDirection: Platform.OS === 'web' ? 'row' : 'column',\n    gap: 24,\n  },\n  communicationSection: {\n    flex: 1,\n  },\n  skillsSection: {\n    flex: 1,\n  },\n  homeDetails: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 16,\n  },\n  noReviews: {\n    fontSize: 16,\n    color: theme.colors.secondary,\n    fontStyle: 'italic',\n    textAlign: 'center',\n    marginTop: 16,\n  },\n  twoColumnLayout: {\n    flexDirection: 'row',\n    gap: 24,\n  },\n  singleColumnLayout: {\n    flexDirection: 'column',\n  },\n  leftColumn: {\n    flex: Platform.OS === 'web' ? 1 : undefined,\n    maxWidth: Platform.OS === 'web' ? 400 : undefined,\n  },\n  rightColumn: {\n    flex: Platform.OS === 'web' ? 2 : undefined,\n  },\n  calendar: {\n    height: 300,\n    marginTop: 16,\n  },\n  serviceText: {\n    fontSize: 12,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '100',\n  },\n  homeFeaturesGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 8,\n    marginTop: 16,\n  },\n  featureBubble: {\n    backgroundColor: theme.colors.surface,\n    paddingVertical: 8,\n    paddingHorizontal: 16,\n    borderRadius: 20,\n    borderWidth: 1,\n    borderColor: theme.colors.outline,\n  },\n  featureText: {\n    fontSize: 14,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  reviewItem: {\n    marginBottom: 24,\n    backgroundColor: theme.colors.surface,\n    padding: 16,\n    borderRadius: 12,\n  },\n  reviewHeader: {\n    flexDirection: 'row',\n    marginBottom: 12,\n  },\n  reviewerPhoto: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    marginRight: 12,\n  },\n  reviewerInfo: {\n    flex: 1,\n  },\n  reviewerName: {\n    fontSize: 16,\n    fontWeight: '600',\n    marginBottom: 4,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  serviceInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 4,\n  },\n  reviewText: {\n    fontSize: 14,\n    lineHeight: 20,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  modalTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n    marginBottom: 16,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  modalScroll: {\n    maxHeight: Platform.OS === 'web' ? '70vh' : '80%',\n  },\n  closeButton: {\n    marginTop: 16,\n    alignItems: 'center',\n    padding: 12,\n    backgroundColor: theme.colors.primary,\n    borderRadius: 8,\n  },\n  closeButtonText: {\n    color: '#fff',\n    fontSize: 16,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  modalCloseIcon: {\n    padding: 8,\n  },\n  modalScrollContent: {\n    paddingBottom: 24,\n  },\n  modalContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    padding: Platform.OS === 'web' ? 40 : 20,\n  },\n  reviewsGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 16,\n    marginTop: 16,\n  },\n  reviewItem: {\n    backgroundColor: theme.colors.surface,\n    padding: 16,\n    borderRadius: 12,\n    flex: 1,\n    minWidth: Platform.OS === 'web' ? 300 : '100%',\n    // maxWidth: Platform.OS === 'web' ? 'calc(50% - 8px)' : undefined,\n    marginBottom: 0, // Remove default margin since we're using gap\n  },\n  specialistSection: {\n    marginTop: 24,\n    backgroundColor: theme.colors.surface,\n    padding: 16,\n    borderRadius: 12,\n  },\n  specialistText: {\n    fontSize: 16,\n    lineHeight: 24,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  modalReviewItem: {\n    marginBottom: 16,\n    width: '100%',\n  },\n  leftColumnMobile: {\n    maxWidth: '100%',\n    alignItems: 'center',\n  },\n  seeAllButton: {\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 8,\n    alignSelf: 'flex-start',\n    minWidth: 'auto',\n    width: 'auto',\n  },\n  seeAllButtonText: {\n    color: theme.colors.primary,\n    fontSize: 16,\n    fontWeight: '600',\n    textAlign: 'center',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  modalServicesGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: 16,\n    justifyContent: 'center',\n    padding: 16,\n  },\n  reviewMeta: {\n    gap: 4,\n  },\n  starContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 4,\n  },\n});\n\nexport default ProfessionalProfile;\n","import React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, ActivityIndicator } from 'react-native';\nimport { theme } from '../styles/theme';\nimport axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { API_BASE_URL } from '../config/config';\n\nconst ContractList = () => {\n  const [contracts, setContracts] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchContracts();\n  }, []);\n\n  const fetchContracts = async () => {\n    setLoading(true);\n    try {\n      const token = await AsyncStorage.getItem('userToken');\n      if (!token) {\n        console.error('No token found');\n        return;\n      }\n      const response = await axios.get(`${API_BASE_URL}/api/contracts/`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      setContracts(response.data);\n    } catch (error) {\n      console.error('Error fetching contracts:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  if (loading) {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color={theme.colors.primary} />\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.sectionTitle}>Your Contracts</Text>\n      {contracts.length === 0 ? (\n        <Text style={styles.noContractsText}>No contracts yet</Text>\n      ) : (\n        contracts.map((contract) => (\n          <View key={contract.id} style={styles.card}>\n            <Text style={styles.contractTitle}>{contract.title}</Text>\n            <Text style={styles.ownerName}>Owner: {contract.owner_name}</Text>\n            <View style={styles.buttonContainer}>\n              <TouchableOpacity style={styles.button}>\n                <Text style={styles.buttonText}>Share</Text>\n              </TouchableOpacity>\n              <TouchableOpacity style={styles.button}>\n                <Text style={styles.buttonText}>Edit</Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        ))\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    marginTop: 16,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginTop: 50,\n  },\n  sectionTitle: {\n    fontSize: theme.fontSizes.mediumLarge,\n    fontWeight: 'bold',\n    marginBottom: 8,\n    color: theme.colors.text,\n  },\n  noContractsText: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    textAlign: 'center',\n    marginTop: 20,\n  },\n  card: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    padding: 16,\n    marginBottom: 16,\n  },\n  contractTitle: {\n    fontSize: theme.fontSizes.medium,\n    fontWeight: 'bold',\n    color: theme.colors.primary,\n  },\n  ownerName: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    marginTop: 4,\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    marginTop: 8,\n  },\n  button: {\n    backgroundColor: theme.colors.primary,\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 4,\n    marginLeft: 8,\n  },\n  buttonText: {\n    color: theme.colors.background,\n    fontWeight: 'bold',\n  },\n});\n\nexport default ContractList;\n","import React, { useState } from 'react';\nimport { View, Text, TouchableOpacity, Modal, Platform, StyleSheet } from 'react-native';\nimport { Picker } from '@react-native-picker/picker';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\n\nconst OwnerPicker = ({ owners, selectedOwner, onSelectOwner }) => {\n  const [showOwnerPicker, setShowOwnerPicker] = useState(false);\n\n  if (Platform.OS === 'web') {\n    return (\n      <Picker\n        selectedValue={selectedOwner}\n        onValueChange={(itemValue) => onSelectOwner(itemValue)}\n        style={styles.picker}\n      >\n        <Picker.Item label=\"Select a owner...\" value=\"\" />\n        {owners.map(owner => (\n          <Picker.Item key={owner.id} label={owner.name} value={owner.name} />\n        ))}\n      </Picker>\n    );\n  } else {\n    return (\n      <View>\n        <TouchableOpacity\n          style={styles.dropdownButton}\n          onPress={() => setShowOwnerPicker(true)}\n        >\n          <Text style={styles.dropdownButtonText}>\n            {selectedOwner || \"Select a owner...\"}\n          </Text>\n          <MaterialCommunityIcons \n            name=\"chevron-down\" \n            size={24} \n            color={theme.colors.primary} \n          />\n        </TouchableOpacity>\n        <Modal\n          visible={showOwnerPicker}\n          transparent={true}\n          animationType=\"slide\"\n          onRequestClose={() => setShowOwnerPicker(false)}\n        >\n          <View style={styles.pickerModalContainer}>\n            <View style={styles.pickerContainer}>\n              <Picker\n                selectedValue={selectedOwner}\n                onValueChange={(itemValue) => {\n                  onSelectOwner(itemValue);\n                  setShowOwnerPicker(false);\n                }}\n                style={styles.modalPicker}\n              >\n                <Picker.Item label=\"Select a owner...\" value=\"\" />\n                {owners.map(owner => (\n                  <Picker.Item key={owner.id} label={owner.name} value={owner.name} />\n                ))}\n              </Picker>\n            </View>\n            <TouchableOpacity\n              style={styles.pickerCloseButton}\n              onPress={() => setShowOwnerPicker(false)}\n            >\n              <Text style={styles.pickerCloseButtonText}>Close</Text>\n            </TouchableOpacity>\n          </View>\n        </Modal>\n      </View>\n    );\n  }\n};\n\nconst styles = StyleSheet.create({\n  picker: {\n    backgroundColor: theme.colors.surface,\n    marginBottom: 8,\n    borderRadius: 4,\n    padding: Platform.OS === 'ios' ? 12 : 0,\n    width: '90%',\n  },\n  modalPicker: {\n    width: '90%',\n  },\n  dropdownButton: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    backgroundColor: theme.colors.surface,\n    borderRadius: 4,\n    padding: 12,\n    marginBottom: 16,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  dropdownButtonText: {\n    color: theme.colors.text,\n  },\n  pickerModalContainer: {\n    flex: 1,\n    justifyContent: 'flex-end',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n  },\n  pickerContainer: {\n    backgroundColor: theme.colors.background,\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n    padding: 16,\n  },\n  pickerCloseButton: {\n    backgroundColor: theme.colors.primary,\n    padding: 16,\n    alignItems: 'center',\n  },\n  pickerCloseButtonText: {\n    color: theme.colors.background,\n    fontWeight: 'bold',\n  },\n});\n\nexport default OwnerPicker;\n","import React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Modal, TextInput, ScrollView, Platform } from 'react-native';\nimport { theme } from '../styles/theme';\nimport axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { API_BASE_URL } from '../config/config';\nimport OwnerPicker from './OwnerPicker'; // Import the new component\n\nconst ContractTemplate = ({ templates }) => {\n  const [isTemplateModalVisible, setTemplateModalVisible] = useState(false);\n  const [isEditModalVisible, setEditModalVisible] = useState(false);\n  const [selectedTemplate, setSelectedTemplate] = useState(null);\n  const [contractContent, setContractContent] = useState('');\n  const [owners, setOwners] = useState([]);\n  const [selectedOwner, setSelectedOwner] = useState('');\n\n  useEffect(() => {\n    fetchOwners();\n  }, []);\n\n  const fetchOwners = async () => {\n    try {\n      const token = await AsyncStorage.getItem('userToken');\n      if (!token) {\n        console.error('No token found');\n        return;\n      }\n      const response = await axios.get(`${API_BASE_URL}/api/clients/`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      setOwners(response.data);\n    } catch (error) {\n      console.error('Error fetching owners:', error);\n    }\n  };\n\n  const handleTemplateSelect = (template) => {\n    setSelectedTemplate(template);\n    setContractContent(template.description);\n    setTemplateModalVisible(false);\n    setEditModalVisible(true);\n  };\n\n  const handleAddSignableField = () => {\n    setContractContent((prevContent) => `${prevContent}\\n[signable] ___________ [end signable]`);\n  };\n\n  const handleSubmitContract = async () => {\n    try {\n      const token = await AsyncStorage.getItem('userToken');\n      if (!token) {\n        console.error('No token found');\n        return;\n      }\n      const response = await axios.post(\n        `${API_BASE_URL}/api/contracts/`,\n        {\n          template: selectedTemplate.id,\n          content: contractContent,\n          owner: selectedOwner,\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      );\n      console.log('Contract submitted:', response.data);\n      setEditModalVisible(false);\n    } catch (error) {\n      console.error('Error submitting contract:', error);\n    }\n  };\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.sectionTitle}>Create New Contract</Text>\n      <TouchableOpacity style={styles.button} onPress={() => setTemplateModalVisible(true)}>\n        <Text style={styles.buttonText}>Use Template</Text>\n      </TouchableOpacity>\n\n      {/* Template Selection Modal */}\n      <Modal\n        visible={isTemplateModalVisible}\n        transparent={true}\n        animationType=\"slide\"\n        onRequestClose={() => setTemplateModalVisible(false)}\n      >\n        <View style={styles.modalContainer}>\n          <View style={styles.modalContent}>\n            <Text style={styles.modalTitle}>Select a Template</Text>\n            <ScrollView contentContainerStyle={styles.templateGrid}>\n              {templates.length === 0 ? (\n                <Text style={styles.noTemplatesText}>No templates yet</Text>\n              ) : (\n                templates.map((template) => (\n                  <TouchableOpacity\n                    key={template.id}\n                    style={styles.templateBox}\n                    onPress={() => handleTemplateSelect(template)}\n                  >\n                    <Text style={styles.templateTitle}>{template.title}</Text>\n                  </TouchableOpacity>\n                ))\n              )}\n            </ScrollView>\n            <TouchableOpacity style={styles.closeButton} onPress={() => setTemplateModalVisible(false)}>\n              <Text style={styles.closeButtonText}>Close</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </Modal>\n\n      {/* Edit Contract Modal */}\n      <Modal\n        visible={isEditModalVisible}\n        transparent={true}\n        animationType=\"slide\"\n        onRequestClose={() => setEditModalVisible(false)}\n      >\n        <View style={styles.modalContainer}>\n          <View style={styles.modalContent}>\n            <Text style={styles.modalTitle}>Edit Contract</Text>\n            <View style={styles.ownerPickerContainer}>\n              <Text style={styles.sectionTitle}>Select a Owner</Text>\n              <OwnerPicker\n                owners={owners}\n                selectedOwner={selectedOwner}\n                onSelectOwner={setSelectedOwner}\n              />\n            </View>\n            <TextInput\n              style={styles.textArea}\n              placeholder=\"Contract Content\"\n              value={contractContent}\n              onChangeText={setContractContent}\n              multiline\n            />\n            <TouchableOpacity style={styles.button} onPress={handleAddSignableField}>\n              <Text style={styles.buttonText}>Add Signable Field</Text>\n            </TouchableOpacity>\n            <TouchableOpacity style={styles.button} onPress={handleSubmitContract}>\n              <Text style={styles.buttonText}>Submit Contract</Text>\n            </TouchableOpacity>\n            <TouchableOpacity style={styles.closeButton} onPress={() => setEditModalVisible(false)}>\n              <Text style={styles.closeButtonText}>Close</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </Modal>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    marginBottom: 16,\n  },\n  sectionTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginBottom: 8,\n    color: theme.colors.text,\n  },\n  button: {\n    backgroundColor: theme.colors.primary,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n    marginBottom: 10,\n  },\n  buttonText: {\n    color: theme.colors.background,\n    fontWeight: 'bold',\n    fontSize: 16,\n  },\n  modalContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n  },\n  modalContent: {\n    width: '80%',\n    backgroundColor: theme.colors.surface,\n    borderRadius: 10,\n    padding: 20,\n    alignItems: 'center',\n  },\n  modalTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginBottom: 20,\n  },\n  templateGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n  },\n  templateBox: {\n    width: 100,\n    height: 100,\n    margin: 10,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: theme.colors.primary,\n    borderRadius: 5,\n  },\n  templateTitle: {\n    color: theme.colors.background,\n    textAlign: 'center',\n  },\n  noTemplatesText: {\n    fontSize: 16,\n    color: theme.colors.text,\n    textAlign: 'center',\n    marginTop: 20,\n  },\n  closeButton: {\n    marginTop: 20,\n    padding: 10,\n    backgroundColor: theme.colors.primary,\n    borderRadius: 5,\n  },\n  closeButtonText: {\n    color: theme.colors.background,\n    fontWeight: 'bold',\n  },\n  textArea: {\n    width: '100%',\n    height: 100,\n    padding: 10,\n    borderColor: theme.colors.primary,\n    borderWidth: 1,\n    borderRadius: 5,\n    marginBottom: 10,\n    textAlignVertical: 'top',\n  },\n  ownerPickerContainer: {\n    width: '100%', // Ensure the owner picker container takes full width\n    marginBottom: 10,\n  },\n  pickerModalContainer: {\n    flex: 1,\n    justifyContent: 'flex-end',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n  },\n  pickerContainer: {\n    backgroundColor: theme.colors.background,\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n    padding: 16,\n  },\n  pickerCloseButton: {\n    backgroundColor: theme.colors.primary,\n    padding: 16,\n    alignItems: 'center',\n  },\n  pickerCloseButtonText: {\n    color: theme.colors.background,\n    fontWeight: 'bold',\n  },\n});\n\nexport default ContractTemplate;\n","import React from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, ScrollView, ActivityIndicator } from 'react-native';\nimport { theme } from '../styles/theme';\n\nconst ChronicleSummary = ({ chronicles }) => {\n  if (!chronicles || chronicles.length === 0) {\n    return (\n      <View style={styles.emptyContainer}>\n        <Text style={styles.emptyText}>No chronicles yet</Text>\n      </View>\n    );\n  }\n\n  return (\n    <ScrollView style={styles.container}>\n      <Text style={styles.sectionTitle}>Your Chronicles</Text>\n      {chronicles.map((chronicle) => (\n        <View key={chronicle.id} style={styles.card}>\n          <Text style={styles.chronicleTitle}>{chronicle.title}</Text>\n          <Text style={styles.ownerName}>Owner: {chronicle.owner}</Text>\n          <Text style={styles.petName}>Pet: {chronicle.pets.join(', ')}</Text>\n          <Text style={styles.summary}>{chronicle.summary}</Text>\n          <View style={styles.buttonContainer}>\n            <TouchableOpacity style={styles.button}>\n              <Text style={styles.buttonText}>Edit</Text>\n            </TouchableOpacity>\n            <TouchableOpacity style={styles.button}>\n              <Text style={styles.buttonText}>Send to Owner</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      ))}\n    </ScrollView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    minHeight: 200,\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    minHeight: 200,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    padding: 20,\n    marginTop: 16,\n  },\n  emptyText: {\n    fontSize: 16,\n    color: theme.colors.text,\n    textAlign: 'center',\n  },\n  sectionTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginBottom: 8,\n    color: theme.colors.text,\n  },\n  card: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    padding: 16,\n    marginBottom: 16,\n  },\n  chronicleTitle: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    color: theme.colors.primary,\n  },\n  ownerName: {\n    fontSize: 14,\n    color: theme.colors.text,\n    marginTop: 4,\n  },\n  petName: {\n    fontSize: 14,\n    color: theme.colors.text,\n    marginTop: 2,\n  },\n  summary: {\n    fontSize: 14,\n    color: theme.colors.text,\n    marginTop: 8,\n    marginBottom: 8,\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    marginTop: 8,\n  },\n  button: {\n    backgroundColor: theme.colors.primary,\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 4,\n    marginLeft: 8,\n  },\n  buttonText: {\n    color: theme.colors.background,\n    fontWeight: 'bold',\n  },\n});\n\nexport default ChronicleSummary;\n","import React, { useState, useRef, useLayoutEffect } from 'react';\nimport { View, Text, TextInput, TouchableOpacity, ScrollView, StyleSheet, Platform, Modal, Dimensions } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\n\nconst { width: SCREEN_WIDTH } = Dimensions.get('window');\n\nconst QuestionInput = ({ value, onChange }) => {\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [dropdownPosition, setDropdownPosition] = useState({ top: 0, left: 0, width: 0 });\n  const inputRef = useRef(null);\n\n  const [layout, setLayout] = useState(null);\n\nconst handleLayout = (event) => {\n  const { x, y, width, height } = event.nativeEvent.layout;\n    setLayout({ x, y, width, height });\n  };\n\n  const presetQuestions = [\n    \"What is your favorite animal?\",\n    \"How many pets do you have?\",\n    \"What's your experience with exotic pets?\",\n    \"Do you have any allergies to animals?\",\n    \"What type of exotic pet are you interested in?\",\n    \"Have you owned an exotic pet before?\",\n    \"Are you familiar with the care requirements for exotic pets?\",\n    \"Do you have a veterinarian experienced with exotic animals?\",\n    \"What's your living situation? (House, apartment, etc.)\",\n    \"Are there any local regulations about exotic pet ownership in your area?\",\n  ];\n\n  const handleChange = (text) => {\n    onChange(text);\n  };\n\n  useLayoutEffect(() => {\n    if (showDropdown && inputRef.current) {\n      inputRef.current.measure((fx, fy, width, height, px, py) => {\n        if (!isNaN(py) && !isNaN(height)) {\n          const newTop = py + height;\n          const newLeft = px;\n          const newWidth = width;\n            \n          setDropdownPosition({ top: newTop, left: newLeft, width: newWidth });\n        }\n      });\n    }\n\n    // Lock/unlock scrolling\n    if (Platform.OS === 'web') {\n      document.body.style.overflow = showDropdown ? 'hidden' : 'auto';\n    }\n\n    return () => {\n      if (Platform.OS === 'web') {\n        document.body.style.overflow = 'auto';\n      }\n    };\n  }, [showDropdown, layout]);\n\n  const toggleDropdown = () => {\n    setShowDropdown(!showDropdown);\n  };\n\n  return (\n    <View style={styles.outerContainer}>\n      <View style={styles.container}>\n        <View style={styles.inputContainer} ref={inputRef} onLayout={handleLayout}>\n          <TextInput\n            style={styles.input}\n            value={value}\n            onChangeText={handleChange}\n            placeholder=\"Enter or select a question\"\n            multiline\n          />\n          <TouchableOpacity \n            style={styles.dropdownButton}\n            onPress={toggleDropdown}\n          >\n            <MaterialCommunityIcons \n              name={showDropdown ? \"chevron-up\" : \"chevron-down\"} \n              size={24} \n              color={theme.colors.primary} \n            />\n          </TouchableOpacity>\n        </View>\n        <Modal\n          visible={showDropdown}\n          transparent={true}\n          animationType=\"none\"\n          onRequestClose={toggleDropdown}\n        >\n          <TouchableOpacity\n            style={styles.modalOverlay}\n            activeOpacity={1}\n            onPress={toggleDropdown}\n          >\n            <View style={[styles.dropdownContainer, { top: dropdownPosition.top, left: dropdownPosition.left, width: dropdownPosition.width }]}>\n              <ScrollView style={styles.dropdownList}>\n                {presetQuestions.map((q, i) => (\n                  <TouchableOpacity\n                    key={i}\n                    style={styles.dropdownItem}\n                    onPress={() => {\n                      handleChange(q);\n                      toggleDropdown();\n                    }}\n                  >\n                    <Text style={styles.dropdownItemText}>{q}</Text>\n                  </TouchableOpacity>\n                ))}\n              </ScrollView>\n            </View>\n          </TouchableOpacity>\n        </Modal>\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  outerContainer: {\n    width: '100%',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  container: {\n    width: SCREEN_WIDTH - 80, // Match the answer input width\n    maxWidth: 600,\n    alignItems: 'center',\n  },\n  inputContainer: {\n    width: '100%',\n    position: 'relative',\n  },\n  input: {\n    width: '100%',\n    backgroundColor: theme.colors.surface,\n    borderRadius: 4,\n    padding: 8,\n    minHeight: 60,\n    ...Platform.select({\n      web: {\n        border: `1px solid ${theme.colors.border}`,\n      },\n      default: {\n        borderWidth: 1,\n        borderColor: theme.colors.border,\n      },\n    }),\n  },\n  dropdownButton: {\n    position: 'absolute',\n    right: 8,\n    top: 8,\n    padding: 4,\n  },\n  modalOverlay: {\n    flex: 1,\n  },\n  dropdownContainer: {\n    position: 'absolute',\n    backgroundColor: theme.colors.background,\n    borderRadius: 4,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    maxHeight: 200,\n    zIndex: 1000, // Ensure it appears on top\n    ...Platform.select({\n      web: {\n        boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\n      },\n      default: {\n        elevation: 4,\n      },\n    }),\n  },\n  dropdownList: {\n    maxHeight: 200,\n  },\n  dropdownItem: {\n    padding: 12,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  dropdownItemText: {\n    color: theme.colors.text,\n  },\n});\n\nexport default QuestionInput;\n","import React, { useState, useRef, useEffect } from 'react';\nimport { View, Text, StyleSheet, TextInput, TouchableOpacity, ScrollView, Modal, Platform, Dimensions, Image, ActivityIndicator, Pressable } from 'react-native';\nimport { Picker } from '@react-native-picker/picker';\nimport * as ImagePicker from 'expo-image-picker';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport QuestionInput from './QuestionInput';\nimport OwnerPicker from './OwnerPicker';\n\nconst { width: screenWidth } = Dimensions.get('window');\n\nconst ChronicleForm = ({ onCreateChronicle }) => {\n  const [modalVisible, setModalVisible] = useState(false);\n  const [selectedOwner, setSelectedOwner] = useState('');\n  const [selectedPets, setSelectedPets] = useState([]);\n  const [questions, setQuestions] = useState([{ question: '', answer: '', isPreset: true }]);\n  const [summary, setSummary] = useState('');\n  const [photos, setPhotos] = useState([]);\n  const [isUploading, setIsUploading] = useState(false);\n  const [showOwnerPicker, setShowOwnerPicker] = useState(false);\n  const [isCreating, setIsCreating] = useState(false);\n\n  const mockOwners = [\n    { id: '1', name: 'John Doe', pets: [{ id: '1', name: 'Max' }, { id: '2', name: 'Bella' }] },\n    { id: '2', name: 'Jane Smith', pets: [{ id: '3', name: 'Luna' }, { id: '4', name: 'Charlie' }] }\n  ];\n\n  const pickImages = async () => {\n    try {\n      setIsUploading(true);\n      const result = await ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.Images,\n        allowsMultipleSelection: true,\n        quality: 1,\n      });\n\n      if (!result.canceled) {\n        setPhotos([...photos, ...result.assets]);\n      }\n    } catch (error) {\n      console.error('Error uploading images:', error);\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  const updateQuestion = (index, field, value) => {\n    const newQuestions = [...questions];\n    newQuestions[index] = { ...newQuestions[index], [field]: value };\n    setQuestions(newQuestions);\n  };\n\n  const handleCreateChronicle = () => {\n    setIsCreating(true);\n    const newChronicle = {\n      id: Date.now(),\n      owner: selectedOwner,\n      pets: selectedPets,\n      summary,\n      questions,\n      photos,\n      title: `Chronicle for ${selectedOwner}`,\n    };\n\n    setTimeout(() => {\n      console.log('Sending data to backend:', newChronicle);\n      onCreateChronicle(newChronicle);\n      setIsCreating(false);\n      setModalVisible(false);\n      resetForm();\n    }, 2000);\n  };\n\n  const resetForm = () => {\n    setSelectedOwner('');\n    setSelectedPets([]);\n    setSummary('');\n    setQuestions([{ question: '', answer: '' }]);\n    setPhotos([]);\n  };\n\n  const addNewQuestion = () => {\n    setQuestions([...questions, { question: '', answer: '', isPreset: false }]);\n  };\n\n  const renderOwnerSelection = () => {\n    if (Platform.OS === 'web') {\n      return (\n        <Picker\n          selectedValue={selectedOwner}\n          onValueChange={(itemValue) => setSelectedOwner(itemValue)}\n          style={styles.picker}\n        >\n          <Picker.Item label=\"Select a owner...\" value=\"\" />\n          {mockOwners.map(owner => (\n            <Picker.Item key={owner.id} label={owner.name} value={owner.name} />\n          ))}\n        </Picker>\n      );\n    } else {\n      return (\n        <View>\n          <TouchableOpacity\n            style={styles.dropdownButton}\n            onPress={() => setShowOwnerPicker(true)}\n          >\n            <Text style={styles.dropdownButtonText}>\n              {selectedOwner || \"Select a owner...\"}\n            </Text>\n            <MaterialCommunityIcons \n              name=\"chevron-down\" \n              size={24} \n              color={theme.colors.primary} \n            />\n          </TouchableOpacity>\n          <Modal\n            visible={showOwnerPicker}\n            transparent={true}\n            animationType=\"slide\"\n          >\n            <View style={styles.pickerModalContainer}>\n              <View style={styles.pickerContainer}>\n                <Picker\n                  selectedValue={selectedOwner}\n                  onValueChange={(itemValue) => {\n                    setSelectedOwner(itemValue);\n                    setShowOwnerPicker(false);\n                  }}\n                >\n                  <Picker.Item label=\"Select a owner...\" value=\"\" />\n                  {mockOwners.map(owner => (\n                    <Picker.Item key={owner.id} label={owner.name} value={owner.name} />\n                  ))}\n                </Picker>\n              </View>\n              <TouchableOpacity\n                style={styles.pickerCloseButton}\n                onPress={() => setShowOwnerPicker(false)}\n              >\n                <Text style={styles.pickerCloseButtonText}>Close</Text>\n              </TouchableOpacity>\n            </View>\n          </Modal>\n        </View>\n      );\n    }\n  };\n\n  const PhotoPreview = ({ photo }) => (\n    <View style={styles.photoContainer}>\n      <Image source={{ uri: photo.uri }} style={styles.photo} />\n    </View>\n  );\n\n  return (\n    <View>\n      <TouchableOpacity style={styles.createButton} onPress={() => setModalVisible(true)}>\n        <Text style={styles.createButtonText}>Create New Chronicle</Text>\n      </TouchableOpacity>\n\n      <Modal\n        animationType=\"slide\"\n        transparent={true}\n        visible={modalVisible}\n        onRequestClose={() => setModalVisible(false)}\n      >\n        <View style={styles.modalContainer}>\n          <View style={[styles.modalContent, Platform.OS === 'web' && styles.webModalContent]}>\n            <View style={styles.modalHeader}>\n              <Text style={styles.modalTitle}>Create New Chronicle</Text>\n              <TouchableOpacity onPress={() => setModalVisible(false)}>\n                <Text style={styles.closeButtonText}>✕</Text>\n              </TouchableOpacity>\n            </View>\n\n            <ScrollView>\n              <Text style={styles.label}>Select Owner</Text>\n              <OwnerPicker\n                owners={mockOwners}\n                selectedOwner={selectedOwner}\n                onSelectOwner={setSelectedOwner}\n              />\n\n              <Text style={styles.label}>Select Pets</Text>\n              {selectedOwner && mockOwners.find(c => c.name === selectedOwner)?.pets.map(pet => (\n                <TouchableOpacity\n                  key={pet.id}\n                  style={[\n                    styles.petOption,\n                    selectedPets.includes(pet.name) && styles.selectedPet\n                  ]}\n                  onPress={() => {\n                    if (selectedPets.includes(pet.name)) {\n                      setSelectedPets(selectedPets.filter(p => p !== pet.name));\n                    } else {\n                      setSelectedPets([...selectedPets, pet.name]);\n                    }\n                  }}\n                >\n                  <Text style={styles.petOptionText}>{pet.name}</Text>\n                </TouchableOpacity>\n              ))}\n\n              <Text style={styles.label}>Summary</Text>\n              <TextInput\n                style={styles.summaryInput}\n                multiline\n                value={summary}\n                onChangeText={setSummary}\n                placeholder=\"Write a summary of the chronicle\"\n                textAlignVertical=\"top\"\n              />\n\n              {questions.map((item, index) => (\n                <View key={index} style={styles.questionContainer}>\n                  <Text style={styles.label}>Question {index + 1}</Text>\n                  <QuestionInput\n                    value={item.question}\n                    onChange={(text) => updateQuestion(index, 'question', text)}\n                  />\n                  <View style={styles.answerInputContainer}>\n                    <TextInput\n                      style={[styles.input, styles.answerInput]}\n                      value={item.answer}\n                      onChangeText={(text) => updateQuestion(index, 'answer', text)}\n                      placeholder=\"Enter answer\"\n                      multiline\n                    />\n                  </View>\n                </View>\n              ))}\n\n              <TouchableOpacity style={styles.addQuestionButton} onPress={addNewQuestion}>\n                <MaterialCommunityIcons name=\"plus\" size={20} color={theme.colors.primary} />\n                <Text style={styles.addQuestionButtonText}>Add Another Question</Text>\n              </TouchableOpacity>\n\n              <TouchableOpacity \n                style={styles.uploadButton} \n                onPress={pickImages}\n                disabled={isUploading}\n              >\n                <MaterialCommunityIcons \n                  name=\"camera\" \n                  size={24} \n                  color={isUploading ? theme.colors.disabled : theme.colors.primary} \n                />\n                <Text style={[\n                  styles.uploadButtonText,\n                  isUploading && styles.uploadingText\n                ]}>\n                  {isUploading ? 'Uploading...' : 'Upload Photos'}\n                </Text>\n                {isUploading && (\n                  <ActivityIndicator \n                    size=\"small\" \n                    color={theme.colors.primary} \n                    style={styles.uploadingSpinner} \n                  />\n                )}\n              </TouchableOpacity>\n\n              <ScrollView horizontal style={styles.photoPreview}>\n                {photos.map((photo, index) => (\n                  <PhotoPreview key={index} photo={photo} />\n                ))}\n              </ScrollView>\n            </ScrollView>\n\n            <View style={styles.modalButtonContainer}>\n              <TouchableOpacity \n                style={styles.cancelButton} \n                onPress={() => {\n                  setModalVisible(false);\n                  resetForm();\n                }}\n              >\n                <Text style={styles.cancelButtonText}>Cancel</Text>\n              </TouchableOpacity>\n              <TouchableOpacity \n                style={styles.submitButton} \n                onPress={handleCreateChronicle}\n                disabled={isCreating}\n              >\n                <Text style={styles.submitButtonText}>\n                  {isCreating ? 'Creating Chronicle...' : 'Create Chronicle'}\n                </Text>\n              </TouchableOpacity>\n            </View>\n          </View>\n        </View>\n      </Modal>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  createButton: {\n    backgroundColor: theme.colors.primary,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderRadius: 8,\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  createButtonText: {\n    color: theme.colors.background,\n    fontWeight: 'bold',\n    fontSize: 16,\n  },\n  modalContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n  },\n  modalContent: {\n    backgroundColor: theme.colors.background,\n    borderRadius: 8,\n    padding: 16,\n    width: '90%',\n    maxHeight: '80%',\n  },\n  webModalContent: {\n    width: screenWidth > 600 ? '40%' : '90%',\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  modalTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: theme.colors.text,\n  },\n  closeButton: {\n    padding: 8,\n  },\n  closeButtonText: {\n    fontSize: 20,\n    color: theme.colors.text,\n    fontWeight: 'bold',\n  },\n  label: {\n    fontSize: 16,\n    fontWeight: 'bold',\n    marginBottom: 8,\n    color: theme.colors.text,\n  },\n  input: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 4,\n    marginBottom: 8,\n    minHeight: 20,\n  },\n  picker: {\n    backgroundColor: theme.colors.surface,\n    marginBottom: 8,\n    borderRadius: 4,\n    padding: Platform.OS === 'ios' ? 12 : 0,\n  },\n  petOption: {\n    padding: 8,\n    backgroundColor: theme.colors.surface,\n    marginBottom: 8,\n    borderRadius: 4,\n  },\n  selectedPet: {\n    backgroundColor: theme.colors.primary,\n  },\n  petOptionText: {\n    color: theme.colors.text,\n  },\n  uploadButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 12,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 4,\n    marginTop: 16,\n  },\n  uploadButtonText: {\n    marginLeft: 8,\n    color: theme.colors.primary,\n    fontWeight: 'bold',\n  },\n  photoPreview: {\n    flexDirection: 'row',\n    marginTop: 16,\n  },\n  photoThumbnail: {\n    width: 80,\n    height: 80,\n    marginRight: 8,\n    borderRadius: 4,\n  },\n  questionContainer: {\n    marginBottom: 16,\n    width: '100%',\n    alignItems: 'center',\n  },\n  modalButtonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginTop: 16,\n  },\n  cancelButton: {\n    backgroundColor: theme.colors.error,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderRadius: 4,\n    alignItems: 'center',\n    flex: 1,\n    marginRight: 8,\n  },\n  cancelButtonText: {\n    color: theme.colors.background,\n    fontWeight: 'bold',\n  },\n  submitButton: {\n    backgroundColor: theme.colors.primary,\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    borderRadius: 4,\n    alignItems: 'center',\n    flex: 1,\n    marginLeft: 8,\n  },\n  submitButtonText: {\n    color: theme.colors.background,\n    fontWeight: 'bold',\n  },\n  addQuestionButton: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    padding: 12,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 4,\n    marginTop: 8,\n    marginBottom: 16,\n    zIndex: 1, // Lower than dropdown\n  },\n  addQuestionButtonText: {\n    marginLeft: 8,\n    zIndex: 1, // Lower than dropdown\n    color: theme.colors.primary,\n    fontWeight: 'bold',\n  },\n  answerInputContainer: {\n    width: '100%',\n    alignItems: 'center',\n  },\n  answerInput: {\n    width: screenWidth - 80,\n    maxWidth: 600,\n    minHeight: 60,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 4,\n    padding: 8,\n    marginTop: 8,\n    ...Platform.select({\n      web: {\n        border: `1px solid ${theme.colors.border}`,\n      },\n      default: {\n        borderWidth: 1,\n        borderColor: theme.colors.border,\n      },\n    }),\n  },\n  summaryInput: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 4,\n    marginBottom: 8,\n    padding: 8,\n    height: 100, // Set a fixed height\n    textAlignVertical: 'top',\n    ...Platform.select({\n      web: {\n        minHeight: 100,\n      },\n      ios: {\n        paddingTop: 8, // Add some padding to the top for iOS\n      },\n      android: {\n        paddingTop: 8, // Add some padding to the top for Android\n      },\n    }),\n    ...Platform.select({\n      web: {\n        border: `1px solid ${theme.colors.border}`,\n      },\n      default: {\n        borderWidth: 1,\n        borderColor: theme.colors.border,\n      },\n    }),\n  },\n  dropdownButton: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    backgroundColor: theme.colors.surface,\n    borderRadius: 4,\n    padding: 12,\n    marginBottom: 16,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  dropdownButtonText: {\n    color: theme.colors.text,\n  },\n  pickerModalContainer: {\n    flex: 1,\n    justifyContent: 'flex-end',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n  },\n  pickerContainer: {\n    backgroundColor: theme.colors.background,\n    borderTopLeftRadius: 20,\n    borderTopRightRadius: 20,\n    padding: 16,\n  },\n  pickerCloseButton: {\n    backgroundColor: theme.colors.primary,\n    padding: 16,\n    alignItems: 'center',\n  },\n  pickerCloseButtonText: {\n    color: theme.colors.background,\n    fontWeight: 'bold',\n  },\n  photoContainer: {\n    marginRight: 8,\n  },\n  photo: {\n    width: 100,\n    height: 100,\n    borderRadius: 8,\n  },\n});\n\nexport default ChronicleForm;\n","import React, { useState, useEffect } from 'react';\nimport { View, Text, StyleSheet, ScrollView, TouchableOpacity, SafeAreaView, StatusBar, Platform, ActivityIndicator } from 'react-native';\nimport { theme } from '../styles/theme';\nimport ContractList from '../components/ContractList';\nimport ContractTemplate from '../components/ContractTemplate'; // Import ContractTemplate\nimport ChronicleSummary from '../components/ChronicleSummary';\nimport ChronicleForm from '../components/ChronicleForm';\nimport axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { API_BASE_URL } from '../config/config';\n\nconst MyContracts = () => {\n  const [activeTab, setActiveTab] = useState('contracts');\n  const [chronicles, setChronicles] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [templates, setTemplates] = useState([]);\n\n  useEffect(() => {\n    if (activeTab === 'chronicles') {\n      fetchChronicles();\n    }\n  }, [activeTab]);\n\n  const fetchChronicles = async () => {\n    setLoading(true);\n    await new Promise(resolve => setTimeout(resolve, 1000));\n\n    const mockChronicles = [\n      {\n        id: 1,\n        title: 'Fluffy\\'s Adventure',\n        owner: 'John Doe',\n        pets: ['Fluffy'],\n        summary: 'Fluffy had a great time at the park today!',\n      },\n      {\n        id: 2,\n        title: 'Max\\'s Playdate',\n        owner: 'Jane Smith',\n        pets: ['Max'],\n        summary: 'Max enjoyed playing with other dogs at the beach.',\n      },\n    ];\n\n    setChronicles(mockChronicles);\n    setLoading(false);\n  };\n\n  const fetchTemplates = async () => {\n    try {\n      const token = await AsyncStorage.getItem('userToken');\n      if (!token) {\n        console.error('No token found');\n        return;\n      }\n      const response = await axios.get(`${API_BASE_URL}/api/contracts/templates/`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      });\n      setTemplates(response.data);\n    } catch (error) {\n      console.error('Error fetching templates:', error);\n    }\n  };\n\n  useEffect(() => {\n    fetchTemplates(); // Fetch templates when component mounts\n  }, []);\n\n  const handleCreateChronicle = (newChronicle) => {\n    setChronicles((prevChronicles) => [...prevChronicles, newChronicle]);\n  };\n\n  return (\n    <SafeAreaView style={styles.safeArea}>\n      <ScrollView contentContainerStyle={styles.scrollViewContent}>\n        <View style={styles.container}>\n          <Text style={styles.title}>My Contracts & Chronicles</Text>\n          \n          <View style={styles.tabContainer}>\n            <TouchableOpacity\n              style={[styles.tab, activeTab === 'contracts' && styles.activeTab]}\n              onPress={() => setActiveTab('contracts')}\n            >\n              <Text style={[styles.tabText, activeTab === 'contracts' && styles.activeTabText]}>Contracts</Text>\n            </TouchableOpacity>\n            <TouchableOpacity\n              style={[styles.tab, activeTab === 'chronicles' && styles.activeTab]}\n              onPress={() => setActiveTab('chronicles')}\n            >\n              <Text style={[styles.tabText, activeTab === 'chronicles' && styles.activeTabText]}>Critter Chronicles</Text>\n            </TouchableOpacity>\n          </View>\n\n          {activeTab === 'contracts' && (\n            <View style={styles.contentContainer}>\n              <ContractTemplate templates={templates} />\n              <ContractList />\n            </View>\n          )}\n\n          {activeTab === 'chronicles' && (\n            <View style={styles.contentContainer}>\n              {loading ? (\n                <View style={styles.loadingContainer}>\n                  <ActivityIndicator size=\"large\" color={theme.colors.primary} />\n                </View>\n              ) : (\n                <>\n                  <ChronicleForm onCreateChronicle={handleCreateChronicle} />\n                  <ChronicleSummary chronicles={chronicles} />\n                </>\n              )}\n            </View>\n          )}\n        </View>\n      </ScrollView>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  safeArea: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n    paddingTop: Platform.OS === 'android' ? StatusBar.currentHeight : 0,\n  },\n  scrollViewContent: {\n    flexGrow: 1,\n  },\n  container: {\n    flex: 1,\n    padding: 16,\n    alignItems: 'center',\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 16,\n    color: theme.colors.primary,\n    textAlign: 'center',\n  },\n  tabContainer: {\n    flexDirection: 'row',\n    marginBottom: 16,\n    width: '100%',\n    maxWidth: 500,\n  },\n  tab: {\n    flex: 1,\n    paddingVertical: 12,\n    alignItems: 'center',\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    marginHorizontal: 4,\n  },\n  activeTab: {\n    backgroundColor: theme.colors.primary,\n  },\n  tabText: {\n    color: theme.colors.text,\n    fontWeight: 'bold',\n  },\n  activeTabText: {\n    color: theme.colors.background,\n  },\n  contentContainer: {\n    width: '100%',\n    maxWidth: 500,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    minHeight: 200,\n  },\n  useTemplateButton: {\n    backgroundColor: theme.colors.primary,\n    padding: 10,\n    borderRadius: 5,\n    marginBottom: 16,\n    alignItems: 'center',\n  },\n  useTemplateButtonText: {\n    color: theme.colors.background,\n    fontWeight: 'bold',\n  },\n  modalContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n  },\n  modalContent: {\n    width: '80%',\n    backgroundColor: theme.colors.surface,\n    borderRadius: 10,\n    padding: 20,\n    alignItems: 'center',\n  },\n  modalTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginBottom: 20,\n  },\n  templateGrid: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'center',\n  },\n  templateBox: {\n    width: 100,\n    height: 100,\n    backgroundColor: theme.colors.primary,\n    margin: 10,\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderRadius: 5,\n  },\n  templateTitle: {\n    color: theme.colors.background,\n    textAlign: 'center',\n  },\n  closeButton: {\n    marginTop: 20,\n    padding: 10,\n    backgroundColor: theme.colors.primary,\n    borderRadius: 5,\n  },\n  closeButtonText: {\n    color: theme.colors.background,\n    fontWeight: 'bold',\n  },\n});\n\nexport default MyContracts;\n","import React, { useState, useContext, useEffect } from 'react';\nimport { View, StyleSheet, Platform, SafeAreaView, TouchableOpacity, StatusBar, Text, TextInput, ActivityIndicator, Dimensions } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { AuthContext, debugLog } from '../context/AuthContext';\nimport CustomButton from '../components/CustomButton';\nimport axios from 'axios';\nimport { API_BASE_URL } from '../config/config';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { useNavigation } from '@react-navigation/native';\nimport { changePassword } from '../api/API';\nimport { validatePassword, validatePasswordMatch, sanitizeInput } from '../validation/validation';\n\nconst { width: screenWidth } = Dimensions.get('window');\n\nconst ChangePassword = () => {\n  const [currentPassword, setCurrentPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [showCurrentPassword, setShowCurrentPassword] = useState(false);\n  const [showNewPassword, setShowNewPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const { isSignedIn, screenWidth: contextScreenWidth, isCollapsed } = useContext(AuthContext);\n  const [token, setToken] = useState(null);\n  \n  // Validation error states\n  const [currentPasswordError, setCurrentPasswordError] = useState('');\n  const [newPasswordError, setNewPasswordError] = useState('');\n  const [confirmPasswordError, setConfirmPasswordError] = useState('');\n  \n  const navigation = useNavigation();\n\n  useEffect(() => {\n    const getToken = async () => {\n      const storedToken = await AsyncStorage.getItem('userToken');\n      setToken(storedToken);\n    };\n    getToken();\n  }, []);\n\n  // Enhanced input handlers with real-time sanitization\n  const handleCurrentPasswordChange = (text) => {\n    const sanitizedText = sanitizeInput(text, 'password');\n    \n    const removalPercentage = text.length > 0 ? ((text.length - sanitizedText.length) / text.length) * 100 : 0;\n    \n    if (removalPercentage > 50 && text.length > 8) {\n      debugLog('MBA1234: Potentially malicious current password input detected:', {\n        original: text,\n        sanitized: sanitizedText,\n        removalPercentage\n      });\n      return;\n    }\n    \n    setCurrentPassword(sanitizedText);\n    setCurrentPasswordError('');\n    setError('');\n    setSuccess('');\n  };\n\n  const handleNewPasswordChange = (text) => {\n    const sanitizedText = sanitizeInput(text, 'password');\n    \n    const removalPercentage = text.length > 0 ? ((text.length - sanitizedText.length) / text.length) * 100 : 0;\n    \n    if (removalPercentage > 50 && text.length > 8) {\n      debugLog('MBA1234: Potentially malicious new password input detected:', {\n        original: text,\n        sanitized: sanitizedText,\n        removalPercentage\n      });\n      return;\n    }\n    \n    setNewPassword(sanitizedText);\n    setNewPasswordError('');\n    setError('');\n    setSuccess('');\n  };\n\n  const handleConfirmPasswordChange = (text) => {\n    const sanitizedText = sanitizeInput(text, 'password');\n    \n    const removalPercentage = text.length > 0 ? ((text.length - sanitizedText.length) / text.length) * 100 : 0;\n    \n    if (removalPercentage > 50 && text.length > 8) {\n      debugLog('MBA1234: Potentially malicious confirm password input detected:', {\n        original: text,\n        sanitized: sanitizedText,\n        removalPercentage\n      });\n      return;\n    }\n    \n    setConfirmPassword(sanitizedText);\n    setConfirmPasswordError('');\n    setError('');\n    setSuccess('');\n  };\n\n  const validateForm = () => {\n    let isValid = true;\n    \n    // Validate current password (basic check)\n    if (!currentPassword.trim()) {\n      setCurrentPasswordError('Current password is required');\n      isValid = false;\n    }\n    \n    // Validate new password\n    const newPasswordValidation = validatePassword(newPassword);\n    setNewPasswordError(newPasswordValidation.message);\n    if (!newPasswordValidation.isValid) isValid = false;\n    \n    // Validate password match\n    const passwordMatchValidation = validatePasswordMatch(newPassword, confirmPassword);\n    setConfirmPasswordError(passwordMatchValidation.message);\n    if (!passwordMatchValidation.isValid) isValid = false;\n    \n    return isValid;\n  };\n\n  const handleChangePassword = async () => {\n    // Validate form before proceeding\n    if (!validateForm()) {\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n    setSuccess('');\n\n    try {\n      // Sanitize inputs before sending to API\n      const sanitizedCurrentPassword = sanitizeInput(currentPassword, 'password');\n      const sanitizedNewPassword = sanitizeInput(newPassword, 'password');\n      \n      debugLog('MBA1234: Password change request with sanitized inputs');\n      \n      await changePassword(sanitizedCurrentPassword, sanitizedNewPassword);\n      setSuccess('Password changed successfully!');\n      \n      // Clear form after successful change\n      setCurrentPassword('');\n      setNewPassword('');\n      setConfirmPassword('');\n      \n      // Navigate back after a short delay\n      setTimeout(() => {\n        navigation.navigate('MyProfile', { initialTab: 'settings_payments' });\n      }, 2000);\n      \n    } catch (error) {\n      debugLog('MBA1234: Error changing password:', error);\n      \n      let errorMessage = 'Failed to change password. Please try again.';\n      if (error.response && error.response.data) {\n        if (typeof error.response.data === 'string') {\n          errorMessage = error.response.data;\n        } else if (error.response.data.error) {\n          errorMessage = error.response.data.error;\n        } else if (error.response.data.detail) {\n          errorMessage = error.response.data.detail;\n        }\n      }\n      \n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleForgotPassword = () => {\n    navigation.navigate('ResetPassword');\n  };\n\n  const styles = createStyles(contextScreenWidth, isCollapsed);\n\n  return (\n    <View style={styles.container}>\n      <SafeAreaView style={styles.safeArea}>\n        <View style={styles.content}>\n          <TouchableOpacity onPress={() => navigation.navigate('MyProfile', { initialTab: 'settings_payments' })} style={styles.backButton}>\n            <MaterialCommunityIcons name=\"arrow-left\" size={24} color={theme.colors.text} />\n            <Text style={styles.backText}>Change Password</Text>\n          </TouchableOpacity>\n          \n          <View style={styles.card}>\n            <Text style={styles.title}>Change Password</Text>\n            \n            <View style={styles.inputContainer}>\n              <TextInput\n                style={[styles.input, currentPasswordError ? styles.errorInput : null]}\n                placeholder=\"Current Password\"\n                value={currentPassword}\n                onChangeText={handleCurrentPasswordChange}\n                secureTextEntry={!showCurrentPassword}\n                placeholderTextColor={theme.colors.placeHolderText}\n              />\n              <TouchableOpacity\n                style={styles.eyeIcon}\n                onPress={() => setShowCurrentPassword(!showCurrentPassword)}\n              >\n                <MaterialCommunityIcons\n                  name={showCurrentPassword ? \"eye-off\" : \"eye\"}\n                  size={20}\n                  color={theme.colors.placeHolderText}\n                />\n              </TouchableOpacity>\n              {currentPasswordError ? <Text style={styles.errorText}>{currentPasswordError}</Text> : null}\n            </View>\n\n            <View style={styles.inputContainer}>\n              <TextInput\n                style={[styles.input, newPasswordError ? styles.errorInput : null]}\n                placeholder=\"New Password\"\n                value={newPassword}\n                onChangeText={handleNewPasswordChange}\n                secureTextEntry={!showNewPassword}\n                placeholderTextColor={theme.colors.placeHolderText}\n              />\n              <TouchableOpacity\n                style={styles.eyeIcon}\n                onPress={() => setShowNewPassword(!showNewPassword)}\n              >\n                <MaterialCommunityIcons\n                  name={showNewPassword ? \"eye-off\" : \"eye\"}\n                  size={20}\n                  color={theme.colors.placeHolderText}\n                />\n              </TouchableOpacity>\n              {newPasswordError ? <Text style={styles.errorText}>{newPasswordError}</Text> : null}\n            </View>\n\n            <View style={styles.inputContainer}>\n              <TextInput\n                style={[styles.input, confirmPasswordError ? styles.errorInput : null]}\n                placeholder=\"Confirm New Password\"\n                value={confirmPassword}\n                onChangeText={handleConfirmPasswordChange}\n                secureTextEntry={!showConfirmPassword}\n                placeholderTextColor={theme.colors.placeHolderText}\n              />\n              <TouchableOpacity\n                style={styles.eyeIcon}\n                onPress={() => setShowConfirmPassword(!showConfirmPassword)}\n              >\n                <MaterialCommunityIcons\n                  name={showConfirmPassword ? \"eye-off\" : \"eye\"}\n                  size={20}\n                  color={theme.colors.placeHolderText}\n                />\n              </TouchableOpacity>\n              {confirmPasswordError ? <Text style={styles.errorText}>{confirmPasswordError}</Text> : null}\n            </View>\n\n            {error ? <Text style={styles.errorText}>{error}</Text> : null}\n            {success ? <Text style={styles.successText}>{success}</Text> : null}\n\n            <CustomButton \n              title=\"Change Password\" \n              onPress={handleChangePassword}\n              disabled={loading}\n              style={styles.button}\n            />\n            \n            {loading && <ActivityIndicator size=\"large\" color={theme.colors.primary} style={styles.loader} />}\n\n            <TouchableOpacity onPress={handleForgotPassword} style={styles.forgotPasswordButton}>\n              <Text style={styles.forgotPasswordText}>Forgot Password?</Text>\n            </TouchableOpacity>\n          </View>\n        </View>\n      </SafeAreaView>\n    </View>\n  );\n};\n\nconst createStyles = (screenWidth, isCollapsed) => StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n    marginLeft: screenWidth > 900 ? (isCollapsed ? 70 : 250) : 0,\n    transition: 'margin-left 0.3s ease',\n  },\n  safeArea: {\n    flex: 1,\n    paddingTop: Platform.OS === 'android' ? StatusBar.currentHeight : 0,\n  },\n  content: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  backButton: {\n    position: 'absolute',\n    top: 20,\n    left: 20,\n    flexDirection: 'row',\n    alignItems: 'center',\n    zIndex: 1,\n  },\n  backText: {\n    marginLeft: 8,\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.text,\n  },\n  card: {\n    backgroundColor: theme.colors.surfaceContrast,\n    borderRadius: 12,\n    padding: 40,\n    width: '100%',\n    maxWidth: 400,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 8,\n    elevation: 5,\n  },\n  title: {\n    fontSize: 28,\n    fontWeight: '600',\n    color: theme.colors.text,\n    textAlign: 'center',\n    marginBottom: 30,\n  },\n  inputContainer: {\n    position: 'relative',\n    marginBottom: 20,\n  },\n  input: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    padding: 15,\n    fontSize: 16,\n    color: theme.colors.text,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    paddingRight: 50,\n  },\n  eyeIcon: {\n    position: 'absolute',\n    right: 15,\n    top: 15,\n    padding: 5,\n  },\n  button: {\n    marginTop: 10,\n    marginBottom: 20,\n  },\n  errorText: {\n    color: theme.colors.error,\n    textAlign: 'center',\n    marginBottom: 15,\n    fontSize: 14,\n  },\n  successText: {\n    color: theme.colors.success || '#4CAF50',\n    textAlign: 'center',\n    marginBottom: 15,\n    fontSize: 14,\n  },\n  loader: {\n    marginTop: 10,\n  },\n  forgotPasswordButton: {\n    alignItems: 'center',\n    marginTop: 10,\n  },\n  forgotPasswordText: {\n    color: theme.colors.primary,\n    fontSize: 14,\n    textDecorationLine: 'underline',\n  },\n});\n\nexport default ChangePassword;\n","import React, { useState } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, ScrollView, TextInput } from 'react-native';\nimport { theme } from '../styles/theme';\nimport { SERVICE_TYPES } from '../data/mockData';\n\nconst ServiceTypeSelect = ({ value, onChange }) => {\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const [filteredServices, setFilteredServices] = useState([]);\n\n  const handleTextChange = (text) => {\n    onChange(text);\n    if (text.length > 0) {\n      const filtered = SERVICE_TYPES.filter(service => \n        service.toLowerCase().includes(text.toLowerCase())\n      );\n      setFilteredServices(filtered);\n      setShowSuggestions(true);\n    } else {\n      setShowSuggestions(false);\n    }\n  };\n\n  const handleSelectService = (service) => {\n    onChange(service);\n    setShowSuggestions(false);\n  };\n\n  return (\n    <View style={styles.container}>\n      <TextInput\n        style={styles.input}\n        placeholder=\"Search services...\"\n        value={value}\n        onChangeText={handleTextChange}\n        onFocus={() => value.length > 0 && setShowSuggestions(true)}\n        onBlur={() => {\n          // Delay hiding suggestions to allow for suggestion selection\n          setTimeout(() => {\n            setShowSuggestions(false);\n          }, 150);\n        }}\n      />\n      {showSuggestions && (\n        <View style={styles.suggestionsWrapper}>\n          <ScrollView \n            style={styles.suggestionsContainer}\n            keyboardShouldPersistTaps=\"always\"\n            nestedScrollEnabled={true}\n          >\n            {filteredServices.map((service, index) => (\n              <TouchableOpacity\n                key={index}\n                style={styles.suggestionItem}\n                onPress={() => handleSelectService(service)}\n              >\n                <Text>{service}</Text>\n              </TouchableOpacity>\n            ))}\n          </ScrollView>\n        </View>\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    width: '100%',\n    position: 'relative',\n    marginRight: theme.spacing.medium,\n    marginBottom: theme.spacing.medium,\n    zIndex: 1000,\n  },\n  input: {\n    height: 48,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 8,\n    paddingHorizontal: theme.spacing.medium,\n    backgroundColor: theme.colors.surface,\n    width: '100%',\n  },\n  suggestionsWrapper: {\n    position: 'absolute',\n    top: '100%',\n    left: 0,\n    right: 0,\n    maxHeight: 200,\n    backgroundColor: theme.colors.background,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 8,\n    zIndex: 1000,\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n    elevation: 3,\n  },\n  suggestionsContainer: {\n    flex: 1,\n  },\n  suggestionItem: {\n    padding: theme.spacing.medium,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n});\n\nexport default ServiceTypeSelect; ","import React, { useState, useRef, useCallback, useContext, useEffect } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Platform, TextInput, ScrollView, Switch, Modal } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport Slider from '@react-native-community/slider';\nimport { debounce } from 'lodash';\nimport { GENERAL_CATEGORIES } from '../data/mockData';\nimport { AuthContext, debugLog } from '../context/AuthContext';\nimport ServiceTypeSelect from './ServiceTypeSelect';\nimport { searchProfessionals } from '../api/API';\n\n// All available animal types from CategorySelectionStep\nconst ALL_ANIMAL_TYPES = [\n  // Farm animals\n  'Horse', 'Cow', 'Sheep', 'Goat', 'Pig',\n  // Domestic\n  'Dogs', 'Cats', 'Bird', 'Rabbit', 'Hamster',\n  // Reptiles\n  'Snake', 'Lizard', 'Turtle', 'Gecko', 'Chameleon',\n  // Aquatic\n  'Fish', 'Frog', 'Newt', 'Axolotl',\n  // Invertebrates\n  'Spider', 'Scorpion', 'Crab', 'Snail', 'Millipede'\n];\n\n// Supported locations for MVP launch\nconst SUPPORTED_LOCATIONS = [\n  // Denver Metro Area\n//   { display: \"Denver, Colorado\", city: \"Denver\", state: \"Colorado\", zips: [\"80201\", \"80202\", \"80203\", \"80204\", \"80205\", \"80206\", \"80207\", \"80208\", \"80209\", \"80210\", \"80211\", \"80212\", \"80213\", \"80214\", \"80215\", \"80216\", \"80217\", \"80218\", \"80219\", \"80220\", \"80221\", \"80222\", \"80223\", \"80224\", \"80225\", \"80226\", \"80227\", \"80228\", \"80229\", \"80230\", \"80231\", \"80232\", \"80233\", \"80234\", \"80235\", \"80236\", \"80237\", \"80238\", \"80239\", \"80246\", \"80247\", \"80248\", \"80249\", \"80250\", \"80251\", \"80252\", \"80256\", \"80257\", \"80258\", \"80259\", \"80260\", \"80261\", \"80262\", \"80263\", \"80264\", \"80265\", \"80266\", \"80271\", \"80273\", \"80274\", \"80279\", \"80280\", \"80281\", \"80290\", \"80291\", \"80293\", \"80294\", \"80295\", \"80299\"] },\n//   { display: \"Aurora, Colorado\", city: \"Aurora\", state: \"Colorado\", zips: [\"80010\", \"80011\", \"80012\", \"80013\", \"80014\", \"80015\", \"80016\", \"80017\", \"80018\", \"80019\", \"80040\", \"80041\", \"80042\", \"80044\", \"80045\", \"80046\", \"80047\"] },\n//   { display: \"Lakewood, Colorado\", city: \"Lakewood\", state: \"Colorado\", zips: [\"80214\", \"80215\", \"80226\", \"80227\", \"80228\", \"80232\", \"80401\"] },\n//   { display: \"Thornton, Colorado\", city: \"Thornton\", state: \"Colorado\", zips: [\"80023\", \"80229\", \"80233\", \"80241\"] },\n//   { display: \"Arvada, Colorado\", city: \"Arvada\", state: \"Colorado\", zips: [\"80001\", \"80002\", \"80003\", \"80004\", \"80005\", \"80006\", \"80007\", \"80403\"] },\n//   { display: \"Westminster, Colorado\", city: \"Westminster\", state: \"Colorado\", zips: [\"80003\", \"80020\", \"80021\", \"80030\", \"80031\", \"80234\"] },\n//   { display: \"Centennial, Colorado\", city: \"Centennial\", state: \"Colorado\", zips: [\"80112\", \"80121\", \"80122\", \"80016\"] },\n  \n  // Colorado Springs Area\n  { display: \"Colorado Springs, Colorado\", city: \"Colorado Springs\", state: \"Colorado\", zips: [\"80901\", \"80902\", \"80903\", \"80904\", \"80905\", \"80906\", \"80907\", \"80908\", \"80909\", \"80910\", \"80911\", \"80912\", \"80913\", \"80914\", \"80915\", \"80916\", \"80917\", \"80918\", \"80919\", \"80920\", \"80921\", \"80922\", \"80923\", \"80924\", \"80925\", \"80926\", \"80927\", \"80928\", \"80929\", \"80930\", \"80931\", \"80932\", \"80933\", \"80934\", \"80935\", \"80936\", \"80937\", \"80938\", \"80939\", \"80941\", \"80942\", \"80946\", \"80947\", \"80949\", \"80950\", \"80951\", \"80960\", \"80962\", \"80970\", \"80977\", \"80995\", \"80997\"] },\n  \n  // Boulder Area\n//   { display: \"Boulder, Colorado\", city: \"Boulder\", state: \"Colorado\", zips: [\"80301\", \"80302\", \"80303\", \"80304\", \"80305\", \"80309\", \"80310\", \"80314\"] },\n  \n  // Fort Collins Area\n//   { display: \"Fort Collins, Colorado\", city: \"Fort Collins\", state: \"Colorado\", zips: [\"80521\", \"80522\", \"80523\", \"80524\", \"80525\", \"80526\", \"80527\", \"80528\"] },\n  \n  // Pueblo Area\n//   { display: \"Pueblo, Colorado\", city: \"Pueblo\", state: \"Colorado\", zips: [\"81001\", \"81002\", \"81003\", \"81004\", \"81005\", \"81006\", \"81007\", \"81008\", \"81009\", \"81010\", \"81011\", \"81012\"] }\n];\n\n// Create a flat list of all searchable items (cities and zip codes)\nconst getAllSearchableLocations = () => {\n  const searchableItems = [];\n  \n  SUPPORTED_LOCATIONS.forEach(location => {\n    // Add the city\n    searchableItems.push({\n      display: location.display,\n      searchText: `${location.city}, ${location.state}`,\n      type: 'city'\n    });\n    \n    // Add all zip codes for this city\n    location.zips.forEach(zip => {\n      searchableItems.push({\n        display: `${zip}, ${location.city}, ${location.state}`,\n        searchText: zip,\n        type: 'zip'\n      });\n    });\n  });\n  \n  return searchableItems;\n};\n\nconst ALL_SEARCHABLE_LOCATIONS = getAllSearchableLocations();\n\n// Helper function to check if a location is supported\nconst isLocationSupported = (text) => {\n  if (!text) return false;\n  \n  const normalizedText = text.toLowerCase();\n  return ALL_SEARCHABLE_LOCATIONS.some(location => \n    location.display.toLowerCase().includes(normalizedText) || \n    location.searchText.toLowerCase().includes(normalizedText)\n  );\n};\n\nconst generalCategoriesData = GENERAL_CATEGORIES.map(category => ({\n  label: category,\n  value: category.toLowerCase().replace(/\\s+/g, '-')\n}));\n\nconst SearchRefiner = ({ onFiltersChange, onShowProfessionals, isMobile, onSearchResults, initialFilters }) => {\n  const [location, setLocation] = useState(initialFilters?.location || '');\n  const [locationSuggestions, setLocationSuggestions] = useState([]);\n  const [service, setService] = useState(initialFilters?.service_query || '');\n  const [selectedAnimals, setSelectedAnimals] = useState(initialFilters?.animal_types || []);\n  const [overnightService, setOvernightService] = useState(initialFilters?.overnight_service || false);\n  const [priceRange, setPriceRange] = useState(initialFilters?.price_max || 200);\n  const [startDate, setStartDate] = useState(new Date());\n  const [endDate, setEndDate] = useState(new Date());\n  const [verifiedOnly, setVerifiedOnly] = useState(false);\n  const [insuredOnly, setInsuredOnly] = useState(false);\n  const [filterBackgroundChecked, setFilterBackgroundChecked] = useState(initialFilters?.filter_background_checked || false);\n  const [filterInsured, setFilterInsured] = useState(initialFilters?.filter_insured || false);\n  const [filterElitePro, setFilterElitePro] = useState(initialFilters?.filter_elite_pro || false);\n  const [showOtherAnimalInput, setShowOtherAnimalInput] = useState(false);\n  const [otherAnimalSearch, setOtherAnimalSearch] = useState('');\n  const [otherAnimalSuggestions, setOtherAnimalSuggestions] = useState([]);\n  const [isSearching, setIsSearching] = useState(false);\n  const { screenWidth, isSignedIn } = useContext(AuthContext);\n\n  // Add logging for location state changes\n  useEffect(() => {\n    debugLog('MBA23o4iuv59', 'Location state changed:', location);\n  }, [location]);\n\n  // Add logging for location suggestions changes\n  useEffect(() => {\n    debugLog('MBA23o4iuv59', 'Location suggestions changed:', {\n      count: locationSuggestions.length,\n      suggestions: locationSuggestions\n    });\n  }, [locationSuggestions]);\n\n  // Update state when initialFilters change\n  React.useEffect(() => {\n    if (initialFilters) {\n      debugLog('MBA23o4iuv59', 'Initial filters updated:', initialFilters);\n      setLocation(initialFilters.location || '');\n      setService(initialFilters.service_query || '');\n      setSelectedAnimals(initialFilters.animal_types || []);\n      setOvernightService(initialFilters.overnight_service || false);\n      setPriceRange(initialFilters.price_max || 200);\n      setFilterBackgroundChecked(initialFilters.filter_background_checked || false);\n      setFilterInsured(initialFilters.filter_insured || false);\n      setFilterElitePro(initialFilters.filter_elite_pro || false);\n    }\n  }, [initialFilters]);\n\n  // Create styles function that takes context variables as parameters\n  const createStyles = (isSignedIn, screenWidth) => StyleSheet.create({\n    container: {\n      padding: theme.spacing.medium,\n      backgroundColor: theme.colors.surface,\n      height: '100%',\n      width: '100%',\n      overflow: 'visible',\n      // Add top padding when not signed in or on mobile (screenWidth <= 1200)\n      paddingTop: (!isSignedIn || screenWidth <= 1200) ? theme.spacing.medium : theme.spacing.medium,\n      // Add bottom padding on mobile to avoid tab navigator overlap\n      paddingBottom: Platform.OS !== 'web' ? 100 : theme.spacing.medium,\n    },\n    header: {\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      marginBottom: theme.spacing.xlarge,\n      gap: theme.spacing.small,\n    },\n    title: {\n      fontSize: theme.fontSizes.xlarge,\n      fontWeight: '600',\n      color: theme.colors.text,\n      fontFamily: theme.fonts.header.fontFamily,\n    },\n    section: {\n      marginBottom: theme.spacing.xlarge,\n      position: 'relative',\n    },\n    label: {\n      fontSize: theme.fontSizes.medium,\n      fontWeight: '500',\n      color: theme.colors.text,\n      marginVertical: theme.spacing.small,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    dropdown: {\n      height: 48,\n      backgroundColor: theme.colors.background,\n      borderRadius: 8,\n      padding: theme.spacing.medium,\n      borderWidth: 1,\n      borderColor: theme.colors.border,\n    },\n    locationInputWrapper: {\n      position: 'relative',\n      marginBottom: theme.spacing.small,\n      zIndex: 1100,\n    },\n    locationInput: {\n      height: 48,\n      borderWidth: 1,\n      borderColor: theme.colors.border,\n      borderRadius: 8,\n      paddingHorizontal: theme.spacing.medium,\n      backgroundColor: theme.colors.background,\n      fontSize: theme.fontSizes.medium,\n      zIndex: 1101,\n    },\n    modalBackdrop: {\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      backgroundColor: 'transparent',\n      zIndex: 1099,\n    },\n    suggestionsWrapper: {\n      position: 'absolute',\n      top: '100%',\n      left: 0,\n      right: 0,\n      maxHeight: 200,\n      backgroundColor: theme.colors.background,\n      borderWidth: 1,\n      borderColor: theme.colors.border,\n      borderRadius: 8,\n      zIndex: 1102,\n      shadowColor: \"#000\",\n      shadowOffset: {\n        width: 0,\n        height: 2,\n      },\n      shadowOpacity: 0.1,\n      shadowRadius: 3,\n      elevation: 3,\n    },\n    suggestionsContainer: {\n      flex: 1,\n    },\n    suggestionItem: {\n      padding: theme.spacing.medium,\n      borderBottomWidth: 1,\n      borderBottomColor: theme.colors.border,\n    },\n    suggestionItemNotSupported: {\n      backgroundColor: theme.colors.background,\n    },\n    suggestionText: {\n      fontSize: theme.fontSizes.medium,\n      color: theme.colors.text,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    suggestionTextNotSupported: {\n      color: theme.colors.placeholderText,\n      fontStyle: 'italic',\n    },\n    suggestionType: {\n      fontSize: theme.fontSizes.small,\n      color: theme.colors.placeholderText,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    datePickersContainer: {\n      flexDirection: 'column',\n      gap: theme.spacing.medium,\n      marginRight: 16,\n      zIndex: 500,\n    },\n    datePickerWrapper: {\n      width: '100%',\n    },\n    dateLabel: {\n      fontSize: theme.fontSizes.medium,\n      color: theme.colors.text,\n      marginBottom: 8,\n      fontFamily: theme.fonts.regular.fontFamily,\n      fontWeight: '500',\n    },\n    dateInput: {\n      height: 48,\n      backgroundColor: theme.colors.background,\n      borderRadius: 8,\n      padding: theme.spacing.medium,\n      borderWidth: 1,\n      borderColor: theme.colors.border,\n      fontSize: theme.fontSizes.medium,\n    },\n    priceRangeContainer: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      gap: theme.spacing.medium,\n      marginTop: theme.spacing.small,\n    },\n    slider: {\n      flex: 1,\n      height: 48,\n      marginHorizontal: theme.spacing.medium,\n    },\n    priceText: {\n      fontSize: theme.fontSizes.medium,\n      color: theme.colors.text,\n      fontFamily: theme.fonts.regular.fontFamily,\n      minWidth: 50,\n    },\n    selectedText: {\n      fontSize: theme.fontSizes.medium,\n      color: theme.colors.text,\n      fontWeight: '500',\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    placeholderText: {\n      fontSize: theme.fontSizes.medium,\n      color: theme.colors.placeholderText,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    dropdownContainer: {\n      backgroundColor: theme.colors.background,\n      borderRadius: 8,\n      borderWidth: 1,\n      borderColor: theme.colors.border,\n      overflow: 'hidden',\n    },\n    dropdownItem: {\n      padding: theme.spacing.medium,\n    },\n    dropdownItemSelected: {\n      backgroundColor: theme.colors.surface,\n      borderWidth: 1,\n      borderColor: theme.colors.primary,\n      borderRadius: 8,\n      margin: 4,\n    },\n    dropdownItemText: {\n      fontSize: theme.fontSizes.medium,\n      color: theme.colors.text,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    dropdownItemTextSelected: {\n      color: theme.colors.primary,\n      fontWeight: '500',\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    personButton: {\n      padding: theme.spacing.small,\n      borderRadius: 8,\n      marginLeft: 'auto',\n    },\n    showProfessionalsButton: {\n      backgroundColor: theme.colors.primary,\n      padding: theme.spacing.medium,\n      borderRadius: 8,\n      alignItems: 'center',\n      marginTop: theme.spacing.large,\n    },\n    showProfessionalsText: {\n      color: theme.colors.whiteText,\n      fontSize: theme.fontSizes.medium,\n      fontWeight: '600',\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    locationContainer: {\n      flexDirection: 'column',\n      width: '100%',\n      gap: theme.spacing.small,\n      zIndex: 1100,\n      position: 'relative',\n    },\n    useLocationButton: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      padding: theme.spacing.small,\n      backgroundColor: theme.colors.surface,\n      borderRadius: 8,\n      borderWidth: 1,\n      borderColor: theme.colors.border,\n      gap: 4,\n      alignSelf: 'flex-start',\n    },\n    useLocationText: {\n      color: theme.colors.text,\n      fontSize: theme.fontSizes.small,\n    },\n    input: {\n      height: 48,\n      borderWidth: 1,\n      borderColor: theme.colors.border,\n      borderRadius: 8,\n      paddingHorizontal: theme.spacing.medium,\n      backgroundColor: theme.colors.surface,\n    },\n    animalTypesContainer: {\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      gap: theme.spacing.small,\n      marginTop: theme.spacing.small,\n      marginBottom: theme.spacing.medium,\n      zIndex: 800,\n    },\n    animalTypeButton: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      padding: theme.spacing.small,\n      backgroundColor: theme.colors.surface,\n      borderRadius: 20,\n      borderWidth: 1,\n      borderColor: theme.colors.border,\n      gap: 4,\n    },\n    animalTypeButtonSelected: {\n      backgroundColor: theme.colors.primary,\n      borderColor: theme.colors.primary,\n    },\n    animalTypeLabel: {\n      color: theme.colors.text,\n      fontSize: theme.fontSizes.small,\n    },\n    animalTypeLabelSelected: {\n      color: theme.colors.whiteText,\n    },\n    switchContainer: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: Platform.OS === 'web' ? 'space-between' : 'flex-start',\n      marginVertical: theme.spacing.small,\n      gap: theme.spacing.medium,\n      zIndex: 700,\n    },\n    priceContainer: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      gap: theme.spacing.small,\n      zIndex: 600,\n    },\n    priceLabel: {\n      fontSize: theme.fontSizes.medium,\n      color: theme.colors.text,\n      minWidth: 50,\n    },\n    checkboxContainer: {\n      marginTop: theme.spacing.medium,\n      gap: theme.spacing.small,\n      zIndex: 400,\n    },\n    checkboxRow: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      gap: theme.spacing.small,\n    },\n    checkbox: {\n      width: 24,\n      height: 24,\n      borderWidth: 1,\n      borderColor: theme.colors.border,\n      borderRadius: 4,\n      alignItems: 'center',\n      justifyContent: 'center',\n      backgroundColor: theme.colors.surface,\n    },\n    checkboxChecked: {\n      backgroundColor: theme.colors.primary,\n      borderColor: theme.colors.primary,\n    },\n    checkboxLabel: {\n      flex: 1,\n      fontSize: theme.fontSizes.medium,\n      color: theme.colors.text,\n    },\n    badgeFilterRow: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      gap: theme.spacing.small,\n    },\n    badgeIcon: {\n      marginRight: 4,\n    },\n    headerButtons: {\n      flexDirection: 'row',\n      gap: theme.spacing.small,\n    },\n    iconButton: {\n      padding: theme.spacing.small,\n      borderRadius: 8,\n    },\n    checkboxLabelContainer: {\n      flex: 1,\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      paddingRight: theme.spacing.small,\n    },\n    searchButton: {\n      backgroundColor: theme.colors.primary,\n      padding: theme.spacing.medium,\n      borderRadius: 8,\n      alignItems: 'center',\n      marginTop: theme.spacing.large,\n      marginBottom: theme.spacing.large,\n    },\n    searchButtonText: {\n      color: theme.colors.whiteText,\n      fontSize: theme.fontSizes.medium,\n      fontWeight: '600',\n    },\n    searchButtonDisabled: {\n      backgroundColor: theme.colors.border,\n      opacity: 0.6,\n    },\n    otherAnimalInputWrapper: {\n      backgroundColor: theme.colors.background,\n      borderWidth: 1,\n      borderColor: theme.colors.border,\n      borderRadius: 8,\n      marginTop: theme.spacing.small,\n      shadowColor: \"#000\",\n      shadowOffset: {\n        width: 0,\n        height: 2,\n      },\n      shadowOpacity: 0.1,\n      shadowRadius: 3,\n      elevation: 3,\n    },\n    otherAnimalHeader: {\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      padding: theme.spacing.medium,\n    },\n    otherAnimalTitle: {\n      fontSize: theme.fontSizes.medium,\n      fontWeight: '600',\n      color: theme.colors.text,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    closeButton: {\n      padding: theme.spacing.small,\n      borderRadius: 8,\n    },\n    animalInputContainer: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      marginHorizontal: theme.spacing.medium,\n      marginBottom: theme.spacing.small,\n    },\n    animalInput: {\n      flex: 1,\n      height: 48,\n      borderWidth: 0,\n      borderRadius: 8,\n      paddingHorizontal: theme.spacing.medium,\n      backgroundColor: theme.colors.background,\n      fontSize: theme.fontSizes.medium,\n    },\n    addAnimalButton: {\n      backgroundColor: theme.colors.primary,\n      paddingVertical: 8,\n      paddingHorizontal: 16,\n      borderRadius: 8,\n      marginLeft: theme.spacing.small,\n    },\n    addAnimalButtonText: {\n      color: theme.colors.whiteText,\n      fontWeight: '600',\n      fontSize: theme.fontSizes.small,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    animalSuggestionsWrapper: {\n      flex: 1,\n    },\n    animalSuggestionsContainer: {\n      flex: 1,\n    },\n    animalSuggestionItem: {\n      padding: theme.spacing.medium,\n      borderBottomWidth: 1,\n      borderBottomColor: theme.colors.border,\n    },\n    animalSuggestionText: {\n      fontSize: theme.fontSizes.medium,\n      color: theme.colors.text,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    animalSelectionWrapper: {\n      flexDirection: 'column',\n      gap: theme.spacing.small,\n    },\n    selectedAnimalsContainer: {\n      marginTop: theme.spacing.medium,\n      padding: theme.spacing.medium,\n      backgroundColor: theme.colors.background,\n      borderRadius: 8,\n    },\n    selectedAnimalsLabel: {\n      fontSize: theme.fontSizes.medium,\n      fontWeight: '500',\n      color: theme.colors.text,\n      marginBottom: theme.spacing.small,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    selectedAnimalsList: {\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      gap: theme.spacing.small,\n    },\n    selectedAnimalTag: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      padding: theme.spacing.small,\n      backgroundColor: theme.colors.primary,\n      borderRadius: 8,\n      gap: theme.spacing.small,\n    },\n    selectedAnimalText: {\n      color: theme.colors.whiteText,\n      fontSize: theme.fontSizes.medium,\n      fontWeight: '500',\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    modalOverlay: {\n      flex: 1,\n      backgroundColor: 'rgba(0, 0, 0, 0.5)',\n      justifyContent: 'flex-start',\n    },\n    modalSuggestionsWrapper: {\n      position: 'absolute',\n      left: theme.spacing.medium,\n      right: theme.spacing.medium,\n      maxHeight: 200,\n      backgroundColor: theme.colors.background,\n      borderWidth: 1,\n      borderColor: theme.colors.border,\n      borderRadius: 8,\n      shadowColor: \"#000\",\n      shadowOffset: {\n        width: 0,\n        height: 2,\n      },\n      shadowOpacity: 0.1,\n      shadowRadius: 3,\n      elevation: 3,\n      zIndex: 1200,\n    },\n  });\n\n  // Create styles using current context values\n  const styles = createStyles(isSignedIn, screenWidth);\n\n  // Create a new simple location input component\n  const LocationInputSimple = ({ value, onChange }) => {\n    const [inputValue, setInputValue] = useState(value);\n    const [suggestions, setSuggestions] = useState([]);\n    const [isFocused, setIsFocused] = useState(false);\n    const inputRef = useRef(null);\n    const suggestionsRef = useRef(null);\n    const containerRef = useRef(null);\n    \n    // Update internal value when prop changes\n    useEffect(() => {\n      debugLog('MBA23o4iuv59', 'Value prop changed:', value);\n      setInputValue(value);\n    }, [value]);\n    \n    // Add click outside handler for web\n    useEffect(() => {\n      if (Platform.OS === 'web') {\n        const handleClickOutside = (event) => {\n          // Check if the click is outside both the input container and suggestions\n          const isOutsideContainer = containerRef.current && !containerRef.current.contains(event.target);\n          \n          debugLog('MBA23o4iuv59', 'Click detected', { \n            isOutsideContainer,\n            hasSuggestions: suggestions.length > 0,\n            isFocused\n          });\n          \n          if (isOutsideContainer && isFocused) {\n            debugLog('MBA23o4iuv59', 'Click outside detected, closing dropdown');\n            setIsFocused(false);\n            setSuggestions([]);\n          }\n        };\n        \n        document.addEventListener('mousedown', handleClickOutside);\n        return () => {\n          document.removeEventListener('mousedown', handleClickOutside);\n        };\n      }\n    }, [isFocused, suggestions.length]);\n    \n    // Log component state\n    useEffect(() => {\n      debugLog('MBA23o4iuv59', 'Component state:', { \n        inputValue, \n        suggestionsCount: suggestions.length,\n        isFocused\n      });\n    }, [inputValue, suggestions, isFocused]);\n    \n    const handleTextChange = (text) => {\n      debugLog('MBA23o4iuv59', 'Text input changed:', text);\n      setInputValue(text);\n      \n      // Search for locations\n      if (text.length < 1) {\n        // Show all supported locations when input is empty\n        debugLog('MBA23o4iuv59', 'Empty input, showing all supported locations');\n        \n        // Get the first few supported locations to show as suggestions\n        const defaultSuggestions = ALL_SEARCHABLE_LOCATIONS\n          .filter(location => location.type === 'city')  // Only show cities in the default list\n          .slice(0, 5);  // Limit to 5 results\n        \n        setSuggestions(defaultSuggestions);\n      } else {\n        // Search through supported locations\n        const filteredLocations = ALL_SEARCHABLE_LOCATIONS.filter(location =>\n          location.searchText.toLowerCase().includes(text.toLowerCase()) ||\n          location.display.toLowerCase().includes(text.toLowerCase())\n        ).slice(0, 5); // Limit to 5 results\n        \n        debugLog('MBA23o4iuv59', 'Search results:', { \n          query: text, \n          resultsCount: filteredLocations.length\n        });\n        \n        // If no matches found, show \"not supported\" message\n        if (filteredLocations.length === 0) {\n          debugLog('MBA23o4iuv59', 'Location not supported:', text);\n          setSuggestions([{\n            display: `We're not available in \"${text}\" yet - coming soon!`,\n            searchText: text,\n            type: 'not_supported'\n          }]);\n        } else {\n          setSuggestions(filteredLocations);\n        }\n      }\n    };\n    \n    // Direct selection handler without complex state management\n    const selectLocation = (location) => {\n      debugLog('MBA23o4iuv59', 'DIRECT SELECTION of location:', location);\n      \n      if (location.type !== 'not_supported') {\n        // Update both local and parent state immediately\n        const newValue = location.display;\n        setInputValue(newValue);\n        onChange(newValue);\n        debugLog('MBA23o4iuv59', 'Set location value to:', newValue);\n      }\n      \n      // Always clear suggestions and reset focus\n      setSuggestions([]);\n      setIsFocused(false);\n    };\n\n    return (\n      <View \n        style={styles.locationInputWrapper}\n        ref={containerRef}\n      >\n        <TextInput\n          ref={inputRef}\n          style={styles.locationInput}\n          placeholder=\"Enter city or zip in Colorado\"\n          value={inputValue}\n          onChangeText={handleTextChange}\n          onFocus={() => {\n            debugLog('MBA23o4iuv59', 'Input focused');\n            setIsFocused(true);\n            \n            if (inputValue.length > 0) {\n              handleTextChange(inputValue);\n            } else {\n              // Show all supported locations when input is empty\n              debugLog('MBA23o4iuv59', 'Empty input on focus, showing all supported locations');\n              \n              // Get the first few supported locations to show as suggestions\n              const defaultSuggestions = ALL_SEARCHABLE_LOCATIONS\n                .filter(location => location.type === 'city')  // Only show cities in the default list\n                .slice(0, 5);  // Limit to 5 results\n              \n              setSuggestions(defaultSuggestions);\n            }\n          }}\n        />\n        \n        {suggestions.length > 0 && isFocused && (\n          <View \n            style={styles.suggestionsWrapper}\n            ref={suggestionsRef}\n          >\n            <ScrollView \n              style={styles.suggestionsContainer}\n              keyboardShouldPersistTaps=\"handled\"\n              nestedScrollEnabled={true}\n            >\n              {suggestions.map((suggestion, index) => (\n                <TouchableOpacity\n                  key={index}\n                  style={[\n                    styles.suggestionItem,\n                    suggestion.type === 'not_supported' && styles.suggestionItemNotSupported\n                  ]}\n                  onPress={() => selectLocation(suggestion)}\n                >\n                  <Text style={[\n                    styles.suggestionText,\n                    suggestion.type === 'not_supported' && styles.suggestionTextNotSupported\n                  ]}>\n                    {suggestion.display}\n                  </Text>\n                  {suggestion.type === 'zip' && (\n                    <Text style={styles.suggestionType}>ZIP Code</Text>\n                  )}\n                </TouchableOpacity>\n              ))}\n            </ScrollView>\n          </View>\n        )}\n      </View>\n    );\n  };\n\n  const OtherAnimalInput = ({ value, onChange, suggestions, onSuggestionSelect, isVisible, onClose, onAnimalSelect }) => {\n    const animalInputRef = useRef(null);\n    // Add a ref to track whether a suggestion was selected\n    const suggestionSelectedRef = useRef(false);\n    // Add a ref to track if the close button was clicked\n    const closeButtonClickedRef = useRef(false);\n\n    const debouncedSearch = useCallback(\n      debounce((text) => {\n        if (text.length < 1) {\n          onSuggestionSelect([]);\n          return;\n        }\n        \n        const filteredAnimals = ALL_ANIMAL_TYPES.filter(animal =>\n          animal.toLowerCase().includes(text.toLowerCase())\n        );\n        onSuggestionSelect(filteredAnimals);\n      }, 300),\n      [onSuggestionSelect]\n    );\n\n    // Function to handle adding a custom animal\n    const handleAddCustomAnimal = () => {\n      if (value.trim() === '') return;\n      \n      // Add the custom animal\n      onAnimalSelect(value.trim());\n      \n      // Reset input and close\n      onChange('');\n      onSuggestionSelect([]);\n      onClose();\n    };\n\n    // Custom close handler that sets the close flag before calling the original onClose\n    const handleClose = () => {\n      closeButtonClickedRef.current = true;\n      onClose();\n    };\n\n    if (!isVisible) return null;\n\n    return (\n      <View style={styles.otherAnimalInputWrapper}>\n        <View style={styles.otherAnimalHeader}>\n          <Text style={styles.otherAnimalTitle}>Search for animal type</Text>\n          <TouchableOpacity onPress={handleClose} style={styles.closeButton}>\n            <MaterialCommunityIcons name=\"close\" size={20} color={theme.colors.text} />\n          </TouchableOpacity>\n        </View>\n        <View style={styles.animalInputContainer}>\n          <TextInput\n            ref={animalInputRef}\n            style={styles.animalInput}\n            placeholder=\"Type animal name (e.g., Snake, Turtle, Horse)\"\n            value={value}\n            onChangeText={(text) => {\n              onChange(text);\n              debouncedSearch(text);\n              // Reset flags when text changes\n              suggestionSelectedRef.current = false;\n              closeButtonClickedRef.current = false;\n            }}\n            onBlur={() => {\n              // Don't add empty values\n              if (value.trim() === '') return;\n              \n              // Delay to allow for suggestion selection before adding custom value\n              setTimeout(() => {\n                // Only add if a suggestion wasn't selected AND close button wasn't clicked\n                if (value.trim() !== '' && !suggestionSelectedRef.current && !closeButtonClickedRef.current) {\n                  handleAddCustomAnimal();\n                }\n                // Reset the flags after processing\n                suggestionSelectedRef.current = false;\n                closeButtonClickedRef.current = false;\n              }, 200);\n            }}\n            autoFocus={true}\n          />\n          {value.trim() !== '' && (\n            <TouchableOpacity \n              style={styles.addAnimalButton} \n              onPress={handleAddCustomAnimal}\n            >\n              <Text style={styles.addAnimalButtonText}>Add</Text>\n            </TouchableOpacity>\n          )}\n        </View>\n        {suggestions.length > 0 && (\n          <View style={styles.animalSuggestionsWrapper}>\n            <ScrollView \n              style={styles.animalSuggestionsContainer}\n              keyboardShouldPersistTaps=\"always\"\n              nestedScrollEnabled={true}\n            >\n              {suggestions.map((animal, index) => (\n                <TouchableOpacity\n                  key={index}\n                  style={styles.animalSuggestionItem}\n                  onPress={() => {\n                    // Mark that a suggestion was selected\n                    suggestionSelectedRef.current = true;\n                    onAnimalSelect(animal);\n                    onChange('');\n                    onSuggestionSelect([]);\n                    onClose();\n                  }}\n                >\n                  <Text style={styles.animalSuggestionText}>{animal}</Text>\n                </TouchableOpacity>\n              ))}\n            </ScrollView>\n          </View>\n        )}\n      </View>\n    );\n  };\n\n  const AnimalTypeButton = ({ icon, label, selected, onPress }) => (\n    <TouchableOpacity \n      style={[styles.animalTypeButton, selected && styles.animalTypeButtonSelected]} \n      onPress={onPress}\n    >\n      <MaterialCommunityIcons \n        name={icon} \n        size={24} \n        color={selected ? theme.colors.whiteText : theme.colors.text} \n      />\n      <Text style={[styles.animalTypeLabel, selected && styles.animalTypeLabelSelected]}>\n        {label}\n      </Text>\n    </TouchableOpacity>\n  );\n\n  const handleAnimalSelect = (animal) => {\n    if (selectedAnimals.includes(animal)) {\n      setSelectedAnimals(selectedAnimals.filter(a => a !== animal));\n    } else {\n      setSelectedAnimals([...selectedAnimals, animal]);\n    }\n  };\n\n  const handleOtherAnimalClose = () => {\n    setShowOtherAnimalInput(false);\n    setOtherAnimalSearch('');\n    setOtherAnimalSuggestions([]);\n  };\n\n  const handleSearch = async () => {\n    setIsSearching(true);\n    \n    try {\n      debugLog('MBA9999', 'Starting professional search with filters:', {\n        selectedAnimals,\n        location,\n        service,\n        overnightService,\n        priceRange,\n        filterBackgroundChecked,\n        filterInsured,\n        filterElitePro\n      });\n\n      // Prepare search parameters\n      const searchParams = {\n        animal_types: selectedAnimals,\n        location: location.trim(),\n        service_query: service.trim(),\n        overnight_service: overnightService,\n        price_min: 0,\n        price_max: priceRange,\n        radius_miles: 30,\n        page: 1,\n        page_size: 20,\n        filter_background_checked: filterBackgroundChecked,\n        filter_insured: filterInsured,\n        filter_elite_pro: filterElitePro\n      };\n\n      // Call the search API\n      const results = await searchProfessionals(searchParams);\n      \n      debugLog('MBA9999', 'Search completed successfully:', results);\n\n      // Pass results and search parameters to parent component\n      if (onSearchResults) {\n        onSearchResults(results, searchParams);\n      }\n\n      // Show professionals list\n      if (onShowProfessionals) {\n        onShowProfessionals();\n      }\n\n    } catch (error) {\n      debugLog('MBA9999', 'Search failed:', error);\n      // TODO: Show error toast to user\n      console.error('Search failed:', error);\n    } finally {\n      setIsSearching(false);\n    }\n  };\n\n  return (\n    <ScrollView style={styles.container}>\n      <View style={styles.header}>\n        <Text style={styles.title}>Refine Search</Text>\n        <TouchableOpacity style={styles.personButton} onPress={onShowProfessionals}>\n          <MaterialCommunityIcons name=\"account-group\" size={24} color={theme.colors.text} />\n        </TouchableOpacity>\n        {isMobile && (\n          <View style={styles.headerButtons}>\n            <TouchableOpacity \n              style={styles.iconButton}\n              onPress={() => {\n                if (onShowProfessionals) {\n                  // Pass a special parameter to indicate we want to switch to map view\n                  onShowProfessionals('map');\n                }\n              }}\n            >\n              <MaterialCommunityIcons name=\"map\" size={24} color={theme.colors.text} />\n            </TouchableOpacity>\n          </View>\n        )}\n      </View>\n\n      <Text style={styles.label}>I'm looking for services for my:</Text>\n      <View style={styles.animalSelectionWrapper}>\n        <View style={styles.animalTypesContainer}>\n          <AnimalTypeButton\n            icon=\"dog\"\n            label=\"Dogs\"\n            selected={selectedAnimals.includes('Dogs')}\n            onPress={() => handleAnimalSelect('Dogs')}\n          />\n          <AnimalTypeButton\n            icon=\"cat\"\n            label=\"Cats\"\n            selected={selectedAnimals.includes('Cats')}\n            onPress={() => handleAnimalSelect('Cats')}\n          />\n          <TouchableOpacity \n            style={[styles.animalTypeButton, showOtherAnimalInput && styles.animalTypeButtonSelected]} \n            onPress={() => setShowOtherAnimalInput(!showOtherAnimalInput)}\n          >\n            <MaterialCommunityIcons \n              name=\"dots-horizontal\" \n              size={24} \n              color={showOtherAnimalInput ? theme.colors.whiteText : theme.colors.text} \n            />\n            <Text style={[styles.animalTypeLabel, showOtherAnimalInput && styles.animalTypeLabelSelected]}>\n              Other\n            </Text>\n          </TouchableOpacity>\n        </View>\n        \n        {showOtherAnimalInput && (\n          <OtherAnimalInput\n            value={otherAnimalSearch}\n            onChange={setOtherAnimalSearch}\n            suggestions={otherAnimalSuggestions}\n            onSuggestionSelect={setOtherAnimalSuggestions}\n            isVisible={showOtherAnimalInput}\n            onClose={handleOtherAnimalClose}\n            onAnimalSelect={handleAnimalSelect}\n          />\n        )}\n      </View>\n\n      {/* Display selected animals */}\n      {selectedAnimals.length > 0 && (\n        <View style={styles.selectedAnimalsContainer}>\n          <Text style={styles.selectedAnimalsLabel}>Selected animals:</Text>\n          <View style={styles.selectedAnimalsList}>\n            {selectedAnimals.map((animal, index) => (\n              <TouchableOpacity\n                key={index}\n                style={styles.selectedAnimalTag}\n                onPress={() => handleAnimalSelect(animal)}\n              >\n                <Text style={styles.selectedAnimalText}>{animal}</Text>\n                <MaterialCommunityIcons name=\"close\" size={16} color={theme.colors.whiteText} />\n              </TouchableOpacity>\n            ))}\n          </View>\n        </View>\n      )}\n\n      {/* Location Input */}\n      <Text style={styles.label}>Location</Text>\n      <View style={styles.locationContainer}>\n        <LocationInputSimple\n          value={location}\n          onChange={setLocation}\n        />\n        {/* <TouchableOpacity style={[styles.useLocationButton, { marginBottom: 16 }]}>\n          <MaterialCommunityIcons name=\"crosshairs-gps\" size={20} color={theme.colors.text} />\n          <Text style={styles.useLocationText}>Use My Location</Text>\n        </TouchableOpacity> */}\n      </View>\n\n      {/* Service Input */}\n      <Text style={styles.label}>What service do you need? (e.g., Dog Walking, Pet Sitting)</Text>\n      <ServiceTypeSelect\n        value={service}\n        onChange={setService}\n      />\n\n      {/* Overnight Service */}\n      <View style={styles.switchContainer}>\n        <Text style={styles.label}>Overnight Service</Text>\n        <Switch\n          value={overnightService}\n          onValueChange={setOvernightService}\n          trackColor={{ false: theme.colors.border, true: theme.colors.primary }}\n        />\n      </View>\n\n      {/* Price Range */}\n      <Text style={styles.label}>Price Range</Text>\n      <View style={styles.priceContainer}>\n        <Text style={styles.priceLabel}>$0</Text>\n        <Slider\n          style={styles.slider}\n          minimumValue={0}\n          maximumValue={250}\n          value={priceRange}\n          onValueChange={setPriceRange}\n          minimumTrackTintColor={theme.colors.primary}\n          maximumTrackTintColor={theme.colors.border}\n          thumbTintColor={theme.colors.primary}\n          step={1}\n        />\n        <Text style={styles.priceLabel}>${Math.round(priceRange)}</Text>\n      </View>\n\n      {/* Badge Filters */}\n      <Text style={styles.label}>Professional Credentials</Text>\n      <View style={styles.checkboxContainer}>\n        <View style={styles.checkboxRow}>\n          <TouchableOpacity \n            style={[styles.checkbox, filterBackgroundChecked && styles.checkboxChecked]} \n            onPress={() => setFilterBackgroundChecked(!filterBackgroundChecked)}\n          >\n            {filterBackgroundChecked && <MaterialCommunityIcons name=\"check\" size={16} color={theme.colors.whiteText} />}\n          </TouchableOpacity>\n          <View style={styles.checkboxLabelContainer}>\n            <View style={styles.badgeFilterRow}>\n              <MaterialCommunityIcons name=\"shield-check\" size={16} color=\"#9C27B0\" style={styles.badgeIcon} />\n              <Text style={styles.checkboxLabel}>Background Checked Only</Text>\n            </View>\n          </View>\n        </View>\n\n        <View style={styles.checkboxRow}>\n          <TouchableOpacity \n            style={[styles.checkbox, filterInsured && styles.checkboxChecked]} \n            onPress={() => setFilterInsured(!filterInsured)}\n          >\n            {filterInsured && <MaterialCommunityIcons name=\"check\" size={16} color={theme.colors.whiteText} />}\n          </TouchableOpacity>\n          <View style={styles.checkboxLabelContainer}>\n            <View style={styles.badgeFilterRow}>\n              <MaterialCommunityIcons name=\"security\" size={16} color=\"#0784C6\" style={styles.badgeIcon} />\n              <Text style={styles.checkboxLabel}>Insured Only</Text>\n            </View>\n          </View>\n        </View>\n\n        <View style={styles.checkboxRow}>\n          <TouchableOpacity \n            style={[styles.checkbox, filterElitePro && styles.checkboxChecked]} \n            onPress={() => setFilterElitePro(!filterElitePro)}\n          >\n            {filterElitePro && <MaterialCommunityIcons name=\"check\" size={16} color={theme.colors.whiteText} />}\n          </TouchableOpacity>\n          <View style={styles.checkboxLabelContainer}>\n            <View style={styles.badgeFilterRow}>\n              <MaterialCommunityIcons name=\"medal\" size={16} color=\"#4CAF50\" style={styles.badgeIcon} />\n              <Text style={styles.checkboxLabel}>Elite Pro Only</Text>\n            </View>\n          </View>\n        </View>\n      </View>\n\n      {/* TODO: Add back after MVP launch \n      Date Selection\n      <Text style={styles.label}>Date Range</Text>\n      <View style={styles.datePickersContainer}>\n        <DatePicker\n          label=\"Start Date\"\n          value={startDate}\n          onChange={setStartDate}\n        />\n        <DatePicker\n          label=\"End Date\"\n          value={endDate}\n          onChange={setEndDate}\n        />\n      </View> */}\n\n      {/* TODO: Add back after MVP launch \n      Verification Options\n      <View style={styles.checkboxContainer}>\n        <View style={styles.checkboxRow}>\n          <TouchableOpacity \n            style={styles.checkbox} \n            onPress={() => setVerifiedOnly(!verifiedOnly)}\n          >\n            {verifiedOnly && <MaterialCommunityIcons name=\"check\" size={20} color={theme.colors.primary} />}\n          </TouchableOpacity>\n          <View style={styles.checkboxLabelContainer}>\n            <Text style={styles.checkboxLabel}>Verified Professionals Only</Text>\n            <Tooltip \n              content=\"Verified professionals have completed our background check and identity verification process.\"\n              position=\"right\"\n            >\n              <MaterialCommunityIcons name=\"help-circle-outline\" size={20} color={theme.colors.text} />\n            </Tooltip>\n          </View>\n      </View>\n\n        <View style={styles.checkboxRow}>\n          <TouchableOpacity \n            style={styles.checkbox} \n            onPress={() => setInsuredOnly(!insuredOnly)}\n          >\n            {insuredOnly && <MaterialCommunityIcons name=\"check\" size={20} color={theme.colors.primary} />}\n          </TouchableOpacity>\n          <View style={styles.checkboxLabelContainer}>\n            <Text style={styles.checkboxLabel}>Insured Service Providers</Text>\n            <Tooltip \n              content=\"Insured providers maintain current liability insurance coverage for their services.\"\n              position=\"right\"\n            >\n              <MaterialCommunityIcons name=\"help-circle-outline\" size={20} color={theme.colors.text} />\n            </Tooltip>\n          </View>\n        </View>\n      </View> */}\n\n      {/* Search Button - Always show */}\n      <TouchableOpacity \n        style={[styles.searchButton, isSearching && styles.searchButtonDisabled]}\n        onPress={handleSearch}\n        disabled={isSearching}\n      >\n        <Text style={styles.searchButtonText}>\n          {isSearching ? 'Searching...' : 'Search'}\n        </Text>\n      </TouchableOpacity>\n    </ScrollView>\n  );\n};\n\nexport default SearchRefiner; ","import React from 'react';\nimport { View, Text, FlatList, StyleSheet, Image, TouchableOpacity, Platform } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { getMediaUrl } from '../config/config';\nimport { BACKEND_TO_FRONTEND_TIME_UNIT } from '../data/mockData';\nimport { debugLog } from '../context/AuthContext';\n\nconst ProfessionalCard = ({ professional, index, onPress }) => {\n  // Debug log for unit_of_time mapping\n  if (professional.primary_service?.unit_of_time) {\n    debugLog(\"MBA4001: Unit of time mapping\", {\n      backend_value: professional.primary_service.unit_of_time,\n      frontend_value: BACKEND_TO_FRONTEND_TIME_UNIT[professional.primary_service.unit_of_time],\n      professional_name: professional.name\n    });\n  }\n  \n  // Debug log for review data\n  if (professional.reviews) {\n    debugLog(\"MBA4001: Professional reviews data\", {\n      professional_name: professional.name,\n      has_reviews: professional.reviews.average_rating > 0,\n      average_rating: professional.reviews.average_rating,\n      review_count: professional.reviews.review_count,\n      has_review_text: !!professional.reviews.latest_highest_review_text,\n      has_author_profile_pic: !!professional.reviews.latest_review_author_profile_pic,\n      has_reviewer_profile_pic: !!professional.reviews.reviewer_profile_picture,\n      author_pic_url: professional.reviews.latest_review_author_profile_pic || 'none',\n      reviewer_pic_url: professional.reviews.reviewer_profile_picture || 'none'\n    });\n  }\n  \n  const handlePress = () => {\n    if (onPress) {\n      onPress();\n    }\n  };\n\n  // Render either profile picture or fallback icon\n  const renderProfileImage = () => {\n    if (professional.profile_picture_url) {\n      return (\n        <Image \n          source={{ uri: getMediaUrl(professional.profile_picture_url) }}\n          style={styles.profileImage}\n        />\n      );\n    }\n    \n    // Return fallback icon inside a circular view with the same dimensions\n    return (\n      <View style={[styles.profileImage, styles.fallbackIconContainer]}>\n        <MaterialCommunityIcons \n          name=\"account\" \n          size={50} \n          color={theme.colors.textSecondary} \n        />\n      </View>\n    );\n  };\n\n  // Check if we should display reviews\n  const hasReviews = professional.reviews && professional.reviews.average_rating > 0;\n  const hasBadges = professional.badges?.is_background_checked || professional.badges?.is_insured || professional.badges?.is_elite_pro;\n\n  return (\n    <TouchableOpacity style={styles.listItem} onPress={handlePress}>\n      <View style={styles.cardContent}>\n        <View style={styles.leftSection}>\n          {renderProfileImage()}\n        </View>\n        \n        <View style={styles.mainContent}>\n          <View style={styles.header}>\n            <View style={styles.nameSection}>\n              {/* TODO: styling naming is messed up here, we should fix it. */}\n              <Text style={styles.name}>{index + 1}. {professional.primary_service?.service_name || 'Various Services'}</Text>\n              <Text style={styles.location}>{professional.name}</Text>\n              <Text style={styles.distance}>{professional.location}</Text>\n            </View>\n            \n            <View style={styles.priceSection}>\n              <Text style={styles.fromText}>from</Text>\n              <Text style={styles.amount}>\n                <Text style={styles.dollarSign}>$</Text>\n                {professional.primary_service ? professional.primary_service.price_per_visit : 'N/A'}\n              </Text>\n              <Text style={styles.perNight}>\n                {professional.primary_service ? \n                  (BACKEND_TO_FRONTEND_TIME_UNIT[professional.primary_service.unit_of_time] || professional.primary_service.unit_of_time) : \n                  'per visit'}\n              </Text>\n            </View>\n          </View>\n        </View>\n      </View>\n\n      {(hasReviews || hasBadges) && (\n        <View style={[styles.reviewSection]}>\n          {hasReviews && (\n            <View style={[styles.ratingContainer, {marginBottom: hasBadges ? theme.spacing.small : 0}]}>\n              <MaterialCommunityIcons name=\"star\" size={16} color=\"#FFD700\" />\n              <Text style={styles.ratingText}>{professional.reviews.average_rating.toFixed(2)}</Text>\n              <Text style={styles.dot}> • </Text>\n              <Text style={styles.reviews}>{professional.reviews.review_count} reviews</Text>\n            </View>\n          )}\n          \n          {hasBadges && (\n            <View style={styles.badgesContainer}>\n              {professional.badges?.is_background_checked && (\n                <View style={[styles.badge, styles.backgroundCheckedBadge]}>\n                  <MaterialCommunityIcons name=\"shield-check\" size={14} color=\"#9C27B0\" />\n                  <Text style={[styles.badgeText, styles.backgroundCheckedBadgeText]}>Background Checked</Text>\n                </View>\n              )}\n              {professional.badges?.is_insured && (\n                <View style={[styles.badge, styles.insuredBadge]}>\n                  <MaterialCommunityIcons name=\"security\" size={14} color=\"#0784C6\" />\n                  <Text style={[styles.badgeText, styles.insuredBadgeText]}>Insured</Text>\n                </View>\n              )}\n              {professional.badges?.is_elite_pro && (\n                <View style={[styles.badge, styles.eliteProBadge]}>\n                  <MaterialCommunityIcons name=\"medal\" size={14} color=\"#4CAF50\" />\n                  <Text style={[styles.badgeText, styles.eliteProBadgeText]}>Elite Pro</Text>\n                </View>\n              )}\n            </View>\n          )}\n        </View>\n      )}\n    </TouchableOpacity>\n  );\n};\n\nconst ProfessionalList = ({ professionals, onLoadMore, onProfessionalSelect, isMobile, filters, onFilterPress, searchParams = null }) => {\n  \n  // Function to generate appropriate empty state message\n  const getEmptyStateMessage = () => {\n    if (!searchParams) {\n      return {\n        title: \"No professionals found\",\n        message: \"Please try adjusting your search criteria.\"\n      };\n    }\n\n    const { animal_types = [], location = '', service_query = '', overnight_service = false } = searchParams;\n    \n    // Check if location is Colorado Springs area\n    const isColoradoSprings = location.toLowerCase().includes('colorado springs') || \n                             location.toLowerCase().includes('colorado') ||\n                             location === '';\n\n    // If no professionals in Colorado Springs area at all\n    if (isColoradoSprings && animal_types.length === 0 && !service_query && !overnight_service) {\n      return {\n        title: \"No professionals in the Colorado Springs area yet!\",\n        message: \"Please come back later when we onboard more professionals to your area.\"\n      };\n    }\n\n    // Build specific message based on search criteria\n    let criteria = [];\n    \n    if (animal_types.length > 0) {\n      const animalText = animal_types.length === 1 ? \n        `${animal_types[0]} care` : \n        `care for ${animal_types.join(', ')}`;\n      criteria.push(animalText);\n    }\n    \n    if (service_query) {\n      criteria.push(`\"${service_query}\" services`);\n    }\n    \n    if (overnight_service) {\n      criteria.push('overnight services');\n    }\n    \n    if (location && !isColoradoSprings) {\n      criteria.push(`in ${location}`);\n    }\n\n    if (criteria.length > 0) {\n      const criteriaText = criteria.join(', ');\n      return {\n        title: `No professionals found with ${criteriaText}`,\n        message: \"Please try adjusting your search parameters or expanding your search area.\"\n      };\n    }\n\n    return {\n      title: \"No professionals found\",\n      message: \"Please try adjusting your search criteria.\"\n    };\n  };\n\n  const renderEmptyState = () => {\n    const emptyState = getEmptyStateMessage();\n    \n    debugLog(\"MBA4001: Showing empty state\", {\n      searchParams,\n      emptyStateTitle: emptyState.title,\n      emptyStateMessage: emptyState.message\n    });\n    \n    return (\n      <View style={styles.emptyStateContainer}>\n        <MaterialCommunityIcons \n          name=\"account-search\" \n          size={80} \n          color={theme.colors.textSecondary} \n        />\n        <Text style={styles.emptyStateTitle}>{emptyState.title}</Text>\n        <Text style={styles.emptyStateMessage}>{emptyState.message}</Text>\n        <TouchableOpacity \n          style={styles.adjustSearchButton}\n          onPress={() => onFilterPress && onFilterPress()}\n        >\n          <Text style={styles.adjustSearchButtonText}>Adjust Search</Text>\n        </TouchableOpacity>\n      </View>\n    );\n  };\n\n  const renderHeader = () => (\n    <View style={[styles.header, {borderBottomWidth: 1, borderBottomColor: theme.colors.border, paddingBottom: theme.spacing.medium}]}>\n      <View style={styles.headerContent}>\n        <Text style={[styles.headerTitle, {paddingTop: theme.spacing.medium}]}>Pet Care Professionals</Text>\n        <View style={styles.filterChips}>\n          {filters?.categories?.map((filter, index) => (\n            <View key={index} style={styles.filterChip}>\n              <Text style={styles.filterChipText}>{filter}</Text>\n            </View>\n          ))}\n        </View>\n      </View>\n      <View style={[styles.headerButtons, {paddingTop: 8}]}>\n        <TouchableOpacity style={styles.filterButton} onPress={onFilterPress}>\n          <MaterialCommunityIcons name=\"filter\" size={24} color={theme.colors.text} />\n        </TouchableOpacity>\n        {isMobile && (\n          <TouchableOpacity \n            style={styles.filterButton} \n            onPress={() => {\n              // Navigate to the map view\n              if (onFilterPress) {\n                // Pass a special parameter to indicate we want to switch to map view\n                onFilterPress('map');\n              }\n            }}\n          >\n            <MaterialCommunityIcons name=\"map\" size={24} color={theme.colors.text} />\n          </TouchableOpacity>\n        )}\n      </View>\n    </View>\n  );\n\n  // If no professionals, show empty state\n  if (!professionals || professionals.length === 0) {\n    return (\n      <View style={styles.container}>\n        {renderHeader()}\n        {renderEmptyState()}\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      {renderHeader()}\n      <FlatList\n        data={professionals}\n        renderItem={({ item, index }) => (\n          <ProfessionalCard \n            professional={item}\n            index={index}\n            onPress={() => onProfessionalSelect(item)}\n          />\n        )}\n        keyExtractor={(item) => item.professional_id.toString()}\n        onEndReached={onLoadMore}\n        onEndReachedThreshold={0.5}\n        contentContainerStyle={styles.listContent}\n      />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    width: '100%',\n    backgroundColor: theme.colors.surfaceContrast,\n  },\n  listContent: {\n    flexGrow: 1,\n    // padding: theme.spacing.medium,\n  },\n  listItem: {\n    width: '100%',\n    backgroundColor: theme.colors.surfaceContrast,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 3,\n    elevation: 3,\n  },\n  cardContent: {\n    flexDirection: 'row',\n    paddingHorizontal: theme.spacing.medium,\n    paddingTop: theme.spacing.medium,\n    paddingBottom: theme.spacing.medium,\n  },\n  leftSection: {\n    marginRight: theme.spacing.medium,\n    justifyContent: 'center',\n  },\n  profileImage: {\n    width: 60,\n    height: 60,\n    borderRadius: 30,\n  },\n  mainContent: {\n    flex: 1,\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n  },\n  nameSection: {\n    flex: 1,\n    marginRight: theme.spacing.medium,\n  },\n  name: {\n    fontSize: theme.fontSizes.large,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 4,\n  },\n  location: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.textSecondary,\n    marginBottom: 2,\n  },\n  distance: {\n    fontSize: theme.fontSizes.small,\n    color: theme.colors.textSecondary,\n  },\n  priceSection: {\n    alignItems: 'flex-end',\n  },\n  fromText: {\n    fontSize: theme.fontSizes.small,\n    color: theme.colors.textSecondary,\n  },\n  amount: {\n    fontSize: theme.fontSizes.large + 4,\n    fontWeight: '600',\n    color: theme.colors.primary,\n    marginVertical: 2,\n  },\n  dollarSign: {\n    color: theme.colors.primary,\n  },\n  perNight: {\n    fontSize: theme.fontSizes.small,\n    color: theme.colors.textSecondary,\n    maxWidth: 50,\n  },\n  reviewSection: {\n    paddingHorizontal: theme.spacing.medium,\n    paddingBottom: theme.spacing.medium,\n    borderTopWidth: 0,\n    borderTopColor: 'transparent',\n    marginTop: 0,\n  },\n  ratingContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: theme.spacing.small,\n  },\n  ratingText: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    fontWeight: '500',\n    marginLeft: 4,\n  },\n  dot: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.textSecondary,\n  },\n  reviews: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.textSecondary,\n  },\n  repeatOwners: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.textSecondary,\n  },\n  bestReviewContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  reviewerImage: {\n    width: 32,\n    height: 32,\n    borderRadius: 16,\n    marginRight: theme.spacing.small,\n  },\n  bestReviewTextContainer: {\n    flex: 1,\n  },\n  bestReview: {\n    flex: 1,\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    fontStyle: 'italic',\n  },\n  readMore: {\n    color: theme.colors.primary,\n    fontStyle: 'normal',\n    fontWeight: '500',\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    paddingRight: theme.spacing.small,\n    // paddingTop: theme.spacing.medium,\n    backgroundColor: theme.colors.surfaceContrast,\n    \n  },\n  mobileHeaderRight: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  headerContent: {\n    flex: 1,\n    marginHorizontal: theme.spacing.medium,\n  },\n  headerTitle: {\n    fontSize: theme.fontSizes.large,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: theme.spacing.small,\n  },\n  filterChips: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: theme.spacing.small,\n  },\n  filterChip: {\n    backgroundColor: theme.colors.background,\n    paddingHorizontal: theme.spacing.medium,\n    paddingVertical: theme.spacing.small,\n    borderRadius: 16,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  filterChipText: {\n    fontSize: theme.fontSizes.small,\n    color: theme.colors.text,\n  },\n  filterButton: {\n    padding: theme.spacing.small,\n    borderRadius: 8,\n  },\n  headerButtons: {\n    flexDirection: 'row',\n    gap: theme.spacing.small,\n  },\n  emptyStateContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: theme.spacing.large,\n  },\n  emptyStateTitle: {\n    fontSize: theme.fontSizes.large,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginTop: theme.spacing.medium,\n    marginBottom: theme.spacing.small,\n    textAlign: 'center',\n  },\n  emptyStateMessage: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.textSecondary,\n    textAlign: 'center',\n    marginBottom: theme.spacing.large,\n    lineHeight: 22,\n  },\n  adjustSearchButton: {\n    paddingHorizontal: theme.spacing.large,\n    paddingVertical: theme.spacing.medium,\n    borderRadius: 8,\n    backgroundColor: theme.colors.primary,\n  },\n  adjustSearchButtonText: {\n    fontSize: theme.fontSizes.medium,\n    fontWeight: '600',\n    color: theme.colors.whiteText,\n  },\n  fallbackIconContainer: {\n    backgroundColor: theme.colors.background,\n    borderRadius: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  fallbackReviewerIconContainer: {\n    backgroundColor: theme.colors.background,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  badgesContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    gap: theme.spacing.small,\n    marginTop: theme.spacing.small,\n  },\n  badge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 4,\n    paddingHorizontal: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 16,\n    backgroundColor: theme.colors.background,\n  },\n  badgeText: {\n    fontSize: 12,\n    color: theme.colors.text,\n    marginLeft: 4,\n    fontWeight: '500',\n  },\n  backgroundCheckedBadge: {\n    borderColor: '#9C27B0',\n    backgroundColor: 'rgba(156, 39, 176, 0.1)',\n  },\n  backgroundCheckedBadgeText: {\n    color: '#9C27B0',\n  },\n  insuredBadge: {\n    borderColor: '#0784C6',\n    backgroundColor: 'rgba(7, 132, 198, 0.1)',\n  },\n  insuredBadgeText: {\n    color: '#0784C6',\n  },\n  eliteProBadge: {\n    borderColor: '#4CAF50',\n    backgroundColor: 'rgba(76, 175, 80, 0.1)',\n  },\n  eliteProBadgeText: {\n    color: '#4CAF50',\n  },\n});\n\nexport default ProfessionalList;","import React, { useState, useRef, useEffect } from 'react';\nimport { View, Text, StyleSheet, Platform, TouchableOpacity } from 'react-native';\nimport { theme } from '../styles/theme';\nimport { BACKEND_TO_FRONTEND_TIME_UNIT } from '../data/mockData';\n\n// Conditional import for react-native-maps (iOS/Android only)\nlet ReactNativeMapView, RNMarker, Callout, PROVIDER_GOOGLE;\nif (Platform.OS !== 'web') {\n  try {\n    const maps = require('react-native-maps');\n    ReactNativeMapView = maps.default || maps.MapView;\n    RNMarker = maps.Marker;\n    Callout = maps.Callout;\n    PROVIDER_GOOGLE = maps.PROVIDER_GOOGLE;\n  } catch (error) {\n    console.warn('Failed to load react-native-maps:', error);\n  }\n}\n\n// Conditional imports for web-only libraries\nlet MapContainer, TileLayer, Marker, Popup, useMap, L;\nif (Platform.OS === 'web') {\n  try {\n    const reactLeaflet = require('react-leaflet');\n    MapContainer = reactLeaflet.MapContainer;\n    TileLayer = reactLeaflet.TileLayer;\n    Marker = reactLeaflet.Marker;\n    Popup = reactLeaflet.Popup;\n    useMap = reactLeaflet.useMap;\n    \n    L = require('leaflet');\n    require('leaflet/dist/leaflet.css');\n  } catch (error) {\n    console.warn('Failed to load Leaflet libraries:', error);\n  }\n}\n\n// Fix for default marker icons in Leaflet (web only)\nif (Platform.OS === 'web' && L) {\n  try {\n    delete L.Icon.Default.prototype._getIconUrl;\n    L.Icon.Default.mergeOptions({\n      iconRetinaUrl: require('leaflet/dist/images/marker-icon-2x.png'),\n      iconUrl: require('leaflet/dist/images/marker-icon.png'),\n      shadowUrl: require('leaflet/dist/images/marker-shadow.png'),\n    });\n  } catch (error) {\n    console.warn('Failed to configure Leaflet icons:', error);\n  }\n}\n\nconst MapViewComponent = ({ professionals, onMarkerPress, region, isMobile, onShowServicesModal }) => {\n  if (Platform.OS === 'web') {\n    return (\n      <WebMapComponent\n        professionals={professionals}\n        onMarkerPress={onMarkerPress}\n        region={region}\n        isMobile={isMobile}\n        onShowServicesModal={onShowServicesModal}\n      />\n    );\n  }\n\n  return (\n    <NativeMapComponent\n      professionals={professionals}\n      onMarkerPress={onMarkerPress}\n      region={region}\n      isMobile={isMobile}\n      onShowServicesModal={onShowServicesModal}\n    />\n  );\n};\n\n// Custom marker component that handles hover behavior\nconst HoverMarker = ({ professional, onShowServicesModal }) => {\n  const markerRef = useRef(null);\n  const popupRef = useRef(null);\n\n  // Return null if Leaflet is not available\n  if (!L || !Marker || !Popup) {\n    return null;\n  }\n\n  const MarkerIcon = L.divIcon({\n    className: 'custom-marker',\n    html: `<div style=\"\n    width: 32px;\n    height: 32px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n  \">\n    <svg viewBox=\"0 0 24 24\" width=\"32\" height=\"32\">\n      <path fill=\"${theme.colors.primary}\" d=\"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z\"/>\n    </svg>\n  </div>`,\n    iconSize: [32, 32],\n    iconAnchor: [16, 32],\n    popupAnchor: [0, -32],\n  });\n\n  const formatTimeUnit = (unit) => {\n    return BACKEND_TO_FRONTEND_TIME_UNIT[unit] || unit;\n  };\n\n  const handleViewDetails = () => {\n    if (onShowServicesModal) {\n      onShowServicesModal(professional);\n    }\n  };\n\n  const handleMarkerClick = (e) => {\n    // Prevent event bubbling and ensure popup opens properly\n    e.originalEvent?.stopPropagation();\n    \n    // Small delay to ensure marker position is properly set before opening popup\n    setTimeout(() => {\n      if (markerRef.current && popupRef.current) {\n        markerRef.current.openPopup();\n      }\n    }, 10);\n  };\n\n  useEffect(() => {\n    const marker = markerRef.current;\n    if (marker) {\n      const leafletMarker = marker.getElement ? marker : marker._leaflet_marker;\n      \n      if (leafletMarker) {\n        leafletMarker.on('mouseover', () => {\n          if (popupRef.current) {\n            popupRef.current.openOn(marker._map);\n          }\n        });\n      }\n    }\n  }, []);\n\n  // Ensure coordinates exist and are valid\n  if (!professional.coordinates || \n      typeof professional.coordinates.latitude !== 'number' || \n      typeof professional.coordinates.longitude !== 'number') {\n    return null;\n  }\n\n  const position = [professional.coordinates.latitude, professional.coordinates.longitude];\n\n  return (\n    <Marker\n      ref={markerRef}\n      position={position}\n      icon={MarkerIcon}\n      eventHandlers={{\n        click: handleMarkerClick,\n      }}\n    >\n      <Popup\n        ref={popupRef}\n        closeButton={true}\n        autoClose={false}\n        closeOnClick={false}\n        closeOnEscapeKey={true}\n      >\n        <div style={{\n          padding: '16px',\n          minWidth: '250px',\n          maxWidth: '300px',\n          fontFamily: 'system-ui, -apple-system, sans-serif'\n        }}>\n          <h3 style={{\n            margin: '0 0 8px 0',\n            fontSize: '18px',\n            fontWeight: '600',\n            color: '#1a1a1a'\n          }}>{professional.name}</h3>\n          <p style={{\n            margin: '0 0 4px 0',\n            fontSize: '14px',\n            color: '#666'\n          }}>{professional.location}</p>\n          <p style={{\n            margin: '0 0 8px 0',\n            fontSize: '14px',\n            color: '#1a1a1a',\n            fontWeight: '500'\n          }}>{professional.primary_service?.service_name}</p>\n          <p style={{\n            margin: '0 0 12px 0',\n            fontSize: '16px',\n            fontWeight: '600',\n            color: theme.colors.primary\n          }}>from ${professional.primary_service?.price_per_visit || 'N/A'}/{formatTimeUnit(professional.primary_service?.unit_of_time || 'visit')}</p>\n          <button \n            style={{\n              backgroundColor: theme.colors.primary,\n              color: 'white',\n              border: 'none',\n              padding: '10px 16px',\n              borderRadius: '8px',\n              fontSize: '14px',\n              fontWeight: '500',\n              cursor: 'pointer',\n              width: '100%'\n            }}\n            onClick={handleViewDetails}\n          >\n            View Details\n          </button>\n        </div>\n      </Popup>\n    </Marker>\n  );\n};\n\nconst WebMapComponent = ({ professionals, onMarkerPress, region, isMobile, onShowServicesModal }) => {\n  // Return fallback if Leaflet libraries failed to load\n  if (!MapContainer || !TileLayer || !Marker || !Popup || !L) {\n    return (\n      <View style={styles.container}>\n        <View style={styles.fallbackContainer}>\n          <Text style={styles.fallbackText}>Map not available</Text>\n        </View>\n      </View>\n    );\n  }\n\n  const formatTimeUnit = (unit) => {\n    return BACKEND_TO_FRONTEND_TIME_UNIT[unit] || unit;\n  };\n\n  const handleViewDetails = (professional) => {\n    if (onShowServicesModal) {\n      onShowServicesModal(professional);\n    }\n  };\n\n  // Calculate map bounds and center based on professionals\n  const calculateMapBounds = () => {\n    const validProfessionals = professionals.filter(professional => \n      professional.coordinates && \n      professional.coordinates.latitude && \n      professional.coordinates.longitude\n    );\n\n    if (validProfessionals.length === 0) {\n      // Default to provided region if no professionals\n      return {\n        center: [region.latitude, region.longitude],\n        zoom: 13\n      };\n    }\n\n    if (validProfessionals.length === 1) {\n      // Single professional - center on them\n      const prof = validProfessionals[0];\n      return {\n        center: [prof.coordinates.latitude, prof.coordinates.longitude],\n        zoom: 14\n      };\n    }\n\n    // Multiple professionals - calculate bounds\n    const lats = validProfessionals.map(p => p.coordinates.latitude);\n    const lngs = validProfessionals.map(p => p.coordinates.longitude);\n    \n    const minLat = Math.min(...lats);\n    const maxLat = Math.max(...lats);\n    const minLng = Math.min(...lngs);\n    const maxLng = Math.max(...lngs);\n\n    const centerLat = (minLat + maxLat) / 2;\n    const centerLng = (minLng + maxLng) / 2;\n\n    // Calculate zoom level based on bounds\n    const latDiff = maxLat - minLat;\n    const lngDiff = maxLng - minLng;\n    const maxDiff = Math.max(latDiff, lngDiff);\n\n    let zoom = 13;\n    if (maxDiff > 0.5) zoom = 10;\n    else if (maxDiff > 0.2) zoom = 11;\n    else if (maxDiff > 0.1) zoom = 12;\n    else if (maxDiff > 0.05) zoom = 13;\n    else zoom = 14;\n\n    return {\n      center: [centerLat, centerLng],\n      zoom: zoom\n    };\n  };\n\n  const mapBounds = calculateMapBounds();\n\n  return (\n    <View style={styles.mapContainer}>\n      <MapContainer\n        center={mapBounds.center}\n        zoom={mapBounds.zoom}\n        style={{ height: '100%', width: '100%' }}\n        key={`${mapBounds.center[0]}-${mapBounds.center[1]}-${mapBounds.zoom}`}\n      >\n        <TileLayer\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n          attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n        />\n        {professionals.filter(professional => \n          professional.coordinates && \n          professional.coordinates.latitude && \n          professional.coordinates.longitude\n        ).map((professional, index) => (\n          <HoverMarker\n            key={professional.professional_id}\n            professional={professional}\n            onShowServicesModal={onShowServicesModal}\n          />\n        ))}\n      </MapContainer>\n    </View>\n  );\n};\n\nconst NativeMapComponent = ({ professionals, onMarkerPress, region, isMobile, onShowServicesModal }) => {\n  const [mapReady, setMapReady] = useState(false);\n  const [dimensions, setDimensions] = useState({ width: 0, height: 0 });\n  \n  // Debug logging for Android\n  console.log('NativeMapComponent - Platform:', Platform.OS);\n  console.log('NativeMapComponent - ReactNativeMapView available:', !!ReactNativeMapView);\n  console.log('NativeMapComponent - RNMarker available:', !!RNMarker);\n  console.log('NativeMapComponent - Callout available:', !!Callout);\n  console.log('NativeMapComponent - PROVIDER_GOOGLE available:', !!PROVIDER_GOOGLE);\n  \n  // Return fallback if react-native-maps failed to load\n  if (!ReactNativeMapView || !RNMarker || !Callout) {\n    console.log('NativeMapComponent - Returning fallback due to missing components');\n    return (\n      <View style={styles.container}>\n        <View style={styles.fallbackContainer}>\n          <Text style={styles.fallbackText}>Map not available - missing components</Text>\n          <Text style={styles.fallbackText}>\n            MapView: {ReactNativeMapView ? '✓' : '✗'} | \n            Marker: {RNMarker ? '✓' : '✗'} | \n            Callout: {Callout ? '✓' : '✗'}\n          </Text>\n        </View>\n      </View>\n    );\n  }\n\n  const formatTimeUnit = (unit) => {\n    return BACKEND_TO_FRONTEND_TIME_UNIT[unit] || unit;\n  };\n\n  // Calculate map region based on professionals\n  const calculateMapRegion = () => {\n    const validProfessionals = professionals.filter(professional => \n      professional.coordinates && \n      professional.coordinates.latitude && \n      professional.coordinates.longitude\n    );\n\n    if (validProfessionals.length === 0) {\n      // Default to provided region if no professionals\n      return {\n        latitude: region.latitude,\n        longitude: region.longitude,\n        latitudeDelta: region.latitudeDelta || 0.0922,\n        longitudeDelta: region.longitudeDelta || 0.0421,\n      };\n    }\n\n    if (validProfessionals.length === 1) {\n      // Single professional - center on them\n      const prof = validProfessionals[0];\n      return {\n        latitude: prof.coordinates.latitude,\n        longitude: prof.coordinates.longitude,\n        latitudeDelta: 0.01,\n        longitudeDelta: 0.01,\n      };\n    }\n\n    // Multiple professionals - calculate bounds\n    const lats = validProfessionals.map(p => p.coordinates.latitude);\n    const lngs = validProfessionals.map(p => p.coordinates.longitude);\n    \n    const minLat = Math.min(...lats);\n    const maxLat = Math.max(...lats);\n    const minLng = Math.min(...lngs);\n    const maxLng = Math.max(...lngs);\n\n    const latitudeDelta = (maxLat - minLat) * 1.3; // Add 30% padding\n    const longitudeDelta = (maxLng - minLng) * 1.3; // Add 30% padding\n\n    return {\n      latitude: (minLat + maxLat) / 2,\n      longitude: (minLng + maxLng) / 2,\n      latitudeDelta: Math.max(latitudeDelta, 0.01), // Minimum delta\n      longitudeDelta: Math.max(longitudeDelta, 0.01), // Minimum delta\n    };\n  };\n\n  const mapRegion = calculateMapRegion();\n  console.log('NativeMapComponent - Map region:', mapRegion);\n  console.log('NativeMapComponent - Professionals count:', professionals.length);\n  \n  // Add more detailed logging for Android\n  if (Platform.OS === 'android') {\n    console.log('Android Map Debug - Region details:', {\n      latitude: mapRegion.latitude,\n      longitude: mapRegion.longitude,\n      latitudeDelta: mapRegion.latitudeDelta,\n      longitudeDelta: mapRegion.longitudeDelta,\n      isValidLatitude: mapRegion.latitude >= -90 && mapRegion.latitude <= 90,\n      isValidLongitude: mapRegion.longitude >= -180 && mapRegion.longitude <= 180,\n      isValidDeltas: mapRegion.latitudeDelta > 0 && mapRegion.longitudeDelta > 0\n    });\n  }\n\n    const handleLayout = (event) => {\n      const { width, height } = event.nativeEvent.layout;\n      console.log('Container layout:', { width, height });\n      setDimensions({ width, height });\n    };\n\n    const handleMapReady = () => {\n      console.log('Map is ready!');\n      setMapReady(true);\n    };\n\n    return (\n    <View style={styles.container} onLayout={handleLayout}>\n      {Platform.OS === 'android' && dimensions.width === 0 ? (\n        <View style={styles.fallbackContainer}>\n          <Text style={styles.fallbackText}>Loading map...</Text>\n        </View>\n      ) : (\n        <ReactNativeMapView\n          key={Platform.OS === 'android' ? `android-map-${dimensions.width}-${dimensions.height}` : 'ios-map'}\n          style={[styles.map, Platform.OS === 'android' && { width: dimensions.width, height: dimensions.height }]}\n          {...(Platform.OS === 'android' ? { region: mapRegion } : { initialRegion: mapRegion })}\n          provider={Platform.OS === 'android' ? PROVIDER_GOOGLE : undefined}\n          showsUserLocation={false}\n          showsMyLocationButton={false}\n          mapType=\"standard\"\n          loadingEnabled={false}\n          moveOnMarkerPress={false}\n          showsCompass={false}\n          showsScale={false}\n          showsBuildings={true}\n          showsTraffic={false}\n          showsIndoors={true}\n          onMapReady={handleMapReady}\n          onError={(error) => console.log('Map error:', error)}\n          onLayout={() => console.log('Map layout complete')}\n          onRegionChangeComplete={(region) => console.log('Region changed:', region)}\n        >\n        {professionals.filter(professional => \n          professional.coordinates && \n          professional.coordinates.latitude && \n          professional.coordinates.longitude\n        ).map((professional, index) => (\n          <RNMarker\n            key={professional.professional_id}\n            coordinate={{\n              latitude: professional.coordinates.latitude,\n              longitude: professional.coordinates.longitude,\n            }}\n            title={professional.name}\n            description={professional.primary_service?.service_name}\n            onPress={() => onMarkerPress && onMarkerPress(professional)}\n          >\n            {Platform.OS === 'ios' && (\n              <View style={styles.customMarker}>\n                <View style={styles.markerPin}>\n                  <View style={styles.markerInner} />\n                </View>\n              </View>\n            )}\n            <Callout onPress={() => onShowServicesModal && onShowServicesModal(professional)}>\n              <View style={styles.calloutContainer}>\n                <Text style={styles.calloutTitle}>{professional.name}</Text>\n                <Text style={styles.calloutLocation}>{professional.location}</Text>\n                <Text style={styles.calloutService}>{professional.primary_service?.service_name}</Text>\n                <Text style={styles.calloutPrice}>\n                  from ${professional.primary_service?.price_per_visit || 'N/A'}/{formatTimeUnit(professional.primary_service?.unit_of_time || 'visit')}\n                </Text>\n                <TouchableOpacity \n                  style={styles.calloutButton}\n                  onPress={() => onShowServicesModal && onShowServicesModal(professional)}\n                >\n                  <Text style={styles.calloutButtonText}>View Details</Text>\n                </TouchableOpacity>\n              </View>\n            </Callout>\n          </RNMarker>\n        ))}\n        </ReactNativeMapView>\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n    height: '100%',\n    width: '100%',\n    overflow: 'hidden',\n  },\n  mapContainer: {\n    flex: 1,\n    backgroundColor: theme.colors.background,\n    height: '100%',\n    width: '100%',\n    overflow: 'hidden',\n  },\n  map: {\n    flex: 1,\n    height: '100%',\n    width: '100%',\n  },\n  markerContainer: {\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  markerPin: {\n    width: 30,\n    height: 30,\n    backgroundColor: theme.colors.primary,\n    borderRadius: 15,\n    borderWidth: 3,\n    borderColor: 'white',\n    alignItems: 'center',\n    justifyContent: 'center',\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.3,\n    shadowRadius: 3,\n    elevation: 5,\n  },\n  markerInner: {\n    width: 12,\n    height: 12,\n    backgroundColor: 'white',\n    borderRadius: 6,\n  },\n  markerText: {\n    color: theme.colors.whiteText,\n    fontWeight: 'bold',\n  },\n  calloutContainer: {\n    backgroundColor: theme.colors.surface,\n    padding: theme.spacing.medium,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    minWidth: 200,\n    maxWidth: 250,\n  },\n  calloutTitle: {\n    fontSize: theme.fontSizes.medium,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 4,\n  },\n  calloutLocation: {\n    fontSize: theme.fontSizes.small,\n    color: theme.colors.textSecondary,\n    marginBottom: 4,\n  },\n  calloutService: {\n    fontSize: theme.fontSizes.small,\n    color: theme.colors.text,\n    fontWeight: '500',\n    marginBottom: 4,\n  },\n  calloutPrice: {\n    fontSize: theme.fontSizes.medium,\n    fontWeight: '600',\n    color: theme.colors.primary,\n    marginBottom: 8,\n  },\n  calloutButton: {\n    backgroundColor: theme.colors.primary,\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    borderRadius: 6,\n    alignItems: 'center',\n  },\n  calloutButtonText: {\n    color: theme.colors.whiteText,\n    fontSize: theme.fontSizes.small,\n    fontWeight: '500',\n  },\n  calloutText: {\n    color: theme.colors.text,\n    fontSize: theme.fontSizes.small,\n  },\n  popupContent: {\n    padding: 16,\n    minWidth: 250,\n    maxWidth: 300,\n  },\n  popupTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    fontFamily: theme.fonts.header.fontFamily,\n    color: theme.colors.text,\n    marginBottom: 8,\n  },\n  popupLocation: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n    marginBottom: 4,\n  },\n  popupService: {\n    fontSize: 14,\n    color: theme.colors.text,\n    fontWeight: '500',\n    marginBottom: 8,\n  },\n  popupPrice: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: theme.colors.primary,\n    marginBottom: 12,\n  },\n  popupButton: {\n    backgroundColor: theme.colors.primary,\n    paddingVertical: 10,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  popupButtonText: {\n    color: theme.colors.whiteText,\n    fontSize: 14,\n    fontWeight: '500',\n  },\n  fallbackContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: theme.colors.background,\n  },\n  fallbackText: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.textSecondary,\n  },\n  customMarker: {\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n});\n\nexport default MapViewComponent;","import React, { useState, useEffect, useContext } from 'react';\nimport { View, Text, Modal, TouchableOpacity, ScrollView, StyleSheet, ActivityIndicator, Dimensions, Alert, Image } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { getProfessionalServicesDetailed, createConversation, getUserReviews } from '../api/API';\nimport { AuthContext, debugLog } from '../context/AuthContext';\nimport { useNavigation } from '@react-navigation/native';\nimport { getMediaUrl } from '../config/config';\nimport { formatFromUTC } from '../utils/time_utils';\nimport ReviewsModal from './ReviewsModal';\n\nconst ProfessionalServicesModal = ({ visible, onClose, professional, primaryService }) => {\n  const navigation = useNavigation();\n  const { isSignedIn } = useContext(AuthContext);\n  const [services, setServices] = useState([]);\n  const [selectedService, setSelectedService] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [showTooltip, setShowTooltip] = useState(null);\n  const [mobileView, setMobileView] = useState('services'); // 'services' or 'details'\n  const [isCreatingConversation, setIsCreatingConversation] = useState(false);\n  const [showErrorModal, setShowErrorModal] = useState(false);\n  const [errorMessage, setErrorMessage] = useState('');\n  const [reviews, setReviews] = useState([]);\n  const [averageRating, setAverageRating] = useState(0);\n  const [reviewCount, setReviewCount] = useState(0);\n  const [loadingReviews, setLoadingReviews] = useState(false);\n  const [showReviewsModal, setShowReviewsModal] = useState(false);\n  const [activeTab, setActiveTab] = useState('services'); // 'services' or 'reviews'\n  \n  const { width: screenWidth } = Dimensions.get('window');\n  const isMobile = screenWidth <= 768;\n  const isSmallMobile = screenWidth <= 600;\n\n  useEffect(() => {\n    if (visible && professional?.professional_id) {\n      fetchServices();\n      fetchReviews();\n    }\n  }, [visible, professional?.professional_id]);\n\n  useEffect(() => {\n    // Set the primary service as selected when services load\n    if (services.length > 0 && primaryService) {\n      const primaryServiceData = services.find(s => s.service_id === primaryService.service_id);\n      if (primaryServiceData) {\n        setSelectedService(primaryServiceData);\n      } else {\n        // Fallback to first service if primary not found\n        setSelectedService(services[0]);\n      }\n    } else if (services.length > 0) {\n      setSelectedService(services[0]);\n    }\n  }, [services, primaryService]);\n\n  const fetchServices = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      debugLog('MBA9999', 'Fetching services for professional:', professional.professional_id);\n      const servicesData = await getProfessionalServicesDetailed(professional.professional_id);\n      setServices(servicesData);\n    } catch (err) {\n      debugLog('MBA9999', 'Error fetching professional services:', err);\n      setError('Failed to load services');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const fetchReviews = async () => {\n    if (!professional?.professional_id) return;\n    \n    setLoadingReviews(true);\n    try {\n      const professionalId = professional.professional_id.toString();\n      debugLog('MBA4001', 'Fetching reviews for professional:', professionalId);\n      const reviewsData = await getUserReviews(null, professionalId, false);\n      debugLog('MBA4001', 'Reviews fetched successfully:', reviewsData);\n      \n      // Check if the response has the expected structure\n      if (reviewsData && typeof reviewsData === 'object') {\n        setReviews(reviewsData.reviews || []);\n        setAverageRating(reviewsData.average_rating || 0);\n        setReviewCount(reviewsData.review_count || 0);\n        \n        // Log information about reviewer profile pictures\n        if (reviewsData.reviews && reviewsData.reviews.length > 0) {\n          debugLog('MBA4001', 'First review has profile picture:', {\n            has_profile_pic: !!reviewsData.reviews[0].reviewer_profile_picture,\n            profile_pic_url: reviewsData.reviews[0].reviewer_profile_picture || 'none'\n          });\n        }\n        \n        if (reviewsData.detail) {\n          debugLog('MBA4001', 'Review fetch message:', reviewsData.detail);\n        }\n      } else {\n        debugLog('MBA4001', 'Unexpected reviews data format:', reviewsData);\n        setReviews([]);\n        setAverageRating(0);\n        setReviewCount(0);\n      }\n    } catch (err) {\n      debugLog('MBA4001', 'Error fetching professional reviews:', err);\n      // Don't set an error state here, as we don't want to block the UI\n      setReviews([]);\n      setAverageRating(0);\n      setReviewCount(0);\n    } finally {\n      setLoadingReviews(false);\n    }\n  };\n\n  const handleClose = () => {\n    setSelectedService(null);\n    setServices([]);\n    setError(null);\n    setShowTooltip(null);\n    setMobileView('services');\n    setShowErrorModal(false);\n    setErrorMessage('');\n    setReviews([]);\n    setAverageRating(0);\n    setReviewCount(0);\n    setActiveTab('services');\n    onClose();\n  };\n\n  const handleServiceSelect = (service) => {\n    setSelectedService(service);\n    if (isMobile) {\n      setMobileView('details');\n    }\n  };\n\n  const handleBackToServices = () => {\n    setMobileView('services');\n  };\n\n  const formatAnimalTypes = (animalTypes) => {\n    if (!animalTypes || typeof animalTypes !== 'object') return 'Various animals';\n    const types = Object.keys(animalTypes);\n    if (types.length === 0) return 'Various animals';\n    if (types.length === 1) return types[0];\n    if (types.length === 2) return `${types[0]} & ${types[1]}`;\n    return `${types[0]}, ${types[1]} & ${types.length - 2} more`;\n  };\n\n  // Format date for review display\n  const formatReviewDate = (dateString) => {\n    try {\n      // formatFromUTC expects (dateStr, timeStr, userTimezone, formatType)\n      // For date-only formatting, we pass null for timeStr and use a default timezone\n      return formatFromUTC(dateString, null, 'US/Mountain');\n    } catch (error) {\n      debugLog('MBA6789', 'Error formatting review date:', error);\n      return dateString;\n    }\n  };\n\n  // Render stars based on rating\n  const renderStars = (rating) => {\n    const stars = [];\n    for (let i = 1; i <= 5; i++) {\n      stars.push(\n        <MaterialCommunityIcons\n          key={i}\n          name={i <= rating ? \"star\" : \"star-outline\"}\n          size={16}\n          color={theme.colors.warning}\n          style={styles.starIcon}\n        />\n      );\n    }\n    return <View style={styles.starsContainer}>{stars}</View>;\n  };\n\n  // Render profile picture or default icon\n  const renderProfilePicture = (profilePicture) => {\n    if (profilePicture) {\n      const imageUrl = getMediaUrl(profilePicture);\n      return (\n        <Image \n          source={{ uri: imageUrl }} \n          style={styles.reviewProfileImage} \n          resizeMode=\"cover\"\n        />\n      );\n    } else {\n      return (\n        <View style={styles.defaultReviewProfileImage}>\n          <MaterialCommunityIcons \n            name=\"account\" \n            size={32} \n            color={theme.colors.surface} \n          />\n        </View>\n      );\n    }\n  };\n\n  const renderAdditionalRates = (rates) => {\n    if (!rates || rates.length === 0) return null;\n    \n    return (\n      <View style={styles.detailSection}>\n        <Text style={styles.detailLabel}>Additional Rates</Text>\n        {rates.map((rate) => (\n          <View key={rate.rate_id} style={styles.additionalRateItem}>\n            <View style={styles.additionalRateRow}>\n              <View style={styles.additionalRateTitleContainer}>\n                {rate.description && (\n                  <TouchableOpacity \n                    style={styles.infoIcon}\n                    onPress={() => setShowTooltip(showTooltip === rate.rate_id ? null : rate.rate_id)}\n                  >\n                    <MaterialCommunityIcons \n                      name=\"information-outline\" \n                      size={16} \n                      color={theme.colors.primary} \n                    />\n                  </TouchableOpacity>\n                )}\n                <Text style={styles.additionalRateTitle}>{rate.title}</Text>\n              </View>\n              <Text style={styles.additionalRatePrice}>${rate.rate}</Text>\n            </View>\n\n          </View>\n        ))}\n      </View>\n    );\n  };\n\n  const renderServiceDetails = (service) => (\n    <>\n      <View style={styles.detailSection}>\n        <Text style={styles.detailLabel}>Description</Text>\n        <Text style={styles.detailText}>{service.description}</Text>\n      </View>\n\n      <View style={styles.detailSection}>\n        <Text style={styles.detailLabel}>Animal Types</Text>\n        <Text style={styles.detailText}>{formatAnimalTypes(service.animal_types)}</Text>\n      </View>\n\n      <View style={styles.detailSection}>\n        <Text style={styles.detailLabel}>Base Rate</Text>\n        <Text style={styles.detailText}>${service.base_rate} per {service.unit_of_time}</Text>\n      </View>\n\n      <View style={styles.detailSection}>\n        <Text style={styles.detailLabel}>Additional Animal Rate</Text>\n        <Text style={styles.detailText}>\n          ${service.additional_animal_rate} (applies after {service.applies_after} animal{service.applies_after > 1 ? 's' : ''})\n        </Text>\n      </View>\n\n      {service.holiday_rate && \n       service.holiday_rate !== '$0' && \n       service.holiday_rate !== '$0.00' && \n       service.holiday_rate !== '0%' && \n       service.holiday_rate !== '0.00%' && \n       service.holiday_rate !== '0' && (\n        <View style={styles.detailSection}>\n          <Text style={styles.detailLabel}>Holiday Rate</Text>\n          <Text style={styles.detailText}>{service.holiday_rate}</Text>\n        </View>\n      )}\n\n      {service.is_overnight && (\n        <View style={styles.detailSection}>\n          <Text style={styles.overnightBadge}>Overnight Service</Text>\n        </View>\n      )}\n\n      {renderAdditionalRates(service.additional_rates)}\n    </>\n  );\n\n  const renderReviews = () => {\n    if (loadingReviews) {\n      return (\n        <View style={styles.loadingContainer}>\n          <ActivityIndicator size=\"large\" color={theme.colors.primary} />\n          <Text style={styles.loadingText}>Loading reviews...</Text>\n        </View>\n      );\n    }\n\n    if (reviews.length === 0) {\n      return (\n        <View style={styles.emptyStateContainer}>\n          <MaterialCommunityIcons name=\"star-outline\" size={60} color={theme.colors.placeholder} />\n          <Text style={styles.emptyStateText}>No reviews yet</Text>\n        </View>\n      );\n    }\n\n    return (\n      <ScrollView style={styles.reviewsList} contentContainerStyle={styles.reviewsContent}>\n        {[...reviews].sort((a, b) => b.rating - a.rating).map((review) => (\n          <View key={review.id} style={styles.reviewCard}>\n            <View style={styles.reviewUserInfo}>\n              <View style={styles.profileContainer}>\n                {renderProfilePicture(review.reviewer_profile_picture)}\n              </View>\n              <View style={styles.reviewUserDetails}>\n                <View style={styles.nameAndStarsRow}>\n                  <Text style={styles.reviewerName}>{review.client_name || 'Anonymous'}</Text>\n                  {renderStars(review.rating)}\n                </View>\n                <View style={styles.serviceRow}>\n                  <MaterialCommunityIcons name=\"briefcase-outline\" size={14} color={theme.colors.textSecondary} style={styles.calendarIcon} />\n                  <Text style={styles.serviceName}>{review.service_name || 'No Service Found'}</Text>\n                  <Text style={styles.serviceName}>•</Text>\n                  <MaterialCommunityIcons name=\"calendar\" size={14} color={theme.colors.textSecondary} style={styles.calendarIcon} />\n                  <Text style={styles.serviceInfoText}>\n                    {review.last_occurrence_end_date || review.created_at}\n                  </Text>\n                </View>\n                <Text style={styles.reviewText}>{review.review_text || 'No comments provided.'}</Text>\n              </View>\n            </View>\n          </View>\n        ))}\n      </ScrollView>\n    );\n  };\n\n  const handleCreateConversation = async () => {\n    if (!professional?.professional_id) {\n      Alert.alert('Error', 'Professional information not available');\n      return;\n    }\n\n    // Check if user is signed in before making API call\n    if (!isSignedIn) {\n      debugLog('MBA24u45vn', 'User not signed in, redirecting to login');\n      \n      // Close the modal first\n      onClose();\n      \n      // Navigate to sign in screen\n      navigation.navigate('SignIn');\n      return;\n    }\n\n    setIsCreatingConversation(true);\n    try {\n      // Log navigation state before creating conversation\n      debugLog('MBA24u45vn', 'Navigation state before creating conversation', {\n        current_route: navigation.getState()?.routes?.[navigation.getState()?.index]?.name,\n        current_params: JSON.stringify(navigation.getState()?.routes?.[navigation.getState()?.index]?.params || {}),\n        route_count: navigation.getState()?.routes?.length,\n        current_index: navigation.getState()?.index,\n        timestamp: Date.now()\n      });\n      \n      debugLog('MBA24u45vn', 'Creating conversation with professional - START', {\n        professional_id: professional.professional_id,\n        professional_name: professional.name,\n        from_screen: navigation.getState()?.routes?.[navigation.getState()?.index]?.name || 'unknown',\n        previous_screen: navigation.getState()?.routes?.[navigation.getState()?.index - 1]?.name || 'unknown',\n        timestamp: Date.now()\n      });\n      \n      const response = await createConversation(professional.professional_id);\n      \n      debugLog('MBA24u45vn', 'Conversation created successfully', {\n        conversation_id: response.conversation_id,\n        other_user_name: response.other_user_name,\n        status: response.status,\n        is_professional: response.is_professional,\n        full_response: JSON.stringify(response),\n        timestamp: Date.now()\n      });\n      \n      // Get current navigation state for logging\n      const currentRoute = navigation.getState()?.routes?.[navigation.getState()?.index]?.name;\n      const currentParams = navigation.getState()?.routes?.[navigation.getState()?.index]?.params;\n      \n      debugLog('MBA24u45vn', 'About to navigate to MessageHistory', {\n        from_route: currentRoute,\n        current_params: JSON.stringify(currentParams),\n        conversation_id: response.conversation_id,\n        navigation_timestamp: Date.now(),\n        navigation_state: JSON.stringify(navigation.getState())\n      });\n      \n      // Close the modal first\n      onClose();\n      \n      // Add a small delay to ensure backend has processed the conversation\n      await new Promise(resolve => setTimeout(resolve, 500));\n      \n      // Create navigation params with exact conversation data to help MessageHistory\n      const navigationParams = { \n        conversationId: response.conversation_id,\n        otherUserName: professional.name,\n        otherUserProfilePic: professional.profile_picture || null,\n        isProfessional: false,\n        fullConversationData: JSON.stringify(response),\n        _timestamp: Date.now()\n      };\n      \n      debugLog('MBA24u45vn', 'Navigation params prepared', {\n        params: JSON.stringify(navigationParams),\n        timestamp: Date.now()\n      });\n      \n      // Navigate to MessageHistory with the conversation ID\n      navigation.navigate('MessageHistory', navigationParams);\n      \n      debugLog('MBA24u45vn', 'Navigation to MessageHistory completed', {\n        conversation_id: response.conversation_id,\n        timestamp: Date.now()\n      });\n      \n      // Log navigation state after navigation\n      setTimeout(() => {\n        debugLog('MBA24u45vn', 'Navigation state after navigation (with timeout)', {\n          current_route: navigation.getState()?.routes?.[navigation.getState()?.index]?.name,\n          current_params: JSON.stringify(navigation.getState()?.routes?.[navigation.getState()?.index]?.params || {}),\n          route_count: navigation.getState()?.routes?.length,\n          current_index: navigation.getState()?.index,\n          timestamp: Date.now()\n        });\n      }, 100);\n    } catch (err) {\n      debugLog('MBA3456', 'Error creating conversation:', err);\n      \n      // Check if this is the \"cannot contact yourself\" error\n      if (err.response?.status === 400 && \n          err.response?.data?.error === 'Cannot create conversation with yourself') {\n        setErrorMessage('You cannot contact yourself.');\n        setShowErrorModal(true);\n      } else {\n        setErrorMessage('Failed to create conversation. Please try again.');\n        setShowErrorModal(true);\n      }\n    } finally {\n      setIsCreatingConversation(false);\n    }\n  };\n\n  const handleOpenReviewsModal = () => {\n    setShowReviewsModal(true);\n  };\n\n  const handleCloseReviewsModal = () => {\n    setShowReviewsModal(false);\n  };\n\n  return (\n    <>\n      <Modal\n        visible={visible}\n        onRequestClose={handleClose}\n        animationType=\"slide\"\n        transparent={true}\n      >\n        <View style={styles.modalOverlay}>\n          <View style={[styles.modalContainer, isSmallMobile && styles.modalContainerSmallMobile]}>\n            {/* Header */}\n            <View style={styles.header}>\n              <View style={styles.headerTop}>\n                <View style={styles.headerLeft}>\n                  {professional?.profile_picture_url ? (\n                    <Image \n                      source={{ uri: getMediaUrl(professional.profile_picture_url) }} \n                      style={styles.professionalProfilePhoto} \n                    />\n                  ) : (\n                    <View style={styles.professionalProfilePhotoPlaceholder}>\n                      <MaterialCommunityIcons name=\"account\" size={24} color={theme.colors.placeholder} />\n                    </View>\n                  )}\n                  <View style={styles.headerTextContainer}>\n                    <Text style={styles.professionalName}>{professional?.name}</Text>\n                    <View style={styles.headerLocationContainer}>\n                      {reviewCount > 0 ? (\n                        <TouchableOpacity \n                          style={styles.reviewBadge}\n                          onPress={handleOpenReviewsModal}\n                        >\n                          <MaterialCommunityIcons name=\"star\" size={16} color={theme.colors.warning} />\n                          <Text style={styles.reviewBadgeText}>{averageRating.toFixed(2)} • {reviewCount} {reviewCount === 1 ? 'Review' : 'Reviews'}</Text>\n                        </TouchableOpacity>\n                      ) : (\n                        <Text style={styles.noReviewsText}>No reviews yet</Text>\n                      )}\n                      {/* <Text style={styles.professionalLocation}>•</Text> */}\n                      <Text style={styles.professionalLocation}>• {professional?.location}</Text>\n                    </View>\n                  </View>\n                </View>\n                \n                <TouchableOpacity onPress={handleClose} style={styles.closeButton}>\n                  <MaterialCommunityIcons name=\"close\" size={24} color={theme.colors.text} />\n                </TouchableOpacity>\n              </View>\n              \n              {/* Professional Badges */}\n              <View style={styles.headerBadgesContainer}>\n                                  <ScrollView \n                    horizontal \n                    showsHorizontalScrollIndicator={false}\n                    contentContainerStyle={styles.headerBadgesScrollContent}\n                  >\n                    {professional?.badges?.is_background_checked && (\n                      <View style={[styles.headerBadge, styles.headerBackgroundCheckedBadge]}>\n                        <MaterialCommunityIcons name=\"shield-check\" size={12} color=\"#9C27B0\" />\n                        <Text style={[styles.headerBadgeText, styles.headerBackgroundCheckedBadgeText]}>Background Checked</Text>\n                      </View>\n                    )}\n                    {professional?.badges?.is_insured && (\n                      <View style={[styles.headerBadge, styles.headerInsuredBadge]}>\n                        <MaterialCommunityIcons name=\"security\" size={12} color=\"#0784C6\" />\n                        <Text style={[styles.headerBadgeText, styles.headerInsuredBadgeText]}>Insured</Text>\n                      </View>\n                    )}\n                    {professional?.badges?.is_elite_pro && (\n                      <View style={[styles.headerBadge, styles.headerEliteProBadge]}>\n                        <MaterialCommunityIcons name=\"medal\" size={12} color=\"#4CAF50\" />\n                        <Text style={[styles.headerBadgeText, styles.headerEliteProBadgeText]}>Elite Pro</Text>\n                      </View>\n                    )}\n                  </ScrollView>\n              </View>\n            </View>\n\n            {loading ? (\n              <View style={styles.loadingContainer}>\n                <ActivityIndicator size=\"large\" color={theme.colors.primary} />\n                <Text style={styles.loadingText}>Loading services...</Text>\n              </View>\n            ) : error ? (\n              <View style={styles.errorContainer}>\n                <Text style={styles.errorText}>{error}</Text>\n                <TouchableOpacity style={styles.retryButton} onPress={fetchServices}>\n                  <Text style={styles.retryText}>Retry</Text>\n                </TouchableOpacity>\n              </View>\n            ) : (\n              <View style={[styles.content, isMobile && styles.contentMobile]}>\n                {/* Mobile: Tabs and Content */}\n                {isMobile && mobileView === 'services' && (\n                  <View style={styles.mobileMainView}>\n                    {/* Tab Headers */}\n                    <View style={styles.tabContainer}>\n                      <TouchableOpacity\n                        style={[styles.tab, activeTab === 'services' && styles.activeTab]}\n                        onPress={() => setActiveTab('services')}\n                      >\n                        <Text style={[styles.tabText, activeTab === 'services' && styles.activeTabText]}>\n                          Services\n                        </Text>\n                      </TouchableOpacity>\n                      <TouchableOpacity\n                        style={[styles.tab, activeTab === 'reviews' && styles.activeTab]}\n                        onPress={() => setActiveTab('reviews')}\n                      >\n                        <Text style={[styles.tabText, activeTab === 'reviews' && styles.activeTabText]}>\n                          Reviews {reviewCount > 0 && `(${reviewCount})`}\n                        </Text>\n                      </TouchableOpacity>\n                    </View>\n\n                    {/* Tab Content */}\n                    {activeTab === 'services' ? (\n                      <ScrollView style={styles.servicesScrollView}>\n                        {services.map((service) => (\n                          <TouchableOpacity\n                            key={service.service_id}\n                            style={styles.mobileServiceItem}\n                            onPress={() => handleServiceSelect(service)}\n                          >\n                            <View style={styles.mobileServiceContent}>\n                              <Text style={styles.mobileServiceName}>\n                                {service.service_name}\n                              </Text>\n                              <Text style={styles.mobileServicePrice}>\n                                ${service.base_rate}/{service.unit_of_time}\n                              </Text>\n                            </View>\n                            <MaterialCommunityIcons \n                              name=\"chevron-right\" \n                              size={24} \n                              color={theme.colors.textSecondary} \n                            />\n                          </TouchableOpacity>\n                        ))}\n                      </ScrollView>\n                    ) : (\n                      <View style={styles.reviewsTabContent}>\n                        {renderReviews()}\n                      </View>\n                    )}\n                  </View>\n                )}\n\n                {/* Mobile: Service Details View */}\n                {isMobile && mobileView === 'details' && selectedService && (\n                  <View style={styles.mobileDetailsView}>\n                    <View style={styles.mobileDetailsHeader}>\n                      <TouchableOpacity \n                        style={styles.backButton}\n                        onPress={handleBackToServices}\n                      >\n                        <MaterialCommunityIcons \n                          name=\"arrow-left\" \n                          size={24} \n                          color={theme.colors.primary} \n                        />\n                      </TouchableOpacity>\n                      <Text style={styles.mobileDetailsTitle}>{selectedService.service_name}</Text>\n                    </View>\n                    <ScrollView style={styles.mobileDetailsScrollView}>\n                      {renderServiceDetails(selectedService)}\n                    </ScrollView>\n                  </View>\n                )}\n\n                {/* Desktop: Two-panel layout */}\n                {!isMobile && (\n                  <>\n                    {/* Left Side with Tabs */}\n                    <View style={styles.servicesList}>\n                      {/* Tab Headers */}\n                      <View style={styles.tabContainer}>\n                        <TouchableOpacity\n                          style={[styles.tab, activeTab === 'services' && styles.activeTab]}\n                          onPress={() => setActiveTab('services')}\n                        >\n                          <Text style={[styles.tabText, activeTab === 'services' && styles.activeTabText]}>\n                            Services\n                          </Text>\n                        </TouchableOpacity>\n                        <TouchableOpacity\n                          style={[styles.tab, activeTab === 'reviews' && styles.activeTab]}\n                          onPress={() => setActiveTab('reviews')}\n                        >\n                          <Text style={[styles.tabText, activeTab === 'reviews' && styles.activeTabText]}>\n                            Reviews {reviewCount > 0 && `(${reviewCount})`}\n                          </Text>\n                        </TouchableOpacity>\n                      </View>\n\n                      {/* Tab Content */}\n                      {activeTab === 'services' ? (\n                        <ScrollView style={styles.servicesScrollView}>\n                          {services.map((service) => (\n                            <TouchableOpacity\n                              key={service.service_id}\n                              style={[\n                                styles.serviceItem,\n                                selectedService?.service_id === service.service_id && styles.serviceItemSelected\n                              ]}\n                              onPress={() => handleServiceSelect(service)}\n                            >\n                              <Text style={[\n                                styles.serviceName,\n                                selectedService?.service_id === service.service_id && styles.serviceNameSelected\n                              ]}>\n                                {service.service_name}\n                              </Text>\n                              <Text style={[\n                                styles.servicePrice,\n                                selectedService?.service_id === service.service_id && styles.servicePriceSelected\n                              ]}>\n                                ${service.base_rate}/{service.unit_of_time}\n                              </Text>\n                            </TouchableOpacity>\n                          ))}\n                        </ScrollView>\n                      ) : (\n                        <View style={styles.reviewsTabContent}>\n                          {renderReviews()}\n                        </View>\n                      )}\n                    </View>\n\n                    {/* Service Details (Right Side) - Only show when Services tab is active */}\n                    {activeTab === 'services' && (\n                      <View style={styles.serviceDetails}>\n                        {selectedService ? (\n                          <ScrollView style={styles.detailsScrollView}>\n                            <Text style={styles.detailsTitle}>{selectedService.service_name}</Text>\n                            {renderServiceDetails(selectedService)}\n                          </ScrollView>\n                        ) : (\n                          <View style={styles.noSelectionContainer}>\n                            <Text style={styles.noSelectionText}>Select a service to view details</Text>\n                          </View>\n                        )}\n                      </View>\n                    )}\n                  </>\n                )}\n              </View>\n            )}\n\n            {/* Contact Button */}\n            {!loading && !error && (\n              <View style={styles.footer}>\n                <TouchableOpacity \n                  style={[styles.contactButton, isCreatingConversation && styles.contactButtonDisabled]} \n                  onPress={handleCreateConversation}\n                  disabled={isCreatingConversation}\n                >\n                  {isCreatingConversation ? (\n                    <View style={styles.contactButtonContent}>\n                      <ActivityIndicator size=\"small\" color={theme.colors.whiteText} />\n                      <Text style={[styles.contactButtonText, { marginLeft: 8 }]}>Creating conversation...</Text>\n                    </View>\n                  ) : (\n                    <Text style={styles.contactButtonText}>Contact {professional?.name}</Text>\n                  )}\n                </TouchableOpacity>\n              </View>\n            )}\n          </View>\n        </View>\n\n        {/* Separate Modal for Tooltip */}\n        <Modal\n          visible={showTooltip !== null}\n          transparent\n          animationType=\"fade\"\n          onRequestClose={() => setShowTooltip(null)}\n        >\n          <TouchableOpacity \n            style={styles.tooltipModalOverlay}\n            activeOpacity={1}\n            onPress={() => setShowTooltip(null)}\n          >\n            <View style={styles.tooltipModalContent}>\n              <View style={styles.tooltipHeader}>\n                <Text style={styles.tooltipTitle}>\n                  {services.find(s => s.additional_rates?.find(r => r.rate_id === showTooltip))?.additional_rates?.find(r => r.rate_id === showTooltip)?.title || 'Rate Info'}\n                </Text>\n                <TouchableOpacity \n                  style={styles.tooltipCloseButton}\n                  onPress={() => setShowTooltip(null)}\n                >\n                  <MaterialCommunityIcons \n                    name=\"close\" \n                    size={18} \n                    color={theme.colors.text} \n                  />\n                </TouchableOpacity>\n              </View>\n              <Text style={styles.tooltipText}>\n                {services.find(s => s.additional_rates?.find(r => r.rate_id === showTooltip))?.additional_rates?.find(r => r.rate_id === showTooltip)?.description || ''}\n              </Text>\n            </View>\n          </TouchableOpacity>\n        </Modal>\n\n        {/* Error Modal */}\n        <Modal\n          visible={showErrorModal}\n          transparent\n          animationType=\"fade\"\n          onRequestClose={() => setShowErrorModal(false)}\n        >\n          <TouchableOpacity \n            style={styles.tooltipModalOverlay}\n            activeOpacity={1}\n            onPress={() => setShowErrorModal(false)}\n          >\n            <TouchableOpacity \n              style={styles.errorModalContent}\n              activeOpacity={1}\n              onPress={(e) => e.stopPropagation()}\n            >\n              <View style={styles.errorModalHeader}>\n                <Text style={styles.errorModalTitle}>Error</Text>\n                <TouchableOpacity \n                  style={styles.errorModalCloseButton}\n                  onPress={() => setShowErrorModal(false)}\n                >\n                  <MaterialCommunityIcons \n                    name=\"close\" \n                    size={20} \n                    color={theme.colors.text} \n                  />\n                </TouchableOpacity>\n              </View>\n              <Text style={styles.errorModalText}>\n                {errorMessage}\n              </Text>\n              <TouchableOpacity \n                style={styles.errorModalOkButton}\n                onPress={() => setShowErrorModal(false)}\n              >\n                <Text style={styles.errorModalOkText}>OK</Text>\n              </TouchableOpacity>\n            </TouchableOpacity>\n          </TouchableOpacity>\n        </Modal>\n      </Modal>\n\n      {/* Reviews Modal */}\n      <ReviewsModal\n        visible={showReviewsModal}\n        onClose={handleCloseReviewsModal}\n        reviews={reviews}\n        averageRating={averageRating}\n        reviewCount={reviewCount}\n        userName={professional?.name}\n        forProfessional={true}\n      />\n    </>\n  );\n};\n\nconst styles = StyleSheet.create({\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  modalContainer: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 12,\n    width: '90%',\n    maxWidth: 800,\n    maxHeight: '80%',\n    overflow: 'hidden',\n  },\n  modalContainerSmallMobile: {\n    width: 'calc(100% - 10px)',\n    height: 'calc(100% - 10px)',\n    maxWidth: 'none',\n    maxHeight: 'none',\n    borderRadius: 8,\n  },\n  header: {\n    padding: 20,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  headerTop: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  headerLeft: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  headerTextContainer: {\n    flex: 1,\n  },\n  professionalName: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  professionalLocation: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n    marginTop: 4,\n    marginRight: 8,\n  },\n  headerLocationContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flexWrap: 'wrap',\n    marginTop: 4,\n  },\n  reviewBadge: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    alignItems: 'center',\n    // backgroundColor: theme.colors.background,\n    paddingTop: 4,\n    paddingRight: 4,\n    borderRadius: 12,\n  },\n  reviewBadgeText: {\n    fontSize: 14,\n    color: theme.colors.text,\n    marginLeft: 4,\n    fontWeight: '500',\n  },\n  closeButton: {\n    padding: 8,\n  },\n  loadingContainer: {\n    padding: 40,\n    alignItems: 'center',\n  },\n  loadingText: {\n    marginTop: 16,\n    color: theme.colors.textSecondary,\n  },\n  errorContainer: {\n    padding: 40,\n    alignItems: 'center',\n  },\n  errorText: {\n    color: theme.colors.error,\n    textAlign: 'center',\n    marginBottom: 16,\n  },\n  retryButton: {\n    backgroundColor: theme.colors.primary,\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n    borderRadius: 8,\n  },\n  retryText: {\n    color: theme.colors.whiteText,\n    fontWeight: '500',\n  },\n  content: {\n    flexDirection: 'row',\n    flex: 1,\n  },\n  contentMobile: {\n    flexDirection: 'column',\n  },\n  // Mobile styles\n  mobileMainView: {\n    flex: 1,\n    padding: 20,\n  },\n  mobileServiceItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  mobileServiceContent: {\n    flex: 1,\n  },\n  mobileServiceName: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: theme.colors.text,\n    marginBottom: 4,\n  },\n  mobileServicePrice: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n  },\n  mobileDetailsView: {\n    flex: 1,\n  },\n  mobileDetailsHeader: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 20,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  backButton: {\n    padding: 8,\n    marginRight: 12,\n  },\n  mobileDetailsTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.text,\n    flex: 1,\n  },\n  mobileDetailsScrollView: {\n    flex: 1,\n    padding: 20,\n  },\n  // Desktop styles\n  servicesList: {\n    width: '40%',\n    borderRightWidth: 1,\n    borderRightColor: theme.colors.border,\n    padding: 20,\n  },\n  sectionTitle: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 16,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  servicesScrollView: {\n    flex: 1,\n  },\n  serviceItem: {\n    padding: 12,\n    borderRadius: 8,\n    marginBottom: 8,\n    backgroundColor: theme.colors.background,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  serviceItemSelected: {\n    backgroundColor: theme.colors.primary,\n    borderColor: theme.colors.primary,\n  },\n  serviceName: {\n    fontSize: 14,\n    fontWeight: '500',\n    color: theme.colors.text,\n    marginBottom: 4,\n  },\n  serviceNameSelected: {\n    color: theme.colors.whiteText,\n  },\n  servicePrice: {\n    fontSize: 12,\n    color: theme.colors.textSecondary,\n  },\n  servicePriceSelected: {\n    color: theme.colors.whiteText,\n  },\n  serviceDetails: {\n    flex: 1,\n    padding: 20,\n  },\n  detailsScrollView: {\n    flex: 1,\n  },\n  detailsTitle: {\n    fontSize: 24,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 20,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  detailSection: {\n    marginBottom: 20,\n  },\n  detailLabel: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 8,\n  },\n  detailText: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n    lineHeight: 20,\n  },\n  overnightBadge: {\n    backgroundColor: theme.colors.primary,\n    color: theme.colors.whiteText,\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 16,\n    fontSize: 12,\n    fontWeight: '500',\n    alignSelf: 'flex-start',\n  },\n  additionalRateItem: {\n    paddingVertical: 8,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n    position: 'relative',\n  },\n  additionalRateRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n  },\n  additionalRateTitleContainer: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    flex: 1,\n  },\n  additionalRateTitle: {\n    fontSize: 14,\n    color: theme.colors.text,\n    flex: 1,\n    marginLeft: 4,\n  },\n  infoIcon: {\n    padding: 2,\n    marginTop: -2,\n  },\n  additionalRatePrice: {\n    fontSize: 14,\n    fontWeight: '500',\n    color: theme.colors.primary,\n    marginLeft: 16,\n  },\n  tooltipModalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  tooltipModalContent: {\n    backgroundColor: theme.colors.surface,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 12,\n    padding: 16,\n    margin: 20,\n    maxWidth: 300,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 4,\n    },\n    shadowOpacity: 0.2,\n    shadowRadius: 8,\n    elevation: 10,\n  },\n  tooltipHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  tooltipTitle: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: theme.colors.text,\n    flex: 1,\n  },\n  tooltipCloseButton: {\n    padding: 4,\n    marginLeft: 8,\n  },\n  tooltipText: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n    lineHeight: 20,\n  },\n  noSelectionContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  noSelectionText: {\n    color: theme.colors.textSecondary,\n    fontSize: 16,\n  },\n  footer: {\n    padding: 20,\n    borderTopWidth: 1,\n    borderTopColor: theme.colors.border,\n  },\n  contactButton: {\n    backgroundColor: theme.colors.primary,\n    paddingVertical: 16,\n    borderRadius: 8,\n    alignItems: 'center',\n  },\n  contactButtonDisabled: {\n    backgroundColor: theme.colors.placeholder,\n    opacity: 0.7,\n  },\n  contactButtonContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  contactButtonText: {\n    color: theme.colors.whiteText,\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  errorModalContent: {\n    backgroundColor: theme.colors.surface,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    borderRadius: 12,\n    padding: 16,\n    margin: 20,\n    maxWidth: 300,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 4,\n    },\n    shadowOpacity: 0.2,\n    shadowRadius: 8,\n    elevation: 10,\n  },\n  errorModalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 12,\n  },\n  errorModalTitle: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: theme.colors.text,\n    flex: 1,\n  },\n  errorModalCloseButton: {\n    padding: 4,\n    marginLeft: 8,\n  },\n  errorModalText: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n    lineHeight: 20,\n  },\n  errorModalOkButton: {\n    backgroundColor: theme.colors.primary,\n    paddingVertical: 16,\n    borderRadius: 8,\n    alignItems: 'center',\n    marginTop: 16,\n  },\n  errorModalOkText: {\n    color: theme.colors.whiteText,\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  professionalProfilePhoto: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    marginRight: 15,\n  },\n  professionalProfilePhotoPlaceholder: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    backgroundColor: theme.colors.background,\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n    marginRight: 15,\n  },\n  noReviewsText: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n    marginLeft: 4,\n  },\n  // Tab styles\n  tabContainer: {\n    flexDirection: 'row',\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n    marginBottom: 16,\n  },\n  tab: {\n    flex: 1,\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    alignItems: 'center',\n    borderBottomWidth: 2,\n    borderBottomColor: 'transparent',\n  },\n  activeTab: {\n    borderBottomColor: theme.colors.primary,\n  },\n  tabText: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: theme.colors.textSecondary,\n  },\n  activeTabText: {\n    color: theme.colors.primary,\n    fontWeight: '600',\n  },\n  // Reviews styles\n  reviewsTabContent: {\n    flex: 1,\n  },\n  reviewsList: {\n    flex: 1,\n  },\n  reviewsContent: {\n    paddingBottom: 16,\n  },\n  reviewCard: {\n    padding: 16,\n    backgroundColor: theme.colors.background,\n    borderRadius: 8,\n    marginBottom: 12,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  reviewUserInfo: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n  },\n  profileContainer: {\n    marginRight: 16,\n  },\n  reviewProfileImage: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n  },\n  defaultReviewProfileImage: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    backgroundColor: theme.colors.primary,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  reviewUserDetails: {\n    flex: 1,\n    justifyContent: 'center',\n  },\n  nameAndStarsRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    marginBottom: 8,\n  },\n  reviewerName: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: theme.colors.text,\n    marginRight: 8,\n  },\n  starsContainer: {\n    flexDirection: 'row',\n  },\n  starIcon: {\n    marginRight: 2,\n  },\n  serviceRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flexWrap: 'wrap',\n  },\n  serviceName: {\n    fontSize: 14,\n    color: theme.colors.primary,\n    fontWeight: '500',\n    marginRight: 8,\n  },\n  calendarIcon: {\n    marginRight: 4,\n  },\n  serviceInfoText: {\n    fontSize: 14,\n    color: theme.colors.textSecondary,\n  },\n  reviewText: {\n    fontSize: 14,\n    color: theme.colors.text,\n    lineHeight: 20,\n    marginTop: 8,\n  },\n  // Header badges styles\n  headerBadgesContainer: {\n    marginTop: 16,\n  },\n  headerBadgesScrollContent: {\n    flexDirection: 'row',\n    gap: 6,\n  },\n  headerBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 3,\n    paddingHorizontal: 6,\n    borderWidth: 1,\n    borderRadius: 12,\n  },\n  headerBadgeText: {\n    fontSize: 10,\n    marginLeft: 3,\n    fontWeight: '500',\n  },\n  headerBackgroundCheckedBadge: {\n    borderColor: '#9C27B0',\n    backgroundColor: 'rgba(156, 39, 176, 0.1)',\n  },\n  headerBackgroundCheckedBadgeText: {\n    color: '#9C27B0',\n  },\n  headerInsuredBadge: {\n    borderColor: '#0784C6',\n    backgroundColor: 'rgba(7, 132, 198, 0.1)',\n  },\n  headerInsuredBadgeText: {\n    color: '#0784C6',\n  },\n  headerEliteProBadge: {\n    borderColor: '#4CAF50',\n    backgroundColor: 'rgba(76, 175, 80, 0.1)',\n  },\n  headerEliteProBadgeText: {\n    color: '#4CAF50',\n  },\n});\n\nexport default ProfessionalServicesModal; ","import React, { useState, useEffect, useContext } from 'react';\nimport { View, StyleSheet, Platform, Dimensions, TouchableOpacity, Text, useWindowDimensions, SafeAreaView } from 'react-native';\nimport SearchRefiner from '../components/SearchRefiner';\nimport ProfessionalList from '../components/ProfessionalList';\nimport MapView from '../components/MapView';\nimport ProfessionalServicesModal from '../components/ProfessionalServicesModal';\nimport { theme } from '../styles/theme';\n// import { mockProfessionals } from '../data/mockData'; // TODO: Remove mock data after implementing real search\nimport MaterialCommunityIcons from '@expo/vector-icons/MaterialCommunityIcons';\nimport { AuthContext, debugLog } from '../context/AuthContext';\nimport BackHeader from '../components/BackHeader';\nimport { searchProfessionals } from '../api/API';\n\nconst SearchProfessionalsListing = ({ navigation, route }) => {\n  const { width: windowWidth } = useWindowDimensions();\n  const { screenWidth, isCollapsed, isSignedIn } = useContext(AuthContext);\n  const [isSingleView, setIsSingleView] = useState(screenWidth <= 1200);\n  const [isMobile, setIsMobile] = useState(screenWidth <= 900);\n  const [activeView, setActiveView] = useState(isSingleView ? 'filters' : 'all');\n  const [professionals, setProfessionals] = useState([]); // Start with empty array\n  const [filters, setFilters] = useState({});\n  const [isMapMinimized, setIsMapMinimized] = useState(false);\n  const [isLeftColumnExpanded, setIsLeftColumnExpanded] = useState(true);\n  const [showingSearch, setShowingSearch] = useState(true);\n  const [isLoading, setIsLoading] = useState(false);\n  const [searchResults, setSearchResults] = useState(null);\n  const [currentSearchParams, setCurrentSearchParams] = useState(null);\n  const [region, setRegion] = useState({\n    latitude: 38.8339,\n    longitude: -104.8214,\n    latitudeDelta: 0.0922,\n    longitudeDelta: 0.0421,\n  });\n  const [activeFilters, setActiveFilters] = useState({\n    categories: [],\n  });\n  const [servicesModalVisible, setServicesModalVisible] = useState(false);\n  const [selectedProfessional, setSelectedProfessional] = useState(null);\n\n  // Helper function to extract city from location string\n  const extractCity = (location) => {\n    if (!location) return '';\n    \n    // Try to extract city from \"City, State\" format\n    const cityMatch = location.match(/^([^,]+)/);\n    if (cityMatch && cityMatch[1]) {\n      return cityMatch[1].trim();\n    }\n    \n    // If no match, return the whole location or truncate if too long\n    return truncateLocation(location);\n  };\n  \n  // Helper function to truncate long location strings\n  const truncateLocation = (location, maxLength = 20) => {\n    if (!location) return '';\n    if (location.length <= maxLength) return location;\n    \n    return location.substring(0, maxLength) + '...';\n  };\n  \n  // Helper function to generate filter categories from search params\n  const generateFilterCategories = (searchParams) => {\n    if (!searchParams) return [];\n    \n    debugLog('MBA9999', 'Generating filter categories from search params:', searchParams);\n    \n    const categories = [];\n    \n    // Add animal types (limit to 2 to avoid overcrowding)\n    if (searchParams.animal_types && searchParams.animal_types.length > 0) {\n      if (searchParams.animal_types.length === 1) {\n        categories.push(searchParams.animal_types[0]);\n      } else if (searchParams.animal_types.length === 2) {\n        categories.push(searchParams.animal_types[0]);\n        categories.push(searchParams.animal_types[1]);\n      } else {\n        categories.push(searchParams.animal_types[0]);\n        categories.push(`+${searchParams.animal_types.length - 1} more`);\n      }\n    }\n    \n    // Add location if available (extract city only)\n    if (searchParams.location) {\n      const extractedCity = extractCity(searchParams.location);\n      categories.push(extractedCity);\n      debugLog('MBA9999', `Extracted city \"${extractedCity}\" from location \"${searchParams.location}\"`);\n    }\n    \n    // Add service query if available (truncate if too long)\n    if (searchParams.service_query) {\n      const service = truncateLocation(searchParams.service_query, 15);\n      categories.push(service);\n    }\n    \n    // Add overnight service if true\n    if (searchParams.overnight_service) {\n      categories.push('Overnight');\n    }\n    \n    // Add price range if available and not the default max\n    if (searchParams.price_max && searchParams.price_max < 250) {\n      categories.push(`Under $${searchParams.price_max}`);\n    }\n    \n    // Add badge filters\n    if (searchParams.filter_background_checked) {\n      categories.push('Background Checked');\n    }\n    if (searchParams.filter_insured) {\n      categories.push('Insured');\n    }\n    if (searchParams.filter_elite_pro) {\n      categories.push('Elite Pro');\n    }\n    \n    // Limit to 4 filters max to avoid overflow\n    const finalCategories = categories.length > 4 \n      ? [...categories.slice(0, 3), `+${categories.length - 3} more`]\n      : categories;\n    \n    debugLog('MBA9999', 'Generated filter categories:', finalCategories);\n    return finalCategories;\n  };\n\n  useEffect(() => {\n    const updateLayout = () => {\n      setIsSingleView(screenWidth <= 1200);\n      setIsMobile(screenWidth <= 900);\n      setActiveView(screenWidth <= 1200 ? 'filters' : 'all');\n    };\n    updateLayout();\n  }, [screenWidth]);\n\n  useEffect(() => {\n    const unsubscribe = navigation.addListener('focus', () => {\n      if (isSingleView) {\n        setActiveView('filters');\n      }\n    });\n\n    return unsubscribe;\n  }, [navigation, isSingleView]);\n\n  // Load initial professionals when component mounts\n  useEffect(() => {\n    loadInitialProfessionals();\n  }, []);\n\n  const loadInitialProfessionals = async () => {\n    setIsLoading(true);\n    try {\n      debugLog('MBA9999', 'Loading initial professionals for Colorado Springs');\n      \n      // Load first 20 professionals in Colorado Springs area with no filters\n      const searchParams = {\n        animal_types: [],\n        location: 'Colorado Springs, Colorado',\n        service_query: '',\n        overnight_service: false,\n        price_min: 0,\n        price_max: 999999,\n        radius_miles: 30,\n        page: 1,\n        page_size: 20\n      };\n      \n      const results = await searchProfessionals(searchParams);\n      \n      debugLog('MBA9999', 'Initial professionals loaded:', results);\n      setSearchResults(results);\n      setProfessionals(results.professionals || []);\n      setCurrentSearchParams(searchParams);\n      \n      // Set initial active filters\n      const filterCategories = generateFilterCategories(searchParams);\n      setActiveFilters({\n        categories: filterCategories\n      });\n      \n    } catch (error) {\n      debugLog('MBA9999', 'Error loading initial professionals:', error);\n      console.error('Error loading initial professionals:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSearchResults = (results, searchParams = null) => {\n    debugLog('MBA9999', 'Received search results:', results);\n    setSearchResults(results);\n    setProfessionals(results.professionals || []);\n    \n    if (searchParams) {\n      setCurrentSearchParams(searchParams);\n      \n      // Update active filters based on search parameters\n      const filterCategories = generateFilterCategories(searchParams);\n      setActiveFilters({\n        categories: filterCategories\n      });\n      \n      debugLog('MBA9999', 'Updated active filters:', filterCategories);\n      debugLog('MBA9999', 'Search complete: Found ' + (results.professionals?.length || 0) + ' professionals with active filters: ' + filterCategories.join(', '));\n    }\n  };\n\n  const handleFiltersChange = (newFilters) => {\n    setFilters(newFilters);\n    // Implement filtering logic here\n  };\n\n  const handleLoadMore = () => {\n    // Implement pagination logic\n  };\n\n  const handleProfessionalSelect = (professional) => {\n    // Instead of navigating to profile, show services modal\n    setSelectedProfessional(professional);\n    setServicesModalVisible(true);\n  };\n\n  const handleShowServicesModal = (professional) => {\n    setSelectedProfessional(professional);\n    setServicesModalVisible(true);\n  };\n\n  const handleCloseServicesModal = () => {\n    setServicesModalVisible(false);\n    setSelectedProfessional(null);\n  };\n\n  const toggleMapSize = () => {\n    setIsMapMinimized(!isMapMinimized);\n  };\n\n  const handleShowProfessionals = (view) => {\n    setShowingSearch(false);\n    if (isSingleView) {\n      if (view === 'map') {\n        setActiveView('map');\n      } else {\n        setActiveView('list');\n      }\n    }\n  };\n\n  const toggleLeftColumn = () => {\n    setIsLeftColumnExpanded(!isLeftColumnExpanded);\n    // If we're expanding the left column, make sure the map is minimized\n    if (!isLeftColumnExpanded) {\n      setIsMapMinimized(true);\n    }\n  };\n\n  const createStyles = (screenWidth, isCollapsed, isSignedIn, isMobile) => StyleSheet.create({\n    mainContainer: {\n      flex: 1,\n      backgroundColor: theme.colors.background,\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      // Only apply sidebar margin when signed in and on desktop\n      marginLeft: (screenWidth > 900 && isSignedIn) ? (isCollapsed ? 70 : 250) : 0,\n      // Add top padding when not signed in (mobile header) or on mobile when signed in\n      paddingTop: (!isSignedIn || isMobile) ? 60 : 0,\n      transition: 'margin-left 0.3s ease',\n    },\n    container: {\n      flex: 1,\n      display: 'flex',\n      flexDirection: 'column',\n      height: (!isSignedIn || isMobile) ? 'calc(100vh - 60px)' : '100vh',\n      overflow: 'hidden',\n    },\n    content: {\n      flex: 1,\n      flexDirection: 'row',\n      height: isMobile ? '100%' : 'calc(100vh - 64px)',\n      overflow: 'hidden',\n    },\n    leftColumn: {\n      height: '100%',\n      borderRightWidth: 1,\n      borderRightColor: theme.colors.border,\n      backgroundColor: theme.colors.background,\n      transition: 'width 0.3s ease',\n      position: 'relative',\n      zIndex: 1,\n    },\n    leftColumnToggle: {\n      position: 'absolute',\n      top: '50%',\n      right: -16,\n      transform: [{ translateY: -20 }],\n      zIndex: 2000,\n      backgroundColor: theme.colors.surface,\n      padding: theme.spacing.small,\n      borderRadius: 20,\n      shadowColor: \"#000\",\n      shadowOffset: {\n        width: 0,\n        height: 2,\n      },\n      shadowOpacity: 0.1,\n      shadowRadius: 3,\n      elevation: 3,\n      width: 32,\n      height: 32,\n      alignItems: 'center',\n      justifyContent: 'center',\n      borderWidth: 1,\n      borderColor: theme.colors.border,\n    },\n    mapColumn: {\n      flex: 1,\n      backgroundColor: theme.colors.background,\n      height: '100%',\n      transition: 'width 0.3s ease',\n      position: 'relative',\n      zIndex: 0,\n    },\n    toggleButton: {\n      position: 'absolute',\n      top: theme.spacing.medium,\n      right: theme.spacing.medium,\n      zIndex: 1000,\n      backgroundColor: theme.colors.surface,\n      padding: theme.spacing.small,\n      borderRadius: 8,\n      shadowColor: \"#000\",\n      shadowOffset: {\n        width: 0,\n        height: 2,\n      },\n      shadowOpacity: 0.1,\n      shadowRadius: 3,\n      elevation: 3,\n    },\n    toggleButtonText: {\n      color: theme.colors.primary,\n      fontSize: theme.fontSizes.medium,\n      fontFamily: theme.fonts.regular.fontFamily,\n      fontWeight: '500',\n    },\n    containerMobile: {\n      flex: 1,\n      backgroundColor: theme.colors.background,\n      height: '100%',\n      overflow: 'hidden',\n    },\n    mobileHeader: {\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n      borderBottomWidth: 2,\n      padding: 10,\n      marginHorizontal: 10,\n      backgroundColor: theme.colors.background,\n    },\n    mobileHeaderText: {\n      fontSize: theme.fontSizes.large,\n      fontWeight: '500',\n      fontFamily: theme.fonts.header.fontFamily,\n    },\n    \n    headerIcon: {\n      padding: 8,\n      marginLeft: 16,\n    },\n    searchButton: {\n      backgroundColor: theme.colors.primary,\n      padding: 10,\n      alignItems: 'center',\n      borderRadius: 5,\n      margin: 10,\n    },\n    searchButtonText: {\n      color: theme.colors.whiteText,\n      fontSize: theme.fontSizes.medium + 2,\n      fontFamily: theme.fonts.regular.fontFamily,\n    },\n    mapToggleButton: {\n      position: 'absolute',\n      top: theme.spacing.medium,\n      right: theme.spacing.medium,\n      zIndex: 1000,\n      backgroundColor: theme.colors.surface,\n      padding: theme.spacing.small,\n      borderRadius: 8,\n      shadowColor: \"#000\",\n      shadowOffset: {\n        width: 0,\n        height: 2,\n      },\n      shadowOpacity: 0.1,\n      shadowRadius: 3,\n      elevation: 3,\n    },\n  });\n\n  const styles = createStyles(screenWidth, isCollapsed, isSignedIn, isMobile);\n\n  const renderContent = () => {\n    if (!isSingleView) {\n      const leftColumnWidth = isLeftColumnExpanded ? '50%' : '33.333%';\n      const mapColumnWidth = isMapMinimized ? '50%' : '66.666%';\n\n      return (\n        <>\n          <View style={[styles.leftColumn, { width: leftColumnWidth }]}>\n            <TouchableOpacity \n              style={[styles.toggleButton, styles.leftColumnToggle]} \n              onPress={toggleLeftColumn}\n            >\n              <MaterialCommunityIcons \n                name={isLeftColumnExpanded ? \"chevron-left\" : \"chevron-right\"} \n                size={24} \n                color={theme.colors.primary} \n              />\n            </TouchableOpacity>\n            {showingSearch ? (\n              <SearchRefiner \n                onFiltersChange={handleFiltersChange}\n                onShowProfessionals={handleShowProfessionals}\n                onSearchResults={handleSearchResults}\n                initialFilters={currentSearchParams}\n              />\n            ) : (\n            <ProfessionalList\n              professionals={professionals}\n              onLoadMore={handleLoadMore}\n              onProfessionalSelect={handleProfessionalSelect}\n              isMobile={isMobile}\n              filters={activeFilters}\n              searchParams={currentSearchParams}\n              onFilterPress={(view) => {\n                if (view === 'map') {\n                  setActiveView('map');\n                } else {\n                  setShowingSearch(true);\n                }\n              }}\n            />\n            )}\n          </View>\n          <View style={[styles.mapColumn, { width: mapColumnWidth }]}>\n            <TouchableOpacity \n              style={[styles.toggleButton, styles.mapToggleButton]} \n              onPress={toggleMapSize}\n            >\n              <MaterialCommunityIcons \n                name={isMapMinimized ? \"arrow-expand\" : \"arrow-collapse\"} \n                size={24} \n                color={theme.colors.primary} \n              />\n            </TouchableOpacity>\n            <MapView\n              professionals={professionals}\n              onMarkerPress={handleProfessionalSelect}\n              onShowServicesModal={handleShowServicesModal}\n              region={region}\n              isMobile={isMobile}\n            />\n          </View>\n        </>\n      );\n    }\n\n    // Single view (below 1200px)\n    return (\n      <View style={styles.containerMobile}>\n        {activeView === 'filters' && (\n          <>\n            <SearchRefiner \n              onFiltersChange={handleFiltersChange} \n              onShowProfessionals={handleShowProfessionals}\n              onSearchResults={handleSearchResults}\n              isMobile={isSingleView}\n              initialFilters={currentSearchParams}\n            />\n          </>\n        )}\n        \n        {activeView === 'list' && (\n          <>\n            <ProfessionalList\n              professionals={professionals}\n              onLoadMore={handleLoadMore}\n              onProfessionalSelect={handleProfessionalSelect}\n              isMobile={isSingleView}\n              filters={activeFilters}\n              searchParams={currentSearchParams}\n              onFilterPress={(view) => {\n                if (view === 'map') {\n                  setActiveView('map');\n                } else {\n                  setActiveView('filters');\n                }\n              }}\n            />\n          </>\n        )}\n        \n        {activeView === 'map' && (\n          <>\n            <View style={styles.mobileHeader}>\n              <TouchableOpacity onPress={() => setActiveView('list')}>\n                <MaterialCommunityIcons name=\"arrow-left\" size={24} color={theme.colors.primary} />\n              </TouchableOpacity>\n            </View>\n            <MapView\n              professionals={professionals}\n              onMarkerPress={handleProfessionalSelect}\n              onShowServicesModal={handleShowServicesModal}\n              region={region}\n              isMobile={isSingleView}\n            />\n          </>\n        )}\n      </View>\n    );\n  };\n\n  return (\n    <View style={styles.mainContainer}>\n      <SafeAreaView style={styles.container}>\n        <View style={styles.content}>\n          {renderContent()}\n        </View>\n      </SafeAreaView>\n      \n      {/* Professional Services Modal */}\n      <ProfessionalServicesModal\n        visible={servicesModalVisible}\n        onClose={handleCloseServicesModal}\n        professional={selectedProfessional}\n        primaryService={selectedProfessional?.primary_service}\n      />\n    </View>\n  );\n};\n\nexport default SearchProfessionalsListing;\n\n","import React, { useState, useEffect, useContext } from 'react';\nimport { View, Text, StyleSheet, TextInput, FlatList, TouchableOpacity, ActivityIndicator, Platform, Dimensions, ScrollView } from 'react-native';\nimport { useNavigation } from '@react-navigation/native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport BackHeader from '../components/BackHeader';\nimport BookingCard from '../components/BookingCard';\nimport { AuthContext } from '../context/AuthContext';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport axios from 'axios';\nimport { handleBack, navigateToFrom } from '../components/Navigation';\nimport { API_BASE_URL } from '../config/config';\nimport { supportsHover } from '../utils/deviceUtils';\n\nconst MyBookings = () => {\n  const navigation = useNavigation();\n  const { isApprovedProfessional, userRole, is_DEBUG, isCollapsed, screenWidth } = useContext(AuthContext);\n  const [isMobile, setIsMobile] = useState(screenWidth < 900);\n  const [isWideScreen, setIsWideScreen] = useState(screenWidth >= 1200);\n  const [activeTab, setActiveTab] = useState(userRole === 'professional' ? 'professional' : 'owner');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [bookings, setBookings] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n  const [isLoadingMore, setIsLoadingMore] = useState(false);\n  const [activeFilter, setActiveFilter] = useState('all');\n  const [hoveredFilter, setHoveredFilter] = useState(null);\n  \n  // Check if device supports hover\n  const deviceSupportsHover = supportsHover();\n\n  useEffect(() => {\n    const updateLayout = () => {\n      setIsMobile(Dimensions.get('window').width < 900);\n      setIsWideScreen(Dimensions.get('window').width >= 1200);\n    };\n\n    const subscription = Dimensions.addEventListener('change', updateLayout);\n    return () => {\n      subscription?.remove();\n    };\n  }, []);\n\n  // Handle role changes\n  useEffect(() => {\n    if (userRole === 'professional' && isApprovedProfessional) {\n      setActiveTab('professional');\n    }\n  }, [userRole, isApprovedProfessional]);\n\n  const fetchBookings = async (pageNum = 1, isLoadMore = false) => {\n    if (isLoadMore) {\n      setIsLoadingMore(true);\n    } else {\n      setLoading(true);\n      setError(null);\n    }\n\n    try {\n      let token = Platform.OS === 'web' ? sessionStorage.getItem('userToken') : await AsyncStorage.getItem('userToken');\n      if (!token) {\n        throw new Error('No authentication token found');\n      }\n\n      if (is_DEBUG) {\n        console.log('MBA1234 Fetching bookings:', {\n          isApprovedProfessional,\n          userRole,\n          activeTab,\n          page: pageNum,\n          status: activeFilter\n        });\n      }\n\n      const response = await axios.get(\n        `${API_BASE_URL}/api/bookings/v1/`,\n        { \n          headers: { Authorization: `Bearer ${token}` },\n          params: {\n            page: pageNum,\n            page_size: 20,\n            status: activeFilter\n          }\n        }\n      );\n\n      const newBookings = activeTab === 'professional' \n        ? response.data.bookings.professional_bookings || []\n        : response.data.bookings.owner_bookings || [];\n\n      if (isLoadMore) {\n        setBookings(prev => [...prev, ...newBookings]);\n      } else {\n        setBookings(newBookings);\n      }\n\n      setHasMore(newBookings.length === 20);\n      setPage(pageNum);\n    } catch (error) {\n      console.error('Error fetching bookings:', error);\n      setError('Failed to fetch bookings');\n    } finally {\n      setLoading(false);\n      setIsLoadingMore(false);\n    }\n  };\n\n  // Fetch bookings when component mounts or when dependencies change\n  useEffect(() => {\n    if (is_DEBUG) {\n      console.log('MBA1234 Fetching bookings due to dependency change:', {\n        activeTab,\n        userRole,\n        isApprovedProfessional,\n        activeFilter\n      });\n    }\n    setPage(1);\n    setBookings([]);\n    fetchBookings(1);\n  }, [activeTab, userRole, isApprovedProfessional, activeFilter]);\n\n  // Handle search\n  const handleSearch = (query) => {\n    setSearchQuery(query);\n    \n    if (!query.trim()) {\n      setPage(1);\n      setBookings([]);\n      fetchBookings(1);\n      return;\n    }\n\n    const searchLower = query.toLowerCase();\n    const filtered = bookings.filter(booking => {\n      if (activeTab === 'professional') {\n        return (\n          booking.id.toLowerCase().includes(searchLower) ||\n          booking.ownerName.toLowerCase().includes(searchLower)\n        );\n      } else {\n        return (\n          booking.id.toLowerCase().includes(searchLower) ||\n          booking.professionalName.toLowerCase().includes(searchLower)\n        );\n      }\n    });\n\n    setBookings(filtered);\n  };\n\n  const handleLoadMore = () => {\n    if (!isLoadingMore && hasMore) {\n      fetchBookings(page + 1, true);\n    }\n  };\n\n  const handleViewDetails = async (booking) => {\n    if (is_DEBUG) {\n      console.log('MBA1234 Navigating to booking details:', {\n        bookingId: booking.booking_id || booking.id,\n        isProfessional: activeTab === 'professional'\n      });\n    }\n    \n    await navigateToFrom(navigation, 'BookingDetails', 'MyBookings', {\n      bookingId: booking.booking_id || booking.id,\n      isProfessional: activeTab === 'professional'\n    });\n  };\n\n  const handleCancelBooking = async (bookingId) => {\n    if (is_DEBUG) {\n      console.log('MBA1234 Cancel booking:', bookingId);\n    }\n  };\n\n  const renderBookingCard = ({ item }) => (\n    <BookingCard\n      booking={{\n        id: item.booking_id || item.id,\n        ownerName: item.owner_name || item.ownerName,\n        professionalName: item.professional_name || item.professionalName,\n        serviceName: item.service_type || item.serviceName,\n        date: item.start_date || item.date,\n        time: item.start_time || item.time,\n        status: item.status\n      }}\n      type={activeTab}\n      onViewDetails={() => handleViewDetails(item)}\n      onCancel={() => handleCancelBooking(item.booking_id || item.id)}\n    />\n  );\n\n  const EmptyStateMessage = () => (\n    <View style={styles.emptyStateContainer}>\n      <MaterialCommunityIcons \n        name={error ? \"alert-circle-outline\" : \"calendar-blank-outline\"} \n        size={64} \n        color={error ? theme.colors.error : theme.colors.primary} \n      />\n      <Text style={styles.emptyStateTitle}>\n        {error ? 'Error Getting Bookings' : 'No Bookings Found'}\n      </Text>\n      <Text style={styles.emptyStateSubtitle}>\n        {error \n          ? 'There was an error fetching your bookings. Please try again later.' \n          : activeTab === 'professional' \n            ? isApprovedProfessional \n              ? 'Create a service to start receiving bookings'\n              : 'Apply to become a professional to start receiving bookings'\n            : 'Browse available services to make your first booking'\n        }\n      </Text>\n      {!error && (\n        <TouchableOpacity\n          style={styles.createServiceButton}\n          onPress={() => navigation.navigate(\n            activeTab === 'professional'\n              ? isApprovedProfessional\n                ? 'ServiceManager'\n                : 'BecomeProfessional'\n              : 'SearchProfessionalsListing'\n          )}\n        >\n          <Text style={styles.createServiceButtonText}>\n            {activeTab === 'professional'\n              ? isApprovedProfessional\n                ? 'Create Service'\n                : 'Become Professional'\n              : 'Browse Services'\n            }\n          </Text>\n        </TouchableOpacity>\n      )}\n      {error && (\n        <TouchableOpacity\n          style={styles.retryButton}\n          onPress={() => fetchBookings(1)}\n        >\n          <Text style={styles.retryButtonText}>Retry</Text>\n        </TouchableOpacity>\n      )}\n    </View>\n  );\n\n  const renderFooter = () => {\n    if (!isLoadingMore) return null;\n    return (\n      <View style={styles.loadingMoreContainer}>\n        <ActivityIndicator size=\"small\" color={theme.colors.primary} />\n      </View>\n    );\n  };\n\n  return (\n    <View style={[\n      styles.container,\n      { marginLeft: isMobile ? 0 : (isCollapsed ? 70 : 250) }\n    ]}>\n      <View style={[styles.content, { marginTop: isMobile ? 60 : 0 }]}>\n        <View style={styles.mainContent}>\n          <View style={styles.headerSection}>\n            <Text style={styles.title}>My Bookings</Text>\n            {isApprovedProfessional && (\n              <View style={styles.tabContainer}>\n                <TouchableOpacity\n                  style={[styles.tab, activeTab === 'professional' && styles.activeTab]}\n                  onPress={() => setActiveTab('professional')}\n                >\n                  <Text style={[styles.tabText, activeTab === 'professional' && styles.activeTabText]}>\n                    Your Bookings\n                  </Text>\n                </TouchableOpacity>\n                <TouchableOpacity\n                  style={[styles.tab, activeTab === 'owner' && styles.activeTab]}\n                  onPress={() => setActiveTab('owner')}\n                >\n                  <Text style={[styles.tabText, activeTab === 'owner' && styles.activeTabText]}>\n                    Owner Bookings\n                  </Text>\n                </TouchableOpacity>\n              </View>\n            )}\n          </View>\n          <View style={styles.bookingsContent}>\n            {loading ? (\n              <View style={styles.loadingContainer}>\n                <ActivityIndicator size=\"large\" color={theme.colors.primary} />\n              </View>\n            ) : bookings.length > 0 ? (\n              <View style={styles.bookingsContent}>\n                <View style={styles.stickyHeader}>\n                  <View style={[styles.stickyHeaderContent, { \n                    flexDirection: isWideScreen ? 'row' : 'column'\n                  }]}>\n                    <View style={[\n                      styles.searchContainer, \n                      isWideScreen ? { flex: 0.4, marginRight: 'auto' } : null\n                    ]}>\n                      <MaterialCommunityIcons name=\"magnify\" size={24} color={theme.colors.mybookings.searchBar} />\n                      <TextInput\n                        style={[styles.searchInput, { color: theme.colors.mybookings.searchBar, width: '100%', height: '100%' }]}\n                        placeholder=\"Search by pet name, owner, or date\"\n                        value={searchQuery}\n                        onChangeText={handleSearch}\n                        outlineStyle=\"none\"\n                      />\n                    </View>\n\n                    <View style={[\n                      styles.filtersWrapper,\n                      isWideScreen ? { flex: 0.6, alignItems: 'flex-end' } : null\n                    ]}>\n                      <ScrollView \n                        horizontal \n                        showsHorizontalScrollIndicator={false}\n                        contentContainerStyle={styles.filterScrollContent}\n                      >\n                        <View style={styles.filterContainer}>\n                          <TouchableOpacity \n                            style={[\n                              styles.filterButton,\n                              styles.allButton,\n                              deviceSupportsHover && hoveredFilter === 'all' && styles.filterButtonHovered\n                            ]}\n                            onPress={() => setActiveFilter('all')}\n                            onMouseEnter={() => deviceSupportsHover && setHoveredFilter('all')}\n                            onMouseLeave={() => deviceSupportsHover && setHoveredFilter(null)}\n                          >\n                            <View style={styles.filterContent}>\n                              <MaterialCommunityIcons \n                                name=\"filter-variant\" \n                                size={16} \n                                color=\"#0784C6\" \n                              />\n                              <Text style={[styles.filterText, styles.allButtonText]}>\n                                All\n                              </Text>\n                              {activeFilter === 'all' && (\n                                <MaterialCommunityIcons \n                                  name=\"check\" \n                                  size={16} \n                                  color=\"#0784C6\" \n                                  style={styles.checkmark}\n                                />\n                              )}\n                            </View>\n                          </TouchableOpacity>\n                          <TouchableOpacity \n                            style={[\n                              styles.filterButton,\n                              styles.pendingButton,\n                              deviceSupportsHover && hoveredFilter === 'pending' && styles.filterButtonHovered\n                            ]}\n                            onPress={() => setActiveFilter('pending')}\n                            onMouseEnter={() => deviceSupportsHover && setHoveredFilter('pending')}\n                            onMouseLeave={() => deviceSupportsHover && setHoveredFilter(null)}\n                          >\n                            <View style={styles.filterContent}>\n                              <MaterialCommunityIcons \n                                name=\"clock-outline\" \n                                size={16} \n                                color={theme.colors.mybookings.secondary}\n                              />\n                              <Text style={[styles.filterText, styles.pendingButtonText]}>\n                                Pending\n                              </Text>\n                              {activeFilter === 'pending' && (\n                                <MaterialCommunityIcons \n                                  name=\"check\" \n                                  size={16} \n                                  color={theme.colors.mybookings.secondary}\n                                  style={styles.checkmark}\n                                />\n                              )}\n                            </View>\n                          </TouchableOpacity>\n                          <TouchableOpacity \n                            style={[\n                              styles.filterButton,\n                              styles.confirmedButton,\n                              deviceSupportsHover && hoveredFilter === 'confirmed' && styles.filterButtonHovered\n                            ]}\n                            onPress={() => setActiveFilter('confirmed')}\n                            onMouseEnter={() => deviceSupportsHover && setHoveredFilter('confirmed')}\n                            onMouseLeave={() => deviceSupportsHover && setHoveredFilter(null)}\n                          >\n                            <View style={styles.filterContent}>\n                              <MaterialCommunityIcons \n                                name=\"check-circle-outline\" \n                                size={16} \n                                color=\"#898974\"\n                              />\n                              <Text style={[styles.filterText, styles.confirmedButtonText]}>\n                                Confirmed\n                              </Text>\n                              {activeFilter === 'confirmed' && (\n                                <MaterialCommunityIcons \n                                  name=\"check\" \n                                  size={16} \n                                  color=\"#898974\"\n                                  style={styles.checkmark}\n                                />\n                              )}\n                            </View>\n                          </TouchableOpacity>\n                          <TouchableOpacity \n                            style={[\n                              styles.filterButton,\n                              styles.completedButton,\n                              deviceSupportsHover && hoveredFilter === 'completed' && styles.filterButtonHovered\n                            ]}\n                            onPress={() => setActiveFilter('completed')}\n                            onMouseEnter={() => deviceSupportsHover && setHoveredFilter('completed')}\n                            onMouseLeave={() => deviceSupportsHover && setHoveredFilter(null)}\n                          >\n                            <View style={styles.filterContent}>\n                              <MaterialCommunityIcons \n                                name=\"flag-checkered\" \n                                size={16} \n                                color={theme.colors.mybookings.completedText}\n                              />\n                              <Text style={[styles.filterText, styles.completedButtonText]}>\n                                Completed\n                              </Text>\n                              {activeFilter === 'completed' && (\n                                <MaterialCommunityIcons \n                                  name=\"check\" \n                                  size={16} \n                                  color={theme.colors.mybookings.completedText}\n                                  style={styles.checkmark}\n                                />\n                              )}\n                            </View>\n                          </TouchableOpacity>\n                        </View>\n                      </ScrollView>\n                    </View>\n                  </View>\n                </View>\n\n                <FlatList\n                  data={bookings}\n                  renderItem={renderBookingCard}\n                  keyExtractor={item => (item.booking_id || item.id || Math.random().toString()).toString()}\n                  contentContainerStyle={styles.listContainer}\n                  onEndReached={handleLoadMore}\n                  onEndReachedThreshold={0.5}\n                  ListFooterComponent={renderFooter}\n                  ListHeaderComponent={<View style={[styles.listHeaderSpacing, { height: isWideScreen ? 130 : 190 }]} />}\n                />\n              </View>\n            ) : (\n              <EmptyStateMessage />\n            )}\n          </View>\n        </View>\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    height: '100vh',\n    backgroundColor: theme.colors.surface,\n    position: 'fixed',\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    overflow: 'hidden',\n    transition: 'margin-left 0.3s ease',\n  },\n  content: {\n    flex: 1,\n    height: '100%',\n    overflow: 'auto',\n  },\n  mainContent: {\n    flex: 1,\n    width: '100%',\n    alignSelf: 'center',\n    backgroundColor: theme.colors.background,\n  },\n  headerSection: {\n    width: '100%',\n    backgroundColor: theme.colors.surfaceContrast,\n    paddingHorizontal: 24,\n    paddingTop: 24,\n    zIndex: 2,\n  },\n  bookingsContent: {\n    flex: 1,\n    backgroundColor: theme.colors.surface,\n    position: 'relative',\n  },\n  title: {\n    fontSize: 32,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 24,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  tabContainer: {\n    flexDirection: 'row',\n    gap: 32,\n  },\n  tab: {\n    paddingBottom: 8,\n    borderBottomWidth: 2,\n    borderBottomColor: 'transparent',\n  },\n  activeTab: {\n    borderBottomColor: theme.colors.primary,\n  },\n  tabText: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  activeTabText: {\n    color: theme.colors.primary,\n    fontWeight: '500',\n  },\n  stickyHeader: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    backgroundColor: theme.colors.surfaceContrast,\n    zIndex: 2,\n    marginHorizontal: 24,\n    marginTop: 24,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    borderRadius: 8,\n    padding: 16,\n  },\n  stickyHeaderContent: {\n    width: '100%',\n    gap: 16,\n  },\n  searchContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.surfaceContrast,\n    borderRadius: 8,\n    padding: 12,\n    borderWidth: 1,\n    borderColor: '#CCCBC9', // #CCCBC9\n  },\n  filterScrollContent: {\n    flexGrow: 0,\n  },\n  filtersWrapper: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    marginRight: -16,\n  },\n  filterContainer: {\n    flexDirection: 'row',\n    gap: 8,\n    backgroundColor: theme.colors.surfaceContrast,\n    paddingVertical: 8,\n    paddingLeft: 4,\n    paddingRight: 16,\n  },\n  filterButton: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 16,\n    justifyContent: 'center',\n    ...(Platform.OS === 'web' && {\n      transition: 'all 0.2s ease-in-out',\n      cursor: 'pointer',\n    })\n  },\n  filterButtonHovered: {\n    transform: [{ scale: 1.05 }],\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 5,\n  },\n  filterContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 6,\n  },\n  checkmark: {\n    marginLeft: 4,\n  },\n  allButton: {\n    backgroundColor: '#EFF9FF', // #EFF9FF\n  },\n  allButtonText: {\n    color: '#0784C6', // #0784C6\n  },\n  pendingButton: {\n    backgroundColor: theme.colors.mybookings.main,\n  },\n  pendingButtonText: {\n    color: theme.colors.mybookings.secondary,\n  },\n  confirmedButton: {\n    backgroundColor: '#E8E9E2', // #E8E9E2\n  },\n  confirmedButtonText: {\n    color: '#898974', // #898974\n  },\n  completedButton: {\n    backgroundColor: '#F5F5F4', // #F5F5F4\n  },\n  completedButtonText: {\n    color: theme.colors.mybookings.completedText,\n  },\n  filterText: {\n    fontSize: 14,\n    fontFamily: theme.fonts.regular.fontFamily,\n    textAlign: 'center',\n  },\n  listHeaderSpacing: {\n    paddingTop: 16,\n  },\n  listContainer: {\n    paddingHorizontal: 24,\n    paddingBottom: 34,\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingMoreContainer: {\n    paddingVertical: 16,\n    alignItems: 'center',\n  },\n  emptyStateContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 24,\n  },\n  emptyStateTitle: {\n    fontSize: theme.fontSizes.large,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginTop: 16,\n    textAlign: 'center',\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  emptyStateSubtitle: {\n    fontSize: 16,\n    color: theme.colors.placeholder,\n    textAlign: 'center',\n    marginTop: 8,\n    marginBottom: 24,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  createServiceButton: {\n    backgroundColor: theme.colors.primary,\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n    borderRadius: 8,\n    marginTop: 8,\n  },\n  createServiceButtonText: {\n    color: theme.colors.surface,\n    fontSize: 16,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  retryButton: {\n    backgroundColor: theme.colors.error,\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n    borderRadius: 8,\n    marginTop: 8,\n  },\n  retryButtonText: {\n    color: theme.colors.surface,\n    fontSize: 16,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  searchInput: {\n    outlineStyle: 'none',\n    outlineWidth: 0,\n    outline: 'none',\n    marginLeft: 8,\n  },\n});\n\nexport default MyBookings;","import React, { useContext } from 'react';\nimport { View, Text, TouchableOpacity, StyleSheet, Image } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { useNavigation } from '@react-navigation/native';\nimport { AuthContext } from '../context/AuthContext';\n\nconst LogoHeader = ({ \n  title = \"CrittrCove\", \n  onProfilePress = null,\n  customStyles = {} \n}) => {\n  const navigation = useNavigation();\n  const { userProfileImage } = useContext(AuthContext);\n\n  const handleProfilePress = () => {\n    if (onProfilePress) {\n      onProfilePress();\n    } else {\n      // Default navigation to profile screen\n      navigation.navigate('Profile');\n    }\n  };\n\n  const handleNavigation = (route) => {\n    navigation.navigate(route);\n  };\n\n  return (\n    <View style={[styles.header, customStyles]}>\n      {/* Logo/Title on the left */}\n      <TouchableOpacity onPress={() => handleNavigation('Home')}>\n            <Image\n                source={require('../../assets/logo.png')}\n                style={[styles.mobileLogo, { tintColor: theme.colors.primary }]}\n            />\n        </TouchableOpacity>\n      \n      {/* Profile icon on the right */}\n      <TouchableOpacity \n        onPress={handleProfilePress} \n        style={styles.profileButton}\n      >\n        {userProfileImage ? (\n          <Image \n            source={{ uri: userProfileImage }} \n            style={styles.profileImage}\n          />\n        ) : (\n          <MaterialCommunityIcons \n            name=\"account-circle\" \n            size={32} \n            color={theme.colors.primary} \n          />\n        )}\n      </TouchableOpacity>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  header: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n    backgroundColor: theme.colors.background,\n    zIndex: 100,\n    elevation: 100,\n  },\n  logoContainer: {\n    flex: 1,\n  },\n  logoText: {\n    fontSize: theme.fontSizes.large,\n    fontWeight: 'bold',\n    color: theme.colors.primary,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  profileButton: {\n    padding: 4,\n  },\n  mobileLogo: {\n    height: 40,\n    width: 120,\n    resizeMode: 'contain',\n  },\n  profileImage: {\n    width: 32,\n    height: 32,\n    borderRadius: 16,\n    backgroundColor: theme.colors.surface,\n  },\n});\n\nexport default LogoHeader; ","import React, { useState, useEffect, useContext, useCallback } from 'react';\nimport { View, StyleSheet, ActivityIndicator, Platform, Dimensions, ScrollView } from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { useNavigation, useFocusEffect } from '@react-navigation/native';\nimport ServiceManager from '../components/ServiceManager';\nimport { theme } from '../styles/theme';\nimport LogoHeader from '../components/LogoHeader';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { getProfessionalServices } from '../api/API';\nimport { AuthContext, debugLog } from '../context/AuthContext';\nimport { useToast } from '../components/ToastProvider';\n\nconst ServiceManagerScreen = () => {\n  const navigation = useNavigation();\n  const [services, setServices] = useState([]);\n  const [hasUnsavedChanges, setHasUnsavedChanges] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isMobile, setIsMobile] = useState(Platform.OS === 'web' ? false : true);\n  const [isMobileBrowser, setIsMobileBrowser] = useState(Dimensions.get('window').width < 900);\n  const { isCollapsed, is_DEBUG, isSignedIn, userRole } = useContext(AuthContext);\n  const showToast = useToast();\n\n  useEffect(() => {\n    const updateLayout = () => {\n      setIsMobileBrowser(Dimensions.get('window').width < 900);\n    };\n\n    const subscription = Dimensions.addEventListener('change', updateLayout);\n    return () => {\n      subscription?.remove();\n    };\n  }, []);\n\n  const fetchServices = async () => {\n    try {\n      if (userRole === 'professional') {\n        setIsLoading(true);\n        const data = await getProfessionalServices();\n        if (is_DEBUG) console.log('MBA7890: Fetched services:', data);\n        setServices(data);\n      }\n    } catch (error) {\n      console.error('MBA7890: Error fetching services:', error);\n      if (userRole === 'professional') {\n        showToast({\n          message: 'Failed to load services',\n          type: 'error',\n          duration: 3000\n        });\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    // Only fetch services if user is signed in and has a role\n    if (isSignedIn && userRole) {\n      debugLog('MBA7890', 'Fetching services for user:', { userRole, isSignedIn });\n      fetchServices();\n    } else {\n      // Clear services if user is not signed in\n      setServices([]);\n      setIsLoading(false);\n    }\n  }, [isSignedIn, userRole]);\n\n  // Effect to handle unsaved changes\n  useEffect(() => {\n    if (hasUnsavedChanges) {\n      fetchServices();\n      setHasUnsavedChanges(false);\n    }\n  }, [hasUnsavedChanges]);\n\n  // Fetch services when screen comes into focus (ensures fresh data after navigation)\n  useFocusEffect(\n    useCallback(() => {\n      if (isSignedIn && userRole) {\n        debugLog('MBA7890', 'Screen focused, fetching services for user:', { userRole, isSignedIn });\n        fetchServices();\n      }\n    }, [isSignedIn, userRole])\n  );\n\n  useEffect(() => {\n    const setRouteHistory = async () => {\n      const currentRoute = 'ServiceManager';\n      let previousRoute;\n\n      if (Platform.OS === 'web') {\n        previousRoute = sessionStorage.getItem('previousRoute');\n        sessionStorage.setItem('previousRoute', previousRoute || '');\n        sessionStorage.setItem('currentRoute', currentRoute);\n      } else {\n        previousRoute = await AsyncStorage.getItem('previousRoute');\n        await AsyncStorage.setItem('previousRoute', previousRoute || '');\n        await AsyncStorage.setItem('currentRoute', currentRoute);\n      }\n\n      if (!previousRoute) {\n        previousRoute = 'Dashboard';\n        if (Platform.OS === 'web') {\n          sessionStorage.setItem('previousRoute', previousRoute || '');\n          sessionStorage.setItem('currentRoute', currentRoute);\n        } else {\n          await AsyncStorage.setItem('previousRoute', previousRoute || '');\n          await AsyncStorage.setItem('currentRoute', currentRoute);\n        }\n      }\n    };\n    setRouteHistory();\n  }, []);\n\n  if (isLoading) {\n    return (\n      <View style={[styles.container, styles.loadingContainer]}>\n        <ActivityIndicator size=\"large\" color={theme.colors.primary} />\n      </View>\n    );\n  }\n\n  return (\n    <View style={[\n      styles.container,\n      { marginLeft: !isMobileBrowser ? (isCollapsed ? 70 : 250) : 0 }\n    ]}>\n      {isMobile ? (\n        <SafeAreaView style={styles.safeAreaContainer}>\n          <LogoHeader title=\"CrittrCove\" />\n          <ScrollView \n            style={styles.scrollView}\n            contentContainerStyle={[styles.scrollContent, { marginTop: 20 }]}\n            showsVerticalScrollIndicator={false}\n          >\n            <ServiceManager\n              services={services || []}\n              setServices={setServices}\n              setHasUnsavedChanges={setHasUnsavedChanges}\n              isProfessionalTab={false}\n              isMobile={isMobile}\n            />\n          </ScrollView>\n        </SafeAreaView>\n      ) : (\n        <View \n          style={[styles.content, { marginTop: isMobileBrowser ? 30 : 0 }]}\n          showsVerticalScrollIndicator={false}\n        >\n          <ServiceManager\n            services={services || []}\n            setServices={setServices}\n            setHasUnsavedChanges={setHasUnsavedChanges}\n            isProfessionalTab={false}\n            isMobile={isMobile}\n          />\n        </View>\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    height: '100vh',\n    backgroundColor: theme.colors.surface,\n    position: 'fixed',\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    overflow: 'hidden',\n    transition: 'margin-left 0.3s ease',\n  },\n  content: {\n    flex: 1,\n    height: '100%',\n    overflow: 'auto',\n  },\n  loadingContainer: {\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  safeAreaContainer: {\n    flex: 1,\n    backgroundColor: theme.colors.surface,\n  },\n  scrollView: {\n    flex: 1,\n  },\n  scrollContent: {\n    flexGrow: 1,\n    paddingBottom: 80,\n  },\n});\n\nexport default ServiceManagerScreen; ","import React, { useState, useCallback } from 'react';\nimport {\n  View,\n  Text,\n  ScrollView,\n  StyleSheet,\n  TouchableOpacity,\n  Image,\n  Platform,\n  TextInput\n} from 'react-native';\nimport { useTheme, Searchbar } from 'react-native-paper';\nimport { BLOG_POSTS } from '../data/mockData';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport BackHeader from '../components/BackHeader';\nimport { theme } from '../styles/theme';\nimport { navigateToFrom } from '../components/Navigation';\n\nconst BlogScreen = ({ navigation }) => {\n  const theme = useTheme();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [filteredPosts, setFilteredPosts] = useState(BLOG_POSTS);\n\n  const handleBack = () => {\n    navigation.navigate('More');\n  };\n\n  const handleSearch = useCallback((query) => {\n    setSearchQuery(query);\n    const lowercaseQuery = query.toLowerCase();\n    const filtered = BLOG_POSTS.filter(post => \n      post.title.toLowerCase().includes(lowercaseQuery) ||\n      post.author.name.toLowerCase().includes(lowercaseQuery) ||\n      post.content.toLowerCase().includes(lowercaseQuery)\n    );\n    setFilteredPosts(filtered);\n  }, []);\n\n  const renderBlogPost = (post) => {\n    const truncatedContent = post.content.slice(0, 200) + '...';\n\n    return (\n      <TouchableOpacity\n        key={post.id}\n        style={[styles.blogCard, { backgroundColor: theme.colors.surface }]}\n        onPress={() => navigateToFrom(navigation, 'Blog', 'BlogPost', { post })}\n      >\n        <View style={styles.authorContainer}>\n          <Image\n            source={{ uri: post.author.profilePicture }}\n            style={styles.authorImage}\n          />\n          <View style={styles.blogContent}>\n            <Text style={[styles.title, { color: theme.colors.primary }]}>{post.title}</Text>\n            <View style={styles.authorInfo}>\n              <Text style={[styles.authorName, { color: theme.colors.secondary }]}>\n                {post.author.name}\n              </Text>\n              <Text style={styles.dot}> • </Text>\n              <Text style={styles.readTime}>{post.readTime}</Text>\n            </View>\n            <Text style={styles.preview} numberOfLines={3}>\n              {truncatedContent}\n            </Text>\n            <View style={styles.tags}>\n              {post.tags.map((tag, index) => (\n                <View \n                  key={index} \n                  style={[styles.tag, { backgroundColor: theme.colors.primary + '20' }]}\n                >\n                  <Text style={[styles.tagText, { color: theme.colors.primary }]}>{tag}</Text>\n                </View>\n              ))}\n            </View>\n            <View style={styles.stats}>\n              <View style={styles.stat}>\n                <MaterialCommunityIcons name=\"heart-outline\" size={20} color={theme.colors.secondary} />\n                <Text style={styles.statText}>{post.likes}</Text>\n              </View>\n              <View style={styles.stat}>\n                <MaterialCommunityIcons name=\"comment-outline\" size={20} color={theme.colors.secondary} />\n                <Text style={styles.statText}>{post.comments}</Text>\n              </View>\n              <View style={styles.stat}>\n                <MaterialCommunityIcons name=\"share-outline\" size={20} color={theme.colors.secondary} />\n                <Text style={styles.statText}>{post.shares}</Text>\n              </View>\n            </View>\n          </View>\n        </View>\n      </TouchableOpacity>\n    );\n  };\n\n  return (\n    <View style={[styles.container, { backgroundColor: theme.colors.background }]}>\n      <BackHeader \n        title=\"Blog\" \n        onBackPress={handleBack}\n      />\n      <View style={styles.searchBarContainer}>\n        {Platform.OS === 'web' ? (\n          <View style={[styles.searchBar, { backgroundColor: theme.colors.surface }]}>\n            <MaterialCommunityIcons name=\"magnify\" size={24} color={theme.colors.primary} />\n            <TextInput\n              placeholder=\"Search by title, author, or content\"\n              onChangeText={handleSearch}\n              value={searchQuery}\n              style={styles.webSearchInput}\n            />\n            {searchQuery ? (\n              <TouchableOpacity onPress={() => handleSearch('')}>\n                <MaterialCommunityIcons name=\"close-circle\" size={24} color={theme.colors.primary} />\n              </TouchableOpacity>\n            ) : null}\n          </View>\n        ) : (\n          <Searchbar\n            placeholder=\"Search by title, author, or content\"\n            onChangeText={handleSearch}\n            value={searchQuery}\n            style={styles.searchBar}\n            icon=\"magnify\"\n            clearIcon=\"close-circle\"\n          />\n        )}\n      </View>\n      <ScrollView style={styles.scrollView}>\n        {filteredPosts.length > 0 ? (\n          filteredPosts.map(renderBlogPost)\n        ) : (\n          <View style={styles.noResultsContainer}>\n            <MaterialCommunityIcons \n              name=\"magnify-close\" \n              size={48} \n              color={theme.colors.secondary} \n            />\n            <Text style={[styles.noResultsText, { color: theme.colors.secondary }]}>\n              No blog posts found\n            </Text>\n          </View>\n        )}\n      </ScrollView>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n  },\n  searchBarContainer: {\n    margin: 16,\n  },\n  searchBar: {\n    elevation: 4,\n    borderRadius: 8,\n    backgroundColor: theme.colors.surface,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 8,\n  },\n  searchInput: {\n    fontSize: 16,\n    color: theme.colors.text,\n  },\n  scrollView: {\n    flex: 1,\n  },\n  blogCard: {\n    margin: 16,\n    padding: 16,\n    borderRadius: 12,\n    elevation: 4,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n  },\n  authorContainer: {\n    flexDirection: 'row',\n  },\n  authorImage: {\n    width: 40,\n    height: 40,\n    borderRadius: 20,\n    marginRight: 12,\n  },\n  blogContent: {\n    flex: 1,\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginBottom: 8,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  authorInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  authorName: {\n    fontSize: 14,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  dot: {\n    marginHorizontal: 4,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  readTime: {\n    fontSize: 14,\n    color: '#666',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  preview: {\n    fontSize: 14,\n    lineHeight: 20,\n    marginBottom: 12,\n    color: '#444',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  tags: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    marginBottom: 12,\n  },\n  tag: {\n    paddingHorizontal: 8,\n    paddingVertical: 4,\n    borderRadius: 16,\n    marginRight: 8,\n    marginBottom: 8,\n  },\n  tagText: {\n    fontSize: 12,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  stats: {\n    flexDirection: 'row',\n    justifyContent: 'flex-start',\n    marginTop: 8,\n  },\n  stat: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginRight: 16,\n  },\n  statText: {\n    marginLeft: 4,\n    color: '#666',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  noResultsContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n    marginTop: 40,\n  },\n  noResultsText: {\n    fontSize: 18,\n    fontWeight: '500',\n    marginTop: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  webSearchInput: {\n    flex: 1,\n    padding: 8,\n    fontSize: 16,\n    color: theme.colors.text,\n    border: 'none',\n    backgroundColor: 'transparent',\n    WebkitTapHighlightColor: 'transparent',\n    outlineWidth: 0,\n    outlineStyle: 'none',\n    boxShadow: 'none',\n    borderColor: 'transparent',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default BlogScreen;","import React, { useState, useEffect } from 'react';\nimport {\n  View,\n  Text,\n  ScrollView,\n  StyleSheet,\n  Image,\n  TouchableOpacity,\n  Linking,\n  Platform\n} from 'react-native';\nimport { useTheme } from 'react-native-paper';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport BackHeader from '../components/BackHeader';\nimport { theme } from '../styles/theme';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { BLOG_POSTS } from '../data/mockData';\nimport { handleBack, navigateToFrom } from '../components/Navigation';\n\nconst BlogPost = ({ route, navigation }) => {\n  const [post, setPost] = useState(null);\n  const theme = useTheme();\n\n  // Validate post data structure\n  const isValidPost = (postData) => {\n    return postData && \n           typeof postData === 'object' && \n           postData.author && \n           typeof postData.author === 'object' &&\n           postData.author.name &&\n           postData.author.profilePicture &&\n           postData.author.bio &&\n           postData.title &&\n           postData.content &&\n           Array.isArray(postData.tags);\n  };\n\n  useEffect(() => {\n    const loadPost = async () => {\n      try {\n        // Try to get post from route params first\n        if (route?.params?.post && isValidPost(route.params.post)) {\n          setPost(route.params.post);\n          // Store the post data\n          if (Platform.OS === 'web') {\n            sessionStorage.setItem('currentBlogPost', JSON.stringify(route.params.post));\n          } else {\n            await AsyncStorage.setItem('currentBlogPost', JSON.stringify(route.params.post));\n          }\n          return;\n        }\n\n        // If no route params or invalid post, try to load from storage\n        let storedPost;\n        if (Platform.OS === 'web') {\n          storedPost = sessionStorage.getItem('currentBlogPost');\n        } else {\n          storedPost = await AsyncStorage.getItem('currentBlogPost');\n        }\n\n        if (storedPost) {\n          const parsedPost = JSON.parse(storedPost);\n          if (isValidPost(parsedPost)) {\n            setPost(parsedPost);\n            return;\n          }\n        }\n\n        // If no valid post found in storage, try to find it in BLOG_POSTS\n        if (route?.params?.postId) {\n          const foundPost = BLOG_POSTS.find(p => p.id === route.params.postId);\n          if (foundPost && isValidPost(foundPost)) {\n            setPost(foundPost);\n            return;\n          }\n        }\n\n        // If still no valid post, redirect to blog list\n        navigateToFrom(navigation, 'Blog', 'BlogPost');\n      } catch (error) {\n        console.error('Error loading blog post:', error);\n        navigateToFrom(navigation, 'Blog', 'BlogPost');\n      }\n    };\n\n    loadPost();\n  }, [route?.params]);\n\n  // If no post data is available, show an error state\n  if (!post || !isValidPost(post)) {\n    return (\n      <View style={[styles.mainContainer, { backgroundColor: theme.colors.background }]}>\n        <BackHeader \n          title=\"Blog Post\"\n          onBackPress={() => handleBack(navigation)}\n        />\n        <View style={styles.errorContainer}>\n          <MaterialCommunityIcons \n            name=\"alert-circle-outline\" \n            size={48} \n            color={theme.colors.error} \n          />\n          <Text style={[styles.errorText, { color: theme.colors.error }]}>\n            Blog post not found or invalid\n          </Text>\n          <TouchableOpacity\n            style={[styles.errorButton, { backgroundColor: theme.colors.primary }]}\n            onPress={() => navigateToFrom(navigation, 'Blog', 'BlogPost')}\n          >\n            <Text style={[styles.errorButtonText, { color: theme.colors.surface }]}>\n              Go to Blog List\n            </Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    );\n  }\n\n  const handleReferencePress = (reference) => {\n    if (reference.url) {\n      Linking.openURL(reference.url);\n    } else if (reference.doi) {\n      Linking.openURL(`https://doi.org/${reference.doi}`);\n    }\n  };\n\n  return (\n    <View style={[styles.mainContainer, { backgroundColor: theme.colors.background }]}>\n      <BackHeader \n        title={post.title}\n        onBackPress={() => handleBack(navigation)}\n      />\n      <ScrollView style={styles.container}>\n        <View style={styles.header}>\n          <View style={styles.authorContainer}>\n            <Image\n              source={{ uri: post.author.profilePicture }}\n              style={styles.authorImage}\n            />\n            <View style={styles.authorInfo}>\n              <Text style={[styles.authorName, { color: theme.colors.secondary }]}>\n                {post.author.name}\n              </Text>\n              <Text style={styles.authorBio}>{post.author.bio}</Text>\n              <View style={styles.postInfo}>\n                <Text style={styles.date}>{post.publishDate}</Text>\n                <Text style={styles.dot}> • </Text>\n                <Text style={styles.readTime}>{post.readTime}</Text>\n              </View>\n            </View>\n          </View>\n        </View>\n\n        <View style={styles.tags}>\n          {post.tags.map((tag, index) => (\n            <View \n              key={index} \n              style={[styles.tag, { backgroundColor: theme.colors.primary + '20' }]}\n            >\n              <Text style={[styles.tagText, { color: theme.colors.primary }]}>{tag}</Text>\n            </View>\n          ))}\n        </View>\n\n        <Text style={[styles.content, { color: theme.colors.text }]}>{post.content}</Text>\n\n        <View style={styles.stats}>\n          <TouchableOpacity style={styles.stat}>\n            <MaterialCommunityIcons name=\"heart-outline\" size={24} color={theme.colors.secondary} />\n            <Text style={styles.statText}>{post.likes}</Text>\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.stat}>\n            <MaterialCommunityIcons name=\"comment-outline\" size={24} color={theme.colors.secondary} />\n            <Text style={styles.statText}>{post.comments}</Text>\n          </TouchableOpacity>\n          <TouchableOpacity style={styles.stat}>\n            <MaterialCommunityIcons name=\"share-outline\" size={24} color={theme.colors.secondary} />\n            <Text style={styles.statText}>{post.shares}</Text>\n          </TouchableOpacity>\n        </View>\n\n        <View style={styles.references}>\n          <Text style={[styles.referencesTitle, { color: theme.colors.primary }]}>References</Text>\n          {post.references.map((reference, index) => (\n            <TouchableOpacity\n              key={index}\n              style={styles.reference}\n              onPress={() => handleReferencePress(reference)}\n            >\n              <Text style={styles.referenceText}>\n                {reference.authors} ({reference.year || 'n.d.'}). {reference.title}. {reference.publication}.\n                {reference.doi && ` DOI: ${reference.doi}`}\n              </Text>\n            </TouchableOpacity>\n          ))}\n        </View>\n      </ScrollView>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  mainContainer: {\n    flex: 1,\n  },\n  container: {\n    flex: 1,\n  },\n  header: {\n    padding: 16,\n  },\n  authorContainer: {\n    flexDirection: 'row',\n    marginBottom: 16,\n  },\n  authorImage: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    marginRight: 12,\n  },\n  authorInfo: {\n    flex: 1,\n  },\n  authorName: {\n    fontSize: 16,\n    fontWeight: '600',\n    marginBottom: 4,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  authorBio: {\n    fontSize: 14,\n    color: '#666',\n    marginBottom: 4,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  postInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  date: {\n    fontSize: 14,\n    color: '#666',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  dot: {\n    marginHorizontal: 4,\n    color: '#666',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  readTime: {\n    fontSize: 14,\n    color: '#666',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  tags: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    padding: 16,\n    paddingTop: 0,\n  },\n  tag: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 16,\n    marginRight: 8,\n    marginBottom: 8,\n  },\n  tagText: {\n    fontSize: 14,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  content: {\n    fontSize: 16,\n    lineHeight: 24,\n    padding: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  stats: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    padding: 16,\n    borderTopWidth: 1,\n    borderBottomWidth: 1,\n    borderColor: '#eee',\n  },\n  stat: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  statText: {\n    marginLeft: 8,\n    fontSize: 16,\n    color: '#666',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  references: {\n    padding: 16,\n  },\n  referencesTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginBottom: 12,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  reference: {\n    marginBottom: 12,\n  },\n  referenceText: {\n    fontSize: 14,\n    color: '#444',\n    lineHeight: 20,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  errorContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  errorText: {\n    fontSize: 18,\n    fontWeight: '500',\n    marginTop: 16,\n    marginBottom: 24,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  errorButton: {\n    paddingHorizontal: 20,\n    paddingVertical: 10,\n    borderRadius: 8,\n  },\n  errorButtonText: {\n    fontSize: 16,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default BlogPost;","import React, { useState, useContext } from 'react';\nimport { View, Text, StyleSheet, TextInput, TouchableOpacity, Platform, ScrollView, Clipboard, Modal, FlatList } from 'react-native';\nimport { theme } from '../styles/theme';\nimport BackHeader from '../components/BackHeader';\nimport CrossPlatformView from '../components/CrossPlatformView';\nimport { useNavigation } from '@react-navigation/native';\nimport { AuthContext } from '../context/AuthContext';\nimport { useForm, ValidationError } from '@formspree/react';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\n\nconst CrossPlatformContent = ({ children }) => {\n  // For web, we need to add a div with margin auto to center content\n  if (Platform.OS === 'web') {\n    return (\n      <View style={{ \n        width: '100%', \n        maxWidth: 550, \n        marginLeft: 'auto', \n        marginRight: 'auto',\n        paddingHorizontal: 15\n      }}>\n        {children}\n      </View>\n    );\n  }\n  // For native, just return children\n  return <>{children}</>;\n};\n\nconst ValidationModal = ({ visible, message, onClose }) => {\n  return (\n    <Modal\n      visible={visible}\n      transparent\n      animationType=\"fade\"\n      onRequestClose={onClose}\n    >\n      <View style={styles.modalOverlay}>\n        <View style={styles.modalContent}>\n          <Text style={styles.modalText}>{message}</Text>\n          <TouchableOpacity\n            style={styles.modalButton}\n            onPress={onClose}\n          >\n            <Text style={styles.modalButtonText}>OK</Text>\n          </TouchableOpacity>\n        </View>\n      </View>\n    </Modal>\n  );\n};\n\nconst CityDropdown = ({ selectedCity, onSelectCity }) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  \n  const cities = [\n    { id: '1', name: 'Colorado Springs' },\n    { id: '2', name: 'Denver' },\n    { id: '3', name: 'Boulder' },\n    { id: '4', name: 'Fort Collins' },\n    { id: '5', name: 'Pueblo' },\n    { id: '6', name: 'Aurora' },\n    { id: '7', name: 'Littleton' },\n    { id: '8', name: 'Castle Rock' },\n    { id: '9', name: 'Parker' },\n    { id: '10', name: 'Centennial' },\n    { id: '11', name: 'Other' }\n  ];\n\n  const filteredCities = cities.filter(city => \n    city.name.toLowerCase().includes(searchQuery.toLowerCase())\n  );\n\n  // Always include \"Other\" in the results if it's not already there\n  const displayCities = filteredCities.some(city => city.name === 'Other')\n    ? filteredCities\n    : [...filteredCities, { id: '11', name: 'Other' }];\n\n  const renderCityItem = ({ item }) => (\n    <TouchableOpacity\n      style={[\n        styles.cityItem,\n        item.name === 'Other' && styles.otherCityItem\n      ]}\n      onPress={() => {\n        onSelectCity(item.name);\n        setIsOpen(false);\n      }}\n    >\n      <Text style={[\n        styles.cityItemText,\n        item.name === 'Other' && styles.otherCityText\n      ]}>\n        {item.name}\n      </Text>\n    </TouchableOpacity>\n  );\n\n  return (\n    <View style={styles.dropdownContainer}>\n      <TouchableOpacity\n        style={[styles.dropdownButton, !selectedCity && styles.requiredField]}\n        onPress={() => setIsOpen(!isOpen)}\n      >\n        <Text style={styles.dropdownButtonText}>\n          {selectedCity || 'Select your city'}\n        </Text>\n        <MaterialCommunityIcons\n          name={isOpen ? \"chevron-up\" : \"chevron-down\"}\n          size={24}\n          color={theme.colors.primary}\n        />\n      </TouchableOpacity>\n\n      {isOpen && (\n        <View style={styles.dropdownList}>\n          <TextInput\n            style={styles.searchInput}\n            placeholder=\"Search cities...\"\n            value={searchQuery}\n            onChangeText={setSearchQuery}\n          />\n          <FlatList\n            data={displayCities}\n            renderItem={renderCityItem}\n            keyExtractor={item => item.id}\n            style={styles.cityList}\n          />\n        </View>\n      )}\n    </View>\n  );\n};\n\nconst Waitlist = () => {\n  const navigation = useNavigation();\n  const { is_prototype, screenWidth } = useContext(AuthContext);\n  const [state, handleFormspreeSubmit] = useForm(\"mkgobpro\");\n  \n  // Form state\n  const [firstName, setFirstName] = useState('');\n  const [lastName, setLastName] = useState('');\n  const [email, setEmail] = useState('');\n  const [phone, setPhone] = useState('');\n  const [petInfo, setPetInfo] = useState('');\n  const [selectedServices, setSelectedServices] = useState([]);\n  const [userType, setUserType] = useState('');\n  const [hesitations, setHesitations] = useState('');\n  const [desiredFeatures, setDesiredFeatures] = useState('');\n  const [newsletter, setNewsletter] = useState(false);\n  const [agreeToTerms, setAgreeToTerms] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [otherService, setOtherService] = useState('');\n  const [showOtherInput, setShowOtherInput] = useState(false);\n  const [streetAddress, setStreetAddress] = useState('');\n  const [aptUnit, setAptUnit] = useState('');\n  const [city, setCity] = useState('');\n  const [stateRegion, setStateRegion] = useState('');\n  const [zipCode, setZipCode] = useState('');\n  const [referralSource, setReferralSource] = useState('');\n  const [otherReferralSource, setOtherReferralSource] = useState('');\n  const [validationModal, setValidationModal] = useState({\n    visible: false,\n    message: ''\n  });\n  const [emailError, setEmailError] = useState('');\n  const [phoneError, setPhoneError] = useState('');\n  const [selectedCity, setSelectedCity] = useState('');\n  const [otherCity, setOtherCity] = useState('');\n  const [cityError, setCityError] = useState('');\n\n  // Calculate responsive widths\n  const isMobile = screenWidth < 768;\n  const maxContentWidth = '100%';\n\n  // Navigation handler for back button\n  const handleBackToSignup = () => {\n    navigation.navigate('SignUp');\n  };\n\n  const services = [\n    'Pet Sitting',\n    'Grooming',\n    'Training',\n    'Veterinary Services',\n    'Farm/Homestead Care',\n    'Care Consulting',\n    'Other'\n  ];\n\n  const userTypes = [\n    'Pet owner in need of services',\n    'Care specialist (sitter, groomer, ferrier, fish tank cleaner, etc)',\n    'Both'\n  ];\n\n  const referralSources = [\n    'Nextdoor',\n    'Reddit',\n    'Google',\n    'Other - Enter name of Person who referred you or other referral source for a free sticker'\n  ];\n\n  // Validation functions\n  const validateEmail = (email) => {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    return emailRegex.test(email);\n  };\n\n  const formatPhoneNumber = (text) => {\n    // Remove all non-numeric characters\n    const cleaned = text.replace(/\\D/g, '');\n    \n    // Format as (XXX) XXX-XXXX\n    const match = cleaned.match(/^(\\d{0,3})(\\d{0,3})(\\d{0,4})$/);\n    if (match) {\n      const [, area, prefix, line] = match;\n      let formatted = '';\n      if (area) formatted += `(${area}`;\n      if (prefix) formatted += `) ${prefix}`;\n      if (line) formatted += `-${line}`;\n      return formatted;\n    }\n    return cleaned;\n  };\n\n  const handlePhoneChange = (text) => {\n    const formatted = formatPhoneNumber(text);\n    setPhone(formatted);\n    setPhoneError('');\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    \n    // Reset validation errors\n    setEmailError('');\n    setPhoneError('');\n    setCityError('');\n\n    // Validate email\n    if (!validateEmail(email)) {\n      setEmailError('Please enter a valid email address');\n      setValidationModal({\n        visible: true,\n        message: 'Please enter a valid email address'\n      });\n      return;\n    }\n\n    // Validate phone\n    if (!phone) {\n      setPhoneError('Please enter a valid phone number');\n      setValidationModal({\n        visible: true,\n        message: 'Please enter a valid phone number'\n      });\n      return;\n    }\n\n    // Validate city\n    if (!selectedCity) {\n      setCityError('Please select your city');\n      setValidationModal({\n        visible: true,\n        message: 'Please select your city'\n      });\n      return;\n    }\n\n    // Validate other city input if \"Other\" is selected\n    if (selectedCity === 'Other' && !otherCity.trim()) {\n      setCityError('Please specify your city');\n      setValidationModal({\n        visible: true,\n        message: 'Please specify your city'\n      });\n      return;\n    }\n\n    if (!email || !firstName || !lastName || !phone || !petInfo || selectedServices.length === 0 || !userType || !agreeToTerms || !referralSource) {\n      setValidationModal({\n        visible: true,\n        message: 'Please fill in all required fields'\n      });\n      return;\n    }\n\n    // Check if Other is selected but no input provided for services\n    if (selectedServices.includes('Other') && !otherService.trim()) {\n      setValidationModal({\n        visible: true,\n        message: 'Please specify the other service you are interested in'\n      });\n      return;\n    }\n\n    // Check if Other is selected but no input provided for referral source\n    if (referralSource === 'Other - Enter name of Person who referred you or other referral source for a free sticker' && !otherReferralSource.trim()) {\n      setValidationModal({\n        visible: true,\n        message: 'Please specify where you heard about us'\n      });\n      return;\n    }\n\n    setIsSubmitting(true);\n\n    try {\n      const formData = {\n        firstName,\n        lastName,\n        email,\n        phone,\n        petInfo,\n        services: selectedServices.includes('Other') \n          ? [...selectedServices.filter(s => s !== 'Other'), `Other - ${otherService.trim()}`].join(', ')\n          : selectedServices.join(', '),\n        userType,\n        hesitations,\n        desiredFeatures,\n        newsletter: newsletter ? 'Yes' : 'No',\n        agreeToTerms: agreeToTerms ? 'Yes' : 'No',\n        referralSource: referralSource === 'Other - Enter name of Person who referred you or other referral source for a free sticker' \n          ? `Other - ${otherReferralSource.trim()}`\n          : referralSource,\n        // Flatten address fields\n        streetAddress: streetAddress || '',\n        aptUnit: aptUnit || '',\n        city: selectedCity === 'Other' ? `Other - ${otherCity.trim()}` : selectedCity,\n        stateRegion: stateRegion || '',\n        zipCode: zipCode || '',\n      };\n\n      console.log('MBA9876: Submitting form data:', formData);\n      const response = await handleFormspreeSubmit(formData);\n      console.log('MBA9876: Formspree response:', response);\n\n      if (state.succeeded) {\n        // Reset form\n        setFirstName('');\n        setLastName('');\n        setEmail('');\n        setPhone('');\n        setPetInfo('');\n        setSelectedServices([]);\n        setOtherService('');\n        setShowOtherInput(false);\n        setUserType('');\n        setHesitations('');\n        setDesiredFeatures('');\n        setNewsletter(false);\n        setAgreeToTerms(false);\n        setStreetAddress('');\n        setAptUnit('');\n        setCity('');\n        setStateRegion('');\n        setZipCode('');\n        setReferralSource('');\n        setOtherReferralSource('');\n      }\n    } catch (error) {\n      console.error('MBA9876: Error submitting form:', error);\n      console.error('MBA9876: Error response:', error.response?.data);\n      setValidationModal({\n        visible: true,\n        message: error.response?.data?.error || 'An error occurred while submitting the form. Please try again.'\n      });\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const toggleService = (service) => {\n    setSelectedServices(prev => {\n      if (service === 'Other') {\n        setShowOtherInput(!prev.includes('Other'));\n      }\n      return prev.includes(service)\n        ? prev.filter(s => s !== service)\n        : [...prev, service];\n    });\n  };\n\n  const handleCopyLink = async () => {\n    try {\n      await Clipboard.setString('https://crittrcove.com/waitlist');\n      alert('Link copied to clipboard!');\n    } catch (error) {\n      console.error('Failed to copy link:', error);\n    }\n  };\n\n  if (state.succeeded) {\n    return (\n      <CrossPlatformView fullWidthHeader={true} contentWidth={maxContentWidth}>\n        <BackHeader \n          title=\"Join Waitlist\" \n          onBackPress={handleBackToSignup} \n        />\n        <ScrollView \n          style={styles.scrollView} \n          contentContainerStyle={styles.scrollViewContent}\n        >\n          <CrossPlatformContent>\n            <View style={styles.container}>\n              <View style={styles.contentWrapper}>\n                <Text style={[styles.title, { color: theme.colors.primary }]}>\n                  Thank you for joining the CrittrCove waitlist!\n                </Text>\n                <Text style={styles.successMessage}>\n                  As a waitlist member, you'll enjoy exclusive early access to the app, priority placement, \n                  special gifts, and a unique profile badge to highlight your role as a founding member of CrittrCove.\n                </Text>\n                <View style={styles.referralSection}>\n                  <Text style={[styles.title, { fontSize: theme.fontSizes.large, marginTop: 20 }]}>\n                    Want Another Custom Pet Sticker? 🎁\n                  </Text>\n                  <Text style={styles.successMessage}>\n                    Share CrittrCove with your pet-loving friends! When they join the waitlist using this link:\n                  </Text>\n                  <View style={styles.linkContainer}>\n                    <Text style={styles.link}>https://crittrcove.com/waitlist</Text>\n                    <TouchableOpacity onPress={handleCopyLink} style={styles.copyButton}>\n                      <MaterialCommunityIcons name=\"content-copy\" size={20} color={theme.colors.primary} />\n                    </TouchableOpacity>\n                  </View>\n                  <Text style={styles.successMessage}>\n                    and mention your name, we'll send you another custom sticker featuring your pet. It's our way of saying thank you for helping\n                    grow our community!\n                  </Text>\n                  <Text style={[styles.successMessage, { fontStyle: 'italic' }]}>\n                    Simply tell your friends to mention your name when they sign up, and we'll take care of the rest.\n                  </Text>\n                </View>\n                <Text style={styles.successMessage}>\n                  Stay tuned for exciting updates!\n                </Text>\n              </View>\n            </View>\n          </CrossPlatformContent>\n        </ScrollView>\n      </CrossPlatformView>\n    );\n  }\n\n  return (\n    <CrossPlatformView fullWidthHeader={true} contentWidth={maxContentWidth}>\n      <BackHeader \n        title=\"Join Waitlist\" \n        onBackPress={handleBackToSignup} \n      />\n      <ScrollView \n        style={styles.scrollView} \n        contentContainerStyle={styles.scrollViewContent}\n      >\n        <CrossPlatformContent>\n          <View style={styles.container}>\n            <View style={styles.contentWrapper}>\n              <Text style={styles.title}>Join the CrittrCove Waitlist!</Text>\n              <Text style={styles.description}>\n                Welcome to Critter Cove's early sign-up, the ultimate pet care marketplace for all pets—whether furry, feathery, or scaly! \n                Our app connects local pet care specialists with pet owners, offering reliable and loving care for your beloved companions.\n              </Text>\n              <Text style={styles.description}>\n                By joining our waitlist, you'll gain early access to exclusive features, special gifts, education, discounts, a custom sticker featuring your pet (if you so wish), and a profile badge as a founding member of the Critter Cove community.\n              </Text>\n\n              <Text style={styles.requiredFieldNote}>\n                <Text style={styles.requiredAsterisk}>*</Text> indicates required field\n              </Text>\n\n              <View style={styles.formSection}>\n                <View style={styles.nameContainer}>\n                  <View style={styles.nameField}>\n                    <Text style={styles.label}>First Name <Text style={styles.requiredAsterisk}>*</Text></Text>\n                    <TextInput\n                      style={styles.input}\n                      value={firstName}\n                      onChangeText={setFirstName}\n                      placeholder=\"First Name\"\n                    />\n                  </View>\n                  <View style={styles.nameField}>\n                    <Text style={styles.label}>Last Name <Text style={styles.requiredAsterisk}>*</Text></Text>\n                    <TextInput\n                      style={styles.input}\n                      value={lastName}\n                      onChangeText={setLastName}\n                      placeholder=\"Last Name\"\n                    />\n                  </View>\n                </View>\n\n                <Text style={styles.label}>Email <Text style={styles.requiredAsterisk}>*</Text></Text>\n                <TextInput\n                  style={[styles.input, emailError ? styles.inputError : null]}\n                  value={email}\n                  onChangeText={(text) => {\n                    setEmail(text);\n                    setEmailError('');\n                  }}\n                  placeholder=\"Email\"\n                  keyboardType=\"email-address\"\n                  autoCapitalize=\"none\"\n                />\n                {emailError ? <Text style={styles.errorText}>{emailError}</Text> : null}\n\n                <Text style={styles.label}>Phone Number <Text style={styles.requiredAsterisk}>*</Text></Text>\n                <TextInput\n                  style={[styles.input, phoneError ? styles.inputError : null]}\n                  value={phone}\n                  onChangeText={handlePhoneChange}\n                  placeholder=\"(XXX) XXX-XXXX\"\n                  keyboardType=\"numeric\"\n                  maxLength={14}\n                />\n                {phoneError ? <Text style={styles.errorText}>{phoneError}</Text> : null}\n\n                <Text style={styles.label}>Do you currently own pets? If yes, tell us all about them! <Text style={styles.requiredAsterisk}>*</Text></Text>\n                <TextInput\n                  style={[styles.input, styles.textArea]}\n                  value={petInfo}\n                  onChangeText={setPetInfo}\n                  placeholder=\"Tell us about your pets\"\n                  multiline\n                  numberOfLines={4}\n                />\n\n                <Text style={styles.label}>What kind of pet care services are you most interested in? <Text style={styles.requiredAsterisk}>*</Text></Text>\n                <View style={styles.checkboxGroup}>\n                  {services.map((service) => (\n                    <View key={service}>\n                      <TouchableOpacity \n                        style={styles.checkboxContainer}\n                        onPress={() => toggleService(service)}\n                      >\n                        <MaterialCommunityIcons\n                          name={selectedServices.includes(service) ? \"checkbox-marked\" : \"checkbox-blank-outline\"}\n                          size={24}\n                          color={theme.colors.primary}\n                          style={styles.checkboxIcon}\n                        />\n                        <Text style={styles.checkboxLabel}>{service}</Text>\n                      </TouchableOpacity>\n                      {service === 'Other' && selectedServices.includes('Other') && (\n                        <View style={styles.otherInputContainer}>\n                          <Text style={styles.label}>Please specify other service <Text style={styles.requiredAsterisk}>*</Text></Text>\n                          <TextInput\n                            style={[styles.input, styles.otherInput]}\n                            value={otherService}\n                            onChangeText={setOtherService}\n                            placeholder=\"Enter other service\"\n                          />\n                        </View>\n                      )}\n                    </View>\n                  ))}\n                </View>\n\n                <Text style={styles.label}>Are you signing up as a: <Text style={styles.requiredAsterisk}>*</Text></Text>\n                <View style={styles.radioGroup}>\n                  {userTypes.map((type) => (\n                    <TouchableOpacity \n                      key={type}\n                      style={styles.radioContainer}\n                      onPress={() => setUserType(type)}\n                    >\n                      <View style={[styles.radio, userType === type && styles.radioSelected]} />\n                      <Text style={styles.radioLabel}>{type}</Text>\n                    </TouchableOpacity>\n                  ))}\n                </View>\n\n                <Text style={styles.label}>Where did you hear about us? <Text style={styles.requiredAsterisk}>*</Text></Text>\n                <View style={styles.radioGroup}>\n                  {referralSources.map((source) => (\n                    <TouchableOpacity \n                      key={source}\n                      style={styles.radioContainer}\n                      onPress={() => setReferralSource(source)}\n                    >\n                      <View style={[styles.radio, referralSource === source && styles.radioSelected]} />\n                      <Text style={styles.radioLabel}>{source}</Text>\n                    </TouchableOpacity>\n                  ))}\n                </View>\n                {referralSource === 'Other - Enter name of Person who referred you or other referral source for a free sticker' && (\n                  <View>\n                    <Text style={styles.label}>Please specify where you heard about us <Text style={styles.requiredAsterisk}>*</Text></Text>\n                    <TextInput\n                      style={styles.input}\n                      value={otherReferralSource}\n                      onChangeText={setOtherReferralSource}\n                      placeholder=\"Enter referral source\"\n                    />\n                  </View>\n                )}\n\n                <Text style={styles.label}>Which city are you located in? <Text style={styles.requiredAsterisk}>*</Text></Text>\n                <CityDropdown\n                  selectedCity={selectedCity}\n                  onSelectCity={(city) => {\n                    setSelectedCity(city);\n                    setCityError('');\n                  }}\n                />\n                {selectedCity === 'Other' && (\n                  <View style={styles.otherInputContainer}>\n                    <Text style={styles.label}>Please specify your city <Text style={styles.requiredAsterisk}>*</Text></Text>\n                    <TextInput\n                      style={[styles.input, cityError && styles.inputError]}\n                      value={otherCity}\n                      onChangeText={(text) => {\n                        setOtherCity(text);\n                        setCityError('');\n                      }}\n                      placeholder=\"Enter your city\"\n                    />\n                  </View>\n                )}\n                {cityError ? <Text style={styles.errorText}>{cityError}</Text> : null}\n\n                <Text style={styles.label}>What hesitations do you have about using an app to connect you to local pet care? <Text style={styles.optional}>(Optional)</Text></Text>\n                <TextInput\n                  style={[styles.input, styles.textArea]}\n                  value={hesitations}\n                  onChangeText={setHesitations}\n                  placeholder=\"Share your concerns\"\n                  multiline\n                  numberOfLines={4}\n                />\n\n                <Text style={styles.label}>What features or tools would make Critter Cove perfect for you? <Text style={styles.optional}>(Optional)</Text></Text>\n                <TextInput\n                  style={[styles.input, styles.textArea]}\n                  value={desiredFeatures}\n                  onChangeText={setDesiredFeatures}\n                  placeholder=\"Share your ideas\"\n                  multiline\n                  numberOfLines={4}\n                />\n\n                <View style={styles.addressSection}>\n                  <Text style={styles.label}>Mailing Address <Text style={styles.optional}>(Optional)</Text></Text>\n                  <Text style={styles.addressNote}>\n                    🎁 <Text style={{ fontStyle: 'italic' }}> Want a custom sticker featuring your pet? Add your mailing address and we'll send you one for joining the waitlist!</Text>\n                  </Text>\n                  <TextInput\n                    style={styles.input}\n                    value={streetAddress}\n                    onChangeText={setStreetAddress}\n                    placeholder=\"Street Address\"\n                  />\n                  <TextInput\n                    style={styles.input}\n                    value={aptUnit}\n                    onChangeText={setAptUnit}\n                    placeholder=\"Apartment/Unit # (if applicable)\"\n                  />\n                  <View style={styles.cityStateContainer}>\n                    <TextInput\n                      style={[styles.input, styles.cityInput]}\n                      value={city}\n                      onChangeText={setCity}\n                      placeholder=\"City\"\n                    />\n                    <TextInput\n                      style={[styles.input, styles.stateInput]}\n                      value={stateRegion}\n                      onChangeText={setStateRegion}\n                      placeholder=\"State\"\n                      maxLength={2}\n                      autoCapitalize=\"characters\"\n                    />\n                    <TextInput\n                      style={[styles.input, styles.zipInput]}\n                      value={zipCode}\n                      onChangeText={setZipCode}\n                      placeholder=\"ZIP\"\n                      keyboardType=\"numeric\"\n                      maxLength={5}\n                    />\n                  </View>\n                </View>\n\n                <Text style={styles.label}>Would you like to be added to the email newsletter for updates on the app, pet care tips, discounts and more? <Text style={styles.optional}>(Optional)</Text></Text>\n                <View style={styles.buttonContainer}>\n                  <TouchableOpacity \n                    style={[styles.button, newsletter && styles.buttonSelected]}\n                    onPress={() => setNewsletter(true)}\n                  >\n                    <Text style={[styles.buttonText, newsletter && styles.buttonTextSelected]}>Yes</Text>\n                  </TouchableOpacity>\n                  <TouchableOpacity \n                    style={[styles.button, !newsletter && styles.buttonSelected]}\n                    onPress={() => setNewsletter(false)}\n                  >\n                    <Text style={[styles.buttonText, !newsletter && styles.buttonTextSelected]}>No</Text>\n                  </TouchableOpacity>\n                </View>\n\n                <Text style={styles.label}>I agree to the terms and conditions and understand my data will be used to improve the app experience. <Text style={styles.requiredAsterisk}>*</Text></Text>\n                <View style={styles.buttonContainer}>\n                  <TouchableOpacity \n                    style={[styles.button, agreeToTerms && styles.buttonSelected]}\n                    onPress={() => setAgreeToTerms(true)}\n                  >\n                    <Text style={[styles.buttonText, agreeToTerms && styles.buttonTextSelected]}>Yes</Text>\n                  </TouchableOpacity>\n                  <TouchableOpacity \n                    style={[styles.button, !agreeToTerms && styles.buttonSelected]}\n                    onPress={() => setAgreeToTerms(false)}\n                  >\n                    <Text style={[styles.buttonText, !agreeToTerms && styles.buttonTextSelected]}>No</Text>\n                  </TouchableOpacity>\n                </View>\n\n                <TouchableOpacity \n                  style={[styles.submitButton, (isSubmitting || !agreeToTerms) && styles.disabledButton]}\n                  onPress={handleSubmit}\n                  disabled={isSubmitting || !agreeToTerms}\n                >\n                  <Text style={styles.submitButtonText}>\n                    {isSubmitting ? 'Submitting...' : 'Join Waitlist'}\n                  </Text>\n                </TouchableOpacity>\n              </View>\n            </View>\n          </View>\n        </CrossPlatformContent>\n      </ScrollView>\n      <ValidationModal\n        visible={validationModal.visible}\n        message={validationModal.message}\n        onClose={() => setValidationModal({ visible: false, message: '' })}\n      />\n    </CrossPlatformView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  scrollView: {\n    flex: 1,\n    width: '100%',\n  },\n  scrollViewContent: {\n    flexGrow: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: '100%',\n  },\n  container: {\n    width: '100%',\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingVertical: 20,\n  },\n  contentWrapper: {\n    padding: 20,\n    backgroundColor: 'white',\n    borderRadius: 10,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 3,\n    width: '100%',\n  },\n  title: {\n    fontSize: theme.fontSizes.largeLarge,\n    fontWeight: 'bold',\n    marginBottom: 10,\n    color: theme.colors.primary,\n    fontFamily: theme.fonts.header.fontFamily,\n    textAlign: 'center',\n  },\n  description: {\n    fontSize: theme.fontSizes.medium,\n    marginBottom: 20,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    textAlign: 'center',\n    lineHeight: 24,\n  },\n  formSection: {\n    width: '100%',\n  },\n  nameContainer: {\n    flexDirection: 'row',\n    gap: 10,\n    marginBottom: 15,\n  },\n  nameField: {\n    flex: 1,\n  },\n  label: {\n    fontSize: theme.fontSizes.medium,\n    marginBottom: 5,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '500',\n  },\n  input: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 5,\n    borderColor: theme.colors.border,\n    borderWidth: 1,\n    padding: 15,\n    marginBottom: 15,\n    fontSize: theme.fontSizes.medium,\n    width: '100%',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  textArea: {\n    height: 100,\n    textAlignVertical: 'top',\n  },\n  checkboxGroup: {\n    marginBottom: 15,\n  },\n  checkboxContainer: {\n    flexDirection: 'row',\n    alignItems: 'flex-start',\n    marginBottom: 10,\n    paddingRight: 10,\n  },\n  checkboxIcon: {\n    marginRight: 10,\n  },\n  checkboxLabel: {\n    flex: 1,\n    fontSize: theme.fontSizes.medium,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  radioGroup: {\n    marginBottom: 15,\n  },\n  radioContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 10,\n  },\n  radio: {\n    width: 20,\n    height: 20,\n    borderRadius: 10,\n    borderWidth: 2,\n    borderColor: theme.colors.primary,\n    marginRight: 10,\n  },\n  radioSelected: {\n    backgroundColor: theme.colors.primary,\n  },\n  radioLabel: {\n    fontSize: theme.fontSizes.medium,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  submitButton: {\n    backgroundColor: theme.colors.primary,\n    padding: 15,\n    borderRadius: 5,\n    alignItems: 'center',\n    width: '100%',\n    marginTop: 20,\n  },\n  submitButtonText: {\n    color: theme.colors.whiteText,\n    fontSize: theme.fontSizes.mediumLarge,\n    fontWeight: 'bold',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  disabledButton: {\n    opacity: 0.7,\n  },\n  successMessage: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    textAlign: 'center',\n    marginBottom: 15,\n    lineHeight: 24,\n  },\n  otherInputContainer: {\n    paddingLeft: 34,\n    width: '100%',\n  },\n  otherInput: {\n    marginTop: 5,\n    marginBottom: 10,\n    width: '90%',\n  },\n  addressSection: {\n    marginBottom: 20,\n  },\n  cityStateContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    gap: 10,\n  },\n  cityInput: {\n    flex: 2,\n    marginBottom: 0,\n  },\n  stateInput: {\n    flex: 1,\n    marginBottom: 0,\n  },\n  zipInput: {\n    flex: 1,\n    marginBottom: 0,\n  },\n  addressNote: {\n    fontSize: theme.fontSizes.small,\n    color: theme.colors.text,\n    marginBottom: 10,\n    // fontStyle: 'italic',\n    paddingHorizontal: 5,\n  },\n  optional: {\n    color: theme.colors.secondary,\n    fontSize: theme.fontSizes.small,\n    fontStyle: 'italic',\n  },\n  referralSection: {\n    backgroundColor: theme.colors.surface,\n    padding: 20,\n    borderRadius: 10,\n    marginVertical: 20,\n    borderWidth: 1,\n    borderColor: theme.colors.border,\n  },\n  buttonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'flex-start',\n    gap: 10,\n    marginBottom: 20,\n  },\n  button: {\n    paddingVertical: 8,\n    paddingHorizontal: 24,\n    borderRadius: 5,\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n    backgroundColor: 'white',\n    minWidth: 80,\n    alignItems: 'center',\n  },\n  buttonSelected: {\n    backgroundColor: theme.colors.primary,\n  },\n  buttonText: {\n    color: theme.colors.primary,\n    fontSize: theme.fontSizes.medium,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '500',\n  },\n  buttonTextSelected: {\n    color: 'white',\n  },\n  requiredFieldNote: {\n    fontSize: theme.fontSizes.small,\n    color: theme.colors.text,\n    marginBottom: 20,\n    fontStyle: 'italic',\n  },\n  requiredAsterisk: {\n    color: '#FF0000',\n    fontSize: theme.fontSizes.medium,\n  },\n  linkContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: theme.colors.surface,\n    padding: 10,\n    borderRadius: 5,\n    marginVertical: 10,\n  },\n  link: {\n    color: theme.colors.primary,\n    fontSize: theme.fontSizes.medium,\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginRight: 10,\n  },\n  copyButton: {\n    padding: 5,\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    padding: 20,\n    width: '90%',\n    maxWidth: 400,\n    alignItems: 'center',\n  },\n  modalText: {\n    fontSize: theme.fontSizes.medium,\n    marginBottom: 20,\n    textAlign: 'center',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  modalButton: {\n    backgroundColor: theme.colors.primary,\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n    minWidth: 100,\n    alignItems: 'center',\n  },\n  modalButtonText: {\n    color: theme.colors.surface,\n    fontSize: theme.fontSizes.medium,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  inputError: {\n    borderColor: '#FF0000',\n    borderWidth: 1,\n  },\n  errorText: {\n    color: '#FF0000',\n    fontSize: theme.fontSizes.small,\n    marginTop: -10,\n    marginBottom: 15,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  dropdownContainer: {\n    marginBottom: 15,\n    zIndex: 1000,\n  },\n  dropdownButton: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    backgroundColor: theme.colors.surface,\n    borderRadius: 5,\n    borderColor: theme.colors.border,\n    borderWidth: 1,\n    padding: 15,\n  },\n  dropdownButtonText: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  dropdownList: {\n    position: 'absolute',\n    top: '100%',\n    left: 0,\n    right: 0,\n    backgroundColor: 'white',\n    borderRadius: 5,\n    borderColor: theme.colors.border,\n    borderWidth: 1,\n    marginTop: 5,\n    maxHeight: 300,\n    zIndex: 1000,\n  },\n  searchInput: {\n    padding: 10,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n    fontSize: theme.fontSizes.medium,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  cityList: {\n    maxHeight: 250,\n  },\n  cityItem: {\n    padding: 15,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  cityItemText: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  requiredField: {\n    borderColor: '#FF0000',\n    borderWidth: 1,\n  },\n  otherCityItem: {\n    borderTopWidth: 1,\n    borderTopColor: theme.colors.border,\n    backgroundColor: theme.colors.surface,\n  },\n  otherCityText: {\n    color: theme.colors.primary,\n    fontWeight: '500',\n  },\n});\n\nexport default Waitlist; ","import React from 'react';\nimport { View, Text, StyleSheet, Button, TouchableOpacity } from 'react-native';\nimport { useToast } from '../components/ToastProvider';\nimport { theme } from '../styles/theme';\nimport { acceptInvitation, verifyInvitation } from '../api/API';\nimport { API_BASE_URL } from '../config/config';\nimport axios from 'axios';\nimport { debugLog } from '../context/AuthContext';\n\nconst TestToast = () => {\n  const showToast = useToast();\n\n  const showSuccessToast = () => {\n    showToast({\n      message: 'Success! Operation completed successfully.',\n      type: 'success',\n      duration: 3000\n    });\n  };\n\n  const showErrorToast = () => {\n    showToast({\n      message: 'Error! Something went wrong.',\n      type: 'error',\n      duration: 3000\n    });\n  };\n\n  const showInfoToast = () => {\n    showToast({\n      message: 'Info: This is an informational message.',\n      type: 'info',\n      duration: 3000\n    });\n  };\n\n  const showWarningToast = () => {\n    showToast({\n      message: 'Warning: This action may have consequences.',\n      type: 'warning',\n      duration: 3000\n    });\n  };\n\n  const showLongToast = () => {\n    showToast({\n      message: 'This is a longer toast message that will stay visible for 5 seconds to demonstrate how longer messages look.',\n      type: 'info',\n      duration: 5000\n    });\n  };\n\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Toast Notification Test</Text>\n      \n      <View style={styles.buttonContainer}>\n        <Button \n          title=\"Show Success Toast\" \n          onPress={showSuccessToast}\n          color={theme.colors.primary}\n        />\n      </View>\n      \n      <View style={styles.buttonContainer}>\n        <Button \n          title=\"Show Error Toast\" \n          onPress={showErrorToast}\n          color={theme.colors.error}\n        />\n      </View>\n      \n      <View style={styles.buttonContainer}>\n        <Button \n          title=\"Show Info Toast\" \n          onPress={showInfoToast}\n          color={theme.colors.info || '#29B6F6'}\n        />\n      </View>\n      \n      <View style={styles.buttonContainer}>\n        <Button \n          title=\"Show Warning Toast\" \n          onPress={showWarningToast}\n          color={theme.colors.warning || '#FFA726'}\n        />\n      </View>\n      \n      <View style={styles.buttonContainer}>\n        <Button \n          title=\"Show Long Toast\" \n          onPress={showLongToast}\n          color=\"#9C27B0\"\n        />\n      </View>\n\n      {/* Invitation debugging section */}\n      <View style={{ marginTop: 20, padding: 10, borderWidth: 1, borderColor: '#ccc', borderRadius: 8 }}>\n        <Text style={{ fontSize: 18, fontWeight: 'bold', marginBottom: 10 }}>Invitation API Debug</Text>\n        \n        <TouchableOpacity \n          style={{ \n            backgroundColor: '#3498db', \n            padding: 10, \n            borderRadius: 5, \n            alignItems: 'center',\n            marginBottom: 10\n          }}\n          onPress={async () => {\n            try {\n              // Get token from input or use a test token\n              const token = '29a05c7f-bde2-4e57-8a86-8f6e8062812a'; // Replace with a valid token\n              debugLog('MBAnb23ou4bf954 TEST: Verifying invitation token:', token);\n              \n              // First verify the invitation\n              const verifyResult = await verifyInvitation(token);\n              debugLog('MBAnb23ou4bf954 TEST: Verification result:', verifyResult);\n              \n              if (verifyResult.valid) {\n                // Try to accept the invitation using the simplified approach\n                debugLog('MBAnb23ou4bf954 TEST: Trying to accept invitation with authenticated request');\n                try {\n                  const acceptResult = await acceptInvitation(token);\n                  debugLog('MBAnb23ou4bf954 TEST: Accept result:', acceptResult);\n                  \n                  showToast({\n                    message: 'Invitation accepted successfully!',\n                    type: 'success',\n                    duration: 3000\n                  });\n                } catch (acceptError) {\n                  debugLog('MBAnb23ou4bf954 TEST: Accept error:', acceptError.message);\n                  if (acceptError.response) {\n                    debugLog('MBAnb23ou4bf954 TEST: Accept error details:', acceptError.response.data);\n                  }\n                  \n                  showToast({\n                    message: `Error: ${acceptError.message}`,\n                    type: 'error',\n                    duration: 3000\n                  });\n                }\n              } else {\n                debugLog('MBAnb23ou4bf954 TEST: Invitation is not valid:', verifyResult.error);\n                \n                showToast({\n                  message: `Invalid invitation: ${verifyResult.error || 'Unknown error'}`,\n                  type: 'error',\n                  duration: 3000\n                });\n              }\n            } catch (error) {\n              debugLog('MBAnb23ou4bf954 TEST: Overall error:', error.message);\n              \n              showToast({\n                message: `Error: ${error.message}`,\n                type: 'error',\n                duration: 3000\n              });\n            }\n          }}\n        >\n          <Text style={{ color: 'white' }}>Test Invitation API</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n    backgroundColor: theme.colors.background,\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: 'bold',\n    marginBottom: 30,\n    color: theme.colors.text,\n    fontFamily: theme.fonts?.medium?.fontFamily || undefined,\n  },\n  buttonContainer: {\n    width: '100%',\n    marginVertical: 10,\n    maxWidth: 300,\n  }\n});\n\nexport default TestToast; ","import React, { useContext, useState } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Image, Animated, Platform, ScrollView } from 'react-native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { AuthContext, debugLog } from '../context/AuthContext';\nimport { supportsHover } from '../utils/deviceUtils';\n\nconst ConnectionCard = ({ connection, type, onViewProfile, onCreateBooking }) => {\n  // Determine if this is a client or professional connection\n  const isClient = type === 'clients';\n  const { screenWidth } = useContext(AuthContext);\n  const isMobile = screenWidth < 900;\n  const isWideScreen = screenWidth >= 1200;\n  const isExtraWideScreen = screenWidth >= 2500;\n  \n  // State for button hover effects\n  const [isViewMessagesHovered, setIsViewMessagesHovered] = useState(false);\n  const [isCreateBookingHovered, setIsCreateBookingHovered] = useState(false);\n  \n  // Check if device supports hover\n  const deviceSupportsHover = supportsHover();\n  \n  // Determine booking status tag\n  const getBookingStatusTag = () => {\n    if (connection.active_bookings_count > 0) {\n      return {\n        icon: \"calendar-check\",\n        iconColor: \"#4CAF50\",\n        text: \"Active Bookings\",\n        containerStyle: styles.activeBookingsContainer,\n        textStyle: styles.activeBookingsText\n      };\n    } else if (connection.has_past_booking === 1) {\n      return {\n        icon: \"history\",\n        iconColor: \"#9C27B0\",\n        text: \"Past Bookings\",\n        containerStyle: styles.pastBookingsContainer,\n        textStyle: styles.pastBookingsText\n      };\n    } else {\n      return {\n        icon: \"calendar-remove\",\n        iconColor: \"#898974\",\n        text: \"No Bookings Yet\",\n        containerStyle: styles.noBookingsContainer,\n        textStyle: styles.noBookingsText\n      };\n    }\n  };\n  \n  const bookingStatus = getBookingStatusTag();\n  \n  debugLog('MBA9452: Rendering ConnectionCard:', {\n    connectionId: connection.id,\n    connectionName: connection.name,\n    connectionType: type,\n    conversationId: connection.conversation_id,\n    hasActivePastBooking: connection.has_past_booking,\n    activeBookingsCount: connection.active_bookings_count,\n    isMobile,\n    isWideScreen,\n    isExtraWideScreen,\n    screenWidth\n  });\n  \n  return (\n    <View style={styles.card}>\n      <View style={styles.contentContainer}>\n        <View style={styles.topRow}>\n          <View style={[\n            styles.profileInfo,\n            !isExtraWideScreen && styles.profileInfoWrap\n          ]}>\n            <Image \n              source={connection.avatar ? { uri: connection.avatar } : require('../../assets/default-profile.png')} \n              style={styles.avatar} \n            />\n            \n            <View style={[\n              styles.nameContainer,\n              isWideScreen && styles.nameContainerWide\n            ]}>\n              <Text style={styles.name}>{connection.name}</Text>\n              \n              {isClient ? (\n                <View style={styles.petsContainer}>\n                  <Text style={styles.petsLabel}>Pets: </Text>\n                  <Text style={[\n                    styles.petsText,\n                    isWideScreen && styles.petsTextWide\n                  ]}>\n                    {connection.pets?.length > 0 \n                      ? connection.pets.map(pet => `${pet.name} (${pet.species})`).join(', ') \n                      : 'No pets added yet'}\n                  </Text>\n                </View>\n              ) : (\n                <View style={styles.servicesContainer}>\n                  <Text style={styles.servicesLabel}>Services: </Text>\n                  <Text style={[\n                    styles.servicesText,\n                    isWideScreen && styles.servicesTextWide\n                  ]}>\n                    {connection.services?.join(', ') || 'No services'}\n                  </Text>\n                </View>\n              )}\n              \n              <View style={bookingStatus.containerStyle}>\n                <MaterialCommunityIcons name={bookingStatus.icon} size={14} color={bookingStatus.iconColor} />\n                <Text style={bookingStatus.textStyle}>\n                  {bookingStatus.text}\n                </Text>\n              </View>\n            </View>\n          </View>\n          \n          {!isMobile && (\n            <View style={[\n              styles.buttonSection,\n              !isExtraWideScreen && styles.buttonSectionWrap\n            ]}>\n              <TouchableOpacity \n                style={[\n                  styles.viewProfileButton,\n                  isViewMessagesHovered && styles.buttonHovered\n                ]}\n                onPress={() => {\n                  debugLog('MBA4321 View Messages button clicked', {\n                    connectionName: connection.name,\n                    conversationId: connection.conversation_id\n                  });\n                  onViewProfile(connection);\n                }}\n                onMouseEnter={() => deviceSupportsHover && setIsViewMessagesHovered(true)}\n                onMouseLeave={() => deviceSupportsHover && setIsViewMessagesHovered(false)}\n              >\n                <Text style={styles.viewProfileText}>View Messages</Text>\n              </TouchableOpacity>\n              \n              {isClient && (\n                <TouchableOpacity \n                  style={[\n                    styles.createBookingButton,\n                    isCreateBookingHovered && styles.buttonHovered\n                  ]}\n                  onPress={() => {\n                    debugLog('MBA4321 Create Booking button clicked', {\n                      connectionName: connection.name,\n                      conversationId: connection.conversation_id\n                    });\n                    onCreateBooking(connection);\n                  }}\n                  onMouseEnter={() => deviceSupportsHover && setIsCreateBookingHovered(true)}\n                  onMouseLeave={() => deviceSupportsHover && setIsCreateBookingHovered(false)}\n                >\n                  <Text style={styles.createBookingText}>Create Booking</Text>\n                </TouchableOpacity>\n              )}\n            </View>\n          )}\n        </View>\n\n        {connection.last_booking && (\n          <View style={styles.statusSection}>\n            <View style={styles.lastBookingContainer}>\n              <MaterialCommunityIcons name=\"calendar-clock\" size={16} color={theme.colors.text} />\n              <Text style={styles.lastBookingText}>\n                Last booking: {connection.last_booking}\n              </Text>\n            </View>\n      \n            {connection.upcoming_booking && (\n              <View style={styles.upcomingContainer}>\n                <MaterialCommunityIcons name=\"calendar-check\" size={16} color={theme.colors.primary} />\n                <Text style={styles.upcomingText}>\n                  Upcoming Booking\n                </Text>\n              </View>\n            )}\n          </View>\n        )}\n\n        {isMobile && (\n          <ScrollView \n            horizontal\n            showsHorizontalScrollIndicator={false}\n            contentContainerStyle={styles.mobileBtnSection}\n          >\n            <TouchableOpacity \n              style={[\n                styles.viewProfileButton,\n                isViewMessagesHovered && styles.buttonHovered\n              ]}\n              onPress={() => {\n                debugLog('MBA4321 View Messages button clicked (mobile)', {\n                  connectionName: connection.name,\n                  conversationId: connection.conversation_id\n                });\n                onViewProfile(connection);\n              }}\n              onMouseEnter={() => deviceSupportsHover && setIsViewMessagesHovered(true)}\n              onMouseLeave={() => deviceSupportsHover && setIsViewMessagesHovered(false)}\n            >\n              <Text style={styles.viewProfileText}>View Messages</Text>\n            </TouchableOpacity>\n            \n            {isClient && (\n              <TouchableOpacity \n                style={[\n                  styles.createBookingButton,\n                  isCreateBookingHovered && styles.buttonHovered\n                ]}\n                onPress={() => {\n                  debugLog('MBA4321 Create Booking button clicked (mobile)', {\n                    connectionName: connection.name,\n                    conversationId: connection.conversation_id\n                  });\n                  onCreateBooking(connection);\n                }}\n                onMouseEnter={() => deviceSupportsHover && setIsCreateBookingHovered(true)}\n                onMouseLeave={() => deviceSupportsHover && setIsCreateBookingHovered(false)}\n              >\n                <Text style={styles.createBookingText}>Create Booking In Messages</Text>\n              </TouchableOpacity>\n            )}\n          </ScrollView>\n        )}\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  card: {\n    backgroundColor: theme.colors.surfaceContrast,\n    borderRadius: 8,\n    // marginBottom: 16,\n    padding: 16,\n    elevation: 2,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    width: '100%',\n  },\n  contentContainer: {\n    width: '100%',\n  },\n  topRow: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'flex-start',\n    width: '100%',\n    flexWrap: 'wrap',\n  },\n  profileInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n    minWidth: 0,\n  },\n  profileInfoWrap: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n    minWidth: '70%',\n  },\n  avatar: {\n    width: 60,\n    height: 60,\n    borderRadius: 30,\n    marginRight: 16,\n    flexShrink: 0,\n  },\n  nameContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    minWidth: 0,\n    marginRight: 16,\n  },\n  nameContainerWide: {\n    maxWidth: '60%',\n  },\n  name: {\n    fontSize: 18,\n    fontWeight: '600',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n    marginBottom: 8,\n  },\n  petsContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  petsLabel: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    flexShrink: 0,\n  },\n  petsText: {\n    fontSize: 14,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    flex: 1,\n    minWidth: 0,\n  },\n  petsTextWide: {\n    maxWidth: '80%',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n  },\n  servicesContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    alignItems: 'center',\n    marginBottom: 8,\n  },\n  servicesLabel: {\n    fontSize: 14,\n    fontWeight: '600',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    flexShrink: 0,\n  },\n  servicesText: {\n    fontSize: 14,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    flex: 1,\n    minWidth: 0,\n  },\n  servicesTextWide: {\n    maxWidth: '80%',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n  },\n  statusSection: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingVertical: 8,\n    marginTop: 8,\n  },\n  lastBookingContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  lastBookingText: {\n    marginLeft: 6,\n    fontSize: 14,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  noBookingsContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#F2F2F0',\n    borderRadius: 4,\n    padding: 4,\n    marginTop: 8,\n    alignSelf: 'flex-start',\n  },\n  noBookingsText: {\n    fontSize: 12,\n    color: '#898974',\n    fontFamily: theme.fonts.regular.fontFamily,\n    marginLeft: 6,\n  },\n  pastBookingsContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#F9F2FC',\n    borderRadius: 4,\n    padding: 4,\n    marginTop: 8,\n    alignSelf: 'flex-start',\n  },\n  pastBookingsText: {\n    marginLeft: 6,\n    fontSize: 12,\n    color: '#9C27B0',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  upcomingContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#F0F9E5',\n    padding: 6,\n    borderRadius: 16,\n  },\n  upcomingText: {\n    marginLeft: 6,\n    fontSize: 14,\n    color: theme.colors.primary,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '500',\n  },\n  buttonSection: {\n    flexDirection: 'row',\n    gap: 12,\n    alignItems: 'center',\n    justifyContent: 'flex-end',\n    flexShrink: 0,\n  },\n  buttonSectionWrap: {\n    marginTop: 12,\n    marginLeft: 'auto',\n  },\n  mobileBtnSection: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    gap: 12,\n    marginTop: 12,\n  },\n  viewProfileButton: {\n    paddingVertical: 8,\n    paddingHorizontal: 16,\n    backgroundColor: '#F0F9E5',\n    borderRadius: 6,\n    alignItems: 'center',\n    justifyContent: 'center',\n    transition: 'transform 0.2s ease, box-shadow 0.2s ease',\n  },\n  viewProfileText: {\n    color: theme.colors.primary,\n    fontSize: 14,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  createBookingButton: {\n    paddingVertical: 8,\n    paddingHorizontal: 16,\n    backgroundColor: theme.colors.primary,\n    borderRadius: 6,\n    alignItems: 'center',\n    justifyContent: 'center',\n    transition: 'transform 0.2s ease, box-shadow 0.2s ease',\n  },\n  createBookingText: {\n    color: theme.colors.surfaceContrast,\n    fontSize: 14,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  buttonHovered: {\n    transform: [{translateY: -3}],\n    boxShadow: '0px 6px 10px rgba(0, 0, 0, 0.15)',\n  },\n  activeBookingsContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#F0F9E5',\n    borderRadius: 4,\n    padding: 4,\n    marginTop: 8,\n    alignSelf: 'flex-start',\n  },\n  activeBookingsText: {\n    marginLeft: 6,\n    fontSize: 12,\n    color: '#4CAF50',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n});\n\nexport default ConnectionCard; ","import React, { useState, useEffect, useContext, useRef } from 'react';\nimport { View, Text, StyleSheet, TextInput, FlatList, TouchableOpacity, Platform, ActivityIndicator, Dimensions, ScrollView, Modal } from 'react-native';\nimport { useNavigation } from '@react-navigation/native';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport ConnectionCard from '../components/ConnectionCard';\nimport { AuthContext, debugLog } from '../context/AuthContext';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { navigateToFrom } from '../components/Navigation';\nimport { getUserConnections, inviteClient } from '../api/API';\nimport { supportsHover } from '../utils/deviceUtils';\nimport { sanitizeInput, validateEmail } from '../validation/validation';\n\nconst Connections = () => {\n  const navigation = useNavigation();\n  const { isApprovedProfessional, userRole, isCollapsed, screenWidth } = useContext(AuthContext);\n  const [isMobile, setIsMobile] = useState(screenWidth < 900);\n  const [isWideScreen, setIsWideScreen] = useState(screenWidth >= 1500);\n  const [activeTab, setActiveTab] = useState('clients');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [connections, setConnections] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n  const [isLoadingMore, setIsLoadingMore] = useState(false);\n  const [activeFilter, setActiveFilter] = useState('all');\n  const [hoveredFilter, setHoveredFilter] = useState(null);\n  const [showInviteModal, setShowInviteModal] = useState(false);\n  const [inviteEmail, setInviteEmail] = useState('');\n  const [isInviting, setIsInviting] = useState(false);\n  const [searchFocused, setSearchFocused] = useState(false);\n  const searchInputRef = useRef(null);\n  const [allConnections, setAllConnections] = useState([]);\n  const [invitationType, setInvitationType] = useState('email');\n  const [generatedLink, setGeneratedLink] = useState('');\n  const [inviteError, setInviteError] = useState('');\n  const [inviteSuccess, setInviteSuccess] = useState('');\n  const [isInviteButtonHovered, setIsInviteButtonHovered] = useState(false);\n  const [isCreateServiceButtonHovered, setIsCreateServiceButtonHovered] = useState(false);\n  const [emailValidationError, setEmailValidationError] = useState('');\n\n  // Check if device supports hover\n  const deviceSupportsHover = supportsHover();\n\n  // Update layout based on screen size\n  useEffect(() => {\n    const updateLayout = () => {\n      setIsMobile(Dimensions.get('window').width < 900);\n      setIsWideScreen(Dimensions.get('window').width >= 1200);\n    };\n\n    const subscription = Dimensions.addEventListener('change', updateLayout);\n    return () => {\n      subscription?.remove();\n    };\n  }, []);\n\n  // Set the initial tab based on role\n  useEffect(() => {\n    if (userRole === 'professional') {\n      setActiveTab('clients');\n    } else {\n      setActiveTab('professionals');\n    }\n  }, [userRole]);\n\n  // Handle navigation based on the user role\n  useEffect(() => {\n    const handleRoleNavigation = async () => {\n      debugLog('MBA4321 Checking user role for navigation', { userRole });\n      if (userRole === 'petOwner') {\n        // Store Dashboard as the current route before navigating\n        if (Platform.OS === 'web') {\n          sessionStorage.setItem('previousRoute', '');\n          sessionStorage.setItem('currentRoute', 'Dashboard');\n        } else {\n          await AsyncStorage.setItem('previousRoute', '');\n          await AsyncStorage.setItem('currentRoute', 'Dashboard');\n        }\n        debugLog('MBA4321 User is pet owner, navigating to Dashboard');\n        navigation.navigate('Dashboard');\n      }\n    };\n\n    handleRoleNavigation();\n  }, [userRole, navigation]);\n\n  const fetchConnections = async (pageNum = 1, isLoadMore = false) => {\n    setLoading(!isLoadMore);\n    isLoadMore && setIsLoadingMore(true);\n    \n    debugLog('MBA4321 Fetching connections:', {\n      page: pageNum,\n      isLoadMore\n    });\n\n    try {\n      const response = await getUserConnections(pageNum);\n      \n      debugLog('MBA4321 Response from API:', response);\n\n      const connectionsList = response.connections || [];\n      \n      if (isLoadMore) {\n        const newConnections = [...connections, ...connectionsList];\n        setConnections(newConnections);\n        setAllConnections(newConnections);\n      } else {\n        setConnections(connectionsList);\n        setAllConnections(connectionsList);\n      }\n\n      setHasMore(connectionsList.length === 20);\n      setPage(pageNum);\n    } catch (error) {\n      debugLog('MBA4321 Error fetching connections:', error);\n      setError('Failed to fetch connections');\n    } finally {\n      setLoading(false);\n      setIsLoadingMore(false);\n    }\n  };\n\n  // Update useEffect to only fetch once and not refetch when filter changes\n  useEffect(() => {\n    debugLog('MBA4321 Fetching connections due to dependency change:', {\n      activeTab,\n      userRole\n    });\n    setPage(1);\n    setConnections([]);\n    fetchConnections(1);\n  }, [activeTab, userRole]);\n\n  // Add new useEffect to filter connections locally when filter changes\n  useEffect(() => {\n    debugLog('MBA4321 Filtering connections locally based on:', {\n      activeFilter\n    });\n    if (allConnections.length > 0) {\n      filterConnectionsLocally();\n    }\n  }, [activeFilter, allConnections]);\n\n  // Add function to filter connections locally\n  const filterConnectionsLocally = () => {\n    if (!allConnections.length) return;\n    \n    debugLog('MBA9452: Filtering connections locally with filter:', activeFilter);\n    \n    if (activeFilter === 'all') {\n      setConnections(allConnections);\n      return;\n    }\n    \n    // Filter based on activeFilter\n    let filtered = [];\n    \n    switch (activeFilter) {\n      case 'active_bookings':\n        filtered = allConnections.filter(connection => \n          connection.active_bookings_count > 0\n        );\n        break;\n      case 'no_bookings':\n        filtered = allConnections.filter(connection => \n          connection.active_bookings_count === 0 && connection.has_past_booking === 0\n        );\n        break;\n      case 'past_bookings':\n        filtered = allConnections.filter(connection => \n          connection.active_bookings_count === 0 && connection.has_past_booking === 1\n        );\n        break;\n      default:\n        filtered = allConnections;\n    }\n    \n    setConnections(filtered);\n  };\n\n  // Handle search\n  const handleSearch = (query) => {\n    setSearchQuery(query);\n    \n    // If query is empty, reapply the current filter\n    if (!query.trim()) {\n      debugLog('MBA9452: Empty search query, reapplying current filter');\n      filterConnectionsLocally();\n      return;\n    }\n\n    debugLog('MBA9452: Searching connections with query:', query);\n    \n    // Get the base set of connections to search from (already filtered by activeFilter)\n    let baseConnections = [];\n    if (activeFilter === 'all') {\n      baseConnections = allConnections;\n    } else {\n      // Re-apply the active filter to get the current filtered set\n      switch (activeFilter) {\n        case 'active_bookings':\n          baseConnections = allConnections.filter(connection => \n            connection.active_bookings_count > 0\n          );\n          break;\n        case 'no_bookings':\n          baseConnections = allConnections.filter(connection => \n            connection.active_bookings_count === 0 && connection.has_past_booking === 0\n          );\n          break;\n        case 'past_bookings':\n          baseConnections = allConnections.filter(connection => \n            connection.active_bookings_count === 0 && connection.has_past_booking === 1\n          );\n          break;\n        default:\n          baseConnections = allConnections;\n      }\n    }\n    \n    // Filter the already filtered list based on search query\n    const searchLower = query.toLowerCase();\n    const filtered = baseConnections.filter(connection => \n      connection.name.toLowerCase().includes(searchLower) || \n      (activeTab === 'clients' && connection.pets?.some(pet => \n        pet.name?.toLowerCase().includes(searchLower) || \n        pet.species?.toLowerCase().includes(searchLower)\n      ))\n    );\n\n    setConnections(filtered);\n  };\n\n  const handleLoadMore = () => {\n    if (!isLoadingMore && hasMore) {\n      fetchConnections(page + 1, true);\n    }\n  };\n\n  const handleViewMessages = async (connection) => {\n    debugLog('MBA4321 Navigating to messages with connection:', {\n      connectionId: connection.id,\n      connectionName: connection.name,\n      conversationId: connection.conversation_id\n    });\n    \n    // Navigate to MessageHistory screen with conversation ID\n    await navigateToFrom(navigation, 'MessageHistory', 'Connections', {\n      conversationId: connection.conversation_id,\n      otherUserName: connection.name\n      // No isProfessional flag here as we don't want to trigger booking creation\n    });\n  };\n\n  const handleCreateBooking = async (connection) => {\n    debugLog('MBA4321 Creating booking with client:', {\n      clientId: connection.id,\n      clientName: connection.name,\n      conversationId: connection.conversation_id\n    });\n    \n    // Navigate directly to the MessageHistory screen with the conversation ID\n    await navigateToFrom(navigation, 'MessageHistory', 'Connections', {\n      conversationId: connection.conversation_id,\n      otherUserName: connection.name,\n      clientId: connection.client_id, // Include client_id for potential future use\n      isProfessional: true // Since this is called from the professional's perspective\n    });\n  };\n\n  const validateInviteEmail = (email) => {\n    debugLog('MBA1234', 'Validating invite email:', email);\n    \n    if (!email || email.trim() === '') {\n      setEmailValidationError('');\n      return { isValid: true, sanitized: '' }; // Allow empty email initially\n    }\n    \n    // Sanitize the email\n    const sanitized = sanitizeInput(email, 'email', { maxLength: 254 });\n    \n    // Check for malicious content\n    const originalLength = email.length;\n    const sanitizedLength = sanitized.length;\n    const removalPercentage = originalLength > 0 ? ((originalLength - sanitizedLength) / originalLength) * 100 : 0;\n    \n    if (removalPercentage > 30 && originalLength > 5) {\n      debugLog('MBA1234', 'Malicious content detected in invite email:', { originalLength, sanitizedLength, removalPercentage });\n      setEmailValidationError('Invalid characters detected in email');\n      return { isValid: false, sanitized };\n    }\n    \n    // Validate email format\n    const emailValidation = validateEmail(sanitized);\n    if (!emailValidation.isValid) {\n      setEmailValidationError(emailValidation.message);\n      return { isValid: false, sanitized };\n    }\n    \n    setEmailValidationError('');\n    return { isValid: true, sanitized };\n  };\n\n  const handleEmailInputChange = (email) => {\n    const { sanitized } = validateInviteEmail(email);\n    setInviteEmail(sanitized);\n  };\n\n  const handleInviteClient = () => {\n    debugLog('MBA4321 Opening invite client modal');\n    setInviteEmail('');\n    setGeneratedLink('');\n    setInviteError('');\n    setInviteSuccess('');\n    setEmailValidationError('');\n    setInvitationType('email');\n    setShowInviteModal(true);\n  };\n  \n  const handleSendInvite = async () => {\n    setInviteError('');\n    setInviteSuccess('');\n    \n    if (invitationType === 'email') {\n      // Validate email before sending\n      const { isValid } = validateInviteEmail(inviteEmail);\n      if (!isValid || emailValidationError) {\n        setInviteError(emailValidationError || 'Please enter a valid email address');\n        debugLog('MBA1234 Invalid email format:', { inviteEmail, emailValidationError });\n        return;\n      }\n      \n      if (!inviteEmail || !inviteEmail.trim()) {\n        setInviteError('Please enter an email address');\n        debugLog('MBA1234 Empty email:', inviteEmail);\n        return;\n      }\n    }\n    \n    setIsInviting(true);\n    debugLog('MBA4321 Creating invitation:', { \n      type: invitationType, \n      email: invitationType === 'email' ? inviteEmail : null \n    });\n    \n    try {\n      const response = await inviteClient(invitationType, invitationType === 'email' ? inviteEmail : null);\n      debugLog('MBA4321 Invitation created successfully:', response);\n      \n      if (invitationType === 'email') {\n        setInviteSuccess(`Invitation sent to ${inviteEmail} - please have your client check spam if they don't see it in their inbox.`);\n        setInviteEmail('');\n      } else {\n        setGeneratedLink(response.invitation_link);\n        setInviteSuccess('Invitation link created successfully!');\n      }\n      \n      // Refresh the connections list only if needed\n      if (activeFilter === 'pending' || activeFilter === 'all') {\n        fetchConnections(1);\n      }\n    } catch (error) {\n      debugLog('MBA4321 Error creating invitation:', error);\n      setInviteError(error.response?.data?.error || 'Failed to send invitation. Please try again.');\n    } finally {\n      setIsInviting(false);\n    }\n  };\n\n  const handleCopyLink = () => {\n    if (generatedLink && Platform.OS === 'web') {\n      navigator.clipboard.writeText(generatedLink);\n      setInviteSuccess('Link copied to clipboard!');\n    }\n  };\n\n  const EmptyStateMessage = ({ type }) => {\n    const messages = {\n      clients: {\n        all: \"You don't have any clients with bookings or that you have invited yet. Invite a client to get started!\",\n        active: \"You don't have any active clients.\",\n        pending: \"You don't have any pending client requests.\",\n        past: \"You don't have any past clients.\"\n      },\n      professionals: {\n        all: \"You're not connected with any professionals yet.\",\n        active: \"You don't have any active professionals.\",\n        pending: \"You don't have any pending professional connections.\",\n        past: \"You don't have any past professional connections.\"\n      }\n    };\n\n    return (\n      <View style={styles.emptyContainer}>\n        <MaterialCommunityIcons \n          name={type === 'clients' ? 'account-group-outline' : 'account-tie-outline'} \n          size={80} \n          color={theme.colors.primary} \n        />\n        <Text style={styles.emptyText}>{messages[type][activeFilter]}</Text>\n        {type === 'clients' && userRole === 'professional' && (\n          <TouchableOpacity \n            style={styles.inviteButton}\n            onPress={handleInviteClient}\n          >\n            <Text style={styles.inviteButtonText}>Invite Client</Text>\n          </TouchableOpacity>\n        )}\n      </View>\n    );\n  };\n\n  const renderFooter = () => {\n    if (isLoadingMore) {\n      debugLog('MBA4321 Loading more connections');\n      return (\n        <View style={styles.footer}>\n          <ActivityIndicator size=\"small\" color={theme.colors.primary} />\n        </View>\n      );\n    }\n    \n    if (!hasMore && connections.length > 0) {\n      debugLog('MBA4321 No more connections to load');\n      return (\n        <View style={styles.footer}>\n          <Text style={styles.footerText}>No more {activeTab} to load</Text>\n          {userRole === 'professional' && activeTab === 'clients' && (\n            <TouchableOpacity \n              style={[\n                styles.createServiceButton,\n                isCreateServiceButtonHovered && styles.buttonHovered\n              ]}\n              onPress={() => {\n                debugLog('MBA4321 Create Service button clicked in footer');\n                navigateToFrom(navigation, 'ServiceManager', 'Connections');\n              }}\n              onMouseEnter={() => deviceSupportsHover && setIsCreateServiceButtonHovered(true)}\n              onMouseLeave={() => deviceSupportsHover && setIsCreateServiceButtonHovered(false)}\n            >\n              <Text style={styles.createServiceButtonText}>Create a Service to Get More Clients</Text>\n            </TouchableOpacity>\n          )}\n        </View>\n      );\n    }\n    \n    return null;\n  };\n\n  const renderItem = ({ item }) => {\n    debugLog('MBA4321 Rendering connection item:', item);\n    return (\n      <View style={[\n        styles.cardWrapper,\n        isMobile && styles.mobileCardWrapper,\n        isWideScreen && styles.wideScreenCardWrapper\n      ]}>\n        <ConnectionCard\n          connection={item}\n          type={activeTab}\n          onViewProfile={() => handleViewMessages(item)}\n          onCreateBooking={activeTab === 'clients' ? () => handleCreateBooking(item) : null}\n        />\n      </View>\n    );\n  };\n\n  return (\n    <View style={[\n      styles.container,\n      { marginLeft: isMobile ? 0 : (isCollapsed ? 70 : 250) }\n    ]}>\n      <View style={[styles.content, { marginTop: isMobile ? 60 : 0 }]}>\n        <View style={styles.mainContent}>\n          <View style={styles.headerSection}>\n            <Text style={styles.title}>Connections</Text>\n            <View style={styles.tabContainer}>\n              {userRole === 'professional' && (\n                <TouchableOpacity\n                  style={[styles.tab, activeTab === 'clients' && styles.activeTab]}\n                  onPress={() => setActiveTab('clients')}\n                >\n                  <Text style={[styles.tabText, activeTab === 'clients' && styles.activeTabText]}>\n                    My Clients\n                  </Text>\n                </TouchableOpacity>\n              )}\n              {/* My Professionals tab commented out until implementation\n              <TouchableOpacity\n                style={[styles.tab, activeTab === 'professionals' && styles.activeTab]}\n                onPress={() => setActiveTab('professionals')}\n              >\n                <Text style={[styles.tabText, activeTab === 'professionals' && styles.activeTabText]}>\n                  My Professionals\n                </Text>\n              </TouchableOpacity>\n              */}\n            </View>\n          </View>\n          <View style={styles.connectionsContent}>\n            {loading ? (\n              <View style={styles.loadingContainer}>\n                <ActivityIndicator size=\"large\" color={theme.colors.primary} />\n              </View>\n            ) : (\n              <View style={styles.connectionsContent}>\n                <View style={styles.stickyHeader}>\n                  <View style={[styles.stickyHeaderContent, { \n                    flexDirection: isWideScreen ? 'row' : 'column'\n                  }]}>\n                    <View style={[\n                      styles.searchAndInviteContainer,\n                      isWideScreen ? { flex: 0.4, marginRight: 'auto', flexDirection: 'row', alignItems: 'center' } : { flexDirection: 'row', alignItems: 'center' }\n                    ]}>\n                      <View style={[\n                        styles.searchContainer,\n                        searchFocused && styles.searchContainerFocused\n                      ]}>\n                        <MaterialCommunityIcons \n                          name=\"magnify\" \n                          size={24} \n                          color={searchFocused ? theme.colors.primary : \"#666\"} \n                        />\n                        <TextInput\n                          ref={searchInputRef}\n                          style={styles.searchInput}\n                          placeholder={activeTab === 'clients' \n                            ? \"Search by client name or pet\" \n                            : \"Search by professional name or service\"\n                          }\n                          value={searchQuery}\n                          onChangeText={handleSearch}\n                          onFocus={() => setSearchFocused(true)}\n                          onBlur={() => setSearchFocused(false)}\n                        />\n                        {searchQuery ? (\n                          <TouchableOpacity \n                            onPress={() => {\n                              setSearchQuery('');\n                              filterConnectionsLocally();\n                            }}\n                          >\n                            <MaterialCommunityIcons name=\"close-circle\" size={20} color=\"#777\" />\n                          </TouchableOpacity>\n                        ) : null}\n                      </View>\n                      \n                      {activeTab === 'clients' && userRole === 'professional' && (\n                        <TouchableOpacity \n                          style={[\n                            styles.inviteButtonSmall,\n                            isInviteButtonHovered && styles.buttonHovered\n                          ]}\n                          onPress={handleInviteClient}\n                          onMouseEnter={() => deviceSupportsHover && setIsInviteButtonHovered(true)}\n                          onMouseLeave={() => deviceSupportsHover && setIsInviteButtonHovered(false)}\n                        >\n                          <MaterialCommunityIcons name=\"account-plus\" size={16} color={theme.colors.surface} />\n                          <Text style={styles.inviteButtonSmallText}>Invite</Text>\n                        </TouchableOpacity>\n                      )}\n                    </View>\n\n                    <View style={[\n                      styles.filtersWrapper,\n                      isWideScreen ? { flex: 0.6, alignItems: 'flex-end' } : null\n                    ]}>\n                      <ScrollView \n                        horizontal \n                        showsHorizontalScrollIndicator={false}\n                        contentContainerStyle={styles.filterScrollContent}\n                      >\n                        <View style={styles.filterContainer}>\n                          <TouchableOpacity \n                            style={[\n                              styles.filterButton,\n                              styles.allButton,\n                              Platform.OS === 'web' && hoveredFilter === 'all' && styles.filterButtonHovered\n                            ]}\n                            onPress={() => setActiveFilter('all')}\n                            onMouseEnter={() => deviceSupportsHover && setHoveredFilter('all')}\n                            onMouseLeave={() => deviceSupportsHover && setHoveredFilter(null)}\n                          >\n                            <View style={styles.filterContent}>\n                              <MaterialCommunityIcons \n                                name=\"filter-variant\" \n                                size={16} \n                                color=\"#0784C6\" \n                              />\n                              <Text style={[styles.filterText, styles.allButtonText]}>\n                                All\n                              </Text>\n                              {activeFilter === 'all' && (\n                                <MaterialCommunityIcons \n                                  name=\"check\" \n                                  size={16} \n                                  color=\"#0784C6\" \n                                  style={styles.checkmark}\n                                />\n                              )}\n                            </View>\n                          </TouchableOpacity>\n                          <TouchableOpacity \n                            style={[\n                              styles.filterButton,\n                              styles.activeBookingsButton,\n                              Platform.OS === 'web' && hoveredFilter === 'active_bookings' && styles.filterButtonHovered\n                            ]}\n                            onPress={() => setActiveFilter('active_bookings')}\n                            onMouseEnter={() => deviceSupportsHover && setHoveredFilter('active_bookings')}\n                            onMouseLeave={() => deviceSupportsHover && setHoveredFilter(null)}\n                          >\n                            <View style={styles.filterContent}>\n                              <MaterialCommunityIcons \n                                name=\"calendar-check\" \n                                size={16} \n                                color=\"#4CAF50\"\n                              />\n                              <Text style={[styles.filterText, styles.activeBookingsButtonText]}>\n                                Active Bookings\n                              </Text>\n                              {activeFilter === 'active_bookings' && (\n                                <MaterialCommunityIcons \n                                  name=\"check\" \n                                  size={16} \n                                  color=\"#4CAF50\"\n                                  style={styles.checkmark}\n                                />\n                              )}\n                            </View>\n                          </TouchableOpacity>\n                          <TouchableOpacity \n                            style={[\n                              styles.filterButton,\n                              styles.noBookingsButton,\n                              Platform.OS === 'web' && hoveredFilter === 'no_bookings' && styles.filterButtonHovered\n                            ]}\n                            onPress={() => setActiveFilter('no_bookings')}\n                            onMouseEnter={() => deviceSupportsHover && setHoveredFilter('no_bookings')}\n                            onMouseLeave={() => deviceSupportsHover && setHoveredFilter(null)}\n                          >\n                            <View style={styles.filterContent}>\n                              <MaterialCommunityIcons \n                                name=\"calendar-remove\" \n                                size={16} \n                                color=\"#898974\"\n                              />\n                              <Text style={[styles.filterText, styles.noBookingsButtonText]}>\n                                No Bookings\n                              </Text>\n                              {activeFilter === 'no_bookings' && (\n                                <MaterialCommunityIcons \n                                  name=\"check\" \n                                  size={16} \n                                  color=\"#898974\"\n                                  style={styles.checkmark}\n                                />\n                              )}\n                            </View>\n                          </TouchableOpacity>\n                          <TouchableOpacity \n                            style={[\n                              styles.filterButton,\n                              styles.pastBookingsButton,\n                              Platform.OS === 'web' && hoveredFilter === 'past_bookings' && styles.filterButtonHovered\n                            ]}\n                            onPress={() => setActiveFilter('past_bookings')}\n                            onMouseEnter={() => deviceSupportsHover && setHoveredFilter('past_bookings')}\n                            onMouseLeave={() => deviceSupportsHover && setHoveredFilter(null)}\n                          >\n                            <View style={styles.filterContent}>\n                              <MaterialCommunityIcons \n                                name=\"history\" \n                                size={16} \n                                color=\"#9C27B0\"\n                              />\n                              <Text style={[styles.filterText, styles.pastBookingsButtonText]}>\n                                Past Bookings\n                              </Text>\n                              {activeFilter === 'past_bookings' && (\n                                <MaterialCommunityIcons \n                                  name=\"check\" \n                                  size={16} \n                                  color=\"#9C27B0\"\n                                  style={styles.checkmark}\n                                />\n                              )}\n                            </View>\n                          </TouchableOpacity>\n                        </View>\n                      </ScrollView>\n                    </View>\n                  </View>\n                </View>\n\n                {connections.length > 0 ? (\n                  <FlatList\n                    data={connections}\n                    renderItem={renderItem}\n                    keyExtractor={item => item.client_id.toString()}\n                    contentContainerStyle={styles.listContainer}\n                    onEndReached={handleLoadMore}\n                    onEndReachedThreshold={0.5}\n                    ListFooterComponent={renderFooter}\n                    ListHeaderComponent={<View style={[styles.listHeaderSpacing, { height: isWideScreen ? 130 : 190 }]} />}\n                    numColumns={isWideScreen ? 3 : (isMobile ? 1 : 2)}\n                    key={isWideScreen ? 'three-columns' : (isMobile ? 'one-column' : 'two-columns')}\n                    columnWrapperStyle={!isMobile && styles.columnWrapper}\n                  />\n                ) : searchQuery ? (\n                  <View style={styles.emptyContainer}>\n                    <View style={[styles.listHeaderSpacing, { height: isWideScreen ? 130 : 190 }]} />\n                    <MaterialCommunityIcons \n                      name=\"magnify-close\" \n                      size={80} \n                      color={theme.colors.placeholder} \n                    />\n                    <Text style={styles.emptyText}>\n                      No {activeTab} found matching \"{searchQuery}\"\n                    </Text>\n                    <TouchableOpacity \n                      style={styles.inviteButton}\n                      onPress={() => {\n                        setSearchQuery('');\n                        filterConnectionsLocally();\n                      }}\n                    >\n                      <Text style={styles.inviteButtonText}>Clear Search</Text>\n                    </TouchableOpacity>\n                  </View>\n                ) : (\n                  <EmptyStateMessage type={activeTab} />\n                )}\n              </View>\n            )}\n          </View>\n        </View>\n        \n        {/* Invite Client Modal */}\n        <Modal\n          visible={showInviteModal}\n          transparent={true}\n          animationType=\"fade\"\n          onRequestClose={() => setShowInviteModal(false)}\n        >\n          <View style={styles.modalOverlay}>\n            <View style={styles.modalContent}>\n              <View style={styles.modalHeader}>\n                <Text style={styles.modalTitle}>Invite Client</Text>\n                <TouchableOpacity \n                  style={styles.closeButton}\n                  onPress={() => setShowInviteModal(false)}\n                >\n                  <MaterialCommunityIcons name=\"close\" size={24} color=\"#666\" />\n                </TouchableOpacity>\n              </View>\n              \n              <Text style={styles.modalText}>\n                Invite a client to connect with you on CrittrCove. \n                You can either send them an email invitation or generate a link to share.\n              </Text>\n              \n              <View style={styles.inviteTypeToggle}>\n                <TouchableOpacity\n                  style={[\n                    styles.inviteTypeButton,\n                    invitationType === 'email' && styles.inviteTypeButtonActive\n                  ]}\n                  onPress={() => {\n                    setInvitationType('email');\n                    setInviteError('');\n                    setInviteSuccess('');\n                    setEmailValidationError('');\n                  }}\n                >\n                  <MaterialCommunityIcons \n                    name=\"email-outline\" \n                    size={20} \n                    color={invitationType === 'email' ? theme.colors.primary : \"#666\"} \n                  />\n                  <Text \n                    style={[\n                      styles.inviteTypeText,\n                      invitationType === 'email' && styles.inviteTypeTextActive\n                    ]}\n                  >\n                    Email Invitation\n                  </Text>\n                </TouchableOpacity>\n                \n                <TouchableOpacity\n                  style={[\n                    styles.inviteTypeButton,\n                    invitationType === 'link' && styles.inviteTypeButtonActive\n                  ]}\n                  onPress={() => {\n                    setInvitationType('link');\n                    setInviteError('');\n                    setInviteSuccess('');\n                    setEmailValidationError('');\n                  }}\n                >\n                  <MaterialCommunityIcons \n                    name=\"link-variant\" \n                    size={20} \n                    color={invitationType === 'link' ? theme.colors.primary : \"#666\"} \n                  />\n                  <Text \n                    style={[\n                      styles.inviteTypeText,\n                      invitationType === 'link' && styles.inviteTypeTextActive\n                    ]}\n                  >\n                    Generate Link\n                  </Text>\n                </TouchableOpacity>\n              </View>\n              \n              {invitationType === 'email' ? (\n                <View style={styles.inputContainer}>\n                  <Text style={styles.inputLabel}>Client's Email Address</Text>\n                  <TextInput\n                    style={[\n                      styles.emailInput,\n                      emailValidationError ? styles.emailInputError : null\n                    ]}\n                    placeholder=\"client@example.com\"\n                    value={inviteEmail}\n                    onChangeText={handleEmailInputChange}\n                    keyboardType=\"email-address\"\n                    autoCapitalize=\"none\"\n                    maxLength={254}\n                  />\n                  {emailValidationError ? (\n                    <Text style={styles.validationErrorText}>{emailValidationError}</Text>\n                  ) : null}\n                </View>\n              ) : generatedLink ? (\n                <View style={styles.linkContainer}>\n                  <Text style={styles.inputLabel}>Shareable Invitation Link</Text>\n                  <View style={styles.generatedLinkContainer}>\n                    <Text \n                      style={styles.generatedLink}\n                      numberOfLines={1}\n                      ellipsizeMode=\"middle\"\n                    >\n                      {generatedLink}\n                    </Text>\n                    {Platform.OS === 'web' && (\n                      <TouchableOpacity \n                        style={styles.copyButton}\n                        onPress={handleCopyLink}\n                      >\n                        <MaterialCommunityIcons name=\"content-copy\" size={20} color={theme.colors.primary} />\n                      </TouchableOpacity>\n                    )}\n                  </View>\n                </View>\n              ) : null}\n              \n              {inviteError ? (\n                <Text style={styles.errorText}>{inviteError}</Text>\n              ) : null}\n              \n              {inviteSuccess ? (\n                <Text style={styles.successText}>{inviteSuccess}</Text>\n              ) : null}\n              \n              <View style={styles.modalButtons}>\n                <TouchableOpacity\n                  style={styles.cancelButton}\n                  onPress={() => setShowInviteModal(false)}\n                >\n                  <Text style={styles.cancelButtonText}>Close</Text>\n                </TouchableOpacity>\n                \n                {!generatedLink || invitationType === 'email' ? (\n                  <TouchableOpacity\n                    style={[\n                      styles.sendInviteButton,\n                      (invitationType === 'email' && (!inviteEmail || emailValidationError)) && styles.disabledButton,\n                      isInviting && styles.disabledButton\n                    ]}\n                    onPress={handleSendInvite}\n                    disabled={isInviting || (invitationType === 'email' && (!inviteEmail || emailValidationError))}\n                  >\n                    {isInviting ? (\n                      <ActivityIndicator size=\"small\" color={theme.colors.surface} />\n                    ) : (\n                      <Text style={styles.sendInviteButtonText}>\n                        {invitationType === 'email' ? 'Send Invitation' : 'Generate Link'}\n                      </Text>\n                    )}\n                  </TouchableOpacity>\n                ) : null}\n              </View>\n            </View>\n          </View>\n        </Modal>\n      </View>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    height: '100vh',\n    backgroundColor: theme.colors.surface,\n    position: 'fixed',\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0,\n    overflow: 'hidden',\n    transition: 'margin-left 0.3s ease',\n  },\n  content: {\n    flex: 1,\n    height: '100%',\n    overflow: 'auto',\n  },\n  mainContent: {\n    flex: 1,\n    width: '100%',\n    alignSelf: 'center',\n    backgroundColor: theme.colors.background,\n    position: 'relative',\n  },\n  headerSection: {\n    width: '100%',\n    backgroundColor: theme.colors.surfaceContrast,\n    paddingHorizontal: 24,\n    paddingTop: 24,\n    zIndex: 2,\n  },\n  connectionsContent: {\n    flex: 1,\n    backgroundColor: theme.colors.surface,\n    position: 'relative',\n  },\n  title: {\n    fontSize: 32,\n    fontWeight: '600',\n    color: theme.colors.text,\n    marginBottom: 24,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  tabContainer: {\n    flexDirection: 'row',\n    gap: 32,\n  },\n  tab: {\n    paddingBottom: 8,\n    borderBottomWidth: 2,\n    borderBottomColor: 'transparent',\n  },\n  activeTab: {\n    borderBottomColor: theme.colors.primary,\n  },\n  tabText: {\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  activeTabText: {\n    color: theme.colors.primary,\n    fontWeight: '500',\n  },\n  stickyHeader: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    backgroundColor: theme.colors.surfaceContrast,\n    zIndex: 2,\n    marginHorizontal: 24,\n    marginTop: 24,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    borderRadius: 8,\n    padding: 16,\n  },\n  stickyHeaderContent: {\n    width: '100%',\n    gap: 16,\n  },\n  searchAndInviteContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n  },\n  searchContainer: {\n    flex: 1,\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: theme.colors.surfaceContrast,\n    borderRadius: 8,\n    padding: 12,\n    borderWidth: 1,\n    borderColor: '#CCCBC9',\n    minHeight: 48,\n  },\n  searchContainerFocused: {\n    borderColor: theme.colors.primary,\n    borderWidth: 2,\n    shadowColor: theme.colors.primary,\n    shadowOffset: { width: 0, height: 0 },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n  },\n  searchInput: {\n    flex: 1,\n    color: '#666',\n    fontSize: 16,\n    marginLeft: 8,\n    fontFamily: theme.fonts.regular.fontFamily,\n    outlineStyle: 'none',\n    outlineWidth: 0,\n    WebkitAppearance: 'none',\n    padding: 0,\n    minHeight: 24,\n    ...(Platform.OS === 'web' && {\n      caretColor: theme.colors.primary,\n    }),\n  },\n  inviteButtonSmall: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    paddingVertical: 10,\n    paddingHorizontal: 12,\n    borderRadius: 8,\n    backgroundColor: theme.colors.primary,\n    gap: 6,\n    ...(Platform.OS === 'web' && {\n      transition: 'all 0.2s ease',\n      cursor: 'pointer',\n    })\n  },\n  inviteButtonSmallText: {\n    color: theme.colors.surface,\n    fontSize: 14,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  filtersWrapper: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    marginRight: -16,\n  },\n  filterScrollContent: {\n    flexGrow: 0,\n  },\n  filterContainer: {\n    flexDirection: 'row',\n    gap: 8,\n    backgroundColor: theme.colors.surfaceContrast,\n    paddingVertical: 8,\n    paddingLeft: 4,\n    paddingRight: 16,\n  },\n  filterButton: {\n    paddingHorizontal: 12,\n    paddingVertical: 6,\n    borderRadius: 16,\n    justifyContent: 'center',\n    ...(Platform.OS === 'web' && {\n      transition: 'all 0.2s ease-in-out',\n      cursor: 'pointer',\n    })\n  },\n  filterButtonHovered: {\n    transform: [{ scale: 1.05 }],\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2,\n    },\n    shadowOpacity: 0.1,\n    shadowRadius: 4,\n    elevation: 5,\n  },\n  filterContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 6,\n  },\n  checkmark: {\n    marginLeft: 4,\n  },\n  allButton: {\n    backgroundColor: '#EFF9FF',\n  },\n  allButtonText: {\n    color: '#0784C6',\n  },\n  activeBookingsButton: {\n    backgroundColor: '#E8F5E9',\n  },\n  activeBookingsButtonText: {\n    color: '#4CAF50',\n  },\n  noBookingsButton: {\n    backgroundColor: '#E8E9E2',\n  },\n  noBookingsButtonText: {\n    color: '#898974',\n  },\n  pastBookingsButton: {\n    backgroundColor: '#F3E5F5',\n  },\n  pastBookingsButtonText: {\n    color: '#9C27B0',\n  },\n  filterText: {\n    fontSize: 14,\n    fontFamily: theme.fonts.regular.fontFamily,\n    textAlign: 'center',\n  },\n  listHeaderSpacing: {\n    paddingTop: 16,\n  },\n  listContainer: {\n    paddingHorizontal: 24,\n    paddingBottom: 34,\n    alignItems: 'stretch',\n    width: '100%',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingMoreContainer: {\n    paddingVertical: 16,\n    alignItems: 'center',\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 24,\n  },\n  emptyText: {\n    fontSize: 16,\n    color: theme.colors.placeholder,\n    textAlign: 'center',\n    marginTop: 8,\n    marginBottom: 24,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  inviteButton: {\n    backgroundColor: theme.colors.primary,\n    paddingHorizontal: 24,\n    paddingVertical: 12,\n    borderRadius: 8,\n    marginTop: 8,\n  },\n  inviteButtonText: {\n    color: theme.colors.surface,\n    fontSize: 16,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  footer: {\n    paddingVertical: 16,\n    alignItems: 'center',\n    justifyContent: 'center',\n    width: '100%',\n  },\n  footerText: {\n    color: theme.colors.placeholder,\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n    textAlign: 'center',\n    marginBottom: 12,\n  },\n  createServiceButton: {\n    paddingVertical: 10,\n    paddingHorizontal: 16,\n    backgroundColor: theme.colors.primary,\n    borderRadius: 8,\n    marginTop: 8,\n    ...(Platform.OS === 'web' && {\n      transition: 'all 0.2s ease',\n      cursor: 'pointer',\n    })\n  },\n  createServiceButtonText: {\n    color: theme.colors.surface,\n    fontSize: 16,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  modalOverlay: {\n    flex: 1,\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  modalContent: {\n    backgroundColor: theme.colors.surface,\n    borderRadius: 12,\n    padding: 24,\n    width: '90%',\n    maxWidth: 500,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 4,\n    elevation: 5,\n  },\n  modalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 16,\n  },\n  modalTitle: {\n    fontSize: 20,\n    fontWeight: '600',\n    color: theme.colors.text,\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  closeButton: {\n    padding: 4,\n  },\n  modalText: {\n    fontSize: 16,\n    color: theme.colors.text,\n    marginBottom: 24,\n    fontFamily: theme.fonts.regular.fontFamily,\n    lineHeight: 24,\n  },\n  inviteTypeToggle: {\n    flexDirection: 'row',\n    gap: 12,\n    marginBottom: 24,\n  },\n  inviteTypeButton: {\n    flex: 1,\n    padding: 12,\n    borderWidth: 1,\n    borderColor: '#CCCBC9',\n    borderRadius: 8,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'center',\n    gap: 6,\n    ...(Platform.OS === 'web' && {\n      cursor: 'pointer',\n    }),\n  },\n  inviteTypeButtonActive: {\n    borderColor: theme.colors.primary,\n    backgroundColor: 'rgba(7, 132, 198, 0.05)',\n  },\n  inviteTypeText: {\n    fontSize: 16,\n    color: '#666',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  inviteTypeTextActive: {\n    color: theme.colors.primary,\n    fontWeight: '500',\n  },\n  inputContainer: {\n    marginBottom: 24,\n  },\n  inputLabel: {\n    fontSize: 16,\n    fontWeight: '500',\n    color: theme.colors.text,\n    marginBottom: 8,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  emailInput: {\n    borderWidth: 1,\n    borderColor: '#CCCBC9',\n    borderRadius: 8,\n    padding: 12,\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  emailInputError: {\n    borderColor: theme.colors.error,\n    borderWidth: 2,\n  },\n  validationErrorText: {\n    color: theme.colors.error,\n    fontSize: 12,\n    marginTop: 4,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  linkContainer: {\n    marginBottom: 24,\n  },\n  generatedLinkContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 12,\n    padding: 12,\n    borderWidth: 1,\n    borderColor: '#CCCBC9',\n    borderRadius: 8,\n    backgroundColor: 'rgba(0, 0, 0, 0.02)',\n  },\n  generatedLink: {\n    flex: 1,\n    color: theme.colors.text,\n    fontSize: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  copyButton: {\n    padding: 8,\n    ...(Platform.OS === 'web' && {\n      cursor: 'pointer',\n    }),\n  },\n  errorText: {\n    color: theme.colors.error || '#D32F2F',\n    fontSize: 16,\n    marginBottom: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  successText: {\n    color: theme.colors.success || '#4CAF50',\n    fontSize: 16,\n    marginBottom: 16,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  modalButtons: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    gap: 12,\n    marginTop: 8,\n  },\n  cancelButton: {\n    paddingVertical: 10,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: '#CCCBC9',\n    backgroundColor: theme.colors.surface,\n    ...(Platform.OS === 'web' && {\n      cursor: 'pointer',\n    }),\n  },\n  cancelButtonText: {\n    color: theme.colors.text,\n    fontSize: 16,\n    fontWeight: '500',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  sendInviteButton: {\n    paddingVertical: 10,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n    backgroundColor: theme.colors.primary,\n    minWidth: 140,\n    alignItems: 'center',\n    justifyContent: 'center',\n    ...(Platform.OS === 'web' && {\n      cursor: 'pointer',\n    }),\n  },\n  sendInviteButtonText: {\n    color: theme.colors.surface,\n    fontSize: 16,\n    fontWeight: '600',\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  disabledButton: {\n    backgroundColor: '#CCCCCC',\n    opacity: 0.7,\n    ...(Platform.OS === 'web' && {\n      cursor: 'not-allowed',\n    }),\n  },\n  columnWrapper: {\n    flexWrap: 'wrap',\n    justifyContent: 'space-between',\n    gap: 16,\n    width: '100%',\n  },\n  cardWrapper: {\n    flex: 1,\n    width: '100%',\n    marginBottom: 16,\n  },\n  mobileCardWrapper: {\n    maxWidth: '100%',\n  },\n  wideScreenCardWrapper: {\n    maxWidth: 'calc(50% - 11px)',\n    // width: 'calc(33.33% - 11px)',\n  },\n  buttonHovered: {\n    transform: [{translateY: -3}],\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 6 },\n    shadowOpacity: 0.15,\n    shadowRadius: 10,\n    elevation: 5,\n  },\n});\n\nexport default Connections; ","import React, { useEffect, useState, useContext } from 'react';\nimport { Platform, View, Text, TouchableOpacity, StyleSheet } from 'react-native';\n\n// Add base64 polyfill for React Native if needed\nif (Platform.OS !== 'web' && typeof global.atob === 'undefined') {\n  global.atob = (str) => {\n    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n    let result = '';\n    let i = 0;\n    \n    str = str.replace(/[^A-Za-z0-9+/]/g, '');\n    \n    while (i < str.length) {\n      const encoded1 = chars.indexOf(str.charAt(i++));\n      const encoded2 = chars.indexOf(str.charAt(i++));\n      const encoded3 = chars.indexOf(str.charAt(i++));\n      const encoded4 = chars.indexOf(str.charAt(i++));\n      \n      const bitmap = (encoded1 << 18) | (encoded2 << 12) | (encoded3 << 6) | encoded4;\n      \n      result += String.fromCharCode((bitmap >> 16) & 255);\n      if (encoded3 !== 64) result += String.fromCharCode((bitmap >> 8) & 255);\n      if (encoded4 !== 64) result += String.fromCharCode(bitmap & 255);\n    }\n    \n    return result;\n  };\n}\nimport { Provider as PaperProvider } from 'react-native-paper';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createStackNavigator, TransitionPresets } from '@react-navigation/stack';\nimport { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\nimport Navigation from './src/components/Navigation';\nimport { theme } from './src/styles/theme';\nimport { AuthProvider, AuthContext, debugLog, getStorage, setStorage } from './src/context/AuthContext';\nimport { MessageNotificationProvider } from './src/context/MessageNotificationContext';\nimport { API_BASE_URL } from './src/config/config';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { createNavigationContainerRef } from '@react-navigation/native';\nimport { useNavigation } from '@react-navigation/native';\nimport { navigateToFrom } from './src/components/Navigation';\nimport { TutorialProvider } from './src/context/TutorialContext';\nimport { ToastProvider } from './src/components/ToastProvider';\nimport platformNavigation from './src/utils/platformNavigation';\nimport { loadFonts } from './src/styles/fonts';\nimport { ActivityIndicator } from 'react-native-paper';\n\n// Import CSS fixes for mobile browsers\nif (Platform.OS === 'web') {\n  // We need to import this statically for webpack to pick it up\n  require('./src/styles/viewport-fix.css');\n}\n\n// Import all your screen components\nimport HomeScreen from './src/screens/HomeScreen';\n// import AboutScreen from './src/screens/AboutScreen';\nimport MyProfile from './src/screens/MyProfile';\nimport SignIn from './src/screens/SignIn';\nimport SignUp from './src/screens/SignUp';\nimport ResetPassword from './src/screens/ResetPassword';\nimport ResetPasswordConfirm from './src/screens/ResetPasswordConfirm';\nimport Dashboard from './src/screens/Dashboard';\nimport BecomeProfessional from './src/screens/BecomeProfessional';\nimport MoreScreen from './src/screens/MoreScreen';\nimport AvailabilitySettings from './src/screens/AvailabilitySettings';\nimport OwnerHistory from './src/screens/OwnerHistory';\nimport MessageHistory from './src/components/Messages/MessageHistoryWrapper';\nimport Settings from './src/screens/Settings';\nimport PrivacyPolicy from './src/screens/PrivacyPolicy';\nimport ProfessionalSettings from './src/screens/ProfessionalSettings';\nimport TermsOfService from './src/screens/TermsOfService';\nimport HelpFAQ from './src/screens/HelpFAQ';\nimport ContactUs from './src/screens/ContactUs';\nimport Owners from './src/screens/Owners';\nimport ProfessionalProfile from './src/screens/ProfessionalProfile';\nimport MyContracts from './src/screens/MyContracts';\nimport ChangePassword from './src/screens/ChangePassword';\nimport SearchProfessionalsListing from './src/screens/SearchProfessionalsListing';\nimport MyBookings from './src/screens/MyBookings';\nimport ServiceManagerScreen from './src/screens/ServiceManagerScreen';\nimport BlogScreen from './src/screens/BlogScreen';\nimport BlogPost from './src/screens/BlogPost';\nimport Waitlist from './src/screens/Waitlist';\nimport TestToast from './src/screens/TestToast';\nimport Connections from './src/screens/Connections';\n\nconst Stack = createStackNavigator();\nconst Tab = createBottomTabNavigator();\n\nconst screens = [\n  { name: 'Home', component: HomeScreen },\n  { name: 'MyProfile', component: MyProfile },  \n  { name: 'SignIn', component: SignIn },\n  { name: 'SignUp', component: SignUp },\n  { name: 'Invite', component: SignUp },\n  { name: 'ResetPassword', component: ResetPassword },\n  { name: 'ResetPasswordConfirm', component: ResetPasswordConfirm },\n  { name: 'SearchProfessionalsListing', component: SearchProfessionalsListing },\n  { name: 'OwnerHistory', component: OwnerHistory },\n  { name: 'MessageHistory', component: MessageHistory },\n  { name: 'Dashboard', component: Dashboard },\n  { name: 'BecomeProfessional', component: BecomeProfessional },\n  { name: 'MoreScreen', component: MoreScreen },\n  { name: 'Owners', component: Owners },\n  { name: 'AvailabilitySettings', component: AvailabilitySettings },\n  { name: 'Settings', component: Settings },\n  { name: 'PrivacyPolicy', component: PrivacyPolicy },\n  { name: 'ProfessionalSettings', component: ProfessionalSettings },\n  { name: 'TermsOfService', component: TermsOfService },\n  { name: 'HelpFAQ', component: HelpFAQ },\n  { name: 'ContactUs', component: ContactUs },\n  { name: 'ProfessionalProfile', component: ProfessionalProfile },\n  { name: 'MyContracts', component: MyContracts },\n  { name: 'ChangePassword', component: ChangePassword },\n  { name: 'MyBookings', component: MyBookings },\n  { name: 'ServiceManager', component: ServiceManagerScreen },\n  { name: 'Blog', component: BlogScreen },\n  { name: 'BlogPost', component: BlogPost },\n  { name: 'Waitlist', component: Waitlist },\n  { name: 'TestToast', component: TestToast },\n  { name: 'Connections', component: Connections },\n];\n\nconst createLinking = (authContext) => ({\n  enabled: true,\n  prefixes: [\n    'https://staging.crittrcove.com',\n    'http://staging.crittrcove.com',\n    `${API_BASE_URL}`\n  ],\n  getInitialURL: async () => {\n    if (Platform.OS !== 'web') {\n      return null; // Let React Navigation handle mobile normally\n    }\n    \n    const url = window.location.href;\n    const pathname = window.location.pathname;\n    \n    debugLog('MBAo34invid3w LINKING: Checking initial URL for auth protection:', { url, pathname });\n    \n    // List of protected paths\n    const protectedPaths = [\n      '/Dashboard', '/dashboard',\n      '/MyProfile', '/my-profile', \n      '/MessageHistory', '/message-history',\n      '/OwnerHistory', '/owner-history',\n      '/BecomeProfessional', '/become-professional',\n      '/MoreScreen', '/more-screen',\n      '/Owners', '/owners',\n      '/AvailabilitySettings', '/availability-settings',\n      '/Settings', '/settings',\n      '/ProfessionalSettings', '/professional-settings',\n      '/ProfessionalProfile', '/professional-profile',\n      '/MyContracts', '/my-contracts',\n      '/ChangePassword', '/change-password',\n      '/MyBookings', '/my-bookings',\n      '/ServiceManager', '/service-manager',\n      '/TestToast', '/test-toast',\n      '/Connections', '/connections'\n    ];\n    \n    const isProtectedPath = protectedPaths.some(path => \n      pathname.startsWith(path) || pathname === path\n    );\n    \n    debugLog('MBAo34invid3w LINKING: Path protection check:', {\n      pathname,\n      isProtectedPath,\n      authContextExists: !!authContext,\n      authContextInitialized: authContext?.isInitialized,\n      authContextSignedIn: authContext?.isSignedIn\n    });\n    \n    if (isProtectedPath) {\n      // Wait for auth context to be available and initialized\n      let waitCount = 0;\n      while ((!authContext || !authContext.isInitialized) && waitCount < 50) {\n        debugLog('MBAo34invid3w LINKING: Waiting for auth context...', waitCount);\n        await new Promise(resolve => setTimeout(resolve, 100));\n        waitCount++;\n      }\n      \n      if (authContext && !authContext.isSignedIn) {\n        debugLog('MBAo34invid3w LINKING: Protected path accessed without auth, redirecting to signin');\n        const baseUrl = url.split(pathname)[0];\n        return `${baseUrl}/signin`;\n      } else {\n        debugLog('MBAo34invid3w LINKING: Auth context available, user signed in or path not protected');\n      }\n    }\n    \n    debugLog('MBAo34invid3w LINKING: Allowing access to URL:', url);\n    return url;\n  },\n  config: {\n    screens: {\n      Home: '/',  // Only match root path\n      MyProfile: 'my-profile',\n      SignIn: 'signin',\n      SignUp: {\n        path: 'signup/:token?',\n        parse: {\n          token: (token) => token || null\n        }\n      },\n      Invite: {\n        path: 'invite/:token',\n        exact: true,\n        parse: {\n          token: (token) => token\n        },\n        stringify: {\n          token: (token) => token\n        }\n      },\n      ResetPassword: 'reset-password',\n      ResetPasswordConfirm: 'reset-password/:uid/:token',\n      SearchProfessionalsListing: 'SearchProfessionalsListing',\n      OwnerHistory: 'owner-history',\n      MessageHistory: {\n        path: 'message-history',\n        parse: {\n          messageId: (messageId) => messageId || null,\n          senderName: (senderName) => senderName || 'Unknown User'\n        }\n      },\n      Dashboard: 'Dashboard',\n      BecomeProfessional: 'become-professional',\n      More: 'more',\n      Owners: 'owners',\n      AvailabilitySettings: 'availability-settings',\n      Settings: 'settings',\n      PrivacyPolicy: 'privacy-policy',\n      ProfessionalSettings: 'professional-settings',\n      TermsOfService: 'terms-of-service',\n      HelpFAQ: 'help-faq',\n      ContactUs: 'contact-us',\n      ProfessionalProfile: {\n        path: 'professional-profile',\n        parse: {\n          professional: (professional) => undefined\n        }\n      },\n      MyContracts: 'my-contracts',\n      ChangePassword: 'change-password',\n      MyBookings: 'my-bookings',\n      ServiceManager: 'service-manager',\n      Blog: 'blog',\n      BlogPost: 'blog-post',\n      Waitlist: 'waitlist',\n      TestToast: 'test-toast',\n      Connections: 'connections',\n    }\n  }\n});\n\n\nexport const navigationRef = createNavigationContainerRef();\n\nexport function navigate(name, params) {\n  if (navigationRef.isReady()) {\n    navigationRef.navigate(name, params);\n  }\n}\n\nfunction TabNavigator({ initialRouteName = 'Home' }) {\n  return (\n    <Tab.Navigator \n      initialRouteName={initialRouteName}\n      tabBar={props => <Navigation {...props} />}\n    >\n      {screens.map(screen => (\n        <Tab.Screen \n          key={screen.name}\n          name={screen.name} \n          component={screen.component} \n          options={{ headerShown: false }} \n        />\n      ))}\n    </Tab.Navigator>\n  );\n}\n\nconst MVPWarning = () => {\n  const [isVisible, setIsVisible] = useState(true);\n  const navigation = useNavigation();\n\n  useEffect(() => {\n    const checkBannerStatus = async () => {\n      const hidden = await getStorage('mvp_banner_hidden');\n      if (hidden === 'true') {\n        setIsVisible(false);\n      }\n    };\n    checkBannerStatus();\n  }, []);\n\n  const hideBanner = async () => {\n    await setStorage('mvp_banner_hidden', 'true');\n    setIsVisible(false);\n  };\n\n  if (!isVisible) return null;\n\n  return (\n    <View style={styles.warningBanner}>\n      <View style={styles.warningContent}>\n        <TouchableOpacity \n          style={styles.closeButton}\n          onPress={hideBanner}\n        >\n          <Text style={styles.closeButtonText}>✕</Text>\n        </TouchableOpacity>\n        <Text style={styles.warningText}>\n          🚧 MVP MODE: Features are still under development.\n        </Text>\n        <TouchableOpacity \n          style={styles.waitlistButton}\n          onPress={() => navigateToFrom(navigation, 'Waitlist', 'Home')}\n        >\n          <Text style={styles.waitlistButtonText}>Join Waitlist</Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n};\n\nfunction AppContent() {\n  const authContext = useContext(AuthContext);\n  const { checkAuthStatus, is_DEBUG, isInitialized, isSignedIn, userRole } = authContext;\n  const [initialRoute, setInitialRoute] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isVisible, setIsVisible] = useState(true);\n  const [inviteToken, setInviteToken] = useState(null);\n\n  // Check for invitation in the URL\n  useEffect(() => {\n    if (Platform.OS === 'web') {\n      // Use platform navigation to get current route info\n      const currentRouteInfo = platformNavigation.getCurrentRoute();\n      const url = currentRouteInfo.path;\n      \n      if (authContext.debugLog) {\n        authContext.debugLog('MBA6666 App - Current URL path:', url);\n      }\n      \n      if (url.includes('/invite/')) {\n        const pathParts = url.split('/');\n        const inviteIndex = pathParts.findIndex(part => part === 'invite');\n        if (inviteIndex !== -1 && pathParts.length > inviteIndex + 1) {\n          const token = pathParts[inviteIndex + 1];\n          if (authContext.debugLog) {\n            authContext.debugLog('MBA6666 Found invitation token in URL:', token);\n          }\n          setInviteToken(token);\n        }\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    const initializeApp = async () => {\n      // Wait for AuthContext to be fully initialized\n      if (!isInitialized) {\n        debugLog('MBAo34invid3w App initialization: AuthContext not yet initialized');\n        return;\n      }\n\n      try {\n        let route = 'Home';\n\n        debugLog('MBAo34invid3w App initialization starting:', {\n          inviteToken: !!inviteToken,\n          isSignedIn,\n          userRole,\n          platform: Platform.OS\n        });\n\n        // If we have an invite token, go to SignUp\n        if (inviteToken) {\n          if (authContext.debugLog) {\n            authContext.debugLog('MBAo34invid3w Setting initial route to SignUp with token:', inviteToken);\n          }\n          route = 'SignUp';\n        }\n        // If user is authenticated and no invite token, go to appropriate screen\n        else if (isSignedIn) {\n          route = 'Dashboard'; // Both roles go to Dashboard now\n          if (authContext.debugLog) {\n            authContext.debugLog('MBAo34invid3w User authenticated, setting route to:', route, 'for role:', userRole);\n          }\n        } else {\n          // User not signed in - check if they're trying to access a protected route\n          if (Platform.OS === 'web' && typeof window !== 'undefined') {\n            const currentPath = window.location.pathname;\n            const protectedPaths = [\n              '/Dashboard', '/dashboard',\n              '/MyProfile', '/my-profile',\n              '/MessageHistory', '/message-history',\n              '/OwnerHistory', '/owner-history',\n              '/BecomeProfessional', '/become-professional',\n              '/More', '/more',\n              '/Owners', '/owners',\n              '/AvailabilitySettings', '/availability-settings',\n              '/Settings', '/settings',\n              '/ProfessionalSettings', '/professional-settings',\n              '/ProfessionalProfile', '/professional-profile',\n              '/MyContracts', '/my-contracts',\n              '/ChangePassword', '/change-password',\n              '/MyBookings', '/my-bookings',\n              '/ServiceManager', '/service-manager',\n              '/TestToast', '/test-toast',\n              '/Connections', '/connections'\n            ];\n            \n            const isOnProtectedPath = protectedPaths.some(path => \n              currentPath.startsWith(path) || currentPath === path\n            );\n            \n            debugLog('MBAo34invid3w App initialization: Web route check:', {\n              currentPath,\n              isOnProtectedPath,\n              isSignedIn,\n              platform: Platform.OS\n            });\n            \n            if (isOnProtectedPath) {\n              debugLog('MBAo34invid3w Web: User not authenticated but on protected path, redirecting to SignIn');\n              route = 'SignIn';\n            } else {\n              route = 'Home';\n              if (authContext.debugLog) {\n                authContext.debugLog('MBAo34invid3w User not authenticated, setting route to Home');\n              }\n            }\n          } else {\n            route = 'Home';\n            if (authContext.debugLog) {\n              authContext.debugLog('MBAo34invid3w User not authenticated, setting route to Home');\n            }\n          }\n        }\n\n        setInitialRoute(route);\n        debugLog('MBAo34invid3w Final initial route set to:', route);\n      } catch (error) {\n        console.error('Error initializing app:', error);\n        setInitialRoute(inviteToken ? 'SignUp' : 'Home');\n      } finally {\n        setIsLoading(false);\n        debugLog('MBAo34invid3w App initialization completed, loading set to false');\n      }\n    };\n\n    initializeApp();\n  }, [inviteToken, isInitialized, isSignedIn, userRole]);\n\n  // Route guard effect - handles URL-based redirects after app initialization\n  useEffect(() => {\n    if (Platform.OS !== 'web' || !isInitialized || isLoading) {\n      return;\n    }\n\n    const checkAndRedirectProtectedRoute = () => {\n      if (typeof window === 'undefined') return;\n      \n      const currentPath = window.location.pathname;\n      const protectedPaths = [\n        '/Dashboard', '/dashboard',\n        '/MyProfile', '/my-profile',\n        '/MessageHistory', '/message-history',\n        '/OwnerHistory', '/owner-history',\n        '/BecomeProfessional', '/become-professional',\n        '/More', '/more',\n        '/Owners', '/owners',\n        '/AvailabilitySettings', '/availability-settings',\n        '/Settings', '/settings',\n        '/ProfessionalSettings', '/professional-settings',\n        '/ProfessionalProfile', '/professional-profile',\n        '/MyContracts', '/my-contracts',\n        '/ChangePassword', '/change-password',\n        '/MyBookings', '/my-bookings',\n        '/ServiceManager', '/service-manager',\n        '/TestToast', '/test-toast',\n        '/Connections', '/connections'\n      ];\n      \n      const isOnProtectedPath = protectedPaths.some(path => \n        currentPath.startsWith(path) || currentPath === path\n      );\n      \n      debugLog('MBAo34invid3w Route guard check:', {\n        currentPath,\n        isOnProtectedPath,\n        isSignedIn,\n        isInitialized,\n        isLoading,\n        platform: Platform.OS\n      });\n      \n      if (isOnProtectedPath && !isSignedIn) {\n        debugLog('MBAo34invid3w Route guard: Redirecting unauthenticated user from protected route');\n        // Use window.location.href for immediate redirect\n        window.location.href = '/signin';\n      }\n    };\n\n    // Small delay to ensure all initialization is complete\n    const timeoutId = setTimeout(checkAndRedirectProtectedRoute, 100);\n    \n    return () => clearTimeout(timeoutId);\n  }, [isInitialized, isSignedIn, isLoading]);\n\n  // Handle route changes without triggering auth checks\n  useEffect(() => {\n    if (!isLoading && initialRoute && Platform.OS !== 'web') {\n      AsyncStorage.setItem('lastRoute', initialRoute)\n        .catch(error => console.error('Error storing route:', error));\n    }\n  }, [initialRoute, isLoading]);\n\n  if (!isInitialized || isLoading || !initialRoute) {\n    return (\n      <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center', backgroundColor: theme.colors.background }}>\n        <ActivityIndicator size=\"large\" color={theme.colors.primary} />\n        <Text style={{ marginTop: 16, color: theme.colors.text, fontSize: 16 }}>Loading...</Text>\n      </View>\n    );\n  }\n\n  // Add navigation state listener\n  const handleNavigationStateChange = async (state) => {\n    // Store route for mobile\n    if (Platform.OS !== 'web' && state?.routes?.length > 0) {\n      const currentRoute = state.routes[state.routes.length - 1].name;\n      await AsyncStorage.setItem('lastRoute', currentRoute)\n        .catch(error => console.error('Error storing route:', error));\n    }\n    \n    // Web route protection - only redirect if clearly unauthenticated on protected route\n    if (Platform.OS === 'web' && state?.routes?.length > 0) {\n      const currentRoute = state.routes[state.routes.length - 1];\n      const routeName = currentRoute.name;\n      \n      debugLog('MBAo34invid3w Navigation state change:', {\n        routeName,\n        currentPath: typeof window !== 'undefined' ? window.location.pathname : 'unknown',\n        isInitialized,\n        isSignedIn,\n        platform: Platform.OS\n      });\n      \n      // List of protected route names (these are route names, not paths)\n      const protectedRoutes = [\n        'Dashboard',\n        'MyProfile',\n        'MessageHistory',\n        'OwnerHistory',\n        'BecomeProfessional',\n        'More',\n        'Owners',\n        'AvailabilitySettings',\n        'Settings',\n        'ProfessionalSettings',\n        'ProfessionalProfile',\n        'MyContracts',\n        'ChangePassword',\n        'MyBookings',\n        'ServiceManager',\n        'TestToast',\n        'Connections'\n      ];\n      \n      const isProtectedRoute = protectedRoutes.includes(routeName);\n      \n      debugLog('MBAo34invid3w Navigation protection check:', {\n        routeName,\n        isProtectedRoute,\n        isInitialized,\n        isSignedIn,\n        shouldRedirect: isProtectedRoute && isInitialized && !isSignedIn && routeName !== 'SignIn'\n      });\n      \n      // Only redirect if:\n      // 1. On a protected route\n      // 2. Auth is fully initialized (not still loading)\n      // 3. User is definitely not signed in\n      // 4. Not already on signin page\n      if (isProtectedRoute && isInitialized && !isSignedIn && routeName !== 'SignIn') {\n        debugLog('MBAo34invid3w Web: Protected route accessed without authentication, redirecting to signin');\n        // Use React Navigation instead of window.location to avoid full page reload\n        if (navigationRef.current) {\n          navigationRef.current.navigate('SignIn');\n        }\n      }\n    }\n  };\n\n  return (\n    <NavigationContainer\n      ref={navigationRef}\n      linking={createLinking(authContext)}\n      onStateChange={handleNavigationStateChange}\n    >\n      <MessageNotificationProvider>\n        <TutorialProvider>\n          <PaperProvider theme={theme}>\n            <ToastProvider>\n              {/* {isVisible && <MVPWarning />} */}\n              {Platform.OS === 'web' ? (\n                <Stack.Navigator\n                  initialRouteName={initialRoute}\n                  screenOptions={{\n                    headerShown: true,\n                    header: ({ navigation }) => <Navigation navigation={navigation} />,\n                    ...TransitionPresets.SlideFromRightIOS,\n                    presentation: 'card',\n                    animation: 'slide_from_right'\n                  }}\n                >\n                  {screens.map(screen => (\n                    <Stack.Screen \n                      key={screen.name}\n                      name={screen.name} \n                      component={screen.component}\n                      options={{\n                        headerShown: true,\n                        animation: 'slide_from_right'\n                      }}\n                    />\n                  ))}\n                </Stack.Navigator>\n              ) : (\n                <TabNavigator initialRouteName={initialRoute} />\n              )}\n            </ToastProvider>\n          </PaperProvider>\n        </TutorialProvider>\n      </MessageNotificationProvider>\n    </NavigationContainer>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    display: 'flex',\n    flexDirection: 'column',\n    height: '100%',\n  },\n  warningBanner: {\n    backgroundColor: '#ffebee',\n    padding: Platform.OS === 'web' ? 12 : 10,\n    borderBottomWidth: 1,\n    borderBottomColor: '#ef5350',\n    width: '100%',\n    flexShrink: 0, // Prevent banner from shrinking\n  },\n  warningContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    flexWrap: 'wrap',\n    gap: 10,\n    maxWidth: 1200,\n    marginHorizontal: 'auto',\n    width: '100%',\n  },\n  warningText: {\n    color: '#c62828',\n    textAlign: 'center',\n    fontSize: Platform.OS === 'web' ? 15 : 14,\n    flexShrink: 1,\n    flex: 1,\n    marginHorizontal: 15,\n  },\n  waitlistButton: {\n    backgroundColor: '#ef5350',\n    paddingHorizontal: 15,\n    paddingVertical: 8,\n    borderRadius: 20,\n    marginLeft: 'auto',\n  },\n  waitlistButtonText: {\n    color: 'white',\n    fontSize: Platform.OS === 'web' ? 14 : 13,\n    fontWeight: '600',\n  },\n  closeButton: {\n    width: 24,\n    height: 24,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 5,\n  },\n  closeButtonText: {\n    color: '#c62828',\n    fontSize: 18,\n    fontWeight: '600',\n  },\n});\n\nexport default function App() {\n  const [fontsLoaded, setFontsLoaded] = useState(false);\n\n  useEffect(() => {\n    const initializeFonts = async () => {\n      if (Platform.OS !== 'web') {\n        // Only load fonts on mobile platforms\n        try {\n          await loadFonts();\n          debugLog('MBA1234: Fonts loaded successfully');\n        } catch (error) {\n          console.warn('MBA1234: Error loading fonts:', error);\n        }\n      }\n      setFontsLoaded(true);\n    };\n\n    initializeFonts();\n  }, []);\n\n  // Show loading screen while fonts are loading on mobile\n  if (!fontsLoaded && Platform.OS !== 'web') {\n    return (\n      <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center', backgroundColor: theme.colors.background }}>\n        <ActivityIndicator size=\"large\" color={theme.colors.primary} />\n        <Text style={{ marginTop: 16, color: theme.colors.text }}>Loading fonts...</Text>\n      </View>\n    );\n  }\n\n  return (\n    <AuthProvider>\n      <AppContent />\n    </AuthProvider>\n  );\n}\n\n","import axios from 'axios';\nimport { API_BASE_URL } from '../config/config';\nimport { debugLog } from '../context/AuthContext';\nimport { Platform } from 'react-native';\nimport { convertToUTC, formatDateForAPI, formatTimeForAPI } from '../utils/time_utils';\n\n// Get all professional services for service manager screen\nexport const getProfessionalServices = async () => {\n  try {\n    debugLog('MBA7890: Fetching professional services');\n    \n    const response = await axios.get(`${API_BASE_URL}/api/services/v1/professional/services/`);\n    \n    return response.data;\n  } catch (error) {\n    debugLog('MBA7890: Error fetching professional services:', error);\n    debugLog('MBA7890: Error details:', error.response?.data || error.message);\n    throw error;\n  }\n};\n\n// Get all available services for a pro and\n// return the selected ones in the draft\nexport const getBookingAvailableServices = async (bookingId) => {\n  try {\n    const response = await axios.get(\n      `${API_BASE_URL}/api/booking_drafts/v1/${bookingId}/available_services/`\n    );\n    return response.data;\n  } catch (error) {\n    debugLog('MBA12345 Error fetching available services:', error);\n    throw error;\n  }\n};\n\nexport const getBookingAvailablePets = async (bookingId) => {\n  try {\n    const response = await axios.get(\n      `${API_BASE_URL}/api/booking_drafts/v1/${bookingId}/available_pets/`\n    );\n    return response.data;\n  } catch (error) {\n    debugLog('MBA12345 Error fetching available pets:', error);\n    throw error;\n  }\n};\n\nexport const markNoreplyAsNotSpam = async () => {\n  try {\n    const response = await axios.post(`${API_BASE_URL}/api/clients/v1/mark-noreply-as-not-spam/`);\n    return response.data;\n  } catch (error) {\n    debugLog('MBA12345 Error marking noreply as not spam:', error);\n    throw error;\n  }\n};\n\nexport const approveBooking = async (bookingId, clientAgreedTos = false) => {\n  try {\n    const response = await axios.post(\n      `${API_BASE_URL}/api/bookings/v1/${bookingId}/approve/`,\n      {\n        client_agreed_tos: clientAgreedTos\n      }\n    );\n    return response.data;\n  } catch (error) {\n    debugLog('Error approving booking:', error);\n    throw error;\n  }\n};\n\n/**\n * Get detailed booking information by ID\n * @param {string|number} bookingId - ID of the booking to retrieve\n * @returns {Promise<Object>} - Detailed booking information\n */\nexport const getBookingDetails = async (bookingId) => {\n  try {\n    debugLog('MBA88899', 'Fetching booking details for ID:', bookingId);\n\n    const response = await axios.get(\n      `${API_BASE_URL}/api/bookings/v1/${bookingId}/details/`\n    );\n    \n    debugLog('MBA88899', 'Booking details fetched successfully');\n    return response.data;\n  } catch (error) {\n    debugLog('MBA88899', 'Error fetching booking details:', error.response?.data || error.message);\n    throw error;\n  }\n};\n\n/**\n * Request changes to a booking\n * @param {string|number} bookingId - ID of the booking to request changes for\n * @param {string} message - Message explaining the requested changes\n * @returns {Promise<Object>} - Response from the API\n */\nexport const requestBookingChanges = async (bookingId, message) => {\n  try {\n    debugLog('MBA88899 Requesting changes for booking ID:', bookingId);\n    debugLog('MBA88899 Change request message:', message);\n    \n    const response = await axios.post(\n      `${API_BASE_URL}/api/bookings/v1/${bookingId}/request-changes/`,\n      { message }\n    );\n    \n    debugLog('MBA88899 Change request submitted successfully');\n    return response.data;\n  } catch (error) {\n    debugLog('MBA88899 Error requesting booking changes:', error);\n    throw error;\n  }\n};\n\nexport const updateBookingDraftPetsAndServices = async (draftId, data) => {\n  try {\n    const response = await axios.patch(\n      `${API_BASE_URL}/api/booking_drafts/v1/${draftId}/update_pets_and_services/`,\n      data\n    );\n\n    debugLog('MBA12345 Draft update response:', response.data);\n\n    return response.data;\n  } catch (error) {\n    debugLog('MBA12345 Error updating booking draft:', error);\n    throw error;\n  }\n};\n\nexport const updateBookingDraftTimeAndDate = async (draftId, startDate, endDate, startTime, endTime) => {\n    try {\n        debugLog('MBA5asdt3f4321 - Updating booking draft time and date:', {\n            draftId,\n            startDate,\n            endDate,\n            startTime,\n            endTime\n        });\n\n        const response = await axios.post(\n            `${API_BASE_URL}/api/booking_drafts/v1/update-time-and-date/${draftId}/`,\n            {\n                start_date: startDate,\n                end_date: endDate,\n                start_time: startTime,\n                end_time: endTime\n            }\n        );\n\n        debugLog('MBA5asdt3f4321 - Booking draft time and date update response:', response.data);\n        return response.data;\n    } catch (error) {\n        debugLog('MBA5asdt3f4321 Error updating booking draft time and date:', error);\n        throw error;\n    }\n};\n\nexport const updateBookingDraftMultipleDays = async (draftId, data, timeSettings) => {\n    try {\n        // Get the user's timezone from timeSettings, with fallback to US/Mountain\n        const userTimezone = timeSettings?.timezone || 'US/Mountain';\n        \n        debugLog('MBA8800: Updating booking draft multiple days:', {\n            draftId,\n            data,\n            userTimezone\n        });\n\n        // Handle different formats of dates array\n        const utcDates = data.dates.map(dateItem => {\n            // Check what format the date is in\n            let dateStr, startTimeStr, endTimeStr, endDateStr;\n            let isServiceOvernight = false;\n            \n            // If the dateItem already has date and times (from non-overnight date range)\n            if (dateItem.date && dateItem.start_time && dateItem.end_time) {\n                debugLog('MBA8800: Using provided occurrence data format', dateItem);\n                return {\n                    date: dateItem.date,\n                    startTime: dateItem.start_time,\n                    endDate: dateItem.end_date || dateItem.date, // Always include endDate\n                    endTime: dateItem.end_time,\n                    is_overnight: dateItem.is_overnight || false\n                };\n            }\n            \n            // If the dateItem already has date and times (formatted in BookingStepModal)\n            if (dateItem.date && dateItem.startTime && dateItem.endTime) {\n                debugLog('MBA8800: Using provided date and times', dateItem);\n                return {\n                    date: dateItem.date,\n                    startTime: dateItem.startTime,\n                    endDate: dateItem.endDate || dateItem.date, // Always include endDate\n                    endTime: dateItem.endTime,\n                    is_overnight: dateItem.is_overnight || false\n                };\n            }\n            \n            // For multiple days format from DateSelectionCard\n            if (dateItem instanceof Date) {\n                // Format the date for API\n                dateStr = formatDateForAPI(dateItem);\n                \n                // Determine which time to use - if individual times exist, use those\n                let dayTimes = data.times;\n                const dateKey = dateItem.toISOString().split('T')[0];\n                \n                if (data.times[dateKey] && data.times.hasIndividualTimes) {\n                    dayTimes = data.times[dateKey];\n                }\n                \n                // Get the time strings\n                if (typeof dayTimes.startTime === 'string') {\n                    startTimeStr = dayTimes.startTime;\n                } else if (dayTimes.startTime?.hours !== undefined) {\n                    startTimeStr = `${String(dayTimes.startTime.hours).padStart(2, '0')}:${String(dayTimes.startTime.minutes || 0).padStart(2, '0')}`;\n                } else {\n                    // Default time if missing\n                    startTimeStr = '09:00';\n                }\n                \n                if (typeof dayTimes.endTime === 'string') {\n                    endTimeStr = dayTimes.endTime;\n                } else if (dayTimes.endTime?.hours !== undefined) {\n                    endTimeStr = `${String(dayTimes.endTime.hours).padStart(2, '0')}:${String(dayTimes.endTime.minutes || 0).padStart(2, '0')}`;\n                } else {\n                    // Default time if missing\n                    endTimeStr = '17:00';\n                }\n                \n                debugLog('MBA8800: Formatted times for date:', dateKey, { startTimeStr, endTimeStr });\n                \n                // Determine if the end time might cross to the next day\n                // Check if end time is midnight or earlier than start time, indicating day boundary crossing\n                const isMidnightEnd = endTimeStr === '00:00';\n                const isTimeBeforeStart = \n                    (parseInt(endTimeStr.split(':')[0], 10) < parseInt(startTimeStr.split(':')[0], 10)) ||\n                    (parseInt(endTimeStr.split(':')[0], 10) === parseInt(startTimeStr.split(':')[0], 10) && \n                     parseInt(endTimeStr.split(':')[1], 10) < parseInt(startTimeStr.split(':')[1], 10));\n                \n                const needsNextDayDate = isMidnightEnd || isTimeBeforeStart;\n                \n                // Calculate end date - either same day or next day\n                const endDateObj = needsNextDayDate \n                  ? new Date(dateItem.getTime() + 24*60*60*1000) // Next day if crossing midnight\n                  : new Date(dateItem);\n                \n                endDateStr = formatDateForAPI(endDateObj);\n                \n                debugLog('MBA8800: End date calculation in API.js:', {\n                  needsNextDayDate,\n                  isMidnightEnd,\n                  isTimeBeforeStart,\n                  startTimeStr,\n                  endTimeStr,\n                  originalDate: dateStr,\n                  calculatedEndDate: endDateStr\n                });\n                \n                // Set overnight based on service, not just time\n                isServiceOvernight = dayTimes.isOvernightForced || false;\n            } else {\n                // If the data is in some other format, we need to extract the date and times\n                debugLog('MBA8800: Unexpected date format', dateItem);\n                throw new Error('Unexpected date format');\n            }\n            \n            // Convert to UTC using user's timezone\n            const { date: utcStartDate, time: utcStartTime } = convertToUTC(\n                dateStr,\n                startTimeStr,\n                userTimezone\n            );\n\n            const { date: utcEndDate, time: utcEndTime } = convertToUTC(\n                endDateStr || dateStr, // Use endDateStr if available, otherwise use dateStr\n                endTimeStr,\n                userTimezone\n            );\n\n            return {\n                date: utcStartDate,\n                startTime: utcStartTime,\n                endDate: utcEndDate, // Always include endDate\n                endTime: utcEndTime,\n                is_overnight: isServiceOvernight\n            };\n        });\n\n        debugLog('MBA8800: Converted UTC dates:', utcDates);\n\n        const response = await axios.post(\n            `${API_BASE_URL}/api/booking_drafts/v1/update-multiple-days/${draftId}/`,\n            { dates: utcDates }\n        );\n\n        debugLog('MBA8800: Booking draft multiple days update response:', response.data);\n        return response.data;\n    } catch (error) {\n        debugLog('MBA8800: Error updating booking draft multiple days:', error);\n        throw error;\n    }\n};\n\nexport const updateBookingDraftRecurring = async (draftId, recurringData) => {\n    try {\n        debugLog('MBA5asdt3f4321 - Updating booking draft recurring dates:', {\n            draftId,\n            recurringData\n        });\n\n        const response = await axios.post(\n            `${API_BASE_URL}/api/booking_drafts/v1/update-recurring/${draftId}/`,\n            recurringData\n        );\n\n        debugLog('MBA5asdt3f4321 - Booking draft recurring update response:', response.data);\n        return response.data;\n    } catch (error) {\n        debugLog('MBA5asdt3f4321 Error updating booking draft recurring dates:', error);\n        throw error;\n    }\n};\n\n/**\n * Get user's time settings (timezone and military time preference)\n * @returns {Promise<Object>} Object containing timezone and use_military_time\n */\nexport const getTimeSettings = async () => {\n  try {\n    const response = await axios.get(\n      `${API_BASE_URL}/api/users/v1/time-settings/`\n    );\n    return response.data;\n  } catch (error) {\n    debugLog('MBA12345 Error fetching time settings', error);\n    throw error;\n  }\n};\n\n/**\n * Update user's time settings\n * @param {Object} settings - Object containing timezone and/or use_military_time\n * @returns {Promise<Object>} Updated time settings\n */\nexport const updateTimeSettings = async (settings) => {\n  try {\n    // Ensure settings is an object\n    const data = typeof settings === 'object' ? settings : { timezone: settings };\n    \n    debugLog('MBA12345 Sending time settings update', data);\n\n    const response = await axios.post(\n      `${API_BASE_URL}/api/users/v1/update-time-settings/`,\n      data\n    );\n    return response.data;\n  } catch (error) {\n    debugLog('MBA12345 Error updating time settings', error);\n    throw error;\n  }\n};\n\n/**\n * Get user's name from the backend\n * @returns {Promise<Object>} Object containing name and first_name\n */\nexport const getUserName = async () => {\n  try {\n    const response = await axios.get(\n      `${API_BASE_URL}/api/users/v1/get-name/`\n    );\n    return response.data;\n  } catch (error) {\n    debugLog('MBA12345 Error fetching user name', error);\n    throw error;\n  }\n};\n\n/**\n * Get user profile data\n * @returns {Promise<Object>} - User profile data\n */\nexport const userProfile = async () => {\n  try {\n    debugLog('MBA12345', 'Fetching user profile data');\n    \n    const response = await axios.get(`${API_BASE_URL}/api/users/v1/profile/`);\n    \n    debugLog('MBA12345', 'User profile data fetched successfully:', {\n      name: response.data.name,\n      email: response.data.email,\n      address: response.data.address\n    });\n    \n    return response.data;\n  } catch (error) {\n    debugLog('MBA12345', 'Error in userProfile:', error);\n    throw error;\n  }\n};\n\n/**\n * Update user profile information\n * @param {Object} profileData - Data to update in the user profile\n * @returns {Promise<Object>} - Only the updated fields\n */\nexport const updateProfileInfo = async (profileData) => {\n  try {\n    debugLog('MBA76543', 'Updating profile info with data:', profileData);\n    \n    // Handle FormData differently than JSON\n    const isFormData = profileData instanceof FormData;\n    \n    debugLog('MBA76543', `Making ${isFormData ? 'FormData' : 'JSON'} request to update profile`);\n    \n    const config = {\n      method: 'patch',\n      url: `${API_BASE_URL}/api/users/v1/update-profile/`,\n      data: profileData\n    };\n    \n    // Only set content-type for non-FormData\n    if (!isFormData) {\n      config.headers = { 'Content-Type': 'application/json' };\n    }\n    \n    const response = await axios(config);\n    \n    debugLog('MBA76543', 'Profile updated successfully with response:', response.data);\n    return response.data;\n  } catch (error) {\n    debugLog('MBA76543', 'Error updating profile info:', error);\n    throw error;\n  }\n};\n\n/**\n * Change user password\n * @param {string} currentPassword - The user's current password\n * @param {string} newPassword - The new password to set\n * @returns {Promise<Object>} - Response from the backend\n */\nexport const changePassword = async (currentPassword, newPassword) => {\n  try {\n    debugLog('MBA1234', 'Initiating password change request');\n    \n    const response = await axios.post(\n      `${API_BASE_URL}/api/users/v1/change-password/`,\n      {\n        current_password: currentPassword,\n        new_password: newPassword,\n      }\n    );\n    \n    debugLog('MBA1234', 'Password change successful');\n    return response.data;\n  } catch (error) {\n    debugLog('MBA1234', 'Error changing password:', error.response?.data || error.message);\n    throw error;\n  }\n};\n\n/**\n * Upload a profile picture for the user\n * @param {FormData} formData - FormData containing the profile_picture file\n * @returns {Promise<Object>} - Object containing the profile_photo URL\n */\nexport const uploadProfilePicture = async (formData) => {\n  try {\n    debugLog('MBA3oin4f084', 'Starting profile picture upload');\n    \n    if (!(formData instanceof FormData)) {\n      throw new Error('uploadProfilePicture requires FormData');\n    }\n    \n    // Check if formData contains a profile_picture entry\n    let hasFile = false;\n    for (let pair of formData.entries()) {\n      if (pair[0] === 'profile_picture') {\n        hasFile = true;\n        debugLog('MBA3oin4f084', `FormData contains profile_picture: ${typeof pair[1]}`);\n        break;\n      }\n    }\n    \n    if (!hasFile) {\n      throw new Error('FormData does not contain profile_picture');\n    }\n    \n    // Ensure we're not setting Content-Type ourselves - let axios set it with boundary\n    const response = await axios({\n      method: 'post',\n      url: `${API_BASE_URL}/api/users/v1/upload-profile-picture/`,\n      data: formData,\n      headers: {\n        'Accept': 'application/json',\n        // Let axios set the content-type with boundary\n      },\n      // Increase timeout for larger files\n      timeout: 30000\n    });\n    \n    debugLog('MBA3oin4f084', 'Profile picture upload successful with response:', response.data);\n    return response.data;\n  } catch (error) {\n    debugLog('MBA3oin4f084', 'Error uploading profile picture:', error);\n    if (error.response) {\n      debugLog('MBA3oin4f084', 'Server error response:', error.response);\n    }\n    throw error;\n  }\n};\n\n/**\n * Add a new pet to the user's account\n * This function sends pet data to the backend to create a new pet record\n * @param {Object} petData - Object containing the pet details\n * @returns {Promise<Object>} - Created pet data from the backend\n */\nexport const addPet = async (petData) => {\n  try {\n    debugLog('MBA789', 'Adding new pet with data:', petData);\n\n    const response = await axios.post(\n      `${API_BASE_URL}/api/pets/v1/add-pet/`,\n      petData\n    );\n    \n    debugLog('MBA789', 'Pet added successfully:', response.data);\n    \n    // Return the data in a standardized format\n    return response.data;\n  } catch (error) {\n    debugLog('MBA789', 'Error adding pet:', error);\n    throw error;\n  }\n};\n\n/**\n * Update an existing pet\n * This function sends updated pet data to the backend to update an existing pet record\n * @param {string|number} petId - The ID of the pet to update\n * @param {Object} petData - Object containing the updated pet details\n * @returns {Promise<Object>} - Updated pet data from the backend\n */\nexport const updatePet = async (petId, petData) => {\n  try {\n    debugLog('MBA789', 'Updating pet with ID:', petId, 'and data:', petData);\n\n    const response = await axios.patch(\n      `${API_BASE_URL}/api/pets/v1/${petId}/`,\n      petData\n    );\n    \n    debugLog('MBA789', 'Pet updated successfully:', response.data);\n    return response.data;\n  } catch (error) {\n    debugLog('MBA789', 'Error updating pet:', error);\n    throw error;\n  }\n};\n\n/**\n * Fix the owner of a pet by assigning the current user\n * This is used to repair pets that have a null owner field\n * @param {string|number} petId - The ID of the pet to fix\n * @returns {Promise<Object>} - Updated pet data from the backend\n */\nexport const fixPetOwner = async (petId) => {\n  try {\n    debugLog('MBA789', 'Fixing owner for pet with ID:', petId);\n\n    const response = await axios.post(\n      `${API_BASE_URL}/api/pets/v1/${petId}/fix-owner/`,\n      {}\n    );\n    \n    debugLog('MBA789', 'Pet owner fixed successfully:', response.data);\n    return response.data;\n  } catch (error) {\n    debugLog('MBA789', 'Error fixing pet owner:', error);\n    throw error;\n  }\n};\n\n/**\n * Delete a pet from the user's account\n * This function sends a DELETE request to remove a pet record\n * @param {string|number} petId - The ID of the pet to delete\n * @returns {Promise<Object>} - Success response from the backend\n */\nexport const deletePet = async (petId) => {\n  try {\n    debugLog('MBA789', 'Deleting pet with ID:', petId);\n\n    const response = await axios.delete(\n      `${API_BASE_URL}/api/pets/v1/${petId}/`\n    );\n    \n    debugLog('MBA789', 'Pet deleted successfully:', response.data);\n    return response.data;\n  } catch (error) {\n    debugLog('MBA789', 'Error deleting pet:', error);\n    throw error;\n  }\n};\n\n/**\n * Creates a new professional service\n * @param {Object} serviceData - Data for the new service\n * @returns {Promise<Object>} - The created service data\n */\nexport const createService = async (serviceData) => {\n  try {\n    // Log the data we're sending to the server\n    debugLog('MBA54321', 'Creating new service - sending data to backend:', serviceData);\n\n    // Format animal_types as a dictionary mapping animal types to their categories\n    let formattedAnimalTypes = {};\n    \n    if (serviceData.animal_types && Array.isArray(serviceData.animal_types)) {\n      // Convert array format to dictionary\n      serviceData.animal_types.forEach(animal => {\n        if (typeof animal === 'object' && animal.name && animal.category) {\n          formattedAnimalTypes[animal.name] = animal.category;\n        } else if (typeof animal === 'string') {\n          formattedAnimalTypes[animal] = 'Other';\n        }\n      });\n    } else if (serviceData.animal_types && typeof serviceData.animal_types === 'object') {\n      // If it's already a dictionary, use it directly\n      formattedAnimalTypes = serviceData.animal_types;\n    } else if (serviceData.animal_type) {\n      // Fallback to legacy single animal_type\n      formattedAnimalTypes[serviceData.animal_type] = 'Other';\n    } else {\n      // Default\n      formattedAnimalTypes['Other'] = 'Other';\n    }\n    \n    // Format additional rates to ensure rate values are strings\n    const formattedAdditionalRates = (serviceData.additional_rates || []).map(rate => ({\n      ...rate,\n      rate: String(rate.rate)\n    }));\n    \n    // Make sure all numeric values are properly formatted as strings to avoid type issues\n    const formattedData = {\n      ...serviceData,\n      base_rate: String(serviceData.base_rate),\n      additional_animal_rate: String(serviceData.additional_animal_rate || 0),\n      holiday_rate: String(serviceData.holiday_rate || 0),\n      animal_types: formattedAnimalTypes,\n      additional_rates: formattedAdditionalRates\n    };\n    \n    // Log we're sending the additional rates too\n    debugLog('MBA54321', 'Sending additional rates to backend:', formattedData.additional_rates);\n\n    const response = await axios.post(`${API_BASE_URL}/api/services/v1/create/`, formattedData);\n\n    debugLog('MBA54321', 'Service created successfully - backend response:', response.data);\n    return response.data;\n  } catch (error) {\n    debugLog('MBA54321', 'Error creating service:', error);\n    debugLog('MBA54321', 'Error response data:', error.response?.data);\n    \n    // Rethrow the original error - axios interceptor will handle auth errors\n    throw error;\n  }\n};\n\n/**\n * Delete a service by ID\n * @param {number} serviceId - ID of the service to delete\n * @returns {Promise<Object>} Response data with success message or error details\n */\nexport const deleteService = async (serviceId) => {\n  try {\n    debugLog('MBA7890: Deleting service with ID:', serviceId);\n\n    const response = await axios.delete(`${API_BASE_URL}/api/services/v1/delete/${serviceId}/`);\n\n    debugLog('MBA7890: Service deleted successfully - backend response:', response.data);\n    return response.data;\n  } catch (error) {\n    debugLog('MBA7890: Error deleting service:', error);\n    debugLog('MBA7890: Error response data:', error.response?.data);\n    throw error;\n  }\n};\n\n// Function to update an existing service\nexport const updateService = async (serviceData) => {\n  try {\n    debugLog('API updateService', 'Updating service with data:', serviceData);\n    \n    const response = await axios.patch(`${API_BASE_URL}/api/services/v1/update/${serviceData.service_id}/`, serviceData);\n    \n    debugLog('API updateService Response:', response.data);\n    return response.data;\n  } catch (error) {\n    debugLog('API updateService Error:', error.response?.data || error.message);\n    throw error;\n  }\n};\n\n/**\n * Get professional's client connections, returning necessary client data\n * @param {number} page - Page number for pagination\n * @returns {Promise<Object>} Object containing connections and pagination info\n */\nexport const getUserConnections = async (page = 1) => {\n  try {\n    debugLog('MBA4321 Fetching client connections, page:', page);\n    \n    const response = await axios.get(`${API_BASE_URL}/api/bookings/v1/connections/`, {\n      params: {\n        page\n      }\n    });\n    \n    debugLog('MBA4321 Connections response:', response.data);\n    \n    return response.data;\n  } catch (error) {\n    debugLog('MBA4321 Error fetching connections:', error);\n    debugLog('MBA4321 Error details:', error.response?.data || error.message);\n    \n    throw error;\n  }\n};\n\n/**\n * Get profile details for a specific connection\n * @param {string} userId - The ID of the user to get profile details for\n * @param {string} type - The type of connection ('client' or 'professional')\n * @returns {Promise<Object>} Object containing detailed profile info\n */\nexport const getConnectionProfile = async (userId, type = 'client') => {\n  try {\n    debugLog('MBA4321 Fetching connection profile:', { userId, type });\n    \n    const response = await axios.get(`${API_BASE_URL}/api/connections/v1/profile/${userId}/`, {\n      params: { type }\n    });\n    \n    debugLog('MBA4321 Connection profile response:', response.data);\n    \n    return response.data;\n  } catch (error) {\n    debugLog('MBA4321 Error fetching connection profile:', error);\n    debugLog('MBA4321 Error details:', error.response?.data || error.message);\n    \n    throw error;\n  }\n};\n\n/**\n * Invite a client to connect with a professional via email or link\n * \n * @param {string} type - Type of invitation: 'email' or 'link'\n * @param {string} email - The email address of the client to invite (required if type is 'email')\n * @returns {Promise<Object>} Object containing result of invitation, including invitation_link for link invitations\n */\nexport const inviteClient = async (type = 'email', email = null) => {\n  try {\n    debugLog('MBA4321 Inviting client:', { type, email });\n    \n    const response = await axios.post(`${API_BASE_URL}/api/users/v1/invitations/`, {\n      type,\n      email,\n      is_professional_invite: true\n    });\n    \n    debugLog('MBA4321 Invite client response:', response.data);\n    \n    return response.data;\n  } catch (error) {\n    debugLog('MBA4321 Error inviting client:', error);\n    debugLog('MBA4321 Error details:', error.response?.data || error.message);\n    \n    throw error;\n  }\n};\n\n/**\n * Send a referral to invite someone to join CrittrCove\n * \n * @param {string} type - Type of invitation: 'email' or 'link'\n * @param {string} email - The email address to refer (required if type is 'email')\n * @param {string} referralType - The type of referral: 'client_to_client', 'client_to_professional', or 'professional_to_professional'\n * @returns {Promise<Object>} Object containing result of referral, including invitation_link for link referrals\n */\nexport const sendReferral = async (type = 'email', email = null, referralType) => {\n  try {\n    debugLog('MBA4321 Sending referral:', { type, email, referralType });\n    \n    const response = await axios.post(`${API_BASE_URL}/api/users/v1/invitations/`, {\n      type,\n      email,\n      is_professional_invite: false,\n      referral_type: referralType\n    });\n    \n    debugLog('MBA4321 Send referral response:', response.data);\n    \n    return response.data;\n  } catch (error) {\n    debugLog('MBA4321 Error sending referral:', error);\n    debugLog('MBA4321 Error details:', error.response?.data || error.message);\n    \n    throw error;\n  }\n};\n\n/**\n * Get a list of all invitations created by the current user\n * \n * @param {string} type - Type of invitations to fetch: 'all', 'professional', or 'referral'\n * @returns {Promise<Array>} Array of invitation objects\n */\nexport const getInvitations = async (type = 'all') => {\n  try {\n    debugLog('MBA4321 Getting invitations:', { type });\n    \n    const response = await axios.get(`${API_BASE_URL}/api/users/v1/invitations/?type=${type}`);\n    \n    debugLog('MBA4321 Get invitations response:', response.data);\n    \n    return response.data;\n  } catch (error) {\n    debugLog('MBA4321 Error getting invitations:', error);\n    debugLog('MBA4321 Error details:', error.response?.data || error.message);\n    \n    throw error;\n  }\n};\n\n/**\n * Get details of a specific invitation\n * \n * @param {string} token - The invitation token\n * @returns {Promise<Object>} Invitation details\n */\nexport const getInvitationDetails = async (token) => {\n  try {\n    debugLog('MBA4321 Getting invitation details:', { token });\n    \n    const response = await axios.get(`${API_BASE_URL}/api/users/v1/invitations/${token}/`);\n    \n    debugLog('MBA4321 Get invitation details response:', response.data);\n    \n    return response.data;\n  } catch (error) {\n    debugLog('MBA4321 Error getting invitation details:', error);\n    debugLog('MBA4321 Error details:', error.response?.data || error.message);\n    \n    throw error;\n  }\n};\n\n/**\n * Verify if an invitation is valid\n * This endpoint doesn't require authentication\n * \n * @param {string} token - The invitation token\n * @returns {Promise<Object>} Object with valid flag and invitation details\n */\nexport const verifyInvitation = async (token) => {\n  try {\n    debugLog('MBA4321 Verifying invitation:', { token });\n    debugLog('MBA4321 Verification endpoint:', `${API_BASE_URL}/api/users/v1/invitations/${token}/verify/`);\n    \n    // Don't use the authenticated API client since this doesn't require auth\n    const response = await axios.get(`${API_BASE_URL}/api/users/v1/invitations/${token}/verify/`);\n    \n    debugLog('MBA4321 Verify invitation response:', response.data);\n    \n    return response.data;\n  } catch (error) {\n    debugLog('MBA4321 Error verifying invitation:', error);\n    debugLog('MBA4321 Error details:', error.response?.data || error.message);\n    \n    throw error;\n  }\n};\n\n/**\n * Accept an invitation and create a connection between client and professional\n * Requires authentication - the user must be logged in\n * \n * Note: If the user registered with an invitation token, the backend\n * automatically accepts the invitation during registration.\n * \n * @param {string} token - The invitation token\n * @returns {Promise<Object>} Result of accepting the invitation\n */\nexport const acceptInvitation = async (token) => {\n  try {\n    debugLog('MBAnb23ou4bf954 Accepting invitation with token:', token);\n    \n    // Backend requires authentication - make a simple authenticated request\n    const response = await axios.post(\n      `${API_BASE_URL}/api/users/v1/invitations/${token}/accept/`,\n      {}, // Empty body - backend just needs the auth token\n      {\n        headers: {\n          'Content-Type': 'application/json'\n          // Auth header will be added automatically by the interceptor\n        }\n      }\n    );\n    \n    debugLog('MBAnb23ou4bf954 Invitation accepted successfully:', response.data);\n    return response.data;\n  } catch (error) {\n    debugLog('MBAnb23ou4bf954 Error accepting invitation:', error.message);\n    \n    // Log detailed error information\n    if (error.response) {\n      debugLog('MBAnb23ou4bf954 Error status:', error.response.status);\n      debugLog('MBAnb23ou4bf954 Error data:', error.response.data);\n      \n      // Special case: \"already used\" isn't really an error for our purposes\n      // Since invitations are accepted automatically during registration\n      if (error.response.status === 400 && error.response.data?.error === 'Invitation has already been used') {\n        debugLog('MBAnb23ou4bf954 Invitation was already accepted (likely during registration), treating as success');\n        return { \n          success: true, \n          already_accepted: true,\n          message: 'Invitation was already accepted'\n        };\n      }\n    }\n    \n    // Add context about requirements to the error\n    if (error.response?.status === 401) {\n      error.message = 'You must be logged in to accept this invitation';\n    } else if (error.response?.data?.error) {\n      error.message = error.response.data.error;\n    }\n    \n    throw error;\n  }\n};\n\n/**\n * Delete/cancel an invitation\n * \n * @param {string} token - The invitation token\n * @returns {Promise<void>}\n */\nexport const deleteInvitation = async (token) => {\n  try {\n    debugLog('MBA4321 Deleting invitation:', { token });\n    \n    await axios.delete(`${API_BASE_URL}/api/users/v1/invitations/${token}/`);\n    \n    debugLog('MBA4321 Delete invitation success');\n    \n    return true;\n  } catch (error) {\n    debugLog('MBA4321 Error deleting invitation:', error);\n    debugLog('MBA4321 Error details:', error.response?.data || error.message);\n    \n    throw error;\n  }\n};\n\n/**\n * Resend an invitation email\n * \n * @param {string} token - The invitation token\n * @returns {Promise<Object>} Result of resending the invitation\n */\nexport const resendInvitation = async (token) => {\n  try {\n    debugLog('MBA4321 Resending invitation:', { token });\n    \n    const response = await axios.post(`${API_BASE_URL}/api/users/v1/invitations/${token}/resend/`);\n    \n    debugLog('MBA4321 Resend invitation response:', response.data);\n    \n    return response.data;\n  } catch (error) {\n    debugLog('MBA4321 Error resending invitation:', error);\n    debugLog('MBA4321 Error details:', error.response?.data || error.message);\n    \n    throw error;\n  }\n};\n\n/**\n * Update booking draft rates and recalculate cost summary\n * @param {string} draftId - The ID of the booking draft to update\n * @param {Array} occurrences - Array of occurrence objects with updated rates\n * @returns {Promise<Object>} Updated draft data\n */\nexport const updateBookingDraftRates = async (draftId, occurrences) => {\n    try {\n        debugLog('MBA98765 - Updating booking draft rates:', {\n            draftId,\n            occurrences\n        });\n\n        const response = await axios.post(\n            `${API_BASE_URL}/api/booking_drafts/v1/update-rates/${draftId}/`,\n            {\n                occurrences\n            }\n        );\n\n        debugLog('MBA98765 - Booking draft rates update response:', response.data);\n        return response.data;\n    } catch (error) {\n        debugLog('MBA98765 Error updating booking draft rates:', error);\n        throw error;\n    }\n};\n\n/**\n * Create a booking from a draft\n * Called when the professional confirms a booking from the booking step modal\n * @param {string} conversationId - The ID of the conversation containing the draft\n * @param {boolean} termsOfServiceAgreedByPro - Whether the professional agreed to terms\n * @returns {Promise<Object>} Response containing the new booking information and message\n */\nexport const createBookingFromDraft = async (conversationId, termsOfServiceAgreedByPro = false) => {\n    try {\n        debugLog('MBA66777 - Creating booking from draft:', {\n            conversationId,\n            termsOfServiceAgreedByPro\n        });\n\n        const response = await axios.post(\n            `${API_BASE_URL}/api/bookings/v1/create-from-draft/`,\n            {\n                conversation_id: conversationId, \n                terms_of_service_agreed_by_pro: termsOfServiceAgreedByPro\n            }\n        );\n\n        debugLog('MBA66777 - Booking created from draft:', response.data);\n        return response.data;\n    } catch (error) {\n        debugLog('MBA66777 Error creating booking from draft:', error);\n        throw error;\n    }\n};\n\n/**\n * Update notes from professional in a booking draft\n * @param {string} conversationId - The ID of the conversation containing the draft\n * @param {string} notesFromPro - Notes from the professional for the client\n * @returns {Promise<Object>} Response containing updated draft data\n */\nexport const updateDraftNotesFromPro = async (conversationId, notesFromPro) => {\n    try {\n        debugLog('MBA88888 - Updating draft notes from pro:', {\n            conversationId,\n            notesFromPro\n        });\n\n        const response = await axios.post(\n            `${API_BASE_URL}/api/booking_drafts/v1/update-notes-from-pro/`,\n            {\n                conversation_id: conversationId,\n                notes_from_pro: notesFromPro\n            }\n        );\n\n        debugLog('MBA88888 - Draft notes updated successfully:', response.data);\n        return response.data;\n    } catch (error) {\n        debugLog('MBA88888 Error updating draft notes:', error);\n        throw error;\n    }\n};\n\n/**\n * Gets the dates and times for a booking draft\n * @param {string} draftId - The ID of the draft\n * @returns {Promise<Object>} - Draft dates and times data\n */\nexport const getBookingDraftDatesAndTimes = async (draftId) => {\n  try {\n    debugLog('MBA9876: Fetching booking draft dates and times:', draftId);\n    \n    const response = await axios.get(\n      `${API_BASE_URL}/api/booking_drafts/v1/${draftId}/dates_and_times/`\n    );\n    \n    debugLog('MBA9876: Draft dates and times fetched successfully');\n    return response.data;\n  } catch (error) {\n    debugLog('MBA9876: Error fetching booking draft dates and times:', error);\n    throw error;\n  }\n};\n\n/**\n * Creates a draft from an existing booking for editing purposes\n * @param {number} bookingId - The ID of the booking to create a draft from\n * @returns {Promise<Object>} Response containing the draft ID and draft data\n */\nexport const createDraftFromBooking = async (bookingId) => {\n  try {\n    debugLog('MBA6428: Creating draft from booking:', { bookingId });\n    \n    const response = await axios.post(\n      `${API_BASE_URL}/api/booking_drafts/v1/create-from-booking/${bookingId}/`,\n      {}  // No body needed for this request\n    );\n    \n    debugLog('MBA6428: Draft created successfully:', response.data);\n    return response.data;\n  } catch (error) {\n    debugLog('MBA6428: Error creating draft from booking:', error);\n    // Return a structured error object instead of throwing\n    if (error.response?.data) {\n      return {\n        error: true,\n        status: error.response.status,\n        message: error.response.data.error || 'Failed to create draft from booking',\n        data: error.response.data\n      };\n    }\n    // Still throw for network errors or other unexpected issues\n    throw error;\n  }\n};\n\n/**\n * Search for professionals based on various criteria\n * @param {Object} searchParams - Search parameters\n * @param {Array} searchParams.animal_types - Array of animal types (e.g., ['dogs', 'cats'])\n * @param {string} searchParams.location - Location string (city, zip, etc.)\n * @param {string} searchParams.service_query - Service search query\n * @param {boolean} searchParams.overnight_service - Whether overnight service is required\n * @param {number} searchParams.price_min - Minimum price\n * @param {number} searchParams.price_max - Maximum price\n * @param {number} searchParams.radius_miles - Search radius in miles (default 30)\n * @param {number} searchParams.page - Page number for pagination (default 1)\n * @param {number} searchParams.page_size - Number of results per page (default 20)\n * @returns {Promise<Object>} - Search results with professionals array and pagination info\n */\nexport const searchProfessionals = async (searchParams = {}) => {\n  try {\n    debugLog('MBA9999', 'Searching professionals with params:', searchParams);\n    \n    const response = await axios.post(`${API_BASE_URL}/api/professionals/v1/search/`, searchParams);\n    \n    debugLog('MBA9999', 'Professional search completed successfully');\n    return response.data;\n  } catch (error) {\n    debugLog('MBA9999', 'Error searching professionals:', error.response?.data || error.message);\n    \n    throw error;\n  }\n};\n\n/**\n * Get detailed services for a specific professional (for client view)\n * @param {number} professionalId - The ID of the professional\n * @returns {Promise<Array>} - Array of detailed service objects with rates and descriptions\n */\nexport const getProfessionalServicesDetailed = async (professionalId) => {\n  try {\n    debugLog('MBA9999', 'Getting detailed services for professional:', professionalId);\n    \n    const response = await axios.get(`${API_BASE_URL}/api/professionals/v1/services/${professionalId}/`);\n    \n    debugLog('MBA9999', 'Professional services fetched successfully');\n    return response.data;\n  } catch (error) {\n    debugLog('MBA9999', 'Error fetching professional services:', error.response?.data || error.message);\n    \n    throw error;\n  }\n};\n\n/**\n * Create a conversation between the current user (client) and a professional\n * @param {number} professionalId - The ID of the professional to contact\n * @returns {Promise<Object>} - Object containing conversation_id, is_professional, and other_user_name\n */\nexport const createConversation = async (professionalId) => {\n  try {\n    debugLog('MBA3456', 'Creating conversation with professional:', professionalId);\n    \n    const response = await axios.post(`${API_BASE_URL}/api/conversations/v1/create/`, {\n      professional_id: professionalId\n    });\n    \n    debugLog('MBA3456', 'Conversation created successfully:', response.data);\n    return response.data;\n  } catch (error) {\n    debugLog('MBA3456', 'Error creating conversation:', error.response?.data || error.message);\n    \n    throw error;\n  }\n};\n\n/**\n * Get count of unread messages for the current user\n * @returns {Promise<Object>} - Object containing unread message count\n */\nexport const getUnreadMessageCount = async () => {\n  try {\n    debugLog(\"MBA4321: Fetching unread message count\");\n    \n    const response = await axios.get(`${API_BASE_URL}/api/messages/v1/unread-count/`);\n    \n    debugLog(\"MBA4321: Unread count fetched:\", response.data);\n    return response.data;\n  } catch (error) {\n    debugLog(\"MBA4321: Error with unread message count:\", error.message);\n    \n    throw error;\n  }\n};\n\n/**\n * Get all conversations for the current user with online status data\n * @returns {Promise<Array>} - Array of conversation objects with participant online status\n */\nexport const getConversations = async () => {\n  try {\n    debugLog('MBA3210: Fetching conversations with online status data');\n    \n    const response = await axios.get(`${API_BASE_URL}/api/conversations/v1/`);\n    \n    debugLog(`MBA3210: Fetched ${response.data?.length || 0} conversations with online status data`);\n    return response.data;\n  } catch (error) {\n    debugLog('MBA3210: Error fetching conversations:', error);\n    throw error;\n  }\n};\n\n/**\n * Get messages for a conversation with pagination\n * @param {string|number} conversationId - The ID of the conversation\n * @param {number} page - Page number for pagination (default 1)\n * @returns {Promise<Object>} - Object containing messages array, pagination info, and draft data\n */\nexport const getConversationMessages = async (conversationId, page = 1) => {\n  if (!conversationId || conversationId === 'undefined' || conversationId === 'null') {\n    debugLog('MBA4321: No conversation ID provided');\n    throw new Error('No conversation ID provided');\n  }\n  try {\n    debugLog('MBA4321: Fetching messages for conversation:', conversationId, 'page:', page);\n    \n    const response = await axios.get(`${API_BASE_URL}/api/messages/v1/conversation/${conversationId}/`, {\n      params: { page }\n    });\n    \n    debugLog('MBA4321: Messages fetched successfully:', response.data);\n    return response.data;\n  } catch (error) {\n    debugLog('MBA4321: Error fetching messages:', error);\n    throw error;\n  }\n};\n\n/**\n * Get dashboard data for professionals\n * @returns {Promise<Object>} - Dashboard data including bookings and onboarding progress\n */\nexport const getProfessionalDashboard = async () => {\n  try {\n    debugLog('MBA5677: Fetching professional dashboard data');\n    \n    const response = await axios.get(`${API_BASE_URL}/api/professionals/v1/dashboard/`);\n    \n    debugLog('MBA5677: Professional dashboard data fetched successfully:', response.data);\n    return response.data;\n  } catch (error) {\n    debugLog('MBA5677: Error fetching professional dashboard data:', error);\n    throw error;\n  }\n};\n\n/**\n * Get dashboard data for clients/owners\n * @returns {Promise<Object>} - Dashboard data including bookings and onboarding progress\n */\nexport const getClientDashboard = async () => {\n  try {\n    debugLog('MBA5677: Fetching client dashboard data');\n    \n    const response = await axios.get(`${API_BASE_URL}/api/clients/v1/dashboard/`);\n    \n    debugLog('MBA5677: Client dashboard data fetched successfully:', response.data);\n    return response.data;\n  } catch (error) {\n    debugLog('MBA5677: Error fetching client dashboard data:', error);\n    throw error;\n  }\n};\n\n/**\n * Get client pets\n * \n * Retrieves all pets for a specific client based on conversation ID\n * The backend will determine the client ID from the conversation and user roles\n * \n * @param {string|number} conversationId - The ID of the conversation \n * @returns {Promise<Array>} - Array of pet objects for the client\n */\nexport const getClientPets = async (conversationId) => {\n  try {\n    debugLog('MBA3456', 'Fetching client pets for conversation:', conversationId);\n    \n    // Make sure conversationId is provided\n    if (!conversationId) {\n      debugLog('MBA3456', 'Error: No conversation_id provided to getClientPets');\n      throw new Error('No conversation_id provided');\n    }\n    \n    const response = await axios.get(`${API_BASE_URL}/api/clients/v1/get-pets/`, {\n      params: {\n        conversation_id: conversationId\n      }\n    });\n    \n    debugLog('MBA3456', 'Client pets fetched successfully:', response.data);\n    return response.data;\n  } catch (error) {\n    debugLog('MBA3456', 'Error fetching client pets:', error.response?.data || error.message);\n    throw error;\n  }\n};\n\n/**\n * Upload an image to be attached to a message\n * @param {string|number} conversationId - The conversation ID\n * @param {File|Blob|string} imageData - The image file, blob, or base64 string\n * @returns {Promise<Object>} - Object containing image_url and message_id\n */\nexport const uploadMessageImage = async (conversationId, imageData) => {\n  try {\n    debugLog('MBA5678: Uploading message image for conversation:', conversationId);\n    \n    const formData = new FormData();\n    formData.append('conversation_id', conversationId);\n    \n    // Handle different types of image data\n    if (typeof imageData === 'string') {\n      // If it's a base64 string, convert to file object\n      debugLog('MBA5678: Image data is a string, sending as base64');\n      \n      // Use JSON format instead of FormData for base64\n      const response = await axios.post(\n        `${API_BASE_URL}/api/messages/v1/upload_image/`,\n        {\n          conversation_id: conversationId,\n          image_data: imageData\n        }\n      );\n      \n      debugLog('MBA5678: Image uploaded successfully:', response.data);\n      return response.data;\n    } else {\n      // If it's a File or Blob object\n      debugLog('MBA5678: Image data is a File/Blob, sending as multipart/form-data');\n      formData.append('image_file', imageData);\n      \n      const response = await axios.post(\n        `${API_BASE_URL}/api/messages/v1/upload_image/`,\n        formData,\n        {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        }\n      );\n      \n      debugLog('MBA5678: Image uploaded successfully:', response.data);\n      return response.data;\n    }\n  } catch (error) {\n    debugLog('MBA5678: Error uploading message image:', error);\n    throw error;\n  }\n};\n\n/**\n * Compress an image to reduce its size before upload\n * @param {string} imageUri - The URI of the image to compress\n * @param {number} maxWidth - Maximum width of the compressed image (default: 1024)\n * @param {number} quality - Quality of the compressed image (0-1, default: 0.7)\n * @returns {Promise<string>} - Base64 string of the compressed image\n */\nexport const compressImage = async (imageUri, maxWidth = 1024, quality = 0.7) => {\n  try {\n    debugLog('MBA5511: Attempting to compress image:', {\n      uriType: typeof imageUri,\n      isBase64: typeof imageUri === 'string' && imageUri.startsWith('data:image'),\n      platform: Platform.OS\n    });\n    \n    // If we already have a base64 string, process it directly\n    if (typeof imageUri === 'string' && imageUri.startsWith('data:image')) {\n      // For base64 data URLs, use web-based compression if on web platform\n      if (Platform.OS === 'web') {\n        return compressWebBase64Image(imageUri, maxWidth, quality);\n      }\n      // On native, just return as is since we don't have image manipulation\n      return imageUri;\n    }\n    \n    // For mobile image URIs, we currently don't have a direct way to compress\n    // without expo-image-manipulator, so we'll just return the original URI\n    if (Platform.OS !== 'web' && imageUri) {\n      // In a production app, you'd want to implement native compression here\n      // using available libraries\n      debugLog('MBA5511: Native image compression not implemented - using original image');\n      return imageUri;\n    }\n    \n    // For web environment\n    if (Platform.OS === 'web') {\n      return compressWebImage(imageUri, maxWidth, quality);\n    }\n    \n    // Return original if we can't compress\n    return imageUri;\n  } catch (error) {\n    debugLog('MBA5511: Error compressing image:', error);\n    // Return original image if compression fails\n    return imageUri;\n  }\n};\n\n/**\n * Helper function to compress a web image\n * @param {string} imageUri - Image URI or URL\n * @param {number} maxWidth - Maximum width\n * @param {number} quality - Compression quality (0-1)\n * @returns {Promise<string>} - Compressed image as data URL\n */\nconst compressWebImage = (imageUri, maxWidth, quality) => {\n  return new Promise((resolve, reject) => {\n    // Only perform canvas operations on web platform\n    if (Platform.OS !== 'web') {\n      debugLog('MBA5511: Canvas compression not available on mobile platform, returning original image');\n      resolve(imageUri);\n      return;\n    }\n\n    // Check if required web APIs are available\n    if (typeof document === 'undefined' || typeof Image === 'undefined') {\n      debugLog('MBA5511: Web APIs not available, returning original image');\n      resolve(imageUri);\n      return;\n    }\n\n    const img = new Image();\n    img.crossOrigin = 'Anonymous'; // Help with CORS issues\n    img.src = imageUri;\n    \n    img.onload = () => {\n      try {\n        // Calculate new dimensions\n        let width = img.width;\n        let height = img.height;\n        \n        // For very large images, use more aggressive resizing\n        if (width > 3000 || height > 3000) {\n          // Extra compression for extremely large images\n          maxWidth = Math.min(maxWidth, 600);\n          quality = Math.min(quality, 0.4);\n          debugLog('MBA5511: Extra compression applied for very large image', {\n            originalWidth: width,\n            originalHeight: height,\n            newMaxWidth: maxWidth,\n            newQuality: quality\n          });\n        }\n        \n        if (width > maxWidth) {\n          const ratio = maxWidth / width;\n          width = maxWidth;\n          height = height * ratio;\n        }\n        \n        // Skip compression for small images\n        if (width < maxWidth && (width * height < 250000)) { // less than ~0.25MP\n          debugLog('MBA5511: Image already small enough, skipping compression');\n          resolve(imageUri);\n          return;\n        }\n        \n        // Create canvas with appropriate size\n        const canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        \n        // Draw image to canvas with resizing\n        const ctx = canvas.getContext('2d');\n        \n        // For better quality, use a 2-step process for large downsampling\n        if (img.width > width * 2) {\n          // Create an intermediate canvas at half size\n          const tempCanvas = document.createElement('canvas');\n          const tempCtx = tempCanvas.getContext('2d');\n          const tempWidth = Math.min(img.width, width * 2);\n          const tempHeight = (tempWidth / img.width) * img.height;\n          \n          tempCanvas.width = tempWidth;\n          tempCanvas.height = tempHeight;\n          \n          // First downsample\n          tempCtx.drawImage(img, 0, 0, tempWidth, tempHeight);\n          \n          // Then final resize\n          ctx.drawImage(tempCanvas, 0, 0, width, height);\n        } else {\n          // Direct resize for smaller downsampling\n          ctx.drawImage(img, 0, 0, width, height);\n        }\n        \n        // Convert to base64 with the specified quality\n        const compressedDataUrl = canvas.toDataURL('image/jpeg', quality);\n        \n        debugLog('MBA5511: Image compressed successfully', {\n          originalDimensions: `${img.width}x${img.height}`,\n          newDimensions: `${width}x${height}`,\n          quality: quality,\n          sizeReduction: imageUri.length > 0 ? \n            ((1 - (compressedDataUrl.length / imageUri.length)) * 100).toFixed(2) + '%' : \n            'unknown'\n        });\n        \n        resolve(compressedDataUrl);\n      } catch (err) {\n        debugLog('MBA5511: Error in canvas compression:', err);\n        resolve(imageUri); // Fall back to original\n      }\n    };\n    \n    img.onerror = (error) => {\n      debugLog('MBA5511: Image loading error:', error);\n      resolve(imageUri); // Fall back to original\n    };\n  });\n};\n\n/**\n * Helper function to compress a base64 image on web\n * @param {string} base64Data - Base64 image data URL\n * @param {number} maxWidth - Maximum width\n * @param {number} quality - Compression quality (0-1)\n * @returns {Promise<string>} - Compressed image as data URL\n */\nconst compressWebBase64Image = (base64Data, maxWidth, quality) => {\n  return new Promise((resolve, reject) => {\n    // Only perform canvas operations on web platform\n    if (Platform.OS !== 'web') {\n      debugLog('MBA5511: Canvas compression not available on mobile platform, returning original base64');\n      resolve(base64Data);\n      return;\n    }\n\n    // Check if required web APIs are available\n    if (typeof document === 'undefined' || typeof Image === 'undefined') {\n      debugLog('MBA5511: Web APIs not available, returning original base64');\n      resolve(base64Data);\n      return;\n    }\n\n    const img = new Image();\n    img.src = base64Data;\n    \n    img.onload = () => {\n      try {\n        // Calculate new dimensions\n        let width = img.width;\n        let height = img.height;\n        \n        // For very large images, use more aggressive resizing\n        if (width > 3000 || height > 3000) {\n          // Extra compression for extremely large images\n          maxWidth = Math.min(maxWidth, 600);\n          quality = Math.min(quality, 0.4);\n          debugLog('MBA5511: Extra compression applied for very large image', {\n            originalWidth: width,\n            originalHeight: height,\n            newMaxWidth: maxWidth,\n            newQuality: quality\n          });\n        }\n        \n        if (width > maxWidth) {\n          const ratio = maxWidth / width;\n          width = maxWidth;\n          height = height * ratio;\n        }\n        \n        // Skip compression for small images\n        if (width < maxWidth && (width * height < 250000)) { // less than ~0.25MP\n          debugLog('MBA5511: Base64 image already small enough, skipping compression');\n          resolve(base64Data);\n          return;\n        }\n        \n        // Create canvas with appropriate size\n        const canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        \n        // Draw image to canvas with resizing\n        const ctx = canvas.getContext('2d');\n        \n        // For better quality, use a 2-step process for large downsampling\n        if (img.width > width * 2) {\n          // Create an intermediate canvas at half size\n          const tempCanvas = document.createElement('canvas');\n          const tempCtx = tempCanvas.getContext('2d');\n          const tempWidth = Math.min(img.width, width * 2);\n          const tempHeight = (tempWidth / img.width) * img.height;\n          \n          tempCanvas.width = tempWidth;\n          tempCanvas.height = tempHeight;\n          \n          // First downsample\n          tempCtx.drawImage(img, 0, 0, tempWidth, tempHeight);\n          \n          // Then final resize\n          ctx.drawImage(tempCanvas, 0, 0, width, height);\n        } else {\n          // Direct resize for smaller downsampling\n          ctx.drawImage(img, 0, 0, width, height);\n        }\n        \n        // Convert to base64 with the specified quality\n        const compressedDataUrl = canvas.toDataURL('image/jpeg', quality);\n        \n        debugLog('MBA5511: Base64 image compressed successfully', {\n          originalDimensions: `${img.width}x${img.height}`,\n          newDimensions: `${width}x${height}`,\n          quality: quality,\n          sizeReduction: base64Data.length > 0 ? \n            ((1 - (compressedDataUrl.length / base64Data.length)) * 100).toFixed(2) + '%' : \n            'unknown'\n        });\n        \n        resolve(compressedDataUrl);\n      } catch (err) {\n        debugLog('MBA5511: Error in canvas compression:', err);\n        resolve(base64Data); // Fall back to original\n      }\n    };\n    \n    img.onerror = (error) => {\n      debugLog('MBA5511: Base64 image loading error:', error);\n      resolve(base64Data); // Fall back to original\n    };\n  });\n};\n\n/**\n * Upload and send images in a single message using a direct approach with FormData\n * @param {string|number} conversationId - The conversation ID\n * @param {Array<File|Blob|string>} images - Array of image files, blobs, or base64 strings\n * @param {string} caption - Optional caption to include with the images\n * @returns {Promise<Object>} - Object containing message data including image_urls\n */\nexport const uploadAndSendImageMessage = async (conversationId, images, caption = '') => {\n  try {\n    debugLog('MBA5511: Uploading and sending image message directly:', {\n      conversationId,\n      imageCount: images.length,\n      hasCaption: !!caption?.trim().length\n    });\n    \n    if (!images || images.length === 0) {\n      throw new Error('No images provided for upload');\n    }\n    \n    // Determine total image size to set compression level\n    const totalEstimatedSize = images.reduce((sum, img) => {\n      if (img.base64) {\n        // base64 size is roughly 4/3 of the raw data\n        return sum + (img.base64.length * 0.75);\n      } else if (img.size) {\n        return sum + img.size;\n      }\n      // Assume 1MB if unknown\n      return sum + 1000000;\n    }, 0);\n    \n    // Set compression parameters based on total size\n    let maxWidth = 1024;  // Default for small images\n    let quality = 0.7;    // Default quality\n    \n    // Adjust based on total size\n    if (totalEstimatedSize > 4 * 1024 * 1024) {\n      // For large uploads (>4MB), use aggressive compression\n      maxWidth = 800;\n      quality = 0.5;\n    } else if (totalEstimatedSize > 2 * 1024 * 1024) {\n      // For medium uploads (>2MB), use moderate compression\n      maxWidth = 1024;\n      quality = 0.6;\n    }\n    \n    debugLog('MBA5511: Compression settings:', {\n      totalEstimatedSizeMB: (totalEstimatedSize / (1024 * 1024)).toFixed(2) + 'MB',\n      maxWidth,\n      quality\n    });\n    \n    // Prepare images array for sending, with compression\n    const processedImages = await Promise.all(images.map(async (image) => {\n      let imageSource;\n      \n      if (image.base64) {\n        imageSource = `data:image/jpeg;base64,${image.base64}`;\n      } else if (image.uri) {\n        imageSource = image.uri;\n      } else {\n        imageSource = image;\n      }\n      \n      // Compress the image before sending\n      return await compressImage(imageSource, maxWidth, quality);\n    }));\n    \n    debugLog('MBA5511: Images compressed and ready for upload', {\n      imageCount: processedImages.length\n    });\n    \n    // Send a single request with all compressed images\n    const response = await axios.post(\n      `${API_BASE_URL}/api/messages/v1/upload_and_send/`,\n      {\n        conversation_id: conversationId,\n        content: caption || '',\n        images: processedImages\n      }\n    );\n    \n    debugLog('MBA5511: Image message uploaded and sent successfully:', {\n      messageId: response.data.message_id,\n      imageCount: images.length,\n      hasCaption: !!caption\n    });\n    \n    // Create a message object that can be directly added to the UI\n    const messageObject = {\n      message_id: response.data.message_id,\n      content: caption || '',\n      sent_by_other_user: false,\n      timestamp: new Date().toISOString(),\n      type_of_message: 'image_message',\n      status: 'sent',\n      is_clickable: false,\n      image_urls: response.data.image_urls || [],\n      metadata: {\n        image_urls: response.data.image_urls || []\n      }\n    };\n    \n    return messageObject;\n  } catch (error) {\n    debugLog('MBA5511: Error uploading and sending image message:', error);\n    throw error;\n  }\n};\n\n/**\n * Upload multiple images in a single message (previous implementation)\n * @param {string|number} conversationId - The conversation ID\n * @param {Array<File|Blob|string>} images - Array of image files, blobs, or base64 strings\n * @param {string} caption - Optional caption to include with the images\n * @returns {Promise<Object>} - Object containing image_urls and message_id\n * @deprecated Use uploadAndSendImageMessage instead\n */\nexport const sendImageMessage = async (conversationId, images, caption = '') => {\n  // Just call the new function\n  return uploadAndSendImageMessage(conversationId, images, caption);\n};\n\n/**\n * Mark a booking as completed\n * @param {string|number} bookingId - ID of the booking to mark as completed\n * @returns {Promise<Object>} - Response from the API\n */\nexport const markBookingCompleted = async (bookingId) => {\n  try {\n    debugLog('MBA8675309: Marking booking as completed:', bookingId);\n    \n    const response = await axios.post(\n      `${API_BASE_URL}/api/bookings/v1/${bookingId}/mark_completed/`,\n      {} // Empty body since we don't need to send any data\n    );\n    \n    debugLog('MBA8675309: Booking marked as completed successfully');\n    return response.data;\n  } catch (error) {\n    debugLog('MBA8675309: Error marking booking as completed:', error);\n    debugLog('MBA8675309: Error details:', error.response?.data || error.message);\n    throw error;\n  }\n};\n\n/**\n * Send a text message to a conversation\n * @param {string|number} conversationId - The conversation ID\n * @param {string} content - The message text content\n * @returns {Promise<Object>} - Response containing message data\n */\nexport const sendTextMessage = async (conversationId, content) => {\n  try {\n    debugLog('MBA5511: Sending text message:', {\n      conversationId,\n      contentLength: content?.length || 0\n    });\n    \n    const response = await axios.post(\n      `${API_BASE_URL}/api/messages/v1/send_norm_message/`,\n      {\n        conversation_id: conversationId,\n        content: content.trim()\n      }\n    );\n    \n    debugLog('MBA5511: Text message sent successfully');\n    return response.data;\n  } catch (error) {\n    debugLog('MBA5511: Error sending text message:', error);\n    debugLog('MBA5511: Error details:', error.response?.data || error.message);\n    throw error;\n  }\n};\n\n/**\n * Submit a review for a booking\n * @param {object} reviewData - The review data\n * @param {string|number} reviewData.bookingId - ID of the booking to review\n * @param {number} reviewData.rating - Star rating (1-5)\n * @param {string} reviewData.reviewText - Review text content\n * @param {boolean} reviewData.isProfessional - Whether the reviewer is a professional\n * @returns {Promise<Object>} - Response from the API\n */\nexport const submitBookingReview = async (reviewData) => {\n  try {\n    debugLog('MBA8675309: Submitting booking review:', reviewData);\n    \n    const response = await axios.post(\n      `${API_BASE_URL}/api/bookings/v1/${reviewData.bookingId}/review/`,\n      {\n        rating: reviewData.rating,\n        review_text: reviewData.reviewText,\n        is_professional_review: reviewData.isProfessional\n      }\n    );\n    \n    debugLog('MBA8675309: Review submitted successfully:', response.data);\n    return response.data;\n  } catch (error) {\n    debugLog('MBA8675309: Error submitting review:', error);\n    debugLog('MBA8675309: Error details:', error.response?.data || error.message);\n    throw error;\n  }\n};\n\n/**\n * Get reviews for a user based on conversation ID\n * \n * @param {string|number} conversationId - The ID of the conversation\n * @param {boolean} isProfessional - Whether the current user is a professional (true) or client (false)\n * @returns {Promise<Object>} - Object containing reviews, average rating, and review count\n */\nexport const getUserReviews = async (conversationId = null, professionalId = null, isProfessional = false) => {\n  try {\n    debugLog('MBA387c439h', 'Fetching user reviews for conversation:', conversationId, 'isProfessional:', isProfessional);\n    \n    // Make sure conversationId is provided\n    if (!conversationId) {\n      debugLog('MBA387c439h', 'No conversation_id provided to getUserReviews');\n      if (!professionalId) {\n        throw new Error('No conversation_id or professional_id provided');\n      }\n    }\n    \n    const response = await axios.get(`${API_BASE_URL}/api/reviews/v1/get-user-reviews/`, {\n      params: {\n        conversation_id: conversationId,\n        professional_id: professionalId,\n        is_professional: isProfessional ? 1 : 0\n      }\n    });\n    \n    debugLog('MBA387c439h', 'User reviews fetched successfully:', response.data);\n    return response.data;\n  } catch (error) {\n    debugLog('MBA387c439h', 'Error fetching user reviews:', error.response?.data || error.message);\n    throw error;\n  }\n};\n\n","import React, { useState, useContext, useEffect, useRef } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, Dimensions, Platform, SafeAreaView, Image } from 'react-native';\nimport { MaterialCommunityIcons, MaterialIcons } from '@expo/vector-icons';\nimport { theme } from '../styles/theme';\nimport { AuthContext, debugLog, getStorage, setStorage } from '../context/AuthContext';\nimport MessageNotificationContext from '../context/MessageNotificationContext';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { Appbar, Menu, useTheme, Avatar } from 'react-native-paper';\nimport { useNavigation as useReactNavigation, useRoute } from '@react-navigation/native';\nimport { BackHandler } from 'react-native';\nimport Animated, { useSharedValue, useAnimatedStyle, withTiming, interpolate } from 'react-native-reanimated';\nimport platformNavigation from '../utils/platformNavigation';\n\n/*\n * IMPORTANT ARCHITECTURE NOTE:\n * \n * This Navigation component uses a specific architecture to prevent React hooks errors:\n * \n * 1. The main Navigation component is a thin wrapper that:\n *    - Handles the conditional visibility logic (shouldHideNavigation)\n *    - Renders the NavigationContent with a shouldRender prop\n * \n * 2. The NavigationContent component contains all the hooks and UI rendering:\n *    - ALL hooks are called unconditionally at the top of the component\n *    - We check shouldRender AFTER all hooks have been called\n *    - This ensures React's rules of hooks are followed (same hooks in same order every render)\n * \n * If you modify this file, ensure that:\n * - You don't add any conditional hooks (hooks inside if statements or early returns)\n * - All hooks are called at the top of the component, before any conditional returns\n * - You maintain the parent/child structure to prevent hooks errors\n */\n\nlet previousRoute, currentRoute;\n\nexport const handleBack = async (navigation) => {\n  try {\n    const previousRoute = await getStorage('previousRoute');\n    const currentRoute = await getStorage('currentRoute');\n    \n    // If we have a valid previous route, navigate to it\n    if (previousRoute && previousRoute !== currentRoute) {\n      debugLog('MBA6789: handleBack - navigating to previous route', { \n        from: currentRoute, \n        to: previousRoute \n      });\n      \n      // Use platform-aware navigation\n      const success = platformNavigation.goBack(navigation);\n      if (success) {\n        await setStorage('currentRoute', previousRoute);\n      }\n      \n      return success;\n    } else {\n      // If no previous route, go to Dashboard as fallback\n      if (currentRoute !== 'Dashboard') {\n        debugLog('MBA6789: handleBack - no previous route, going to Dashboard', { \n          from: currentRoute \n        });\n        platformNavigation.navigateTo(navigation, 'Dashboard');\n        await setStorage('currentRoute', 'Dashboard');\n        return true;\n      }\n    }\n    \n    return false;\n  } catch (error) {\n    debugLog('MBA6789: handleBack - error', error);\n    return false;\n  }\n};\n\nexport const navigateToFrom = async (navigation, toLocation, fromLocation, params = {}) => {\n  try {\n    // Store current route as previous before navigation\n    const currentRoute = await getStorage('currentRoute');\n    await setStorage('previousRoute', currentRoute);\n    \n    // Special handling for MyProfile screen\n    if (toLocation === 'MyProfile') {\n      const activeTab = await getStorage('MyProfileActiveTab');\n      if (activeTab) {\n        params.initialTab = activeTab;\n      }\n    }\n    \n    // Get current route information using platform navigation\n    const currentRouteInfo = platformNavigation.getCurrentRoute(navigation);\n    \n    // Only log if we're not already at the route to reduce spam\n    if (currentRouteInfo.name !== toLocation || currentRoute !== toLocation) {\n      debugLog('MBAuieo2o34nf navigateToFrom - current route check', {\n        currentRouteName: currentRouteInfo.name,\n        currentPath: currentRouteInfo.path,\n        navigatingTo: toLocation\n      });\n    }\n    \n    // If we're already on this route according to the current info but not our state, just update state\n    if (currentRouteInfo.name === toLocation && currentRoute !== toLocation) {\n      await setStorage('currentRoute', toLocation);\n      debugLog('MBAuieo2o34nf navigateToFrom - only updating state, already at route', {\n        toLocation,\n        currentRouteName: currentRouteInfo.name\n      });\n      return;\n    }\n    \n    // Navigate to the new screen using platform navigation\n    platformNavigation.navigateTo(navigation, toLocation, params);\n    \n    // Update current route in storage\n    await setStorage('currentRoute', toLocation);\n    \n    // Only log if we're actually changing routes\n    if (currentRoute !== toLocation) {\n      debugLog('MBAuieo2o34nf navigateToFrom - navigation complete', {\n        from: fromLocation,\n        to: toLocation,\n        params,\n        previousRoute: currentRoute,\n        newCurrentRoute: toLocation,\n        currentPath: currentRouteInfo.path\n      });\n    }\n  } catch (error) {\n    debugLog('MBAuieo2o34nf navigateToFrom - error', error);\n  }\n};\n\nconst useReactRoute = () => {\n  try {\n    // Try to get the current route, but return a safe fallback if it fails\n    const route = useRoute();\n    return route || { name: '', params: {}, key: '' };\n  } catch (e) {\n    // If we're in a context where useRoute doesn't work, return a safe object\n    return { name: '', params: {}, key: '' };\n  }\n};\n\n// Create a separate component for NavigationContent to prevent conditional hooks\nconst NavigationContent = ({ \n  propState, \n  descriptors, \n  propNavigation, \n  shouldRender = true\n}) => {\n  // All hooks are used here unconditionally\n  const reactNavigation = useReactNavigation();\n  const reactRoute = useReactRoute();\n  const navigation = propNavigation || reactNavigation;\n  const [visible, setVisible] = useState(false);\n  const [isMobile, setIsMobile] = useState(Dimensions.get('window').width < 900);\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const [currentRoute, setCurrentRoute] = useState('');\n  const [notificationCount, setNotificationCount] = useState(3);\n  const { colors } = useTheme();\n  const { \n    isSignedIn, \n    is_DEBUG, \n    userRole, \n    isCollapsed, \n    setIsCollapsed, \n    switchRole, \n    screenWidth, \n    signOut,\n    isApprovedProfessional\n  } = useContext(AuthContext);\n  \n  // Add render counter for debugging\n  const renderCountRef = useRef(0);\n  useEffect(() => {\n    renderCountRef.current += 1;\n  });\n  \n  // Get message notification state\n  const {\n    hasUnreadMessages,\n    unreadCount,\n    ownerUnreadCount,\n    professionalUnreadCount,\n    getCurrentRoleUnreadCount,\n    getOtherRoleUnreadCount,\n    hasCurrentRoleUnreadMessages,\n    resetNotifications,\n    updateRoute\n  } = useContext(MessageNotificationContext);\n  \n  // Add a notification state update effect when the notification context changes\n  useEffect(() => {\n    debugLog('MBA3uiobv59u: Navigation received notification update:', {\n      hasUnreadMessages,\n      unreadCount,\n      ownerUnreadCount,\n      professionalUnreadCount,\n      userRole,\n      currentRoute\n    });\n\n    // Force update display of notifications on role change or when notification state changes\n  }, [hasUnreadMessages, unreadCount, ownerUnreadCount, professionalUnreadCount, userRole]);\n  \n  // Animation values for hamburger menu\n  const line1Rotation = useSharedValue(0);\n  const line2Opacity = useSharedValue(1);\n  const line3Rotation = useSharedValue(0);\n  const line1TranslateY = useSharedValue(0);\n  const line3TranslateY = useSharedValue(0);\n  \n  // Create a synthetic state object\n  const routeFromProps = propState?.routes?.[propState?.index];\n  const routeFromHook = reactRoute;\n  \n  const routeName = routeFromProps?.name || routeFromHook?.name || '';\n  const selectedConversation = \n    routeFromProps?.params?.selectedConversation || \n    routeFromHook?.params?.selectedConversation;\n    \n  const effectiveState = propState || {\n    routes: routeFromHook ? [routeFromHook] : [],\n    index: routeFromHook ? 0 : -1\n  };\n  \n  const isInMessageHistory = routeName === 'MessageHistory';\n  \n  // Update animation when menu state changes\n  useEffect(() => {\n    animateHamburgerMenu(isMenuOpen);\n  }, [isMenuOpen]);\n  \n  // Only log on the first render or when these values change to reduce console spam\n  const renderLogRef = useRef({ routeName, isInMessageHistory, selectedConversation, screenWidth });\n  const shouldLog = \n    renderLogRef.current.routeName !== routeName || \n    renderLogRef.current.isInMessageHistory !== isInMessageHistory ||\n    renderLogRef.current.selectedConversation !== selectedConversation ||\n    renderLogRef.current.screenWidth !== screenWidth;\n    \n  if (shouldLog) {\n    renderLogRef.current = { routeName, isInMessageHistory, selectedConversation, screenWidth };\n    // Debug log all relevant conditions for visibility\n    debugLog('MBAo3hi4g4v: Navigation render conditions', { \n      routeName,\n      isInMessageHistory,\n      selectedConversation,\n      screenWidth,\n      platform: Platform.OS,\n      route: JSON.stringify(reactRoute?.params || propState?.routes?.[propState?.index]?.params),\n      stateSource: propState ? 'props' : 'hook',\n      navSource: propNavigation ? 'props' : 'hook'\n    });\n  }\n  \n  // Add effect to log state changes\n  useEffect(() => {\n    if (is_DEBUG) {\n      console.log('MBA98386196v Navigation State Update:', {\n        isSignedIn,\n        userRole,\n        isApprovedProfessional,\n        currentRoute\n      });\n    }\n  }, [isSignedIn, userRole, isApprovedProfessional, currentRoute, is_DEBUG]);\n  \n  // Add logging for message notifications on state change\n  useEffect(() => {\n    // Only log if there are unread messages to reduce noise\n    if (hasUnreadMessages) {\n      debugLog('MBA2o3uihf48hv: Navigation notification state changed', {\n        hasUnreadMessages,\n        unreadCount,\n        currentRoute,\n        isInMessageHistory: currentRoute === 'MessageHistory',\n        selectedConversationId: typeof window !== 'undefined' ? window.selectedConversationId : null\n      });\n    }\n  }, [hasUnreadMessages, unreadCount, currentRoute]);\n  \n  useEffect(() => {\n    const updateLayout = () => {\n      setIsMobile(Dimensions.get('window').width < 900);\n    };\n\n    const subscription = Dimensions.addEventListener('change', updateLayout);\n\n    return () => {\n      subscription?.remove();\n    };\n  }, []);\n\n  // Helper function to check and reset conversation notifications if needed\n  const checkAndResetConversationNotifications = () => {\n    // Only run if we're on the MessageHistory screen\n    if (currentRoute === 'MessageHistory') {\n      // Check for selected conversation ID\n      const selectedConvId = (typeof window !== 'undefined') ? window.selectedConversationId : null;\n      \n      if (selectedConvId) {\n        debugLog('MBA2o3uihf48hv: Checking if notifications need reset for selected conversation', {\n          selectedConvId,\n          currentRoute,\n          hasUnreadMessages,\n          unreadCount\n        });\n        \n        // When running resetNotifications from navigation, we need to make sure\n        // we're not accumulating extra counts that don't exist in the real state\n        if (hasUnreadMessages || unreadCount > 0) {\n          // Reset notifications for this conversation - call even if hasUnreadMessages is false\n          // to ensure any conversation-specific notifications are cleared\n          resetNotifications && resetNotifications(currentRoute, selectedConvId);\n        }\n      }\n    }\n  };\n  \n  // Add effect to reset conversation notifications when selectedConversationId changes\n  useEffect(() => {\n    if (typeof window !== 'undefined' && window.selectedConversationId) {\n      checkAndResetConversationNotifications();\n    }\n  }, [currentRoute, hasUnreadMessages]); // Removed unreadCount from dependencies to avoid infinite loops\n\n  // Add a websocket-focused effect to ensure notifications are correctly synced\n  useEffect(() => {\n    // Log the current notification state when it changes\n    debugLog('MBA2o3uihf48hv: Navigation notification state update', {\n      unreadCount,\n      hasUnreadMessages,\n      currentRoute,\n      userRole,\n      onMessagesScreen: currentRoute === 'MessageHistory',\n      selectedConversationId: typeof window !== 'undefined' ? window.selectedConversationId : null\n    });\n    \n    // Make sure that hasUnreadMessages and unreadCount are consistent\n    // unreadCount should be > 0 when hasUnreadMessages is true, and vice versa\n    if ((hasUnreadMessages && unreadCount === 0) || (!hasUnreadMessages && unreadCount > 0)) {\n      debugLog('MBA2o3uihf48hv: ⚠️ Inconsistent notification state detected', {\n        hasUnreadMessages,\n        unreadCount,\n        userRole\n      });\n    }\n    \n    // Store unread count for current role in sessionStorage to help with role switching\n    if (typeof window !== 'undefined' && typeof window.sessionStorage !== 'undefined') {\n      try {\n        const roleKey = `unreadCount_${userRole}`;\n        window.sessionStorage.setItem(roleKey, unreadCount.toString());\n        debugLog('MBA2o3uihf48hv: Stored unread count for role', {\n          role: userRole,\n          count: unreadCount\n        });\n      } catch (error) {\n        // Ignore storage errors\n      }\n    }\n    \n    // Only run the sync check if we're on the MessageHistory page \n    // and we have a selected conversation\n    if (currentRoute === 'MessageHistory' && \n        typeof window !== 'undefined' && \n        window.selectedConversationId) {\n      \n      // If we have a selected conversation but still show unread messages,\n      // we might need to mark that conversation as read\n      if (unreadCount > 0) {\n        // We should check if the unread messages are for the current conversation\n        checkAndResetConversationNotifications();\n      }\n    }\n  }, [unreadCount, hasUnreadMessages, currentRoute, userRole]);\n\n  useEffect(() => {\n    const updateCurrentRoute = async () => {\n      try {\n        // Get current route using platform navigation\n        const currentRouteInfo = platformNavigation.getCurrentRoute(navigation, reactRoute);\n        const urlRoute = currentRouteInfo.name;\n        \n        // Only log if the route is different from current route to reduce spam\n        if (urlRoute !== currentRoute) {\n          debugLog('MBA2o3uihf48hv: Route check', { \n            urlRoute, \n            currentRoute,\n            path: currentRouteInfo.path\n          });\n        }\n        \n        // If route info is different from current route, update it\n        if (urlRoute && urlRoute !== currentRoute) {\n          setCurrentRoute(urlRoute);\n          await setStorage('currentRoute', urlRoute);\n          \n          // Update message notification context with new route\n          updateRoute && updateRoute(urlRoute);\n          \n          // Only reset notifications when navigating to MessageHistory\n          if (urlRoute === 'MessageHistory' && hasUnreadMessages) {\n            // Check for a specific selected conversation ID from global variable (web only)\n            const selectedConvId = platformNavigation.isWeb() && typeof window !== 'undefined' \n              ? window.selectedConversationId \n              : null;\n            debugLog('MBA2o3uihf48hv: Navigation checking for selected conversation ID', { \n              selectedConvId, \n              hasUnreadMessages, \n              route: urlRoute \n            });\n            \n            // Pass the selected conversation ID if available\n            resetNotifications && resetNotifications(urlRoute, selectedConvId);\n          }\n          \n          debugLog('MBA2o3uihf48hv: Updated current route', { \n            urlRoute, \n            oldRoute: currentRoute,\n            hasUnreadMessages,\n            unreadCount\n          });\n          \n          return; // Skip checking localStorage if we've already updated from route info\n        }\n        \n        // Fall back to localStorage if route info didn't provide a different route\n        const route = await getStorage('currentRoute');\n        \n        // Only log in debug mode, not every time\n        if (is_DEBUG && route !== currentRoute) {\n          console.log('MBA98386196v Current Route Updated:', route);\n        }\n        \n        // Only update if the route has actually changed\n        if (route && route !== currentRoute) {\n          setCurrentRoute(route);\n          \n          // Update message notification context with new route\n          // Avoiding infinite loops by checking if the route changed\n          updateRoute && updateRoute(route);\n          \n          // Only reset notifications when navigating to MessageHistory\n          if (route === 'MessageHistory' && hasUnreadMessages) {\n            // Check for a specific selected conversation ID from global variable (web only)\n            const selectedConvId = platformNavigation.isWeb() && typeof window !== 'undefined' \n              ? window.selectedConversationId \n              : null;\n            debugLog('MBA2o3uihf48hv: Navigation checking for selected conversation ID from storage', { \n              selectedConvId, \n              hasUnreadMessages, \n              route \n            });\n            \n            // Pass the selected conversation ID if available\n            resetNotifications && resetNotifications(route, selectedConvId);\n          }\n          \n          debugLog('MBA2o3uihf48hv: Updated current route from storage', {\n            route,\n            oldRoute: currentRoute,\n            hasUnreadMessages,\n            unreadCount\n          });\n        }\n      } catch (error) {\n        console.error('Error updating current route:', error);\n      }\n    };\n\n    // Initial update\n    updateCurrentRoute();\n    \n    // Add navigation state listener with safety check\n    let unsubscribe = () => {};\n    if (navigation && typeof navigation.addListener === 'function') {\n      unsubscribe = navigation.addListener('state', updateCurrentRoute);\n    } else {\n      debugLog('MBA4477: Warning - navigation.addListener not available', { \n        navigationExists: !!navigation,\n        addListenerExists: navigation && typeof navigation.addListener === 'function'\n      });\n    }\n    \n    // Add platform-aware navigation listener for handling browser history changes\n    const removeNavigationListener = platformNavigation.addNavigationListener((routeInfo, event) => {\n      debugLog('MBA4477: Detected navigation change, updating route', {\n        routeName: routeInfo.name,\n        path: routeInfo.path\n      });\n      \n      // Force immediate update on navigation change\n      updateCurrentRoute();\n    });\n    \n    // Set up periodic route checking for web platform\n    let routeCheckInterval;\n    if (platformNavigation.isWeb() && typeof window !== 'undefined') {\n      // Store previous route check to avoid unnecessary updates\n      let lastCheckedRoute = currentRoute;\n      \n      routeCheckInterval = setInterval(() => {\n        const currentRouteInfo = platformNavigation.getCurrentRoute(navigation, reactRoute);\n        const urlRoute = currentRouteInfo.name;\n        \n        // Only update if something has changed\n        if (urlRoute !== lastCheckedRoute && urlRoute !== currentRoute) {\n          lastCheckedRoute = urlRoute;\n          updateCurrentRoute();\n        }\n      }, 5000); // Check every 5 seconds to reduce overhead even further\n    }\n    \n    return () => {\n      if (typeof unsubscribe === 'function') {\n        unsubscribe();\n      }\n      removeNavigationListener();\n      if (routeCheckInterval) {\n        clearInterval(routeCheckInterval);\n      }\n    };\n  }, [navigation, resetNotifications, updateRoute, hasUnreadMessages, currentRoute, reactRoute]);\n\n  // Animated hamburger menu component\n  const AnimatedHamburgerMenu = ({ size = 28, color = theme.colors.text }) => {\n    const line1Style = useAnimatedStyle(() => ({\n      width: size,\n      height: 3,\n      backgroundColor: color,\n      marginVertical: 2,\n      borderRadius: 1.5,\n      transform: [\n        { translateY: line1TranslateY.value },\n        { rotate: `${line1Rotation.value}deg` }\n      ],\n    }));\n\n    const line2Style = useAnimatedStyle(() => ({\n      width: size,\n      height: 3,\n      backgroundColor: color,\n      marginVertical: 2,\n      borderRadius: 1.5,\n      opacity: line2Opacity.value,\n    }));\n\n    const line3Style = useAnimatedStyle(() => ({\n      width: size,\n      height: 3,\n      backgroundColor: color,\n      marginVertical: 2,\n      borderRadius: 1.5,\n      transform: [\n        { translateY: line3TranslateY.value },\n        { rotate: `${line3Rotation.value}deg` }\n      ],\n    }));\n\n    return (\n      <View style={{ alignItems: 'center', justifyContent: 'center' }}>\n        <Animated.View style={line1Style} />\n        <Animated.View style={line2Style} />\n        <Animated.View style={line3Style} />\n      </View>\n    );\n  };\n  \n  // Component to show notification indicator for the other role\n  const OtherRoleNotificationIndicator = ({ roleToCheck, currentRole, style }) => {\n    // Get the unread count for the role we're checking\n    const roleCount = roleToCheck === 'professional' \n      ? professionalUnreadCount \n      : ownerUnreadCount;\n    \n    // Get if this is the currently active role\n    const isCurrentRole = userRole === roleToCheck;\n    \n    // Add debug log to track state updates for notifications\n    useEffect(() => {\n      debugLog('MBA3uiobv59u: OtherRoleNotificationIndicator update:', {\n        roleToCheck,\n        roleCount,\n        isCurrentRole,\n        currentUserRole: userRole,\n        ownerUnreadCount,\n        professionalUnreadCount\n      });\n    }, [roleCount, isCurrentRole, roleToCheck, userRole, ownerUnreadCount, professionalUnreadCount]);\n    \n    // Only show notification if:\n    // 1. This is not the current role (we're checking the other role)\n    // 2. There are unread messages for this role\n    if (isCurrentRole || roleCount === 0) return null;\n    \n    debugLog('MBA3uiobv59u: Rendering notification badge for role:', {\n      roleToCheck,\n      roleCount\n    });\n    \n    return (\n      <View style={[styles.roleNotificationBadge, style]}>\n        <Text style={styles.roleNotificationText}>{roleCount}</Text>\n      </View>\n    );\n  };\n  \n  // Include all the other helper functions from the original component\n  const animateHamburgerMenu = (toX) => {\n    const duration = 300;\n    \n    debugLog('MBA4477: Animating hamburger menu', { toX, isMenuOpen });\n    \n    if (toX) {\n      // Transform to X\n      line1Rotation.value = withTiming(45, { duration });\n      line2Opacity.value = withTiming(0, { duration });\n      line3Rotation.value = withTiming(-45, { duration });\n      line1TranslateY.value = withTiming(7, { duration });\n      line3TranslateY.value = withTiming(-7, { duration });\n    } else {\n      // Transform back to hamburger\n      line1Rotation.value = withTiming(0, { duration });\n      line2Opacity.value = withTiming(1, { duration });\n      line3Rotation.value = withTiming(0, { duration });\n      line1TranslateY.value = withTiming(0, { duration });\n      line3TranslateY.value = withTiming(0, { duration });\n    }\n  };\n\n  const openMenu = () => setVisible(true);\n  const closeMenu = () => setVisible(false);\n  const toggleMenu = () => setIsMenuOpen(!isMenuOpen);\n\n  const handleNavigation = (route, params = {}) => {\n    debugLog('MBA4477: Navigation handling', { route, currentRoute, params });\n    if (route === currentRoute && !params.source) {\n      return;\n    }\n    \n    // Close the menu when navigating\n    setIsMenuOpen(false);\n    closeMenu();\n    \n    // Use the navigation helpers\n    navigateToFrom(navigation, route, currentRoute, params);\n  };\n  \n  const handleRoleSwitch = async (role) => {\n    if (role !== userRole) {\n      await switchRole(role);\n    }\n  };\n  \n  const handleLogout = async () => {\n    setIsMenuOpen(false);\n    closeMenu();\n    await signOut();\n  };\n  \n  const renderMenuItems = () => {\n    let items = [];\n    let logoutItem = null;\n    \n    // Get current role notification count directly\n    const currentRoleCount = getCurrentRoleUnreadCount();\n    const hasCurrentRoleUnread = hasCurrentRoleUnreadMessages();\n    \n    // Add logging for notification state when rendering menu\n    debugLog('MBA3uiobv59u: Rendering menu items with notification state:', {\n      hasUnreadMessages,\n      unreadCount,\n      ownerUnreadCount,\n      professionalUnreadCount,\n      currentRoleCount,\n      hasCurrentRoleUnread,\n      userRole,\n      currentRoute\n    });\n    \n    if (!isSignedIn) {\n      // Signed-out menu items\n      items = [\n        { icon: 'login', label: 'Sign In', route: 'SignIn' },\n        { icon: 'account-plus-outline', label: 'Sign Up', route: 'SignUp' },\n        { icon: 'magnify', label: 'Search Pros', route: 'SearchProfessionalsListing' }\n      ];\n    } else if (userRole === 'professional') {\n      // Professional menu items in the specified order\n      items = [\n        { icon: 'view-dashboard-outline', label: 'Dashboard', route: 'Dashboard' },\n        { icon: 'message-text-outline', label: 'Messages', route: 'MessageHistory', notification: hasCurrentRoleUnread },\n        { icon: 'briefcase-outline', label: 'Services', route: 'ServiceManager' },\n        { icon: 'account-group-outline', label: 'Connections', route: 'Connections' },\n        { icon: 'account-outline', label: 'Profile', route: 'MyProfile' },\n        { icon: 'email-outline', label: 'Contact Us', route: 'ContactUs' }\n      ];\n      \n      // Store logout item separately\n      logoutItem = { icon: 'logout', label: 'Logout', route: 'logout', action: handleLogout };\n    } else {\n      // Pet Owner menu items in the specified order\n      items = [\n        { icon: 'view-dashboard-outline', label: 'Dashboard', route: 'Dashboard' },\n        { icon: 'message-text-outline', label: 'Messages', route: 'MessageHistory', notification: hasCurrentRoleUnread },\n        { icon: 'magnify', label: 'Search Pros', route: 'SearchProfessionalsListing' },\n        { icon: 'account-group-outline', label: 'Become Professional', route: 'ContactUs', params: { source: 'becomeProfessional' } },\n        { icon: 'account-outline', label: 'Profile', route: 'MyProfile' },\n        { icon: 'email-outline', label: 'Contact Us', route: 'ContactUs' }\n      ];\n      \n      // Store logout item separately\n      logoutItem = { icon: 'logout', label: 'Logout', route: 'logout', action: handleLogout };\n    }\n    \n    return {\n      menuItems: items.map((item, index) => (\n        <TouchableOpacity\n          key={index}\n          style={[\n            styles.sidebarItem,\n            currentRoute === item.route && styles.activeItem\n          ]}\n          onPress={() => item.action ? item.action() : handleNavigation(item.route, item.params)}\n        >\n          <MaterialCommunityIcons\n            name={item.icon}\n            size={24}\n            color={currentRoute === item.route ? theme.colors.primary : theme.colors.text}\n          />\n          <Text\n            style={[\n              styles.sidebarItemText,\n              {\n                color: currentRoute === item.route ? theme.colors.primary : theme.colors.text,\n                marginLeft: isCollapsed ? 0 : 12,\n                display: isCollapsed ? 'none' : 'flex',\n              }\n            ]}\n          >\n            {item.label}\n          </Text>\n          {/* Only show notification badge with count when there are unread messages FOR CURRENT ROLE */}\n          {item.route === 'MessageHistory' && currentRoleCount > 0 && (\n            <View style={styles.messageNotificationBadge}>\n              <Text style={styles.messageNotificationText}>\n                {currentRoleCount}\n              </Text>\n            </View>\n          )}\n          {/* We've replaced the old dot with the badge above */}\n        </TouchableOpacity>\n      )),\n      logoutItem\n    };\n  };\n  \n  const renderMobileMenuItems = () => {\n    let items = [];\n    \n    // Get current role notification count directly\n    const currentRoleCount = getCurrentRoleUnreadCount();\n    const hasCurrentRoleUnread = hasCurrentRoleUnreadMessages();\n    \n    debugLog('MBA3uiobv59u: Rendering mobile menu items:', {\n      currentRoleCount,\n      hasCurrentRoleUnread,\n      userRole\n    });\n    \n    if (!isSignedIn) {\n      // Signed-out menu items\n      items = [\n        { icon: 'login', label: 'Sign In', route: 'SignIn' },\n        { icon: 'account-plus-outline', label: 'Sign Up', route: 'SignUp' },\n        { icon: 'magnify', label: 'Search Pros', route: 'SearchProfessionalsListing' }\n      ];\n    } else if (userRole === 'professional') {\n      // Professional menu items in the specified order - keep logout in the menu for mobile\n      items = [\n        { icon: 'view-dashboard-outline', label: 'Dashboard', route: 'Dashboard' },\n        { icon: 'message-text-outline', label: 'Messages', route: 'MessageHistory', notification: hasCurrentRoleUnread, count: currentRoleCount },\n        { icon: 'briefcase-outline', label: 'Services', route: 'ServiceManager' },\n        { icon: 'account-group-outline', label: 'Connections', route: 'Connections' },\n        { icon: 'account-outline', label: 'Profile', route: 'MyProfile' },\n        { icon: 'email-outline', label: 'Contact Us', route: 'ContactUs' },\n        { icon: 'logout', label: 'Logout', route: 'logout', action: handleLogout }\n      ];\n    } else {\n      // Pet Owner menu items in the specified order - keep logout in the menu for mobile\n      items = [\n        { icon: 'view-dashboard-outline', label: 'Dashboard', route: 'Dashboard' },\n        { icon: 'message-text-outline', label: 'Messages', route: 'MessageHistory', notification: hasCurrentRoleUnread, count: currentRoleCount },\n        { icon: 'magnify', label: 'Search Pros', route: 'SearchProfessionalsListing' },\n        { icon: 'account-group-outline', label: 'Become Professional', route: 'ContactUs', params: { source: 'becomeProfessional' } },\n        { icon: 'account-outline', label: 'Profile', route: 'MyProfile' },\n        { icon: 'email-outline', label: 'Contact Us', route: 'ContactUs' },\n        { icon: 'logout', label: 'Logout', route: 'logout', action: handleLogout }\n      ];\n    }\n    \n    return (\n      <>\n        {/* Role Toggle for Mobile - Only show when signed in and approved professional */}\n        {isSignedIn && isApprovedProfessional && (\n          <View style={styles.mobileRoleToggleContainer}>\n            <Text style={styles.mobileRoleToggleTitle}>Your Role</Text>\n            <View style={styles.mobileRoleButtonsContainer}>\n              <TouchableOpacity\n                style={[\n                  styles.mobileRoleButton,\n                  userRole === 'petOwner' && styles.mobileRoleButtonActive\n                ]}\n                onPress={() => userRole !== 'owner' && handleRoleSwitch('owner')}\n              >\n                <Text\n                  style={[\n                    styles.mobileRoleButtonText,\n                    userRole === 'petOwner' && styles.mobileRoleButtonTextActive\n                  ]}\n                >\n                  Owner\n                </Text>\n                \n                {/* Notification indicator for pet owner role */}\n                {userRole !== 'petOwner' && ownerUnreadCount > 0 && (\n                  <View style={[styles.roleNotificationBadge, { top: -8, right: -8 }]}>\n                    <Text style={styles.roleNotificationText}>\n                      {ownerUnreadCount}\n                    </Text>\n                  </View>\n                )}\n              </TouchableOpacity>\n              <TouchableOpacity\n                style={[\n                  styles.mobileRoleButton,\n                  userRole === 'professional' && styles.mobileRoleButtonActive\n                ]}\n                onPress={() => userRole !== 'professional' && handleRoleSwitch('professional')}\n              >\n                <Text\n                  style={[\n                    styles.mobileRoleButtonText,\n                    userRole === 'professional' && styles.mobileRoleButtonTextActive\n                  ]}\n                >\n                  Professional\n                </Text>\n                \n                {/* Notification indicator for professional role */}\n                {userRole !== 'professional' && professionalUnreadCount > 0 && (\n                  <View style={[styles.roleNotificationBadge, { top: -8, right: -8 }]}>\n                    <Text style={styles.roleNotificationText}>\n                      {professionalUnreadCount}\n                    </Text>\n                  </View>\n                )}\n              </TouchableOpacity>\n            </View>\n          </View>\n        )}\n        \n        {/* Menu Items */}\n        {items.map((item, index) => (\n          <TouchableOpacity\n            key={index}\n            style={[\n              styles.mobileMenuItem,\n              item.route === 'logout' && styles.mobileLogoutItem\n            ]}\n            onPress={() => {\n              setIsMenuOpen(false);\n              item.action ? item.action() : handleNavigation(item.route, item.params);\n            }}\n          >\n            <MaterialCommunityIcons\n              name={item.icon}\n              size={24}\n              color={item.route === 'logout' ? '#F26969' : theme.colors.text}\n            />\n            <Text style={[\n              styles.mobileMenuItemText,\n              item.route === 'logout' && styles.mobileLogoutText\n            ]}>\n              {item.label}\n            </Text>\n            {/* Only show notification badge with count when there are unread messages FOR CURRENT ROLE */}\n            {item.route === 'MessageHistory' && currentRoleCount > 0 && (\n              <View style={styles.mobileMessageNotificationBadge}>\n                <Text style={styles.mobileMessageNotificationText}>{currentRoleCount}</Text>\n              </View>\n            )}\n          </TouchableOpacity>\n        ))}\n      </>\n    );\n  };\n  \n  const renderDesktopSidebar = () => {\n    const sidebarWidth = isCollapsed ? 72 : 250;\n    const { menuItems, logoutItem } = renderMenuItems();\n    \n    return (\n      <View style={[styles.sidebarContainer, { width: sidebarWidth }]}>\n        <View style={styles.sidebarLogoContainer}>\n          <TouchableOpacity\n            style={styles.logoButton}\n            onPress={() => handleNavigation('Home')}\n          >\n            <Image\n              source={require('../../assets/logo.png')}\n              style={[\n                styles.sidebarLogo,\n                { width: isCollapsed ? 40 : 120, tintColor: theme.colors.primary }\n              ]}\n            />\n          </TouchableOpacity>\n        </View>\n        \n        <TouchableOpacity\n          style={styles.collapseButton}\n          onPress={() => setIsCollapsed(!isCollapsed)}\n        >\n          <MaterialCommunityIcons\n            name={isCollapsed ? 'chevron-right' : 'chevron-left'}\n            size={24}\n            color={theme.colors.text}\n          />\n        </TouchableOpacity>\n        \n        <View style={styles.menuItemsContainer}>\n          {/* Role Toggle - Only show when signed in and approved professional */}\n          {isSignedIn && isApprovedProfessional && (\n            <View style={styles.roleToggleContainer}>\n              {!isCollapsed && (\n                <Text style={styles.roleToggleTitle}>Your Role</Text>\n              )}\n              <View style={styles.roleButtonsContainer}>\n                <TouchableOpacity\n                  style={[\n                    styles.roleButton,\n                    userRole === 'petOwner' && styles.roleButtonActive\n                  ]}\n                  onPress={() => handleRoleSwitch('petOwner')}\n                >\n                  <Text\n                    style={[\n                      styles.roleButtonText,\n                      userRole === 'petOwner' && styles.roleButtonTextActive,\n                      isCollapsed && styles.roleButtonTextCollapsed\n                    ]}\n                  >\n                    {isCollapsed ? 'O' : 'Owner'}\n                  </Text>\n                  \n                  {/* Notification indicator for pet owner role */}\n                  {userRole !== 'petOwner' && ownerUnreadCount > 0 && (\n                    <View style={[styles.roleNotificationBadge, { top: -8, right: -8 }]}>\n                      <Text style={styles.roleNotificationText}>\n                        {ownerUnreadCount}\n                      </Text>\n                    </View>\n                  )}\n                </TouchableOpacity>\n                <TouchableOpacity\n                  style={[\n                    styles.roleButton,\n                    userRole === 'professional' && styles.roleButtonActive\n                  ]}\n                  onPress={() => handleRoleSwitch('professional')}\n                >\n                  <Text\n                    style={[\n                      styles.roleButtonText,\n                      userRole === 'professional' && styles.roleButtonTextActive,\n                      isCollapsed && styles.roleButtonTextCollapsed\n                    ]}\n                  >\n                    {isCollapsed ? 'P' : 'Professional'}\n                  </Text>\n                  \n                  {/* Notification indicator for professional role */}\n                  {userRole !== 'professional' && professionalUnreadCount > 0 && (\n                    <View style={[styles.roleNotificationBadge, { top: -8, right: -8 }]}>\n                      <Text style={styles.roleNotificationText}>\n                        {professionalUnreadCount}\n                      </Text>\n                    </View>\n                  )}\n                </TouchableOpacity>\n              </View>\n            </View>\n          )}\n          \n          {menuItems}\n        </View>\n        \n        {/* Logout Button at the bottom */}\n        {isSignedIn && logoutItem && (\n          <View style={styles.logoutButtonContainer}>\n            <TouchableOpacity\n              style={styles.sidebarItem}\n              onPress={logoutItem.action}\n            >\n              <MaterialCommunityIcons\n                name={logoutItem.icon}\n                size={24}\n                color=\"#F26969\"\n              />\n              <Text\n                style={[\n                  styles.sidebarItemText,\n                  {\n                    color: '#F26969',\n                    marginLeft: isCollapsed ? 0 : 12,\n                    display: isCollapsed ? 'none' : 'flex',\n                  }\n                ]}\n              >\n                {logoutItem.label}\n              </Text>\n            </TouchableOpacity>\n          </View>\n        )}\n      </View>\n    );\n  };\n  \n  const renderMobileHeader = () => {\n    return (\n      <View style={[styles.mobileHeader, { backgroundColor: theme.colors.surfaceContrast }]}>\n        <View style={styles.mobileHeaderContent}>\n          <TouchableOpacity onPress={() => handleNavigation('Home')}>\n            <Image\n              source={require('../../assets/logo.png')}\n              style={[styles.mobileLogo, { width: 120, height: 40, tintColor: theme.colors.primary }]}\n            />\n          </TouchableOpacity>\n          \n          <View style={styles.mobileRightContent}>\n            <TouchableOpacity\n              style={styles.hamburgerMenuContainer}\n              onPress={toggleMenu}\n            >\n              <AnimatedHamburgerMenu size={24} color={theme.colors.text} />\n              {/* Add notification badge to hamburger menu for mobile */}\n              {isSignedIn && unreadCount > 0 && (\n                <View style={styles.hamburgerNotificationBadge}>\n                  <Text style={styles.hamburgerNotificationText}>{unreadCount}</Text>\n                </View>\n              )}\n            </TouchableOpacity>\n          </View>\n        </View>\n        \n        {isMenuOpen && (\n          <View style={styles.mobileMenu}>\n            {renderMobileMenuItems()}\n          </View>\n        )}\n      </View>\n    );\n  };\n  \n  const renderMobileNavBar = () => {\n    // Get current role notification count\n    const currentRoleCount = getCurrentRoleUnreadCount();\n    \n    // For mobile nav bar when signed out\n    if (!isSignedIn) {\n      return (\n        <SafeAreaView style={styles.customNavBar}>\n          <TouchableOpacity\n            style={styles.navButton}\n            onPress={() => handleNavigation('SignIn')}\n          >\n            <MaterialCommunityIcons\n              name=\"login\"\n              size={24}\n              color={currentRoute === 'SignIn' ? theme.colors.secondary : theme.colors.whiteText}\n            />\n            <Text style={[\n              styles.navText,\n              { color: currentRoute === 'SignIn' ? theme.colors.secondary : theme.colors.whiteText }\n            ]}>\n              Sign In\n            </Text>\n          </TouchableOpacity>\n          \n          <TouchableOpacity\n            style={styles.navButton}\n            onPress={() => handleNavigation('SignUp')}\n          >\n            <MaterialCommunityIcons\n              name=\"account-plus-outline\"\n              size={24}\n              color={currentRoute === 'SignUp' ? theme.colors.secondary : theme.colors.whiteText}\n            />\n            <Text style={[\n              styles.navText,\n              { color: currentRoute === 'SignUp' ? theme.colors.secondary : theme.colors.whiteText }\n            ]}>\n              Sign Up\n            </Text>\n          </TouchableOpacity>\n          \n          <TouchableOpacity\n            style={styles.navButton}\n            onPress={() => handleNavigation('SearchProfessionalsListing')}\n          >\n            <MaterialCommunityIcons\n              name=\"magnify\"\n              size={24}\n              color={currentRoute === 'SearchProfessionalsListing' ? theme.colors.secondary : theme.colors.whiteText}\n            />\n            <Text style={[\n              styles.navText,\n              { color: currentRoute === 'SearchProfessionalsListing' ? theme.colors.secondary : theme.colors.whiteText }\n            ]}>\n              Search\n            </Text>\n          </TouchableOpacity>\n        </SafeAreaView>\n      );\n    }\n    \n    return (\n      <SafeAreaView style={styles.customNavBar}>\n        <TouchableOpacity\n          style={styles.navButton}\n          onPress={() => handleNavigation(isSignedIn ? 'Dashboard' : 'SearchProfessionalsListing')}\n        >\n          <MaterialCommunityIcons\n            name={isSignedIn ? 'view-dashboard-outline' : 'magnify'}\n            size={24}\n            color={currentRoute === (isSignedIn ? 'Dashboard' : 'SearchProfessionalsListing') ? theme.colors.secondary : theme.colors.whiteText}\n          />\n          <Text style={[\n            styles.navText,\n            { color: currentRoute === (isSignedIn ? 'Dashboard' : 'SearchProfessionalsListing') ? theme.colors.secondary : theme.colors.whiteText }\n          ]}>\n            {isSignedIn ? 'Dashboard' : 'Search'}\n          </Text>\n        </TouchableOpacity>\n        \n        <TouchableOpacity\n          style={styles.navButton}\n          onPress={() => handleNavigation(isSignedIn ? 'SearchProfessionalsListing' : 'SignUp')}\n        >\n          <MaterialCommunityIcons\n            name={isSignedIn ? 'magnify' : 'account-plus-outline'}\n            size={24}\n            color={currentRoute === (isSignedIn ? 'SearchProfessionalsListing' : 'SignUp') ? theme.colors.secondary : theme.colors.whiteText}\n          />\n          <Text style={[\n            styles.navText,\n            { color: currentRoute === (isSignedIn ? 'SearchProfessionalsListing' : 'SignUp') ? theme.colors.secondary : theme.colors.whiteText }\n          ]}>\n            {isSignedIn ? 'Search' : 'Sign Up'}\n          </Text>\n        </TouchableOpacity>\n        \n        <TouchableOpacity\n          style={styles.navButton}\n          onPress={() => handleNavigation(isSignedIn ? (userRole === 'professional' ? 'ServiceManager' : 'PetManager') : 'SignIn')}\n        >\n          <MaterialCommunityIcons\n            name={isSignedIn ? 'paw' : 'login'}\n            size={24}\n            color={\n              currentRoute === (isSignedIn ? (userRole === 'professional' ? 'ServiceManager' : 'PetManager') : 'SignIn')\n                ? theme.colors.secondary\n                : theme.colors.whiteText\n            }\n          />\n          <Text style={[\n            styles.navText,\n            {\n              color: currentRoute === (isSignedIn ? (userRole === 'professional' ? 'ServiceManager' : 'PetManager') : 'SignIn')\n                ? theme.colors.secondary\n                : theme.colors.whiteText\n            }\n          ]}>\n            {isSignedIn ? (userRole === 'professional' ? 'Services' : 'Pets') : 'Sign In'}\n          </Text>\n        </TouchableOpacity>\n        \n        {isSignedIn && (\n          <>\n            <TouchableOpacity\n              style={styles.navButton}\n              onPress={() => handleNavigation('MessageHistory')}\n            >\n              <View style={{ position: 'relative' }}>\n                <MaterialCommunityIcons\n                  name=\"message-text-outline\"\n                  size={24}\n                  color={currentRoute === 'MessageHistory' ? theme.colors.secondary : theme.colors.whiteText}\n                />\n                {/* Only show notification badge with count when there are unread messages FOR CURRENT ROLE */}\n                {currentRoleCount > 0 && (\n                  <View style={styles.mobileMessageNotificationBadge}>\n                    <Text style={styles.mobileMessageNotificationText}>{currentRoleCount}</Text>\n                  </View>\n                )}\n              </View>\n              <Text style={[\n                styles.navText,\n                { color: currentRoute === 'MessageHistory' ? theme.colors.secondary : theme.colors.whiteText }\n              ]}>\n                Messages\n              </Text>\n            </TouchableOpacity>\n            \n            <TouchableOpacity\n              style={styles.navButton}\n              onPress={() => handleNavigation('MoreScreen')}\n            >\n              <MaterialCommunityIcons\n                name=\"dots-horizontal\"\n                size={24}\n                color={currentRoute === 'MoreScreen' ? theme.colors.secondary : theme.colors.whiteText}\n              />\n              <Text style={[\n                styles.navText,\n                { color: currentRoute === 'MoreScreen' ? theme.colors.secondary : theme.colors.whiteText }\n              ]}>\n                More\n              </Text>\n            </TouchableOpacity>\n          </>\n        )}\n      </SafeAreaView>\n    );\n  };\n  \n  // If we shouldn't render (for example when navigation should be hidden),\n  // we still need to return something to avoid React errors\n  // IMPORTANT: All hooks must be called BEFORE this check to ensure consistent hook order\n  if (!shouldRender) {\n    return null;\n  }\n  \n  // The return statement should be similar to the original component\n  return (\n    <>\n      {Platform.OS === 'web' ? (\n        <>\n          {!isMobile && isSignedIn && (\n            <View style={styles.navContainer}>\n              {renderDesktopSidebar()}\n            </View>\n          )}\n          {!isMobile && !isSignedIn && (\n            <View style={styles.signedOutHeaderWeb}>\n              <TouchableOpacity onPress={() => handleNavigation('Home')}>\n                <Image\n                  source={require('../../assets/logo.png')}\n                  style={[styles.webLogo, { tintColor: theme.colors.primary }]}\n                />\n              </TouchableOpacity>\n              <View style={styles.mobileRightContent}>\n                <TouchableOpacity\n                  style={styles.hamburgerMenuContainer}\n                  onPress={toggleMenu}\n                >\n                  <AnimatedHamburgerMenu size={24} color={theme.colors.text} />\n                </TouchableOpacity>\n              </View>\n            </View>\n          )}\n          {isMobile && renderMobileHeader()}\n          \n          {isMenuOpen && !isMobile && !isSignedIn && (\n            <View style={[styles.mobileMenu, styles.webDesktopMenu]}>\n              {renderMobileMenuItems()}\n            </View>\n          )}\n        </>\n      ) : (\n        <View style={styles.container}>\n          {renderMobileNavBar()}\n        </View>\n      )}\n    </>\n  );\n};\n\n// Main Navigation component - this is the one that gets exported\nexport default function Navigation(props) {\n  const { state: propState, descriptors, navigation: propNavigation } = props;\n  \n  // IMPORTANT: All hooks must be called here unconditionally\n  const reactRoute = useReactRoute();\n  const [shouldCheckMessageState, setShouldCheckMessageState] = useState(true);\n  const { screenWidth } = useContext(AuthContext);\n  \n  // Determine routeName and selectedConversation\n  const routeFromProps = propState?.routes?.[propState?.index];\n  const routeName = routeFromProps?.name || reactRoute?.name || '';\n  const selectedConversation = \n    routeFromProps?.params?.selectedConversation || \n    reactRoute?.params?.selectedConversation;\n  \n  const isInMessageHistory = routeName === 'MessageHistory';\n  \n  // IMPORTANT: React hooks rules require that hooks are called in the same order\n  // on every render. Never put hooks inside conditional blocks or early returns.\n  // For safety, we've moved all hooks to the top of the component.\n  \n  // On first render, we check if this is a page reload with URL params\n  // ALWAYS call hooks unconditionally to avoid React hooks errors\n  useEffect(() => {\n    // Only execute the effect logic if the conditions are met\n    if (Platform.OS === 'web' && isInMessageHistory && selectedConversation && screenWidth <= 900) {\n      // If URL has conversation params, wait for MessageHistory to set its state\n      const isPageReload = typeof performance !== 'undefined' && \n                         performance.navigation && \n                         performance.navigation.type === performance.navigation.TYPE_RELOAD;\n      \n      debugLog('MBAo3hi4g4v: Page load check', {\n        isPageReload: isPageReload || 'API not available',\n        hasURLParams: !!selectedConversation,\n        shouldCheckMessageState\n      });\n      \n      if (shouldCheckMessageState) {\n        // First render with URL params - don't hide navigation yet\n        setShouldCheckMessageState(false);\n      }\n    }\n  }, [isInMessageHistory, selectedConversation, screenWidth, shouldCheckMessageState]);\n  \n  // Check if we should hide navigation\n  // More robust check for selectedConversation to prevent falsy values from causing issues\n  const hasSelectedConversation = selectedConversation !== null && \n                                selectedConversation !== undefined && \n                                selectedConversation !== '' &&\n                                selectedConversation !== 'null';\n  \n  // For mobile platforms (iOS/Android), hide navigation when in MessageHistory with selected conversation\n  const isMobilePlatform = Platform.OS === 'ios' || Platform.OS === 'android';\n  let shouldHideNavigation = false;\n  if (isMobilePlatform) {\n    shouldHideNavigation = isInMessageHistory && hasSelectedConversation;\n  } else {\n    shouldHideNavigation = isInMessageHistory && \n                           hasSelectedConversation && \n                           screenWidth <= 900 &&  \n                           !shouldCheckMessageState;\n  }\n  // const shouldHideNavigation = isInMessageHistory && \n  //                             hasSelectedConversation && \n  //                             isMobilePlatform ? isMobilePlatform : screenWidth <= 900 && !shouldCheckMessageState;\n  \n  // Log visibility state\n  debugLog('MBAo3hi4g4v: Navigation visibility check', { \n    routeName, \n    selectedConversation,\n    isMobilePlatform,\n    platformOS: Platform.OS,\n    shouldHideNavigation,\n    isInMessageHistory,\n    hasSelectedConversation, \n    shouldCheckMessageState\n  });\n  \n  // We ALWAYS render the NavigationContent component but control visibility\n  // via the shouldRender prop. This ensures hooks are always called in the same order.\n  return (\n    <NavigationContent \n      propState={propState}\n      descriptors={descriptors}\n      propNavigation={propNavigation}\n      shouldRender={!shouldHideNavigation}\n    />\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    display: 'flex',\n    // alignItems: 'center',\n    // justifyContent: 'center',\n    backgroundColor: theme.colors.primary,\n  },\n  content: {\n    flex: 1,\n  },\n  header: {\n    backgroundColor: theme.colors.primary,\n  },\n  titleContainer: {\n    justifyContent: 'center',\n  },\n  titleContainer2: {\n    flex: 1,\n    justifyContent: 'center',\n    flexDirection: 'row',\n    justifyContent: 'flex-start',\n  },\n  title: {\n    textAlign: 'left',\n    marginLeft: theme.spacing.medium,\n    fontSize: theme.fontSizes.large,\n    color: theme.colors.text,\n    fontWeight: 'bold',\n    fontFamily: theme.fonts.header.fontFamily,\n  },\n  desktopNav: {\n    flexDirection: 'row',\n    justifyContent: 'flex-end',\n    alignItems: 'center',\n  },\n  navItem: {\n    marginHorizontal: theme.spacing.medium,\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    cursor: 'pointer',\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n  },\n  customNavBar: {\n    flexDirection: 'row',\n    justifyContent: 'space-around',\n    alignItems: 'center',\n    backgroundColor: theme.colors.primary,\n    position: 'absolute',\n    bottom: 0,\n    left: 0,\n    right: 0,\n    paddingVertical: 10,\n    borderTopWidth: 1,\n    borderTopColor: theme.colors.border,\n  },\n  navButton: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: 60,\n    paddingHorizontal: 5,\n  },\n  navText: {\n    color: theme.colors.whiteText,\n    fontSize: theme.fontSizes.small,\n    marginTop: 5,\n    textAlign: 'center',\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n  },\n  webNavItem: {\n    marginHorizontal: theme.spacing.medium,\n  },\n  webNavText: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.whiteText,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n  },\n  navLinkContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginHorizontal: 6,\n  },\n  sidebarContainer: {\n    height: '100%',\n    minHeight: '100vh',\n    backgroundColor: theme.colors.surfaceContrast,\n    borderRightWidth: 0,\n    position: 'fixed',\n    left: 0,\n    top: 0,\n    bottom: 0,\n    zIndex: 1000,\n    display: 'flex',\n    flexDirection: 'column',\n    transition: 'width 0.3s ease',\n    borderTopRightRadius: 24,\n    borderBottomRightRadius: 24,\n  },\n  sidebarLogoContainer: {\n    padding: 16,\n    borderBottomWidth: 3,\n    borderBottomColor: theme.colors.surface,\n    alignItems: 'center',\n    backgroundColor: theme.colors.surfaceContrast,\n  },\n  logoButton: {\n    alignItems: 'center',\n  },\n  sidebarLogo: {\n    height: 50,\n    resizeMode: 'contain',\n  },\n  collapseButton: {\n    position: 'absolute',\n    right: -16,\n    top: '50%',\n    transform: [{ translateY: -20 }],\n    width: 32,\n    height: 40,\n    backgroundColor: theme.colors.surfaceContrast,\n    borderWidth: 0,\n    borderRadius: 8,\n    justifyContent: 'center',\n    alignItems: 'center',\n    zIndex: 1001,\n  },\n  menuItemsContainer: {\n    flex: 1,\n    padding: 16,\n    backgroundColor: theme.colors.surfaceContrast,\n  },\n  sidebarItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 12,\n    marginBottom: 8,\n    borderRadius: 8,\n    backgroundColor: 'transparent',\n    cursor: 'pointer',\n  },\n  sidebarItemText: {\n    marginLeft: 12,\n    fontSize: theme.fontSizes.medium,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '500',\n  },\n  logoutButton: {\n    width: '100%',\n    padding: 16,\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderTopWidth: 0,\n    backgroundColor: theme.colors.surfaceContrast,\n    borderBottomRightRadius: 24,\n  },\n  logoutText: {\n    marginLeft: 12,\n    fontSize: theme.fontSizes.medium,\n    color: '#F26969',\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '500',\n  },\n  headerRight: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 16,\n    marginRight: 16,\n  },\n  notificationButton: {\n    position: 'relative',\n    padding: 8,\n  },\n  notificationBadge: {\n    position: 'absolute',\n    top: 4,\n    right: 4,\n    backgroundColor: theme.colors.error,\n    borderRadius: 10,\n    minWidth: 20,\n    height: 20,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  notificationCount: {\n    color: theme.colors.whiteText,\n    fontSize: 12,\n    fontWeight: 'bold',\n  },\n  profileButton: {\n    borderRadius: 20,\n    overflow: 'hidden',\n  },\n  menuContent: {\n    marginTop: 45,\n  },\n  mobileHeader: {\n    width: '100%',\n    paddingVertical: 10,\n    paddingHorizontal: 20,\n    borderBottomWidth: 1,\n    borderBottomColor: 'rgba(255,255,255,0.1)',\n    position: 'relative',\n  },\n  mobileHeaderContent: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    width: '100%',\n  },\n  mobileLogo: {\n    resizeMode: 'contain',\n  },\n  mobileRightContent: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 15,\n  },\n  mobileMenu: {\n    position: 'absolute',\n    top: '100%',\n    right: 0,\n    backgroundColor: theme.colors.surface,\n    borderRadius: 8,\n    padding: 8,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5,\n    zIndex: 1000,\n    marginRight: 20, \n    minWidth: 250,\n  },\n  mobileMenuItem: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 12,\n    borderRadius: 8,\n  },\n  mobileMenuItemText: {\n    marginLeft: 12,\n    fontSize: 16,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n  },\n  profileContainer: {\n    width: 44,\n    height: 44,\n    borderRadius: 22,\n    overflow: 'hidden',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  iconButton: {\n    padding: 8,\n    position: 'relative',\n  },\n  notificationText: {\n    color: theme.colors.whiteText,\n    fontSize: 12,\n    fontWeight: 'bold',\n  },\n  navContainer: {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    bottom: 0,\n    zIndex: 1000,\n    backgroundColor: theme.colors.surface,\n    borderRightWidth: 1,\n    borderRightColor: theme.colors.border,\n  },\n  activeItem: {\n    backgroundColor: '#F0F9E5',\n  },\n  logoutItem: {\n    marginTop: 16,\n    borderTopWidth: 1,\n    borderTopColor: theme.colors.border,\n    paddingTop: 16,\n  },\n  roleToggleContainer: {\n    padding: 12,\n    marginBottom: 16,\n    borderRadius: 8,\n    backgroundColor: '#F0F9E5',\n  },\n  roleToggleTitle: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n    marginBottom: 8,\n  },\n  roleButtonsContainer: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n  roleButton: {\n    flex: 1,\n    padding: 8,\n    borderRadius: 6,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n    cursor: 'pointer',\n  },\n  roleButtonDisabled: {\n    opacity: 0.5,\n    borderColor: theme.colors.border,\n    cursor: 'not-allowed',\n  },\n  roleButtonText: {\n    fontSize: theme.fontSizes.small,\n    fontFamily: theme.fonts.regular.fontFamily,\n    color: theme.colors.primary,\n  },\n  roleButtonTextDisabled: {\n    color: theme.colors.border,\n  },\n  roleButtonActive: {\n    backgroundColor: theme.colors.primary,\n  },\n  roleButtonTextActive: {\n    color: theme.colors.surface,\n  },\n  mobileRoleToggleContainer: {\n    padding: 16,\n    marginBottom: 8,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  mobileRoleToggleTitle: {\n    fontSize: theme.fontSizes.medium,\n    color: theme.colors.text,\n    fontFamily: theme.fonts.regular.fontFamily,\n    fontWeight: '600',\n    marginBottom: 8,\n  },\n  mobileRoleButtonsContainer: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n  mobileRoleButton: {\n    flex: 1,\n    padding: 8,\n    borderRadius: 6,\n    alignItems: 'center',\n    justifyContent: 'center',\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n  },\n  mobileRoleButtonDisabled: {\n    opacity: 0.5,\n    borderColor: theme.colors.border,\n  },\n  mobileRoleButtonText: {\n    fontSize: theme.fontSizes.small,\n    fontFamily: theme.fonts.regular.fontFamily,\n    color: theme.colors.primary,\n  },\n  mobileRoleButtonTextDisabled: {\n    color: theme.colors.border,\n  },\n  mobileRoleButtonActive: {\n    backgroundColor: theme.colors.primary,\n  },\n  mobileRoleButtonTextActive: {\n    color: theme.colors.surface,\n  },\n  mobileLogoutItem: {\n    borderTopWidth: 1,\n    borderTopColor: theme.colors.border,\n    marginTop: 8,\n  },\n  mobileLogoutText: {\n    color: '#F26969',\n  },\n  messageNotificationDot: {\n    position: 'absolute',\n    top: '50%',\n    right: -2,\n    width: 10,\n    height: 10,\n    borderRadius: 5,\n    backgroundColor: theme.colors.error,\n    borderWidth: 1,\n    borderColor: theme.colors.surface,\n    transform: [{ translateY: -5 }],\n  },\n  \n  mobileMessageNotificationDot: {\n    position: 'absolute',\n    top: '50%',\n    right: -2,\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    backgroundColor: theme.colors.error,\n    borderWidth: 1,\n    borderColor: theme.colors.surfaceContrast,\n    transform: [{ translateY: -4 }],\n  },\n  messageNotificationBadge: {\n    position: 'absolute',\n    top: '50%',\n    right: -12,\n    minWidth: 22,\n    height: 22,\n    borderRadius: 11,\n    backgroundColor: theme.colors.error,\n    borderWidth: 1,\n    borderColor: theme.colors.surface,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 3,\n    transform: [{ translateY: -11 }],\n  },\n  messageNotificationText: {\n    color: 'white',\n    fontSize: 12,\n    fontWeight: 'bold',\n  },\n  mobileMessageNotificationBadge: {\n    position: 'absolute',\n    top: '50%',\n    right: -10,\n    minWidth: 20,\n    height: 20,\n    borderRadius: 10,\n    marginRight: 10,\n    backgroundColor: theme.colors.error,\n    borderWidth: 1,\n    borderColor: theme.colors.surfaceContrast,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 3,\n    transform: [{ translateY: -10 }],\n  },\n  mobileMessageNotificationText: {\n    color: 'white',\n    fontSize: 11,\n    fontWeight: 'bold',\n  },\n  roleNotificationIndicator: {\n    position: 'absolute',\n    width: 8,\n    height: 8,\n    borderRadius: 4,\n    backgroundColor: theme.colors.error,\n    borderWidth: 1,\n    borderColor: theme.colors.surface,\n    zIndex: 1,\n    top: '50%',\n    right: -4,\n    transform: [{ translateY: -4 }],\n  },\n  roleNotificationBadge: {\n    position: 'absolute',\n    minWidth: 18,\n    height: 18,\n    borderRadius: 9,\n    backgroundColor: theme.colors.error,\n    borderWidth: 1,\n    borderColor: theme.colors.surface,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 3,\n    zIndex: 10,\n    top: '50%',\n    right: -9,\n    transform: [{ translateY: -9 }],\n  },\n  roleNotificationText: {\n    color: 'white',\n    fontSize: 10,\n    fontWeight: 'bold',\n  },\n  hamburgerMenuContainer: {\n    width: 28,\n    height: 28,\n    justifyContent: 'center',\n    alignItems: 'center',\n    position: 'relative',\n  },\n  signedOutOptions: {\n    flexDirection: 'row',\n    gap: 8,\n  },\n  signedOutButton: {\n    padding: 8,\n    borderRadius: 6,\n    borderWidth: 1,\n    borderColor: theme.colors.primary,\n  },\n  signedOutButtonText: {\n    fontSize: theme.fontSizes.small,\n    fontFamily: theme.fonts.regular.fontFamily,\n    color: theme.colors.primary,\n  },\n  signInButton: {\n    backgroundColor: theme.colors.primary,\n  },\n  signedOutHeaderWeb: {\n    height: 70,\n    width: '100%',\n    backgroundColor: theme.colors.surfaceContrast,\n    flexDirection: 'row',\n    alignItems: 'center',\n    justifyContent: 'space-between',\n    paddingHorizontal: 20,\n    borderBottomWidth: 1,\n    borderBottomColor: theme.colors.border,\n  },\n  webLogo: {\n    height: 40,\n    width: 120,\n    resizeMode: 'contain',\n  },\n  signedOutNavButtons: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    gap: 24,\n  },\n  webSignInButton: {\n    backgroundColor: theme.colors.primary,\n    paddingVertical: 8,\n    paddingHorizontal: 16,\n    borderRadius: 8,\n  },\n  webSignInText: {\n    color: theme.colors.surface,\n  },\n  webDesktopMenu: {\n    position: 'absolute',\n    right: 0,\n    top: 70,\n    width: 250,\n  },\n  logoutButtonContainer: {\n    paddingHorizontal: 16,\n    paddingVertical: 16,\n    borderTopWidth: 1,\n    borderTopColor: theme.colors.border,\n    backgroundColor: theme.colors.surfaceContrast,\n    borderBottomRightRadius: 24,\n  },\n  hamburgerNotificationBadge: {\n    position: 'absolute',\n    top: -8,\n    right: -8,\n    minWidth: 18,\n    height: 18,\n    borderRadius: 9,\n    backgroundColor: theme.colors.error,\n    borderWidth: 1,\n    borderColor: theme.colors.surface,\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingHorizontal: 3,\n    zIndex: 10,\n  },\n  hamburgerNotificationText: {\n    color: 'white',\n    fontSize: 10,\n    fontWeight: 'bold',\n  },\n});\n","// src/config/config.js\nimport { Platform } from 'react-native';\nimport { debugLog } from '../utils/logging';\nimport { \n  STAGING_API_BASE_URL_ANDROID, \n  STAGING_API_BASE_URL_IOS, \n  STAGING_API_BASE_URL_WEB,\n  PRODUCTION_API_BASE_URL_ANDROID,\n  PRODUCTION_API_BASE_URL_IOS,\n  PRODUCTION_API_BASE_URL_WEB,\n  DEV_API_BASE_URL_ANDROID,\n  DEV_API_BASE_URL_IOS,\n  DEV_API_BASE_URL_WEB,\n  STAGING_MEDIA_URL,\n  PRODUCTION_MEDIA_URL,\n  NODE_ENV \n} from '@env';\n\n\ndebugLog(\"MBA1234: Environment Variables Loaded\", {\n  NODE_ENV,\n  STAGING_API_BASE_URL_ANDROID,\n  STAGING_API_BASE_URL_IOS,\n  STAGING_API_BASE_URL_WEB,\n  PRODUCTION_API_BASE_URL_ANDROID,\n  PRODUCTION_API_BASE_URL_IOS,\n  PRODUCTION_API_BASE_URL_WEB,\n  DEV_API_BASE_URL_ANDROID,\n  DEV_API_BASE_URL_IOS,\n  DEV_API_BASE_URL_WEB,\n  STAGING_MEDIA_URL,\n  PRODUCTION_MEDIA_URL,\n  platform: Platform.OS\n});\n\nconst isDevelopment = NODE_ENV === 'development';\nconst isStaging = NODE_ENV === 'staging';\nconst isProduction = NODE_ENV === 'production';\n\ndebugLog(\"MBA1234: Environment Configuration\", {\n  NODE_ENV,\n  isDevelopment,\n  isStaging,\n  isProduction,\n  platform: Platform.OS\n});\n\nlet API_BASE_URL;\n\nif (Platform.OS === 'android') {\n  API_BASE_URL = isDevelopment ? DEV_API_BASE_URL_ANDROID : isStaging ? STAGING_API_BASE_URL_ANDROID : PRODUCTION_API_BASE_URL_ANDROID;\n} else if (Platform.OS === 'ios') {\n  API_BASE_URL = isDevelopment ? DEV_API_BASE_URL_IOS : isStaging ? STAGING_API_BASE_URL_IOS : PRODUCTION_API_BASE_URL_IOS;\n} else {\n  API_BASE_URL = isDevelopment ? DEV_API_BASE_URL_WEB : isStaging ? STAGING_API_BASE_URL_WEB : PRODUCTION_API_BASE_URL_WEB;\n}\n\n// Set up MEDIA_URL for images\nlet MEDIA_URL;\nif (isDevelopment) {\n  // In development, use the API base URL for media\n  MEDIA_URL = API_BASE_URL;\n} else if (isStaging) {\n  // In staging, use the staging media URL if available, otherwise fall back to API base URL\n  MEDIA_URL = STAGING_MEDIA_URL;\n} else {\n  // In production, use the production media URL if available, otherwise fall back to API base URL\n  MEDIA_URL = PRODUCTION_MEDIA_URL;\n}\n\ndebugLog(\"MBA1234: Selected API Base URL\", { API_BASE_URL });\ndebugLog(\"MBA1234: Selected Media URL\", { MEDIA_URL });\n\n/**\n * Returns the full URL for a media resource\n * @param {string} path - The media resource path\n * @returns {string} The full URL to the media resource\n */\nconst getMediaUrl = (path) => {\n  // If the path is already a full URL, return it as is\n  if (!path) return null;\n  if (path.startsWith('http')) return path;\n  // Otherwise, prepend the media base URL\n  return `${MEDIA_URL}${path}`;\n};\n\nexport { API_BASE_URL, MEDIA_URL, getMediaUrl };\n","import React, { createContext, useState, useEffect, useContext, useRef } from 'react';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport axios from 'axios';\nimport { API_BASE_URL } from '../config/config';\nimport { Dimensions, Platform } from 'react-native';\nimport { navigate } from '../../App';\nimport { navigateToFrom } from '../components/Navigation';\nimport { initStripe } from '../utils/StripeService';\nimport { getUserName, getTimeSettings } from '../api/API';\nimport platformNavigation from '../utils/platformNavigation';\n\nexport const SCREEN_WIDTH = Dimensions.get('window').width;\nexport const SCREEN_HEIGHT = Dimensions.get('window').height;\n\n// Create a debug logging utility\nlet debugEnabled = true;\n\nexport const setDebugEnabled = (enabled) => {\n  debugEnabled = enabled;\n};\n\nexport const debugLog = (message, ...data) => {\n  if (debugEnabled && !message.includes('MBA3210')) {\n    if (data.length > 0) {\n      console.log(`${message}:`, ...data);\n    } else {\n      console.log(`${message}`);\n    }\n  }\n};\n\n// Authentication state management class with proper synchronization\nclass AuthService {\n  constructor() {\n    this.accessToken = null;\n    this.refreshToken = null;\n    this.isRefreshing = false;\n    this.refreshSubscribers = [];\n    this.tokenExpiryTime = null;\n    this.lastValidation = null;\n    this.authStateCallbacks = new Set();\n    this.isSigningOut = false;\n    this.lastTokenCheck = 0;\n    \n    // For testing - reduce refresh thresholds\n    this.TOKEN_REFRESH_THRESHOLD = 10 * 1000; // 10 seconds - increased for safety buffer\n    // This provides protection against:\n    // 1. Slow backend responses (2-5 seconds)\n    // 2. Network latency/timeouts\n    // 3. High server load scenarios\n    // Token refresh will start with 10s buffer, plenty of time for completion\n    this.TOKEN_PREEMPTIVE_REFRESH = 3 * 1000; // 3 seconds for testing\n    this.VALIDATION_CACHE_TIME = 30 * 1000; // 30 seconds cache\n    \n    // console.log('MBA1111 AuthService initialized with increased safety buffer (10s refresh threshold)');\n  }\n\n  // Register callback for auth state changes\n  onAuthStateChange(callback) {\n    this.authStateCallbacks.add(callback);\n    return () => this.authStateCallbacks.delete(callback);\n  }\n\n  // Notify all callbacks of auth state changes\n  notifyAuthStateChange(state) {\n    debugLog('MBA1111 Notifying auth state change:', state);\n    this.authStateCallbacks.forEach(callback => {\n      try {\n        callback(state);\n      } catch (error) {\n        console.error('MBA1111 Error in auth state callback:', error);\n      }\n    });\n  }\n\n  // Parse JWT token to get expiry time\n  parseJwt(token) {\n    try {\n      if (!token || typeof token !== 'string') {\n        debugLog('MBA1111 parseJwt: Invalid token provided');\n        return null;\n      }\n      \n      const parts = token.split('.');\n      if (parts.length !== 3) {\n        debugLog('MBA1111 parseJwt: Token does not have 3 parts');\n        return null;\n      }\n      \n      const base64Url = parts[1];\n      if (!base64Url) {\n        debugLog('MBA1111 parseJwt: No payload part found');\n        return null;\n      }\n      \n      let base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n      \n      // Add padding if needed\n      const padding = base64.length % 4;\n      if (padding) {\n        base64 += '='.repeat(4 - padding);\n      }\n      \n      // Decode base64 using platform-appropriate method\n      let decoded;\n      if (Platform.OS === 'web') {\n        // Use browser's atob\n        decoded = atob(base64);\n      } else {\n        // React Native - use built-in base64 support through global atob or Buffer\n        try {\n          if (typeof atob !== 'undefined') {\n            decoded = atob(base64);\n          } else if (typeof global !== 'undefined' && global.atob) {\n            decoded = global.atob(base64);\n          } else {\n            // Fallback - this should not be needed in modern RN\n            debugLog('MBA1111 parseJwt: No base64 decode method available');\n            return null;\n          }\n        } catch (e) {\n          debugLog('MBA1111 parseJwt: Error during base64 decode:', e);\n          throw e;\n        }\n      }\n      \n      return JSON.parse(decoded);\n      \n    } catch (error) {\n      console.error('MBA1111 Error parsing JWT:', error);\n      debugLog('MBA1111 parseJwt error details:', {\n        tokenLength: token ? token.length : 0,\n        tokenStart: token ? token.substring(0, 50) : 'null',\n        errorMessage: error.message,\n        errorStack: error.stack\n      });\n      return null;\n    }\n  }\n\n  // Calculate time until token expires in milliseconds\n  getTimeUntilExpiry(token) {\n    const parsedToken = this.parseJwt(token);\n    if (!parsedToken || !parsedToken.exp) return 0;\n    \n    const expiryTime = parsedToken.exp * 1000; // Convert to milliseconds\n    this.tokenExpiryTime = expiryTime;\n    \n    return expiryTime - Date.now();\n  }\n\n  // Check if we should refresh the token\n  shouldRefreshToken(token) {\n    if (!token) return false;\n    \n    const timeUntilExpiry = this.getTimeUntilExpiry(token);\n    const shouldRefresh = timeUntilExpiry < this.TOKEN_REFRESH_THRESHOLD && timeUntilExpiry > 0;\n    \n    if (shouldRefresh) {\n      debugLog(`MBA1111 Token should be refreshed - expires in ${Math.round(timeUntilExpiry/1000)} seconds`);\n    }\n    \n    return shouldRefresh;\n  }\n\n  // Refresh JWT tokens\n  async refreshTokens() {\n    debugLog('MBA1111 refreshTokens called');\n    \n    try {\n      // Prevent concurrent refresh attempts\n      if (this.isRefreshing) {\n        debugLog('MBA1111 Token refresh already in progress, subscribing');\n        return new Promise((resolve, reject) => {\n          this.refreshSubscribers.push({ resolve, reject });\n          \n          // Add timeout to prevent hanging forever\n          setTimeout(() => {\n            const index = this.refreshSubscribers.findIndex(sub => sub.resolve === resolve);\n            if (index !== -1) {\n              this.refreshSubscribers.splice(index, 1);\n              reject(new Error('Token refresh timeout'));\n            }\n          }, 10000); // 10 second timeout\n        });\n      }\n      \n      this.isRefreshing = true;\n      this.refreshSubscribers = [];\n      \n      if (!this.refreshToken) {\n        throw new Error('No refresh token available');\n      }\n      \n      // Check if refresh token is expired\n      const refreshTokenExpiry = this.getTimeUntilExpiry(this.refreshToken);\n      if (refreshTokenExpiry <= 0) {\n        debugLog('MBA1111 Refresh token is expired, cannot refresh');\n        throw new Error('Refresh token expired');\n      }\n      \n      const refreshStartTime = Date.now();\n      debugLog('MBA1111 Making refresh token request to backend');\n      \n      // Make the actual refresh request without using interceptors\n      const response = await fetch(`${API_BASE_URL}/api/token/refresh/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          refresh: this.refreshToken\n        })\n      });\n      \n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        debugLog('MBA1111 Token refresh failed with status:', response.status, errorData);\n        throw new Error(`Token refresh failed: ${response.status}`);\n      }\n      \n      const data = await response.json();\n      const { access, refresh } = data;\n      \n      if (!access) {\n        throw new Error('No access token in refresh response');\n      }\n      \n      this.accessToken = access;\n      \n      // Handle refresh token rotation if new refresh token is provided\n      if (refresh) {\n        debugLog('MBA1111 New refresh token received, updating stored refresh token');\n        this.refreshToken = refresh;\n        await setStorage('refreshToken', refresh);\n      }\n      \n      // Store new access token\n      await setStorage('userToken', access);\n      \n      const refreshDuration = Date.now() - refreshStartTime;\n      debugLog(`MBA1111 Token refresh successful in ${refreshDuration}ms`);\n      \n      // Resolve all waiting requests\n      this.refreshSubscribers.forEach(({ resolve }) => {\n        try {\n          resolve(access);\n        } catch (error) {\n          debugLog('MBA1111 Error resolving refresh subscriber:', error);\n        }\n      });\n      \n      return access;\n      \n    } catch (error) {\n      debugLog('MBA1111 Token refresh failed:', error);\n      \n      // Reject all waiting requests\n      this.refreshSubscribers.forEach(({ reject }) => {\n        try {\n          reject(error);\n        } catch (err) {\n          debugLog('MBA1111 Error rejecting refresh subscriber:', err);\n        }\n      });\n      \n      // Clear invalid tokens\n      await this.clearTokens();\n      throw error;\n      \n    } finally {\n      this.isRefreshing = false;\n      this.refreshSubscribers = [];\n      debugLog('MBA1111 Token refresh process completed');\n    }\n  }\n\n  // Get access token with automatic refresh\n  async getAccessToken() {\n    // If signing out, return null\n    if (this.isSigningOut) {\n      debugLog('MBA1111 getAccessToken: signing out, returning null');\n      return null;\n    }\n    \n    // Check if current token is expired\n    if (this.accessToken) {\n      const timeUntilExpiry = this.getTimeUntilExpiry(this.accessToken);\n      if (timeUntilExpiry <= 0) {\n        debugLog('MBA1111 getAccessToken: current token is expired, clearing it');\n        this.accessToken = null;\n      }\n    }\n    \n    // If no access token but we have refresh token, try to refresh\n    if (!this.accessToken && this.refreshToken) {\n      debugLog('MBA1111 getAccessToken: no access token but have refresh token, attempting refresh');\n      try {\n        await this.refreshTokens();\n      } catch (error) {\n        debugLog('MBA1111 getAccessToken: failed to refresh token:', error);\n        return null;\n      }\n    }\n    \n    // Check if current token needs refresh (but isn't expired yet)\n    if (this.accessToken && this.shouldRefreshToken(this.accessToken)) {\n      const timeUntilExpiry = this.getTimeUntilExpiry(this.accessToken);\n      if (timeUntilExpiry > 0) {\n        debugLog('MBA1111 getAccessToken: token needs refresh but still valid, attempting refresh');\n        try {\n          await this.refreshTokens();\n        } catch (error) {\n          debugLog('MBA1111 getAccessToken: failed to refresh token:', error);\n          // If refresh fails but token is still valid, return current token\n          if (this.getTimeUntilExpiry(this.accessToken) > 0) {\n            debugLog('MBA1111 getAccessToken: refresh failed but token still valid, returning current token');\n            return this.accessToken;\n          }\n          return null;\n        }\n      }\n    }\n    \n    if (this.accessToken) {\n      const timeUntilExpiry = this.getTimeUntilExpiry(this.accessToken);\n      if (timeUntilExpiry > 0) {\n        return this.accessToken;\n      } else {\n        debugLog('MBA1111 getAccessToken: token is expired, returning null');\n        this.accessToken = null;\n        return null;\n      }\n    } else {\n      debugLog('MBA1111 getAccessToken: returning null, no token available');\n      return null;\n    }\n  }\n\n  // Validate token with caching\n  async validateToken(token) {\n    const now = Date.now();\n    \n    // Use client-side validation for recent checks\n    if (this.lastValidation && now - this.lastValidation < this.VALIDATION_CACHE_TIME) {\n      debugLog('MBA1111 Using cached token validation');\n      const timeUntilExpiry = this.getTimeUntilExpiry(token);\n      return timeUntilExpiry > 0;\n    }\n    \n    debugLog('MBA1111 Performing server-side token validation');\n    try {\n      const response = await axios.post(`${API_BASE_URL}/api/token/verify/`, {\n        token: token\n      });\n\n      this.lastValidation = now;\n      // debugLog('MBA1111 Token validation successful');\n      return response.status === 200;\n    } catch (error) {\n      debugLog('MBA1111 Token validation failed:', error.response?.status);\n      return false;\n    }\n  }\n\n  // Clear tokens from storage\n  async clearTokens() {\n    try {\n      if (Platform.OS === 'web') {\n        // Clear from localStorage for authentication tokens\n        localStorage.removeItem('userToken');\n        localStorage.removeItem('refreshToken');\n      } else {\n        await AsyncStorage.multiRemove(['userToken', 'refreshToken']);\n      }\n      this.accessToken = null;\n      this.refreshToken = null;\n    } catch (error) {\n      console.error('MBA2ounf4f Error clearing tokens:', error);\n    }\n  }\n\n  // Set tokens in storage\n  async setTokens(accessToken, refreshToken) {\n    try {\n      this.accessToken = accessToken;\n      this.refreshToken = refreshToken;\n\n      if (Platform.OS === 'web') {\n        // Use localStorage for web (original behavior)\n        localStorage.setItem('userToken', accessToken);\n        localStorage.setItem('refreshToken', refreshToken);\n      } else {\n        await AsyncStorage.multiSet([\n          ['userToken', accessToken],\n          ['refreshToken', refreshToken]\n        ]);\n      }\n    } catch (error) {\n      console.error('MBA1111 Error setting tokens:', error);\n      throw error;\n    }\n  }\n\n  // Validate JWT format without full parsing\n  isValidJWT(token) {\n    if (!token || typeof token !== 'string') return false;\n    \n    const parts = token.split('.');\n    if (parts.length !== 3) return false;\n    \n    // Check if each part has content\n    return parts.every(part => part && part.length > 0);\n  }\n\n  // Initialize auth service\n  async initialize() {\n    debugLog('MBA2ounf4f Starting AuthService.initialize()');\n    try {\n      let accessToken, refreshToken;\n      \n      debugLog('MBA2ounf4f Attempting to get stored tokens');\n      accessToken = await getStorage('userToken');\n      refreshToken = await getStorage('refreshToken');\n      \n      // Brave browser recovery: If tokens are missing but we have them in memory, restore them\n      if (Platform.OS === 'web' && (!accessToken || !refreshToken)) {\n        const memoryAccessToken = this.accessToken;\n        const memoryRefreshToken = this.refreshToken;\n        \n        if (memoryAccessToken && !accessToken) {\n          debugLog('MBA2ounf4f BRAVE RECOVERY: Restoring accessToken from memory to localStorage');\n          localStorage.setItem('userToken', memoryAccessToken);\n          accessToken = memoryAccessToken;\n        }\n        \n        if (memoryRefreshToken && !refreshToken) {\n          debugLog('MBA2ounf4f BRAVE RECOVERY: Restoring refreshToken from memory to localStorage');\n          localStorage.setItem('refreshToken', memoryRefreshToken);\n          refreshToken = memoryRefreshToken;\n        }\n      }\n      \n      debugLog('MBA2ounf4f Raw tokens retrieved:', {\n        accessTokenExists: !!accessToken,\n        refreshTokenExists: !!refreshToken,\n        accessTokenLength: accessToken ? accessToken.length : 0,\n        refreshTokenLength: refreshToken ? refreshToken.length : 0,\n        accessTokenStart: accessToken ? accessToken.substring(0, 20) + '...' : 'null',\n        refreshTokenStart: refreshToken ? refreshToken.substring(0, 20) + '...' : 'null'\n      });\n      \n      // Validate tokens before using them\n      if (accessToken && !this.isValidJWT(accessToken)) {\n        debugLog('MBA2ounf4f Invalid access token found, clearing it', {\n          tokenLength: accessToken.length,\n          tokenStart: accessToken.substring(0, 20)\n        });\n        accessToken = null;\n        await setStorage('userToken', '');\n      }\n      \n      if (refreshToken && !this.isValidJWT(refreshToken)) {\n        debugLog('MBA2ounf4f Invalid refresh token found, clearing it', {\n          tokenLength: refreshToken.length,\n          tokenStart: refreshToken.substring(0, 20)\n        });\n        refreshToken = null;\n        await setStorage('refreshToken', '');\n      }\n      \n      this.accessToken = accessToken;\n      this.refreshToken = refreshToken;\n\n      debugLog('MBA2ounf4f Tokens retrieved and validated:', {\n        hasAccessToken: !!this.accessToken,\n        hasRefreshToken: !!this.refreshToken\n      });\n      \n      // Check if token needs immediate refresh\n      if (this.accessToken && this.shouldRefreshToken(this.accessToken)) {\n        debugLog('MBA2ounf4f Token needs refresh during init');\n        try {\n          await this.refreshTokens();\n        } catch (err) {\n          debugLog('MBA2ounf4f Failed to refresh token during init:', err);\n        }\n      }\n\n      return {\n        hasAccessToken: !!this.accessToken,\n        hasRefreshToken: !!this.refreshToken\n      };\n    } catch (error) {\n      console.error('MBA2ounf4f Error in AuthService.initialize():', error);\n      return { hasAccessToken: false, hasRefreshToken: false };\n    }\n  }\n\n  // Force sign out with reason\n  forceSignOut(reason) {\n    if (this.isSigningOut) return;\n    \n    debugLog(`MBA1111 Force sign out triggered. Reason: ${reason}`);\n    this.isSigningOut = true;\n    \n    // Notify auth state change\n    this.notifyAuthStateChange({\n      type: 'FORCE_SIGN_OUT',\n      reason: reason,\n      timestamp: new Date().toISOString()\n    });\n  }\n}\n\nexport const AuthContext = createContext();\n\n// Storage helper functions with platform-specific persistence strategies\nexport const getStorage = async (key) => {\n  try {\n    if (Platform.OS === 'web') {\n      // For authentication tokens on web, use localStorage for persistent authentication (like Airbnb)\n      // For other data, check both sessionStorage and localStorage\n      if (key === 'userToken' || key === 'refreshToken') {\n        const value = localStorage.getItem(key);\n        debugLog('MBAo34invid3w getStorage web localStorage (auth):', { key, hasValue: !!value, valueLength: value ? value.length : 0 });\n        return value;\n      } else {\n        // For non-auth data, prefer sessionStorage but fallback to localStorage\n        try {\n          const sessionValue = sessionStorage.getItem(key);\n          if (sessionValue) {\n            debugLog('MBAo34invid3w getStorage web sessionStorage (non-auth):', { key, hasValue: !!sessionValue });\n            return sessionValue;\n          }\n        } catch (sessionError) {\n          debugLog('MBAo34invid3w getStorage sessionStorage error, falling back to localStorage:', { key, error: sessionError.message });\n        }\n        \n        const localValue = localStorage.getItem(key);\n        debugLog('MBAo34invid3w getStorage web localStorage (non-auth):', { key, hasValue: !!localValue });\n        return localValue;\n      }\n    } else {\n      const value = await AsyncStorage.getItem(key);\n      debugLog('MBAo34invid3w getStorage mobile AsyncStorage:', { key, hasValue: !!value, valueLength: value ? value.length : 0 });\n      return value;\n    }\n  } catch (error) {\n    console.error('MBA2ounf4f Error getting from storage:', error);\n    return null;\n  }\n};\n\nexport const setStorage = async (key, value) => {\n  try {\n    debugLog('MBAo34invid3w setStorage called:', { key, hasValue: !!value, valueLength: value ? value.length : 0, platform: Platform.OS });\n    if (Platform.OS === 'web') {\n      // For authentication tokens on web, use localStorage for persistent authentication (like Airbnb)\n      if (key === 'userToken' || key === 'refreshToken') {\n        localStorage.setItem(key, value);\n        debugLog('MBAo34invid3w setStorage web localStorage (auth) completed:', { key });\n      } else {\n        // For other data, use sessionStorage\n        sessionStorage.setItem(key, value);\n        debugLog('MBAo34invid3w setStorage web sessionStorage (non-auth) completed:', { key });\n      }\n    } else {\n      await AsyncStorage.setItem(key, value);\n      debugLog('MBAo34invid3w setStorage mobile AsyncStorage completed:', { key });\n    }\n  } catch (error) {\n    console.error('MBA2ounf4f Error setting storage:', error);\n  }\n};\n\n// Production flag\nconst is_PRODUCTION = false;\n\nexport const IsProduction = () => {\n  return is_PRODUCTION;\n};\n\nexport const AuthProvider = ({ children }) => {\n  const authService = useRef(new AuthService());\n  const isInitializedRef = useRef(false);\n  const signOutTimeoutRef = useRef(null);\n  \n  const [isSignedIn, setIsSignedIn] = useState(false);\n  const [userRole, setUserRole] = useState(null);\n  const [isApprovedProfessional, setIsApprovedProfessional] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [isInitialized, setIsInitialized] = useState(false);\n  const [screenWidth, setScreenWidth] = useState(Dimensions.get('window').width);\n  const [firstName, setFirstName] = useState('');\n  const [name, setName] = useState('');\n  const [isCollapsed, setIsCollapsed] = useState(false);\n  const [timeSettings, setTimeSettings] = useState({\n    timezone: 'UTC',\n    timezone_abbrev: 'UTC',\n    use_military_time: false\n  });\n  const [is_prototype, setIsPrototype] = useState(false);\n  const [is_DEBUG, setIsDebug] = useState(true);\n  // Platform-aware redirect effect for users without tokens on protected routes\n  // NOTE: Only run this on mobile - web uses React Navigation linking for route protection\n  useEffect(() => {\n    // Skip redirect logic entirely on web - React Navigation linking handles it\n    if (Platform.OS === 'web') {\n      return;\n    }\n    \n    // Don't check for redirects until auth has been initialized\n    if (!isInitializedRef.current) {\n      debugLog('MBA1111 AUTH REDIRECT: Auth not yet initialized, skipping redirect check');\n      return;\n    }\n    \n    if (!loading && !isSignedIn) {\n      try {\n        // Get current route information using platform navigation\n        const currentRouteInfo = platformNavigation.getCurrentRoute();\n        \n        // Safety check: ensure currentRouteInfo is valid\n        if (!currentRouteInfo) {\n          debugLog('MBA1111 AUTH REDIRECT: currentRouteInfo is null/undefined, skipping redirect check');\n          return;\n        }\n      \n      // Handle platform-specific route checking (mobile only now)\n      let isOnProtectedRoute = false;\n      \n      // This should never execute on web due to early return above, but keeping for safety\n      if (Platform.OS === 'web') {\n        const currentPath = currentRouteInfo?.path;\n        \n        debugLog(`MBA1111 AUTH REDIRECT WEB: Full URL: ${currentRouteInfo?.href || 'N/A'}`);\n        debugLog(`MBA1111 AUTH REDIRECT WEB: Route name: ${currentRouteInfo?.name || 'Unknown'}`);\n        debugLog(`MBA1111 AUTH REDIRECT WEB: Path: ${currentPath || 'Unknown'}`);\n        \n        // List of protected paths for web\n        const protectedWebPaths = [\n          '/Dashboard',\n          '/MyProfile', \n          '/my-profile',\n          '/MessageHistory',\n          '/message-history',\n          '/OwnerHistory',\n          '/BecomeProfessional',\n          '/become-professional',\n          '/More',\n          '/Owners',\n          '/AvailabilitySettings',\n          '/Settings',\n          '/ProfessionalSettings',\n          '/ProfessionalProfile',\n          '/MyContracts',\n          '/ChangePassword',\n          '/change-password',\n          '/MyBookings',\n          '/ServiceManager',\n          '/service-manager',\n          '/TestToast',\n          '/Connections',\n          '/connections'\n        ];\n        \n        // Check if current path matches any protected path\n        isOnProtectedRoute = protectedWebPaths.some(path => {\n          const matches = currentPath.startsWith(path) || currentPath === path;\n          if (matches) {\n            debugLog(`MBA1111 AUTH REDIRECT WEB: Matched protected path ${path} with current path ${currentPath}`);\n          }\n          return matches;\n        });\n      } else {\n        // Mobile apps: use route names instead of paths\n        const currentRouteName = currentRouteInfo.name;\n        \n        debugLog(`MBA1111 AUTH REDIRECT MOBILE: Route name: ${currentRouteName}`);\n        \n        // List of protected route names for mobile\n        const protectedMobileRoutes = [\n          'Dashboard',\n          'MyProfile',\n          'MessageHistory',\n          'OwnerHistory',\n          'BecomeProfessional',\n          'More',\n          'Owners',\n          'AvailabilitySettings',\n          'Settings',\n          'ProfessionalSettings',\n          'ProfessionalProfile',\n          'MyContracts',\n          'ChangePassword',\n          'MyBookings',\n          'ServiceManager',\n          'TestToast',\n          'Connections'\n        ];\n        \n        // Check if current route name matches any protected route\n        isOnProtectedRoute = protectedMobileRoutes.includes(currentRouteName);\n        \n        if (isOnProtectedRoute) {\n          debugLog(`MBA1111 AUTH REDIRECT MOBILE: On protected route ${currentRouteName}`);\n        }\n      }\n      \n      if (isOnProtectedRoute) {\n        debugLog(`MBA1111 AUTH REDIRECT: User not signed in on protected route, redirecting to SignIn`);\n        \n        // Use platform navigation for redirect\n        try {\n          // First try using existing navigate function\n          navigate('SignIn');\n          debugLog('MBA1111 AUTH REDIRECT: Navigation to SignIn successful');\n        } catch (error) {\n          debugLog('MBA1111 AUTH REDIRECT: Navigation failed, using platform navigation fallback:', error);\n          // Fallback to platform navigation redirect\n          platformNavigation.redirectToSignIn(null);\n        }\n      } else {\n        debugLog(`MBA1111 AUTH REDIRECT: Current route is not protected, no redirect needed`);\n      }\n      } catch (error) {\n        debugLog('MBA1111 AUTH REDIRECT: Error during redirect check:', error);\n        // Don't crash the app, just log the error and continue\n      }\n    } else {\n      if (loading) {\n        debugLog('MBA1111 AUTH REDIRECT: Still loading, skipping redirect check');\n      }\n      if (isSignedIn) {\n        debugLog('MBA1111 AUTH REDIRECT: User is signed in, no redirect needed');\n      }\n    }\n  }, [isSignedIn, loading]);\n\n  // Sign out function with comprehensive cleanup and reason tracking\n  const signOut = async (reason = 'user_action') => {\n    debugLog('MBAo34invid3w signOut called with reason:', reason);\n    \n    try {\n      // Prevent concurrent sign out operations\n      if (authService.current.isSigningOut) {\n        debugLog('MBAo34invid3w Sign out already in progress, skipping');\n        return;\n      }\n      \n      authService.current.isSigningOut = true;\n      \n      // For token expiry or validation failures, immediately set signed out state\n      // to prevent user from seeing stale content\n      if (reason.includes('validation') || reason.includes('expired') || reason.includes('no_valid')) {\n        debugLog('MBAo34invid3w Immediate state update for auth failure');\n        setIsSignedIn(false);\n        setLoading(false); // Ensure loading is false so redirect can happen\n      }\n      \n      // Clear any pending sign out\n      if (signOutTimeoutRef.current) {\n        clearTimeout(signOutTimeoutRef.current);\n        signOutTimeoutRef.current = null;\n      }\n      \n      // Close websocket connection first\n      try {\n        const websocketManager = (await import('../utils/websocket')).default;\n        websocketManager.disconnect();\n        debugLog('MBAo34invid3w WebSocket disconnected during signOut');\n      } catch (error) {\n        debugLog('MBAo34invid3w Error disconnecting websocket:', error);\n      }\n      \n      // Clear tokens and storage\n      debugLog('MBAo34invid3w Clearing tokens and storage during signOut');\n      await authService.current.clearTokens();\n      await AsyncStorage.multiRemove(['userRole', 'isApprovedProfessional']);\n      \n      // Clear all storage items for web (both localStorage and sessionStorage)\n      if (Platform.OS === 'web') {\n        debugLog('MBAo34invid3w Clearing web storage during signOut');\n        \n        // Clear auth tokens from localStorage\n        localStorage.removeItem('userToken');\n        localStorage.removeItem('refreshToken');\n        \n        // Clear user data from localStorage\n        localStorage.removeItem('userRole');\n        localStorage.removeItem('isApprovedProfessional');\n        localStorage.removeItem('currentProfessional');\n        \n        // Clear non-auth data from sessionStorage\n        sessionStorage.removeItem('userRole');\n        sessionStorage.removeItem('isApprovedProfessional');\n        sessionStorage.removeItem('currentProfessional');\n        \n        // Mark as explicit sign out for web\n        sessionStorage.setItem('explicitSignOut', 'true');\n        \n        debugLog('MBAo34invid3w Web storage cleared during signOut - auth tokens from localStorage, user data from both');\n      }\n      \n      debugLog('MBAo34invid3w Storage cleared during sign out');\n      \n      // Reset all auth state\n      setIsSignedIn(false);\n      setFirstName('');\n      setName('');\n      setUserRole(null);\n      setIsApprovedProfessional(false);\n      setTimeSettings({\n        timezone: 'UTC',\n        timezone_abbrev: 'UTC',\n        use_military_time: false\n      });\n      \n      // Clear auth service state\n      authService.current.accessToken = null;\n      authService.current.refreshToken = null;\n      \n      debugLog('MBAo34invid3w Auth state reset during signOut');\n      \n      // Navigate to sign in with platform-specific handling\n      const navigateToSignIn = () => {\n        try {\n          debugLog('MBAo34invid3w Navigating to SignIn screen due to:', reason);\n          \n          if (Platform.OS === 'web') {\n            // For web, use direct URL navigation to avoid conflicts with React Navigation\n            if (typeof window !== 'undefined' && window.location) {\n              window.location.href = '/signin';\n              debugLog('MBAo34invid3w Web redirect to /signin successful');\n            } else {\n              // Fallback to navigate function\n              navigate('SignIn');\n            }\n          } else {\n            // For mobile, use React Navigation\n            navigate('SignIn');\n          }\n        } catch (navError) {\n          console.error('MBA1111 Navigation error during signOut:', navError);\n          // Final fallback: use platform navigation\n          try {\n            platformNavigation.redirectToSignIn(null);\n          } catch (fallbackError) {\n            console.error('MBA1111 Platform navigation fallback also failed:', fallbackError);\n          }\n        }\n      };\n      \n      // For auth failures, navigate immediately\n      if (reason.includes('validation') || reason.includes('expired') || reason.includes('no_valid') || reason.includes('server_validation')) {\n        debugLog('MBAo34invid3w Immediate navigation for auth failure');\n        navigateToSignIn();\n      } else {\n        // For user-initiated sign outs, small delay\n        setTimeout(navigateToSignIn, 0);\n      }\n      \n      debugLog('MBAo34invid3w Sign out completed successfully');\n      \n    } catch (error) {\n      debugLog('MBAo34invid3w Error during sign out:', error);\n      \n      // Even if there's an error, ensure we're in signed out state\n      setIsSignedIn(false);\n      setLoading(false);\n      \n      // Try to navigate anyway\n      try {\n        navigate('SignIn');\n      } catch (navError) {\n        console.error('MBA1111 Failed to navigate after signOut error:', navError);\n      }\n    } finally {\n      authService.current.isSigningOut = false;\n    }\n  };\n\n  // Listen for auth state changes from AuthService\n  useEffect(() => {\n    const unsubscribe = authService.current.onAuthStateChange((state) => {\n      debugLog('MBA1111 Auth state change received:', state);\n      \n      if (state.type === 'FORCE_SIGN_OUT') {\n        // Clear the signing out flag and trigger sign out\n        authService.current.isSigningOut = false;\n        signOut(state.reason);\n      }\n    });\n\n    return unsubscribe;\n  }, []);\n\n  // Set up axios interceptors with consolidated error handling\n  useEffect(() => {\n    debugLog('MBA1111 Setting up consolidated axios interceptors');\n    \n    // Circuit breaker for 401 errors with enhanced tracking\n    let consecutiveAuth401Errors = 0;\n    let lastErrorTime = 0;\n    const MAX_401_RETRIES = 3;\n    const ERROR_RESET_TIME = 60000; // Reset error count after 1 minute\n    \n    const requestInterceptor = axios.interceptors.request.use(\n      async (config) => {\n        // debugLog(`MBA1111 Request interceptor called for: ${config.method?.toUpperCase()} ${config.url}`);\n        \n        if (!is_prototype) {\n          // Check if this is an invitation verification endpoint - ONLY verification should be public\n          // NOTE: Invitation acceptance requires authentication and is handled during registration\n          const isInviteVerification = config.url.includes('/api/users/v1/invitations/') && \n                                      config.url.includes('/verify/');\n          \n          if (isInviteVerification) {\n            debugLog(`MBAnb23ou4bf954 Skipping auth for invite verification endpoint: ${config.url}`);\n            return config;\n          }\n          \n          try {\n            const token = await authService.current.getAccessToken();\n            if (token) {\n              config.headers.Authorization = `Bearer ${token}`;\n              \n              // Log for invitation acceptance requests\n              if (config.url.includes('/api/users/v1/invitations/') && config.url.includes('/accept/')) {\n                debugLog(`MBAnb23ou4bf954 Added auth token for invitation acceptance: ${config.url}`);\n              }\n            } else {\n              debugLog(`MBAnb23ou4bf954 No token available for request: ${config.method?.toUpperCase()} ${config.url}`);\n              \n              // If this is an invitation acceptance endpoint which requires authentication but we have no token\n              if (config.url.includes('/api/users/v1/invitations/') && config.url.includes('/accept/')) {\n                debugLog(`MBAnb23ou4bf954 ERROR: Invitation acceptance requires authentication but no token available: ${config.url}`);\n                \n                // For acceptance endpoints, we MUST have a token\n                const error = new Error('Authentication required for invitation acceptance');\n                error.name = 'NoTokenError';\n                throw error;\n              }\n            }\n          } catch (error) {\n            console.error('MBA1111 Error getting access token for request:', error);\n            debugLog(`MBA9999 Token error for request: ${config.method?.toUpperCase()} ${config.url}`, error);\n            \n            // If the error is due to auth service issues and UI thinks user is signed in,\n            // this could indicate state inconsistency\n            if (isSignedIn && error.message && (\n              error.message.includes('No authentication token') || \n              error.message.includes('expired') ||\n              error.message.includes('invalid')\n            )) {\n              debugLog('MBA9999 Auth service error while UI shows signed in - potential state inconsistency');\n              setTimeout(() => {\n                signOut('auth_service_error_while_signed_in');\n              }, 0);\n            }\n            \n            throw error;\n          }\n        } else {\n          debugLog(`MBA1111 Prototype mode - skipping token for: ${config.method?.toUpperCase()} ${config.url}`);\n        }\n        \n        return config;\n      },\n      (error) => {\n        debugLog('MBA1111 Request interceptor error:', error);\n        return Promise.reject(error);\n      }\n    );\n\n    const responseInterceptor = axios.interceptors.response.use(\n      (response) => {\n        // debugLog(`MBA1111 Response success: ${response.status} ${response.config.method?.toUpperCase()} ${response.config.url}`);\n        \n        // Reset circuit breaker on successful response\n        const now = Date.now();\n        if (now - lastErrorTime > ERROR_RESET_TIME) {\n          consecutiveAuth401Errors = 0;\n        }\n        return response;\n      },\n      async (error) => {\n        const originalRequest = error.config;\n        \n        debugLog(`MBA1111 Response error: ${error.response?.status} ${error.config?.method?.toUpperCase()} ${error.config?.url}`);\n        \n        // Skip handling certain error types that should not trigger auth logic\n        if (error.name === 'NoTokenError' || error.name === 'AbortError') {\n          return Promise.reject(error);\n        }\n        \n        // Handle 401 errors with enhanced circuit breaker\n        if (error.response?.status === 401 && originalRequest && !originalRequest._retry) {\n          const now = Date.now();\n          \n          // Reset counter if enough time has passed\n          if (now - lastErrorTime > ERROR_RESET_TIME) {\n            consecutiveAuth401Errors = 0;\n          }\n          \n          consecutiveAuth401Errors++;\n          lastErrorTime = now;\n          \n          debugLog(`MBA2ounf4f 401 error detected (${consecutiveAuth401Errors}/${MAX_401_RETRIES}), attempting token refresh`, {\n            url: originalRequest.url,\n            method: originalRequest.method\n          });\n          \n          // Enhanced circuit breaker: Stop trying after too many consecutive failures\n          if (consecutiveAuth401Errors >= MAX_401_RETRIES) {\n            debugLog('MBA2ounf4f Circuit breaker triggered: Too many consecutive 401 errors, forcing sign out');\n            authService.current.forceSignOut('too_many_auth_failures');\n            return Promise.reject(error);\n          }\n          \n          originalRequest._retry = true;\n          \n          try {\n            // Skip auth logging calls to prevent infinite loops\n            const isAuthLoggingCall = originalRequest.url?.includes('/api/core/log-auth-event/');\n            const isMessageCall = originalRequest.url?.includes('/api/messages/');\n            const isConversationCall = originalRequest.url?.includes('/api/conversations/');\n            \n            // Be extra careful with message/conversation calls during auth issues\n            if (isMessageCall || isConversationCall) {\n              debugLog('MBA9999 Skipping token refresh for message/conversation call during auth issues to prevent loops');\n              throw new Error('Auth failed for protected call');\n            }\n            \n            if (!isAuthLoggingCall) {\n              // Only attempt refresh for non-logging calls\n              debugLog('MBA1111 Attempting token refresh for failed request');\n              \n              // Add timeout to token refresh\n              const refreshPromise = authService.current.refreshTokens();\n              const timeoutPromise = new Promise((_, reject) => \n                setTimeout(() => reject(new Error('Token refresh timeout')), 8000)\n              );\n              \n              await Promise.race([refreshPromise, timeoutPromise]);\n              \n              // Retry original request with new token\n              const newToken = await authService.current.getAccessToken();\n              if (newToken) {\n                originalRequest.headers.Authorization = `Bearer ${newToken}`;\n                debugLog('MBA1111 Retrying request with new token');\n                return axios(originalRequest);\n              } else {\n                debugLog('MBA1111 No new token available after refresh');\n                throw new Error('No token available after refresh');\n              }\n            } else {\n              // For auth logging calls, just fail silently\n              debugLog('MBA1111 Auth logging call failed, not retrying to prevent loops');\n              throw error;\n            }\n          } catch (refreshError) {\n            debugLog('MBA1111 Token refresh failed:', refreshError);\n            \n            // If this was a timeout or repeated failure, force sign out\n            if (refreshError.message.includes('timeout') || consecutiveAuth401Errors >= 2) {\n              debugLog('MBA9999 Token refresh timeout or repeated failure, forcing sign out');\n              authService.current.forceSignOut('token_refresh_failed');\n            }\n            \n            throw error;\n          }\n        }\n        \n        // Log all network errors for debugging\n        debugLog('MBA2ounf4f Axios response interceptor error:', {\n          status: error.response?.status,\n          url: error.config?.url,\n          method: error.config?.method,\n          message: error.message,\n          isNetworkError: !error.response,\n          errorCode: error.code,\n          isBackendDown: error.code === 'ECONNREFUSED' || error.code === 'ERR_NETWORK'\n        });\n        \n        return Promise.reject(error);\n      }\n    );\n\n    return () => {\n      axios.interceptors.request.eject(requestInterceptor);\n      axios.interceptors.response.eject(responseInterceptor);\n    };\n  }, [is_prototype]);\n\n  // Window focus handling with proper debouncing and storage event monitoring\n  useEffect(() => {\n    if (!isSignedIn || is_prototype) return;\n    \n    let focusCheckTimeout = null;\n    \n    const handleWindowFocus = () => {\n      debugLog('MBAo34invid3w Window focus event triggered');\n      \n      // Clear any pending check\n      if (focusCheckTimeout) {\n        clearTimeout(focusCheckTimeout);\n      }\n      \n      // Debounce the focus check\n      focusCheckTimeout = setTimeout(async () => {\n        debugLog('MBAo34invid3w Window regained focus, checking token');\n        \n        if (authService.current && !authService.current.isSigningOut) {\n          const token = authService.current.accessToken;\n          if (token && authService.current.shouldRefreshToken(token)) {\n            debugLog('MBAo34invid3w Token needs refresh on focus');\n            try {\n              await authService.current.refreshTokens();\n              debugLog('MBAo34invid3w Token refresh on focus successful');\n            } catch (error) {\n              debugLog('MBAo34invid3w Error refreshing token on focus:', error);\n            }\n          } else {\n            debugLog('MBAo34invid3w Token does not need refresh on focus');\n          }\n        } else {\n          debugLog('MBAo34invid3w Auth service not available or signing out during focus check');\n        }\n      }, 500); // 500ms debounce\n    };\n    \n    // Storage event handler to detect sessionStorage clearing\n    const handleStorageEvent = (event) => {\n      // Only care about sessionStorage changes that might affect auth\n      if (event.storageArea === sessionStorage) {\n        debugLog('MBAo34invid3w SessionStorage change detected:', {\n          key: event.key,\n          newValue: event.newValue,\n          oldValue: event.oldValue,\n          url: event.url\n        });\n        \n        // If sessionStorage is being cleared (multiple keys removed), log it but don't act\n        if (event.key === null && event.newValue === null) {\n          debugLog('MBAo34invid3w SessionStorage clear detected - checking if localStorage was affected');\n          \n          // Check if localStorage tokens are still there after sessionStorage clear\n          const localStorageUserToken = localStorage.getItem('userToken');\n          const localStorageRefreshToken = localStorage.getItem('refreshToken');\n          \n          debugLog('MBAo34invid3w localStorage check after sessionStorage clear:', {\n            hasUserToken: !!localStorageUserToken,\n            hasRefreshToken: !!localStorageRefreshToken\n          });\n          \n          // If localStorage tokens are missing but we're signed in, this is a Brave browser issue\n          if (!localStorageUserToken && !localStorageRefreshToken && isSignedIn) {\n            debugLog('MBAo34invid3w BRAVE BROWSER ISSUE: sessionStorage.clear() affected localStorage - attempting recovery');\n            \n            // Try to restore tokens from memory if available\n            if (authService.current.accessToken) {\n              localStorage.setItem('userToken', authService.current.accessToken);\n              debugLog('MBAo34invid3w Restored userToken to localStorage from memory');\n            }\n            if (authService.current.refreshToken) {\n              localStorage.setItem('refreshToken', authService.current.refreshToken);\n              debugLog('MBAo34invid3w Restored refreshToken to localStorage from memory');\n            }\n          }\n          \n          return;\n        }\n        \n        // If auth tokens are being removed from sessionStorage, ignore it\n        if ((event.key === 'userToken' || event.key === 'refreshToken') && event.newValue === null) {\n          debugLog('MBAo34invid3w Auth token removed from sessionStorage - ignoring as tokens are in localStorage');\n          return;\n        }\n      }\n    };\n    \n    // Set up event listeners only for web\n    if (Platform.OS === 'web' && typeof window !== 'undefined' && typeof document !== 'undefined') {\n      debugLog('MBAo34invid3w Setting up focus and storage event listeners for web');\n      window.addEventListener('focus', handleWindowFocus);\n      window.addEventListener('storage', handleStorageEvent);\n      \n      document.addEventListener('visibilitychange', () => {\n        debugLog('MBAo34invid3w Visibility change event:', document.visibilityState);\n        if (document.visibilityState === 'visible') {\n          handleWindowFocus();\n        }\n      });\n    }\n    \n    return () => {\n      if (focusCheckTimeout) {\n        clearTimeout(focusCheckTimeout);\n      }\n      \n      if (Platform.OS === 'web' && typeof window !== 'undefined' && typeof document !== 'undefined') {\n        window.removeEventListener('focus', handleWindowFocus);\n        window.removeEventListener('storage', handleStorageEvent);\n        document.removeEventListener('visibilitychange', handleWindowFocus);\n      }\n    };\n  }, [isSignedIn, is_prototype]);\n\n  // Initialize auth state with debounce protection for rapid refreshes\n  useEffect(() => {\n    let initTimeout;\n    \n    const init = async () => {\n      if (isInitializedRef.current) return;\n      \n      // Add small delay for web to prevent race conditions on rapid refresh\n      if (Platform.OS === 'web') {\n        await new Promise(resolve => setTimeout(resolve, 50));\n      }\n      \n      try {\n        debugLog('MBAo34invid3w Initializing auth state');\n        \n        const { hasAccessToken, hasRefreshToken } = await authService.current.initialize();\n        \n        debugLog('MBAo34invid3w Auth initialization result:', { hasAccessToken, hasRefreshToken });\n        \n        if (hasAccessToken || hasRefreshToken) {\n          debugLog('MBAo34invid3w Found stored tokens, validating...');\n          \n          // First, check if we have any valid token WITHOUT attempting refresh\n          // This prevents the user from seeing content while being actually logged out\n          let storedAccessToken = await getStorage('userToken');\n          let storedRefreshToken = await getStorage('refreshToken');\n          \n          debugLog('MBAo34invid3w Retrieved stored tokens:', {\n            hasAccessToken: !!storedAccessToken,\n            hasRefreshToken: !!storedRefreshToken,\n            accessTokenLength: storedAccessToken ? storedAccessToken.length : 0,\n            refreshTokenLength: storedRefreshToken ? storedRefreshToken.length : 0\n          });\n          \n          let hasValidToken = false;\n          \n          // Check if access token is valid (not expired)\n          if (storedAccessToken) {\n            const timeUntilExpiry = authService.current.getTimeUntilExpiry(storedAccessToken);\n            debugLog('MBAo34invid3w Access token expiry check:', {\n              timeUntilExpirySeconds: Math.round(timeUntilExpiry / 1000),\n              isExpired: timeUntilExpiry <= 0\n            });\n            if (timeUntilExpiry > 0) {\n              debugLog('MBAo34invid3w Access token is still valid');\n              hasValidToken = true;\n            } else {\n              debugLog('MBAo34invid3w Access token is expired');\n            }\n          }\n          \n          // If access token is expired, check if refresh token is valid\n          if (!hasValidToken && storedRefreshToken) {\n            const refreshTimeUntilExpiry = authService.current.getTimeUntilExpiry(storedRefreshToken);\n            debugLog('MBAo34invid3w Refresh token expiry check:', {\n              timeUntilExpirySeconds: Math.round(refreshTimeUntilExpiry / 1000),\n              isExpired: refreshTimeUntilExpiry <= 0\n            });\n            if (refreshTimeUntilExpiry > 0) {\n              debugLog('MBAo34invid3w Refresh token is valid, attempting token refresh');\n              try {\n                // Attempt to refresh the token\n                await authService.current.refreshTokens();\n                hasValidToken = true;\n                debugLog('MBAo34invid3w Token refresh successful during initialization');\n              } catch (error) {\n                debugLog('MBAo34invid3w Token refresh failed during initialization:', error);\n                hasValidToken = false;\n              }\n            } else {\n              debugLog('MBAo34invid3w Refresh token is also expired');\n            }\n          }\n          \n          if (hasValidToken) {\n            // Get the current valid token (either original or refreshed)\n            const token = await authService.current.getAccessToken();\n            if (token) {\n              try {\n                // Perform server-side validation to be absolutely sure\n                const isValid = await authService.current.validateToken(token);\n                debugLog('MBAo34invid3w Server-side token validation result:', isValid);\n                if (isValid) {\n                  debugLog('MBAo34invid3w Token validated successfully, setting up user session');\n                  setIsSignedIn(true);\n                  \n                  // Fetch user data\n                  await fetchUserName();\n                  const status = await getProfessionalStatus(token);\n                  \n                  // Check for stored user role preference\n                  let storedRole = null;\n                  try {\n                    storedRole = await getStorage('userRole');\n                  } catch (error) {\n                    console.error('MBA1111 Error getting stored role:', error);\n                  }\n                  \n                  // Use stored role if valid, otherwise use suggested role\n                  const finalRole = (storedRole && (storedRole === 'professional' || storedRole === 'petOwner')) \n                    ? storedRole \n                    : status.suggestedRole;\n                  \n                  debugLog('MBAo34invid3w Role selection:', { \n                    storedRole, \n                    suggestedRole: status.suggestedRole, \n                    finalRole,\n                    isApprovedProfessional: status.isApprovedProfessional \n                  });\n                  \n                  setUserRole(finalRole);\n                  setIsApprovedProfessional(status.isApprovedProfessional);\n                  await fetchTimeSettings();\n                  \n                  debugLog('MBAo34invid3w User session restored successfully');\n                } else {\n                  debugLog('MBAo34invid3w Server-side token validation failed, signing out');\n                  await signOut('server_validation_failed');\n                }\n              } catch (error) {\n                debugLog('MBAo34invid3w Error during token validation, signing out:', error);\n                await signOut('validation_error');\n              }\n            } else {\n              debugLog('MBAo34invid3w Could not retrieve access token, signing out');\n              await signOut('no_access_token');\n            }\n          } else {\n            debugLog('MBAo34invid3w No valid tokens found, signing out');\n            await signOut('no_valid_tokens');\n          }\n        } else {\n          // No tokens available - this is normal for new users\n          debugLog('MBAo34invid3w No tokens found during initialization - user needs to sign in');\n          // Don't call signOut here as it would trigger navigation for new users\n          // Just ensure they're in the signed out state\n          setIsSignedIn(false);\n          debugLog('MBAo34invid3w Set isSignedIn to false due to no tokens');\n        }\n      } catch (error) {\n        console.error('MBA1111 Error initializing auth state:', error);\n        await signOut('initialization_error');\n      } finally {\n        setLoading(false);\n        debugLog('MBAo34invid3w Auth initialization completed, loading set to false');\n        \n        isInitializedRef.current = true;\n        setIsInitialized(true);\n      }\n    };\n\n    // Use setTimeout to prevent rapid successive initialization attempts\n    initTimeout = setTimeout(init, Platform.OS === 'web' ? 10 : 0);\n    \n    return () => {\n      if (initTimeout) {\n        clearTimeout(initTimeout);\n      }\n    };\n  }, []);\n\n  // Fetch user name\n  const fetchUserName = async () => {\n    try {\n      debugLog('MBA1111 Fetching user name');\n      const userData = await getUserName();\n      debugLog('MBA1111 User name response:', userData);\n      setFirstName(userData.first_name);\n      setName(userData.name);\n    } catch (error) {\n      console.error('MBA1111 Error fetching user name:', error.response ? error.response.data : error.message);\n      setFirstName('');\n      setName('');\n    }\n  };\n\n  // Get professional status\n  const getProfessionalStatus = async (token) => {\n    try {\n      const response = await axios.get(`${API_BASE_URL}/api/professional-status/v1/`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      \n      debugLog('MBA1111 Professional status response:', response.data);\n\n      const { is_approved } = response.data;\n      \n      setIsApprovedProfessional(is_approved);\n      if (Platform.OS === 'web') {\n        localStorage.setItem('isApprovedProfessional', String(is_approved));\n      } else {\n        await AsyncStorage.setItem('isApprovedProfessional', String(is_approved));\n      }\n\n      return {\n        isApprovedProfessional: is_approved,\n        suggestedRole: is_approved ? 'professional' : 'petOwner'\n      };\n    } catch (error) {\n      console.error('MBA1111 Error getting professional status:', error.response?.data || error);\n      return {\n        isApprovedProfessional: false,\n        suggestedRole: 'petOwner'\n      };\n    }\n  };\n\n  // Sign in function\n  const signIn = async (token, refreshTokenValue, navigation) => {\n    try {\n      debugLog('MBA1111 Starting sign in process');\n\n      // Clear signing out flag\n      authService.current.isSigningOut = false;\n      \n      await authService.current.setTokens(token, refreshTokenValue);\n      setIsSignedIn(true);\n      \n      // Fetch user name immediately after setting tokens\n      await fetchUserName();\n      \n      // Fetch time settings immediately to ensure they're available\n      try {\n        const timeSettingsData = await getTimeSettings();\n        setTimeSettings(timeSettingsData);\n        debugLog('MBA1111 Time settings fetched during sign in:', timeSettingsData);\n      } catch (timeError) {\n        console.error('MBA1111 Error fetching time settings during sign in:', timeError);\n      }\n      \n      const status = await getProfessionalStatus(token);\n      const initialRole = status.suggestedRole;\n      \n      setUserRole(initialRole);\n      setIsApprovedProfessional(status.isApprovedProfessional);\n      \n      // Store the role\n      if (Platform.OS === 'web') {\n        localStorage.setItem('userRole', initialRole);\n      } else {\n        await AsyncStorage.setItem('userRole', initialRole);\n      }\n\n      debugLog('MBA1111 Sign in successful:', { initialRole, isApprovedProfessional: status.isApprovedProfessional });\n\n      // Navigate to dashboard after successful sign in\n      if (navigation) {\n        setTimeout(() => {\n          navigateToFrom(navigation, 'Dashboard', 'SignIn');\n        }, 0);\n      }\n\n      return {\n        userRole: initialRole,\n        isApprovedProfessional: status.isApprovedProfessional\n      };\n    } catch (error) {\n      debugLog('MBA1111 Sign in error:', error);\n      console.error('MBA1111 Error during sign in:', error);\n      throw error;\n    }\n  };\n\n  // Switch role function\n  const switchRole = async (navigation) => {\n    if (isApprovedProfessional) {\n      debugLog('MBA1111 Switching role, current role:', userRole);\n      \n      const newRole = userRole === 'professional' ? 'petOwner' : 'professional';\n      setUserRole(newRole);\n      try {\n        if (Platform.OS === \"web\") {\n          localStorage.setItem('userRole', newRole);\n        } else {\n          await AsyncStorage.setItem('userRole', newRole);\n        }\n        \n        // Navigate to Dashboard if switching to pet owner from Connections screen\n        const currentRoute = navigation?.getCurrentRoute?.()?.name;\n        if (newRole === 'petOwner' && currentRoute === 'Connections') {\n          debugLog('MBA1111 Navigating to Dashboard from Connections when switching to pet owner');\n          navigate('Dashboard');\n        }\n        \n        debugLog('MBA1111 Role switched to:', newRole);\n      } catch (error) {\n        console.error('MBA1111 Error updating role in storage:', error);\n      }\n    } else {\n      console.log('MBA1111 User is not an approved professional, cannot switch roles');\n    }\n  };\n\n  // Fetch time settings\n  const fetchTimeSettings = async () => {\n    if (is_prototype) return;\n    \n    try {\n      const settings = await getTimeSettings();\n      setTimeSettings(settings);\n      debugLog('MBA1111 Time settings response:', settings);\n    } catch (error) {\n      console.error('MBA1111 Error fetching time settings:', error.response ? error.response.data : error.message);\n    }\n  };\n\n  // Check auth status\n  const checkAuthStatus = async () => {\n    try {\n      const token = await authService.current.getAccessToken();\n      if (!token) {\n        return { isAuthenticated: false };\n      }\n\n      const isValid = await authService.current.validateToken(token);\n      if (!isValid) {\n        await signOut('auth_status_check_failed');\n        return { isAuthenticated: false };\n      }\n\n      debugLog('MBA1111 checkAuthStatus', { isAuthenticated: true, userRole, isApprovedProfessional });\n\n      return {\n        isAuthenticated: true,\n        userRole: userRole,\n        isApprovedProfessional: isApprovedProfessional\n      };\n    } catch (error) {\n      console.error('MBA1111 Error checking auth status:', error);\n      return { isAuthenticated: false };\n    }\n  };\n\n  // Screen width handling\n  useEffect(() => {\n    const handleDimensionsChange = ({ window }) => {\n      setScreenWidth(window.width);\n    };\n\n    const subscription = Dimensions.addEventListener('change', handleDimensionsChange);\n\n    return () => {\n      if (subscription?.remove) {\n        subscription.remove();\n      }\n    };\n  }, []);\n\n  // State consistency checker with enhanced detection and sessionStorage isolation\n  useEffect(() => {\n    if (loading || is_prototype) return;\n    \n    const checkStateConsistency = async () => {\n      try {\n        // Get both localStorage and sessionStorage state to understand what's happening\n        const localStorageUserToken = Platform.OS === 'web' ? localStorage.getItem('userToken') : null;\n        const localStorageRefreshToken = Platform.OS === 'web' ? localStorage.getItem('refreshToken') : null;\n        const sessionStorageUserToken = Platform.OS === 'web' ? sessionStorage.getItem('userToken') : null;\n        const sessionStorageRefreshToken = Platform.OS === 'web' ? sessionStorage.getItem('refreshToken') : null;\n        \n        const hasStoredTokens = !!(await getStorage('userToken')) || !!(await getStorage('refreshToken'));\n        const hasMemoryTokens = !!(authService.current.accessToken) || !!(authService.current.refreshToken);\n        \n        debugLog('MBAo34invid3w State consistency check:', {\n          isSignedIn,\n          hasStoredTokens,\n          hasMemoryTokens,\n          localStorageUserToken: !!localStorageUserToken,\n          localStorageRefreshToken: !!localStorageRefreshToken,\n          sessionStorageUserToken: !!sessionStorageUserToken,\n          sessionStorageRefreshToken: !!sessionStorageRefreshToken,\n          isSigningOut: authService.current.isSigningOut,\n          platform: Platform.OS\n        });\n        \n        // CRITICAL CHECK: If UI shows signed in but no tokens exist anywhere\n        if (isSignedIn && !hasStoredTokens && !hasMemoryTokens && !authService.current.isSigningOut) {\n          // Additional check: If localStorage has tokens but getStorage() doesn't find them,\n          // this might be a sessionStorage-only issue\n          if (Platform.OS === 'web' && (localStorageUserToken || localStorageRefreshToken)) {\n            debugLog('MBAo34invid3w POTENTIAL SESSIONSTORAGE ISSUE: localStorage has tokens but getStorage() failed - checking...');\n            \n            // Try to restore tokens from localStorage directly\n            if (localStorageUserToken) {\n              authService.current.accessToken = localStorageUserToken;\n            }\n            if (localStorageRefreshToken) {\n              authService.current.refreshToken = localStorageRefreshToken;\n            }\n            \n            debugLog('MBAo34invid3w Restored tokens from localStorage directly - continuing session');\n            return; // Don't sign out, let the session continue\n          }\n          \n          // BRAVE BROWSER RECOVERY: If we're signed in but no tokens anywhere, try to recover from memory\n          if (Platform.OS === 'web' && authService.current.accessToken) {\n            debugLog('MBAo34invid3w BRAVE BROWSER RECOVERY: Attempting to restore tokens from memory');\n            \n            // Restore tokens to localStorage from memory\n            localStorage.setItem('userToken', authService.current.accessToken);\n            if (authService.current.refreshToken) {\n              localStorage.setItem('refreshToken', authService.current.refreshToken);\n            }\n            \n            debugLog('MBAo34invid3w BRAVE BROWSER RECOVERY: Tokens restored from memory to localStorage');\n            return; // Don't sign out, let the session continue\n          }\n          \n          debugLog('MBAo34invid3w CRITICAL STATE INCONSISTENCY: UI shows signed in but no tokens exist - immediate redirect');\n          await signOut('state_inconsistency_no_tokens');\n          return;\n        }\n        \n        // ENHANCED CHECK: If UI shows signed in, verify tokens are actually valid\n        if (isSignedIn && (hasStoredTokens || hasMemoryTokens) && !authService.current.isSigningOut) {\n          const storedToken = await getStorage('userToken');\n          \n          // Check if stored token is expired\n          if (storedToken) {\n            const timeUntilExpiry = authService.current.getTimeUntilExpiry(storedToken);\n            debugLog('MBAo34invid3w Token expiry check in consistency:', {\n              timeUntilExpirySeconds: Math.round(timeUntilExpiry / 1000),\n              isExpired: timeUntilExpiry <= 0\n            });\n            if (timeUntilExpiry <= 0) {\n              debugLog('MBAo34invid3w CRITICAL STATE INCONSISTENCY: UI shows signed in but token is expired');\n              \n              // Check if refresh token can save us\n              const refreshToken = await getStorage('refreshToken');\n              if (refreshToken) {\n                const refreshTimeUntilExpiry = authService.current.getTimeUntilExpiry(refreshToken);\n                debugLog('MBAo34invid3w Refresh token expiry check in consistency:', {\n                  timeUntilExpirySeconds: Math.round(refreshTimeUntilExpiry / 1000),\n                  isExpired: refreshTimeUntilExpiry <= 0\n                });\n                if (refreshTimeUntilExpiry <= 0) {\n                  debugLog('MBAo34invid3w Refresh token also expired - forcing sign out');\n                  await signOut('state_inconsistency_all_tokens_expired');\n                  return;\n                } else {\n                  debugLog('MBAo34invid3w Attempting emergency token refresh');\n                  try {\n                    await authService.current.refreshTokens();\n                    debugLog('MBAo34invid3w Emergency token refresh successful');\n                  } catch (error) {\n                    debugLog('MBAo34invid3w Emergency token refresh failed, signing out');\n                    await signOut('state_inconsistency_refresh_failed');\n                    return;\n                  }\n                }\n              } else {\n                debugLog('MBAo34invid3w No refresh token available, signing out');\n                await signOut('state_inconsistency_no_refresh_token');\n                return;\n              }\n            }\n          }\n        }\n        \n        // If we think user is not signed in but tokens exist\n        if (!isSignedIn && (hasStoredTokens || hasMemoryTokens) && !authService.current.isSigningOut) {\n          debugLog('MBAo34invid3w STATE INCONSISTENCY DETECTED: UI shows signed out but tokens exist');\n          \n          // Try to restore the session\n          try {\n            const token = await authService.current.getAccessToken();\n            if (token) {\n              const isValid = await authService.current.validateToken(token);\n              debugLog('MBAo34invid3w Token validation for session restoration:', isValid);\n              if (isValid) {\n                debugLog('MBAo34invid3w Restoring session with valid tokens');\n                \n                setIsSignedIn(true);\n                await fetchUserName();\n                const status = await getProfessionalStatus(token);\n                setUserRole(status.suggestedRole);\n                setIsApprovedProfessional(status.isApprovedProfessional);\n                return;\n              }\n            }\n          } catch (error) {\n            debugLog('MBAo34invid3w Failed to restore session:', error);\n          }\n          \n          // If restoration failed, clear everything\n          await signOut('state_inconsistency_invalid_tokens');\n        }\n      } catch (error) {\n        debugLog('MBAo34invid3w Error in state consistency check:', error);\n        \n        // If there's an error in consistency checking and we think we're signed in,\n        // be safe and sign out to avoid confused state\n        if (isSignedIn) {\n          debugLog('MBAo34invid3w Error during consistency check while signed in - signing out for safety');\n          await signOut('state_consistency_check_error');\n        }\n      }\n    };\n    \n    // Run initial check after a shorter delay for faster detection\n    const initialCheck = setTimeout(checkStateConsistency, 1000);\n    \n    // Run periodic checks more frequently for better responsiveness\n    const consistencyInterval = setInterval(checkStateConsistency, 15000); // Every 15 seconds\n    \n    return () => {\n      clearTimeout(initialCheck);\n      clearInterval(consistencyInterval);\n    };\n  }, [isSignedIn, loading, is_prototype]);\n\n  // Token refresh monitoring with PROACTIVE refresh triggers and localStorage persistence check\n  useEffect(() => {\n    if (!isSignedIn || is_prototype) return;\n    \n    const monitorAndRefreshToken = async () => {\n      try {\n        // Get the current token (this will automatically refresh if needed)\n        const token = await authService.current.getAccessToken();\n        \n        if (token) {\n          const timeUntilExpiry = authService.current.getTimeUntilExpiry(token);\n          const shouldRefresh = authService.current.shouldRefreshToken(token);\n          \n          debugLog('MBAo34invid3w Token monitor check:', {\n            timeUntilExpirySeconds: Math.round(timeUntilExpiry / 1000),\n            shouldRefresh,\n            isRefreshing: authService.current.isRefreshing,\n            platform: Platform.OS\n          });\n          \n          if (timeUntilExpiry < 0) {\n            debugLog('MBAo34invid3w TOKEN EXPIRED DETECTED in monitor');\n          }\n          \n          // PROACTIVE REFRESH: If token should be refreshed, trigger it now\n          if (shouldRefresh && !authService.current.isRefreshing) {\n            debugLog('MBAo34invid3w Token monitor triggering proactive refresh');\n            try {\n              await authService.current.refreshTokens();\n              debugLog('MBAo34invid3w Proactive token refresh completed successfully');\n            } catch (error) {\n              debugLog('MBAo34invid3w Proactive token refresh failed:', error);\n            }\n          }\n          \n          // BRAVE BROWSER SAFEGUARD: Ensure tokens are always in localStorage\n          if (Platform.OS === 'web') {\n            const localStorageToken = localStorage.getItem('userToken');\n            const localStorageRefreshToken = localStorage.getItem('refreshToken');\n            \n            if (!localStorageToken && token) {\n              debugLog('MBAo34invid3w BRAVE SAFEGUARD: Token missing from localStorage, restoring');\n              localStorage.setItem('userToken', token);\n            }\n            \n            if (!localStorageRefreshToken && authService.current.refreshToken) {\n              debugLog('MBAo34invid3w BRAVE SAFEGUARD: Refresh token missing from localStorage, restoring');\n              localStorage.setItem('refreshToken', authService.current.refreshToken);\n            }\n          }\n        } else {\n          debugLog('MBAo34invid3w Token monitor: No token available');\n        }\n      } catch (error) {\n        debugLog('MBAo34invid3w Error in token monitor:', error);\n      }\n    };\n    \n    // Monitor every 2 seconds during testing\n    const monitorInterval = setInterval(monitorAndRefreshToken, 2000);\n    \n    return () => clearInterval(monitorInterval);\n  }, [isSignedIn, is_prototype]);\n\n  // Debug function to check token status\n  const debugTokenStatus = () => {\n    const token = authService.current.accessToken;\n    if (!token) {\n      debugLog('MBA1111 No access token available');\n      return;\n    }\n    \n    const timeUntilExpiry = authService.current.getTimeUntilExpiry(token);\n    const isExpired = timeUntilExpiry <= 0;\n    const shouldRefresh = authService.current.shouldRefreshToken(token);\n    \n    debugLog('MBA1111 Token status:', {\n      hasToken: !!token,\n      timeUntilExpirySeconds: Math.round(timeUntilExpiry / 1000),\n      isExpired,\n      shouldRefresh,\n      isRefreshing: authService.current.isRefreshing,\n      isSigningOut: authService.current.isSigningOut\n    });\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        isSignedIn,\n        userRole,\n        isApprovedProfessional,\n        loading,\n        isInitialized,\n        screenWidth,\n        firstName,\n        name,\n        is_prototype,\n        is_DEBUG,\n        is_PRODUCTION,\n        timeSettings,\n        isCollapsed,\n        setIsCollapsed,\n        signIn,\n        signOut,\n        switchRole,\n        setIsDebug,\n        setIsPrototype,\n        checkAuthStatus,\n        fetchTimeSettings,\n        debugTokenStatus,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n","import React, { createContext, useState, useEffect, useContext, useRef } from 'react';\nimport { AuthContext, debugLog } from './AuthContext';\nimport { getUnreadMessageCount } from '../api/API';\nimport websocketManager from '../utils/websocket';\nimport { getStorage } from './AuthContext';\nimport { Platform } from 'react-native';\n\n// Create the context\nexport const MessageNotificationContext = createContext();\n\nexport const MessageNotificationProvider = ({ children }) => {\n  const { isSignedIn, userRole } = useContext(AuthContext);\n  \n  // State for notification badges\n  const [hasUnreadMessages, setHasUnreadMessages] = useState(false);\n  const [unreadCount, setUnreadCount] = useState(0);\n  // Add role-specific counts for more accurate notification management\n  const [ownerUnreadCount, setOwnerUnreadCount] = useState(0);\n  const [professionalUnreadCount, setProfessionalUnreadCount] = useState(0);\n  const [conversationCounts, setConversationCounts] = useState({});\n  const [currentRoute, setCurrentRoute] = useState('');\n  const [lastApiResponse, setLastApiResponse] = useState(null);\n  \n  // State for WebSocket management\n  const [websocketConnected, setWebsocketConnected] = useState(false);\n  const [websocketInitialized, setWebsocketInitialized] = useState(false);\n  const [lastApiCheck, setLastApiCheck] = useState(0);\n  \n  // Use refs to track initialization state and prevent duplicate calls\n  const initialCheckDoneRef = useRef(false);\n  const pendingCheckRef = useRef(false);\n  const reconnectIntervalRef = useRef(null);\n  const debounceTimerRef = useRef(null);\n  const websocketDataReceivedRef = useRef(false);\n  const lastCheckTimeRef = useRef(0);  // Track last time we checked\n  const MIN_CHECK_INTERVAL = 5000; // Minimum 5 seconds between API checks\n  \n  // Ref to track connection health (separate from connected state)\n  const connectionHealthyRef = useRef(false);\n  // Track WebSocket initialization and reconnect attempts\n  const websocketInitializedRef = useRef(false);\n  const websocketRetryAttemptsRef = useRef(0);\n  const MAX_WEBSOCKET_RETRIES = 12; // After 12 retries (60 seconds), fall back to API\n  const WEBSOCKET_RETRY_INTERVAL = 5000; // 5 second wait between retries\n  \n  // Add connection status tracking\n  const lastHeartbeatReceivedRef = useRef(0);\n  const lastHeartbeatSentRef = useRef(0);\n  const heartbeatTimeoutRef = useRef(null); // Track if connection is healthy\n  const HEARTBEAT_TIMEOUT = 40000; // 40 seconds timeout for heartbeat responses\n  \n  // Add session-based flag to track if we already made an API call in this session\n  const initialApiCallMadeRef = useRef(false);\n  // Timeout ref for WebSocket heartbeat check\n  const websocketTimeoutRef = useRef(null);\n  // Add a lastApiCheckRef at the top of the component with other refs\n  const lastApiCheckRef = useRef(0);\n  \n  // Ref to track user role changes\n  const prevUserRoleRef = useRef(null);\n\n  // Function to check if we have unread messages based on conversations\n  const checkUnreadMessages = async (force = false) => {\n    try {\n      // If there's already a check in progress, don't start another one\n      if (pendingCheckRef.current) {\n        debugLog('MBA4321: Skipping unread check - another check is already in progress');\n        return hasUnreadMessages;\n      }\n      \n      // Stack trace logging to help identify what's triggering API calls\n      const stackTrace = new Error().stack;\n      debugLog(`MBA4321: checkUnreadMessages called from:\\n${stackTrace}`);\n      \n      // Set pending flag before proceeding\n      pendingCheckRef.current = true;\n      \n      // For forced refreshes, we should just make the API call immediately\n      if (force) {\n        debugLog('MBA432wihe21: Forced API call for unread messages');\n        return await makeApiCall();\n      }\n\n      // NEW LOGIC: Check if websocket is connected first\n      const websocketConnected = websocketManager && websocketManager.isWebSocketConnected();\n      debugLog(`MBA4321: WebSocket connected: ${websocketConnected}`);\n      \n      // If WebSocket is connected and we've received data, return current state - no API call needed\n      if (websocketConnected && websocketDataReceivedRef.current) {\n        debugLog('MBA4321: WebSocket is connected and data received, using current state');\n        pendingCheckRef.current = false;\n        return hasUnreadMessages;\n      }\n      \n      // Check if this is a page load (first time check)\n      if (!initialApiCallMadeRef.current) {\n        debugLog('MBA4321: First check on page load, implementing progressive WebSocket wait');\n        \n        // Clear any existing timeout\n        if (websocketTimeoutRef.current) {\n          clearTimeout(websocketTimeoutRef.current);\n        }\n        \n        // Wait for WebSocket using progressive checks, with final API fallback\n        return await waitForWebSocketWithFallback();\n      }\n      \n      // We already made an initial call for this session and WebSocket isn't connected\n      // However, we're not forcing a refresh, so just use current state\n      debugLog('MBA4321: Using existing state, we already made an initial API call');\n      pendingCheckRef.current = false;\n      return hasUnreadMessages;\n    } catch (error) {\n      debugLog('MBA4321: Error in checkUnreadMessages:', error);\n      pendingCheckRef.current = false;\n      return hasUnreadMessages;\n    }\n  };\n\n  // Function to wait for WebSocket with progressive checks and final API fallback\n  const waitForWebSocketWithFallback = async () => {\n    // Reset attempt counter\n    websocketRetryAttemptsRef.current = 0;\n    \n    // IMPORTANT: If this is a fresh page load, ALWAYS make an API call first to get accurate state\n    // The problem was that we would rely only on WebSocket which might miss messages that arrived\n    // while the user was offline\n    if (!initialApiCallMadeRef.current) {\n      debugLog('MBA432wihe21: Fresh page load - making initial API call to get accurate unread count');\n      return await makeApiCall();\n    }\n    \n    return new Promise((resolve) => {\n      // Define the progressive check function\n      const checkWebSocketAndWait = () => {\n        // First check if WebSocket is connected\n        const connected = websocketManager && websocketManager.isWebSocketConnected();\n        \n        // Check if we've received any data (either from WebSocket or separate handlers)\n        if (websocketDataReceivedRef.current) {\n          debugLog('MBA4321: WebSocket data received during wait, using current state');\n          pendingCheckRef.current = false;\n          resolve(hasUnreadMessages);\n          return;\n        }\n        \n        // Increment attempt counter\n        websocketRetryAttemptsRef.current++;\n        debugLog(`MBA4321: WebSocket wait attempt ${websocketRetryAttemptsRef.current}/${MAX_WEBSOCKET_RETRIES}, connected: ${connected}`);\n        \n        // If connected, send a heartbeat to check if we get a response\n        if (connected) {\n          debugLog('MBA4321: WebSocket is connected, sending heartbeat request');\n          websocketManager.send('heartbeat', { timestamp: Date.now() });\n          lastHeartbeatSentRef.current = Date.now();\n        }\n        \n        // If reached max attempts, fall back to API\n        if (websocketRetryAttemptsRef.current >= MAX_WEBSOCKET_RETRIES) {\n          debugLog('MBA432wihe21: Max WebSocket wait attempts reached, falling back to API');\n          // Make the API call and resolve with its result\n          makeApiCall().then(result => resolve(result));\n          return;\n        }\n        \n        // Schedule next check (after 5-second wait)\n        websocketTimeoutRef.current = setTimeout(checkWebSocketAndWait, WEBSOCKET_RETRY_INTERVAL);\n      };\n      \n      // Start the first check\n      checkWebSocketAndWait();\n    });\n  };\n  \n  // Extract API call logic to separate function\n  const makeApiCall = async () => {\n    // Add new logging with the special prefix\n    debugLog('MBA432wihe21: makeApiCall called, checking if necessary');\n    \n    // Check if we've made an API call in the last minute (60000ms)\n    // This prevents frequent API calls which can disrupt components like BookingApprovalModal\n    const now = Date.now();\n    const timeSinceLastCheck = now - lastApiCheckRef.current;\n    \n    // Skip API calls if we've checked in the last minute, unless the connection is unhealthy\n    if (timeSinceLastCheck < 60000 && websocketDataReceivedRef.current && connectionHealthyRef.current) {\n      debugLog('MBA432wihe21: Skipping API call - checked recently and connection is healthy');\n      return hasUnreadMessages;\n    }\n    \n    debugLog('MBA432wihe21: Making API call for unread messages');\n    \n    try {\n      // Call the API to get unread message count\n      const result = await getUnreadMessageCount();\n      const count = result.unread_count || 0;\n      const conversationUnreadCounts = result.conversation_counts || {};\n      \n      debugLog('MBA432wihe21: Unread message count from API:', count);\n      \n      // Process conversation data to determine role-specific unread counts\n      let ownerCount = 0;\n      let proCount = 0;\n      \n      // Analyze the conversation_counts to separate by role\n      if (result.conversation_role_map) {\n        // If the API returns a role map, use it directly\n        ownerCount = result.owner_unread_count || 0;\n        proCount = result.professional_unread_count || 0;\n        \n        debugLog('MBA432wihe21: Got role-specific counts from API', {\n          ownerCount,\n          proCount\n        });\n      } else {\n        // Otherwise, we need to infer from what's available\n        // This is a fallback and won't be needed once the API is updated\n        \n        // We'll assume that the API already filters by the current role\n        // So all counts are for the current role\n        if (userRole === 'petOwner') {\n          ownerCount = count;\n        } else {\n          proCount = count;\n        }\n        \n        debugLog('MBA432wihe21: Inferred role-specific counts', {\n          userRole,\n          ownerCount,\n          proCount,\n          totalCount: count\n        });\n      }\n      \n      // Update the API response cache\n      setLastApiResponse({\n        unread_count: count,\n        conversation_counts: conversationUnreadCounts,\n        owner_unread_count: ownerCount,\n        professional_unread_count: proCount,\n        timestamp: now\n      });\n      \n      // Update state based on API response\n      setUnreadCount(count);\n      setOwnerUnreadCount(ownerCount);\n      setProfessionalUnreadCount(proCount);\n      \n      // Only set hasUnreadMessages based on the current role's count\n      const currentRoleCount = userRole === 'petOwner' ? ownerCount : proCount;\n      setHasUnreadMessages(currentRoleCount > 0);\n      \n      setConversationCounts(conversationUnreadCounts);\n      setLastApiCheck(now);\n      lastCheckTimeRef.current = now;\n      lastApiCheckRef.current = now;\n      \n      // Mark initialization as complete\n      initialCheckDoneRef.current = true;\n      \n      // Mark that we've made an API call in this session\n      initialApiCallMadeRef.current = true;\n      \n      // Mark that we've received data\n      websocketDataReceivedRef.current = true;\n      \n      // Clear pending flag\n      pendingCheckRef.current = false;\n      \n      return count > 0;\n    } catch (error) {\n      debugLog('MBA432wihe21: Error in API call:', error);\n      pendingCheckRef.current = false;\n      return hasUnreadMessages;\n    }\n  };\n\n  // Debounced version of checkUnreadMessages to prevent excessive API calls\n  const debouncedCheckUnreadMessages = (force = false) => {\n    // Clear any existing timer\n    if (debounceTimerRef.current) {\n      clearTimeout(debounceTimerRef.current);\n    }\n    \n    // Set a new timer to delay the API call\n    debounceTimerRef.current = setTimeout(() => {\n      checkUnreadMessages(force);\n      debounceTimerRef.current = null;\n    }, 300); // 300ms debounce time\n  };\n\n  // Check how many unread messages a specific conversation has\n  const getConversationUnreadCount = (conversationId) => {\n    if (!conversationId) return 0;\n    const count = conversationCounts[conversationId] || 0;\n    \n    // Add logging for debugging unread counts\n    if (count > 0) {\n      debugLog(`MBA2o3uihf48hv: getConversationUnreadCount for ${conversationId}`, {\n        conversationId,\n        count,\n        allCounts: JSON.stringify(conversationCounts),\n        totalUnreadCount: unreadCount,\n        hasUnreadMessages\n      });\n    }\n    \n    return count;\n  };\n\n  // Check if user is currently on the Messages screen\n  const isOnMessagesScreen = () => {\n    return currentRoute === 'MessageHistory';\n  };\n\n  // Function to handle incoming new messages\n  const onNewMessage = (messageData) => {\n    debugLog('MBA3uiobv59u: onNewMessage called with data:', messageData);\n    \n    // Only create notification if the message is from another user\n    if (messageData && messageData.sent_by_other_user) {\n      const conversationId = messageData.conversation_id;\n      \n      // Check if user is viewing this specific conversation\n      if (isOnMessagesScreen() && conversationId && \n          typeof window !== 'undefined' && String(conversationId) === String(window.selectedConversationId)) {\n        debugLog('MBA3uiobv59u: User is viewing this conversation, not creating notification');\n        return;\n      }\n      \n      // Determine which role this message is for\n      const messageRole = messageData.message_role || messageData.conversation_role;\n      \n      // IMPROVED ROLE DETECTION: Check sender role/type and recipient role to better determine\n      // which role the message belongs to\n      let isForOwnerRole = messageRole === 'petOwner' || messageRole === 'owner';\n      let isForProfessionalRole = messageRole === 'professional';\n      \n      // If message doesn't have explicit role, try to infer from other data\n      if (!isForOwnerRole && !isForProfessionalRole) {\n        if (messageData.recipient_role) {\n          // If we have recipient role, use that directly\n          isForOwnerRole = messageData.recipient_role === 'petOwner' || messageData.recipient_role === 'owner';\n          isForProfessionalRole = messageData.recipient_role === 'professional';\n        } else if (messageData.sender_type) {\n          // If sender is professional, message is likely for pet owner and vice versa\n          isForOwnerRole = messageData.sender_type === 'professional';\n          isForProfessionalRole = messageData.sender_type === 'petOwner' || messageData.sender_type === 'owner';\n        }\n      }\n      \n      debugLog('MBA3uiobv59u: Message role information:', {\n        conversationId,\n        messageRole,\n        isForOwnerRole,\n        isForProfessionalRole,\n        currentUserRole: userRole,\n        recipientRole: messageData.recipient_role,\n        senderType: messageData.sender_type\n      });\n      \n      // Update total unread count\n      setUnreadCount(prevCount => {\n        const newCount = prevCount + 1;\n        debugLog(`MBA3uiobv59u: Total unread count: ${prevCount} → ${newCount}`);\n        return newCount;\n      });\n      \n      // CRITICAL: Always set hasUnreadMessages to true when receiving a new message\n      // This ensures the Messages tab shows notification regardless of role specifics\n      setHasUnreadMessages(true);\n      debugLog('MBA3uiobv59u: Setting hasUnreadMessages=true for all new messages');\n      \n      // If we've successfully identified a specific role for this message\n      if (isForOwnerRole || isForProfessionalRole) {\n        // Only update the count for the specific role this message is for\n        if (isForOwnerRole) {\n          // This message is for the owner role\n          setOwnerUnreadCount(prevCount => {\n            const newCount = prevCount + 1;\n            debugLog(`MBA3uiobv59u: Owner unread count: ${prevCount} → ${newCount}`);\n            return newCount;\n          });\n        } else if (isForProfessionalRole) {\n          // This message is for the professional role\n          setProfessionalUnreadCount(prevCount => {\n            const newCount = prevCount + 1;\n            debugLog(`MBA3uiobv59u: Professional unread count: ${prevCount} → ${newCount}`);\n            return newCount;\n          });\n        }\n      } else {\n        // Role is still ambiguous even after attempts to infer\n        debugLog('MBA3uiobv59u: Message role still ambiguous, logging all available message data');\n        \n        // Full debug log of the entire message data to see what we have available\n        // This should help us find the is_professional field if it exists\n        debugLog('MBA3uiobv59u: FULL MESSAGE DATA:', JSON.stringify(messageData, null, 2));\n        \n        // Check if we have is_professional in the message data\n        const userIsProfessionalInConversation = messageData.is_professional === true;\n        \n        debugLog('MBA3uiobv59u: User professional status in conversation:', {\n          is_professional: messageData.is_professional,\n          userIsProfessionalInConversation\n        });\n        \n        // If we know the user's role in this conversation, update the appropriate count\n        if (typeof messageData.is_professional === 'boolean') {\n          if (userIsProfessionalInConversation) {\n            // User is a professional in this conversation, so message is for professional\n            setProfessionalUnreadCount(prevCount => {\n              const newCount = prevCount + 1;\n              debugLog(`MBA3uiobv59u: Professional unread count (from is_professional): ${prevCount} → ${newCount}`);\n              return newCount;\n            });\n          } else {\n            // User is an owner in this conversation, so message is for owner\n            setOwnerUnreadCount(prevCount => {\n              const newCount = prevCount + 1;\n              debugLog(`MBA3uiobv59u: Owner unread count (from is_professional): ${prevCount} → ${newCount}`);\n              return newCount;\n            });\n          }\n        } else {\n          // If we don't have is_professional, try other methods\n          \n          // For now, as a stopgap measure, update both counts\n          // This ensures notifications appear for both roles\n          // This isn't ideal, but it's better than missing notifications\n          setProfessionalUnreadCount(prevCount => {\n            const newCount = prevCount + 1;\n            debugLog(`MBA3uiobv59u: Professional unread count (fallback): ${prevCount} → ${newCount}`);\n            return newCount;\n          });\n          \n          setOwnerUnreadCount(prevCount => {\n            const newCount = prevCount + 1;\n            debugLog(`MBA3uiobv59u: Owner unread count (fallback): ${prevCount} → ${newCount}`);\n            return newCount;\n          });\n          \n          debugLog('MBA3uiobv59u: WARNING: Updated both counts because is_professional is missing');\n        }\n        \n        // Also log current state for debugging\n        debugLog('MBA3uiobv59u: Current state for reference:', {\n          userRole,\n          hasUnreadMessages,\n          unreadCount,\n          ownerUnreadCount,\n          professionalUnreadCount,\n          conversationId: messageData.conversation_id,\n          is_professional: messageData.is_professional\n        });\n      }\n      \n      // If we have a conversation ID, update that count too\n      if (conversationId) {\n        setConversationCounts(prevCounts => {\n          const prevConvCount = prevCounts[conversationId] || 0;\n          const newConvCount = prevConvCount + 1;\n          \n          debugLog(`MBA3uiobv59u: Conversation ${conversationId} count: ${prevConvCount} → ${newConvCount}`);\n          \n          return {\n            ...prevCounts,\n            [conversationId]: newConvCount\n          };\n        });\n      }\n    }\n  };\n\n  // Initialize global variable to track selected conversation across components\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      window.selectedConversationId = null;\n    }\n  }, []);\n\n  // Mark a specific conversation as read\n  const markConversationAsRead = async (conversationId) => {\n    debugLog('MBA2o3uihf48hv: Marking conversation as read:', {\n      conversationId,\n      hasUnreadMessages,\n      totalUnreadCount: unreadCount,\n      ownerUnreadCount,\n      professionalUnreadCount,\n      userRole,\n      conversationUnreadCount: conversationCounts[conversationId] || 0,\n      allConversationCounts: JSON.stringify(conversationCounts)\n    });\n    \n    // Update the global variable to track which conversation is currently selected\n    if (typeof window !== 'undefined') {\n      window.selectedConversationId = conversationId;\n    }\n    \n    // Clear this conversation's unread count from local state\n    if (conversationId && conversationCounts[conversationId]) {\n      const previousCount = conversationCounts[conversationId] || 0;\n      \n      debugLog('MBA2o3uihf48hv: Found unread messages to clear', {\n        conversationId,\n        previousCount,\n        currentTotalUnread: unreadCount\n      });\n      \n      // IMPORTANT: Force immediate update of unreadCount first before updating state\n      // This helps ensure the UI updates properly\n      const newTotalCount = Math.max(0, unreadCount - previousCount);\n      debugLog(`MBA2o3uihf48hv: DIRECTLY updating total unread count from ${unreadCount} to ${newTotalCount}`);\n      \n      // Update unread count directly first to ensure immediate UI update\n      setUnreadCount(newTotalCount);\n      \n      // If this was the only conversation with unread messages, explicitly set hasUnreadMessages to false\n      if (newTotalCount === 0) {\n        debugLog(`MBA2o3uihf48hv: No more unread messages, setting hasUnreadMessages to false`);\n        setHasUnreadMessages(false);\n      }\n      \n      // Create new conversation counts object without this conversation\n      const newCounts = { ...conversationCounts };\n      delete newCounts[conversationId];\n      setConversationCounts(newCounts);\n      \n      // Calculate new role-specific counts\n      let newOwnerCount = ownerUnreadCount;\n      let newProCount = professionalUnreadCount;\n      \n      // IMPORTANT: Only update the count for the CURRENT role\n      // This fixes the issue where both role counts were being updated when a message was read\n      if (userRole === 'petOwner') {\n        // Only decrement owner count\n        newOwnerCount = Math.max(0, ownerUnreadCount - previousCount);\n        debugLog(`MBA2o3uihf48hv: Updating owner unread count: ${ownerUnreadCount} → ${newOwnerCount}`);\n        setOwnerUnreadCount(newOwnerCount);\n      } else if (userRole === 'professional') {\n        // Only decrement professional count\n        newProCount = Math.max(0, professionalUnreadCount - previousCount);\n        debugLog(`MBA2o3uihf48hv: Updating professional unread count: ${professionalUnreadCount} → ${newProCount}`);\n        setProfessionalUnreadCount(newProCount);\n      }\n      \n      // Update API response cache if we have it\n      if (lastApiResponse) {\n        const updatedCounts = { ...lastApiResponse.conversation_counts };\n        delete updatedCounts[conversationId];\n        \n        debugLog('MBA2o3uihf48hv: Updated role-specific counts after marking as read', {\n          userRole,\n          previousOwnerCount: ownerUnreadCount,\n          previousProCount: professionalUnreadCount,\n          newOwnerCount,\n          newProCount,\n          conversationId,\n          conversationCount: previousCount\n        });\n        \n        setLastApiResponse({\n          unread_count: newTotalCount,\n          conversation_counts: updatedCounts,\n          owner_unread_count: newOwnerCount,\n          professional_unread_count: newProCount,\n          timestamp: Date.now()\n        });\n      }\n      \n      // Update hasUnreadMessages based on whether any conversations still have unread messages\n      // for the CURRENT role\n      const currentRoleHasUnread = userRole === 'petOwner' ? newOwnerCount > 0 : newProCount > 0;\n      setHasUnreadMessages(currentRoleHasUnread);\n      \n      debugLog(`MBA2o3uihf48hv: After marking conversation ${conversationId} as read:`, {\n        userRole,\n        currentRoleHasUnread,\n        newOwnerCount,\n        newProCount,\n        hasUnreadMessages: currentRoleHasUnread,\n        conversationsRemaining: Object.keys(newCounts).length\n      });\n      \n      // List remaining unread conversations\n      if (Object.keys(newCounts).length > 0) {\n        const remainingConvs = Object.keys(newCounts).map(id => `${id}:${newCounts[id]}`).join(', ');\n        debugLog(`MBA2o3uihf48hv: Remaining unread conversations: ${remainingConvs}`);\n      } else {\n        debugLog('MBA2o3uihf48hv: No remaining unread conversations');\n      }\n    } else {\n      debugLog('MBA2o3uihf48hv: No unread messages found for this conversation', {\n        conversationId,\n        conversationCounts: JSON.stringify(conversationCounts)\n      });\n    }\n    \n    // The backend automatically marks messages as read when \n    // get_conversation_messages is called, so we don't need to make another API call here\n    \n    debugLog('MBA2o3uihf48hv: Updated unread state after marking conversation as read');\n  };\n\n  // Update route information\n  const updateRoute = (routeName) => {\n    if (routeName && routeName !== currentRoute) {\n      setCurrentRoute(routeName);\n    }\n  };\n\n  // Initialize WebSocket connection when signed in - do this once globally\n  useEffect(() => {\n    const initializeWebSocket = async () => {\n      if (!isSignedIn) {\n        if (websocketInitialized) {\n          debugLog('MBA4321: User signed out, force disconnecting WebSocket');\n          websocketManager.disconnect(true); // Force disconnect on sign-out\n          setWebsocketInitialized(false);\n          \n          // Clear any reconnect interval\n          if (reconnectIntervalRef.current) {\n            clearInterval(reconnectIntervalRef.current);\n            reconnectIntervalRef.current = null;\n          }\n          \n          // Clear any WebSocket timeout\n          if (websocketTimeoutRef.current) {\n            clearTimeout(websocketTimeoutRef.current);\n            websocketTimeoutRef.current = null;\n          }\n          \n          // Clear heartbeat timeout\n          if (heartbeatTimeoutRef.current) {\n            clearTimeout(heartbeatTimeoutRef.current);\n            heartbeatTimeoutRef.current = null;\n          }\n          \n          // Reset retry attempts and connection state\n          websocketRetryAttemptsRef.current = 0;\n          setWebsocketDataReceivedRef(false);\n          connectionHealthyRef.current = false;\n          initialApiCallMadeRef.current = false;\n        }\n        return;\n      }\n    \n      try {\n        const token = await getStorage('userToken');\n        if (!token) {\n          debugLog('MBA4321: No token available for WebSocket connection');\n          return;\n        }\n        \n        debugLog('MBA4321: Initializing WebSocket connection');\n        websocketManager.init(token);\n        setWebsocketInitialized(true);\n        \n        // Reset WebSocket retry attempts when initialization starts\n        websocketRetryAttemptsRef.current = 0;\n        \n        // IMPORTANT: Always make an initial API call on page load/refresh to get accurate count\n        // This ensures we start with the correct server state\n        setTimeout(() => {\n          debugLog('MBA432wihe21: Forcing initial API check on page load to get accurate count');\n          makeApiCall();\n        }, 500);\n      } catch (error) {\n        debugLog('MBA4321: Error initializing WebSocket:', error);\n      }\n    };\n    \n    // Function to check WebSocket connection health\n    const checkConnectionHealth = () => {\n      // Only proceed if signed in and initialized\n      if (!isSignedIn || !websocketInitialized) return;\n      \n      const now = Date.now();\n      const timeSinceLastHeartbeat = now - lastHeartbeatReceivedRef.current;\n      \n      // Log the current connection state\n      debugLog(`MBA4321: Connection health check - Last heartbeat: ${timeSinceLastHeartbeat}ms ago`);\n      \n      // If we haven't received a heartbeat in a while, connection might be dead\n      if (timeSinceLastHeartbeat > HEARTBEAT_TIMEOUT) {\n        debugLog('MBA4321: Connection seems unhealthy, attempting reconnection');\n        connectionHealthyRef.current = false;\n        \n        // Reset the WebSocket data received flag if connection is unhealthy\n        setWebsocketDataReceivedRef(false);\n        \n        // Attempt to reconnect\n        websocketManager.reconnectIfNeeded();\n        \n        // Start progressive retry only if we haven't received data in a while\n        if (timeSinceLastHeartbeat > 120000) { // 2 minutes\n          startProgressiveWebSocketRetry();\n        }\n      } else {\n        // Connection seems healthy, just send a heartbeat to keep it alive\n        debugLog('MBA4321: Connection seems healthy, sending heartbeat');\n        connectionHealthyRef.current = true;\n        \n        // Send heartbeat to keep connection alive\n        if (websocketManager && websocketManager.isWebSocketConnected()) {\n          websocketManager.send('heartbeat', { timestamp: now });\n          lastHeartbeatSentRef.current = now;\n        }\n      }\n    };\n    \n    // Function to progressively retry WebSocket connection with API fallback\n    const startProgressiveWebSocketRetry = () => {\n      debugLog('MBA4321: Starting progressive WebSocket retry');\n      \n      // Reset retry counter if we're starting fresh\n      if (initialCheckDoneRef.current) {\n        websocketRetryAttemptsRef.current = 0;\n      }\n      \n      // If we've already received WebSocket data, no need to retry\n      if (websocketDataReceivedRef.current) {\n        debugLog('MBA4321: WebSocket data already received, skipping retry process');\n        return;\n      }\n      \n      // Check if the WebSocket is already connected\n      const isConnected = websocketManager && websocketManager.isWebSocketConnected();\n      if (isConnected) {\n        debugLog('MBA4321: WebSocket is already connected, sending heartbeat to verify');\n        websocketManager.send('heartbeat', { timestamp: Date.now() });\n        lastHeartbeatSentRef.current = Date.now();\n        \n        // Set a single timeout to check if we got heartbeat response\n        websocketTimeoutRef.current = setTimeout(() => {\n          if (!websocketDataReceivedRef.current) {\n            debugLog('MBA432wihe21: No heartbeat response received, falling back to API');\n            checkUnreadMessages(true);\n          }\n        }, 5000); // Wait 5 seconds for heartbeat response\n        \n        return;\n      }\n      \n      // WebSocket isn't connected, let's use our waitForWebSocketWithFallback\n      // which is already implemented in checkUnreadMessages\n      checkUnreadMessages(false);\n    };\n    \n    initializeWebSocket();\n    \n    // Clean up on unmount\n    return () => {\n      if (reconnectIntervalRef.current) {\n        debugLog('MBA4321: Cleaning up WebSocket reconnect interval');\n        clearInterval(reconnectIntervalRef.current);\n        reconnectIntervalRef.current = null;\n      }\n      \n      // Clear debounce timer if it exists\n      if (debounceTimerRef.current) {\n        clearTimeout(debounceTimerRef.current);\n        debounceTimerRef.current = null;\n      }\n      \n      // Clear WebSocket timeout if it exists\n      if (websocketTimeoutRef.current) {\n        clearTimeout(websocketTimeoutRef.current);\n        websocketTimeoutRef.current = null;\n      }\n      \n      // Clear heartbeat timeout\n      if (heartbeatTimeoutRef.current) {\n        clearTimeout(heartbeatTimeoutRef.current);\n        heartbeatTimeoutRef.current = null;\n      }\n      \n      // Note: We don't disconnect the WebSocket on unmount \n      // This allows the connection to persist when navigating between tabs\n    };\n  }, [isSignedIn]);\n\n  // Register a websocket handler for new message notifications\n  useEffect(() => {\n    if (!isSignedIn || !websocketInitialized) return;\n\n    debugLog('MBA3uiobv59u: Setting up WebSocket message handlers');\n    \n    // Add explicit handler for new_message events from the server\n    const newMessageHandler = websocketManager.registerHandler('new_message', (data) => {\n      debugLog('MBA3uiobv59u: New message notification received:', data);\n      debugLog('MBA3uiobv59u: Current notification state BEFORE update:', {\n        hasUnreadMessages,\n        unreadCount,\n        ownerUnreadCount,\n        professionalUnreadCount,\n        userRole\n      });\n      \n      // Mark connection as healthy\n      connectionHealthyRef.current = true;\n      lastHeartbeatReceivedRef.current = Date.now();\n      \n      // Mark that we've received data from WebSocket\n      websocketDataReceivedRef.current = true;\n      \n      // Process the new message\n      onNewMessage(data);\n\n      // Log state AFTER update (need setTimeout because setState is async)\n      setTimeout(() => {\n        debugLog('MBA3uiobv59u: Notification state AFTER update:', {\n          hasUnreadMessages,\n          unreadCount,\n          ownerUnreadCount,\n          professionalUnreadCount,\n          userRole\n        });\n      }, 100);\n    }, 'new-message-context');\n    \n    // Fallback handler for 'message' event type (keep for backward compatibility)\n    const messageHandler = websocketManager.registerHandler('message', (data) => {\n      debugLog('MBA4321: Message notification received via WebSocket:', data);\n      \n      // Mark connection as healthy\n      connectionHealthyRef.current = true;\n      lastHeartbeatReceivedRef.current = Date.now();\n      \n      // Mark that we've received data from WebSocket\n      websocketDataReceivedRef.current = true;\n      \n      // Process the message\n      onNewMessage(data);\n    }, 'notification-context');\n    \n    const unreadUpdateHandler = websocketManager.registerHandler('unread_update', (data) => {\n      debugLog('MBA4321: Unread update received via WebSocket:', data);\n      \n      // Update heartbeat timestamp\n      lastHeartbeatReceivedRef.current = Date.now();\n      \n      // Mark connection as healthy\n      connectionHealthyRef.current = true;\n      \n      // Update the state directly from the WebSocket data\n      if (data && typeof data.unread_count !== 'undefined') {\n        setUnreadCount(data.unread_count);\n        setHasUnreadMessages(data.unread_count > 0);\n        setConversationCounts(data.conversation_counts || {});\n        \n        // Also update the API response cache with this new data\n        setLastApiResponse({\n          unread_count: data.unread_count,\n          conversation_counts: data.conversation_counts || {},\n          timestamp: Date.now()\n        });\n        \n        setLastApiCheck(Date.now()); // Consider websocket updates as api checks\n        \n        // Mark that we've received data from WebSocket\n        websocketDataReceivedRef.current = true;\n        \n        // Mark initialization as complete since we got data from WebSocket\n        initialCheckDoneRef.current = true;\n      }\n    }, 'unread-update-context');\n    \n    // Add a heartbeat acknowledgment handler\n    const heartbeatHandler = websocketManager.registerHandler('heartbeat_ack', (data) => {\n      debugLog('MBA4321: Heartbeat acknowledgment received');\n      \n      // Update heartbeat timestamp\n      lastHeartbeatReceivedRef.current = Date.now();\n      \n      // Mark connection as healthy\n      connectionHealthyRef.current = true;\n      \n      // Mark that we've received data from WebSocket\n      websocketDataReceivedRef.current = true;\n    }, 'heartbeat-context');\n    \n    // Handle WebSocket connection/disconnection\n    const connectionHandler = websocketManager.registerHandler('connection', (data) => {\n      debugLog('MBA4321: WebSocket connection event:', data);\n      \n      // Record heartbeat if we've established connection\n      if (data.status === 'connected') {\n        lastHeartbeatReceivedRef.current = Date.now();\n        connectionHealthyRef.current = true;\n      } else {\n        // Only reset the WebSocket data flag if connection was explicitly closed\n        // This prevents unnecessary API calls when the connection is temporarily unstable\n        if (data.forced) {\n          websocketDataReceivedRef.current = false;\n          connectionHealthyRef.current = false;\n          debugLog('MBA4321: Connection forcibly closed, resetting WebSocket data flag');\n        }\n      }\n      \n      // If we're (re)connecting and haven't done an initial check yet, do it now\n      if (data.status === 'connected' && !initialCheckDoneRef.current) {\n        // Use a small delay to avoid race conditions with other initialization\n        setTimeout(() => {\n          // Only call API if we haven't received WebSocket data yet\n          if (!websocketDataReceivedRef.current) {\n            debugLog('MBA432wihe21: in connection handler');\n            checkUnreadMessages(true);\n          }\n        }, 1000);\n      }\n    }, 'connection-context');\n    \n    // Cleanup function to unregister handlers\n    return () => {\n      debugLog('MBA4321: Cleaning up WebSocket handlers');\n      messageHandler();\n      newMessageHandler();\n      unreadUpdateHandler();\n      connectionHandler();\n      heartbeatHandler();\n    };\n  }, [isSignedIn, websocketInitialized]);\n\n  // Setup visibility change listener to reconnect when tab becomes visible\n  useEffect(() => {\n    if (!isSignedIn) return;\n    \n    const handleVisibilityChange = () => {\n      if (Platform.OS === 'web' && typeof document !== 'undefined' && document.visibilityState === 'visible') {\n        debugLog('MBA4321: Tab became visible, ensuring WebSocket connection');\n        \n        // First check if the WebSocket is already connected\n        const isWSConnected = websocketManager && websocketManager.isWebSocketConnected();\n        debugLog(`MBA4321: WebSocket connection status on visibility change: ${isWSConnected ? 'Connected' : 'Disconnected'}`);\n        \n        // If WebSocket is already connected, we don't need to do anything\n        if (isWSConnected) {\n          debugLog('MBA4321: WebSocket is already connected, no reconnection needed');\n          \n          // Optionally send a heartbeat to verify connection is still good\n          websocketManager.send('heartbeat', { timestamp: Date.now() });\n          lastHeartbeatSentRef.current = Date.now();\n          \n          // Reset the WebSocket data received flag since we have a good connection\n          websocketDataReceivedRef.current = true;\n          connectionHealthyRef.current = true;\n          \n          return;\n        }\n        \n        // WebSocket isn't connected, try to reconnect\n        if (websocketManager && typeof websocketManager.reconnectIfNeeded === 'function') {\n          debugLog('MBA4321: WebSocket not connected, attempting reconnection');\n          websocketManager.reconnectIfNeeded();\n          \n          // Start progressive retry instead of immediate API call\n          // Reset retry attempts counter first\n          websocketRetryAttemptsRef.current = 0;\n          \n          const startProgressiveRetry = () => {\n            // Check if WebSocket connected during the retry process\n            const nowConnected = websocketManager && websocketManager.isWebSocketConnected();\n            \n            // If WebSocket is now connected or data is received, we're done\n            if (nowConnected || websocketDataReceivedRef.current) {\n              debugLog('MBA4321: WebSocket reconnected successfully, stopping retry process');\n              // Clear any scheduled retry\n              if (websocketTimeoutRef.current) {\n                clearTimeout(websocketTimeoutRef.current);\n                websocketTimeoutRef.current = null;\n              }\n              return;\n            }\n            \n            // Increment retry counter\n            websocketRetryAttemptsRef.current++;\n            debugLog(`MBA4321: WebSocket reconnection attempt ${websocketRetryAttemptsRef.current}/${MAX_WEBSOCKET_RETRIES}`);\n            \n            if (websocketRetryAttemptsRef.current >= MAX_WEBSOCKET_RETRIES) {\n              // Max retries reached, fall back to API\n              debugLog('MBA432wihe21: Max retries reached, fall back to API');\n              debouncedCheckUnreadMessages(true);\n              return;\n            }\n            \n            // Try to reconnect again after interval\n            websocketTimeoutRef.current = setTimeout(startProgressiveRetry, WEBSOCKET_RETRY_INTERVAL);\n          };\n          \n          // Start the retry process after a short delay to allow immediate reconnection to complete\n          setTimeout(startProgressiveRetry, 1000);\n        }\n      }\n    };\n    \n    if (Platform.OS === 'web' && typeof document !== 'undefined') {\n      document.addEventListener('visibilitychange', handleVisibilityChange);\n    }\n    \n    return () => {\n      if (Platform.OS === 'web' && typeof document !== 'undefined') {\n        document.removeEventListener('visibilitychange', handleVisibilityChange);\n      }\n      \n      // Clear WebSocket timeout if it exists\n      if (websocketTimeoutRef.current) {\n        clearTimeout(websocketTimeoutRef.current);\n        websocketTimeoutRef.current = null;\n      }\n      \n      // Clear heartbeat timeout\n      if (heartbeatTimeoutRef.current) {\n        clearTimeout(heartbeatTimeoutRef.current);\n        heartbeatTimeoutRef.current = null;\n      }\n    };\n  }, [isSignedIn]); // Remove lastApiCheck from dependencies\n\n  // Modified fallback strategy with much less frequent API calls\n  useEffect(() => {\n    if (!isSignedIn) {\n      setHasUnreadMessages(false);\n      setUnreadCount(0);\n      setConversationCounts({});\n      websocketDataReceivedRef.current = false;\n      initialApiCallMadeRef.current = false;\n      \n      // Clear any WebSocket timeout\n      if (websocketTimeoutRef.current) {\n        clearTimeout(websocketTimeoutRef.current);\n        websocketTimeoutRef.current = null;\n      }\n      \n      return;\n    }\n    \n    // Always get fresh unread count on page load or sign-in\n    // This ensures we start with correct state\n    if (!initialApiCallMadeRef.current) {\n      debugLog('MBA4321: Ensuring we get fresh unread count on page load/sign-in');\n      \n      const initialCheckTimeout = setTimeout(() => {\n        if (!initialApiCallMadeRef.current) {\n          debugLog('MBA432wihe21: Making initial API call to get fresh unread count');\n          makeApiCall();\n        }\n      }, 1000); // Short delay to allow WebSocket initialization\n      \n      // Clear timeout on cleanup\n      return () => clearTimeout(initialCheckTimeout);\n    }\n    \n    // No polling needed - WebSocket is the primary data source\n    \n    return () => {};\n  }, [isSignedIn]);\n\n  // Add effect to log changes to role-specific notification counts\n  useEffect(() => {\n    debugLog('MBA3uiobv59u: Notification state changed:', {\n      hasUnreadMessages,\n      unreadCount,\n      ownerUnreadCount,\n      professionalUnreadCount,\n      userRole\n    });\n  }, [hasUnreadMessages, unreadCount, ownerUnreadCount, professionalUnreadCount, userRole]);\n\n  // Update user role from AuthContext\n  useEffect(() => {\n    if (userRole !== prevUserRoleRef.current) {\n      debugLog('MBA3uiobv59u: User role changed in MessageNotificationContext:', {\n        from: prevUserRoleRef.current,\n        to: userRole\n      });\n      \n      // Store previous role to properly transition\n      const previousRole = prevUserRoleRef.current;\n      prevUserRoleRef.current = userRole;\n      \n      // When role changes, update hasUnreadMessages flag based on the new role's count\n      if (userRole === 'petOwner') {\n        // Switching to pet owner role\n        setHasUnreadMessages(ownerUnreadCount > 0);\n        debugLog('MBA3uiobv59u: Updated hasUnreadMessages for pet owner role:', {\n          ownerUnreadCount,\n          hasUnreadMessages: ownerUnreadCount > 0\n        });\n      } else if (userRole === 'professional') {\n        // Switching to professional role\n        setHasUnreadMessages(professionalUnreadCount > 0);\n        debugLog('MBA3uiobv59u: Updated hasUnreadMessages for professional role:', {\n          professionalUnreadCount,\n          hasUnreadMessages: professionalUnreadCount > 0\n        });\n      }\n      \n      // Refresh notifications only if we have a valid role\n      if (userRole) {\n        // Slight delay to ensure role is fully updated\n        setTimeout(() => {\n          checkUnreadMessages(true);\n        }, 50);\n      }\n    }\n  }, [userRole, ownerUnreadCount, professionalUnreadCount]);\n\n  // Create a memoized value for the context to reduce rerenders\n  const contextValue = {\n    hasUnreadMessages,\n    unreadCount,\n    ownerUnreadCount, \n    professionalUnreadCount,\n    conversationCounts,\n    currentRoute,\n    getConversationUnreadCount,\n    checkUnreadMessages,\n    markConversationAsRead,\n    resetNotifications: (routeName, conversationId) => {\n      // If a route is provided, set it as the current route\n      if (routeName && routeName !== currentRoute) {\n        setCurrentRoute(routeName);\n      }\n      \n      debugLog('MBA2o3uihf48hv: resetNotifications called', {\n        routeName,\n        conversationId,\n        currentRoute,\n        hasUnreadMessages,\n        unreadCount,\n        conversationCountsSize: Object.keys(conversationCounts).length\n      });\n      \n      // If a specific conversation ID is provided, only clear that conversation's notifications\n      if (conversationId) {\n        debugLog(`MBA2o3uihf48hv: Resetting notifications for specific conversation: ${conversationId}`);\n        markConversationAsRead(conversationId);\n        return;\n      }\n      \n      // IMPORTANT: Do NOT reset all notifications just because we're on the MessageHistory screen\n      // This was the bug - we were clearing all notifications even when only one conversation was viewed\n      \n      // Only reset all notifications if explicitly requested with a special flag\n      if (routeName === 'RESET_ALL') {\n        debugLog('MBA2o3uihf48hv: Explicitly resetting ALL message notifications');\n        setHasUnreadMessages(false);\n        setUnreadCount(0);\n        setConversationCounts({});\n      }\n    },\n    updateRoute,\n    // Helper function to get the count for the current role\n    getCurrentRoleUnreadCount: () => {\n      const count = userRole === 'petOwner' ? ownerUnreadCount : professionalUnreadCount;\n      debugLog('MBA3uiobv59u: getCurrentRoleUnreadCount called:', {\n        userRole,\n        ownerUnreadCount,\n        professionalUnreadCount,\n        returned: count\n      });\n      return count;\n    },\n    // Helper function to get the count for the other role\n    getOtherRoleUnreadCount: () => {\n      const count = userRole === 'petOwner' ? professionalUnreadCount : ownerUnreadCount;\n      debugLog('MBA3uiobv59u: getOtherRoleUnreadCount called:', {\n        userRole,\n        ownerUnreadCount,\n        professionalUnreadCount,\n        returned: count\n      });\n      return count;\n    },\n    // Helper to check if current role has unread messages\n    hasCurrentRoleUnreadMessages: () => {\n      const result = userRole === 'petOwner' ? ownerUnreadCount > 0 : professionalUnreadCount > 0;\n      debugLog('MBA3uiobv59u: hasCurrentRoleUnreadMessages called:', {\n        userRole,\n        ownerUnreadCount,\n        professionalUnreadCount,\n        returned: result\n      });\n      return result;\n    }\n  };\n\n  return (\n    <MessageNotificationContext.Provider value={contextValue}>\n      {children}\n    </MessageNotificationContext.Provider>\n  );\n};\n\nexport default MessageNotificationContext; ","import * as Font from 'expo-font';\nimport { Platform } from 'react-native';\n\n// Platform-specific font configurations\nconst getFontConfig = () => {\n  return Platform.select({\n    ios: {\n      regular: 'System', // iOS System font (SF Pro)\n      medium: 'System', // iOS System font medium weight\n      header: 'Avenir-Heavy', // Distinctive header font\n    },\n    android: {\n      regular: 'Roboto', // Android default\n      medium: 'Roboto', // Use same font with different weights\n      header: 'Roboto', // Use Roboto for headers too, with bold weight\n    },\n    web: {\n      regular: 'PlayfairDisplay', // DO NOT CHANGE\n      medium: 'PlayfairDisplay-Medium', // DO NOT CHANGE\n      header: 'Futura', // DO NOT CHANGE\n    },\n    default: {\n      regular: 'System',\n      medium: 'System', \n      header: 'System',\n    }\n  });\n};\n\n// Load fonts function - no custom fonts needed since we're using system fonts\nexport const loadFonts = async () => {\n  try {\n    // No custom fonts to load - using system fonts for better performance and consistency\n    return true;\n  } catch (error) {\n    console.warn('Error in font loading process:', error);\n    return false;\n  }\n};\n\n// Font family names for use in styles - optimized for each platform\nexport const fontFamilies = getFontConfig();\n\n// Font weight configurations for cross-platform consistency\nexport const fontWeights = {\n  regular: Platform.select({\n    ios: '400',\n    android: 'normal',\n    web: '400',\n    default: 'normal'\n  }),\n  medium: Platform.select({\n    ios: '500',\n    android: '500',\n    web: '500', \n    default: '500'\n  }),\n  semiBold: Platform.select({\n    ios: '600',\n    android: '600',\n    web: '600',\n    default: '600'\n  }),\n  bold: Platform.select({\n    ios: '700',\n    android: 'bold',\n    web: '700',\n    default: 'bold'\n  }),\n  header: Platform.select({\n    ios: '800',\n    android: '900',\n    web: '700',\n    default: 'bold'\n  })\n};\n","// theme.js\nimport { DefaultTheme } from 'react-native-paper';\nimport { Platform } from 'react-native';\nimport { fontFamilies, fontWeights } from './fonts';\n\n// Get font with platform-specific fallbacks\nconst getFontFamily = (customFont) => {\n  if (Platform.OS === 'web') {\n    // On web, use custom fonts with CSS fallbacks\n    if (customFont === fontFamilies.header) {\n      return 'Futura, \"Helvetica Neue\", Arial, sans-serif';\n    }\n    return `${customFont}, Georgia, serif`;\n  }\n  // On mobile, use the loaded custom fonts or platform-specific fonts\n  return customFont;\n};\n\nexport const theme = {\n  ...DefaultTheme,\n  // Cross-platform fonts using system fonts for optimal performance and consistency\n  fonts: {\n    ...DefaultTheme.fonts,\n    regular: {\n      fontFamily: fontFamilies.regular,\n      fontWeight: fontWeights.regular,\n    },\n    medium: {\n      fontFamily: fontFamilies.medium,\n      fontWeight: fontWeights.medium,\n    },\n    header: {\n      fontFamily: fontFamilies.header,\n      fontWeight: fontWeights.header,\n    }\n  },\n  colors: {\n    ...DefaultTheme.colors,\n    mainColors: {\n      main: '#6A6C51', // #6A6C51\n      secondary: '#5D6C51', // #5D6C51\n      tertiary: '#516C53', // #516C53\n      quaternary: '#516C61', // #516C61\n      quinary: '#516A6C', // #516A6C\n      senary: '#515D6C', // #515D6C\n    },\n    proDashboard: {\n      main: '#F0F9E5', // #F0F9E5\n      secondary: '#E7F3F8', // #E7F3F8\n      tertiary: '#FEF0DA', // #FEF0DA\n      quaternary: '#E1E2DB', // #E1E2DB\n    },\n    mybookings: {\n      main: '#FFF7ED', // #FFF7ED Pending indicator background\n      secondary: '#EA580E', // #EA580E Pending indicator text\n      tertiary: '#6A6C51', // #6A6C51\n      ownerName: '#4B4C3B', // #4B4C3B Owner name text color\n      metaText: '#959885', // #959885 Date/time/service text color\n      confirmedBg: '#E8E9E2', // #E8E9E2 Confirmed button background\n      confirmedText: '#898974', // #898974 Confirmed button text\n      completedBg: '#F5F5F4', // #F5F5F4 Completed button background\n      completedText: '#898983', // #898983 Completed button text\n      searchBar: 'rgb(183, 183, 183)', // Search bar text color\n    },\n    primary: '#6A6C51', // #6A6C51\n    secondary: '#516C61', // #516C61\n    warning: '#FFA726', // #FFA726\n    background: '#f6f6f6', // #f6f6f6\n    backgroundContrast: '#F6F3FC', // #F6F3FC\n    calendarColor: '#A99E6B', // #A99E6B\n    calendarColorYellowBrown: '#8A8C6D', // #8A8C6D\n    text: 'black', // #000000\n    whiteText: 'white', // #FFFFFF\n    placeHolderText: '#A9A9A9', // #A9A9A9\n    accent: '#03dac4', // #03dac4\n    error: '#B00020', // #B00020\n    warning: '#FFA726', // Orange warning color\n    info: '#29B6F6', // Light blue info color\n    surface: '#F9FAFB', // #F9FAFB\n    surfaceContrast: '#FFFFFF', // #FFFFFF\n    border: 'rgb(183, 183, 183)', // 'rgb(183, 183, 183)'\n    bgColorModern: 'rgb(239, 239, 239)',\n    modernBorder: '#E0E0E0', // #E0E0E0\n    inputBackground: '#f6f6f6', // #f6f6f6\n    receivedMessage: '#e7eae6', // #e7eae6\n    danger: '#A52A2A', // #A52A2A\n  },\n  fontSizes: {\n    small: 12,\n    smallMedium: 14,\n    medium: 16,\n    mediumLarge: 18,\n    large: 20,\n    largeLarge: 24,\n    extraLarge: 26,\n  },\n  spacing: {\n    small: 8,\n    medium: 16,\n    large: 24,\n  },\n};","/**\n * Debug logging utility function\n * @param {string} message - The message to log\n * @param {any} data - Optional data to log\n */\nexport const debugLog = (message, data) => {\n  if (process.env.NODE_ENV !== 'production') {\n    // Log the actual process.env.NODE_ENV value\n    // console.log('MBA1234: Current process.env.NODE_ENV:', process.env.NODE_ENV);\n    \n    if (data) {\n      console.log(message, data);\n    } else {\n      console.log(message);\n    }\n  }\n}; ","import { Platform } from 'react-native';\nimport { debugLog } from './logging';\n\n/**\n * Platform-aware navigation utilities\n * Provides consistent navigation APIs across web and mobile platforms\n */\n\n/**\n * Get current route information in a platform-safe way\n * @param {Object} navigation - React Navigation object (optional for web)\n * @param {Object} route - React Navigation route object (optional for web)\n * @returns {Object} Current route information\n */\nexport const getCurrentRoute = (navigation = null, route = null) => {\n  if (Platform.OS === 'web' && typeof window !== 'undefined' && window.location) {\n    try {\n      const currentPath = window.location.pathname;\n      const pathSegments = currentPath.split('/').filter(Boolean);\n      const routeName = pathSegments.length > 0 ? pathSegments[pathSegments.length - 1] : 'Home';\n      \n      return {\n        name: routeName,\n        path: currentPath,\n        params: getURLParams(),\n        href: window.location.href\n      };\n    } catch (error) {\n      debugLog('MBA9999: Error accessing window.location:', error);\n      return {\n        name: 'Home',\n        path: '/',\n        params: {},\n        href: 'web://error'\n      };\n    }\n  } else if (route) {\n    return {\n      name: route.name || 'home',\n      path: `/${route.name || 'home'}`,\n      params: route.params || {},\n      href: `app://${route.name || 'home'}`\n    };\n  } else {\n    // Mobile fallback when no route is provided\n    return {\n      name: 'Home',\n      path: '/home',\n      params: {},\n      href: 'app://home'\n    };\n  }\n};\n\n/**\n * Get URL parameters in a platform-safe way\n * @returns {Object} URL parameters\n */\nexport const getURLParams = () => {\n  if (Platform.OS === 'web' && typeof window !== 'undefined') {\n    const searchParams = new URLSearchParams(window.location.search);\n    const params = {};\n    for (const [key, value] of searchParams.entries()) {\n      params[key] = value;\n    }\n    return params;\n  }\n  return {};\n};\n\n/**\n * Navigate back in a platform-aware way\n * @param {Object} navigation - React Navigation object\n * @returns {boolean} Whether back navigation was successful\n */\nexport const goBack = (navigation) => {\n  if (!navigation) {\n    debugLog('MBA9999: goBack called without navigation object');\n    return false;\n  }\n\n  try {\n    if (Platform.OS === 'web' && typeof window !== 'undefined') {\n      // On web, try browser history first\n      if (window.history.length > 1) {\n        window.history.back();\n        return true;\n      }\n    }\n    \n    // For mobile or fallback, use React Navigation\n    if (navigation.canGoBack()) {\n      navigation.goBack();\n      return true;\n    }\n    \n    // If can't go back, navigate to Dashboard\n    navigation.navigate('Dashboard');\n    return true;\n  } catch (error) {\n    debugLog('MBA9999: Error in goBack:', error);\n    return false;\n  }\n};\n\n/**\n * Navigate to a specific route in a platform-aware way\n * @param {Object} navigation - React Navigation object\n * @param {string} routeName - Name of the route to navigate to\n * @param {Object} params - Navigation parameters\n */\nexport const navigateTo = (navigation, routeName, params = {}) => {\n  if (!navigation) {\n    debugLog('MBA9999: navigateTo called without navigation object');\n    return;\n  }\n\n  try {\n    navigation.navigate(routeName, params);\n  } catch (error) {\n    debugLog('MBA9999: Error in navigateTo:', error);\n  }\n};\n\n/**\n * Replace current route in a platform-aware way (like browser replaceState)\n * @param {Object} navigation - React Navigation object\n * @param {string} routeName - Name of the route to replace with\n * @param {Object} params - Navigation parameters\n */\nexport const replaceRoute = (navigation, routeName, params = {}) => {\n  if (!navigation) {\n    debugLog('MBA9999: replaceRoute called without navigation object');\n    return;\n  }\n\n  try {\n    if (Platform.OS === 'web' && typeof window !== 'undefined' && window.location) {\n      try {\n        // On web, update the URL without adding to history\n        const newUrl = new URL(window.location.href);\n        newUrl.pathname = `/${routeName.toLowerCase()}`;\n        \n        // Add params to URL\n        Object.keys(params).forEach(key => {\n          if (params[key] !== null && params[key] !== undefined) {\n            newUrl.searchParams.set(key, params[key]);\n          }\n        });\n        \n        window.history.replaceState({}, '', newUrl.toString());\n      } catch (error) {\n        debugLog('MBA9999: Error in replaceRoute web logic:', error);\n      }\n    }\n    \n    // Use React Navigation replace\n    navigation.replace(routeName, params);\n  } catch (error) {\n    debugLog('MBA9999: Error in replaceRoute:', error);\n  }\n};\n\n/**\n * Update URL parameters without navigation (web only)\n * @param {Object} params - Parameters to set in URL\n * @param {boolean} replace - Whether to replace current history entry\n */\nexport const updateURLParams = (params = {}, replace = true) => {\n  if (Platform.OS !== 'web' || typeof window === 'undefined' || !window.location) {\n    return;\n  }\n\n  try {\n    const currentUrl = new URL(window.location.href);\n    \n    // Update search parameters\n    Object.keys(params).forEach(key => {\n      if (params[key] !== null && params[key] !== undefined) {\n        currentUrl.searchParams.set(key, params[key]);\n      } else {\n        currentUrl.searchParams.delete(key);\n      }\n    });\n\n    // Update the URL\n    if (replace) {\n      window.history.replaceState({}, '', currentUrl.toString());\n    } else {\n      window.history.pushState({}, '', currentUrl.toString());\n    }\n  } catch (error) {\n    debugLog('MBA9999: Error in updateURLParams:', error);\n  }\n};\n\n/**\n * Get URL hash in a platform-safe way\n * @returns {string} URL hash without the # symbol\n */\nexport const getURLHash = () => {\n  if (Platform.OS === 'web' && typeof window !== 'undefined') {\n    return window.location.hash.substring(1); // Remove the #\n  }\n  return '';\n};\n\n/**\n * Set URL hash in a platform-safe way (web only)\n * @param {string} hash - Hash to set (without #)\n */\nexport const setURLHash = (hash) => {\n  if (Platform.OS === 'web' && typeof window !== 'undefined') {\n    window.location.hash = hash ? `#${hash}` : '';\n  }\n};\n\n/**\n * Listen for navigation changes in a platform-aware way\n * @param {Function} callback - Function to call when navigation changes\n * @returns {Function} Cleanup function\n */\nexport const addNavigationListener = (callback) => {\n  if (Platform.OS === 'web' && typeof window !== 'undefined') {\n    const handlePopState = (event) => {\n      const routeInfo = getCurrentRoute();\n      callback(routeInfo, event);\n    };\n\n    window.addEventListener('popstate', handlePopState);\n    \n    return () => {\n      window.removeEventListener('popstate', handlePopState);\n    };\n  }\n  \n  // For mobile, navigation listeners should be handled by React Navigation\n  return () => {};\n};\n\n/**\n * Check if running on web platform\n * @returns {boolean}\n */\nexport const isWeb = () => Platform.OS === 'web';\n\n/**\n * Check if running on mobile platform\n * @returns {boolean}\n */\nexport const isMobile = () => Platform.OS === 'ios' || Platform.OS === 'android';\n\n/**\n * Get platform-safe user agent string\n * @returns {string}\n */\nexport const getUserAgent = () => {\n  if (Platform.OS === 'web' && typeof navigator !== 'undefined') {\n    return navigator.userAgent;\n  }\n  return `React Native ${Platform.OS} ${Platform.Version || 'unknown'}`;\n};\n\n/**\n * Redirect to signin page in a platform-aware way\n * @param {Object} navigation - React Navigation object\n */\nexport const redirectToSignIn = (navigation) => {\n  if (Platform.OS === 'web' && typeof window !== 'undefined' && window.location) {\n    try {\n      // On web, use URL navigation\n      if (window.location.hash) {\n        window.location.hash = '#/signin';\n      } else {\n        window.location.href = '/signin';\n      }\n    } catch (error) {\n      debugLog('MBA9999: Error in web redirectToSignIn:', error);\n    }\n  } else if (navigation) {\n    // On mobile, use React Navigation\n    navigation.navigate('SignIn');\n  }\n};\n\nexport default {\n  getCurrentRoute,\n  getURLParams,\n  goBack,\n  navigateTo,\n  replaceRoute,\n  updateURLParams,\n  getURLHash,\n  setURLHash,\n  addNavigationListener,\n  isWeb,\n  isMobile,\n  getUserAgent,\n  redirectToSignIn\n}; ","import { format, parse } from 'date-fns';\nimport { formatInTimeZone, toZonedTime, fromZonedTime, utcToZonedTime, getTimezoneOffset } from 'date-fns-tz';\nimport moment from 'moment-timezone';\nimport { debugLog } from '../context/AuthContext';\n// import { format as formatDate } from 'date-fns';\nimport { parseISO } from 'date-fns';\n\n/**\n * Formats a date string into \"MMM d\" format (e.g., \"Mar 5\")\n */\nexport const formatDate = (dateString) => {\n    if (!dateString) return '';\n    \n    debugLog('MBA5677: Formatting date input', dateString);\n    \n    try {\n        // First try to parse as ISO date\n        const parsedDate = parseISO(dateString);\n        \n        // Check if the parsed date is valid\n        if (!isNaN(parsedDate.getTime())) {\n            const month = parsedDate.toLocaleString('default', { month: 'short' });\n            const day = parsedDate.getDate();\n            debugLog('MBA5677: Parsed as ISO date', { parsedDate, month, day });\n            return `${month} ${day}`;\n        }\n        \n        // Fallback to parse as YYYY-MM-DD format\n        const date = parse(dateString, 'yyyy-MM-dd', new Date());\n        \n        // Check if the parsed date is valid\n        if (!isNaN(date.getTime())) {\n            const month = date.toLocaleString('default', { month: 'short' });\n            const day = date.getDate();\n            debugLog('MBA5677: Parsed with date-fns', { date, month, day });\n            return `${month} ${day}`;\n        }\n        \n        // If both parsing methods failed, try moment\n        const momentDate = moment(dateString);\n        if (momentDate.isValid()) {\n            const formatted = momentDate.format('MMM D');\n            debugLog('MBA5677: Parsed with moment', { momentDate, formatted });\n            return formatted;\n        }\n        \n        debugLog('MBA5677: Failed to parse date', dateString);\n        return dateString; // Return original if all parsing fails\n    } catch (error) {\n        debugLog('MBA5677: Error formatting date', { dateString, error });\n        return dateString; // Return original on error\n    }\n};\n\n/**\n * Converts 12-hour time format to 24-hour format\n */\nexport const convertTo24Hour = (time12h) => {\n    if (!time12h.includes(' ')) {\n        return time12h;\n    }\n\n    const [time, modifier] = time12h.split(' ');\n    let [hours, minutes] = time.split(':');\n    hours = parseInt(hours, 10);\n    \n    if (modifier === 'PM' && hours < 12) {\n        hours += 12;\n    } else if (modifier === 'AM' && hours === 12) {\n        hours = 0;\n    }\n    \n    return `${hours.toString().padStart(2, '0')}:${minutes}`;\n};\n\n/**\n * Converts 24-hour time format to 12-hour format\n */\nexport const convertTo12Hour = (time24h) => {\n    if (time24h.includes(' ')) {\n        return time24h;\n    }\n\n    const [hours24, minutes] = time24h.split(':');\n    const hours = parseInt(hours24, 10);\n    \n    let period = hours >= 12 ? 'PM' : 'AM';\n    let hours12 = hours % 12;\n    hours12 = hours12 === 0 ? 12 : hours12;\n    \n    return `${hours12}:${minutes} ${period}`;\n};\n\n/**\n * Converts a time from a specific timezone to UTC\n * @param {string} date - The date in YYYY-MM-DD format\n * @param {string} time - The time in HH:mm format (24-hour)\n * @param {string} fromTimezone - The source timezone (e.g., 'US/Mountain')\n * @returns {Object} Object containing the UTC date and time\n */\nexport const convertToUTC = (date, time, fromTimezone) => {\n  try {\n    debugLog('MBA12345: Converting to UTC - Input:', { date, time, fromTimezone });\n\n    // Create a moment object in the source timezone\n    const localMoment = moment.tz(`${date} ${time}`, fromTimezone);\n    \n    // Convert to UTC\n    const utcMoment = localMoment.utc();\n    \n    // Format the date and time\n    const utcDate = utcMoment.format('YYYY-MM-DD');\n    const utcTime = utcMoment.format('HH:mm');\n\n    debugLog('MBA12345: UTC conversion result:', {\n      input: {\n        date,\n        time,\n        fromTimezone\n      },\n      output: {\n        utcDate,\n        utcTime,\n        originalMoment: localMoment.format(),\n        utcMoment: utcMoment.format()\n      }\n    });\n    \n    return {\n      date: utcDate,\n      time: utcTime\n    };\n  } catch (error) {\n    debugLog('MBA12345: Error converting to UTC:', error);\n    return { date, time }; // Return original values as fallback\n  }\n};\n\n/**\n * Converts UTC date and time to local date and time\n */\nexport const convertDateTimeFromUTC = (date, time, timezone, useMilitaryTime = false) => {\n    try {\n        debugLog('MBA5677: Converting UTC to local:', { date, time, timezone, useMilitaryTime });\n        \n        // Ensure we have valid inputs\n        if (!date || !time) {\n            debugLog('MBA5677: Invalid input for conversion', { date, time });\n            return { date, time };\n        }\n        \n        // Multiple parsing strategies for more robust date handling\n        let utcDate = null;\n        \n        // Strategy 1: Try standard ISO format parsing\n        try {\n            // Handle different time formats\n            let formattedTime = time;\n            if (time.includes('.')) {\n                formattedTime = time.split('.')[0]; // Remove milliseconds if present\n            }\n            \n            // Create a proper ISO string\n            const isoString = `${date}T${formattedTime}${formattedTime.includes('Z') ? '' : 'Z'}`;\n            debugLog('MBA5677: Trying ISO string format', isoString);\n            \n            // Create Date object\n            utcDate = new Date(isoString);\n            \n            // Check if valid\n            if (isNaN(utcDate.getTime())) {\n                debugLog('MBA5677: ISO format parsing failed');\n                utcDate = null;\n            } else {\n                debugLog('MBA5677: ISO format parsing succeeded');\n            }\n        } catch (parseError) {\n            debugLog('MBA5677: Error in ISO format parsing', parseError);\n        }\n        \n        // Strategy 2: Try direct date-fns parsing\n        if (!utcDate) {\n            try {\n                debugLog('MBA5677: Trying date-fns parsing');\n                const dateStr = `${date} ${time}`;\n                utcDate = moment.utc(dateStr).toDate();\n                \n                // Check if valid\n                if (isNaN(utcDate.getTime())) {\n                    debugLog('MBA5677: date-fns parsing failed');\n                    utcDate = null;\n                } else {\n                    debugLog('MBA5677: date-fns parsing succeeded');\n                }\n            } catch (parseError) {\n                debugLog('MBA5677: Error in date-fns parsing', parseError);\n            }\n        }\n        \n        // Strategy 3: Try manual parsing\n        if (!utcDate) {\n            try {\n                debugLog('MBA5677: Trying manual parsing');\n                // Split the date and time parts\n                const [year, month, day] = date.split('-').map(Number);\n                let hours = 0, minutes = 0;\n                \n                // Parse time\n                if (time.includes(':')) {\n                    const timeParts = time.split(':');\n                    hours = parseInt(timeParts[0], 10);\n                    minutes = parseInt(timeParts[1], 10);\n                }\n                \n                // Create UTC date\n                utcDate = new Date(Date.UTC(year, month - 1, day, hours, minutes));\n                \n                // Check if valid\n                if (isNaN(utcDate.getTime())) {\n                    debugLog('MBA5677: Manual parsing failed');\n                    utcDate = null;\n                } else {\n                    debugLog('MBA5677: Manual parsing succeeded');\n                }\n            } catch (parseError) {\n                debugLog('MBA5677: Error in manual parsing', parseError);\n            }\n        }\n        \n        // If all parsing strategies failed, return original values\n        if (!utcDate) {\n            debugLog('MBA5677: All parsing strategies failed, returning original');\n            return { date, time };\n        }\n        \n        debugLog('MBA5677: Valid UTC Date created:', utcDate.toISOString());\n        \n        // Convert to user's timezone using moment for reliability\n        const utcMoment = moment.utc(utcDate);\n        const localMoment = utcMoment.tz(timezone || 'UTC');\n        \n        // Format the local date and time\n        const localDateStr = localMoment.format('YYYY-MM-DD');\n        const localTimeStr = localMoment.format(useMilitaryTime ? 'HH:mm' : 'h:mm A');\n        \n        debugLog('MBA5677: Date conversion result:', {\n            input: { date, time, timezone },\n            utc: utcDate.toISOString(),\n            utcMoment: utcMoment.format(),\n            localMoment: localMoment.format(),\n            output: { date: localDateStr, time: localTimeStr }\n        });\n        \n        return {\n            date: localDateStr,\n            time: localTimeStr\n        };\n    } catch (error) {\n        debugLog('MBA5677: Error in convertDateTimeFromUTC:', error, { date, time, timezone });\n        return { date, time }; // Return original on error\n    }\n};\n\n/**\n * Gets formatted times matching backend format\n */\nexport const getFormattedTimes = (startDate, startTime, endDate, endTime, timezone) => {\n    try {\n        console.log('MBA134njo0vh032 getFormattedTimes input:', {\n            startDate,\n            startTime,\n            endDate,\n            endTime,\n            timezone\n        });\n\n        // Parse the date and time strings\n        const [startYear, startMonth, startDay] = startDate.split('-').map(Number);\n        const [startHours, startMinutes] = startTime.split(':').map(Number);\n        const [endYear, endMonth, endDay] = endDate.split('-').map(Number);\n        const [endHours, endMinutes] = endTime.split(':').map(Number);\n\n        console.log('MBA134njo0vh032 Parsed components:', {\n            start: {\n                year: startYear,\n                month: startMonth,\n                day: startDay,\n                hours: startHours,\n                minutes: startMinutes\n            },\n            end: {\n                year: endYear,\n                month: endMonth,\n                day: endDay,\n                hours: endHours,\n                minutes: endMinutes\n            }\n        });\n\n        // Create ISO date strings for the local times in the specified timezone\n        const startDateStr = `${startYear}-${String(startMonth).padStart(2, '0')}-${String(startDay).padStart(2, '0')}T${String(startHours).padStart(2, '0')}:${String(startMinutes).padStart(2, '0')}:00`;\n        const endDateStr = `${endYear}-${String(endMonth).padStart(2, '0')}-${String(endDay).padStart(2, '0')}T${String(endHours).padStart(2, '0')}:${String(endMinutes).padStart(2, '0')}:00`;\n\n        console.log('MBA134njo0vh032 Created date strings:', {\n            startDateStr,\n            endDateStr,\n            timezone\n        });\n\n        // Format the dates directly using formatInTimeZone with the input timezone\n        const formatted_start = formatInTimeZone(startDateStr, timezone, \"MMM dd, yyyy (h:mm a)\");\n        const formatted_end = formatInTimeZone(endDateStr, timezone, \"MMM dd, yyyy (h:mm a)\");\n\n        console.log('MBA134njo0vh032 Formatted dates:', {\n            formatted_start,\n            formatted_end\n        });\n\n        // Create Date objects for duration calculation\n        const startDateTime = new Date(startDateStr);\n        const endDateTime = new Date(endDateStr);\n\n        // Calculate duration in milliseconds\n        const durationMs = endDateTime - startDateTime;\n        \n        // Calculate days and remaining hours\n        const days = Math.floor(durationMs / (24 * 60 * 60 * 1000));\n        const remainingMs = durationMs % (24 * 60 * 60 * 1000);\n        const hours = Math.floor(remainingMs / (60 * 60 * 1000));\n\n        // Format duration string\n        let durationStr = '';\n        if (days > 0) {\n            durationStr += `${days} day${days > 1 ? 's' : ''}`;\n            if (hours > 0) {\n                durationStr += `, ${hours} hour${hours > 1 ? 's' : ''}`;\n            }\n        } else if (hours > 0) {\n            durationStr += `${hours} hour${hours > 1 ? 's' : ''}`;\n        }\n\n        console.log('MBA134njo0vh032 Final formatted output:', {\n            formatted_start,\n            formatted_end,\n            duration: durationStr,\n            timezone: timezone.split('/')[1] || timezone\n        });\n\n        return {\n            formatted_start,\n            formatted_end,\n            duration: durationStr || '0 hours',\n            timezone: timezone.split('/')[1] || timezone\n        };\n    } catch (error) {\n        console.error('Error in getFormattedTimes:', error);\n        throw error;\n    }\n};\n\n/**\n * Check if times cross DST boundary\n */\nexport const checkDSTChange = (startDate, startTime, endDate, endTime, timezone) => {\n    try {\n        // Parse dates and times\n        const [startYear, startMonth, startDay] = startDate.split('-').map(Number);\n        const [startHours, startMinutes] = convertTo24Hour(startTime).split(':').map(Number);\n        const [endYear, endMonth, endDay] = endDate.split('-').map(Number);\n        const [endHours, endMinutes] = convertTo24Hour(endTime).split(':').map(Number);\n\n        // Create local dates and convert to zoned time\n        const startLocalDate = new Date(startYear, startMonth - 1, startDay, startHours, startMinutes);\n        const endLocalDate = new Date(endYear, endMonth - 1, endDay, endHours, endMinutes);\n        \n        const startZonedDate = fromZonedTime(toZonedTime(startLocalDate, timezone));\n        const endZonedDate = fromZonedTime(toZonedTime(endLocalDate, timezone));\n\n        // Convert back to local and check if offsets are different\n        const startLocal = toZonedTime(startZonedDate, timezone);\n        const endLocal = toZonedTime(endZonedDate, timezone);\n        \n        return startLocal.getTimezoneOffset() !== endLocal.getTimezoneOffset();\n    } catch (error) {\n        console.error('Error in checkDSTChange:', error);\n        throw error;\n    }\n};\n\n/**\n * Formats an occurrence from UTC times to local times with proper formatting\n */\nexport const formatOccurrenceFromUTC = (occurrence, userTimezone) => {\n  try {\n    // Always use full timezone name for conversions\n    // If userTimezone doesn't include '/', assume it's an abbreviation and default to US/Mountain\n    // In practice, userTimezone should come from timeSettings.timezone which is a full timezone identifier\n    const fullTimezone = userTimezone && userTimezone.includes('/') ? userTimezone : 'US/Mountain';\n    \n    console.log('MBA134njo0vh03 Formatting occurrence from UTC:', {\n      occurrence,\n      userTimezone,\n      fullTimezone\n    });\n\n    // Convert UTC times to local\n    const localStart = convertDateTimeFromUTC(\n      occurrence.start_date,\n      occurrence.start_time,\n      fullTimezone\n    );\n\n    const localEnd = convertDateTimeFromUTC(\n      occurrence.end_date,\n      occurrence.end_time,\n      fullTimezone\n    );\n\n    console.log('MBA134njo0vh03 Local start:', localStart);\n    console.log('MBA134njo0vh03 Local end:', localEnd);\n    console.log('MBA134njo0vh03 Full timezone:', fullTimezone);\n\n    // Get formatted times\n    const formattedTimes = getFormattedTimes(\n      localStart.date,\n      localStart.time,\n      localEnd.date,\n      localEnd.time,\n      fullTimezone\n    );\n\n    console.log('MBA134njo0vh03 Formatted times from getFormattedTimes:', formattedTimes);\n\n    // Check for DST change\n    const hasDSTChange = checkDSTChange(\n      localStart.date,\n      localStart.time,\n      localEnd.date,\n      localEnd.time,\n      fullTimezone\n    );\n\n    // Use the provided timezone abbreviation directly\n    const tzAbbrev = userTimezone.includes('/') ? userTimezone.split('/')[1] : userTimezone;\n\n    return {\n      ...occurrence,\n      formatted_start: formattedTimes.formatted_start,\n      formatted_end: formattedTimes.formatted_end,\n      duration: formattedTimes.duration,\n      timezone: tzAbbrev,\n      dst_message: hasDSTChange ? \n        \"Elapsed time may be different than expected due to Daylight Savings Time.\" : \n        \"\"\n    };\n  } catch (error) {\n    console.error('Error in formatOccurrenceFromUTC:', error);\n    return {\n      ...occurrence,\n      formatted_start: occurrence.start_date,\n      formatted_end: occurrence.end_date,\n      duration: 'Unknown',\n      timezone: userTimezone.includes('/') ? userTimezone.split('/')[1] : userTimezone,\n      dst_message: ''\n    };\n  }\n};\n\n/**\n * Formats a date for API calls (YYYY-MM-DD)\n * @param {Date|string} date - The date to format\n * @returns {string} Formatted date string\n */\nexport const formatDateForAPI = (date) => {\n  if (!date) return null;\n  \n  debugLog('MBA12345 formatDateForAPI input:', date, typeof date);\n  \n  let dateObj;\n  \n  try {\n    // If date is already a string in YYYY-MM-DD format, return as is\n    if (typeof date === 'string' && /^\\d{4}-\\d{2}-\\d{2}$/.test(date)) {\n      debugLog('MBA12345 formatDateForAPI: already in YYYY-MM-DD format:', date);\n      return date;\n    }\n    \n    // If date is an object with date, startTime, and endTime properties, it's a date item\n    if (typeof date === 'object' && date.date && date.startTime && date.endTime) {\n      debugLog('MBA12345 formatDateForAPI: extracting date from date item:', date.date);\n      return date.date;\n    }\n    \n    // If date is a Date object\n    if (date instanceof Date) {\n      dateObj = date;\n      debugLog('MBA12345 formatDateForAPI: using Date object');\n    } else {\n      // Otherwise, try to create a Date from whatever was passed in\n      dateObj = new Date(date);\n      debugLog('MBA12345 formatDateForAPI: created Date from input:', dateObj);\n    }\n    \n    // Check if the date is valid\n    if (isNaN(dateObj.getTime())) {\n      debugLog('MBA12345 formatDateForAPI: invalid date:', date);\n      throw new Error('Invalid date format');\n    }\n    \n    // Format as YYYY-MM-DD\n    const year = dateObj.getFullYear();\n    const month = String(dateObj.getMonth() + 1).padStart(2, '0');\n    const day = String(dateObj.getDate()).padStart(2, '0');\n    \n    const formattedDate = `${year}-${month}-${day}`;\n    debugLog('MBA12345 formatDateForAPI result:', formattedDate);\n    return formattedDate;\n  } catch (error) {\n    debugLog('MBA12345 formatDateForAPI error:', error, 'for input:', date);\n    throw error;\n  }\n};\n\n/**\n * Formats a time for API calls (HH:mm)\n * @param {Object|string} time - The time to format (object with hours/minutes or string)\n * @returns {string} Formatted time string in 24-hour format\n */\nexport const formatTimeForAPI = (time) => {\n  if (!time) {\n    debugLog('MBA12345 formatTimeForAPI received null/undefined time:', time);\n    return null;\n  }\n  \n  debugLog('MBA12345 formatTimeForAPI input:', time);\n  \n  let hours, minutes;\n  \n  if (typeof time === 'object' && time.hours !== undefined) {\n    // Handle time object format\n    hours = time.hours;\n    minutes = time.minutes;\n    debugLog('MBA12345 formatTimeForAPI processing time object:', { hours, minutes });\n  } else if (typeof time === 'string') {\n    // Handle string format (assuming HH:mm format)\n    [hours, minutes] = time.split(':').map(Number);\n    debugLog('MBA12345 formatTimeForAPI processing time string:', { hours, minutes });\n  } else {\n    debugLog('MBA12345 formatTimeForAPI invalid time format:', typeof time);\n    throw new Error('Invalid time format');\n  }\n  \n  // Ensure hours and minutes are valid\n  hours = parseInt(hours);\n  minutes = parseInt(minutes);\n  \n  if (isNaN(hours) || isNaN(minutes)) {\n    debugLog('MBA12345 formatTimeForAPI invalid time values:', { hours, minutes });\n    throw new Error('Invalid time values');\n  }\n  \n  // Format as HH:mm\n  const result = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}`;\n  debugLog('MBA12345 formatTimeForAPI result:', result);\n  return result;\n};\n\n// Format types for consistent date/time formatting across the app\nexport const FORMAT_TYPES = {\n  SHORT_DATE: 'SHORT_DATE',           // Mar 4\n  MEDIUM_DATE: 'MEDIUM_DATE',         // Mar 4, 2025\n  LONG_DATE: 'LONG_DATE',            // March 4, 2025\n  TIME_ONLY: 'TIME_ONLY',            // 4:42 PM\n  TIME_ONLY_24H: 'TIME_ONLY_24H',    // 16:42\n  DATE_TIME: 'DATE_TIME',            // Mar 4, 2025 at 4:42 PM\n  DATE_TIME_WITH_TZ: 'DATE_TIME_WITH_TZ', // Mar 4, 2025 at 4:42 PM MDT\n  DATE_RANGE: 'DATE_RANGE',          // Mar 4 - Mar 5\n  DATE_TIME_RANGE: 'DATE_TIME_RANGE' // Mar 4, 2025 at 4:42 PM - Mar 5, 2025 at 5:00 PM MDT\n};\n\n/**\n * Converts UTC date and time strings to user's timezone and formats according to specified type\n * @param {string} dateStr - Date in YYYY-MM-DD format\n * @param {string} timeStr - Time in HH:mm format (24-hour)\n * @param {string} userTimezone - User's timezone (e.g., 'America/Denver')\n * @param {string} formatType - One of FORMAT_TYPES\n * @returns {string} Formatted date/time string\n */\nexport const formatFromUTC = (dateStr, timeStr = null, userTimezone, formatType = FORMAT_TYPES.MEDIUM_DATE) => {\n  try {\n    console.log('MBA134njo0vh02c23 formatFromUTC input:', { dateStr, timeStr, userTimezone, formatType });\n    \n    // Validate inputs\n    if (!dateStr) {\n      console.error('MBA134njo0vh02c23 Error in formatFromUTC: dateStr is required');\n      return '';\n    }\n    \n    // Use default timezone if userTimezone is null/undefined\n    const targetTimezone = userTimezone || 'US/Mountain';\n    console.log('MBA134njo0vh02c23 Using timezone:', targetTimezone);\n    \n    // Create a moment object in UTC with proper format\n    const utcMoment = moment.utc(`${dateStr}T${timeStr || '00:00'}:00Z`);\n    console.log('MBA134njo0vh02c23 UTC moment:', utcMoment.format());\n    \n    // Validate the UTC moment\n    if (!utcMoment.isValid()) {\n      console.error('MBA134njo0vh02c23 Error in formatFromUTC: Invalid UTC moment created');\n      return '';\n    }\n\n    // Convert to user's timezone\n    const localMoment = utcMoment.tz(targetTimezone);\n    console.log('MBA134njo0vh02c23 Local moment:', localMoment.format());\n    \n    // Validate the local moment\n    if (!localMoment.isValid()) {\n      console.error('MBA134njo0vh02c23 Error in formatFromUTC: Invalid local moment created');\n      return '';\n    }\n\n    // Get timezone abbreviation\n    const tzAbbrev = localMoment.zoneAbbr();\n    console.log('MBA134njo0vh02c23 Timezone abbreviation:', tzAbbrev);\n\n    // Format based on type\n    switch (formatType) {\n      case FORMAT_TYPES.SHORT_DATE:\n        return localMoment.format('MMM D');\n      case FORMAT_TYPES.MEDIUM_DATE:\n        return localMoment.format('MMM D, YYYY');\n      case FORMAT_TYPES.LONG_DATE:\n        return localMoment.format('MMMM D, YYYY');\n      case FORMAT_TYPES.TIME_ONLY:\n        return localMoment.format('h:mm A');\n      case FORMAT_TYPES.TIME_ONLY_24H:\n        return localMoment.format('HH:mm');\n      case FORMAT_TYPES.DATE_TIME:\n        return localMoment.format(\"MMM D, YYYY 'at' h:mm A\");\n      case FORMAT_TYPES.DATE_TIME_WITH_TZ:\n        return `${localMoment.format(\"MMM D, YYYY 'at' h:mm A\")} ${tzAbbrev}`;\n      default:\n        return localMoment.format('MMM D, YYYY');\n    }\n  } catch (error) {\n    console.error('MBA134njo0vh02c23 Error in formatFromUTC:', error);\n    return '';\n  }\n};\n\n/**\n * Formats a date/time range from UTC to user's timezone\n * @param {Object} params - Range parameters\n * @param {string} params.startDate - Start date in YYYY-MM-DD format\n * @param {string} params.startTime - Start time in HH:mm format\n * @param {string} params.endDate - End date in YYYY-MM-DD format\n * @param {string} params.endTime - End time in HH:mm format\n * @param {string} params.userTimezone - User's timezone\n * @param {boolean} params.includeTimes - Whether to include times in the output\n * @param {boolean} params.includeTimezone - Whether to include timezone in the output\n * @returns {string} Formatted date/time range\n */\nexport const formatDateTimeRangeFromUTC = ({\n  startDate,\n  startTime,\n  endDate,\n  endTime,\n  userTimezone,\n  includeTimes = true,\n  includeTimezone = true\n}) => {\n  try {\n    debugLog('MBA134njo: formatDateTimeRangeFromUTC input:', {\n      startDate,\n      startTime,\n      endDate,\n      endTime,\n      userTimezone,\n      includeTimes,\n      includeTimezone\n    });\n\n    if (includeTimes) {\n      // Create UTC moments with proper format\n      const startUtcMoment = moment.utc(`${startDate}T${startTime}:00Z`);\n      const endUtcMoment = moment.utc(`${endDate}T${endTime}:00Z`);\n\n      debugLog('MBA134njo: UTC moments:', {\n        start: startUtcMoment.format(),\n        end: endUtcMoment.format()\n      });\n\n      // Convert to local timezone\n      const startLocalMoment = startUtcMoment.tz(userTimezone);\n      const endLocalMoment = endUtcMoment.tz(userTimezone);\n\n      debugLog('MBA134njo: Local moments:', {\n        start: startLocalMoment.format(),\n        end: endLocalMoment.format()\n      });\n\n      // Get timezone abbreviation\n      const tzAbbrev = startLocalMoment.zoneAbbr();\n      debugLog('MBA134njo: Timezone abbreviation:', tzAbbrev);\n\n      // Format the dates without timezone in the format string\n      const startFormatted = startLocalMoment.format(\"MMM D, YYYY h:mm A\");\n      const endFormatted = endLocalMoment.format(\"MMM D, YYYY h:mm A\");\n\n      // Add timezone abbreviation if needed\n      const finalStart = includeTimezone ? `${startFormatted} ${tzAbbrev}` : startFormatted;\n      const finalEnd = includeTimezone ? `${endFormatted} ${tzAbbrev}` : endFormatted;\n\n      debugLog('MBA134njo: Formatted dates:', {\n        startFormatted: finalStart,\n        endFormatted: finalEnd,\n        tzAbbrev\n      });\n      \n      return `${finalStart} - ${finalEnd}`;\n    } else {\n      const startLocalMoment = moment.utc(`${startDate}T00:00:00Z`).tz(userTimezone);\n      const endLocalMoment = moment.utc(`${endDate}T00:00:00Z`).tz(userTimezone);\n      \n      return `${startLocalMoment.format('MMM D, YYYY')} - ${endLocalMoment.format('MMM D, YYYY')}`;\n    }\n  } catch (error) {\n    debugLog('MBA134njo: Error in formatDateTimeRangeFromUTC:', error);\n    return '';\n  }\n};\n\n/**\n * Converts a time string from UTC to local timezone, handling date boundary changes\n * @param {string} dateStr - Date in \"YYYY-MM-DD\" format \n * @param {string} timeStr - Time in \"HH:MM\" format (24-hour)\n * @param {string} timezone - User's timezone\n * @returns {Object} Object with time (hours/minutes) and adjusted date if it changed\n */\nfunction convertTimeFromUTC(dateStr, timeStr, timezone = 'US/Mountain') {\n  try {\n    // Use provided timezone or default to US/Mountain\n    // In practice, timezone should come from timeSettings.timezone from AuthContext\n    const targetTimezone = timezone || 'US/Mountain';\n    \n    // Create a full UTC datetime string\n    const utcDate = `${dateStr}T${timeStr}:00Z`;\n    \n    // Convert to local timezone using moment-timezone\n    const utcMoment = moment.utc(utcDate);\n    const localMoment = utcMoment.tz(targetTimezone);\n    \n    // Extract hours and minutes with safety checks\n    const hours = localMoment.hours();\n    const minutes = localMoment.minutes();\n    \n    // Ensure we have valid numbers\n    if (isNaN(hours) || isNaN(minutes)) {\n      debugLog('MBA2j3kbr9hve4: Invalid hours or minutes from moment conversion:', { hours, minutes });\n      throw new Error('Invalid time values from moment conversion');\n    }\n    \n    // Check if the date changed during conversion\n    const localDateStr = localMoment.format('YYYY-MM-DD');\n    const dateChanged = localDateStr !== dateStr;\n    \n    debugLog('MBA2j3kbr9hve4: Time conversion details:', {\n      utc: {\n        date: dateStr,\n        time: timeStr,\n        fullDateTime: utcDate\n      },\n      local: {\n        date: localDateStr,\n        time: `${hours}:${minutes}`,\n        fullDateTime: localMoment.format(),\n        dateChanged\n      },\n      timezone: targetTimezone\n    });\n    \n    return {\n      hours,\n      minutes,\n      adjustedDate: dateChanged ? localDateStr : null\n    };\n  } catch (error) {\n    debugLog('MBA2j3kbr9hve4: Error converting time from UTC:', error);\n    \n    // Return the UTC time parsed directly as fallback\n    try {\n      const [hours, minutes] = timeStr.split(':').map(Number);\n      return {\n        hours: isNaN(hours) ? 0 : hours,\n        minutes: isNaN(minutes) ? 0 : minutes,\n        adjustedDate: null\n      };\n    } catch (parseError) {\n      debugLog('MBA2j3kbr9hve4: Error parsing fallback time:', parseError);\n      // Final fallback - return default times\n      return {\n        hours: 9,\n        minutes: 0,\n        adjustedDate: null\n      };\n    }\n  }\n}\n\n/**\n * Parses occurrences from the backend API into the format expected by DateSelectionCard and TimeSelectionCard\n * @param {Array} occurrences - Array of occurrence objects from the API\n * @param {string} userTimezone - User's timezone (from timeSettings.timezone), defaults to US/Mountain\n * @returns {Object} Object containing formatted dates and times\n */\nexport const parseOccurrencesForBookingSteps = (occurrences, userTimezone = 'US/Mountain') => {\n  debugLog('MBA2j3kbr9hve4: Parsing occurrences for booking steps:', occurrences);\n  \n  if (!occurrences || !Array.isArray(occurrences) || occurrences.length === 0) {\n    debugLog('MBA2j3kbr9hve4: No occurrences to parse');\n    return {\n      dates: [],\n      dateRange: null,\n      individualTimes: {},\n      defaultTimes: { startTime: { hours: 9, minutes: 0 }, endTime: { hours: 17, minutes: 0 } }\n    };\n  }\n  \n  // 1. Extract all unique dates and create Date objects\n  const uniqueDates = new Set();\n  const individualTimes = {};\n  \n  // Sort occurrences by date to ensure we get the correct start/end for date range\n  const sortedOccurrences = [...occurrences].sort((a, b) => {\n    return new Date(a.start_date) - new Date(b.start_date);\n  });\n  \n  debugLog('MBA2j3kbr9hve4: Sorted occurrences:', sortedOccurrences);\n  \n  // Use provided timezone or default to US/Mountain\n  // In practice, userTimezone should come from timeSettings.timezone from AuthContext\n  const targetTimezone = userTimezone || 'US/Mountain';\n  \n  // Process each occurrence\n  sortedOccurrences.forEach(occurrence => {\n    const { start_date, end_date, start_time, end_time } = occurrence;\n    \n    if (!start_date || !start_time || !end_time) {\n      debugLog('MBA2j3kbr9hve4: Invalid occurrence data, missing required fields:', occurrence);\n      return;\n    }\n    \n    // Convert UTC times to local timezone, accounting for date boundary changes\n    const localStartTime = convertTimeFromUTC(start_date, start_time, targetTimezone);\n    const localEndTime = convertTimeFromUTC(end_date || start_date, end_time, targetTimezone);\n    \n    // Determine the actual local date to use, accounting for timezone adjustments\n    const actualStartDate = localStartTime.adjustedDate || start_date;\n    const actualEndDate = localEndTime.adjustedDate || (end_date || start_date);\n    \n    debugLog('MBA2j3kbr9hve4: Converted times with date adjustments:', {\n      utc: { \n        startDate: start_date, \n        startTime: start_time,\n        endDate: end_date || start_date,\n        endTime: end_time\n      },\n      local: { \n        startDate: actualStartDate,\n        startTime: localStartTime,\n        endDate: actualEndDate,\n        endTime: localEndTime\n      }\n    });\n    \n    // Add the adjusted dates to uniqueDates set\n    uniqueDates.add(actualStartDate);\n    \n    // If end date is different and not the same as start date, add it too\n    if (actualEndDate !== actualStartDate) {\n      uniqueDates.add(actualEndDate);\n    }\n    \n    // Validate converted times before creating time objects\n    if (localStartTime.hours === undefined || localStartTime.minutes === undefined ||\n        localEndTime.hours === undefined || localEndTime.minutes === undefined) {\n      debugLog('MBA2j3kbr9hve4: Invalid time conversion result, skipping occurrence:', {\n        localStartTime,\n        localEndTime,\n        occurrence\n      });\n      return; // Skip this occurrence\n    }\n    \n    // Create time objects for the TimeSelectionCard using the actual local date as key\n    individualTimes[actualStartDate] = {\n      startTime: {\n        hours: localStartTime.hours,\n        minutes: localStartTime.minutes\n      },\n      endTime: {\n        hours: localEndTime.hours,\n        minutes: localEndTime.minutes\n      },\n      isOvernightForced: actualStartDate !== actualEndDate\n    };\n  });\n  \n  // 2. Create the dates array from the set of unique dates\n  const dates = Array.from(uniqueDates).map(dateStr => {\n    const [year, month, day] = dateStr.split('-').map(Number);\n    return new Date(year, month - 1, day);\n  });\n  \n  // Log the parsed dates to ensure they're correct\n  debugLog('MBA2j3kbr9hve4: Parsed dates after timezone adjustment:', dates.map(d => d.toISOString().split('T')[0]));\n  \n  // 3. Create the date range\n  let dateRange = null;\n  if (dates.length > 0) {\n    // Sort dates to ensure correct order\n    const sortedDates = [...dates].sort((a, b) => a - b);\n    \n    // Create a proper date range with JavaScript Date objects\n    dateRange = {\n      startDate: sortedDates[0],\n      endDate: sortedDates[sortedDates.length - 1]\n    };\n    \n    debugLog('MBA2j3kbr9hve4: Created date range after timezone adjustment:', {\n      startDate: dateRange.startDate.toISOString().split('T')[0],\n      endDate: dateRange.endDate.toISOString().split('T')[0]\n    });\n  }\n  \n  // 4. Get default times from the first occurrence if available\n  let defaultTimes = {\n    startTime: { hours: 9, minutes: 0 }, // Default fallback\n    endTime: { hours: 17, minutes: 0 }    // Default fallback\n  };\n  \n  if (Object.keys(individualTimes).length > 0) {\n    // Use the first converted time as the default\n    const firstDateKey = Object.keys(individualTimes)[0];\n    const firstTime = individualTimes[firstDateKey];\n    \n    // Validate the first time object before using it as default\n    if (firstTime && firstTime.startTime && firstTime.endTime &&\n        typeof firstTime.startTime.hours === 'number' && typeof firstTime.startTime.minutes === 'number' &&\n        typeof firstTime.endTime.hours === 'number' && typeof firstTime.endTime.minutes === 'number') {\n      defaultTimes = {\n        startTime: firstTime.startTime,\n        endTime: firstTime.endTime\n      };\n    } else {\n      debugLog('MBA2j3kbr9hve4: Invalid first time object, using fallback defaults:', firstTime);\n    }\n  }\n  \n  const result = {\n    dates,\n    dateRange,\n    individualTimes,\n    defaultTimes,\n    allTimesAreTheSame: Object.keys(individualTimes).length <= 1 || \n      Object.values(individualTimes).every(timeObj => \n        timeObj.startTime.hours === defaultTimes.startTime.hours &&\n        timeObj.startTime.minutes === defaultTimes.startTime.minutes &&\n        timeObj.endTime.hours === defaultTimes.endTime.hours &&\n        timeObj.endTime.minutes === defaultTimes.endTime.minutes\n      )\n  };\n  \n  debugLog('MBA2j3kbr9hve4: Parsed result with timezone adjustments:', result);\n  return result;\n}; ","import { API_BASE_URL } from '../config/config';\nimport { debugLog } from './logging';\nimport { Platform } from 'react-native';\n\n/**\n * WebSocket manager for real-time messaging\n */\nclass WebSocketManager {\n  constructor() {\n    this.socket = null;\n    this.isConnected = false;\n    this.token = null;\n    this.connectionAttempts = 0;\n    this.maxConnectionAttempts = 5;\n    this.heartbeatInterval = null;\n    this.disconnectTimeout = null;\n    this.messageHandlers = new Map();\n    this.connectionId = null;\n    this.wsUrl = API_BASE_URL.replace('http://', 'ws://').replace('https://', 'wss://');\n    this._reconnectTimeout = null;\n    this.forceDisconnect = false;\n    this._hasVisibilityListener = false;\n    debugLog('MBA4321: WebSocketManager initialized, wsUrl is ' + this.wsUrl);\n  }\n\n  /**\n   * Initialize the WebSocket connection with authentication token\n   * @param {string} token - JWT token for authentication\n   */\n  init(token) {\n    if (!token) {\n      debugLog('MBA4321: Cannot initialize WebSocket without a valid token');\n      return;\n    }\n    \n    // If we already have this token and connection, no need to reconnect\n    if (this.token === token && this.isConnected && this.socket && this.socket.readyState === WebSocket.OPEN) {\n      debugLog('MBA4321: WebSocket already connected with this token');\n      return;\n    }\n    \n    // If we already had a token and it's different, this is a re-login, so force disconnect\n    if (this.token && this.token !== token) {\n      debugLog('MBA4321: Token changed, force disconnecting before reconnecting');\n      this.disconnect(true); // Force disconnect on token change\n    }\n    \n    this.token = token;\n    this.forceDisconnect = false; // Reset force disconnect flag\n    \n    // If we already have a socket but it's not working, close it first\n    if (this.socket && (this.socket.readyState === WebSocket.CLOSING || this.socket.readyState === WebSocket.CLOSED)) {\n      debugLog('MBA4321: Closing existing non-functional socket');\n      this.disconnect(false); // Non-forced disconnect\n    }\n    \n    // Connect with the token\n    this.connect();\n    \n    // Set up disconnect timeout (10 minutes of inactivity)\n    this.resetDisconnectTimeout();\n    \n    // Set up visibility change listener if in browser environment\n    this.setupVisibilityListener();\n  }\n\n  /**\n   * Set up visibility change listener to reconnect when tab becomes visible again\n   */\n  setupVisibilityListener() {\n    // Only run in browser environment\n    if (typeof document === 'undefined' || typeof window === 'undefined') {\n      return;\n    }\n    \n    // Skip if we've already set up the listener\n    if (this._hasVisibilityListener) {\n      return;\n    }\n    \n    debugLog('MBA4321: Setting up visibility change listener');\n    \n    // Create the handler function\n    const handleVisibilityChange = () => {\n      if (Platform.OS === 'web' && typeof document !== 'undefined' && document.visibilityState === 'visible') {\n        debugLog('MBA4321: Document became visible, checking WebSocket connection');\n        \n        // Only reconnect if we have a token and weren't explicitly disconnected\n        if (this.token && !this.forceDisconnect) {\n          this.reconnectIfNeeded();\n        }\n      }\n    };\n    \n    // Add the listener only for web\n    if (Platform.OS === 'web' && typeof document !== 'undefined') {\n      document.addEventListener('visibilitychange', handleVisibilityChange);\n      this._hasVisibilityListener = true;\n      \n      // Set up cleanup on page unload if needed\n      window.addEventListener('beforeunload', () => {\n        // Note: we deliberately don't disconnect here, as this would prevent\n        // browser session restoration from working properly\n        debugLog('MBA4321: Page unloading, connection may persist for session restore');\n      });\n    }\n  }\n\n  /**\n   * Connect to the WebSocket server\n   */\n  connect() {\n    // Skip connection if token is null or empty\n    if (!this.token) {\n      debugLog('MBA4321: Cannot connect WebSocket without a valid token');\n      return false;\n    }\n    \n    // If already connected, no need to reconnect\n    if (this.isConnected && this.socket && this.socket.readyState === WebSocket.OPEN) {\n      debugLog('MBA4321: WebSocket already connected and open');\n      return true;\n    }\n    \n    // If socket exists but is in CONNECTING state, don't start another connection\n    if (this.socket && this.socket.readyState === WebSocket.CONNECTING) {\n      debugLog('MBA4321: WebSocket already connecting, skipping duplicate connect');\n      return true;\n    }\n    \n    // Clear any existing heartbeat\n    if (this.heartbeatInterval) {\n      clearInterval(this.heartbeatInterval);\n      this.heartbeatInterval = null;\n    }\n    \n    // If too many connection attempts, back off\n    if (this.connectionAttempts >= this.maxConnectionAttempts) {\n      debugLog(`MBA4321: Too many connection attempts (${this.connectionAttempts}), backing off`);\n      setTimeout(() => {\n        this.connectionAttempts = 0;\n        this.connect();\n      }, 60000);\n      return false;\n    }\n    \n    try {\n      this.connectionAttempts++;\n      \n      const wsEndpoint = `${this.wsUrl}/ws/messages/?token=${this.token}`;\n      debugLog(`MBA4321: [MY CONNECTION] Connecting WebSocket at ${wsEndpoint} (attempt ${this.connectionAttempts})`);\n      \n      this.socket = new WebSocket(wsEndpoint);\n      debugLog('MBA4321: [MY CONNECTION] WebSocket instance created');\n      \n      // Setup event handlers\n      this.socket.onopen = this.handleOpen.bind(this);\n      this.socket.onclose = this.handleClose.bind(this);\n      this.socket.onmessage = this.handleMessage.bind(this);\n      this.socket.onerror = this.handleError.bind(this);\n      \n      return true;\n    } catch (error) {\n      debugLog(`MBA4321: [MY CONNECTION] WebSocket connection error: ${error.message}`);\n      this.scheduleReconnect();\n      return false;\n    }\n  }\n\n  /**\n   * Handle WebSocket connection open\n   */\n  handleOpen(event) {\n    debugLog('MBA4321: [MY CONNECTION] WebSocket connection established');\n    this.isConnected = true;\n    this.connectionAttempts = 0; // Reset connection attempts on successful connection\n    \n    // Start sending heartbeats\n    this.startHeartbeat();\n    \n    // Log connection status for debugging\n    debugLog(`MBA4321: [MY CONNECTION] isConnected set to ${this.isConnected}, socket state: ${this.socket?.readyState}`);\n    \n    // Notify all handlers of connection\n    this.notifyHandlers('connection', { \n      status: 'connected',\n      timestamp: new Date().toISOString()\n    });\n    \n    // Send immediate heartbeat to verify connection on both sides\n    setTimeout(() => {\n      if (this.isConnected) {\n        debugLog('MBA4321: [MY CONNECTION] Sending initial heartbeat after connection');\n        this.send('heartbeat');\n      }\n    }, 500);\n  }\n\n  /**\n   * Handle WebSocket connection close\n   */\n  handleClose(event) {\n    // Skip redundant close events\n    if (!this.isConnected && !this.socket) {\n      return;\n    }\n\n    const wasConnected = this.isConnected;\n    this.isConnected = false;\n    this.socket = null;\n    \n    debugLog(`MBA4321: [MY CONNECTION] WebSocket connection closed: code=${event.code}, reason=${event.reason}`);\n    \n    // Clear heartbeat\n    if (this.heartbeatInterval) {\n      clearInterval(this.heartbeatInterval);\n      this.heartbeatInterval = null;\n    }\n    \n    // Notify handlers of the disconnection, but only if we were previously connected\n    if (wasConnected) {\n      this.notifyHandlers('disconnection', {\n        code: event.code,\n        reason: event.reason,\n        timestamp: new Date().toISOString()\n      });\n    }\n    \n    // Attempt to reconnect\n    this.scheduleReconnect();\n  }\n\n  /**\n   * Handle WebSocket messages\n   */\n  handleMessage(event) {\n    try {\n      const message = JSON.parse(event.data);\n      debugLog(`MBA4321: [MY CONNECTION] WebSocket message received: ${message.type}`);\n      \n      // For detailed message logging, use debugLog instead of is_DEBUG check\n      debugLog(`MBA4321: [MY CONNECTION] WebSocket message content: ${event.data}`);\n      \n      // For heartbeat responses, just log and return\n      if (message.type === 'heartbeat_ack') {\n        return;\n      }\n      \n      // Notify handlers based on message type\n      this.notifyHandlers(message.type, message.data || {});\n      \n      // Also notify global handlers\n      this.notifyHandlers('all', { type: message.type, data: message.data || {} });\n      \n    } catch (error) {\n      debugLog(`MBA4321: [MY CONNECTION] Error handling WebSocket message: ${error.message}`);\n    }\n  }\n\n  /**\n   * Handle WebSocket errors\n   */\n  handleError(error) {\n    debugLog(`MBA4321: [MY CONNECTION] WebSocket error: ${error.message || 'Unknown error'}`);\n    \n    // Notify handlers of the error\n    this.notifyHandlers('error', { \n      error: error.message || 'Unknown error',\n      timestamp: new Date().toISOString()\n    });\n    \n    // Try to reconnect on error\n    this.scheduleReconnect();\n  }\n\n  /**\n   * Send a message through the WebSocket\n   */\n  send(type, data = {}) {\n    if (!this.isConnected || !this.socket) {\n      debugLog('MBA4321: [MY CONNECTION] Cannot send message, WebSocket not connected');\n      return false;\n    }\n\n    try {\n      const message = JSON.stringify({\n        type,\n        data,\n        timestamp: Date.now()\n      });\n      \n      this.socket.send(message);\n      debugLog(`MBA4321: [MY CONNECTION] Sent ${type} message through connection`);\n      return true;\n    } catch (error) {\n      debugLog(`MBA4321: [MY CONNECTION] Error sending message through connection: ${error.message}`);\n      return false;\n    }\n  }\n\n  /**\n   * Schedule a reconnection attempt\n   */\n  scheduleReconnect() {\n    // Skip if a reconnection is already scheduled\n    if (this._reconnectTimeout) {\n      debugLog('MBA4321: Reconnect already scheduled, skipping duplicate');\n      return;\n    }\n    \n    const delay = Math.min(1000 * Math.pow(2, this.connectionAttempts - 1), 30000);\n    debugLog(`MBA4321: Scheduling reconnect in ${delay}ms (attempt ${this.connectionAttempts})`);\n    \n    this._reconnectTimeout = setTimeout(() => {\n      this._reconnectTimeout = null;\n      if (!this.isConnected) {\n        this.connect();\n      }\n    }, delay);\n  }\n\n  /**\n   * Start sending heartbeat messages\n   */\n  startHeartbeat() {\n    // Clear any existing interval\n    if (this.heartbeatInterval) {\n      clearInterval(this.heartbeatInterval);\n    }\n\n    // Start a new interval\n    this.heartbeatInterval = setInterval(() => {\n      if (this.isConnected) {\n        this.send('heartbeat', { timestamp: Date.now() });\n        debugLog('MBA4321: Heartbeat sent');\n      } else {\n        debugLog('MBA4321: Skipping heartbeat, not connected');\n        clearInterval(this.heartbeatInterval);\n        this.heartbeatInterval = null;\n      }\n    }, 30000); // 30 seconds\n\n    debugLog('MBA4321: Heartbeat mechanism started');\n  }\n\n  /**\n   * Disconnect the WebSocket\n   * @param {boolean} force - Whether to force disconnect (true) or allow reconnect on visibility change (false)\n   */\n  disconnect(force = false) {\n    debugLog(`MBA4321: [MY CONNECTION] Disconnecting WebSocket connection (force=${force})`);\n    \n    // Set the force disconnect flag if requested\n    this.forceDisconnect = force;\n    \n    // If this is just a tab change and not a forced disconnect,\n    // we'll preserve the token to allow reconnection\n    const preserveToken = !force;\n    const savedToken = preserveToken ? this.token : null;\n    \n    // Clear heartbeat interval\n    if (this.heartbeatInterval) {\n      clearInterval(this.heartbeatInterval);\n      this.heartbeatInterval = null;\n    }\n    \n    // Clear disconnect timeout\n    if (this.disconnectTimeout) {\n      clearTimeout(this.disconnectTimeout);\n      this.disconnectTimeout = null;\n    }\n    \n    // Close the socket if it exists\n    if (this.socket) {\n      try {\n        // Remove all event handlers to prevent reconnection attempts from them\n        this.socket.onopen = null;\n        this.socket.onclose = null;\n        this.socket.onmessage = null;\n        this.socket.onerror = null;\n        \n        // Close the connection\n        this.socket.close();\n        this.socket = null;\n        \n        debugLog('MBA4321: [MY CONNECTION] WebSocket connection closed successfully');\n      } catch (error) {\n        debugLog(`MBA4321: [MY CONNECTION] Error closing WebSocket: ${error.message}`);\n      }\n    }\n    \n    // Reset connection state\n    this.isConnected = false;\n    \n    // Restore token if this wasn't a forced disconnect (just a tab change)\n    if (preserveToken && savedToken) {\n      this.token = savedToken;\n      debugLog('MBA4321: [MY CONNECTION] Preserved token for reconnection on tab visibility change');\n    }\n    \n    // Notify handlers of the disconnection\n    this.notifyHandlers('connection', { \n      status: 'disconnected',\n      forced: force,\n      timestamp: new Date().toISOString()\n    });\n    \n    return true;\n  }\n\n  /**\n   * Reset the disconnect timeout\n   * This timeout will disconnect the WebSocket after 10 minutes of inactivity\n   */\n  resetDisconnectTimeout() {\n    // Clear any existing timeout\n    if (this.disconnectTimeout) {\n      clearTimeout(this.disconnectTimeout);\n    }\n    \n    // Set a new timeout\n    this.disconnectTimeout = setTimeout(() => {\n      debugLog('MBA4321: Disconnecting due to inactivity');\n      this.disconnect();\n    }, 600000); // 10 minutes\n  }\n\n  /**\n   * Check if WebSocket is connected\n   * @returns {boolean} Connection status\n   */\n  isWebSocketConnected() {\n    return this.isConnected && this.socket && this.socket.readyState === WebSocket.OPEN;\n  }\n\n  /**\n   * Register a handler for specific message types\n   * @param {string} messageType - Type of message to handle\n   * @param {function} handler - Handler function\n   * @param {string} handlerId - Unique identifier for this handler\n   */\n  registerHandler(messageType, handler, handlerId) {\n    if (!this.messageHandlers.has(messageType)) {\n      this.messageHandlers.set(messageType, new Map());\n    }\n    \n    this.messageHandlers.get(messageType).set(handlerId, handler);\n    debugLog(`MBA4321: Registered handler ${handlerId} for ${messageType} messages`);\n    \n    return () => this.unregisterHandler(messageType, handlerId);\n  }\n\n  /**\n   * Unregister a handler\n   * @param {string} messageType - Type of message\n   * @param {string} handlerId - Handler ID to remove\n   */\n  unregisterHandler(messageType, handlerId) {\n    if (this.messageHandlers.has(messageType)) {\n      this.messageHandlers.get(messageType).delete(handlerId);\n      debugLog(`MBA4321: Unregistered handler ${handlerId} for ${messageType} messages`);\n    }\n  }\n\n  /**\n   * Notify all registered handlers for a specific message type\n   * @param {string} messageType - Type of message\n   * @param {object} data - Message data\n   */\n  notifyHandlers(messageType, data) {\n    if (this.messageHandlers.has(messageType)) {\n      const handlers = this.messageHandlers.get(messageType);\n      \n      handlers.forEach((handler, id) => {\n        try {\n          handler(data);\n        } catch (error) {\n          debugLog(`MBA4321: Error in ${messageType} handler ${id}: ${error.message}`);\n        }\n      });\n    }\n    \n    // Also notify global handlers (if any)\n    if (messageType !== 'all' && this.messageHandlers.has('all')) {\n      const globalHandlers = this.messageHandlers.get('all');\n      \n      globalHandlers.forEach((handler, id) => {\n        try {\n          handler({ type: messageType, data });\n        } catch (error) {\n          debugLog(`MBA4321: Error in global handler ${id}: ${error.message}`);\n        }\n      });\n    }\n  }\n\n  /**\n   * Mark messages as read\n   * @param {number} conversationId - Conversation ID\n   * @param {Array} messageIds - Array of message IDs to mark as read\n   */\n  markMessagesAsRead(conversationId, messageIds) {\n    if (!Array.isArray(messageIds) || messageIds.length === 0) {\n      return false;\n    }\n    \n    return this.send('mark_read', {\n      conversation_id: conversationId,\n      message_ids: messageIds\n    });\n  }\n\n  /**\n   * Check if WebSocket is connected and reconnect if needed\n   * @returns {boolean} Whether a reconnection was attempted\n   */\n  reconnectIfNeeded() {\n    debugLog('MBA4321: [MY CONNECTION] Checking if WebSocket reconnection needed');\n    \n    // If we don't have a token or were force disconnected, don't try to reconnect\n    if (!this.token || this.forceDisconnect) {\n      debugLog(`MBA4321: [MY CONNECTION] Cannot reconnect - ${!this.token ? 'no token' : 'force disconnected'}`);\n      return false;\n    }\n    \n    // Check if we need to reconnect\n    const needsReconnect = (\n      !this.isConnected || \n      !this.socket || \n      (this.socket && (\n        this.socket.readyState === WebSocket.CLOSED || \n        this.socket.readyState === WebSocket.CLOSING\n      ))\n    );\n    \n    if (needsReconnect) {\n      debugLog('MBA4321: [MY CONNECTION] WebSocket needs reconnection, attempting now');\n      \n      // Reset the force disconnect flag\n      this.forceDisconnect = false;\n      \n      // Ensure old connection is properly closed\n      if (this.socket) {\n        try {\n          this.socket.onclose = null; // Prevent recursive reconnection\n          this.socket.close();\n          this.socket = null;\n        } catch (e) {\n          debugLog(`MBA4321: [MY CONNECTION] Error closing existing socket: ${e.message}`);\n        }\n      }\n      \n      this.isConnected = false;\n      \n      // Reconnect\n      setTimeout(() => {\n        this.connect();\n      }, 100);\n      \n      return true;\n    }\n    \n    // If we're connected, send a heartbeat to verify connection\n    if (this.isConnected && this.socket && this.socket.readyState === WebSocket.OPEN) {\n      debugLog('MBA4321: [MY CONNECTION] WebSocket appears connected, sending heartbeat to verify');\n      this.send('heartbeat');\n      \n      // Reset the disconnect timeout to prevent inactivity disconnection\n      this.resetDisconnectTimeout();\n    }\n    \n    return false;\n  }\n}\n\n// Create a singleton instance\nconst websocketManager = new WebSocketManager();\n\n// Export the singleton\nexport default websocketManager; ","// extracted by mini-css-extract-plugin\nexport default {};","var map = {\n\t\"./af\": 17582,\n\t\"./af.js\": 17582,\n\t\"./ar\": 93042,\n\t\"./ar-dz\": 54265,\n\t\"./ar-dz.js\": 54265,\n\t\"./ar-kw\": 92553,\n\t\"./ar-kw.js\": 92553,\n\t\"./ar-ly\": 85352,\n\t\"./ar-ly.js\": 85352,\n\t\"./ar-ma\": 67097,\n\t\"./ar-ma.js\": 67097,\n\t\"./ar-ps\": 76150,\n\t\"./ar-ps.js\": 76150,\n\t\"./ar-sa\": 84427,\n\t\"./ar-sa.js\": 84427,\n\t\"./ar-tn\": 7221,\n\t\"./ar-tn.js\": 7221,\n\t\"./ar.js\": 93042,\n\t\"./az\": 60458,\n\t\"./az.js\": 60458,\n\t\"./be\": 17596,\n\t\"./be.js\": 17596,\n\t\"./bg\": 93830,\n\t\"./bg.js\": 93830,\n\t\"./bm\": 27044,\n\t\"./bm.js\": 27044,\n\t\"./bn\": 58573,\n\t\"./bn-bd\": 13296,\n\t\"./bn-bd.js\": 13296,\n\t\"./bn.js\": 58573,\n\t\"./bo\": 25614,\n\t\"./bo.js\": 25614,\n\t\"./br\": 62041,\n\t\"./br.js\": 62041,\n\t\"./bs\": 91786,\n\t\"./bs.js\": 91786,\n\t\"./ca\": 75833,\n\t\"./ca.js\": 75833,\n\t\"./cs\": 52711,\n\t\"./cs.js\": 52711,\n\t\"./cv\": 71036,\n\t\"./cv.js\": 71036,\n\t\"./cy\": 84977,\n\t\"./cy.js\": 84977,\n\t\"./da\": 8770,\n\t\"./da.js\": 8770,\n\t\"./de\": 67342,\n\t\"./de-at\": 81566,\n\t\"./de-at.js\": 81566,\n\t\"./de-ch\": 87544,\n\t\"./de-ch.js\": 87544,\n\t\"./de.js\": 67342,\n\t\"./dv\": 82875,\n\t\"./dv.js\": 82875,\n\t\"./el\": 78536,\n\t\"./el.js\": 78536,\n\t\"./en-au\": 38617,\n\t\"./en-au.js\": 38617,\n\t\"./en-ca\": 79227,\n\t\"./en-ca.js\": 79227,\n\t\"./en-gb\": 59754,\n\t\"./en-gb.js\": 59754,\n\t\"./en-ie\": 37217,\n\t\"./en-ie.js\": 37217,\n\t\"./en-il\": 85418,\n\t\"./en-il.js\": 85418,\n\t\"./en-in\": 80800,\n\t\"./en-in.js\": 80800,\n\t\"./en-nz\": 67299,\n\t\"./en-nz.js\": 67299,\n\t\"./en-sg\": 76305,\n\t\"./en-sg.js\": 76305,\n\t\"./eo\": 8673,\n\t\"./eo.js\": 8673,\n\t\"./es\": 71301,\n\t\"./es-do\": 3187,\n\t\"./es-do.js\": 3187,\n\t\"./es-mx\": 48223,\n\t\"./es-mx.js\": 48223,\n\t\"./es-us\": 37634,\n\t\"./es-us.js\": 37634,\n\t\"./es.js\": 71301,\n\t\"./et\": 4976,\n\t\"./et.js\": 4976,\n\t\"./eu\": 11847,\n\t\"./eu.js\": 11847,\n\t\"./fa\": 74372,\n\t\"./fa.js\": 74372,\n\t\"./fi\": 41628,\n\t\"./fi.js\": 41628,\n\t\"./fil\": 56802,\n\t\"./fil.js\": 56802,\n\t\"./fo\": 42874,\n\t\"./fo.js\": 42874,\n\t\"./fr\": 9853,\n\t\"./fr-ca\": 87170,\n\t\"./fr-ca.js\": 87170,\n\t\"./fr-ch\": 22825,\n\t\"./fr-ch.js\": 22825,\n\t\"./fr.js\": 9853,\n\t\"./fy\": 68876,\n\t\"./fy.js\": 68876,\n\t\"./ga\": 93533,\n\t\"./ga.js\": 93533,\n\t\"./gd\": 82770,\n\t\"./gd.js\": 82770,\n\t\"./gl\": 98602,\n\t\"./gl.js\": 98602,\n\t\"./gom-deva\": 63059,\n\t\"./gom-deva.js\": 63059,\n\t\"./gom-latn\": 48212,\n\t\"./gom-latn.js\": 48212,\n\t\"./gu\": 23409,\n\t\"./gu.js\": 23409,\n\t\"./he\": 17210,\n\t\"./he.js\": 17210,\n\t\"./hi\": 4750,\n\t\"./hi.js\": 4750,\n\t\"./hr\": 51315,\n\t\"./hr.js\": 51315,\n\t\"./hu\": 47626,\n\t\"./hu.js\": 47626,\n\t\"./hy-am\": 91317,\n\t\"./hy-am.js\": 91317,\n\t\"./id\": 26892,\n\t\"./id.js\": 26892,\n\t\"./is\": 97577,\n\t\"./is.js\": 97577,\n\t\"./it\": 57628,\n\t\"./it-ch\": 3046,\n\t\"./it-ch.js\": 3046,\n\t\"./it.js\": 57628,\n\t\"./ja\": 92504,\n\t\"./ja.js\": 92504,\n\t\"./jv\": 25917,\n\t\"./jv.js\": 25917,\n\t\"./ka\": 64513,\n\t\"./ka.js\": 64513,\n\t\"./kk\": 94935,\n\t\"./kk.js\": 94935,\n\t\"./km\": 96661,\n\t\"./km.js\": 96661,\n\t\"./kn\": 89964,\n\t\"./kn.js\": 89964,\n\t\"./ko\": 98067,\n\t\"./ko.js\": 98067,\n\t\"./ku\": 61165,\n\t\"./ku-kmr\": 85158,\n\t\"./ku-kmr.js\": 85158,\n\t\"./ku.js\": 61165,\n\t\"./ky\": 11177,\n\t\"./ky.js\": 11177,\n\t\"./lb\": 2967,\n\t\"./lb.js\": 2967,\n\t\"./lo\": 81972,\n\t\"./lo.js\": 81972,\n\t\"./lt\": 58469,\n\t\"./lt.js\": 58469,\n\t\"./lv\": 33155,\n\t\"./lv.js\": 33155,\n\t\"./me\": 87935,\n\t\"./me.js\": 87935,\n\t\"./mi\": 74483,\n\t\"./mi.js\": 74483,\n\t\"./mk\": 32501,\n\t\"./mk.js\": 32501,\n\t\"./ml\": 73120,\n\t\"./ml.js\": 73120,\n\t\"./mn\": 20266,\n\t\"./mn.js\": 20266,\n\t\"./mr\": 19406,\n\t\"./mr.js\": 19406,\n\t\"./ms\": 80109,\n\t\"./ms-my\": 90864,\n\t\"./ms-my.js\": 90864,\n\t\"./ms.js\": 80109,\n\t\"./mt\": 22904,\n\t\"./mt.js\": 22904,\n\t\"./my\": 44067,\n\t\"./my.js\": 44067,\n\t\"./nb\": 21301,\n\t\"./nb.js\": 21301,\n\t\"./ne\": 81152,\n\t\"./ne.js\": 81152,\n\t\"./nl\": 76735,\n\t\"./nl-be\": 97761,\n\t\"./nl-be.js\": 97761,\n\t\"./nl.js\": 76735,\n\t\"./nn\": 37569,\n\t\"./nn.js\": 37569,\n\t\"./oc-lnc\": 20833,\n\t\"./oc-lnc.js\": 20833,\n\t\"./pa-in\": 3044,\n\t\"./pa-in.js\": 3044,\n\t\"./pl\": 34249,\n\t\"./pl.js\": 34249,\n\t\"./pt\": 87585,\n\t\"./pt-br\": 26826,\n\t\"./pt-br.js\": 26826,\n\t\"./pt.js\": 87585,\n\t\"./ro\": 62526,\n\t\"./ro.js\": 62526,\n\t\"./ru\": 62204,\n\t\"./ru.js\": 62204,\n\t\"./sd\": 43270,\n\t\"./sd.js\": 43270,\n\t\"./se\": 61541,\n\t\"./se.js\": 61541,\n\t\"./si\": 71921,\n\t\"./si.js\": 71921,\n\t\"./sk\": 49935,\n\t\"./sk.js\": 49935,\n\t\"./sl\": 46254,\n\t\"./sl.js\": 46254,\n\t\"./sq\": 59897,\n\t\"./sq.js\": 59897,\n\t\"./sr\": 42496,\n\t\"./sr-cyrl\": 11135,\n\t\"./sr-cyrl.js\": 11135,\n\t\"./sr.js\": 42496,\n\t\"./ss\": 32215,\n\t\"./ss.js\": 32215,\n\t\"./sv\": 84716,\n\t\"./sv.js\": 84716,\n\t\"./sw\": 50803,\n\t\"./sw.js\": 50803,\n\t\"./ta\": 31538,\n\t\"./ta.js\": 31538,\n\t\"./te\": 2302,\n\t\"./te.js\": 2302,\n\t\"./tet\": 25280,\n\t\"./tet.js\": 25280,\n\t\"./tg\": 14100,\n\t\"./tg.js\": 14100,\n\t\"./th\": 95385,\n\t\"./th.js\": 95385,\n\t\"./tk\": 736,\n\t\"./tk.js\": 736,\n\t\"./tl-ph\": 79726,\n\t\"./tl-ph.js\": 79726,\n\t\"./tlh\": 41873,\n\t\"./tlh.js\": 41873,\n\t\"./tr\": 36463,\n\t\"./tr.js\": 36463,\n\t\"./tzl\": 27491,\n\t\"./tzl.js\": 27491,\n\t\"./tzm\": 29500,\n\t\"./tzm-latn\": 80196,\n\t\"./tzm-latn.js\": 80196,\n\t\"./tzm.js\": 29500,\n\t\"./ug-cn\": 91287,\n\t\"./ug-cn.js\": 91287,\n\t\"./uk\": 35341,\n\t\"./uk.js\": 35341,\n\t\"./ur\": 36246,\n\t\"./ur.js\": 36246,\n\t\"./uz\": 55550,\n\t\"./uz-latn\": 77254,\n\t\"./uz-latn.js\": 77254,\n\t\"./uz.js\": 55550,\n\t\"./vi\": 78796,\n\t\"./vi.js\": 78796,\n\t\"./x-pseudo\": 22736,\n\t\"./x-pseudo.js\": 22736,\n\t\"./yo\": 28621,\n\t\"./yo.js\": 28621,\n\t\"./zh-cn\": 67601,\n\t\"./zh-cn.js\": 67601,\n\t\"./zh-hk\": 39053,\n\t\"./zh-hk.js\": 39053,\n\t\"./zh-mo\": 71248,\n\t\"./zh-mo.js\": 71248,\n\t\"./zh-tw\": 74725,\n\t\"./zh-tw.js\": 74725\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 35358;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t792: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkweb\"] = self[\"webpackChunkweb\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [178], () => (__webpack_require__(55819)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["styles","StyleSheet","create","overlay","position","top","left","right","bottom","backgroundColor","zIndex","container","theme","colors","surface","borderRadius","padding","width","shadowColor","shadowOffset","height","shadowOpacity","shadowRadius","elevation","borderWidth","borderColor","primary","pulseBorder","opacity","closeButton","content","marginTop","title","fontSize","fontWeight","color","marginBottom","fontFamily","fonts","header","description","text","lineHeight","regular","footer","flexDirection","justifyContent","alignItems","leftButtons","flex","skipButton","paddingVertical","paddingHorizontal","skipText","secondary","navigationButton","navigationText","finishButton","finishText","stepIndicator","stepText","TutorialModal","step","totalSteps","onNext","onPrevious","onSkip","onClose","onFinish","userRole","is_DEBUG","isFirstStep","isLastStep","isVisible","setIsVisible","useState","currentScreen","setCurrentScreen","navigation","useNavigation","fadeAnim","useRef","Animated","Value","current","slideAnim","overlayAnim","Dimensions","get","useEffect","debugLog","currentStep","screen","timer","setTimeout","clearTimeout","addListener","timing","toValue","duration","useNativeDriver","start","initialPosition","finalPosition","getPositionStyles","slideStyle","transform","translateX","interpolate","inputRange","outputRange","translateY","_jsxs","_Fragment","children","_jsx","View","style","pointerEvents","TouchableOpacity","onPress","handleClose","MaterialCommunityIcons","name","size","Text","handleSkip","handlePrevious","handleFinish","handleNext","modalOverlay","modalContent","maxWidth","modalText","fontSizes","medium","textAlign","buttonContainer","gap","button","cancelButton","border","confirmButton","cancelButtonText","confirmButtonText","disabledButton","disabledText","ConfirmationModal","visible","onConfirm","actionText","isLoading","Modal","transparent","animationType","onRequestClose","disabled","ActivityIndicator","TutorialContext","createContext","defaultTutorialStatus","done_client_tutorial","done_pro_tutorial","tutorialSteps","client","tab","onStepEnter","navigate","professional","default","TutorialProvider","isSignedIn","useContext","AuthContext","tutorialStatus","setTutorialStatus","setCurrentStep","hasError","setHasError","errorMessage","setErrorMessage","setIsLoading","skipConfirmationVisible","setSkipConfirmationVisible","closeConfirmationVisible","setCloseConfirmationVisible","fetchTutorialStatus","async","response","axios","concat","API_BASE_URL","data","navigateToFrom","error","console","getCurrentStepData","roleKey","steps","safeCurrentStep","Math","min","max","length","stepData","Object","assign","nextStep","currentStepData","prevStep","from","to","fromTab","toTab","previousStep","completeTutorial","updates","patch","message","Provider","value","handleSkipCancel","handleSkipConfirm","handleCloseCancel","handleCloseConfirm","toast","minWidth","icon","marginRight","undefined","Toast","type","onDismiss","animation","timeoutRef","parallel","handleDismiss","callback","getBackgroundColor","warning","info","getIcon","numberOfLines","ellipsizeMode","hitSlop","ToastContext","useToast","context","Error","ToastProvider","setToast","showToast","useCallback","hideToast","prev","marginLeft","mobileContainer","mobileItemContainer","mobileMarker","mobileMilestoneTitle","mobileDashedLine","borderStyle","webContainer","dashedLine","webMarker","webMilestoneTitle","markerContainer","modalIconContainer","modalNumber","modalTitle","modalDescription","closeButtonText","RoadmapSection","selectedMilestone","setSelectedMilestone","modalVisible","setModalVisible","screenWidth","isMobile","roadmapData","id","mainColors","senary","quinary","quaternary","main","handleMilestonePress","milestone","map","index","FontAwesome5","number","BOOKING_STATES","ALL_SERVICES","SERVICE_TYPES","TIME_UNIT_MAPPING","BACKEND_TO_FRONTEND_TIME_UNIT","entries","reduce","acc","key","mockAdditionalRates","amount","mockServicesForCards","startingPrice","animalTypes","additionalRates","mockPets","animal_type","breed","age","months","years","weight","sex","friendlyWithChildren","friendlyWithCats","friendlyWithDogs","spayedNeutered","houseTrained","microchipped","adoptionDate","energyLevel","feedingSchedule","leftAlone","medication","additionalInstructions","vetName","vetAddress","vetPhone","insuranceProvider","vetDocuments","galleryImages","mockOwners","require","pet_types","last_booking","pets","email","phone","address","sharedBookingDetails","booking_id","status","owner_name","professional_name","service_details","service_type","pet_id","species","occurrences","occurrence_id","start_date","end_date","start_time","end_time","calculated_cost","base_total","rates","base_rate","additional_animal_rate","additional_animal_rate_applies","applies_after","unit_of_time","holiday_rate","holiday_days","additional_rates","cost_summary","subtotal","platform_fee","taxes","total_owner_cost","total_sitter_payout","is_prorated","mockBookingDetails","ownerName","startDate","startTime","CURRENT_USER_ID","values","booking","date","time","serviceType","numberOfPets","totalCost","costs","totalOwnerCost","professionalPayout","mockConversations","participant1_id","participant2_id","role_map","participant1_role","participant2_role","lastMessage","timestamp","unread","mockMessages","message_id","sender","is_booking_request","metadata","endDate","endTime","BLOG_POSTS","author","profilePicture","bio","publishDate","readTime","tags","references","authors","publication","url","year","doi","likes","comments","shares","useForm","ValidationError","formspree","log","windowWidth","windowHeight","reviews","image","ReviewImage","source","src","alt","contentContainer","flexGrow","heroSection","overflow","heroImage","heroContent","heroText","textShadowColor","textShadowOffset","textShadowRadius","heroSignupButton","heroSignupButtonText","section","sectionTitle","largeLarge","card","appButtons","appButton","reviewsSection","reviewsBackground","reviewsOverlay","reviewsSubtitle","mediumLarge","reviewsTitle","reviewsContainer","overflowX","WebkitOverflowScrolling","msOverflowStyle","scrollbarWidth","scrollbarColor","reviewsContent","paddingBottom","reviewCard","reviewCardMobile","reviewQuote","reviewText","reviewAuthorContainer","reviewerImage","objectFit","reviewAuthorName","reviewAuthorTitle","paginationDots","paginationDot","margin","paginationDotActive","featuresSection","toggleContainer","toggleButton","toggleButtonActive","toggleButtonText","toggleButtonTextActive","whiteText","featuresContainer","featureColumn","SCREEN_WIDTH","columnTitle","featuresList","featureItem","featureIconCircle","featureIcon","featureTitle","featureText","actionButton","display","buttonText","blogSection","blogCard","authorContainer","authorImage","blogContent","authorInfo","authorName","dot","marginHorizontal","preview","flexWrap","tag","tagText","stats","stat","statText","roadmapSection","roadmapImage","roadmapOverlayText","faqSection","faqItem","faqButton","faqQuestion","faqToggle","faqAnswer","contactSection","contactContainer","input","socialIconsRow","socialIcon","footerLinksRow","footerLink","textDecorationLine","successMessage","messageInput","textAlignVertical","paddingTop","validationError","starsContainer","starIcon","waitlistSection","marginVertical","waitlistDescription","waitlistButton","scrollIndicators","scrollIndicatorButton","scrollIndicator","scrollIndicatorActive","scrollHint","scrollHintText","scrollContainer","scrollContent","serviceHighlightsSection","mainServiceTitle","servicesGrid","floatingButtonContainer","webButton","mobileButton","floatingButton","buttonLabel","wrapper","background","stepCircle","modernBorder","activeStepCircle","completedStepCircle","stepNumber","activeStepNumber","completedStepNumber","stepName","activeStepName","line","completedLine","progressLine","progressFilled","progressEmpty","props","onStepPress","isDesktop","renderStep","isActive","isCompleted","React","stepIndex","sanitizeInput","options","removeHtmlTags","str","replace","removeSqlKeywords","sanitized","removeJavaScriptProtocol","removeEventHandlers","removeDataAttributes","toLowerCase","maxMessageLength","maxLength","substring","parts","split","slice","join","maxDescLength","validateMessage","minLength","allowEmpty","trim","isValid","sanitizedInput","sanitizedMessage","originalLength","test","validateEmail","sanitizedEmail","validateName","validatePassword","password","sanitizedPassword","hasUpperCase","hasLowerCase","hasNumbers","hasSpecialChar","IsProduction","validatePasswordMatch","confirmPassword","GENERAL_CATEGORIES","ANIMAL_ICONS","ANIMAL_CATEGORIES","getAllAnimalTypes","allTypes","forEach","category","includes","push","getAnimalIcon","animalName","categoryId","find","cat","CategorySelectionStep","serviceData","setServiceData","customAnimalInput","setCustomAnimalInput","customAnimalCategory","setCustomAnimalCategory","setScreenWidth","customAnimalError","setCustomAnimalError","updateLayout","addEventListener","removeEventListener","isAnimalTypeSelected","some","animal","handleAnimalTypeSelect","prevAnimalTypes","existingAnimalIndex","findIndex","updatedTypes","splice","hardcodedCategory","categoryToUse","foundCategory","newAnimal","categoryName","isCustom","filteredAnimalTypes","getFilteredAnimalTypes","animalTypesToShow","a","categories","subtitle","instructions","textSecondary","animalTypesGrid","animalTypeItem","animalTypeCard","selectedAnimalCard","mainLight","animalTypeRow","animalIconAndName","animalTypeName","customInputContainer","backgroundContrast","customInputTitle","inputRow","textInputContainer","textInput","textInputError","pickerContainer","picker","addButton","addButtonText","addButtonDisabled","addButtonTextDisabled","selectedAnimalsSection","selectedAnimalsTitle","selectedAnimalsList","animalBubble","animalBubbleText","removeAnimalButton","errorText","ScrollView","filter","animalType","TextInput","placeholder","onChangeText","validation","placeholderTextColor","placeHolderText","onChange","e","target","handleAddCustomAnimal","categoryInfo","generalCategories","categoryToAdd","MAX_DESCRIPTION_LENGTH","inputGroup","label","inputError","textArea","switchContainer","switchGroup","switchLabel","switchSubLabel","characterCount","ServiceDetailsStep","nameError","setNameError","descriptionError","setDescriptionError","serviceName","serviceDescription","multiline","Switch","isOvernight","onValueChange","trackColor","false","true","thumbColor","ios_backgroundColor","TIME_UNITS","keys","ANIMAL_THRESHOLDS","rateContainer","rateInputGroup","currencyInputContainer","currencySymbol","currencyInput","outlineStyle","unitSelector","unitText","dropdownContainer","maxHeight","dropdownScroll","dropdownScrollContent","dropdownItem","borderBottomWidth","borderBottomColor","selectedDropdownItem","dropdownText","selectedDropdownText","holidayRateContainer","holidayRateHeader","rateTypeToggleContainer","activeToggleButton","inactiveToggleButton","activeToggleText","inactiveToggleText","holidayRateInputWrapper","percentageInputContainer","percentageInput","percentageSymbol","calculatedHolidayRate","customRatesContainer","customRateItem","customRateContent","customRateActions","customRateTitleContainer","customRateTitle","customRateDescription","customRateAmount","newCustomRateContainer","customRateInput","addRateButton","addRateText","customRateButtonContainer","cancelRateButton","cancelRateText","saveRateButton","disabledSaveButton","saveRateText","customRateFormHeading","noCustomRatesText","fontStyle","customRateAction","modalIcon","modalButton","modalButtonText","disabledUnitSelector","RatesAndReviewStep","isUpdatingService","setIsUpdatingService","onProceedWithUpdate","showTimeUnitDropdown","setShowTimeUnitDropdown","showThresholdDropdown","setShowThresholdDropdown","customChargeVisible","setCustomChargeVisible","isHolidayRatePercent","setIsHolidayRatePercent","isEditingExistingRate","setIsEditingExistingRate","showUnsavedRateWarning","setShowUnsavedRateWarning","newCustomRate","setNewCustomRate","rate","baseRateError","setBaseRateError","additionalRateError","setAdditionalRateError","holidayRateError","setHolidayRateError","customRateTitleError","setCustomRateTitleError","customRateAmountError","setCustomRateAmountError","customRateDescriptionError","setCustomRateDescriptionError","availableTimeUnits","isPercent","base_rate_unit","holidayRate","holidayRateString","toString","hasUnsavedCustomRate","result","hasUnsaved","formatNumericInput","fieldType","hasScriptTags","hasSqlInjection","handleCustomRateChange","field","processed","handleAddCustomRate","rateValue","parseFloat","isNaN","sanitizedRate","renderDropdown","selectedValue","onSelect","containerStyle","contentContainerStyle","option","TouchableWithoutFeedback","handlePressOutside","keyboardType","unit","selectedUnit","additionalAnimalRate","additionalAnimalThreshold","threshold","rateToEdit","_","i","handleEditCustomRate","activeOpacity","handleDeleteCustomRate","STEPS","CATEGORY_SELECTION","SERVICE_DETAILS","RATES_AND_REVIEW","stepIndicatorContainer","scrollContentContainer","borderTopWidth","borderTopColor","nextButton","nextButtonText","disabledButtonText","ServiceCreationModal","onSave","initialService","setHasUnsavedChanges","hasHolidayRate","setError","isSubmitting","setIsSubmitting","isEditMode","setIsEditMode","isAddingCustomRate","setIsAddingCustomRate","animalTypesArray","animal_types","Array","isArray","holiday_rate_is_percent","service_id","service_name","is_overnight","canProceedToNextStep","hasValidBaseRate","hasValidAdditionalRate","callServiceApi","animalTypesDict","holidayRateValue","formattedData","parseInt","updateService","createService","serviceManagerData","lengthOfService","is_active","handleBack","SafeAreaView","StepProgressIndicator","renderCurrentStep","serviceCard","surfaceContrast","cardHeader","large","activeToggleContainer","activeText","smallMedium","inactiveText","switch","scaleX","scaleY","ratesContainer","rateRow","rateLabel","editButton","deleteButton","deleteButtonText","ProfessionalServiceCard","item","onEdit","onDelete","setIsActive","getPricingBackgroundColor","unitOfTime","idx","supportsHover","hasTouchScreen","window","navigator","maxTouchPoints","msMaxTouchPoints","matchMedia","matches","minHeight","serviceListContainer","serviceCardWrapper","headerContainer","headerActions","collapseButton","addServiceButton","addServiceText","emptyContainer","emptyText","portalTooltip","tooltipText","small","ServiceManager","services","setServices","isProfessionalTab","showModal","setShowModal","editingService","setEditingService","collapsedServices","setCollapsedServices","allCollapsed","setAllCollapsed","showDeleteModal","setShowDeleteModal","serviceToDelete","setServiceToDelete","hoveredButton","setHoveredButton","tooltipPosition","setTooltipPosition","collapseTooltipPosition","setCollapseTooltipPosition","buttonRef","deviceSupportsHover","handleEditService","serviceToEdit","formattedAnimalTypes","formattedService","handleDeleteService","toggleCollapse","renderService","warn","isCollapsed","onToggleCollapse","is_custom","ref","onMouseEnter","showTooltip","setPosition","element","getBoundingOwnerRect","rect","x","y","onMouseLeave","updatedService","serviceIndex","s","newServices","transformedService","existingIndex","serviceToRemove","deleteService","prevServices","Portal","petItem","petItemContent","petPhoto","petName","petInfo","petDetails","sectionHeader","fieldText","centeredContent","alignSelf","profileHeader","profilePhoto","profilePhotoPlaceholder","portfolioGrid","portfolioCard","portfolioImageContainer","aspectRatio","portfolioPhoto","borderTopLeftRadius","borderTopRightRadius","portfolioCaption","facilitiesContainer","facilityTag","facilityTagSelected","facilityTagText","facilityTagTextSelected","modalHeader","modalScroll","modalFacilityTag","modalFacilityText","modalFooter","saveButton","modalButtonText2","webDatePicker","androidButton","dateText","disabledInput","backButton","headerText","rightButton","BackHeader","onBackPress","rightIcon","onRightPress","rightComponent","customStyles","CrossPlatformView","useSafeArea","fullWidthHeader","contentWidth","setWindowWidth","updateDimensions","childrenArray","toArray","headerContent","mainContent","COLORADO_BOUNDS","geocodingQueue","constructor","this","queue","processing","lastRequest","minInterval","geocode","Promise","resolve","reject","processQueue","shift","timeSinceLastRequest","Date","now","waitTime","performGeocode","street","apartment","city","state","zip","addressString","params","URLSearchParams","q","format","limit","countrycodes","addressdetails","fetch","headers","ok","json","lat","lng","lon","isInColorado","latitude","longitude","formatted_address","display_name","geocodeAddressGraceful","maxRetries","attempt","pow","geocodeAddress","searchQueue","search","query","performSearch","bounded","viewbox","place_id","components","house_number","road","town","village","postcode","coordinates","inputContainer","inputValid","success","inputDisabled","loadingIndicator","validIcon","suggestionsContainer","suggestionsList","suggestionItem","lastSuggestionItem","suggestionIcon","suggestionContent","suggestionText","noResultsContainer","noResultsText","AddressAutocomplete","onAddressSelect","inputValue","setInputValue","suggestions","setSuggestions","showSuggestions","setShowSuggestions","selectedAddress","setSelectedAddress","searchTimeoutRef","results","searchAddresses","onBlur","handleBlur","editable","FlatList","renderItem","renderSuggestion","handleAddressSelect","keyExtractor","keyboardShouldPersistTaps","showsVerticalScrollIndicator","CONTAINER_SIZE","CIRCLE_SIZE","modalContainer","cropAreaOuterContainer","cropAreaContainer","imageViewport","imageContainer","cropCircleHole","boxShadow","circleGuide","sliderContainer","slider","zoomButton","instructionsContainer","instructionsText","saveButtonText","ProfilePhotoCropper","imageUri","isUploading","scale","setScale","imageSize","setImageSize","imagePosition","setImagePosition","imageLoaded","setImageLoaded","initialScaleRef","pan","ValueXY","disableScroll","preventDefault","document","passive","body","Image","getSize","initialScale","calculateInitialScale","setValue","panResponder","PanResponder","onStartShouldSetPanResponder","onMoveShouldSetPanResponder","gestureState","abs","dx","dy","onPanResponderGrant","setOffset","_value","onPanResponderMove","onPanResponderRelease","flattenOffset","onPanResponderTerminationRequest","handleScaleChange","newScale","imageTransform","minZoom","maxZoom","statusBarTranslucent","presentationStyle","panHandlers","uri","resizeMode","onLoad","Slider","minimumValue","maximumValue","minimumTrackTintColor","maximumTrackTintColor","thumbTintColor","handleSave","cropParams","imageWidth","imageHeight","cropWidth","cropHeight","processImageWithCrop","cropImageOnWeb","img","crossOrigin","onload","createElement","canvas","getContext","ctx","cropSize","centerX","centerY","beginPath","arc","PI","closePath","clip","scaledWidth","scaledHeight","cropCenterY","imageCenterX","imageCenterY","drawX","drawY","drawImage","dataUrl","toDataURL","base64Data","oldProfilePhotoUrl","onerror","donateSection","donateButton","tertiary","donateButtonIcon","donateButtonContent","donateButtonTitle","donateButtonSubtitle","donateButtonCompact","donateButtonIconCompact","donateButtonTitleCompact","donateButtonSubtitleCompact","donateButtonLarge","donateButtonIconLarge","donateButtonTitleLarge","donateButtonSubtitleLarge","modalCloseButton","donationOptionsContainer","donationOption","disabledOption","donationOptionIcon","donationOptionContent","donationOptionTitle","donationOptionSubtitle","comingSoonBadge","comingSoonText","modalFooterText","SupportButton","buttonStyle","showTitle","showDonateModal","setShowDonateModal","sizeStyles","getSizeStyles","iconSize","arrowSize","handleDonatePress","handleCreditCardDonation","handleVenmoDonation","Linking","openURL","catch","err","INSURANCE_OPTIONS","EditOverlay","isLocation","isMultiline","isProfessional","isInsurance","selectedInsurance","onInsuranceChange","localValue","setLocalValue","localInsurance","setLocalInsurance","isLoadingLocation","setIsLoadingLocation","currentAddressValue","setCurrentAddressValue","insuranceStep","setInsuranceStep","insuranceType","setInsuranceType","setValidationError","insuranceModalContent","backButtonText","modalTitleCentered","insuranceStepContent","insuranceStepTitle","insuranceTypeButton","insuranceTypeContent","insuranceTypeTitle","insuranceTypeDescription","uploadButton","ImagePicker","launchImageLibraryAsync","mediaTypes","Images","allowsEditing","aspect","quality","canceled","newInsurance","assets","handleInsuranceChange","uploadText","customInsuranceCard","insuranceCardImage","insuranceCardText","opt","insuranceOption","selectedInsuranceOption","insuranceOptionContent","insuranceOptionTitle","insuranceOptionDescription","locationContent","addressInstructions","addressAutocomplete","selectedAddressInfo","selectedAddressText","modalInput","multilineInput","modalInputError","inputType","autoFocus","modalInputErrorText","modalInputCharacterCount","modalButtons","modalCancelButton","modalCancelText","modalSaveButton","modalSaveButtonDisabled","Alert","alert","sanitizedValue","original","modalSaveText","VerificationModal","onProceed","getModalContent","benefits","verificationModalOverlay","verificationModalContent","verificationModalHeader","verificationIconContainer","verificationModalTitle","verificationModalClose","verificationModalScroll","verificationDescription","verificationModalSection","verificationModalSectionTitle","verificationStep","verificationStepNumber","verificationStepNumberText","verificationStepText","benefit","verificationBenefit","verificationBenefitText","verificationModalButtons","verificationModalCancelButton","verificationModalCancelText","verificationModalProceedButton","verificationModalProceedText","contentWrapper","desktopLayout","profileSection","profileSectionDesktop","profileCard","profilePhotoContainer","cameraButton","profileInfo","nameContainer","emailContainer","locationContainer","locationIconWrapper","location","locationEditIcon","roleContainer","role","editIcon","ratingContainer","rating","sectionsContainer","sectionsContainerDesktop","paddingLeft","editButtonText","bioInput","facilitiesGrid","facilityItem","facilityContent","facilityTitle","facilityValue","addPhotoButton","addPhotoText","photoGrid","noReviews","bioText","locationButtons","locationButton","locationButtonText","orText","noPhotosText","facilitiesModalContent","facilitiesScrollView","facilityPresetItem","selectedFacilityPreset","facilityPresetContent","facilityPresetTitle","facilityPresetDescription","selectedFacilityText","checkIcon","locationModalContent","addressForm","addressInput","addressRow","maxFacilitiesText","insuranceContent","editButtonContent","modalCloseText","nameSection","sectionTitleContainer","sectionContent","sectionText","verificationSectionSubtitle","verificationButtonsContainer","verificationButton","verificationButtonElite","verificationButtonIcon","verificationButtonContent","verificationButtonTitle","verificationButtonTitleElite","verificationButtonSubtitle","verificationButtonSubtitleElite","mobileVerificationSection","donateSectionWithVerification","ProfileInfoTab","country","about_me","emergencyContact","authorizedHouseholdMembers","editMode","toggleEditMode","pickImage","onSaveComplete","insurance","onNavigateToTab","authName","hasEdits","setHasEdits","editingField","setEditingField","editValue","setEditValue","portfolioPhotos","setPortfolioPhotos","setSelectedInsurance","isSaving","setIsSaving","showVerificationModal","setShowVerificationModal","verificationModalType","setVerificationModalType","selectedPhoto","setSelectedPhoto","showCropper","setShowCropper","displayValues","setDisplayValues","profileData","setProfileData","profile_photo","originalValues","setOriginalValues","prevData","propName","locationDisplay","handleEdit","currentValue","handleSaveField","hasFieldChanged","JSON","stringify","newAddress","newApartment","newCity","newState","newZip","originalAddress","originalApartment","originalCity","originalState","originalZip","hasChanges","locationComponents","addressComponents","locationData","part","extractAddressComponents","updatedProfile","updateProfileInfo","prevValues","newLocation","charAt","toUpperCase","handleVerificationButton","renderVerificationAndSupport","isElitePro","base64","allowsMultipleSelection","selectedAsset","hasBase64","getMediaUrl","onError","nativeEvent","currentProfilePhotoUrl","cropParamsWithOldPhoto","imageData","processedImage","isBase64","formData","FormData","photoFile","append","prepareImageForUpload","post","image_data","old_profile_photo_url","uploadProfilePicture","photoUrl","uploadError","handleVerificationProceed","newDisplayValues","DAYS_OF_WEEK","ServiceIcon","service","sectionBox","servicesSection","servicesList","serviceWrapper","serviceItem","selectedServiceItem","serviceItemContent","serviceInfo","servicePrice","availabilityContainer","controlsScrollContainer","availabilityControls","controlsDivider","daysScrollContainer","daysContainer","availabilityDivider","availabilitySection","availabilityHeader","availabilityTitle","editHoursButton","editHoursText","dayItem","petsittingDayItem","warningLight","dayText","availabilityTime","serviceDivider","availabilityList","controlButton","blockButtonContent","blockButtonText","partialBlockButtonContent","partialBlockText","dateRangeButtonContent","dateRangeText","unavailableDayItem","unavailableSlash","rotate","unavailableDayText","nextUnavailableContainer","nextUnavailableText","ServicesAvailabilityTab","price","unavailableDays","onToggleService","onEditHours","onBlockService","onPartialDayBlock","selectedService","setSelectedService","isStacked","renderServiceItem","proDashboard","renderDayAvailability","horizontal","showsHorizontalScrollIndicator","day","isUnavailable","renderAvailabilitySection","calculateAge","birthday","today","birthDate","ageYears","getFullYear","ageMonths","getMonth","emptyStateContainer","emptyStateText","sectionDescription","petsList","petCard","petCardHeader","petBasicInfo","placeholderIcon","surfaceVariant","profilePhotoButton","plusIconContainer","petDetailsContainer","expandedDetails","detailRow","detailColumn","detailTitle","detailText","preferencesGrid","preferenceButton","selectedPreference","preferenceText","selectedPreferenceText","checkmark","petActions","fixButton","addContactForm","submitButton","submitButtonText","contactsList","contactCard","contactInfo","contactName","contactPhone","contactActions","emptyListText","compatibilityContainer","compatibilityItem","compatibilityLabel","careInfoContainer","medicationsContainer","medicationsText","vetInfoContainer","vetInfoItem","vetInfoLabel","vetInfoText","documentButton","documentButtonText","dropdownContainerEdit","optionButton","selectedOption","optionText","selectedOptionText","editInput","editInputMedications","editInputShort","editInputWeight","uploadButtonText","documentActionContainer","documentsList","documentItem","documentName","viewDocButton","viewDocText","noDocumentsText","detailSection","editContainer","inputsWrapper","inputWrapper","flexBasis","inputLabel","editMainContainer","editHeaderRow","editProfileContainer","editDetailsContainer","editActions","editActionsSmallScreen","buttonRowTop","buttonRowBottom","dateInfoContainer","dateInfoItem","dateInfoLabel","dateInfoText","customDatePickerContainer","dateInputBox","dateInputText","placeholderText","calendarButton","borderLeftWidth","borderLeftColor","datePickerContainer","calendarModalContent","calendarModalHeader","calendarModalTitle","calendarHeader","calendarNavButton","calendarMonthYear","weekdayLabels","weekdayLabel","calendarGrid","calendarRow","calendarDay","calendarDayText","calendarDayOtherMonth","calendarDayTextOtherMonth","calendarDaySelected","calendarDayTextSelected","stackedFields","fullWidth","errorModalContent","successModalContent","errorModalHeader","successModalHeader","errorModalTitle","successModalTitle","errorModalMessage","successModalMessage","errorModalButton","successModalButton","errorModalButtonText","successModalButtonText","editButtonTopRight","chevronButtonBottomRight","petInfoWithButtonPadding","paddingRight","dropdownButton","dropdownButtonText","dropdownList","dropdownScrollView","dropdownItemSelected","dropdownItemText","dropdownItemTextSelected","submitButtonDisabled","PetsPreferencesTab","preferences","homeEnvironment","emergencyContacts","onAddPet","onEditPet","onDeletePet","onReplacePet","onUpdatePreferences","p","hasOnAddPet","hasOnEditPet","hasOnDeletePet","hasOnReplacePet","expandedPetIds","setExpandedPetIds","Set","newEmergencyContact","setNewEmergencyContact","newHouseholdMember","setNewHouseholdMember","isAddingEmergencyContact","setIsAddingEmergencyContact","isAddingHouseholdMember","setIsAddingHouseholdMember","editingPetIds","setEditingPetIds","editedPetsData","setEditedPetsData","expandedSections","setExpandedSections","datePickerConfig","setDatePickerConfig","currentField","currentPetId","selectedDate","displayMonth","setDisplayMonth","displayYear","setDisplayYear","savingPet","setSavingPet","showSuccessModals","setShowSuccessModals","deleteConfirmation","setDeleteConfirmation","petId","isDeleting","showMonthPicker","setShowMonthPicker","showYearPicker","setShowYearPicker","selectedPetPhotoUri","setSelectedPetPhotoUri","showPetPhotoCropper","setShowPetPhotoCropper","currentEditingPetId","setCurrentEditingPetId","isUploadingPhoto","setIsUploadingPhoto","validationErrors","setValidationErrors","contactValidationErrors","setContactValidationErrors","updateWidth","yesNoOptions","energyLevelOptions","sexOptions","returnYesNoContainer","pet","attributeName","displayValue","returnEnergyLevelContainer","togglePetDetails","newSet","has","delete","add","handleEditPet","petToEdit","editData","medications","booleanToYesNo","childrenFriendly","friendly_with_children","catFriendly","friendly_with_cats","dogFriendly","friendly_with_dogs","spayed_neutered","house_trained","canBeLeftAlone","can_be_left_alone","getsAlongWithChildren","getsAlongWithCats","getsAlongWithDogs","handleDeletePet","petToDelete","formatDateForBackend","dateString","month","formatDateFromBackend","handleSavePetEdit","petData","currentPetsList","isNewPet","startsWith","convertYesNoToBoolean","sanitizedPetData","feedingInstructions","medicalNotes","pottyBreakSchedule","specialCareInstructions","microchipId","allergies","vaccinations","originalName","sanitizedName","originalBreed","sanitizedBreed","petToSave","adoption_date","feeding_schedule","medication_notes","potty_break_schedule","special_care_instructions","microchip_id","vet_name","vet_address","vet_phone","insurance_provider","energy_level","photo","currentPet","photoUri","addPet","savedPet","enhancedPetData","replaceTempPetWithReal","updatePet","updatedPet","profilePhotoUrl","formattedPet","newData","lastEditFailed","handleCancelPetEdit","formatPhoneNumber","phoneNumber","cleaned","handleEditChange","processedValue","numbersOnly","isSectionExpanded","sectionName","petIdStr","String","renderSectionHeader","safeTitle","isExpanded","event","toggleSection","stopPropagation","sectionNameStr","showDatePicker","currentDate","parseDate","calendarData","useMemo","firstDayOfMonth","daysInMonth","getDate","startingDayOfWeek","getDay","totalDays","ceil","calendarDays","dayCounter","dayDate","isCurrentMonth","isSelectedDate","weeks","tempPetId","realPetData","realPetId","formattedPetData","justCreated","editedData","mergedPetData","petsBefore","tempId","realId","newPetsArray","newPetData","_addToTop","restoredPets","renderDatePickerModal","monthNames","currentYear","handleOutsideClick","week","weekIndex","dayObj","dayIndex","handleDatePickerSelect","formattedDate","padStart","formatDateString","cancelDeletePet","deletePet","handleAddNewPet","existingTempPets","tempPet","newPet","isEditing","editedPetData","handleUploadDocument","photoLoadError","displayUri","TIMEZONE_MAPPING","USER_TIMEZONE_OPTIONS","displayName","searchTerms","zone","getTimezoneDisplayName","timezoneId","desktopContainer","leftColumn","rightColumn","plansScroll","plansScrollContent","planCardContainer","planCard","currentPlanBorder","popularPlan","popularTag","popularTagText","planTitle","planPrice","planDescription","planButton","currentPlanButton","planButtonText","currentPlanButtonText","settingItem","settingContent","settingTextContainer","settingTitle","settingDescription","actionButtonText","currentPlanInfo","currentPlanTitle","currentPlanBilling","usageStats","usageText","usageBar","usageProgress","paymentItem","paymentContent","paymentTextContainer","paymentTitleRow","paymentTitle","paymentDescription","setDefaultButton","setDefaultText","viewAllButton","viewAllText","timezoneItem","selectedTimezoneItem","primaryLight","timezoneText","selectedTimezoneText","timezoneButton","timezoneButtonText","searchInput","timezoneGroup","timezoneGroupHeader","timezoneItemContent","noPaymentMethodsContainer","noPaymentMethodsText","SettingsPaymentsTab","push_notifications","email_updates","marketing_communications","profile_visibility","timezone","propTimezone","use_military_time","onUpdateSetting","paymentMethods","onAddPaymentMethod","onRemovePaymentMethod","onSetDefaultPayment","currentPlan","nextBilling","connections","used","total","onSwitchPlan","isApprovedProfessional","setTimezone","timezoneModalVisible","setTimezoneModalVisible","timezones","setTimezones","searchQuery","setSearchQuery","loading","setLoading","timeSettings","getTimeSettings","fetchTimeSettings","openTimezoneModal","getCurrentTimezoneDisplayName","renderNotificationSettings","handleUpdateSetting","renderPrivacySettings","settingName","then","renderTimezoneModal","groupedTimezones","getGroupedTimezones","groups","tz","searchTerm","term","searchTimezones","renderTimezoneGroup","zoneName","updateTimeSettings","newTimezone","friendlyName","handleTimezoneChange","initialNumToRender","maxToRenderPerBatch","windowSize","mobileTab","activeTab","tabText","mobileTabText","activeTabText","createStyles","mainContainer","transition","headerSection","tabScrollContainer","tabContainer","tabContent","MyProfile","useWindowDimensions","user","logout","isMobileDesktop","setisMobileDesktop","isWideScreen","setIsWideScreen","setActiveTab","hasUnsavedChanges","lastProfileLoadRef","isLoadingProfileRef","isMountedRef","setEditMode","setCurrentPlan","isTutorialVisible","loadActiveTab","urlParams","tabFromUrl","setStorage","getState","routes","route","initialTab","storedTab","getStorage","checkAndFixPetOwners","petsWithMissingOwners","lastUpdateFailed","ownerMissing","fixPetOwner","loadProfileData","timeSinceLastLoad","round","userProfile","processedResponse","URL","href","searchParams","set","history","replaceState","storeActiveTab","unsubscribe","tabs","handlePickImage","handleSaveComplete","newProfileData","handleUpdateField","handleSwitchPlan","planId","renderActiveTab","emergency_contact","authorized_household_members","updatedServices","shouldAddToTop","petToAdd","_objectWithoutPropertiesLoose","_excluded","updatedPets","updatedPetData","updatedPreferences","selected","payment_methods","updateData","CustomButton","spacing","extraLarge","createAccountContainer","createAccountText","createAccountLink","inputLabelContainer","passwordLabelContainer","showHideText","errorInput","rememberMeContainer","checkbox","checkboxInner","rememberMeText","loginButton","loginButtonText","forgotPasswordContainer","link","prototypeWarning","SignUp","useRoute","signIn","firstName","setFirstName","lastName","setLastName","setEmail","setPassword","setConfirmPassword","setSuccessMessage","inviterName","setInviterName","inviteToken","setInviteToken","inviteVerified","setInviteVerified","verifyingInvite","setVerifyingInvite","setLocation","showLocationDropdown","setShowLocationDropdown","locationError","setLocationError","locations","setLocations","loadingLocations","setLoadingLocations","fallbackLocations","supported","firstNameError","setFirstNameError","lastNameError","setLastNameError","emailError","setEmailError","passwordError","setPasswordError","confirmPasswordError","setConfirmPasswordError","token","pathname","hash","pathParts","inviteIndex","signupIndex","searchToken","inviteInfo","verifyInvitation","valid","inviter_name","checkInvitation","fetchLocations","KeyboardAvoidingView","behavior","keyboardVerticalOffset","formContainer","inviteContainer","inviteText","dropdown","loadingContainer","dropdownWrapper","inputText","dropdownMenu","loc","selectLocation","selectedLocation","sanitizedText","removalPercentage","autoCapitalize","secureTextEntry","validateForm","firstNameValidation","lastNameValidation","emailValidation","passwordValidation","passwordMatchValidation","sanitizedFirstName","sanitizedLastName","sanitizedLocation","originalFirstName","originalLastName","originalEmail","originalLocation","passwordChanged","userTimezone","Intl","DateTimeFormat","resolvedOptions","timeZone","useMilitaryTime","userData","password2","phone_number","invitation_token","registrationData","directAxios","baseURL","registerResponse","loginResponse","access","refresh","errorData","firstError","messages","signupButton","waitlistContainer","waitlistMessage","waitlistSubMessage","navigateToWaitlist","loader","signInContainer","signInText","navigateToSignIn","signInLink","safeArea","backText","cursor","cardHovered","cardContent","mobileCardContent","topContent","mobileTopContent","profileImage","mobileProfileImage","mobileContentContainer","mobileHeaderContainer","nameAndPets","statusBadge","statusContent","statusText","clientContainer","mybookings","petContainer","mobileDivider","metaInfo","mobileMetaInfo","mobileMetaRow","metaItemContainer","metaText","viewDetailsButton","viewDetailsText","mobileClientContainer","mobileName","mobilePetContainer","mobilePetInfo","mobileStatusBadge","mobileStatusText","BookingCard","onViewDetails","client_name","professionalName","statusInfo","bgColor","textColor","confirmedBg","confirmedText","completedBg","completedText","getStatusInfo","isHovered","setIsHovered","convertedDateTime","convertDateTimeFromUTC","dateObj","getTime","monthName","toLocaleString","convertedTime","originalDate","originalTime","getMetaText","timeText","serviceText","ownername","alertContainer","alertHeader","alertBold","alertText","ProfessionalAlert","fromApprovalModal","sectionBody","footerContainer","closeFooterButton","TermsOfServiceModal","termsData","terms","badge","sectionHeaderContainer","breakdownSection","dateHeader","dateTextContainer","breakdownItem","breakdownLabelContainer","breakdownLabel","breakdownCalculation","breakdownAmount","totalItem","subtotalRow","subtotalLabel","subtotalAmount","feeRow","feeLabel","feeAmount","totalAmountContainer","totalLabel","totalAmount","divider","payoutContainer","payoutLabel","payoutAmount","payoutBreakdown","addRateContainer","rateNameAmountRow","rateEditContainer","amountInputContainer","rateInput","nameInput","descriptionInput","formDivider","editableAdditionalRateRow","rateNameAmountRowWithDelete","buttonsContainer","multipleDatesContainer","occurrenceCost","ratesToggleButton","ratesToggleText","ratesBreakdown","rateItem","rateAmount","rateDescription","occurrenceDivider","termsContainer","checkboxContainer","checkboxChecked","termsText","termsLink","termsAgreedText","additionalRatesDescription","serviceRateItem","serviceRateCheckbox","serviceRateInfo","serviceRateTitle","serviceRateAmount","serviceRateDescription","serviceContainer","serviceLabel","serviceValue","petsContainer","petsLabel","petType","noPets","notesDescription","notesTextInput","notesTextInputReadOnly","notesSaveContainer","notesSaveButton","notesSaveButtonSaved","notesSaveButtonText","notesSaveButtonTextSaved","ReviewAndRatesCard","bookingData","onRatesUpdate","bookingId","showEditControls","onTermsAgreed","onTosAgreementChange","isAddingRate","setIsAddingRate","editedRates","setEditedRates","newRate","setNewRate","expandedRates","setExpandedRates","editingOccurrenceId","setEditingOccurrenceId","occurrenceEdits","setOccurrenceEdits","isAddingRateForOccurrence","setIsAddingRateForOccurrence","newOccurrenceRate","setNewOccurrenceRate","termsAgreed","setTermsAgreed","serviceAdditionalRatesEnabled","setServiceAdditionalRatesEnabled","availableAdditionalRates","setAvailableAdditionalRates","hasInitializedRates","setHasInitializedRates","lastBookingIdRef","notesFromPro","setNotesFromPro","isSavingNotes","setIsSavingNotes","notesSaved","setNotesSaved","lastSavedNotes","setLastSavedNotes","notes_from_pro","currentTosStatus","getTosStatus","pro_agreed_tos","client_agreed_tos","showTermsModal","setShowTermsModal","defaultRates","safeRates","availableRates","enabledRates","rateKey","titleMatch","match","rateTitle","isEnabled","serviceRate","r","occ","occRate","applies","serviceAdditionalRates","allOccurrenceRates","occRates","uniqueRatesMap","Map","occurrencesWithRate","hasRate","totalOccurrences","occurrencesCount","formatCurrency","toFixed","saveNotesToDraft","conversation_id","conversationId","notes","updateDraftNotesFromPro","toggleAddRate","sanitizeAmountInput","handleNewRateAmountChange","handleNewOccurrenceRateAmountChange","saveRateChanges","hasOccurrenceEdits","ratesToSave","cleanRates","occurrencesForApi","updateBookingDraftRates","draft_data","saveNewRate","updatedRates","updateHolidayRate","updateAdditionalRate","updatedAdditionalRates","newRates","deleteAdditionalRate","occIndex","handleEditOccurrence","occurrence","handleCancelEdit","handleOccurrenceInputChange","handleAdditionalRateChange","currentOccurrenceEdits","currentAdditionalRates","updated","updatedRate","allRates","deleteRateForOccurrence","rateIndex","updatedOccurrenceEdits","getAdditionalRateValue","word","renderNotesForClient","isReadOnly","renderServiceAdditionalRates","filteredRates","toggleServiceAdditionalRate","renderBookingBreakdown","isMultipleDates","count","firstOccurrence","multiple","formatDateTimeRangeFromUTC","includeTimes","includeTimezone","newExpandedRates","v","additional_animal_rate_total","occurrenceId","rateName","occurrenceEditsRate","valueToShow","saveNewRateForOccurrence","toggleAddRateForOccurrence","cleanOccurrenceEdits","handleSaveOccurrenceRates","formattedDateRange","updateBaseRate","updateAdditionalAnimalRate","holiday_rate_total","renderTotalAmount","costSummary","client_platform_fee","pro_platform_fee","tax_state","total_client_cost","pro_subscription_plan","renderTermsCheckbox","isChecked","hasAgreedTos","newValue","termsModalOverlay","termsModalContent","termsModalHeader","termsModalTitle","termsModalText","termsModalButton","termsModalButtonText","TosRequiredModal","actionType","approveButton","approveText","loadingText","errorContainer","retryButton","retryButtonText","changeRequestContainer","changeRequestInput","buttonWrapper","changeRequestButtons","cancelRequestButton","cancelRequestButtonText","submitRequestButton","olive","submitRequestButtonText","changeButton","shortenedContainer","BookingApprovalModal","onApproveSuccess","onApproveError","onRequestChangesSuccess","onRequestChangesError","initialData","hideButtons","defaultInitialData","setBookingData","setLoadingText","changeRequestMessage","setChangeRequestMessage","showChangeRequestInput","setShowChangeRequestInput","userTosAgreed","setUserTosAgreed","showTosRequiredModal","setShowTosRequiredModal","bookingDataRef","dataLoadedRef","fetchBookingDetails","dataProtectionInterval","setInterval","hasNoData","hasRefData","clearInterval","getBookingDetails","safeResponse","toISOString","handleApprove","existingTosAgreed","currentTosAgreed","tosValueToSend","clientHasAgreedTos","bookingDataClientAgreedTos","approveBooking","handleShowChangeRequest","handleCancelChangeRequest","handleSubmitChangeRequest","requestBookingChanges","updatedData","renderFooter","isBookingUpdate","screenHeight","scrollView","scrollViewContent","headerRight","notificationButton","notificationBadge","notificationCount","profileButton","welcomeSection","welcomeContent","welcomeCard","backgroundImage","welcomeHeader","welcomeTextContainer","statsContainer","statsGrid","gridTemplateColumns","statCard","statHeader","statIconContainer","bookingsContainer","bookingItem","bookingContent","bookingInfo","bookingDetails","bookingTitle","bookingTime","bookingStatus","progressBar","progress","timeLeft","emptyStateTitle","createServiceButton","createServiceButtonText","filterContainer","filterButtons","filterButton","activeFilterButton","filterText","activeFilterText","servicesContainer","serviceContent","serviceHeader","serviceTitle","serviceCategory","serviceFooter","bookingsCount","bookingsText","viewButton","viewButtonText","Dashboard","useTheme","signOut","is_prototype","bookings","setBookings","activeFilter","setActiveFilter","onboardingProgress","setOnboardingProgress","profile_complete","has_bank_account","has_services","subscription_plan","bookingModalVisible","setBookingModalVisible","selectedBookingId","setSelectedBookingId","isLargeScreen","filteredBookings","bookingDate","parsedDate","completed","dynamicStyles","welcomeTitle","bookingCount","statValue","statLabel","statChange","fetchDashboardData","prototypeServices","owner","dashboardData","getProfessionalDashboard","getClientDashboard","upcoming_bookings","firstBooking","client_name_exists","processedBookings","normalizedDate","onboarding_progress","servicesData","getProfessionalServices","useFocusEffect","hasActiveBookings","currentActiveFilter","b","marked_noreply_as_not_spam","markNoreplyAsNotSpam","has_pets","handleViewBookingDetails","serviceId","renderServiceCard","handleCloseBookingModal","BecomeProfessional","setIsMobile","selectedPets","setSelectedPets","dog","exotics","about","setAbout","certifications","setCertifications","insuranceProof","setInsuranceProof","currentRoute","sessionStorage","getItem","initializeNavigation","petButton","selectedPetButton","petButtonText","selectedPetButtonText","inputBackground","uploadedFileContainer","uploadedFilePreview","certificationText","removeFileButton","handleBackPress","togglePetSelection","newCertification","pop","cert","removeCertification","newProof","proof","removeInsuranceProof","confirm","mobileHeader","headerTitle","webContent","roleToggleSection","roleButtons","roleButton","roleButtonActive","roleButtonText","roleButtonTextActive","listSection","webListItem","listItemTitle","switchRoleButton","logoutButton","MoreScreen","switchRole","initialRoute","setItem","initializeRoutes","handleNavigation","handleSwitchRole","newRoute","menuItems","List","renderMenuItems","items","titleStyle","Divider","Button","mode","removeItem","labelStyle","lightGrey","removeButton","reason","seeMoreButton","seeMoreText","modalTime","UnavailableTimeSlot","onRemove","showAllServices","setShowAllServices","isAllDay","formatTime","parse","formatServicesDisplay","timeContainer","AvailabilityBookingCard","handlePress","timeButton","compactTimeButton","webInputContainer","webInput","outline","webIcon","errorBorder","TimePicker","showPicker","setShowPicker","showClockIcon","isChrome","userAgent","vendor","styleElement","inputElement","toTimeString","handleIconPress","querySelector","SCREEN_HEIGHT","availabilityButton","availableButton","unavailableButton","danger","availabilityButtonText","timePickerContainer","webTimePicker","unavailableTimesContainer","customDropdown","dropdownItemContent","activeToggle","toggleText","bookingsList","emptyState","contentScrollView","unavailableTimesWrapper","bookingsWrapper","selectedDatesText","AddAvailabilityModal","propIsVisible","selectedDates","currentAvailability","onRemoveTimeSlot","setIsAllDay","setStartTime","setEndTime","showStartTimePicker","setShowStartTimePicker","showEndTimePicker","setShowEndTimePicker","selectedServices","setSelectedServices","showServiceDropdown","setShowServiceDropdown","modalWidth","setModalWidth","getModalWidth","activeView","setActiveView","editingBooking","setEditingBooking","dimensionsHandler","remove","isTimeSlotUnavailable","unavailableTimes","existingStartHour","existingStartMin","Number","existingEndHour","existingEndMin","newStartStr","newEndStr","newStartHour","newStartMin","newEndHour","newEndMin","formatSelectedDates","nestedScrollEnabled","renderUnavailableTimes","handleRemoveTimeSlot","timeSlot","updatedAvailability","filteredTimes","renderBookings","dateBookings","handleBookingPress","withoutAll","handleMarkAvailable","handleMarkUnavailable","dates","serviceTypes","DatetimePicker","isInModal","selectedValues","setSelectedValues","days","hours","minutes","ampm","convertToDate","hour","renderSelect","selectStyle","select","errorSelect","monthSelect","yearSelect","daySelect","handleSelectChange","newValues","row","rowIndex","selectContainer","appearance","WebkitAppearance","MozAppearance","ALL_DAYS","settingContainer","dayContainer","selectedTab","selectedTabText","daySettingsContainer","settingRow","enabledText","datePickerWrapper","validationErrorText","DefaultSettingsModal","defaultSettings","selectedDays","setSelectedDays","settings","setSettings","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday","showTimePicker","setShowTimePicker","setShowDatePicker","isCurrentlyUnavailable","setIsCurrentlyUnavailable","showDayDropdown","setShowDayDropdown","spring","tension","friction","handleClickOutside","getElementById","contains","handleAvailabilityChange","makeAvailable","daysToUpdate","newSettings","renderTimePicker","selectedTime","timeString","renderEndDatePicker","onClick","onMouseDown","daySettings","updateDaySettings","prevSettings","checkCurrentAvailability","d","handleDaySelection","renderDaySettings","newTime","handleContainer","handle","headerMinimized","headerCenter","timeToggleContainer","customToggle","toggleButtonInactive","timeSection","serviceSection","serviceSelector","serviceSelectorText","serviceSelectorError","AvailabilityBottomSheet","onViewUnavailableTimes","onMinimize","isMinimized","setIsMinimized","animatedHeight","animatedOpacity","slideAnimation","getAvailabilityStatus","dateAvailability","isAvailable","validateAndSave","toggleMinimized","newMinimizedState","containerHeight","getStatusColor","timesList","timeSlotContainer","timeSlotContent","timeAndReason","reasonText","bookingButton","UnavailableTimesModal","setHours","getUnavailableTimes","allTimes","processedTimes","timeKey","isBooking","ownerId","sort","localeCompare","renderActionButton","renderTimeSlot","formattedStartTime","formattedEndTime","bottomSheetOverlay","centeredContainer","defaultSettingsButton","defaultSettingsText","colorKeyContainer","colorKeyTitle","colorKeyItem","colorBox","colorKeyText","bottomSheetContainer","calendar","AvailabilitySettings","markedDates","setMarkedDates","setSelectedDates","isAddModalVisible","setIsAddModalVisible","isSettingsModalVisible","setIsSettingsModalVisible","defaultAvailability","setDefaultAvailability","setCurrentAvailability","setDefaultSettings","showBottomSheet","setShowBottomSheet","showUnavailableTimesModal","setShowUnavailableTimesModal","isClosing","setIsClosing","isBottomSheetMinimized","setIsBottomSheetMinimized","availableDates","unavailableDates","updateMarkedDates","combinedAvailability","loadAvailabilityData","newMarkedDates","isFullDay","allServicesSelected","calendarColor","bookingList","marked","dotColor","calendarColorYellowBrown","toggleBottomSheet","show","handleAddAvailability","availabilityData","newCurrentAvailability","IconComponent","Calendar","onDayPress","setDate","firstDate","range","calendarBackground","textSectionTitleColor","selectedDayBackgroundColor","selectedDayTextColor","todayTextColor","dayTextColor","textDisabledColor","monthTextColor","arrowColor","indicatorColor","Icon","oneYearFromNow","daysMapping","UTC","targetDayNumber","currentDayNumber","getUTCDay","setUTCDate","getUTCDate","applyDefaultSettingsToCalendar","onViewBookings","handleViewBookings","minimized","currentDateAvailability","androidContainer","StatusBar","currentHeight","messageButtonContainer","messageButton","OwnerHistory","ownerData","contracts","invoices","upcomingBookings","Content","Card","Title","Paragraph","contract","Actions","invoice","dateTimeContainer","dateInputGroup","timeInputGroup","numberInput","yearInput","separator","periodButton","periodText","calendarHeaderText","calendarWeekDays","calendarWeekDay","calendarWeek","selectedDay","selectedDayText","timeSelector","timeSelectorColumn","timeSelectorLabel","timeSelectorScroll","timeSelectorItem","timeSelectorText","selectedTimeText","periodContainer","disabledDay","dollarSign","rateSection","baseRateInput","timeUnitInput","totalSection","rateAmountContainer","rateAmountInput","addRateButtonText","rateLabelContainer","rateTitleLabel","rateAmountLabel","serviceOptions","serviceButton","petOptions","dateContainer","timePickerWrapper","dropdownInput","addPetButton","addPetText","occurrenceCard","occurrenceDetails","addOccurrenceButton","addOccurrenceText","occurrenceActions","bookingRequestCard","bookingRequestHeader","bookingRequestTitle","bookingRequestDetails","detailLabel","acceptButton","acceptButtonText","occurrenceCardError","selectedServiceCard","selectedServiceText","selectedPetCard","petImageContainer","petImage","defaultPetImage","selectedItemsContainer","selectedItemsTitle","selectedItemsContent","selectedTag","selectedTagText","serviceCheckIcon","ServiceAndPetsCard","onServiceSelect","onPetSelect","onBatchPetSelect","currentBookingId","shouldFetchServices","shouldFetchPets","markServicesInitialized","markPetsInitialized","availableServices","parentAvailableServices","availablePets","parentAvailablePets","onServicesData","onPetsData","localAvailableServices","setLocalAvailableServices","localAvailablePets","setLocalAvailablePets","isLoadingServices","setIsLoadingServices","isLoadingPets","setIsLoadingPets","serviceError","setServiceError","petsError","setPetsError","selectedPetsCount","selectedPetIds","currentAvailableServicesCount","currentAvailablePetsCount","fetchAvailableServices","fetchAvailablePets","getBookingAvailableServices","servicesCount","responseKeys","selected_service_id","responseType","servicesType","currentSelectedPets","getBookingAvailablePets","petsCount","selected_pet_ids","petsType","getServiceIcon","availableServicesCount","availablePetsCount","selectedServiceId","isSelected","isOvernightForced","noServicesContainer","selectedPet","defaultSource","renderPetCard","maxCalendarHeight","isDesktopView","bookingTypeContainer","bookingTypeButton","selectedBookingTypeButton","bookingTypeText","selectedBookingTypeText","dateRangeTypeContainer","dateRangeTypeButton","selectedDateRangeTypeButton","dateRangeTypeText","selectedDateRangeTypeText","calendarContainer","calendarTitle","calendarNavButtonText","weekdaysContainer","weekdayText","weekRow","dateCell","otherMonthDate","otherMonthDateText","dateInRange","selectedDateText","selectedDatesContainer","selectedDatesTitle","selectedDatesList","selectedDateChip","selectedDateChipText","removeButtonText","recurringOptionsContainer","daysOfWeekContainer","dayOfWeekButton","selectedDayOfWeekButton","dayOfWeekText","selectedDayOfWeekText","dateRangeSection","dateRangeRow","dateRangeColumn","dateRangeLabel","dateRangeValue","frequencyContainer","frequencyButton","selectedFrequencyButton","frequencyText","selectedFrequencyText","recurrencePatternContainer","recurrencePatternTitle","recurrencePatternText","modalCloseButtonText","previewButton","previewButtonText","previewModalContent","previewCalendarContainer","recurringDate","recurringDateText","previewDateCell","dateRangeChip","removeRangeButton","oneTimeOptionsContainer","dateSelectionTitle","DateSelectionCard","onDateSelect","bookingType","dateRangeType","initialDateRange","currentMonth","setCurrentMonth","setSelectedDatesList","selectedBookingType","setSelectedBookingType","selectedDateRangeType","setSelectedDateRangeType","rangeStartDate","setRangeStartDate","selectedDaysOfWeek","setSelectedDaysOfWeek","selectedFrequency","setSelectedFrequency","dateRangeEnd","setDateRangeEnd","showRecurringCalendar","setShowRecurringCalendar","recurringStartDate","setRecurringStartDate","recurringEndDate","setRecurringEndDate","setMonth","isSelectingStartDate","setIsSelectingStartDate","showRecurringPreview","setShowRecurringPreview","showRecurringDropdownCalendar","setShowRecurringDropdownCalendar","tempRangeStart","setTempRangeStart","tempRangeEnd","setTempRangeEnd","datesFromRange","setDatesFromRange","lastRangeSelection","setLastRangeSelection","datesArray","dateItem","areConsecutiveDates","checkIfConsecutiveDates","sortedDates","dateData","rangeType","prevDate","currDate","dateRange","handleFrequencySelect","frequency","goToPreviousMonth","prevMonth","goToNextMonth","nextMonth","isDateSelected","handleDateRangeSelection","toggleDateSelection","newSelectedDates","getSelectedDaysText","dayNames","daysText","lastDay","weekNum","getWeekOfMonth","renderCalendar","monthStart","monthEnd","dateIndex","isSelectable","isDateSelectable","isInRange","isDateInRange","isInTempRange","isDateInTempRange","daysOfWeek","handleRecurringDateSelect","handleDateSelection","formatSelectedDate","clearDateRange","renderSelectedDates","handleDayOfWeekSelect","dropdownCalendar","dropdownCalendarContent","dropdownCloseButton","dropdownCloseButtonText","RecurringCalendarPreview","previewMonth","setPreviewMonth","renderPreviewCalendar","recurringDates","getRecurringDates","end","floor","isRecurring","HOURS","MINUTES","m","PERIODS","timeDisplay","inlineContainer","dropdownContent","column","buttonRow","TimePickerDropdown","initialTime","onTimeSelect","isOpen","uniqueId","showInlinePicker","hourScrollRef","minuteScrollRef","periodScrollRef","initTime","init12Hour","hours24","minute","period","setSelectedTime","lastConfirmedTime","setLastConfirmedTime","timeError","setTimeError","scrollToSelections","handleConfirm","time12h","time24h","triggerTimeChange","handleCancel","hourOffset","indexOf","scrollTo","animated","minuteOffset","periodOffset","renderDropdownContent","handleHourSelect","handleMinuteSelect","handlePeriodSelect","MaterialIcons","formatTimeDisplay","timeSelectionContainer","dateLabel","timeLabel","timeButtonContent","durationContainer","bgColorModern","durationText","startModalContent","endModalContent","NewTimeRangeSelector","initialTimes","isIndividualDaySelector","times","setTimes","defaultTimes","activeTimePicker","setActiveTimePicker","updatedTimes","validHours","validMinutes","formatDate","toLocaleDateString","getStartDate","getEndDate","calculateDuration","diffDays","normalizedStartDate","normalizedEndDate","nights","startMinutes","endMinutes","durationMinutes","durationStr","isEndTimeMidnight","startTotalMinutes","endTotalMinutes","attemptedStart","currentEnd","newTimes","isNewEndTimeMidnight","currentStart","attemptedEnd","DayTimeSelector","onTimeChange","generateUniqueId","dateKey","generateDateKey","weekday","timesData","parseTimeValue","timeValue","customizeButtonContainer","customizeButton","customizeButtonText","individualDaysContainer","TimeSelectionCard","showIndividualDays","setShowIndividualDays","shouldShowIndividual","hasIndividualTimes","individualTimeRanges","setIndividualTimeRanges","isInitialRender","hasIndividualTimesFlag","startTimeValue","formattedTimes","selectedServiceIsOvernight","isOvernightForcedProp","initialTimesIsOvernightForced","hasDatesInDraft","hasDateRange","hasDates","newTimeRanges","dayTime","parsedStartTime","parsedEndTime","handleIndividualDayTimeSelect","updatedRanges","formattedRanges","timeData","handleToggleIndividualDays","getDates","SERVICES_AND_PETS","DATE_SELECTION","TIME_SELECTION","REVIEW_AND_RATES","spacer","smallMargin","smallScreenButton","cancelButtonSmall","nextButtonSmall","stepContent","confirmButtonColumn","BookingStepModal","onComplete","isSmallScreen","dateSelectionData","hasFetchedDates","hasInitializedServices","setHasInitializedServices","hasInitializedPets","setHasInitializedPets","lastInitializedBookingId","setLastInitializedBookingId","setAvailableServices","setAvailablePets","initializationRef","lastBookingId","servicesInitialized","petsInitialized","servicesInProgress","petsInProgress","getBookingDraftDatesAndTimes","fallbackUsed","parsedData","parseOccurrencesForBookingSteps","isOvernightService","firstOcc","lastOcc","daysDifference","occ1Date","occ2Date","daysBetween","date1","date2","date_range_type","initialCheck","afterOccurrenceChecks","finalIsOvernightForced","individualTimes","allTimesAreTheSame","booking_type","fetchDraftDatesAndTimes","handleServiceSelect","cleanDefaultTimes","previousTimes","newCleanTimes","serviceIsOvernight","handlePetSelect","handleBatchPetSelect","petsArray","currentRef","shouldFetch","isError","handleServicesData","currentSelectedId","serviceToSelect","handlePetsData","petsToSelect","is_selected","handleDateSelect","currentDateRangeType","isServiceOvernight","isTimesOvernightForced","newDateRange","handleTimeSelect","hasServiceOvernight","timeDataIsOvernightForced","hasValidDates","hasValidDateRange","hasValidDateSelectionData","updateBookingDraftPetsAndServices","isServiceOvernightFlag","isTimeOvernightFlag","isAnyOvernightFlag","formatDateForAPI","formatTimeForAPI","userTz","utcStartDate","utcStartTime","convertToUTC","utcEndDate","utcEndTime","updateBookingDraftTimeAndDate","isTimeOvernight","isMultiDayRange","timesIsOvernightForced","endTimeIsMidnight","isMidnightEndTimeButNotForced","willTreatAsOvernight","updatedBookingData","isNonOvernightDateRange","willUseEndpoint","isMultiDay","formattedDates","dayTimes","needsNextDayDate","endDateObj","formattedEndDate","calculatedEndDate","isDifferentDates","updateBookingDraftMultipleDays","updateBookingDraftRecurring","stack","hasAgreedToTerms","createBookingFromDraft","bookingMessageData","bookingMessage","type_of_message","sent_by_other_user","resetModal","dateSelectionIsOvernightMode","combinedMode","currentServiceIsOvernight","previousTimesIsOvernightForced","calculatedCurrentServiceIsOvernight","isOvernightMode","dateCount","combinedOvernight","agreed","sentCard","receivedCard","approvalCard","confirmedCard","colorBar","colorBarLeft","colorBarRight","requestHeader","approvalHeader","confirmedHeader","requestTitle","approvalTitle","changeRequestTitle","infoSection","datesSection","datesSectionHeader","datesCount","occurrenceContainer","occurrenceItem","dateTimeText","dstMessage","detailsButton","detailsButtonText","approveButtonText","statusOverlay","changeMessageContainer","changeMessageLabel","changeMessageText","showMoreButton","showMoreText","confirmationContainerClickable","confirmationContainer","confirmationText","confirmedTitle","confirmationBorder","completeButton","completeButtonText","BookingMessageCard","displayType","isFromMe","onEditDraft","hasChangeRequest","isNewestMessage","messageCreatedAt","hasNewerApprovalRequests","isAfterConfirmation","onMarkCompletedSuccess","onMarkCompletedError","isBookingCompleted","approvalModalVisible","setApprovalModalVisible","safeInitialData","setSafeInitialData","showAllDates","setShowAllDates","isMarkingCompleted","setIsMarkingCompleted","toastVisible","setToastVisible","toastMessage","setToastMessage","toastType","setToastType","preparedData","isConfirmed","isChangeRequest","isBookingConfirmed","shouldShowAsApproval","shouldShowOverlay","overlayText","overlayLogicChecks","isConfirmedButNotConfirmationMessage","isChangeRequestAndNewestMessage","isApprovalWithChangeRequest","isBookingConfirmedWithNewerApprovals","handleOpenApprovalModal","tempData","formatOccurrenceDateRange","formattedRange","checkDSTChange","startMoment","moment","endMoment","utcOffset","dst_message","formatted_start","formatted_end","getOccurrenceDuration","hoursDiff","diff","daysDiff","hasMoreDates","visibleOccurrences","hiddenDatesCount","getCardStyle","baseStyle","getTitle","black","markBookingCompleted","getCostValue","isLastVisibleItem","showBottomBorder","toggleDatesExpansion","DraftConfirmationModal","onContinueExisting","onCreateNew","useWebSocket","messageType","handlerId","random","substr","isConnected","setIsConnected","connectionStatus","setConnectionStatus","statusUpdateTimeRef","handlerRegisteredRef","failedAttemptsRef","unregisterHandlers","websocketManager","init","unregister","registerHandler","unregisterConn","prevStatus","prevConnected","unregisterUserStatus","user_id","is_online","initialize","initialConnectionCheck","initialCheckTimeout","checkStatus","secondsSinceUpdate","actuallyConnected","send","sendMessage","endpoint","payload","Authorization","reconnect","markMessagesAsRead","messageIds","message_ids","disconnect","connect","bind","simulateConnection","isUsingFallback","isMobileBrowser","downloadImageWeb","imageUrl","filename","downloadFilename","generateFilename","download","appendChild","click","removeChild","platform","method","credentials","blob","blobUrl","createObjectURL","revokeObjectURL","blobSize","fallbackError","urlParts","ImageViewer","processedImageUrl","shouldShowSaveButton","originalUrl","processedUrl","showSaveButton","barStyle","testID","ext","isValidImageUrl","downloadImage","ClickableImage","MessageDateSeparator","formatCache","clearCacheIfNeeded","clear","formatMessageTime","targetTimezone","cacheKey","dateTimeMatch","dateStr","timeStr","formatFromUTC","FORMAT_TYPES","TIME_ONLY","groupMessagesByDate","specificMessage","messageId","utcMoment","localMoment","utcDate","localDate","utcFullTime","localFullTime","tzOffset","totalGroups","dateKeys","totalMessageIds","flat","groupContents","ids","msg","shouldShowTimestamp","prevMessage","isFirstInGroup","currentTime","created_at","prevTime","timeDiff","is_attachment","image_url","image_urls","sanitizeContactDetails","sanitizedContent","pattern","containsContactDetails","ContactWarning","MessageList","forwardRef","renderMessage","hasMore","isLoadingMore","onLoadMore","className","onScrollStart","flatListRef","isUserScrollingRef","isLoadingMoreRef","previousMessageCount","initialRenderRef","preventInitialPaginationRef","scrollPositionRef","lastPaginationTimeRef","PAGINATION_COOLDOWN","scrollStartHandlerRef","hasScrollStartedRef","scrollStartTimeoutRef","handler","paginatedIndicesRef","isNearPaginationBoundaryRef","prevCount","newCount","difference","triggerPagination","triggerIndex","forceTrigger","timeSinceLastPagination","isUserScrolling","initialRender","cooldown","paginatedIndices","messageCount","onViewableItemsChangedRef","viewableItems","changed","lastMessageIndex","viewableItemsCount","oldestVisibleIndex","newestChangedItem","change","isViewable","messagesLength","batchNumber","batchEndIndex","distanceToBatchBoundary","isNearEndOfList","isNearBoundary","distanceFromEnd","triggerPoints","matchingTriggerPoints","point","triggerPoint","alreadyPaginated","handleEndReached","node","getScrollableNode","scrollNode","scrollHeight","clientHeight","scrollTop","distanceFromBottom","endIndex","scrollPosition","preventInitialPagination","hasPaginatedAtEnd","hasPaginatedNearEnd","BATCH_SIZE","nextBestIndex","handleScroll","currentScrollY","contentOffset","previousScrollY","layoutMeasurement","contentSize","scrollDirection","isAtTop","canScrollUp","contentHeight","visibleHeight","distanceFromOldestMessages","scrollY","currentBatchNumber","targetIndex","exactBatchIndex","currentBatch","isNearPaginationBoundary","foundUnpaginatedBoundary","viewabilityConfigRef","itemVisiblePercentThreshold","minimumViewTime","onScrollBeginDragRef","onMomentumScrollEndRef","shouldTriggerPagination","senderHash","contentHash","extraPadding","Platform","isPad","scrollToOffset","offset","isPaginationLoad","previousCount","MSStream","styleTag","innerHTML","head","handleFocusIn","tagName","classList","messageContainer","scrollIntoView","handleFocusOut","relatedTarget","visibilityState","scrollToTop","getDateKey","shouldShowDateSeparator","currentDateKey","nextMessage","nextDateKey","currentUtcMoment","nextUtcMoment","currentLocalMoment","nextLocalMoment","currentId","currentContent","nextId","nextContent","currentTimestamp","nextTimestamp","currentUtcDate","currentLocalDate","nextUtcDate","nextLocalDate","shouldShowSeparator","renderItemWithDateSeparator","isOldestMessage","localTime","needsDateSeparator","formatMessageDate","messageIdMatch","messageDate","isTestMessage","startOf","yesterday","subtract","clone","realToday","realYesterday","messageDateKey","todayToUse","yesterdayToUse","todayKey","yesterdayKey","yearToCompare","messageKey","isActuallyToday","isNormalMessage","isImageMessage","shouldSanitizeContent","shouldShowContactWarning","sanitizedItem","sanitizedLength","renderedMessage","messageList","onEndReached","onEndReachedThreshold","scrollEventThrottle","onScroll","onViewableItemsChanged","viewabilityConfig","onScrollBeginDrag","onMomentumScrollEnd","inverted","maintainVisibleContentPosition","minIndexForVisible","autoscrollToTopThreshold","ListFooterComponent","loadingMore","removeClippedSubviews","ProfilePhoto","fallbackIconName","fallbackIconSize","ConversationList","conversations","selectedConversation","onSelectConversation","onSearchChange","getConversationUnreadCount","markConversationAsRead","conversationsCount","hasGetConversationUnreadCount","hasMarkConversationAsRead","conversationUnreadCounts","conv","unreadCount","conversationListContainer","searchContainer","searchInputContainer","searchIcon","clearButton","otherParticipantName","participant2_name","participant1_name","convUnreadFlag","conversationItem","previouslySelected","willCallMarkAsRead","selectedConversationId","hasUnread","forceRefresh","profile_picture","conversationProfilePhoto","conversationContent","conversationHeader","conversationName","other_user_name","conversationTime","last_message_time","toLocaleTimeString","conversationLastMessageContainer","conversationLastMessage","activeConversationText","unreadMessage","last_message","unreadBadge","unreadBadgeText","bookingStatusContainer","bookingPendingStatus","MessageInput","onSendMessage","onShowDropdown","showDropdown","messageContent","setMessageContent","selectedImages","setSelectedImages","setIsUploading","textInputRef","dismissKeyboard","activeElement","blur","scrollTimeout","handleScrollStart","resetInputHeight","details","asset","fileName","fileSize","prevImages","removeImage","handleSend","validatedMessage","lengthDiff","totalSize","sum","totalSizeBytes","totalSizeMB","imageCount","messageObject","uploadAndSendImageMessage","hasCaption","captionText","messageObjectContent","focus","adjustHeight","defaultHeight","newHeight","handleChange","handleKeyPress","shiftKey","inputSection","inputContainerOuter","selectedImagesWrapper","selectedImagesScrollView","selectedImagesContainer","selectedImageContainer","selectedImagePreview","removeImageButton","uploadingOverlay","attachButtonContainer","attachButton","inputInnerContainer","onKeyPress","sendButton","sendButtonActive","sendButtonInactive","MessageHeader","selectedConversationData","hasDraft","draftData","onCreateBooking","onViewPets","setShowDropdown","dropdownRef","showDropdownButton","is_professional","mobileHeaderContent","backArrow","mobileHeaderNameContainer","mobileProfilePhotoContainer","mobileProfilePhoto","mobileHeaderName","headerDropdownMenu","headerDropdownItem","headerDropdownText","draft_id","messageHeader","messageHeaderContent","messageHeaderName","ratingText","reviewCountText","reviewsList","reviewUserInfo","profileContainer","defaultProfileImage","reviewUserDetails","nameAndStarsRow","reviewerName","serviceRow","calendarIcon","serviceInfoText","ReviewsModal","averageRating","reviewCount","userName","forProfessional","renderStars","stars","renderProfilePicture","review","reviewer_profile_picture","last_occurrence_end_date","review_text","petListImageContainer","petListImage","petListImagePlaceholder","petTextContainer","modalContainerSmallMobile","headerLeft","headerTextContainer","clientProfilePhoto","clientProfilePhotoPlaceholder","clientName","clientSubtitleContainer","clientSubtitle","reviewBadge","reviewBadgeText","retryText","contentMobile","mobilePetsView","mobilePetItem","mobilePetContent","mobilePetName","mobilePetType","mobileDetailsView","mobileDetailsHeader","mobileDetailsTitle","mobileDetailsScrollView","borderRightWidth","borderRightColor","petsScrollView","petItemSelected","petNameSelected","petTypeSelected","detailsScrollView","detailsTitle","detailsSection","petImagePlaceholder","noSelectionContainer","noSelectionText","createBookingButton","createBookingButtonText","reviewSection","reviewSummary","reviewsScrollView","reviewHeader","reviewRating","reviewDate","ClientPetsModal","conversation","otherUserName","otherUserProfilePhoto","setPets","setReviews","setAverageRating","setReviewCount","setSelectedPet","mobileView","setMobileView","showReviewsModal","setShowReviewsModal","isSmallMobile","fetchPets","fetchReviews","petsData","getClientPets","reviewsData","getUserReviews","average_rating","review_count","renderPetDetails","is_dog","handleOpenReviewsModal","handleBackToPets","handleCreateBooking","handleCloseReviewsModal","MessageTimestamp","formattedTime","messageTimestampContainer","sentMessageTimestamp","receivedMessageTimestamp","messageTimestampText","ratingLabel","starsRow","starContainer","reviewTextContainer","reviewTextLabel","reviewTextInput","noticeContainer","noticeText","actionButtons","ReviewModal","onSubmitReview","setRating","setReviewText","Keyboard","dismiss","completedBanner","reviewButton","reviewButtonText","ReviewRequestCard","reviewModalVisible","setReviewModalVisible","handleOpenReviewModal","submitBookingReview","reviewData","MessageHistory","createMessageStyles","mainSection","conversationProfilePhotoFallback","messageSection","mobileProfilePhotoFallback","messagesContainer","fullWidthMessage","sendButtonMobile","messageCard","sentMessage","receivedMessage","messageText","sentMessageContainer","receivedMessageContainer","sentMessageText","receivedMessageText","WebkitTapHighlightColor","editDraftButton","editDraftText","mobileEditDraftButton","createBookingContainer","createBookingHangingButton","createBookingHangingText","mobileMessageView","messageImage","messageImagesContainer","getInitialWidth","innerWidth","isLoadingConversations","setIsLoadingConversations","isLoadingMessages","setIsLoadingMessages","isSearchFocused","setIsSearchFocused","setSelectedConversation","setSelectedConversationData","isImageViewerVisible","selectedImageUrl","handleImagePress","closeImageViewer","useImageViewer","setIsImageViewerVisible","setSelectedImageUrl","setMessages","isSending","setIsSending","showRequestModal","setShowRequestModal","setConversations","filteredConversations","setFilteredConversations","isIntentionallyDeselecting","isKeyboardVisible","setIsKeyboardVisible","keyboardHeightRef","setHasMore","currentPage","setCurrentPage","setIsLoadingMore","prevScreenWidthRef","isInitialLoad","setIsInitialLoad","initialLoadRef","showBookingStepModal","setShowBookingStepModal","setCurrentBookingId","setHasDraft","setDraftData","showDraftConfirmModal","setShowDraftConfirmModal","wsConnectionStatus","setWsConnectionStatus","resetNotifications","updateRoute","MessageNotificationContext","showClientPetsModal","setShowClientPetsModal","isHandlingRouteParamsRef","hasLoadedMessagesRef","shouldOpenBookingCreationRef","markMessagesAsReadRef","lastViewedConversationRef","processedPagesRef","messageIdsRef","actualViewportHeightRef","inputContainerHeightRef","isAndroidChromeRef","isFetchingConversationsRef","isFetchingMessagesRef","keyboardDismissHandlerRef","renderCountRef","routeParams","detectKeyboard","visualViewport","keyboardHeight","innerHeight","keyboardVisible","visualViewportHeight","documentElement","fetchConversations","isWebMobile","isAndroidChrome","existingStyle","updateViewportHeight","vh","setProperty","previousHeight","currentActiveElement","handleResize","documentHeight","urlBarHeight","isKeyboardOpen","offsetHeight","inputRect","getBoundingClientRect","viewportHeight","inputBottom","needsExtraScroll","inputHeight","browser","stillActive","block","handleWebSocketMessage","currentMessageCount","statusUserId","isOnline","prevConversations","updatedConversations","participant1Id","participant2Id","other_participant_online","updatedCount","selectedParticipant1Id","selectedParticipant2Id","prevMessages","newMessageId","newMessageContent","_isOptimistic","updatedMessages","_wasOptimistic","messageLength","newMessageLength","oldLength","newLength","addedMessageId","WebSocket","isInitializingRef","lastWindowWidthRef","lastInitTimeRef","lastSelectedConversationRef","isScreenFocusedRef","lastFocusRefreshTimeRef","hasConversations","timeSinceLastRefresh","minTimeBetweenRefresh","conversationData","currentWindowWidth","isResizeEvent","oldWidth","newWidth","hasSelectedConversation","hasStoredConversation","isResizeTriggeredSelectionRef","timeSinceLastInit","minRequiredTime","isFirstTime","hasNoConversationsAfterSignIn","currentUrl","rawSelectedConversationId","rawUrlConversationId","urlConversationId","conversationToLoad","conversationsData","cleanUrl","paramsToKeep","c","has_profile_pic","newUrl","fetchMessages","availableIds","setParams","clientId","filteredByRole","sortedConversations","timeA","initializeData","lastConversationFetchTimeRef","minTimeBetweenFetches","timeSinceLastFetch","prevWidth","crossedFrom","crossedTo","prevFilterScreenWidthRef","wasPreviouslyDesktopView","shouldDetailLog","currentRole","totalConversations","originalCount","filteredCount","justCrossedToDesktop","needsInitialSelection","roleFiltered","lowercaseQuery","searchFiltered","roleFilteredCount","searchFilteredCount","conversationExists","isFound","stackTrace","routeName","screenParams","hasExistingConversations","caller","currentlySelected","current_url","getConversations","newConversation","found","total_conversations","route_params","matchingConversation","page","hasConversationData","matchesId","matchesRole","conversation_is_professional","fromRouteParams","allConversations","fetchKey","getConversationMessages","newMessages","has_more","has_draft","isPagination","existingIds","uniqueNewMessages","combinedMessages","previous","newUnique","combined","updatedConversation","createNewDraft","loadMoreMessages","isAlreadyLoading","nextPageAlreadyProcessed","isLoadingMoreRefCurrent","nextPageProcessed","bookingMessages","groupMessagesByBookingId","confirmedBookingIds","Boolean","completedBookingIds","is_review_request","client_review","professional_review","action","showTimestamp","hasImages","hasLegacyImage","forceHasImage","bookingsWithUpdates","messagesForBooking","confirmationMessage","confirmationTime","newerApprovalRequests","bookingIsConfirmed","bookingMessagesList","hasAssociatedChangeRequest","isApprovalMessage","booking_status","isUpdateToConfirmedBooking","hasNewerRequestChanges","showEditDraft","handleEditDraft","isNewestChangeRequest","hasNewerApprovalMessages","originalIsNewest","hasNewerApprovals","effectivelyNewest","isRelatedToUpdate","hasOlderBookingConfirmedMessage","hasOlderApprovalMessage","payout","isAttachmentMessage","hasImageUrl","filtered","renderConversationList","renderedConversations","filteredConversationsCount","safeConversationsCount","convId","previousConversation","renderMessageSection","draftId","handleOpenExistingDraft","handleViewPets","handlerSetter","imageMessageIds","alreadySent","messageContentLength","messageContentPreview","selectedConversationType","hasImageMessageIds","hasMessageObject","hasImageUrls","beforeLength","afterLength","hasContent","requestData","image_message_ids","apiUrl","hasToken","responseStatus","responseData","errorResponse","errorStatus","requestedConversationId","requestedMessageContent","SendNormalMessage","oldValue","url_after","createDraftFromBooking","handleBeforeUnload","initialConversationId","performance","navigationEntry","getEntriesByType","previousCacheSize","previousMessageIdsSize","processedPagesSize","messageIdsSize","checkAndroidKeyboard","isInputFocused","viewportHeightReduced","keyboardIsLikelyOpen","handleAndroidFocus","checkInterval","ensureLatestMessageVisible","selectors","targetFound","selector","elements","querySelectorAll","el","cssText","childCount","childElementCount","intervalId","fixMessageVisibility","flatList","computedStyle","getComputedStyle","paddingApplied","marginApplied","child","adjustForKeyboard","useLayoutEffect","styleEl","styleId","ensureMessageListPadding","timeoutId","conversationsTotal","filteredTotal","originalConversations","safeFilteredConversations","resizeTimeoutRef","lastWidthRef","handleScreenWidthChange","currentWidth","lastWidth","previousWidth","brave","isBrave","fixGreySpace","borderTop","processedNavigationTimestampsRef","_timestamp","has_fullConversationData","fullConversationData","hasRecentTimestamp","isFromProfessionalModal","hasProcessedThisTimestamp","isScreenResizeEvent","navigationTimestamp","currentConversation","conversationCount","isUpdate","lastMessageText","handleContinueExisting","socket","handlers","reconnectAttempts","maxReconnectAttempts","reconnectDelay","heartbeatInterval","readyState","CONNECTING","OPEN","wsUrl","protocol","host","onopen","startHeartbeat","onmessage","handleMessage","onclose","stopHeartbeat","attemptReconnect","close","unregisterHandler","typeHandlers","delay","unreadContainer","avatarContainer","avatar","unreadAvatar","unreadDot","unreadDotText","unreadName","messageRow","statusRow","successLight","draftBadge","unreadText","conversationsList","emptyTitle","emptySubtitle","conversationInfo","actionsButton","dropdownOverlay","dropdownHeader","dropdownTitle","dropdownAction","dropdownActionText","imagePreviewContainer","imagePreview","previewImage","imageButton","ownContainer","otherContainer","bubble","ownBubble","borderBottomRightRadius","otherBubble","borderBottomLeftRadius","ownMessageText","otherMessageText","ownTimestamp","otherTimestamp","statusIcons","imageMessageContainer","imageWrapper","captionBubble","imageTimestamp","ownImageTimestamp","otherImageTimestamp","messagesList","messagesContent","dateSeparator","dateSeparatorText","warningContainer","warningText","Settings","settingsItems","appName","paragraph","listItem","PrivacyPolicy","ProfessionalSettings","testSection","TermsOfService","HelpFAQ","useFormspree","infoTitle","stepContainer","stepHeader","stepNumberText","stepTitle","stepDescription","bulletPoints","bulletPoint","ctaContainer","ctaText","ContactUs","handleFormspreeSubmit","setName","setMessage","messageError","setMessageError","maxContentWidth","isBecomeProfessional","succeeded","nameValidation","messageValidation","originalMessage","SearchBar","initialValue","inputRef","IconButton","returnKeyType","blurOnSubmit","memo","androidSafeArea","searchAndFilterContainer","searchBar","ownerList","ownerCard","petTypes","petChip","noOwnersContainer","filtersContainer","filterChip","applyButton","closeIcon","Owners","selectedFilters","setSelectedFilters","tempFilters","setTempFilters","isFilterModalVisible","setIsFilterModalVisible","owners","setOwners","fetchOwners","toggleFilter","prevFilters","f","applyFilters","filteredOwners","matchesSearch","matchesFilters","every","lastBookingDate","weekAgo","monthAgo","yearAgo","setFullYear","renderOwner","Chip","handleSearchChange","CostCalculationModal","onContactPress","setStartDate","setEndDate","additionalAnimals","setAdditionalAnimals","isHolidayRate","setIsHolidayRate","selectedRates","setSelectedRates","setTotalCost","platformFees","setPlatformFees","ratesObj","calculateTotalCost","persistentScrollbar","counterContainer","counterButton","counterText","finalTotal","finalTotalText","contactButton","contactButtonText","dateSection","dateColumn","heartButton","flexShrink","animalTypeContainer","calculateButton","calculateButtonText","ServiceCard","onHeartPress","isFavorite","professionalId","isModalVisible","setIsModalVisible","handleContactPress","existingConversation","createNewConversation","isCurrentUserOwner","unshift","WebMap","mockReviews","textContent","platformStorage","AsyncStorage","topSection","gallerySection","bottomSection","aboutSection","hostingSection","hostTitle","weightRanges","weightRange","galleryPhoto","centered","statItem","skillsGrid","skillBadge","skillText","photoGallery","calculatorText","additionalRatesButton","additionalRatesText","calendarSection","readMoreButton","readMoreText","reviewItem","mapContainer","petsSection","petBreed","aboutSubsections","communicationSection","skillsSection","homeDetails","twoColumnLayout","singleColumnLayout","homeFeaturesGrid","featureBubble","reviewerPhoto","reviewerInfo","modalCloseIcon","modalScrollContent","reviewsGrid","specialistSection","specialistText","modalReviewItem","leftColumnMobile","seeAllButton","seeAllButtonText","modalServicesGrid","reviewMeta","ProfessionalProfile","professionalData","setProfessionalData","canGoBack","setCanGoBack","bioModalVisible","setBioModalVisible","reviewsModalVisible","setReviewsModalVisible","specialistModalVisible","setSpecialistModalVisible","favoriteServices","setFavoriteServices","servicesModalVisible","setServicesModalVisible","useResponsiveLayout","hasHistory","hasRouteParams","storedProfessional","parsedProfessional","loadProfessionalData","toggleFavorite","renderProfilePhoto","renderRatingStars","TruncatedText","maxLines","renderMap","MapContainer","TileLayer","Marker","center","zoom","attribution","styles2","HomeFeature","renderReview","renderAvailability","dynamicServicesBox","servicesScroll","dynamicProfileSection","dynamicProfileSectionMobile","getContentWidth","availableWidth","profileSectionMobile","servicesWrapper","servicesScrollContent","homeSection","noContractsText","contractTitle","ContractList","setContracts","fetchContracts","modalPicker","pickerModalContainer","pickerCloseButton","pickerCloseButtonText","OwnerPicker","selectedOwner","onSelectOwner","showOwnerPicker","setShowOwnerPicker","Picker","itemValue","Item","templateGrid","templateBox","templateTitle","noTemplatesText","ownerPickerContainer","ContractTemplate","templates","isTemplateModalVisible","setTemplateModalVisible","isEditModalVisible","setEditModalVisible","selectedTemplate","setSelectedTemplate","contractContent","setContractContent","setSelectedOwner","template","handleTemplateSelect","handleAddSignableField","prevContent","chronicleTitle","summary","ChronicleSummary","chronicles","chronicle","outerContainer","QuestionInput","dropdownPosition","setDropdownPosition","layout","setLayout","measure","fx","fy","px","py","toggleDropdown","onLayout","createButton","createButtonText","webModalContent","petOption","petOptionText","photoPreview","photoThumbnail","questionContainer","modalButtonContainer","addQuestionButton","addQuestionButtonText","answerInputContainer","answerInput","summaryInput","photoContainer","ChronicleForm","onCreateChronicle","questions","setQuestions","question","answer","isPreset","setSummary","photos","setPhotos","isCreating","setIsCreating","updateQuestion","newQuestions","resetForm","PhotoPreview","addNewQuestion","uploadingText","uploadingSpinner","handleCreateChronicle","newChronicle","useTemplateButton","useTemplateButtonText","MyContracts","setChronicles","setTemplates","fetchChronicles","fetchTemplates","prevChronicles","eyeIcon","successText","forgotPasswordButton","forgotPasswordText","ChangePassword","currentPassword","setCurrentPassword","newPassword","setNewPassword","setSuccess","showCurrentPassword","setShowCurrentPassword","showNewPassword","setShowNewPassword","showConfirmPassword","setShowConfirmPassword","contextScreenWidth","setToken","currentPasswordError","setCurrentPasswordError","newPasswordError","setNewPasswordError","storedToken","getToken","newPasswordValidation","sanitizedCurrentPassword","sanitizedNewPassword","changePassword","detail","handleForgotPassword","suggestionsWrapper","ServiceTypeSelect","filteredServices","setFilteredServices","onFocus","handleSelectService","ALL_ANIMAL_TYPES","SUPPORTED_LOCATIONS","zips","ALL_SEARCHABLE_LOCATIONS","getAllSearchableLocations","searchableItems","searchText","SearchRefiner","onFiltersChange","onShowProfessionals","onSearchResults","initialFilters","locationSuggestions","setLocationSuggestions","setService","service_query","selectedAnimals","setSelectedAnimals","overnightService","setOvernightService","overnight_service","priceRange","setPriceRange","price_max","verifiedOnly","setVerifiedOnly","insuredOnly","setInsuredOnly","filterBackgroundChecked","setFilterBackgroundChecked","filter_background_checked","filterInsured","setFilterInsured","filter_insured","filterElitePro","setFilterElitePro","filter_elite_pro","showOtherAnimalInput","setShowOtherAnimalInput","otherAnimalSearch","setOtherAnimalSearch","otherAnimalSuggestions","setOtherAnimalSuggestions","isSearching","setIsSearching","xlarge","locationInputWrapper","locationInput","modalBackdrop","suggestionItemNotSupported","suggestionTextNotSupported","suggestionType","datePickersContainer","dateInput","priceRangeContainer","priceText","selectedText","personButton","showProfessionalsButton","showProfessionalsText","useLocationButton","useLocationText","animalTypesContainer","animalTypeButton","animalTypeButtonSelected","animalTypeLabel","animalTypeLabelSelected","priceContainer","priceLabel","checkboxRow","checkboxLabel","badgeFilterRow","badgeIcon","headerButtons","iconButton","checkboxLabelContainer","searchButton","searchButtonText","searchButtonDisabled","otherAnimalInputWrapper","otherAnimalHeader","otherAnimalTitle","animalInputContainer","animalInput","addAnimalButton","addAnimalButtonText","animalSuggestionsWrapper","animalSuggestionsContainer","animalSuggestionItem","animalSuggestionText","animalSelectionWrapper","selectedAnimalsContainer","selectedAnimalsLabel","selectedAnimalTag","selectedAnimalText","modalSuggestionsWrapper","AnimalTypeButton","handleAnimalSelect","OtherAnimalInput","onSuggestionSelect","onAnimalSelect","animalInputRef","suggestionSelectedRef","closeButtonClickedRef","debouncedSearch","debounce","filteredAnimals","handleOtherAnimalClose","LocationInputSimple","isFocused","setIsFocused","suggestionsRef","containerRef","isOutsideContainer","hasSuggestions","suggestionsCount","handleTextChange","defaultSuggestions","filteredLocations","resultsCount","suggestion","price_min","radius_miles","page_size","searchProfessionals","ProfessionalCard","primary_service","backend_value","frontend_value","has_reviews","has_review_text","latest_highest_review_text","has_author_profile_pic","latest_review_author_profile_pic","has_reviewer_profile_pic","author_pic_url","reviewer_pic_url","hasReviews","hasBadges","badges","is_background_checked","is_insured","is_elite_pro","leftSection","profile_picture_url","fallbackIconContainer","distance","priceSection","fromText","price_per_visit","perNight","badgesContainer","backgroundCheckedBadge","badgeText","backgroundCheckedBadgeText","insuredBadge","insuredBadgeText","eliteProBadge","eliteProBadgeText","listContent","repeatOwners","bestReviewContainer","bestReviewTextContainer","bestReview","readMore","mobileHeaderRight","filterChips","filterChipText","emptyStateMessage","adjustSearchButton","adjustSearchButtonText","fallbackReviewerIconContainer","ProfessionalList","professionals","onProfessionalSelect","filters","onFilterPress","renderEmptyState","getEmptyStateMessage","isColoradoSprings","criteria","animalText","criteriaText","renderHeader","professional_id","Popup","useMap","L","reactLeaflet","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","HoverMarker","onShowServicesModal","markerRef","popupRef","MarkerIcon","divIcon","html","iconAnchor","popupAnchor","marker","leafletMarker","getElement","_leaflet_marker","on","openOn","_map","eventHandlers","originalEvent","openPopup","autoClose","closeOnClick","closeOnEscapeKey","handleViewDetails","WebMapComponent","onMarkerPress","region","fallbackContainer","fallbackText","mapBounds","calculateMapBounds","validProfessionals","prof","lats","lngs","minLat","maxLat","minLng","maxLng","centerLat","centerLng","latDiff","lngDiff","maxDiff","markerPin","markerInner","markerText","calloutContainer","calloutTitle","calloutLocation","calloutService","calloutPrice","calloutButton","calloutButtonText","calloutText","popupContent","popupTitle","popupLocation","popupService","popupPrice","popupButton","popupButtonText","customMarker","MapViewComponent","headerTop","professionalLocation","headerLocationContainer","mobileMainView","mobileServiceItem","mobileServiceContent","mobileServiceName","mobileServicePrice","servicesScrollView","serviceItemSelected","serviceNameSelected","servicePriceSelected","serviceDetails","overnightBadge","additionalRateItem","additionalRateRow","additionalRateTitleContainer","additionalRateTitle","infoIcon","additionalRatePrice","tooltipModalOverlay","tooltipModalContent","tooltipHeader","tooltipTitle","tooltipCloseButton","contactButtonDisabled","contactButtonContent","errorModalCloseButton","errorModalText","errorModalOkButton","errorModalOkText","professionalProfilePhoto","professionalProfilePhotoPlaceholder","noReviewsText","reviewsTabContent","reviewProfileImage","defaultReviewProfileImage","headerBadgesContainer","headerBadgesScrollContent","headerBadge","headerBadgeText","headerBackgroundCheckedBadge","headerBackgroundCheckedBadgeText","headerInsuredBadge","headerInsuredBadgeText","headerEliteProBadge","headerEliteProBadgeText","ProfessionalServicesModal","primaryService","setShowTooltip","isCreatingConversation","setIsCreatingConversation","showErrorModal","setShowErrorModal","loadingReviews","setLoadingReviews","fetchServices","primaryServiceData","getProfessionalServicesDetailed","profile_pic_url","formatAnimalTypes","types","renderServiceDetails","rate_id","renderReviews","handleBackToServices","current_route","current_params","route_count","current_index","from_screen","previous_screen","createConversation","full_response","currentParams","from_route","navigation_timestamp","navigation_state","navigationParams","otherUserProfilePic","SearchProfessionalsListing","isSingleView","setIsSingleView","setProfessionals","setFilters","isMapMinimized","setIsMapMinimized","isLeftColumnExpanded","setIsLeftColumnExpanded","showingSearch","setShowingSearch","searchResults","setSearchResults","currentSearchParams","setCurrentSearchParams","setRegion","latitudeDelta","longitudeDelta","activeFilters","setActiveFilters","selectedProfessional","setSelectedProfessional","truncateLocation","generateFilterCategories","extractedCity","cityMatch","extractCity","finalCategories","loadInitialProfessionals","filterCategories","handleSearchResults","handleFiltersChange","newFilters","handleLoadMore","handleProfessionalSelect","handleShowServicesModal","toggleMapSize","handleShowProfessionals","view","toggleLeftColumn","leftColumnToggle","mapColumn","containerMobile","mobileHeaderText","headerIcon","mapToggleButton","renderContent","leftColumnWidth","mapColumnWidth","MapView","handleCloseServicesModal","bookingsContent","stickyHeader","stickyHeaderContent","filterScrollContent","filtersWrapper","filterButtonHovered","filterContent","allButton","allButtonText","pendingButton","pendingButtonText","confirmedButton","confirmedButtonText","completedButton","completedButtonText","listHeaderSpacing","listContainer","loadingMoreContainer","emptyStateSubtitle","outlineWidth","MyBookings","setPage","hoveredFilter","setHoveredFilter","subscription","fetchBookings","pageNum","isLoadMore","newBookings","professional_bookings","owner_bookings","searchLower","renderBookingCard","onCancel","handleCancelBooking","ListHeaderComponent","EmptyStateMessage","logoContainer","logoText","mobileLogo","LogoHeader","onProfilePress","userProfileImage","tintColor","handleProfilePress","safeAreaContainer","ServiceManagerScreen","setIsMobileBrowser","previousRoute","setRouteHistory","searchBarContainer","webSearchInput","BlogScreen","filteredPosts","setFilteredPosts","handleSearch","truncatedContent","authorBio","postInfo","referencesTitle","reference","referenceText","errorButton","errorButtonText","BlogPost","setPost","isValidPost","postData","storedPost","parsedPost","postId","foundPost","loadPost","handleReferencePress","CrossPlatformContent","ValidationModal","CityDropdown","selectedCity","onSelectCity","setIsOpen","filteredCities","displayCities","requiredField","renderCityItem","cityItem","otherCityItem","cityItemText","otherCityText","cityList","formSection","nameField","checkboxGroup","checkboxIcon","radioGroup","radioContainer","radio","radioSelected","radioLabel","otherInputContainer","otherInput","addressSection","cityStateContainer","cityInput","stateInput","zipInput","addressNote","optional","referralSection","buttonSelected","buttonTextSelected","requiredFieldNote","requiredAsterisk","linkContainer","copyButton","Waitlist","setPhone","setPetInfo","userType","setUserType","hesitations","setHesitations","desiredFeatures","setDesiredFeatures","newsletter","setNewsletter","agreeToTerms","setAgreeToTerms","otherService","setOtherService","showOtherInput","setShowOtherInput","streetAddress","setStreetAddress","aptUnit","setAptUnit","setCity","stateRegion","setStateRegion","zipCode","setZipCode","referralSource","setReferralSource","otherReferralSource","setOtherReferralSource","validationModal","setValidationModal","phoneError","setPhoneError","setSelectedCity","otherCity","setOtherCity","cityError","setCityError","handleBackToSignup","handleCopyLink","Clipboard","setString","formatted","area","prefix","toggleService","TestToast","showSuccessToast","showErrorToast","showInfoToast","showWarningToast","showLongToast","verifyResult","acceptResult","acceptInvitation","acceptError","topRow","profileInfoWrap","nameContainerWide","petsText","petsTextWide","whiteSpace","textOverflow","servicesLabel","servicesText","servicesTextWide","statusSection","lastBookingContainer","lastBookingText","noBookingsContainer","noBookingsText","pastBookingsContainer","pastBookingsText","upcomingContainer","upcomingText","buttonSection","buttonSectionWrap","mobileBtnSection","viewProfileButton","viewProfileText","createBookingText","buttonHovered","activeBookingsContainer","activeBookingsText","ConnectionCard","connection","onViewProfile","isClient","isExtraWideScreen","isViewMessagesHovered","setIsViewMessagesHovered","isCreateBookingHovered","setIsCreateBookingHovered","active_bookings_count","iconColor","textStyle","has_past_booking","connectionId","connectionName","connectionType","hasActivePastBooking","activeBookingsCount","upcoming_booking","connectionsContent","searchAndInviteContainer","searchContainerFocused","caretColor","inviteButtonSmall","inviteButtonSmallText","activeBookingsButton","activeBookingsButtonText","noBookingsButton","noBookingsButtonText","pastBookingsButton","pastBookingsButtonText","inviteButton","inviteButtonText","footerText","inviteTypeToggle","inviteTypeButton","inviteTypeButtonActive","inviteTypeText","inviteTypeTextActive","emailInput","emailInputError","generatedLinkContainer","generatedLink","sendInviteButton","sendInviteButtonText","columnWrapper","cardWrapper","mobileCardWrapper","wideScreenCardWrapper","Connections","setConnections","showInviteModal","setShowInviteModal","inviteEmail","setInviteEmail","isInviting","setIsInviting","searchFocused","setSearchFocused","searchInputRef","allConnections","setAllConnections","invitationType","setInvitationType","setGeneratedLink","inviteError","setInviteError","inviteSuccess","setInviteSuccess","isInviteButtonHovered","setIsInviteButtonHovered","isCreateServiceButtonHovered","setIsCreateServiceButtonHovered","emailValidationError","setEmailValidationError","handleRoleNavigation","fetchConnections","getUserConnections","connectionsList","newConnections","filterConnectionsLocally","validateInviteEmail","handleInviteClient","baseConnections","handleViewMessages","client_id","numColumns","columnWrapperStyle","clients","all","active","pending","past","clipboard","writeText","inviteClient","invitation_link","Stack","createStackNavigator","screens","createBottomTabNavigator","component","isMobileView","setIsUserScrolling","AutoScrollSection","cardWidth","scrollViewRef","currentIndex","setCurrentIndex","userScrolling","setUserScrolling","autoScrollTimerRef","nextIndex","scrollToIndex","handleScrollEnd","pagingEnabled","handleScrollBegin","onScrollEndDrag","handleDotPress","cardStyles","iconContainer","bounces","overScrollMode","Features","roadmapColors","featureItemStyle","featureContentStyle","FontAwesome6","FontAwesome","ReviewsSection","BlogSection","renderBlogPost","tagIndex","ContactSection","isSubmitted","setIsSubmitted","webFormData","handleSubmit","isWebSubmitted","webErrors","errors","currentlySubmitting","submitting","subject","mailtoUrl","encodeURIComponent","showPassword","setShowPassword","rememberMe","setRememberMe","handleLogin","fromScreen","handleDocumentKeyPress","platformNavigation","path","togglePasswordVisibility","uid","new_password","createLinking","authContext","enabled","prefixes","getInitialURL","isProtectedPath","authContextExists","authContextInitialized","isInitialized","authContextSignedIn","waitCount","baseUrl","config","Home","SignIn","Invite","exact","ResetPassword","ResetPasswordConfirm","senderName","More","Blog","navigationRef","createNavigationContainerRef","isReady","AppContent","checkAuthStatus","setInitialRoute","currentPath","isOnProtectedPath","initializeApp","checkAndRedirectProtectedRoute","NavigationContainer","linking","onStateChange","isProtectedRoute","shouldRedirect","MessageNotificationProvider","PaperProvider","Navigator","initialRouteName","screenOptions","headerShown","Navigation","TransitionPresets","SlideFromRightIOS","presentation","Screen","warningBanner","warningContent","waitlistButtonText","App","fontsLoaded","setFontsLoaded","initializeFonts","AuthProvider","clientAgreedTos","utcDates","startTimeStr","endTimeStr","endDateStr","isMidnightEnd","isTimeBeforeStart","recurringData","getUserName","isFormData","current_password","hasFile","pair","timeout","formattedAdditionalRates","getConnectionProfile","userId","is_professional_invite","sendReferral","referralType","referral_type","getInvitations","getInvitationDetails","already_accepted","deleteInvitation","resendInvitation","termsOfServiceAgreedByPro","terms_of_service_agreed_by_pro","getUnreadMessageCount","uploadMessageImage","compressImage","uriType","compressWebBase64Image","compressWebImage","originalWidth","originalHeight","newMaxWidth","newQuality","ratio","tempCanvas","tempCtx","tempWidth","tempHeight","compressedDataUrl","originalDimensions","newDimensions","sizeReduction","images","caption","totalEstimatedSize","totalEstimatedSizeMB","processedImages","imageSource","is_clickable","sendImageMessage","sendTextMessage","contentLength","is_professional_review","toLocation","fromLocation","currentRouteInfo","currentRouteName","navigatingTo","newCurrentRoute","useReactRoute","_worklet_1130445313934_init_data","code","_worklet_238094918771_init_data","_worklet_7555450561358_init_data","NavigationContent","propState","descriptors","propNavigation","shouldRender","reactNavigation","useReactNavigation","reactRoute","setVisible","isMenuOpen","setIsMenuOpen","setCurrentRoute","setNotificationCount","setIsCollapsed","hasUnreadMessages","ownerUnreadCount","professionalUnreadCount","getCurrentRoleUnreadCount","getOtherRoleUnreadCount","hasCurrentRoleUnreadMessages","line1Rotation","useSharedValue","line2Opacity","line3Rotation","line1TranslateY","line3TranslateY","routeFromProps","routeFromHook","isInMessageHistory","animateHamburgerMenu","renderLogRef","stateSource","navSource","checkAndResetConversationNotifications","selectedConvId","onMessagesScreen","updateCurrentRoute","urlRoute","oldRoute","navigationExists","addListenerExists","removeNavigationListener","routeInfo","routeCheckInterval","lastCheckedRoute","AnimatedHamburgerMenu","line1Style","useAnimatedStyle","anonymous","__closure","__workletHash","__initData","line2Style","line3Style","toX","withTiming","closeMenu","toggleMenu","handleRoleSwitch","handleLogout","renderMobileMenuItems","currentRoleCount","hasCurrentRoleUnread","notification","mobileRoleToggleContainer","mobileRoleToggleTitle","mobileRoleButtonsContainer","mobileRoleButton","mobileRoleButtonActive","mobileRoleButtonText","mobileRoleButtonTextActive","roleNotificationBadge","roleNotificationText","mobileMenuItem","mobileLogoutItem","mobileMenuItemText","mobileLogoutText","mobileMessageNotificationBadge","mobileMessageNotificationText","navContainer","renderDesktopSidebar","sidebarWidth","logoutItem","sidebarItem","activeItem","sidebarItemText","messageNotificationBadge","messageNotificationText","sidebarContainer","sidebarLogoContainer","logoButton","sidebarLogo","menuItemsContainer","roleToggleContainer","roleToggleTitle","roleButtonsContainer","roleButtonTextCollapsed","logoutButtonContainer","signedOutHeaderWeb","webLogo","mobileRightContent","hamburgerMenuContainer","hamburgerNotificationBadge","hamburgerNotificationText","mobileMenu","webDesktopMenu","shouldCheckMessageState","setShouldCheckMessageState","isPageReload","TYPE_RELOAD","hasURLParams","isMobilePlatform","shouldHideNavigation","platformOS","titleContainer","titleContainer2","desktopNav","navItem","customNavBar","navButton","navText","webNavItem","webNavText","navLinkContainer","logoutText","menuContent","notificationText","roleButtonDisabled","roleButtonTextDisabled","mobileRoleButtonDisabled","mobileRoleButtonTextDisabled","messageNotificationDot","mobileMessageNotificationDot","roleNotificationIndicator","signedOutOptions","signedOutButton","signedOutButtonText","signInButton","signedOutNavButtons","webSignInButton","webSignInText","NODE_ENV","STAGING_API_BASE_URL_ANDROID","STAGING_API_BASE_URL_IOS","STAGING_API_BASE_URL_WEB","PRODUCTION_API_BASE_URL_ANDROID","PRODUCTION_API_BASE_URL_IOS","PRODUCTION_API_BASE_URL_WEB","DEV_API_BASE_URL_ANDROID","DEV_API_BASE_URL_IOS","DEV_API_BASE_URL_WEB","STAGING_MEDIA_URL","PRODUCTION_MEDIA_URL","isDevelopment","isStaging","MEDIA_URL","isProduction","debugEnabled","setDebugEnabled","AuthService","accessToken","refreshToken","isRefreshing","refreshSubscribers","tokenExpiryTime","lastValidation","authStateCallbacks","isSigningOut","lastTokenCheck","TOKEN_REFRESH_THRESHOLD","TOKEN_PREEMPTIVE_REFRESH","VALIDATION_CACHE_TIME","onAuthStateChange","notifyAuthStateChange","parseJwt","base64Url","decoded","repeat","atob","tokenLength","tokenStart","errorStack","getTimeUntilExpiry","parsedToken","exp","expiryTime","shouldRefreshToken","timeUntilExpiry","shouldRefresh","refreshTokens","sub","refreshStartTime","refreshDuration","clearTokens","getAccessToken","validateToken","localStorage","setTokens","isValidJWT","memoryAccessToken","memoryRefreshToken","accessTokenExists","refreshTokenExists","accessTokenLength","refreshTokenLength","accessTokenStart","refreshTokenStart","hasAccessToken","hasRefreshToken","forceSignOut","hasValue","valueLength","sessionValue","sessionError","is_PRODUCTION","authService","isInitializedRef","signOutTimeoutRef","setIsSignedIn","setUserRole","setIsApprovedProfessional","setIsInitialized","setTimeSettings","timezone_abbrev","setIsPrototype","setIsDebug","multiRemove","navError","consecutiveAuth401Errors","lastErrorTime","requestInterceptor","interceptors","request","use","responseInterceptor","originalRequest","_retry","isAuthLoggingCall","isMessageCall","isConversationCall","refreshPromise","timeoutPromise","race","newToken","refreshError","isNetworkError","errorCode","isBackendDown","eject","focusCheckTimeout","handleWindowFocus","handleStorageEvent","storageArea","localStorageUserToken","localStorageRefreshToken","hasUserToken","initTimeout","storedAccessToken","storedRefreshToken","hasValidToken","timeUntilExpirySeconds","isExpired","refreshTimeUntilExpiry","fetchUserName","getProfessionalStatus","storedRole","finalRole","suggestedRole","first_name","is_approved","handleDimensionsChange","checkStateConsistency","sessionStorageUserToken","sessionStorageRefreshToken","hasStoredTokens","hasMemoryTokens","consistencyInterval","monitorInterval","localStorageToken","refreshTokenValue","timeSettingsData","initialRole","newRole","getCurrentRoute","isAuthenticated","debugTokenStatus","setHasUnreadMessages","setUnreadCount","setOwnerUnreadCount","setProfessionalUnreadCount","conversationCounts","setConversationCounts","lastApiResponse","setLastApiResponse","websocketConnected","setWebsocketConnected","websocketInitialized","setWebsocketInitialized","lastApiCheck","setLastApiCheck","initialCheckDoneRef","pendingCheckRef","reconnectIntervalRef","debounceTimerRef","websocketDataReceivedRef","lastCheckTimeRef","connectionHealthyRef","websocketRetryAttemptsRef","lastHeartbeatReceivedRef","lastHeartbeatSentRef","heartbeatTimeoutRef","initialApiCallMadeRef","websocketTimeoutRef","lastApiCheckRef","prevUserRoleRef","checkUnreadMessages","force","makeApiCall","isWebSocketConnected","waitForWebSocketWithFallback","checkWebSocketAndWait","connected","unread_count","conversation_counts","ownerCount","proCount","conversation_role_map","owner_unread_count","professional_unread_count","totalCount","onNewMessage","messageData","messageRole","message_role","conversation_role","isForOwnerRole","isForProfessionalRole","recipient_role","sender_type","currentUserRole","recipientRole","senderType","userIsProfessionalInConversation","prevCounts","prevConvCount","newConvCount","totalUnreadCount","conversationUnreadCount","allConversationCounts","currentTotalUnread","newTotalCount","newCounts","newOwnerCount","newProCount","updatedCounts","previousOwnerCount","previousProCount","currentRoleHasUnread","conversationsRemaining","remainingConvs","setWebsocketDataReceivedRef","initializeWebSocket","newMessageHandler","messageHandler","unreadUpdateHandler","heartbeatHandler","connectionHandler","forced","handleVisibilityChange","isWSConnected","reconnectIfNeeded","startProgressiveRetry","debouncedCheckUnreadMessages","contextValue","allCounts","conversationCountsSize","returned","loadFonts","fontFamilies","fontWeights","semiBold","bold","DefaultTheme","accent","pathSegments","getURLParams","goBack","back","navigateTo","replaceRoute","updateURLParams","pushState","getURLHash","setURLHash","addNavigationListener","handlePopState","isWeb","getUserAgent","Version","redirectToSignIn","parseISO","momentDate","convertTo24Hour","modifier","convertTo12Hour","hours12","fromTimezone","utc","utcTime","output","originalMoment","isoString","parseError","toDate","timeParts","localDateStr","localTimeStr","getFormattedTimes","startYear","startMonth","startDay","startHours","endYear","endMonth","endDay","endHours","startDateStr","formatInTimeZone","startDateTime","durationMs","remainingMs","startLocalDate","endLocalDate","startZonedDate","fromZonedTime","toZonedTime","endZonedDate","startLocal","endLocal","getTimezoneOffset","formatOccurrenceFromUTC","fullTimezone","localStart","localEnd","hasDSTChange","tzAbbrev","SHORT_DATE","MEDIUM_DATE","LONG_DATE","TIME_ONLY_24H","DATE_TIME","DATE_TIME_WITH_TZ","DATE_RANGE","DATE_TIME_RANGE","formatType","zoneAbbr","startUtcMoment","endUtcMoment","startLocalMoment","endLocalMoment","startFormatted","endFormatted","finalStart","finalEnd","convertTimeFromUTC","dateChanged","fullDateTime","local","adjustedDate","uniqueDates","sortedOccurrences","localStartTime","localEndTime","actualStartDate","actualEndDate","firstDateKey","firstTime","timeObj","connectionAttempts","maxConnectionAttempts","disconnectTimeout","messageHandlers","_reconnectTimeout","forceDisconnect","_hasVisibilityListener","CLOSING","CLOSED","resetDisconnectTimeout","setupVisibilityListener","wsEndpoint","handleOpen","handleError","scheduleReconnect","notifyHandlers","wasConnected","preserveToken","savedToken","webpackContext","req","webpackContextResolve","__webpack_require__","o","module","exports","__webpack_module_cache__","moduleId","cachedModule","loaded","__webpack_modules__","call","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","n","getter","__esModule","definition","defineProperty","enumerable","g","globalThis","Function","obj","prop","hasOwnProperty","Symbol","toStringTag","nmd","paths","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}